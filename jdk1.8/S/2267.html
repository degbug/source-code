<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/image/ComponentColorModel.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L355">[^]</a><a href="#L2936">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L355" title="Defined at 355.">bitsHelper</a></li>
<li><a href="#L366" title="Defined at 366.">bitsArrayHelper</a></li>
<li><a href="#L393" title="Defined at 393.">setupLUTs</a></li>
<li><a href="#L480" title="Defined at 480.">initScale</a></li>
<li><a href="#L609" title="Defined at 609.">getRGBComponent</a></li>
<li><a href="#L669" title="Defined at 669.">getRed</a></li>
<li><a href="#L691" title="Defined at 691.">getGreen</a></li>
<li><a href="#L713" title="Defined at 713.">getBlue</a></li>
<li><a href="#L730" title="Defined at 730.">getAlpha</a></li>
<li><a href="#L762" title="Defined at 762.">getRGB</a></li>
<li><a href="#L778" title="Defined at 778.">extractComponent</a></li>
<li><a href="#L892" title="Defined at 892.">getRGBComponent</a></li>
<li><a href="#L943" title="Defined at 943.">getRed</a></li>
<li><a href="#L978" title="Defined at 978.">getGreen</a></li>
<li><a href="#L1013" title="Defined at 1013.">getBlue</a></li>
<li><a href="#L1044" title="Defined at 1044.">getAlpha</a></li>
<li><a href="#L1125" title="Defined at 1125.">getRGB</a></li>
<li><a href="#L1185" title="Defined at 1185.">getDataElements</a></li>
<li><a href="#L1681" title="Defined at 1681.">getComponents</a></li>
<li><a href="#L1741" title="Defined at 1741.">getComponents</a></li>
<li><a href="#L1816" title="Defined at 1816.">getUnnormalizedComponents</a></li>
<li><a href="#L1865" title="Defined at 1865.">getNormalizedComponents</a></li>
<li><a href="#L1894" title="Defined at 1894.">getDataElement</a></li>
<li><a href="#L1952" title="Defined at 1952.">getDataElements</a></li>
<li><a href="#L2042" title="Defined at 2042.">getDataElement</a></li>
<li><a href="#L2111" title="Defined at 2111.">getDataElements</a></li>
<li><a href="#L2343" title="Defined at 2343.">getNormalizedComponents</a></li>
<li><a href="#L2450" title="Defined at 2450.">coerceData</a></li>
<li><a href="#L2785" title="Defined at 2785.">isCompatibleRaster</a></li>
<li><a href="#L2818" title="Defined at 2818.">createCompatibleWritableRaster</a></li>
<li><a href="#L2850" title="Defined at 2850.">createCompatibleSampleModel</a></li>
<li><a href="#L2882" title="Defined at 2882.">isCompatibleSampleModel</a></li>
<li><a href="#L2915" title="Defined at 2915.">getAlphaRaster</a></li>
<li><a href="#L2936" title="Defined at 2936.">equals</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.image;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.color.ColorSpace;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.color.ICC_ColorSpace;
<a id="L30" name="L30"></a>  30 
<div class="comment">
  A <code>ColorModel</code> class that works with pixel values that
  represent color and alpha information as separate samples and that
  store each sample in a separate data element.  This class can be
  used with an arbitrary <code>ColorSpace</code>.  The number of
  color samples in the pixel values must be same as the number of
  color components in the <code>ColorSpace</code>. There may be a
  single alpha sample.
  <p>
  For those methods that use
  a primitive array pixel representation of type <code>transferType</code>,
  the array length is the same as the number of color and alpha samples.
  Color samples are stored first in the array followed by the alpha
  sample, if present.  The order of the color samples is specified
  by the <code>ColorSpace</code>.  Typically, this order reflects the
  name of the color space type. For example, for <code>TYPE_RGB</code>,
  index 0 corresponds to red, index 1 to green, and index 2 to blue.
  </p><p>
  The translation from pixel sample values to color/alpha components for
  display or processing purposes is based on a one-to-one correspondence of
  samples to components.
  Depending on the transfer type used to create an instance of
  <code>ComponentColorModel</code>, the pixel sample values
  represented by that instance may be signed or unsigned and may
  be of integral type or float or double (see below for details).
  The translation from sample values to normalized color/alpha components
  must follow certain rules.  For float and double samples, the translation
  is an identity, i.e. normalized component values are equal to the
  corresponding sample values.  For integral samples, the translation
  should be only a simple scale and offset, where the scale and offset
  constants may be different for each component.  The result of
  applying the scale and offset constants is a set of color/alpha
  component values, which are guaranteed to fall within a certain
  range.  Typically, the range for a color component will be the range
  defined by the <code>getMinValue</code> and <code>getMaxValue</code>
  methods of the <code>ColorSpace</code> class.  The range for an
  alpha component should be 0.0 to 1.0.
  </p><p>
  Instances of <code>ComponentColorModel</code> created with transfer types
  <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
  and <code>DataBuffer.TYPE_INT</code> have pixel sample values which
  are treated as unsigned integral values.
  The number of bits in a color or alpha sample of a pixel value might not
  be the same as the number of bits for the corresponding color or alpha
  sample passed to the
  <code>ComponentColorModel(ColorSpace, int[], boolean, boolean, int, int)</code>
  constructor.  In
  that case, this class assumes that the least significant n bits of a sample
  value hold the component value, where n is the number of significant bits
  for the component passed to the constructor.  It also assumes that
  any higher-order bits in a sample value are zero.  Thus, sample values
  range from 0 to 2<sup>n</sup> - 1.  This class maps these sample values
  to normalized color component values such that 0 maps to the value
  obtained from the <code>ColorSpace's</code> <code>getMinValue</code>
  method for each component and 2<sup>n</sup> - 1 maps to the value
  obtained from <code>getMaxValue</code>.  To create a
  <code>ComponentColorModel</code> with a different color sample mapping
  requires subclassing this class and overriding the
  <code>getNormalizedComponents(Object, float[], int)</code> method.
  The mapping for an alpha sample always maps 0 to 0.0 and
  2<sup>n</sup> - 1 to 1.0.
  </p><p>
  For instances with unsigned sample values,
  the unnormalized color/alpha component representation is only
  supported if two conditions hold.  First, sample value value 0 must
  map to normalized component value 0.0 and sample value 2<sup>n</sup> - 1
  to 1.0.  Second the min/max range of all color components of the
  <code>ColorSpace</code> must be 0.0 to 1.0.  In this case, the
  component representation is the n least
  significant bits of the corresponding sample.  Thus each component is
  an unsigned integral value between 0 and 2<sup>n</sup> - 1, where
  n is the number of significant bits for a particular component.
  If these conditions are not met, any method taking an unnormalized
  component argument will throw an <code>IllegalArgumentException</code>.
  </p><p>
  Instances of <code>ComponentColorModel</code> created with transfer types
  <code>DataBuffer.TYPE_SHORT</code>, <code>DataBuffer.TYPE_FLOAT</code>, and
  <code>DataBuffer.TYPE_DOUBLE</code> have pixel sample values which
  are treated as signed short, float, or double values.
  Such instances do not support the unnormalized color/alpha component
  representation, so any methods taking such a representation as an argument
  will throw an <code>IllegalArgumentException</code> when called on one
  of these instances.  The normalized component values of instances
  of this class have a range which depends on the transfer
  type as follows: for float samples, the full range of the float data
  type; for double samples, the full range of the float data type
  (resulting from casting double to float); for short samples,
  from approximately -maxVal to +maxVal, where maxVal is the per
  component maximum value for the <code>ColorSpace</code>
  (-32767 maps to -maxVal, 0 maps to 0.0, and 32767 maps
  to +maxVal).  A subclass may override the scaling for short sample
  values to normalized component values by overriding the
  <code>getNormalizedComponents(Object, float[], int)</code> method.
  For float and double samples, the normalized component values are
  taken to be equal to the corresponding sample values, and subclasses
  should not attempt to add any non-identity scaling for these transfer
  types.
  </p><p>
  Instances of <code>ComponentColorModel</code> created with transfer types
  <code>DataBuffer.TYPE_SHORT</code>, <code>DataBuffer.TYPE_FLOAT</code>, and
  <code>DataBuffer.TYPE_DOUBLE</code>
  use all the bits of all sample values.  Thus all color/alpha components
  have 16 bits when using <code>DataBuffer.TYPE_SHORT</code>, 32 bits when
  using <code>DataBuffer.TYPE_FLOAT</code>, and 64 bits when using
  <code>DataBuffer.TYPE_DOUBLE</code>.  When the
  <code>ComponentColorModel(ColorSpace, int[], boolean, boolean, int, int)</code>
  form of constructor is used with one of these transfer types, the
  bits array argument is ignored.
  </p><p>
  It is possible to have color/alpha sample values
  which cannot be reasonably interpreted as component values for rendering.
  This can happen when <code>ComponentColorModel</code> is subclassed to
  override the mapping of unsigned sample values to normalized color
  component values or when signed sample values outside a certain range
  are used.  (As an example, specifying an alpha component as a signed
  short value outside the range 0 to 32767, normalized range 0.0 to 1.0, can
  lead to unexpected results.) It is the
  responsibility of applications to appropriately scale pixel data before
  rendering such that color components fall within the normalized range
  of the <code>ColorSpace</code> (obtained using the <code>getMinValue</code>
  and <code>getMaxValue</code> methods of the <code>ColorSpace</code> class)
  and the alpha component is between 0.0 and 1.0.  If color or alpha
  component values fall outside these ranges, rendering results are
  indeterminate.
  </p><p>
  Methods that use a single int pixel representation throw
  an <code>IllegalArgumentException</code>, unless the number of components
  for the <code>ComponentColorModel</code> is one and the component
  value is unsigned -- in other words,  a single color component using
  a transfer type of <code>DataBuffer.TYPE_BYTE</code>,
  <code>DataBuffer.TYPE_USHORT</code>, or <code>DataBuffer.TYPE_INT</code>
  and no alpha.
  </p><p>
  A <code>ComponentColorModel</code> can be used in conjunction with a
  <code>ComponentSampleModel</code>, a <code>BandedSampleModel</code>,
  or a <code>PixelInterleavedSampleModel</code> to construct a
  <code>BufferedImage</code>.
  @see ColorModel
  @see ColorSpace
  @see ComponentSampleModel
  @see BandedSampleModel
  @see PixelInterleavedSampleModel
  @see BufferedImage</p></div>
<a id="L177" name="L177"></a> 177 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1575.html" title="Multiple referred from 22 places.">ComponentColorModel</a> <strong class="reserved">extends</strong> <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> <em class="brace">{</em>
<a id="L178" name="L178"></a> 178 
<div class="comment">
      <code>signed</code>  is <code>true</code> for <code>short</code>,
      <code>float</code>, and <code>double</code> transfer types; it
      is <code>false</code> for <code>byte</code>, <code>ushort</code>,
      and <code>int</code> transfer types.</div>
<a id="L185" name="L185"></a> 185     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> signed; <em class="comment">// true for transfer types short, float, double</em>
<a id="L186" name="L186"></a> 186                             <em class="comment">// false for byte, ushort, int</em>
<a id="L187" name="L187"></a> 187     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> is_sRGB_stdScale;
<a id="L188" name="L188"></a> 188     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> is_LinearRGB_stdScale;
<a id="L189" name="L189"></a> 189     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> is_LinearGray_stdScale;
<a id="L190" name="L190"></a> 190     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> is_ICCGray_stdScale;
<a id="L191" name="L191"></a> 191     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] tosRGB8LUT;
<a id="L192" name="L192"></a> 192     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] fromsRGB8LUT8;
<a id="L193" name="L193"></a> 193     <strong class="reserved">private</strong> <strong class="reserved">short</strong>[] fromsRGB8LUT16;
<a id="L194" name="L194"></a> 194     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] fromLinearGray16ToOtherGray8LUT;
<a id="L195" name="L195"></a> 195     <strong class="reserved">private</strong> <strong class="reserved">short</strong>[] fromLinearGray16ToOtherGray16LUT;
<a id="L196" name="L196"></a> 196     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> needScaleInit;
<a id="L197" name="L197"></a> 197     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> noUnnorm;
<a id="L198" name="L198"></a> 198     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> nonStdScale;
<a id="L199" name="L199"></a> 199     <strong class="reserved">private</strong> <strong class="reserved">float</strong>[] <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>;
<a id="L200" name="L200"></a> 200     <strong class="reserved">private</strong> <strong class="reserved">float</strong>[] diffMinMax;
<a id="L201" name="L201"></a> 201     <strong class="reserved">private</strong> <strong class="reserved">float</strong>[] compOffset;
<a id="L202" name="L202"></a> 202     <strong class="reserved">private</strong> <strong class="reserved">float</strong>[] compScale;
<a id="L203" name="L203"></a> 203 
<div class="comment">
      Constructs a <code>ComponentColorModel</code> from the specified
      parameters. Color components will be in the specified
      <code>ColorSpace</code>.  The supported transfer types are
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>,
      <code>DataBuffer.TYPE_SHORT</code>, <code>DataBuffer.TYPE_FLOAT</code>,
      and <code>DataBuffer.TYPE_DOUBLE</code>.
      If not null, the <code>bits</code> array specifies the
      number of significant bits per color and alpha component and its
      length should be at least the number of components in the
      <code>ColorSpace</code> if there is no alpha
      information in the pixel values, or one more than this number if
      there is alpha information.  When the <code>transferType</code> is
      <code>DataBuffer.TYPE_SHORT</code>, <code>DataBuffer.TYPE_FLOAT</code>,
      or <code>DataBuffer.TYPE_DOUBLE</code> the <code>bits</code> array
      argument is ignored.  <code>hasAlpha</code> indicates whether alpha
      information is present.  If <code>hasAlpha</code> is true, then
      the boolean <code>isAlphaPremultiplied</code>
      specifies how to interpret color and alpha samples in pixel values.
      If the boolean is true, color samples are assumed to have been
      multiplied by the alpha sample. The <code>transparency</code>
      specifies what alpha values can be represented by this color model.
      The acceptable <code>transparency</code> values are
      <code>OPAQUE</code>, <code>BITMASK</code> or <code>TRANSLUCENT</code>.
      The <code>transferType</code> is the type of primitive array used
      to represent pixel values.
      @param colorSpace       The <code>ColorSpace</code> associated
                              with this color model.
      @param bits             The number of significant bits per component.
                              May be null, in which case all bits of all
                              component samples will be significant.
                              Ignored if transferType is one of
                              <code>DataBuffer.TYPE_SHORT</code>,
                              <code>DataBuffer.TYPE_FLOAT</code>, or
                              <code>DataBuffer.TYPE_DOUBLE</code>,
                              in which case all bits of all component
                              samples will be significant.
      @param hasAlpha         If true, this color model supports alpha.
      @param isAlphaPremultiplied If true, alpha is premultiplied.
      @param transparency     Specifies what alpha values can be represented
                              by this color model.
      @param transferType     Specifies the type of primitive array used to
                              represent pixel values.
      @throws IllegalArgumentException If the <code>bits</code> array
              argument is not null, its length is less than the number of
              color and alpha components, and transferType is one of
              <code>DataBuffer.TYPE_BYTE</code>,
              <code>DataBuffer.TYPE_USHORT</code>, or
              <code>DataBuffer.TYPE_INT</code>.
      @throws IllegalArgumentException If transferType is not one of
              <code>DataBuffer.TYPE_BYTE</code>,
              <code>DataBuffer.TYPE_USHORT</code>,
              <code>DataBuffer.TYPE_INT</code>,
              <code>DataBuffer.TYPE_SHORT</code>,
              <code>DataBuffer.TYPE_FLOAT</code>, or
              <code>DataBuffer.TYPE_DOUBLE</code>.
      @see ColorSpace
      @see java.awt.Transparency</div>
<a id="L267" name="L267"></a> 267     <strong class="reserved">public</strong> ComponentColorModel (<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> colorSpace,
<a id="L268" name="L268"></a> 268                                 <strong class="reserved">int</strong>[] bits,
<a id="L269" name="L269"></a> 269                                 <strong class="reserved">boolean</strong> <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>,
<a id="L270" name="L270"></a> 270                                 <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L271" name="L271"></a> 271                                 <strong class="reserved">int</strong> transparency,
<a id="L272" name="L272"></a> 272                                 <strong class="reserved">int</strong> transferType) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273         <strong class="reserved">super</strong> (<a href="../S/2267.html#L355" title="Defined at 355 in src/java/awt/image/ComponentColorModel.java.">bitsHelper</a>(transferType, colorSpace, <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>),
<a id="L274" name="L274"></a> 274                <a href="../S/2267.html#L366" title="Defined at 366 in src/java/awt/image/ComponentColorModel.java.">bitsArrayHelper</a>(bits, transferType, colorSpace, <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>),
<a id="L275" name="L275"></a> 275                colorSpace, <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>, <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>, transparency,
<a id="L276" name="L276"></a> 276                transferType);
<a id="L277" name="L277"></a> 277         <strong class="reserved">switch</strong>(transferType) <em class="brace">{</em>
<a id="L278" name="L278"></a> 278             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L279" name="L279"></a> 279             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L280" name="L280"></a> 280             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L281" name="L281"></a> 281                 signed = <strong class="reserved">false</strong>;
<a id="L282" name="L282"></a> 282                 needScaleInit = <strong class="reserved">true</strong>;
<a id="L283" name="L283"></a> 283                 <strong class="reserved">break</strong>;
<a id="L284" name="L284"></a> 284             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L285" name="L285"></a> 285                 signed = <strong class="reserved">true</strong>;
<a id="L286" name="L286"></a> 286                 needScaleInit = <strong class="reserved">true</strong>;
<a id="L287" name="L287"></a> 287                 <strong class="reserved">break</strong>;
<a id="L288" name="L288"></a> 288             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT:
<a id="L289" name="L289"></a> 289             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE:
<a id="L290" name="L290"></a> 290                 signed = <strong class="reserved">true</strong>;
<a id="L291" name="L291"></a> 291                 needScaleInit = <strong class="reserved">false</strong>;
<a id="L292" name="L292"></a> 292                 noUnnorm = <strong class="reserved">true</strong>;
<a id="L293" name="L293"></a> 293                 nonStdScale = <strong class="reserved">false</strong>;
<a id="L294" name="L294"></a> 294                 <strong class="reserved">break</strong>;
<a id="L295" name="L295"></a> 295             <strong class="reserved">default</strong>:
<a id="L296" name="L296"></a> 296                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("This constructor is not "+
<a id="L297" name="L297"></a> 297                          "compatible with transferType " + transferType);
<a id="L298" name="L298"></a> 298         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299         <a href="../S/2267.html#L393" title="Defined at 393 in src/java/awt/image/ComponentColorModel.java.">setupLUTs</a>();
<a id="L300" name="L300"></a> 300     <em class="brace">}</em>
<a id="L301" name="L301"></a> 301 
<div class="comment">
      Constructs a <code>ComponentColorModel</code> from the specified
      parameters. Color components will be in the specified
      <code>ColorSpace</code>.  The supported transfer types are
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>,
      <code>DataBuffer.TYPE_SHORT</code>, <code>DataBuffer.TYPE_FLOAT</code>,
      and <code>DataBuffer.TYPE_DOUBLE</code>.  The number of significant
      bits per color and alpha component will be 8, 16, 32, 16, 32,  or 64,
      respectively.  The number of color components will be the
      number of components in the <code>ColorSpace</code>.  There will be
      an alpha component if <code>hasAlpha</code> is <code>true</code>.
      If <code>hasAlpha</code> is true, then
      the boolean <code>isAlphaPremultiplied</code>
      specifies how to interpret color and alpha samples in pixel values.
      If the boolean is true, color samples are assumed to have been
      multiplied by the alpha sample. The <code>transparency</code>
      specifies what alpha values can be represented by this color model.
      The acceptable <code>transparency</code> values are
      <code>OPAQUE</code>, <code>BITMASK</code> or <code>TRANSLUCENT</code>.
      The <code>transferType</code> is the type of primitive array used
      to represent pixel values.
      @param colorSpace       The <code>ColorSpace</code> associated
                              with this color model.
      @param hasAlpha         If true, this color model supports alpha.
      @param isAlphaPremultiplied If true, alpha is premultiplied.
      @param transparency     Specifies what alpha values can be represented
                              by this color model.
      @param transferType     Specifies the type of primitive array used to
                              represent pixel values.
      @throws IllegalArgumentException If transferType is not one of
              <code>DataBuffer.TYPE_BYTE</code>,
              <code>DataBuffer.TYPE_USHORT</code>,
              <code>DataBuffer.TYPE_INT</code>,
              <code>DataBuffer.TYPE_SHORT</code>,
              <code>DataBuffer.TYPE_FLOAT</code>, or
              <code>DataBuffer.TYPE_DOUBLE</code>.
      @see ColorSpace
      @see java.awt.Transparency
      @since 1.4</div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">public</strong> ComponentColorModel (<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> colorSpace,
<a id="L347" name="L347"></a> 347                                 <strong class="reserved">boolean</strong> <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>,
<a id="L348" name="L348"></a> 348                                 <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L349" name="L349"></a> 349                                 <strong class="reserved">int</strong> transparency,
<a id="L350" name="L350"></a> 350                                 <strong class="reserved">int</strong> transferType) <em class="brace">{</em>
<a id="L351" name="L351"></a> 351         <strong class="reserved">this</strong>(colorSpace, <strong class="reserved">null</strong>, <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>, <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L352" name="L352"></a> 352              transparency, transferType);
<a id="L353" name="L353"></a> 353     <em class="brace">}</em>
<a id="L354" name="L354"></a> 354 
<a id="L355" name="L355"></a> 355     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/2267.html#L273" title="Referred from 273 in src/java/awt/image/ComponentColorModel.java.">bitsHelper</a>(<strong class="reserved">int</strong> transferType,
<a id="L356" name="L356"></a> 356                                   <a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> colorSpace,
<a id="L357" name="L357"></a> 357                                   <strong class="reserved">boolean</strong> <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <strong class="reserved">int</strong> numBits = <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.<a href="../S/2284.html#L120" title="Defined at 120 in src/java/awt/image/DataBuffer.java.">getDataTypeSize</a>(transferType);
<a id="L359" name="L359"></a> 359         <strong class="reserved">int</strong> numComponents = colorSpace.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L360" name="L360"></a> 360         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L361" name="L361"></a> 361             ++numComponents;
<a id="L362" name="L362"></a> 362         <em class="brace">}</em>
<a id="L363" name="L363"></a> 363         <strong class="reserved">return</strong> numBits * numComponents;
<a id="L364" name="L364"></a> 364     <em class="brace">}</em>
<a id="L365" name="L365"></a> 365 
<a id="L366" name="L366"></a> 366     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong>[] <a href="../S/2267.html#L274" title="Referred from 274 in src/java/awt/image/ComponentColorModel.java.">bitsArrayHelper</a>(<strong class="reserved">int</strong>[] origBits,
<a id="L367" name="L367"></a> 367                                          <strong class="reserved">int</strong> transferType,
<a id="L368" name="L368"></a> 368                                          <a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> colorSpace,
<a id="L369" name="L369"></a> 369                                          <strong class="reserved">boolean</strong> <a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">switch</strong>(transferType) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L372" name="L372"></a> 372             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L373" name="L373"></a> 373             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L374" name="L374"></a> 374                 <strong class="reserved">if</strong> (origBits != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L375" name="L375"></a> 375                     <strong class="reserved">return</strong> origBits;
<a id="L376" name="L376"></a> 376                 <em class="brace">}</em>
<a id="L377" name="L377"></a> 377                 <strong class="reserved">break</strong>;
<a id="L378" name="L378"></a> 378             <strong class="reserved">default</strong>:
<a id="L379" name="L379"></a> 379                 <strong class="reserved">break</strong>;
<a id="L380" name="L380"></a> 380         <em class="brace">}</em>
<a id="L381" name="L381"></a> 381         <strong class="reserved">int</strong> numBits = <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.<a href="../S/2284.html#L120" title="Defined at 120 in src/java/awt/image/DataBuffer.java.">getDataTypeSize</a>(transferType);
<a id="L382" name="L382"></a> 382         <strong class="reserved">int</strong> numComponents = colorSpace.<a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>();
<a id="L383" name="L383"></a> 383         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>) <em class="brace">{</em>
<a id="L384" name="L384"></a> 384             ++numComponents;
<a id="L385" name="L385"></a> 385         <em class="brace">}</em>
<a id="L386" name="L386"></a> 386         <strong class="reserved">int</strong>[] bits = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L387" name="L387"></a> 387         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             bits[i] = numBits;
<a id="L389" name="L389"></a> 389         <em class="brace">}</em>
<a id="L390" name="L390"></a> 390         <strong class="reserved">return</strong> bits;
<a id="L391" name="L391"></a> 391     <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2267.html#L299" title="Referred from 299 in src/java/awt/image/ComponentColorModel.java.">setupLUTs</a>() <em class="brace">{</em>
<a id="L394" name="L394"></a> 394         <em class="comment">// REMIND: there is potential to accelerate sRGB, LinearRGB,</em>
<a id="L395" name="L395"></a> 395         <em class="comment">// LinearGray, ICCGray, and non-ICC Gray spaces with non-standard</em>
<a id="L396" name="L396"></a> 396         <em class="comment">// scaling, if that becomes important</em>
<a id="L397" name="L397"></a> 397         <em class="comment">//</em>
<a id="L398" name="L398"></a> 398         <em class="comment">// NOTE: The is_xxx_stdScale and nonStdScale booleans are provisionally</em>
<a id="L399" name="L399"></a> 399         <em class="comment">// set here when this method is called at construction time.  These</em>
<a id="L400" name="L400"></a> 400         <em class="comment">// variables may be set again when initScale is called later.</em>
<a id="L401" name="L401"></a> 401         <em class="comment">// When setupLUTs returns, nonStdScale is true if (the transferType</em>
<a id="L402" name="L402"></a> 402         <em class="comment">// is not float or double) AND (some minimum ColorSpace component</em>
<a id="L403" name="L403"></a> 403         <em class="comment">// value is not 0.0 OR some maximum ColorSpace component value</em>
<a id="L404" name="L404"></a> 404         <em class="comment">// is not 1.0).  This is correct for the calls to</em>
<a id="L405" name="L405"></a> 405         <em class="comment">// getNormalizedComponents(Object, float[], int) from initScale().</em>
<a id="L406" name="L406"></a> 406         <em class="comment">// initScale() may change the value nonStdScale based on the</em>
<a id="L407" name="L407"></a> 407         <em class="comment">// return value of getNormalizedComponents() - this will only</em>
<a id="L408" name="L408"></a> 408         <em class="comment">// happen if getNormalizedComponents() has been overridden by a</em>
<a id="L409" name="L409"></a> 409         <em class="comment">// subclass to make the mapping of min/max pixel sample values</em>
<a id="L410" name="L410"></a> 410         <em class="comment">// something different from min/max color component values.</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">if</strong> (is_sRGB) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412             is_sRGB_stdScale = <strong class="reserved">true</strong>;
<a id="L413" name="L413"></a> 413             nonStdScale = <strong class="reserved">false</strong>;
<a id="L414" name="L414"></a> 414         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1705" title="Defined at 1705 in src/java/awt/image/ColorModel.java.">isLinearRGBspace</a>(colorSpace)) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <em class="comment">// Note that the built-in Linear RGB space has a normalized</em>
<a id="L416" name="L416"></a> 416             <em class="comment">// range of 0.0 - 1.0 for each coordinate.  Usage of these</em>
<a id="L417" name="L417"></a> 417             <em class="comment">// LUTs makes that assumption.</em>
<a id="L418" name="L418"></a> 418             is_LinearRGB_stdScale = <strong class="reserved">true</strong>;
<a id="L419" name="L419"></a> 419             nonStdScale = <strong class="reserved">false</strong>;
<a id="L420" name="L420"></a> 420             <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE) <em class="brace">{</em>
<a id="L421" name="L421"></a> 421                 tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1717" title="Defined at 1717 in src/java/awt/image/ColorModel.java.">getLinearRGB8TosRGB8LUT</a>();
<a id="L422" name="L422"></a> 422                 fromsRGB8LUT8 = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1740" title="Defined at 1740 in src/java/awt/image/ColorModel.java.">getsRGB8ToLinearRGB8LUT</a>();
<a id="L423" name="L423"></a> 423             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L424" name="L424"></a> 424                 tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1758" title="Defined at 1758 in src/java/awt/image/ColorModel.java.">getLinearRGB16TosRGB8LUT</a>();
<a id="L425" name="L425"></a> 425                 fromsRGB8LUT16 = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1777" title="Defined at 1777 in src/java/awt/image/ColorModel.java.">getsRGB8ToLinearRGB16LUT</a>();
<a id="L426" name="L426"></a> 426             <em class="brace">}</em>
<a id="L427" name="L427"></a> 427         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((colorSpaceType == <a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a>.TYPE_GRAY) &amp;&amp;
<a id="L428" name="L428"></a> 428                    (colorSpace <strong class="reserved">instanceof</strong> <a href="../S/2161.html#L87" title="Defined at 87 in src/java/awt/color/ICC_ColorSpace.java.">ICC_ColorSpace</a>) &amp;&amp;
<a id="L429" name="L429"></a> 429                    (colorSpace.<a href="../D/20649.html" title="Multiple defined in 5 places.">getMinValue</a>(0) == 0.0f) &amp;&amp;
<a id="L430" name="L430"></a> 430                    (colorSpace.<a href="../D/20486.html" title="Multiple defined in 5 places.">getMaxValue</a>(0) == 1.0f)) <em class="brace">{</em>
<a id="L431" name="L431"></a> 431             <em class="comment">// Note that a normalized range of 0.0 - 1.0 for the gray</em>
<a id="L432" name="L432"></a> 432             <em class="comment">// component is required, because usage of these LUTs makes</em>
<a id="L433" name="L433"></a> 433             <em class="comment">// that assumption.</em>
<a id="L434" name="L434"></a> 434             <a href="../S/2161.html#L87" title="Defined at 87 in src/java/awt/color/ICC_ColorSpace.java.">ICC_ColorSpace</a> ics = (<a href="../S/2161.html#L87" title="Defined at 87 in src/java/awt/color/ICC_ColorSpace.java.">ICC_ColorSpace</a>) colorSpace;
<a id="L435" name="L435"></a> 435             is_ICCGray_stdScale = <strong class="reserved">true</strong>;
<a id="L436" name="L436"></a> 436             nonStdScale = <strong class="reserved">false</strong>;
<a id="L437" name="L437"></a> 437             fromsRGB8LUT16 = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1777" title="Defined at 1777 in src/java/awt/image/ColorModel.java.">getsRGB8ToLinearRGB16LUT</a>();
<a id="L438" name="L438"></a> 438             <strong class="reserved">if</strong> (<a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1711" title="Defined at 1711 in src/java/awt/image/ColorModel.java.">isLinearGRAYspace</a>(ics)) <em class="brace">{</em>
<a id="L439" name="L439"></a> 439                 is_LinearGray_stdScale = <strong class="reserved">true</strong>;
<a id="L440" name="L440"></a> 440                 <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441                     tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1802" title="Defined at 1802 in src/java/awt/image/ColorModel.java.">getGray8TosRGB8LUT</a>(ics);
<a id="L442" name="L442"></a> 442                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L443" name="L443"></a> 443                     tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1887" title="Defined at 1887 in src/java/awt/image/ColorModel.java.">getGray16TosRGB8LUT</a>(ics);
<a id="L444" name="L444"></a> 444                 <em class="brace">}</em>
<a id="L445" name="L445"></a> 445             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L446" name="L446"></a> 446                 <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447                     tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1802" title="Defined at 1802 in src/java/awt/image/ColorModel.java.">getGray8TosRGB8LUT</a>(ics);
<a id="L448" name="L448"></a> 448                     fromLinearGray16ToOtherGray8LUT =
<a id="L449" name="L449"></a> 449                         <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1846" title="Defined at 1846 in src/java/awt/image/ColorModel.java.">getLinearGray16ToOtherGray8LUT</a>(ics);
<a id="L450" name="L450"></a> 450                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L451" name="L451"></a> 451                     tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1887" title="Defined at 1887 in src/java/awt/image/ColorModel.java.">getGray16TosRGB8LUT</a>(ics);
<a id="L452" name="L452"></a> 452                     fromLinearGray16ToOtherGray16LUT =
<a id="L453" name="L453"></a> 453                         <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1935" title="Defined at 1935 in src/java/awt/image/ColorModel.java.">getLinearGray16ToOtherGray16LUT</a>(ics);
<a id="L454" name="L454"></a> 454                 <em class="brace">}</em>
<a id="L455" name="L455"></a> 455             <em class="brace">}</em>
<a id="L456" name="L456"></a> 456         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457             <em class="comment">// if transferType is byte, ushort, int, or short and we</em>
<a id="L458" name="L458"></a> 458             <em class="comment">// don't already know the ColorSpace has minVlaue == 0.0f and</em>
<a id="L459" name="L459"></a> 459             <em class="comment">// maxValue == 1.0f for all components, we need to check that</em>
<a id="L460" name="L460"></a> 460             <em class="comment">// now and setup the min[] and diffMinMax[] arrays if necessary.</em>
<a id="L461" name="L461"></a> 461             nonStdScale = <strong class="reserved">false</strong>;
<a id="L462" name="L462"></a> 462             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463                 <strong class="reserved">if</strong> ((colorSpace.<a href="../D/20649.html" title="Multiple defined in 5 places.">getMinValue</a>(i) != 0.0f) ||
<a id="L464" name="L464"></a> 464                     (colorSpace.<a href="../D/20486.html" title="Multiple defined in 5 places.">getMaxValue</a>(i) != 1.0f)) <em class="brace">{</em>
<a id="L465" name="L465"></a> 465                     nonStdScale = <strong class="reserved">true</strong>;
<a id="L466" name="L466"></a> 466                     <strong class="reserved">break</strong>;
<a id="L467" name="L467"></a> 467                 <em class="brace">}</em>
<a id="L468" name="L468"></a> 468             <em class="brace">}</em>
<a id="L469" name="L469"></a> 469             <strong class="reserved">if</strong> (nonStdScale) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470                 <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numColorComponents];
<a id="L471" name="L471"></a> 471                 diffMinMax = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numColorComponents];
<a id="L472" name="L472"></a> 472                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L473" name="L473"></a> 473                     <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>[i] = colorSpace.<a href="../D/20649.html" title="Multiple defined in 5 places.">getMinValue</a>(i);
<a id="L474" name="L474"></a> 474                     diffMinMax[i] = colorSpace.<a href="../D/20486.html" title="Multiple defined in 5 places.">getMaxValue</a>(i) - <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>[i];
<a id="L475" name="L475"></a> 475                 <em class="brace">}</em>
<a id="L476" name="L476"></a> 476             <em class="brace">}</em>
<a id="L477" name="L477"></a> 477         <em class="brace">}</em>
<a id="L478" name="L478"></a> 478     <em class="brace">}</em>
<a id="L479" name="L479"></a> 479 
<a id="L480" name="L480"></a> 480     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20645.html" title="Multiple referred from 12 places.">initScale</a>() <em class="brace">{</em>
<a id="L481" name="L481"></a> 481         <em class="comment">// This method is called the first time any method which uses</em>
<a id="L482" name="L482"></a> 482         <em class="comment">// pixel sample value to color component value scaling information</em>
<a id="L483" name="L483"></a> 483         <em class="comment">// is called if the transferType supports non-standard scaling</em>
<a id="L484" name="L484"></a> 484         <em class="comment">// as defined above (byte, ushort, int, and short), unless the</em>
<a id="L485" name="L485"></a> 485         <em class="comment">// method is getNormalizedComponents(Object, float[], int) (that</em>
<a id="L486" name="L486"></a> 486         <em class="comment">// method must be overridden to use non-standard scaling).  This</em>
<a id="L487" name="L487"></a> 487         <em class="comment">// method also sets up the noUnnorm boolean variable for these</em>
<a id="L488" name="L488"></a> 488         <em class="comment">// transferTypes.  After this method is called, the nonStdScale</em>
<a id="L489" name="L489"></a> 489         <em class="comment">// variable will be true if getNormalizedComponents() maps a</em>
<a id="L490" name="L490"></a> 490         <em class="comment">// sample value of 0 to anything other than 0.0f OR maps a</em>
<a id="L491" name="L491"></a> 491         <em class="comment">// sample value of 2^^n - 1 (2^^15 - 1 for short transferType)</em>
<a id="L492" name="L492"></a> 492         <em class="comment">// to anything other than 1.0f.  Note that this can be independent</em>
<a id="L493" name="L493"></a> 493         <em class="comment">// of the colorSpace min/max component values, if the</em>
<a id="L494" name="L494"></a> 494         <em class="comment">// getNormalizedComponents() method has been overridden for some</em>
<a id="L495" name="L495"></a> 495         <em class="comment">// reason, e.g. to provide greater dynamic range in the sample</em>
<a id="L496" name="L496"></a> 496         <em class="comment">// values than in the color component values.  Unfortunately,</em>
<a id="L497" name="L497"></a> 497         <em class="comment">// this method can't be called at construction time, since a</em>
<a id="L498" name="L498"></a> 498         <em class="comment">// subclass may still have uninitialized state that would cause</em>
<a id="L499" name="L499"></a> 499         <em class="comment">// getNormalizedComponents() to return an incorrect result.</em>
<a id="L500" name="L500"></a> 500         needScaleInit = <strong class="reserved">false</strong>; <em class="comment">// only needs to called once</em>
<a id="L501" name="L501"></a> 501         <strong class="reserved">if</strong> (nonStdScale || signed) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502             <em class="comment">// The unnormalized form is only supported for unsigned</em>
<a id="L503" name="L503"></a> 503             <em class="comment">// transferTypes and when the ColorSpace min/max values</em>
<a id="L504" name="L504"></a> 504             <em class="comment">// are 0.0/1.0.  When this method is called nonStdScale is</em>
<a id="L505" name="L505"></a> 505             <em class="comment">// true if the latter condition does not hold.  In addition,</em>
<a id="L506" name="L506"></a> 506             <em class="comment">// the unnormalized form requires that the full range of</em>
<a id="L507" name="L507"></a> 507             <em class="comment">// the pixel sample values map to the full 0.0 - 1.0 range</em>
<a id="L508" name="L508"></a> 508             <em class="comment">// of color component values.  That condition is checked</em>
<a id="L509" name="L509"></a> 509             <em class="comment">// later in this method.</em>
<a id="L510" name="L510"></a> 510             noUnnorm = <strong class="reserved">true</strong>;
<a id="L511" name="L511"></a> 511         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L512" name="L512"></a> 512             noUnnorm = <strong class="reserved">false</strong>;
<a id="L513" name="L513"></a> 513         <em class="brace">}</em>
<a id="L514" name="L514"></a> 514         <strong class="reserved">float</strong>[] lowVal, highVal;
<a id="L515" name="L515"></a> 515         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L517" name="L517"></a> 517             <em class="brace">{</em>
<a id="L518" name="L518"></a> 518                 <strong class="reserved">byte</strong>[] bpixel = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[numComponents];
<a id="L519" name="L519"></a> 519                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L520" name="L520"></a> 520                     bpixel[i] = 0;
<a id="L521" name="L521"></a> 521                 <em class="brace">}</em>
<a id="L522" name="L522"></a> 522                 <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L523" name="L523"></a> 523                     bpixel[numColorComponents] =
<a id="L524" name="L524"></a> 524                         (<strong class="reserved">byte</strong>) ((1 &lt;&lt; nBits[numColorComponents]) - 1);
<a id="L525" name="L525"></a> 525                 <em class="brace">}</em>
<a id="L526" name="L526"></a> 526                 lowVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(bpixel, <strong class="reserved">null</strong>, 0);
<a id="L527" name="L527"></a> 527                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528                     bpixel[i] = (<strong class="reserved">byte</strong>) ((1 &lt;&lt; nBits[i]) - 1);
<a id="L529" name="L529"></a> 529                 <em class="brace">}</em>
<a id="L530" name="L530"></a> 530                 highVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(bpixel, <strong class="reserved">null</strong>, 0);
<a id="L531" name="L531"></a> 531             <em class="brace">}</em>
<a id="L532" name="L532"></a> 532             <strong class="reserved">break</strong>;
<a id="L533" name="L533"></a> 533         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L534" name="L534"></a> 534             <em class="brace">{</em>
<a id="L535" name="L535"></a> 535                 <strong class="reserved">short</strong>[] uspixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L536" name="L536"></a> 536                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537                     uspixel[i] = 0;
<a id="L538" name="L538"></a> 538                 <em class="brace">}</em>
<a id="L539" name="L539"></a> 539                 <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540                     uspixel[numColorComponents] =
<a id="L541" name="L541"></a> 541                         (<strong class="reserved">short</strong>) ((1 &lt;&lt; nBits[numColorComponents]) - 1);
<a id="L542" name="L542"></a> 542                 <em class="brace">}</em>
<a id="L543" name="L543"></a> 543                 lowVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(uspixel, <strong class="reserved">null</strong>, 0);
<a id="L544" name="L544"></a> 544                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545                     uspixel[i] = (<strong class="reserved">short</strong>) ((1 &lt;&lt; nBits[i]) - 1);
<a id="L546" name="L546"></a> 546                 <em class="brace">}</em>
<a id="L547" name="L547"></a> 547                 highVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(uspixel, <strong class="reserved">null</strong>, 0);
<a id="L548" name="L548"></a> 548             <em class="brace">}</em>
<a id="L549" name="L549"></a> 549             <strong class="reserved">break</strong>;
<a id="L550" name="L550"></a> 550         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L551" name="L551"></a> 551             <em class="brace">{</em>
<a id="L552" name="L552"></a> 552                 <strong class="reserved">int</strong>[] ipixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L553" name="L553"></a> 553                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554                     ipixel[i] = 0;
<a id="L555" name="L555"></a> 555                 <em class="brace">}</em>
<a id="L556" name="L556"></a> 556                 <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L557" name="L557"></a> 557                     ipixel[numColorComponents] =
<a id="L558" name="L558"></a> 558                         ((1 &lt;&lt; nBits[numColorComponents]) - 1);
<a id="L559" name="L559"></a> 559                 <em class="brace">}</em>
<a id="L560" name="L560"></a> 560                 lowVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(ipixel, <strong class="reserved">null</strong>, 0);
<a id="L561" name="L561"></a> 561                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562                     ipixel[i] = ((1 &lt;&lt; nBits[i]) - 1);
<a id="L563" name="L563"></a> 563                 <em class="brace">}</em>
<a id="L564" name="L564"></a> 564                 highVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(ipixel, <strong class="reserved">null</strong>, 0);
<a id="L565" name="L565"></a> 565             <em class="brace">}</em>
<a id="L566" name="L566"></a> 566             <strong class="reserved">break</strong>;
<a id="L567" name="L567"></a> 567         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L568" name="L568"></a> 568             <em class="brace">{</em>
<a id="L569" name="L569"></a> 569                 <strong class="reserved">short</strong>[] spixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L570" name="L570"></a> 570                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571                     spixel[i] = 0;
<a id="L572" name="L572"></a> 572                 <em class="brace">}</em>
<a id="L573" name="L573"></a> 573                 <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574                     spixel[numColorComponents] = 32767;
<a id="L575" name="L575"></a> 575                 <em class="brace">}</em>
<a id="L576" name="L576"></a> 576                 lowVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(spixel, <strong class="reserved">null</strong>, 0);
<a id="L577" name="L577"></a> 577                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L578" name="L578"></a> 578                     spixel[i] = 32767;
<a id="L579" name="L579"></a> 579                 <em class="brace">}</em>
<a id="L580" name="L580"></a> 580                 highVal = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(spixel, <strong class="reserved">null</strong>, 0);
<a id="L581" name="L581"></a> 581             <em class="brace">}</em>
<a id="L582" name="L582"></a> 582             <strong class="reserved">break</strong>;
<a id="L583" name="L583"></a> 583         <strong class="reserved">default</strong>:
<a id="L584" name="L584"></a> 584             lowVal = highVal = <strong class="reserved">null</strong>;  <em class="comment">// to keep the compiler from complaining</em>
<a id="L585" name="L585"></a> 585             <strong class="reserved">break</strong>;
<a id="L586" name="L586"></a> 586         <em class="brace">}</em>
<a id="L587" name="L587"></a> 587         nonStdScale = <strong class="reserved">false</strong>;
<a id="L588" name="L588"></a> 588         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L589" name="L589"></a> 589             <strong class="reserved">if</strong> ((lowVal[i] != 0.0f) || (highVal[i] != 1.0f)) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590                 nonStdScale = <strong class="reserved">true</strong>;
<a id="L591" name="L591"></a> 591                 <strong class="reserved">break</strong>;
<a id="L592" name="L592"></a> 592             <em class="brace">}</em>
<a id="L593" name="L593"></a> 593         <em class="brace">}</em>
<a id="L594" name="L594"></a> 594         <strong class="reserved">if</strong> (nonStdScale) <em class="brace">{</em>
<a id="L595" name="L595"></a> 595             noUnnorm = <strong class="reserved">true</strong>;
<a id="L596" name="L596"></a> 596             is_sRGB_stdScale = <strong class="reserved">false</strong>;
<a id="L597" name="L597"></a> 597             is_LinearRGB_stdScale = <strong class="reserved">false</strong>;
<a id="L598" name="L598"></a> 598             is_LinearGray_stdScale = <strong class="reserved">false</strong>;
<a id="L599" name="L599"></a> 599             is_ICCGray_stdScale = <strong class="reserved">false</strong>;
<a id="L600" name="L600"></a> 600             compOffset = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numColorComponents];
<a id="L601" name="L601"></a> 601             compScale = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numColorComponents];
<a id="L602" name="L602"></a> 602             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L603" name="L603"></a> 603                 compOffset[i] = lowVal[i];
<a id="L604" name="L604"></a> 604                 compScale[i] = 1.0f / (highVal[i] - lowVal[i]);
<a id="L605" name="L605"></a> 605             <em class="brace">}</em>
<a id="L606" name="L606"></a> 606         <em class="brace">}</em>
<a id="L607" name="L607"></a> 607     <em class="brace">}</em>
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/18577.html" title="Multiple referred from 6 places.">getRGBComponent</a>(<strong class="reserved">int</strong> pixel, <strong class="reserved">int</strong> idx) <em class="brace">{</em>
<a id="L610" name="L610"></a> 610         <strong class="reserved">if</strong> (numComponents &gt; 1) <em class="brace">{</em>
<a id="L611" name="L611"></a> 611             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L612" name="L612"></a> 612                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("More than one component per pixel");
<a id="L613" name="L613"></a> 613         <em class="brace">}</em>
<a id="L614" name="L614"></a> 614         <strong class="reserved">if</strong> (signed) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L616" name="L616"></a> 616                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Component value is signed");
<a id="L617" name="L617"></a> 617         <em class="brace">}</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L620" name="L620"></a> 620         <em class="brace">}</em>
<a id="L621" name="L621"></a> 621         <em class="comment">// Since there is only 1 component, there is no alpha</em>
<a id="L622" name="L622"></a> 622 
<a id="L623" name="L623"></a> 623         <em class="comment">// Normalize the pixel in order to convert it</em>
<a id="L624" name="L624"></a> 624         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> opixel = <strong class="reserved">null</strong>;
<a id="L625" name="L625"></a> 625         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L626" name="L626"></a> 626         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L627" name="L627"></a> 627             <em class="brace">{</em>
<a id="L628" name="L628"></a> 628                 <strong class="reserved">byte</strong>[] bpixel = <em class="brace">{</em> (<strong class="reserved">byte</strong>) pixel <em class="brace">}</em>;
<a id="L629" name="L629"></a> 629                 opixel = bpixel;
<a id="L630" name="L630"></a> 630             <em class="brace">}</em>
<a id="L631" name="L631"></a> 631             <strong class="reserved">break</strong>;
<a id="L632" name="L632"></a> 632         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L633" name="L633"></a> 633             <em class="brace">{</em>
<a id="L634" name="L634"></a> 634                 <strong class="reserved">short</strong>[] spixel = <em class="brace">{</em> (<strong class="reserved">short</strong>) pixel <em class="brace">}</em>;
<a id="L635" name="L635"></a> 635                 opixel = spixel;
<a id="L636" name="L636"></a> 636             <em class="brace">}</em>
<a id="L637" name="L637"></a> 637             <strong class="reserved">break</strong>;
<a id="L638" name="L638"></a> 638         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L639" name="L639"></a> 639             <em class="brace">{</em>
<a id="L640" name="L640"></a> 640                 <strong class="reserved">int</strong>[] ipixel = <em class="brace">{</em> pixel <em class="brace">}</em>;
<a id="L641" name="L641"></a> 641                 opixel = ipixel;
<a id="L642" name="L642"></a> 642             <em class="brace">}</em>
<a id="L643" name="L643"></a> 643             <strong class="reserved">break</strong>;
<a id="L644" name="L644"></a> 644         <em class="brace">}</em>
<a id="L645" name="L645"></a> 645         <strong class="reserved">float</strong>[] norm = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(opixel, <strong class="reserved">null</strong>, 0);
<a id="L646" name="L646"></a> 646         <strong class="reserved">float</strong>[] rgb = colorSpace.<a href="../D/35471.html" title="Multiple defined in 3 places.">toRGB</a>(norm);
<a id="L647" name="L647"></a> 647 
<a id="L648" name="L648"></a> 648         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (rgb[idx] * 255.0f + 0.5f);
<a id="L649" name="L649"></a> 649     <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<div class="comment">
      Returns the red color component for the specified pixel, scaled
      from 0 to 255 in the default RGB ColorSpace, sRGB.  A color conversion
      is done if necessary.  The pixel value is specified as an int.
      The returned value will be a non pre-multiplied value.
      If the alpha is premultiplied, this method divides
      it out before returning the value (if the alpha value is 0,
      the red value will be 0).
      @param pixel The pixel from which you want to get the red color component.
      @return The red color component for the specified pixel, as an int.
      @throws IllegalArgumentException If there is more than
      one component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the component value for this
      <code>ColorModel</code> is signed</div>
<a id="L669" name="L669"></a> 669     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18630.html" title="Multiple referred from 50 places.">getRed</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L670" name="L670"></a> 670         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(pixel, 0);
<a id="L671" name="L671"></a> 671     <em class="brace">}</em>
<a id="L672" name="L672"></a> 672 
<div class="comment">
      Returns the green color component for the specified pixel, scaled
      from 0 to 255 in the default RGB ColorSpace, sRGB.  A color conversion
      is done if necessary.  The pixel value is specified as an int.
      The returned value will be a non
      pre-multiplied value. If the alpha is premultiplied, this method
      divides it out before returning the value (if the alpha value is 0,
      the green value will be 0).
      @param pixel The pixel from which you want to get the green color component.
      @return The green color component for the specified pixel, as an int.
      @throws IllegalArgumentException If there is more than
      one component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the component value for this
      <code>ColorModel</code> is signed</div>
<a id="L691" name="L691"></a> 691     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16819.html" title="Multiple referred from 45 places.">getGreen</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L692" name="L692"></a> 692         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(pixel, 1);
<a id="L693" name="L693"></a> 693     <em class="brace">}</em>
<a id="L694" name="L694"></a> 694 
<div class="comment">
      Returns the blue color component for the specified pixel, scaled
      from 0 to 255 in the default RGB ColorSpace, sRGB.  A color conversion
      is done if necessary.  The pixel value is specified as an int.
      The returned value will be a non
      pre-multiplied value. If the alpha is premultiplied, this method
      divides it out before returning the value (if the alpha value is 0,
      the blue value will be 0).
      @param pixel The pixel from which you want to get the blue color component.
      @return The blue color component for the specified pixel, as an int.
      @throws IllegalArgumentException If there is more than
      one component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the component value for this
      <code>ColorModel</code> is signed</div>
<a id="L713" name="L713"></a> 713     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15290.html" title="Multiple referred from 45 places.">getBlue</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L714" name="L714"></a> 714         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(pixel, 2);
<a id="L715" name="L715"></a> 715     <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<div class="comment">
      Returns the alpha component for the specified pixel, scaled
      from 0 to 255.   The pixel value is specified as an int.
      @param pixel The pixel from which you want to get the alpha component.
      @return The alpha component for the specified pixel, as an int.
      @throws IllegalArgumentException If there is more than
      one component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the component value for this
      <code>ColorModel</code> is signed</div>
<a id="L730" name="L730"></a> 730     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15034.html" title="Multiple referred from 34 places.">getAlpha</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L731" name="L731"></a> 731         <strong class="reserved">if</strong> (supportsAlpha == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L732" name="L732"></a> 732             <strong class="reserved">return</strong> 255;
<a id="L733" name="L733"></a> 733         <em class="brace">}</em>
<a id="L734" name="L734"></a> 734         <strong class="reserved">if</strong> (numComponents &gt; 1) <em class="brace">{</em>
<a id="L735" name="L735"></a> 735             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L736" name="L736"></a> 736                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("More than one component per pixel");
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738         <strong class="reserved">if</strong> (signed) <em class="brace">{</em>
<a id="L739" name="L739"></a> 739             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L740" name="L740"></a> 740                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Component value is signed");
<a id="L741" name="L741"></a> 741         <em class="brace">}</em>
<a id="L742" name="L742"></a> 742 
<a id="L743" name="L743"></a> 743         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) ((((<strong class="reserved">float</strong>) pixel) / ((1&lt;&lt;nBits[0])-1)) * 255.0f + 0.5f);
<a id="L744" name="L744"></a> 744     <em class="brace">}</em>
<a id="L745" name="L745"></a> 745 
<div class="comment">
      Returns the color/alpha components of the pixel in the default
      RGB color model format.  A color conversion is done if necessary.
      The returned value will be in a non pre-multiplied format. If
      the alpha is premultiplied, this method divides it out of the
      color components (if the alpha value is 0, the color values will be 0).
      @param pixel The pixel from which you want to get the color/alpha components.
      @return The color/alpha components for the specified pixel, as an int.
      @throws IllegalArgumentException If there is more than
      one component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the component value for this
      <code>ColorModel</code> is signed</div>
<a id="L762" name="L762"></a> 762     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18575.html" title="Multiple referred from 57 places.">getRGB</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L763" name="L763"></a> 763         <strong class="reserved">if</strong> (numComponents &gt; 1) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L765" name="L765"></a> 765                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("More than one component per pixel");
<a id="L766" name="L766"></a> 766         <em class="brace">}</em>
<a id="L767" name="L767"></a> 767         <strong class="reserved">if</strong> (signed) <em class="brace">{</em>
<a id="L768" name="L768"></a> 768             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L769" name="L769"></a> 769                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Component value is signed");
<a id="L770" name="L770"></a> 770         <em class="brace">}</em>
<a id="L771" name="L771"></a> 771 
<a id="L772" name="L772"></a> 772         <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(pixel) &lt;&lt; 24)
<a id="L773" name="L773"></a> 773             | (<a href="../D/21904.html" title="Multiple defined in 9 places.">getRed</a>(pixel) &lt;&lt; 16)
<a id="L774" name="L774"></a> 774             | (<a href="../D/19369.html" title="Multiple defined in 9 places.">getGreen</a>(pixel) &lt;&lt; 8)
<a id="L775" name="L775"></a> 775             | (<a href="../D/17280.html" title="Multiple defined in 9 places.">getBlue</a>(pixel) &lt;&lt; 0);
<a id="L776" name="L776"></a> 776     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<a id="L778" name="L778"></a> 778     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/14198.html" title="Multiple referred from 3 places.">extractComponent</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData, <strong class="reserved">int</strong> idx, <strong class="reserved">int</strong> <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L779" name="L779"></a> 779         <em class="comment">// Extract component idx from inData.  The precision argument</em>
<a id="L780" name="L780"></a> 780         <em class="comment">// should be either 8 or 16.  If it's 8, this method will return</em>
<a id="L781" name="L781"></a> 781         <em class="comment">// an 8-bit value.  If it's 16, this method will return a 16-bit</em>
<a id="L782" name="L782"></a> 782         <em class="comment">// value for transferTypes other than TYPE_BYTE.  For TYPE_BYTE,</em>
<a id="L783" name="L783"></a> 783         <em class="comment">// an 8-bit value will be returned.</em>
<a id="L784" name="L784"></a> 784 
<a id="L785" name="L785"></a> 785         <em class="comment">// This method maps the input value corresponding to a</em>
<a id="L786" name="L786"></a> 786         <em class="comment">// normalized ColorSpace component value of 0.0 to 0, and the</em>
<a id="L787" name="L787"></a> 787         <em class="comment">// input value corresponding to a normalized ColorSpace</em>
<a id="L788" name="L788"></a> 788         <em class="comment">// component value of 1.0 to 2^n - 1 (where n is 8 or 16), so</em>
<a id="L789" name="L789"></a> 789         <em class="comment">// it is appropriate only for ColorSpaces with min/max component</em>
<a id="L790" name="L790"></a> 790         <em class="comment">// values of 0.0/1.0.  This will be true for sRGB, the built-in</em>
<a id="L791" name="L791"></a> 791         <em class="comment">// Linear RGB and Linear Gray spaces, and any other ICC grayscale</em>
<a id="L792" name="L792"></a> 792         <em class="comment">// spaces for which we have precomputed LUTs.</em>
<a id="L793" name="L793"></a> 793 
<a id="L794" name="L794"></a> 794         <strong class="reserved">boolean</strong> needAlpha = (supportsAlpha &amp;&amp; <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>);
<a id="L795" name="L795"></a> 795         <strong class="reserved">int</strong> alp = 0;
<a id="L796" name="L796"></a> 796         <strong class="reserved">int</strong> comp;
<a id="L797" name="L797"></a> 797         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = (1 &lt;&lt; nBits[idx]) - 1;
<a id="L798" name="L798"></a> 798 
<a id="L799" name="L799"></a> 799         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L800" name="L800"></a> 800             <em class="comment">// Note: we do no clamping of the pixel data here - we</em>
<a id="L801" name="L801"></a> 801             <em class="comment">// assume that the data is scaled properly</em>
<a id="L802" name="L802"></a> 802             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT: <em class="brace">{</em>
<a id="L803" name="L803"></a> 803                 <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[]) inData;
<a id="L804" name="L804"></a> 804                 <strong class="reserved">float</strong> scalefactor = (<strong class="reserved">float</strong>) ((1 &lt;&lt; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) - 1);
<a id="L805" name="L805"></a> 805                 <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L806" name="L806"></a> 806                     <strong class="reserved">short</strong> s = sdata[numColorComponents];
<a id="L807" name="L807"></a> 807                     <strong class="reserved">if</strong> (s != (<strong class="reserved">short</strong>) 0) <em class="brace">{</em>
<a id="L808" name="L808"></a> 808                         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) ((((<strong class="reserved">float</strong>) sdata[idx]) /
<a id="L809" name="L809"></a> 809                                        ((<strong class="reserved">float</strong>) s)) * scalefactor + 0.5f);
<a id="L810" name="L810"></a> 810                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L811" name="L811"></a> 811                         <strong class="reserved">return</strong> 0;
<a id="L812" name="L812"></a> 812                     <em class="brace">}</em>
<a id="L813" name="L813"></a> 813                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L814" name="L814"></a> 814                     <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) ((sdata[idx] / 32767.0f) * scalefactor + 0.5f);
<a id="L815" name="L815"></a> 815                 <em class="brace">}</em>
<a id="L816" name="L816"></a> 816             <em class="brace">}</em>
<a id="L817" name="L817"></a> 817             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT: <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                 <strong class="reserved">float</strong> fdata[] = (<strong class="reserved">float</strong>[]) inData;
<a id="L819" name="L819"></a> 819                 <strong class="reserved">float</strong> scalefactor = (<strong class="reserved">float</strong>) ((1 &lt;&lt; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) - 1);
<a id="L820" name="L820"></a> 820                 <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L821" name="L821"></a> 821                     <strong class="reserved">float</strong> f = fdata[numColorComponents];
<a id="L822" name="L822"></a> 822                     <strong class="reserved">if</strong> (f != 0.0f) <em class="brace">{</em>
<a id="L823" name="L823"></a> 823                         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (((fdata[idx] / f) * scalefactor) + 0.5f);
<a id="L824" name="L824"></a> 824                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L825" name="L825"></a> 825                         <strong class="reserved">return</strong> 0;
<a id="L826" name="L826"></a> 826                     <em class="brace">}</em>
<a id="L827" name="L827"></a> 827                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L828" name="L828"></a> 828                     <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (fdata[idx] * scalefactor + 0.5f);
<a id="L829" name="L829"></a> 829                 <em class="brace">}</em>
<a id="L830" name="L830"></a> 830             <em class="brace">}</em>
<a id="L831" name="L831"></a> 831             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE: <em class="brace">{</em>
<a id="L832" name="L832"></a> 832                 <strong class="reserved">double</strong> ddata[] = (<strong class="reserved">double</strong>[]) inData;
<a id="L833" name="L833"></a> 833                 <strong class="reserved">double</strong> scalefactor = (<strong class="reserved">double</strong>) ((1 &lt;&lt; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) - 1);
<a id="L834" name="L834"></a> 834                 <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L835" name="L835"></a> 835                     <strong class="reserved">double</strong> d = ddata[numColorComponents];
<a id="L836" name="L836"></a> 836                     <strong class="reserved">if</strong> (d != 0.0) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837                         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (((ddata[idx] / d) * scalefactor) + 0.5);
<a id="L838" name="L838"></a> 838                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L839" name="L839"></a> 839                         <strong class="reserved">return</strong> 0;
<a id="L840" name="L840"></a> 840                     <em class="brace">}</em>
<a id="L841" name="L841"></a> 841                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L842" name="L842"></a> 842                     <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (ddata[idx] * scalefactor + 0.5);
<a id="L843" name="L843"></a> 843                 <em class="brace">}</em>
<a id="L844" name="L844"></a> 844             <em class="brace">}</em>
<a id="L845" name="L845"></a> 845             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L846" name="L846"></a> 846                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L847" name="L847"></a> 847                comp = bdata[idx] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L848" name="L848"></a> 848                <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 8;
<a id="L849" name="L849"></a> 849                <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L850" name="L850"></a> 850                    alp = bdata[numColorComponents] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L851" name="L851"></a> 851                <em class="brace">}</em>
<a id="L852" name="L852"></a> 852             <strong class="reserved">break</strong>;
<a id="L853" name="L853"></a> 853             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L854" name="L854"></a> 854                <strong class="reserved">short</strong> usdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L855" name="L855"></a> 855                comp = usdata[idx] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L856" name="L856"></a> 856                <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L857" name="L857"></a> 857                    alp = usdata[numColorComponents] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L858" name="L858"></a> 858                <em class="brace">}</em>
<a id="L859" name="L859"></a> 859             <strong class="reserved">break</strong>;
<a id="L860" name="L860"></a> 860             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L861" name="L861"></a> 861                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L862" name="L862"></a> 862                comp = idata[idx];
<a id="L863" name="L863"></a> 863                <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L864" name="L864"></a> 864                    alp = idata[numColorComponents];
<a id="L865" name="L865"></a> 865                <em class="brace">}</em>
<a id="L866" name="L866"></a> 866             <strong class="reserved">break</strong>;
<a id="L867" name="L867"></a> 867             <strong class="reserved">default</strong>:
<a id="L868" name="L868"></a> 868                <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L869" name="L869"></a> 869                    <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not "+
<a id="L870" name="L870"></a> 870                    "been implemented for transferType " + transferType);
<a id="L871" name="L871"></a> 871         <em class="brace">}</em>
<a id="L872" name="L872"></a> 872         <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L873" name="L873"></a> 873             <strong class="reserved">if</strong> (alp != 0) <em class="brace">{</em>
<a id="L874" name="L874"></a> 874                 <strong class="reserved">float</strong> scalefactor = (<strong class="reserved">float</strong>) ((1 &lt;&lt; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) - 1);
<a id="L875" name="L875"></a> 875                 <strong class="reserved">float</strong> fcomp = ((<strong class="reserved">float</strong>) comp) / ((<strong class="reserved">float</strong>)<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>);
<a id="L876" name="L876"></a> 876                 <strong class="reserved">float</strong> invalp = ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[numColorComponents]) - 1)) /
<a id="L877" name="L877"></a> 877                                ((<strong class="reserved">float</strong>) alp);
<a id="L878" name="L878"></a> 878                 <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (fcomp * invalp * scalefactor + 0.5f);
<a id="L879" name="L879"></a> 879             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L880" name="L880"></a> 880                 <strong class="reserved">return</strong> 0;
<a id="L881" name="L881"></a> 881             <em class="brace">}</em>
<a id="L882" name="L882"></a> 882         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L883" name="L883"></a> 883             <strong class="reserved">if</strong> (nBits[idx] != <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L884" name="L884"></a> 884                 <strong class="reserved">float</strong> scalefactor = (<strong class="reserved">float</strong>) ((1 &lt;&lt; <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) - 1);
<a id="L885" name="L885"></a> 885                 <strong class="reserved">float</strong> fcomp = ((<strong class="reserved">float</strong>) comp) / ((<strong class="reserved">float</strong>)<a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>);
<a id="L886" name="L886"></a> 886                 <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (fcomp * scalefactor + 0.5f);
<a id="L887" name="L887"></a> 887             <em class="brace">}</em>
<a id="L888" name="L888"></a> 888             <strong class="reserved">return</strong> comp;
<a id="L889" name="L889"></a> 889         <em class="brace">}</em>
<a id="L890" name="L890"></a> 890     <em class="brace">}</em>
<a id="L891" name="L891"></a> 891 
<a id="L892" name="L892"></a> 892     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/18577.html" title="Multiple referred from 6 places.">getRGBComponent</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData, <strong class="reserved">int</strong> idx) <em class="brace">{</em>
<a id="L893" name="L893"></a> 893         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L895" name="L895"></a> 895         <em class="brace">}</em>
<a id="L896" name="L896"></a> 896         <strong class="reserved">if</strong> (is_sRGB_stdScale) <em class="brace">{</em>
<a id="L897" name="L897"></a> 897             <strong class="reserved">return</strong> <a href="../S/2267.html#L778" title="Defined at 778 in src/java/awt/image/ComponentColorModel.java.">extractComponent</a>(inData, idx, 8);
<a id="L898" name="L898"></a> 898         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L899" name="L899"></a> 899             <strong class="reserved">int</strong> lutidx = <a href="../S/2267.html#L778" title="Defined at 778 in src/java/awt/image/ComponentColorModel.java.">extractComponent</a>(inData, idx, 16);
<a id="L900" name="L900"></a> 900             <strong class="reserved">return</strong> tosRGB8LUT[lutidx] &amp; 0xff;
<a id="L901" name="L901"></a> 901         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_ICCGray_stdScale) <em class="brace">{</em>
<a id="L902" name="L902"></a> 902             <strong class="reserved">int</strong> lutidx = <a href="../S/2267.html#L778" title="Defined at 778 in src/java/awt/image/ComponentColorModel.java.">extractComponent</a>(inData, 0, 16);
<a id="L903" name="L903"></a> 903             <strong class="reserved">return</strong> tosRGB8LUT[lutidx] &amp; 0xff;
<a id="L904" name="L904"></a> 904         <em class="brace">}</em>
<a id="L905" name="L905"></a> 905 
<a id="L906" name="L906"></a> 906         <em class="comment">// Not CS_sRGB, CS_LINEAR_RGB, or any TYPE_GRAY ICC_ColorSpace</em>
<a id="L907" name="L907"></a> 907         <strong class="reserved">float</strong>[] norm = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(inData, <strong class="reserved">null</strong>, 0);
<a id="L908" name="L908"></a> 908         <em class="comment">// Note that getNormalizedComponents returns non-premultiplied values</em>
<a id="L909" name="L909"></a> 909         <strong class="reserved">float</strong>[] rgb = colorSpace.<a href="../D/35471.html" title="Multiple defined in 3 places.">toRGB</a>(norm);
<a id="L910" name="L910"></a> 910         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (rgb[idx] * 255.0f + 0.5f);
<a id="L911" name="L911"></a> 911     <em class="brace">}</em>
<a id="L912" name="L912"></a> 912 
<div class="comment">
      Returns the red color component for the specified pixel, scaled
      from 0 to 255 in the default RGB ColorSpace, sRGB.  A color conversion
      is done if necessary.  The <code>pixel</code> value is specified by an array
      of data elements of type <code>transferType</code> passed in as an object
      reference. The returned value will be a non pre-multiplied value. If the
      alpha is premultiplied, this method divides it out before returning
      the value (if the alpha value is 0, the red value will be 0). Since
      <code>ComponentColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't override
      it then they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param inData The pixel from which you want to get the red color component,
      specified by an array of data elements of type <code>transferType</code>.
      @return The red color component for the specified pixel, as an int.
      @throws ClassCastException If <code>inData</code> is not a primitive array
      of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
      large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.</div>
<a id="L943" name="L943"></a> 943     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18630.html" title="Multiple referred from 50 places.">getRed</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L944" name="L944"></a> 944         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(inData, 0);
<a id="L945" name="L945"></a> 945     <em class="brace">}</em>
<a id="L946" name="L946"></a> 946 
<a id="L947" name="L947"></a> 947 
<div class="comment">
      Returns the green color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.
      A color conversion is done if necessary.  The <code>pixel</code> value
      is specified by an array of data elements of type <code>transferType</code>
      passed in as an object reference. The returned value is a non pre-multiplied
      value. If the alpha is premultiplied, this method divides it out before
      returning the value (if the alpha value is 0, the green value will be 0).
      Since <code>ComponentColorModel</code> can be subclassed,
      subclasses inherit the implementation of this method and if they
      don't override it then they throw an exception if they use an
      unsupported <code>transferType</code>.
      @param inData The pixel from which you want to get the green color component,
      specified by an array of data elements of type <code>transferType</code>.
      @return The green color component for the specified pixel, as an int.
      @throws ClassCastException If <code>inData</code> is not a primitive array
      of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
      large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.</div>
<a id="L978" name="L978"></a> 978     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16819.html" title="Multiple referred from 45 places.">getGreen</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L979" name="L979"></a> 979         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(inData, 1);
<a id="L980" name="L980"></a> 980     <em class="brace">}</em>
<a id="L981" name="L981"></a> 981 
<a id="L982" name="L982"></a> 982 
<div class="comment">
      Returns the blue color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.
      A color conversion is done if necessary.  The <code>pixel</code> value is
      specified by an array of data elements of type <code>transferType</code>
      passed in as an object reference. The returned value is a non pre-multiplied
      value. If the alpha is premultiplied, this method divides it out before
      returning the value (if the alpha value is 0, the blue value will be 0).
      Since <code>ComponentColorModel</code> can be subclassed,
      subclasses inherit the implementation of this method and if they
      don't override it then they throw an exception if they use an
      unsupported <code>transferType</code>.
      @param inData The pixel from which you want to get the blue color component,
      specified by an array of data elements of type <code>transferType</code>.
      @return The blue color component for the specified pixel, as an int.
      @throws ClassCastException If <code>inData</code> is not a primitive array
      of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
      large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.</div>
<a id="L1013" name="L1013"></a>1013     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15290.html" title="Multiple referred from 45 places.">getBlue</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L1014" name="L1014"></a>1014         <strong class="reserved">return</strong> <a href="../D/21817.html" title="Multiple defined in 2 places.">getRGBComponent</a>(inData, 2);
<a id="L1015" name="L1015"></a>1015     <em class="brace">}</em>
<a id="L1016" name="L1016"></a>1016 
<div class="comment">
      Returns the alpha component for the specified pixel, scaled from
      0 to 255.  The pixel value is specified by an array of data
      elements of type <code>transferType</code> passed in as an
      object reference.  Since <code>ComponentColorModel</code> can be
      subclassed, subclasses inherit the
      implementation of this method and if they don't override it then
      they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param inData The pixel from which you want to get the alpha component,
      specified by an array of data elements of type <code>transferType</code>.
      @return The alpha component for the specified pixel, as an int.
      @throws ClassCastException If <code>inData</code> is not a primitive array
      of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
      large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.</div>
<a id="L1044" name="L1044"></a>1044     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15034.html" title="Multiple referred from 34 places.">getAlpha</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045         <strong class="reserved">if</strong> (supportsAlpha == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L1046" name="L1046"></a>1046             <strong class="reserved">return</strong> 255;
<a id="L1047" name="L1047"></a>1047         <em class="brace">}</em>
<a id="L1048" name="L1048"></a>1048 
<a id="L1049" name="L1049"></a>1049         <strong class="reserved">int</strong> alpha = 0;
<a id="L1050" name="L1050"></a>1050         <strong class="reserved">int</strong> aIdx = numColorComponents;
<a id="L1051" name="L1051"></a>1051         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = (1 &lt;&lt; nBits[aIdx]) - 1;
<a id="L1052" name="L1052"></a>1052 
<a id="L1053" name="L1053"></a>1053         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L1054" name="L1054"></a>1054             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L1055" name="L1055"></a>1055                 <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L1056" name="L1056"></a>1056                 alpha = (<strong class="reserved">int</strong>) ((sdata[aIdx] / 32767.0f) * 255.0f + 0.5f);
<a id="L1057" name="L1057"></a>1057                 <strong class="reserved">return</strong> alpha;
<a id="L1058" name="L1058"></a>1058             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT:
<a id="L1059" name="L1059"></a>1059                 <strong class="reserved">float</strong> fdata[] = (<strong class="reserved">float</strong>[])inData;
<a id="L1060" name="L1060"></a>1060                 alpha = (<strong class="reserved">int</strong>) (fdata[aIdx] * 255.0f + 0.5f);
<a id="L1061" name="L1061"></a>1061                 <strong class="reserved">return</strong> alpha;
<a id="L1062" name="L1062"></a>1062             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE:
<a id="L1063" name="L1063"></a>1063                 <strong class="reserved">double</strong> ddata[] = (<strong class="reserved">double</strong>[])inData;
<a id="L1064" name="L1064"></a>1064                 alpha = (<strong class="reserved">int</strong>) (ddata[aIdx] * 255.0 + 0.5);
<a id="L1065" name="L1065"></a>1065                 <strong class="reserved">return</strong> alpha;
<a id="L1066" name="L1066"></a>1066             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L1067" name="L1067"></a>1067                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L1068" name="L1068"></a>1068                alpha = bdata[aIdx] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L1069" name="L1069"></a>1069             <strong class="reserved">break</strong>;
<a id="L1070" name="L1070"></a>1070             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L1071" name="L1071"></a>1071                <strong class="reserved">short</strong> usdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L1072" name="L1072"></a>1072                alpha = usdata[aIdx] &amp; <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L1073" name="L1073"></a>1073             <strong class="reserved">break</strong>;
<a id="L1074" name="L1074"></a>1074             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L1075" name="L1075"></a>1075                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L1076" name="L1076"></a>1076                alpha = idata[aIdx];
<a id="L1077" name="L1077"></a>1077             <strong class="reserved">break</strong>;
<a id="L1078" name="L1078"></a>1078             <strong class="reserved">default</strong>:
<a id="L1079" name="L1079"></a>1079                <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1080" name="L1080"></a>1080                    <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not "+
<a id="L1081" name="L1081"></a>1081                    "been implemented for transferType " + transferType);
<a id="L1082" name="L1082"></a>1082         <em class="brace">}</em>
<a id="L1083" name="L1083"></a>1083 
<a id="L1084" name="L1084"></a>1084         <strong class="reserved">if</strong> (nBits[aIdx] == 8) <em class="brace">{</em>
<a id="L1085" name="L1085"></a>1085             <strong class="reserved">return</strong> alpha;
<a id="L1086" name="L1086"></a>1086         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1087" name="L1087"></a>1087             <strong class="reserved">return</strong> (<strong class="reserved">int</strong>)
<a id="L1088" name="L1088"></a>1088                 ((((<strong class="reserved">float</strong>) alpha) / ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[aIdx]) - 1))) *
<a id="L1089" name="L1089"></a>1089                  255.0f + 0.5f);
<a id="L1090" name="L1090"></a>1090         <em class="brace">}</em>
<a id="L1091" name="L1091"></a>1091     <em class="brace">}</em>
<a id="L1092" name="L1092"></a>1092 
<div class="comment">
      Returns the color/alpha components for the specified pixel in the
      default RGB color model format.  A color conversion is done if
      necessary.  The pixel value is specified by an
      array of data elements of type <code>transferType</code> passed
      in as an object reference.
      The returned value is in a non pre-multiplied format. If
      the alpha is premultiplied, this method divides it out of the
      color components (if the alpha value is 0, the color values will be 0).
      Since <code>ComponentColorModel</code> can be subclassed,
      subclasses inherit the implementation of this method and if they
      don't override it then they throw an exception if they use an
      unsupported <code>transferType</code>.
      @param inData The pixel from which you want to get the color/alpha components,
      specified by an array of data elements of type <code>transferType</code>.
      @return The color/alpha components for the specified pixel, as an int.
      @throws ClassCastException If <code>inData</code> is not a primitive array
      of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
      large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.
      @see ColorModel#getRGBdefault</div>
<a id="L1125" name="L1125"></a>1125     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18575.html" title="Multiple referred from 57 places.">getRGB</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L1126" name="L1126"></a>1126         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1127" name="L1127"></a>1127             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1128" name="L1128"></a>1128         <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129         <strong class="reserved">if</strong> (is_sRGB_stdScale || is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130             <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(inData) &lt;&lt; 24)
<a id="L1131" name="L1131"></a>1131                 | (<a href="../D/21904.html" title="Multiple defined in 9 places.">getRed</a>(inData) &lt;&lt; 16)
<a id="L1132" name="L1132"></a>1132                 | (<a href="../D/19369.html" title="Multiple defined in 9 places.">getGreen</a>(inData) &lt;&lt; 8)
<a id="L1133" name="L1133"></a>1133                 | (<a href="../D/17280.html" title="Multiple defined in 9 places.">getBlue</a>(inData));
<a id="L1134" name="L1134"></a>1134         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (colorSpaceType == <a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a>.TYPE_GRAY) <em class="brace">{</em>
<a id="L1135" name="L1135"></a>1135             <strong class="reserved">int</strong> gray = <a href="../D/21904.html" title="Multiple defined in 9 places.">getRed</a>(inData); <em class="comment">// Red sRGB component should equal</em>
<a id="L1136" name="L1136"></a>1136                                        <em class="comment">// green and blue components</em>
<a id="L1137" name="L1137"></a>1137             <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(inData) &lt;&lt; 24)
<a id="L1138" name="L1138"></a>1138                 | (gray &lt;&lt; 16)
<a id="L1139" name="L1139"></a>1139                 | (gray &lt;&lt;  8)
<a id="L1140" name="L1140"></a>1140                 | gray;
<a id="L1141" name="L1141"></a>1141         <em class="brace">}</em>
<a id="L1142" name="L1142"></a>1142         <strong class="reserved">float</strong>[] norm = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(inData, <strong class="reserved">null</strong>, 0);
<a id="L1143" name="L1143"></a>1143         <em class="comment">// Note that getNormalizedComponents returns non-premult values</em>
<a id="L1144" name="L1144"></a>1144         <strong class="reserved">float</strong>[] rgb = colorSpace.<a href="../D/35471.html" title="Multiple defined in 3 places.">toRGB</a>(norm);
<a id="L1145" name="L1145"></a>1145         <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(inData) &lt;&lt; 24)
<a id="L1146" name="L1146"></a>1146             | (((<strong class="reserved">int</strong>) (rgb[0] * 255.0f + 0.5f)) &lt;&lt; 16)
<a id="L1147" name="L1147"></a>1147             | (((<strong class="reserved">int</strong>) (rgb[1] * 255.0f + 0.5f)) &lt;&lt; 8)
<a id="L1148" name="L1148"></a>1148             | (((<strong class="reserved">int</strong>) (rgb[2] * 255.0f + 0.5f)) &lt;&lt; 0);
<a id="L1149" name="L1149"></a>1149     <em class="brace">}</em>
<a id="L1150" name="L1150"></a>1150 
<div class="comment">
      Returns a data element array representation of a pixel in this
      <code>ColorModel</code>, given an integer pixel representation
      in the default RGB color model.
      This array can then be passed to the <code>setDataElements</code>
      method of a <code>WritableRaster</code> object.  If the
      <code>pixel</code>
      parameter is null, a new array is allocated.  Since
      <code>ComponentColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't
      override it then
      they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param rgb the integer representation of the pixel in the RGB
                 color model
      @param pixel the specified pixel
      @return The data element array representation of a pixel
      in this <code>ColorModel</code>.
      @throws ClassCastException If <code>pixel</code> is not null and
      is not a primitive array of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException If <code>pixel</code> is
      not large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.
      @see WritableRaster#setDataElements
      @see SampleModel#setDataElements</div>
<a id="L1185" name="L1185"></a>1185     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/15949.html" title="Multiple referred from 46 places.">getDataElements</a>(<strong class="reserved">int</strong> rgb, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel) <em class="brace">{</em>
<a id="L1186" name="L1186"></a>1186         <em class="comment">// REMIND: Use rendering hints?</em>
<a id="L1187" name="L1187"></a>1187 
<a id="L1188" name="L1188"></a>1188         <strong class="reserved">int</strong> red, grn, blu, alp;
<a id="L1189" name="L1189"></a>1189         red = (rgb&gt;&gt;16) &amp; 0xff;
<a id="L1190" name="L1190"></a>1190         grn = (rgb&gt;&gt;8) &amp; 0xff;
<a id="L1191" name="L1191"></a>1191         blu = rgb &amp; 0xff;
<a id="L1192" name="L1192"></a>1192 
<a id="L1193" name="L1193"></a>1193         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1194" name="L1194"></a>1194             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1195" name="L1195"></a>1195         <em class="brace">}</em>
<a id="L1196" name="L1196"></a>1196         <strong class="reserved">if</strong> (signed) <em class="brace">{</em>
<a id="L1197" name="L1197"></a>1197             <em class="comment">// Handle SHORT, FLOAT, &amp; DOUBLE here</em>
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199             <strong class="reserved">switch</strong>(transferType) <em class="brace">{</em>
<a id="L1200" name="L1200"></a>1200             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L1201" name="L1201"></a>1201                 <em class="brace">{</em>
<a id="L1202" name="L1202"></a>1202                     <strong class="reserved">short</strong> sdata[];
<a id="L1203" name="L1203"></a>1203                     <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204                         sdata = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L1205" name="L1205"></a>1205                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1206" name="L1206"></a>1206                         sdata = (<strong class="reserved">short</strong>[])pixel;
<a id="L1207" name="L1207"></a>1207                     <em class="brace">}</em>
<a id="L1208" name="L1208"></a>1208                     <strong class="reserved">float</strong> factor;
<a id="L1209" name="L1209"></a>1209                     <strong class="reserved">if</strong> (is_sRGB_stdScale || is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1210" name="L1210"></a>1210                         factor = 32767.0f / 255.0f;
<a id="L1211" name="L1211"></a>1211                         <strong class="reserved">if</strong> (is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1212" name="L1212"></a>1212                             red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1213" name="L1213"></a>1213                             grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1214" name="L1214"></a>1214                             blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1215" name="L1215"></a>1215                             factor = 32767.0f / 65535.0f;
<a id="L1216" name="L1216"></a>1216                         <em class="brace">}</em>
<a id="L1217" name="L1217"></a>1217                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1219" name="L1219"></a>1219                             sdata[3] =
<a id="L1220" name="L1220"></a>1220                                 (<strong class="reserved">short</strong>) (alp * (32767.0f / 255.0f) + 0.5f);
<a id="L1221" name="L1221"></a>1221                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1222" name="L1222"></a>1222                                 factor = alp * factor * (1.0f / 255.0f);
<a id="L1223" name="L1223"></a>1223                             <em class="brace">}</em>
<a id="L1224" name="L1224"></a>1224                         <em class="brace">}</em>
<a id="L1225" name="L1225"></a>1225                         sdata[0] = (<strong class="reserved">short</strong>) (red * factor + 0.5f);
<a id="L1226" name="L1226"></a>1226                         sdata[1] = (<strong class="reserved">short</strong>) (grn * factor + 0.5f);
<a id="L1227" name="L1227"></a>1227                         sdata[2] = (<strong class="reserved">short</strong>) (blu * factor + 0.5f);
<a id="L1228" name="L1228"></a>1228                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearGray_stdScale) <em class="brace">{</em>
<a id="L1229" name="L1229"></a>1229                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1230" name="L1230"></a>1230                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1231" name="L1231"></a>1231                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1232" name="L1232"></a>1232                         <strong class="reserved">float</strong> gray = ((0.2125f * red) +
<a id="L1233" name="L1233"></a>1233                                       (0.7154f * grn) +
<a id="L1234" name="L1234"></a>1234                                       (0.0721f * blu)) / 65535.0f;
<a id="L1235" name="L1235"></a>1235                         factor = 32767.0f;
<a id="L1236" name="L1236"></a>1236                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1237" name="L1237"></a>1237                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1238" name="L1238"></a>1238                             sdata[1] =
<a id="L1239" name="L1239"></a>1239                                 (<strong class="reserved">short</strong>) (alp * (32767.0f / 255.0f) + 0.5f);
<a id="L1240" name="L1240"></a>1240                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1241" name="L1241"></a>1241                                 factor = alp * factor * (1.0f / 255.0f);
<a id="L1242" name="L1242"></a>1242                             <em class="brace">}</em>
<a id="L1243" name="L1243"></a>1243                         <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244                         sdata[0] = (<strong class="reserved">short</strong>) (gray * factor + 0.5f);
<a id="L1245" name="L1245"></a>1245                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_ICCGray_stdScale) <em class="brace">{</em>
<a id="L1246" name="L1246"></a>1246                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1247" name="L1247"></a>1247                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1248" name="L1248"></a>1248                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1249" name="L1249"></a>1249                         <strong class="reserved">int</strong> gray = (<strong class="reserved">int</strong>) ((0.2125f * red) +
<a id="L1250" name="L1250"></a>1250                                           (0.7154f * grn) +
<a id="L1251" name="L1251"></a>1251                                           (0.0721f * blu) + 0.5f);
<a id="L1252" name="L1252"></a>1252                         gray = fromLinearGray16ToOtherGray16LUT[gray] &amp; 0xffff;
<a id="L1253" name="L1253"></a>1253                         factor = 32767.0f / 65535.0f;
<a id="L1254" name="L1254"></a>1254                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1255" name="L1255"></a>1255                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1256" name="L1256"></a>1256                             sdata[1] =
<a id="L1257" name="L1257"></a>1257                                 (<strong class="reserved">short</strong>) (alp * (32767.0f / 255.0f) + 0.5f);
<a id="L1258" name="L1258"></a>1258                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1259" name="L1259"></a>1259                                 factor = alp * factor * (1.0f / 255.0f);
<a id="L1260" name="L1260"></a>1260                             <em class="brace">}</em>
<a id="L1261" name="L1261"></a>1261                         <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262                         sdata[0] = (<strong class="reserved">short</strong>) (gray * factor + 0.5f);
<a id="L1263" name="L1263"></a>1263                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1264" name="L1264"></a>1264                         factor = 1.0f / 255.0f;
<a id="L1265" name="L1265"></a>1265                         <strong class="reserved">float</strong> norm[] = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[3];
<a id="L1266" name="L1266"></a>1266                         norm[0] = red * factor;
<a id="L1267" name="L1267"></a>1267                         norm[1] = grn * factor;
<a id="L1268" name="L1268"></a>1268                         norm[2] = blu * factor;
<a id="L1269" name="L1269"></a>1269                         norm = colorSpace.<a href="../D/16601.html" title="Multiple defined in 3 places.">fromRGB</a>(norm);
<a id="L1270" name="L1270"></a>1270                         <strong class="reserved">if</strong> (nonStdScale) <em class="brace">{</em>
<a id="L1271" name="L1271"></a>1271                             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1272" name="L1272"></a>1272                                 norm[i] = (norm[i] - compOffset[i]) *
<a id="L1273" name="L1273"></a>1273                                           compScale[i];
<a id="L1274" name="L1274"></a>1274                                 <em class="comment">// REMIND: need to analyze whether this</em>
<a id="L1275" name="L1275"></a>1275                                 <em class="comment">// clamping is necessary</em>
<a id="L1276" name="L1276"></a>1276                                 <strong class="reserved">if</strong> (norm[i] &lt; 0.0f) <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277                                     norm[i] = 0.0f;
<a id="L1278" name="L1278"></a>1278                                 <em class="brace">}</em>
<a id="L1279" name="L1279"></a>1279                                 <strong class="reserved">if</strong> (norm[i] &gt; 1.0f) <em class="brace">{</em>
<a id="L1280" name="L1280"></a>1280                                     norm[i] = 1.0f;
<a id="L1281" name="L1281"></a>1281                                 <em class="brace">}</em>
<a id="L1282" name="L1282"></a>1282                             <em class="brace">}</em>
<a id="L1283" name="L1283"></a>1283                         <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284                         factor = 32767.0f;
<a id="L1285" name="L1285"></a>1285                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1286" name="L1286"></a>1286                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1287" name="L1287"></a>1287                             sdata[numColorComponents] =
<a id="L1288" name="L1288"></a>1288                                 (<strong class="reserved">short</strong>) (alp * (32767.0f / 255.0f) + 0.5f);
<a id="L1289" name="L1289"></a>1289                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1290" name="L1290"></a>1290                                 factor *= alp * (1.0f / 255.0f);
<a id="L1291" name="L1291"></a>1291                             <em class="brace">}</em>
<a id="L1292" name="L1292"></a>1292                         <em class="brace">}</em>
<a id="L1293" name="L1293"></a>1293                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294                             sdata[i] = (<strong class="reserved">short</strong>) (norm[i] * factor + 0.5f);
<a id="L1295" name="L1295"></a>1295                         <em class="brace">}</em>
<a id="L1296" name="L1296"></a>1296                     <em class="brace">}</em>
<a id="L1297" name="L1297"></a>1297                     <strong class="reserved">return</strong> sdata;
<a id="L1298" name="L1298"></a>1298                 <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT:
<a id="L1300" name="L1300"></a>1300                 <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301                     <strong class="reserved">float</strong> fdata[];
<a id="L1302" name="L1302"></a>1302                     <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1303" name="L1303"></a>1303                         fdata = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L1304" name="L1304"></a>1304                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305                         fdata = (<strong class="reserved">float</strong>[])pixel;
<a id="L1306" name="L1306"></a>1306                     <em class="brace">}</em>
<a id="L1307" name="L1307"></a>1307                     <strong class="reserved">float</strong> factor;
<a id="L1308" name="L1308"></a>1308                     <strong class="reserved">if</strong> (is_sRGB_stdScale || is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1309" name="L1309"></a>1309                         <strong class="reserved">if</strong> (is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310                             red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1311" name="L1311"></a>1311                             grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1312" name="L1312"></a>1312                             blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1313" name="L1313"></a>1313                             factor = 1.0f / 65535.0f;
<a id="L1314" name="L1314"></a>1314                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1315" name="L1315"></a>1315                             factor = 1.0f / 255.0f;
<a id="L1316" name="L1316"></a>1316                         <em class="brace">}</em>
<a id="L1317" name="L1317"></a>1317                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1318" name="L1318"></a>1318                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1319" name="L1319"></a>1319                             fdata[3] = alp * (1.0f / 255.0f);
<a id="L1320" name="L1320"></a>1320                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1321" name="L1321"></a>1321                                 factor *= fdata[3];
<a id="L1322" name="L1322"></a>1322                             <em class="brace">}</em>
<a id="L1323" name="L1323"></a>1323                         <em class="brace">}</em>
<a id="L1324" name="L1324"></a>1324                         fdata[0] = red * factor;
<a id="L1325" name="L1325"></a>1325                         fdata[1] = grn * factor;
<a id="L1326" name="L1326"></a>1326                         fdata[2] = blu * factor;
<a id="L1327" name="L1327"></a>1327                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearGray_stdScale) <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1329" name="L1329"></a>1329                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1330" name="L1330"></a>1330                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1331" name="L1331"></a>1331                         fdata[0] = ((0.2125f * red) +
<a id="L1332" name="L1332"></a>1332                                     (0.7154f * grn) +
<a id="L1333" name="L1333"></a>1333                                     (0.0721f * blu)) / 65535.0f;
<a id="L1334" name="L1334"></a>1334                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1335" name="L1335"></a>1335                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1336" name="L1336"></a>1336                             fdata[1] = alp * (1.0f / 255.0f);
<a id="L1337" name="L1337"></a>1337                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1338" name="L1338"></a>1338                                 fdata[0] *= fdata[1];
<a id="L1339" name="L1339"></a>1339                             <em class="brace">}</em>
<a id="L1340" name="L1340"></a>1340                         <em class="brace">}</em>
<a id="L1341" name="L1341"></a>1341                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_ICCGray_stdScale) <em class="brace">{</em>
<a id="L1342" name="L1342"></a>1342                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1343" name="L1343"></a>1343                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1344" name="L1344"></a>1344                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1345" name="L1345"></a>1345                         <strong class="reserved">int</strong> gray = (<strong class="reserved">int</strong>) ((0.2125f * red) +
<a id="L1346" name="L1346"></a>1346                                           (0.7154f * grn) +
<a id="L1347" name="L1347"></a>1347                                           (0.0721f * blu) + 0.5f);
<a id="L1348" name="L1348"></a>1348                         fdata[0] = (fromLinearGray16ToOtherGray16LUT[gray] &amp;
<a id="L1349" name="L1349"></a>1349                                     0xffff) / 65535.0f;
<a id="L1350" name="L1350"></a>1350                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1351" name="L1351"></a>1351                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1352" name="L1352"></a>1352                             fdata[1] = alp * (1.0f / 255.0f);
<a id="L1353" name="L1353"></a>1353                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354                                 fdata[0] *= fdata[1];
<a id="L1355" name="L1355"></a>1355                             <em class="brace">}</em>
<a id="L1356" name="L1356"></a>1356                         <em class="brace">}</em>
<a id="L1357" name="L1357"></a>1357                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1358" name="L1358"></a>1358                         <strong class="reserved">float</strong> norm[] = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[3];
<a id="L1359" name="L1359"></a>1359                         factor = 1.0f / 255.0f;
<a id="L1360" name="L1360"></a>1360                         norm[0] = red * factor;
<a id="L1361" name="L1361"></a>1361                         norm[1] = grn * factor;
<a id="L1362" name="L1362"></a>1362                         norm[2] = blu * factor;
<a id="L1363" name="L1363"></a>1363                         norm = colorSpace.<a href="../D/16601.html" title="Multiple defined in 3 places.">fromRGB</a>(norm);
<a id="L1364" name="L1364"></a>1364                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1365" name="L1365"></a>1365                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1366" name="L1366"></a>1366                             fdata[numColorComponents] = alp * factor;
<a id="L1367" name="L1367"></a>1367                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1368" name="L1368"></a>1368                                 factor *= alp;
<a id="L1369" name="L1369"></a>1369                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1370" name="L1370"></a>1370                                     norm[i] *= factor;
<a id="L1371" name="L1371"></a>1371                                 <em class="brace">}</em>
<a id="L1372" name="L1372"></a>1372                             <em class="brace">}</em>
<a id="L1373" name="L1373"></a>1373                         <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1375" name="L1375"></a>1375                             fdata[i] = norm[i];
<a id="L1376" name="L1376"></a>1376                         <em class="brace">}</em>
<a id="L1377" name="L1377"></a>1377                     <em class="brace">}</em>
<a id="L1378" name="L1378"></a>1378                     <strong class="reserved">return</strong> fdata;
<a id="L1379" name="L1379"></a>1379                 <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE:
<a id="L1381" name="L1381"></a>1381                 <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382                     <strong class="reserved">double</strong> ddata[];
<a id="L1383" name="L1383"></a>1383                     <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1384" name="L1384"></a>1384                         ddata = <strong class="reserved">new</strong> <strong class="reserved">double</strong>[numComponents];
<a id="L1385" name="L1385"></a>1385                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1386" name="L1386"></a>1386                         ddata = (<strong class="reserved">double</strong>[])pixel;
<a id="L1387" name="L1387"></a>1387                     <em class="brace">}</em>
<a id="L1388" name="L1388"></a>1388                     <strong class="reserved">if</strong> (is_sRGB_stdScale || is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1389" name="L1389"></a>1389                         <strong class="reserved">double</strong> factor;
<a id="L1390" name="L1390"></a>1390                         <strong class="reserved">if</strong> (is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1391" name="L1391"></a>1391                             red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1392" name="L1392"></a>1392                             grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1393" name="L1393"></a>1393                             blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1394" name="L1394"></a>1394                             factor = 1.0 / 65535.0;
<a id="L1395" name="L1395"></a>1395                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396                             factor = 1.0 / 255.0;
<a id="L1397" name="L1397"></a>1397                         <em class="brace">}</em>
<a id="L1398" name="L1398"></a>1398                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1399" name="L1399"></a>1399                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1400" name="L1400"></a>1400                             ddata[3] = alp * (1.0 / 255.0);
<a id="L1401" name="L1401"></a>1401                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1402" name="L1402"></a>1402                                 factor *= ddata[3];
<a id="L1403" name="L1403"></a>1403                             <em class="brace">}</em>
<a id="L1404" name="L1404"></a>1404                         <em class="brace">}</em>
<a id="L1405" name="L1405"></a>1405                         ddata[0] = red * factor;
<a id="L1406" name="L1406"></a>1406                         ddata[1] = grn * factor;
<a id="L1407" name="L1407"></a>1407                         ddata[2] = blu * factor;
<a id="L1408" name="L1408"></a>1408                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearGray_stdScale) <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1410" name="L1410"></a>1410                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1411" name="L1411"></a>1411                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1412" name="L1412"></a>1412                         ddata[0] = ((0.2125 * red) +
<a id="L1413" name="L1413"></a>1413                                     (0.7154 * grn) +
<a id="L1414" name="L1414"></a>1414                                     (0.0721 * blu)) / 65535.0;
<a id="L1415" name="L1415"></a>1415                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1416" name="L1416"></a>1416                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1417" name="L1417"></a>1417                             ddata[1] = alp * (1.0 / 255.0);
<a id="L1418" name="L1418"></a>1418                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1419" name="L1419"></a>1419                                 ddata[0] *= ddata[1];
<a id="L1420" name="L1420"></a>1420                             <em class="brace">}</em>
<a id="L1421" name="L1421"></a>1421                         <em class="brace">}</em>
<a id="L1422" name="L1422"></a>1422                     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_ICCGray_stdScale) <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423                         red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1424" name="L1424"></a>1424                         grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1425" name="L1425"></a>1425                         blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1426" name="L1426"></a>1426                         <strong class="reserved">int</strong> gray = (<strong class="reserved">int</strong>) ((0.2125f * red) +
<a id="L1427" name="L1427"></a>1427                                           (0.7154f * grn) +
<a id="L1428" name="L1428"></a>1428                                           (0.0721f * blu) + 0.5f);
<a id="L1429" name="L1429"></a>1429                         ddata[0] = (fromLinearGray16ToOtherGray16LUT[gray] &amp;
<a id="L1430" name="L1430"></a>1430                                     0xffff) / 65535.0;
<a id="L1431" name="L1431"></a>1431                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1432" name="L1432"></a>1432                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1433" name="L1433"></a>1433                             ddata[1] = alp * (1.0 / 255.0);
<a id="L1434" name="L1434"></a>1434                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435                                 ddata[0] *= ddata[1];
<a id="L1436" name="L1436"></a>1436                             <em class="brace">}</em>
<a id="L1437" name="L1437"></a>1437                         <em class="brace">}</em>
<a id="L1438" name="L1438"></a>1438                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1439" name="L1439"></a>1439                         <strong class="reserved">float</strong> factor = 1.0f / 255.0f;
<a id="L1440" name="L1440"></a>1440                         <strong class="reserved">float</strong> norm[] = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[3];
<a id="L1441" name="L1441"></a>1441                         norm[0] = red * factor;
<a id="L1442" name="L1442"></a>1442                         norm[1] = grn * factor;
<a id="L1443" name="L1443"></a>1443                         norm[2] = blu * factor;
<a id="L1444" name="L1444"></a>1444                         norm = colorSpace.<a href="../D/16601.html" title="Multiple defined in 3 places.">fromRGB</a>(norm);
<a id="L1445" name="L1445"></a>1445                         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1446" name="L1446"></a>1446                             alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1447" name="L1447"></a>1447                             ddata[numColorComponents] = alp * (1.0 / 255.0);
<a id="L1448" name="L1448"></a>1448                             <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1449" name="L1449"></a>1449                                 factor *= alp;
<a id="L1450" name="L1450"></a>1450                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1451" name="L1451"></a>1451                                     norm[i] *= factor;
<a id="L1452" name="L1452"></a>1452                                 <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453                             <em class="brace">}</em>
<a id="L1454" name="L1454"></a>1454                         <em class="brace">}</em>
<a id="L1455" name="L1455"></a>1455                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1456" name="L1456"></a>1456                             ddata[i] = norm[i];
<a id="L1457" name="L1457"></a>1457                         <em class="brace">}</em>
<a id="L1458" name="L1458"></a>1458                     <em class="brace">}</em>
<a id="L1459" name="L1459"></a>1459                     <strong class="reserved">return</strong> ddata;
<a id="L1460" name="L1460"></a>1460                 <em class="brace">}</em>
<a id="L1461" name="L1461"></a>1461             <em class="brace">}</em>
<a id="L1462" name="L1462"></a>1462         <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463 
<a id="L1464" name="L1464"></a>1464         <em class="comment">// Handle BYTE, USHORT, &amp; INT here</em>
<a id="L1465" name="L1465"></a>1465         <em class="comment">//REMIND: maybe more efficient not to use int array for</em>
<a id="L1466" name="L1466"></a>1466         <em class="comment">//DataBuffer.TYPE_USHORT and DataBuffer.TYPE_INT</em>
<a id="L1467" name="L1467"></a>1467         <strong class="reserved">int</strong> intpixel[];
<a id="L1468" name="L1468"></a>1468         <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT &amp;&amp;
<a id="L1469" name="L1469"></a>1469             pixel != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1470" name="L1470"></a>1470            intpixel = (<strong class="reserved">int</strong>[])pixel;
<a id="L1471" name="L1471"></a>1471         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1472" name="L1472"></a>1472             intpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L1473" name="L1473"></a>1473         <em class="brace">}</em>
<a id="L1474" name="L1474"></a>1474 
<a id="L1475" name="L1475"></a>1475         <strong class="reserved">if</strong> (is_sRGB_stdScale || is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1476" name="L1476"></a>1476             <strong class="reserved">int</strong> <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L1477" name="L1477"></a>1477             <strong class="reserved">float</strong> factor;
<a id="L1478" name="L1478"></a>1478             <strong class="reserved">if</strong> (is_LinearRGB_stdScale) <em class="brace">{</em>
<a id="L1479" name="L1479"></a>1479                 <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE) <em class="brace">{</em>
<a id="L1480" name="L1480"></a>1480                     red = fromsRGB8LUT8[red] &amp; 0xff;
<a id="L1481" name="L1481"></a>1481                     grn = fromsRGB8LUT8[grn] &amp; 0xff;
<a id="L1482" name="L1482"></a>1482                     blu = fromsRGB8LUT8[blu] &amp; 0xff;
<a id="L1483" name="L1483"></a>1483                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 8;
<a id="L1484" name="L1484"></a>1484                     factor = 1.0f / 255.0f;
<a id="L1485" name="L1485"></a>1485                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1486" name="L1486"></a>1486                     red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1487" name="L1487"></a>1487                     grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1488" name="L1488"></a>1488                     blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1489" name="L1489"></a>1489                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 16;
<a id="L1490" name="L1490"></a>1490                     factor = 1.0f / 65535.0f;
<a id="L1491" name="L1491"></a>1491                 <em class="brace">}</em>
<a id="L1492" name="L1492"></a>1492             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1493" name="L1493"></a>1493                 <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 8;
<a id="L1494" name="L1494"></a>1494                 factor = 1.0f / 255.0f;
<a id="L1495" name="L1495"></a>1495             <em class="brace">}</em>
<a id="L1496" name="L1496"></a>1496             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1497" name="L1497"></a>1497                 alp = (rgb&gt;&gt;24)&amp;0xff;
<a id="L1498" name="L1498"></a>1498                 <strong class="reserved">if</strong> (nBits[3] == 8) <em class="brace">{</em>
<a id="L1499" name="L1499"></a>1499                     intpixel[3] = alp;
<a id="L1500" name="L1500"></a>1500                 <em class="brace">}</em>
<a id="L1501" name="L1501"></a>1501                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1502" name="L1502"></a>1502                     intpixel[3] = (<strong class="reserved">int</strong>)
<a id="L1503" name="L1503"></a>1503                         (alp * (1.0f / 255.0f) * ((1&lt;&lt;nBits[3]) - 1) + 0.5f);
<a id="L1504" name="L1504"></a>1504                 <em class="brace">}</em>
<a id="L1505" name="L1505"></a>1505                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1506" name="L1506"></a>1506                     factor *= (alp * (1.0f / 255.0f));
<a id="L1507" name="L1507"></a>1507                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = -1;  <em class="comment">// force component calculations below</em>
<a id="L1508" name="L1508"></a>1508                 <em class="brace">}</em>
<a id="L1509" name="L1509"></a>1509             <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510             <strong class="reserved">if</strong> (nBits[0] == <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L1511" name="L1511"></a>1511                 intpixel[0] = red;
<a id="L1512" name="L1512"></a>1512             <em class="brace">}</em>
<a id="L1513" name="L1513"></a>1513             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1514" name="L1514"></a>1514                 intpixel[0] = (<strong class="reserved">int</strong>) (red * factor * ((1&lt;&lt;nBits[0]) - 1) + 0.5f);
<a id="L1515" name="L1515"></a>1515             <em class="brace">}</em>
<a id="L1516" name="L1516"></a>1516             <strong class="reserved">if</strong> (nBits[1] == <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L1517" name="L1517"></a>1517                 intpixel[1] = (<strong class="reserved">int</strong>)(grn);
<a id="L1518" name="L1518"></a>1518             <em class="brace">}</em>
<a id="L1519" name="L1519"></a>1519             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1520" name="L1520"></a>1520                 intpixel[1] = (<strong class="reserved">int</strong>) (grn * factor * ((1&lt;&lt;nBits[1]) - 1) + 0.5f);
<a id="L1521" name="L1521"></a>1521             <em class="brace">}</em>
<a id="L1522" name="L1522"></a>1522             <strong class="reserved">if</strong> (nBits[2] == <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L1523" name="L1523"></a>1523                 intpixel[2] = (<strong class="reserved">int</strong>)(blu);
<a id="L1524" name="L1524"></a>1524             <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1526" name="L1526"></a>1526                 intpixel[2] = (<strong class="reserved">int</strong>) (blu * factor * ((1&lt;&lt;nBits[2]) - 1) + 0.5f);
<a id="L1527" name="L1527"></a>1527             <em class="brace">}</em>
<a id="L1528" name="L1528"></a>1528         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearGray_stdScale) <em class="brace">{</em>
<a id="L1529" name="L1529"></a>1529             red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1530" name="L1530"></a>1530             grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1531" name="L1531"></a>1531             blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1532" name="L1532"></a>1532             <strong class="reserved">float</strong> gray = ((0.2125f * red) +
<a id="L1533" name="L1533"></a>1533                           (0.7154f * grn) +
<a id="L1534" name="L1534"></a>1534                           (0.0721f * blu)) / 65535.0f;
<a id="L1535" name="L1535"></a>1535             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1536" name="L1536"></a>1536                 alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1537" name="L1537"></a>1537                 <strong class="reserved">if</strong> (nBits[1] == 8) <em class="brace">{</em>
<a id="L1538" name="L1538"></a>1538                     intpixel[1] = alp;
<a id="L1539" name="L1539"></a>1539                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1540" name="L1540"></a>1540                     intpixel[1] = (<strong class="reserved">int</strong>) (alp * (1.0f / 255.0f) *
<a id="L1541" name="L1541"></a>1541                                          ((1 &lt;&lt; nBits[1]) - 1) + 0.5f);
<a id="L1542" name="L1542"></a>1542                 <em class="brace">}</em>
<a id="L1543" name="L1543"></a>1543                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1544" name="L1544"></a>1544                     gray *= (alp * (1.0f / 255.0f));
<a id="L1545" name="L1545"></a>1545                 <em class="brace">}</em>
<a id="L1546" name="L1546"></a>1546             <em class="brace">}</em>
<a id="L1547" name="L1547"></a>1547             intpixel[0] = (<strong class="reserved">int</strong>) (gray * ((1 &lt;&lt; nBits[0]) - 1) + 0.5f);
<a id="L1548" name="L1548"></a>1548         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_ICCGray_stdScale) <em class="brace">{</em>
<a id="L1549" name="L1549"></a>1549             red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L1550" name="L1550"></a>1550             grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L1551" name="L1551"></a>1551             blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L1552" name="L1552"></a>1552             <strong class="reserved">int</strong> gray16 = (<strong class="reserved">int</strong>) ((0.2125f * red) +
<a id="L1553" name="L1553"></a>1553                                 (0.7154f * grn) +
<a id="L1554" name="L1554"></a>1554                                 (0.0721f * blu) + 0.5f);
<a id="L1555" name="L1555"></a>1555             <strong class="reserved">float</strong> gray = (fromLinearGray16ToOtherGray16LUT[gray16] &amp;
<a id="L1556" name="L1556"></a>1556                           0xffff) / 65535.0f;
<a id="L1557" name="L1557"></a>1557             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1558" name="L1558"></a>1558                 alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1559" name="L1559"></a>1559                 <strong class="reserved">if</strong> (nBits[1] == 8) <em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560                     intpixel[1] = alp;
<a id="L1561" name="L1561"></a>1561                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1562" name="L1562"></a>1562                     intpixel[1] = (<strong class="reserved">int</strong>) (alp * (1.0f / 255.0f) *
<a id="L1563" name="L1563"></a>1563                                          ((1 &lt;&lt; nBits[1]) - 1) + 0.5f);
<a id="L1564" name="L1564"></a>1564                 <em class="brace">}</em>
<a id="L1565" name="L1565"></a>1565                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1566" name="L1566"></a>1566                     gray *= (alp * (1.0f / 255.0f));
<a id="L1567" name="L1567"></a>1567                 <em class="brace">}</em>
<a id="L1568" name="L1568"></a>1568             <em class="brace">}</em>
<a id="L1569" name="L1569"></a>1569             intpixel[0] = (<strong class="reserved">int</strong>) (gray * ((1 &lt;&lt; nBits[0]) - 1) + 0.5f);
<a id="L1570" name="L1570"></a>1570         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1571" name="L1571"></a>1571             <em class="comment">// Need to convert the color</em>
<a id="L1572" name="L1572"></a>1572             <strong class="reserved">float</strong>[] norm = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[3];
<a id="L1573" name="L1573"></a>1573             <strong class="reserved">float</strong> factor = 1.0f / 255.0f;
<a id="L1574" name="L1574"></a>1574             norm[0] = red * factor;
<a id="L1575" name="L1575"></a>1575             norm[1] = grn * factor;
<a id="L1576" name="L1576"></a>1576             norm[2] = blu * factor;
<a id="L1577" name="L1577"></a>1577             norm = colorSpace.<a href="../D/16601.html" title="Multiple defined in 3 places.">fromRGB</a>(norm);
<a id="L1578" name="L1578"></a>1578             <strong class="reserved">if</strong> (nonStdScale) <em class="brace">{</em>
<a id="L1579" name="L1579"></a>1579                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1580" name="L1580"></a>1580                     norm[i] = (norm[i] - compOffset[i]) *
<a id="L1581" name="L1581"></a>1581                               compScale[i];
<a id="L1582" name="L1582"></a>1582                     <em class="comment">// REMIND: need to analyze whether this</em>
<a id="L1583" name="L1583"></a>1583                     <em class="comment">// clamping is necessary</em>
<a id="L1584" name="L1584"></a>1584                     <strong class="reserved">if</strong> (norm[i] &lt; 0.0f) <em class="brace">{</em>
<a id="L1585" name="L1585"></a>1585                         norm[i] = 0.0f;
<a id="L1586" name="L1586"></a>1586                     <em class="brace">}</em>
<a id="L1587" name="L1587"></a>1587                     <strong class="reserved">if</strong> (norm[i] &gt; 1.0f) <em class="brace">{</em>
<a id="L1588" name="L1588"></a>1588                         norm[i] = 1.0f;
<a id="L1589" name="L1589"></a>1589                     <em class="brace">}</em>
<a id="L1590" name="L1590"></a>1590                 <em class="brace">}</em>
<a id="L1591" name="L1591"></a>1591             <em class="brace">}</em>
<a id="L1592" name="L1592"></a>1592             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1593" name="L1593"></a>1593                 alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L1594" name="L1594"></a>1594                 <strong class="reserved">if</strong> (nBits[numColorComponents] == 8) <em class="brace">{</em>
<a id="L1595" name="L1595"></a>1595                     intpixel[numColorComponents] = alp;
<a id="L1596" name="L1596"></a>1596                 <em class="brace">}</em>
<a id="L1597" name="L1597"></a>1597                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1598" name="L1598"></a>1598                     intpixel[numColorComponents] =
<a id="L1599" name="L1599"></a>1599                         (<strong class="reserved">int</strong>) (alp * factor *
<a id="L1600" name="L1600"></a>1600                                ((1&lt;&lt;nBits[numColorComponents]) - 1) + 0.5f);
<a id="L1601" name="L1601"></a>1601                 <em class="brace">}</em>
<a id="L1602" name="L1602"></a>1602                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1603" name="L1603"></a>1603                     factor *= alp;
<a id="L1604" name="L1604"></a>1604                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1605" name="L1605"></a>1605                         norm[i] *= factor;
<a id="L1606" name="L1606"></a>1606                     <em class="brace">}</em>
<a id="L1607" name="L1607"></a>1607                 <em class="brace">}</em>
<a id="L1608" name="L1608"></a>1608             <em class="brace">}</em>
<a id="L1609" name="L1609"></a>1609             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numColorComponents; i++) <em class="brace">{</em>
<a id="L1610" name="L1610"></a>1610                 intpixel[i] = (<strong class="reserved">int</strong>) (norm[i] * ((1&lt;&lt;nBits[i]) - 1) + 0.5f);
<a id="L1611" name="L1611"></a>1611             <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612         <em class="brace">}</em>
<a id="L1613" name="L1613"></a>1613 
<a id="L1614" name="L1614"></a>1614         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L1615" name="L1615"></a>1615             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L1616" name="L1616"></a>1616                <strong class="reserved">byte</strong> bdata[];
<a id="L1617" name="L1617"></a>1617                <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1618" name="L1618"></a>1618                    bdata = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[numComponents];
<a id="L1619" name="L1619"></a>1619                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620                    bdata = (<strong class="reserved">byte</strong>[])pixel;
<a id="L1621" name="L1621"></a>1621                <em class="brace">}</em>
<a id="L1622" name="L1622"></a>1622                <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1623" name="L1623"></a>1623                    bdata[i] = (<strong class="reserved">byte</strong>)(0xff&amp;intpixel[i]);
<a id="L1624" name="L1624"></a>1624                <em class="brace">}</em>
<a id="L1625" name="L1625"></a>1625                <strong class="reserved">return</strong> bdata;
<a id="L1626" name="L1626"></a>1626             <em class="brace">}</em>
<a id="L1627" name="L1627"></a>1627             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:<em class="brace">{</em>
<a id="L1628" name="L1628"></a>1628                <strong class="reserved">short</strong> sdata[];
<a id="L1629" name="L1629"></a>1629                <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1630" name="L1630"></a>1630                    sdata = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L1631" name="L1631"></a>1631                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1632" name="L1632"></a>1632                    sdata = (<strong class="reserved">short</strong>[])pixel;
<a id="L1633" name="L1633"></a>1633                <em class="brace">}</em>
<a id="L1634" name="L1634"></a>1634                <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635                    sdata[i] = (<strong class="reserved">short</strong>)(intpixel[i]&amp;0xffff);
<a id="L1636" name="L1636"></a>1636                <em class="brace">}</em>
<a id="L1637" name="L1637"></a>1637                <strong class="reserved">return</strong> sdata;
<a id="L1638" name="L1638"></a>1638             <em class="brace">}</em>
<a id="L1639" name="L1639"></a>1639             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L1640" name="L1640"></a>1640                 <strong class="reserved">if</strong> (maxBits &gt; 23) <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641                     <em class="comment">// fix 4412670 - for components of 24 or more bits</em>
<a id="L1642" name="L1642"></a>1642                     <em class="comment">// some calculations done above with float precision</em>
<a id="L1643" name="L1643"></a>1643                     <em class="comment">// may lose enough precision that the integer result</em>
<a id="L1644" name="L1644"></a>1644                     <em class="comment">// overflows nBits, so we need to clamp.</em>
<a id="L1645" name="L1645"></a>1645                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1646" name="L1646"></a>1646                         <strong class="reserved">if</strong> (intpixel[i] &gt; ((1&lt;&lt;nBits[i]) - 1)) <em class="brace">{</em>
<a id="L1647" name="L1647"></a>1647                             intpixel[i] = (1&lt;&lt;nBits[i]) - 1;
<a id="L1648" name="L1648"></a>1648                         <em class="brace">}</em>
<a id="L1649" name="L1649"></a>1649                     <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650                 <em class="brace">}</em>
<a id="L1651" name="L1651"></a>1651                 <strong class="reserved">return</strong> intpixel;
<a id="L1652" name="L1652"></a>1652         <em class="brace">}</em>
<a id="L1653" name="L1653"></a>1653         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("This method has not been "+
<a id="L1654" name="L1654"></a>1654                  "implemented for transferType " + transferType);
<a id="L1655" name="L1655"></a>1655     <em class="brace">}</em>
<a id="L1656" name="L1656"></a>1656 
<div class="comment">
 Returns an array of unnormalized color/alpha components given a pixel
      in this <code>ColorModel</code>.
      An IllegalArgumentException is thrown if the component value for this
      <code>ColorModel</code> is not conveniently representable in the
      unnormalized form.  Color/alpha components are stored
      in the <code>components</code> array starting at <code>offset</code>
      (even if the array is allocated by this method).
      @param pixel The pixel value specified as an integer.
      @param components An integer array in which to store the unnormalized
      color/alpha components. If the <code>components</code> array is null,
      a new array is allocated.
      @param offset An offset into the <code>components</code> array.
      @return The components array.
      @throws IllegalArgumentException If there is more than one
      component in this <code>ColorModel</code>.
      @throws IllegalArgumentException If this
      <code>ColorModel</code> does not support the unnormalized form
      @throws ArrayIndexOutOfBoundsException If the <code>components</code>
      array is not null and is not large enough to hold all the color and
      alpha components (starting at offset).</div>
<a id="L1681" name="L1681"></a>1681     <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/15734.html" title="Multiple referred from 80 places.">getComponents</a>(<strong class="reserved">int</strong> pixel, <strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1682" name="L1682"></a>1682         <strong class="reserved">if</strong> (numComponents &gt; 1) <em class="brace">{</em>
<a id="L1683" name="L1683"></a>1683             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1684" name="L1684"></a>1684                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("More than one component per pixel");
<a id="L1685" name="L1685"></a>1685         <em class="brace">}</em>
<a id="L1686" name="L1686"></a>1686         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1687" name="L1687"></a>1687             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1688" name="L1688"></a>1688         <em class="brace">}</em>
<a id="L1689" name="L1689"></a>1689         <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1690" name="L1690"></a>1690             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1691" name="L1691"></a>1691                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1692" name="L1692"></a>1692                     "This ColorModel does not support the unnormalized form");
<a id="L1693" name="L1693"></a>1693         <em class="brace">}</em>
<a id="L1694" name="L1694"></a>1694         <strong class="reserved">if</strong> (components == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1695" name="L1695"></a>1695             components = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+1];
<a id="L1696" name="L1696"></a>1696         <em class="brace">}</em>
<a id="L1697" name="L1697"></a>1697 
<a id="L1698" name="L1698"></a>1698         components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+0] = (pixel &amp; ((1&lt;&lt;nBits[0]) - 1));
<a id="L1699" name="L1699"></a>1699         <strong class="reserved">return</strong> components;
<a id="L1700" name="L1700"></a>1700     <em class="brace">}</em>
<a id="L1701" name="L1701"></a>1701 
<div class="comment">
      Returns an array of unnormalized color/alpha components given a pixel
      in this <code>ColorModel</code>.  The pixel value is specified by an
      array of data elements of type <code>transferType</code> passed in as
      an object reference.
      An IllegalArgumentException is thrown if the component values for this
      <code>ColorModel</code> are not conveniently representable in the
      unnormalized form.
      Color/alpha components are stored in the <code>components</code> array
      starting at  <code>offset</code> (even if the array is allocated by
      this method).  Since <code>ComponentColorModel</code> can be
      subclassed, subclasses inherit the
      implementation of this method and if they don't override it then
      this method might throw an exception if they use an unsupported
      <code>transferType</code>.
      @param pixel A pixel value specified by an array of data elements of
      type <code>transferType</code>.
      @param components An integer array in which to store the unnormalized
      color/alpha components. If the <code>components</code> array is null,
      a new array is allocated.
      @param offset An offset into the <code>components</code> array.
      @return The <code>components</code> array.
      @throws IllegalArgumentException If this
      <code>ComponentColorModel</code> does not support the unnormalized form
      @throws UnsupportedOperationException in some cases iff the
      transfer type of this <code>ComponentColorModel</code>
      is not one of the following transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      or <code>DataBuffer.TYPE_INT</code>.
      @throws ClassCastException If <code>pixel</code> is not a primitive
      array of type <code>transferType</code>.
      @throws IllegalArgumentException If the <code>components</code> array is
      not null and is not large enough to hold all the color and alpha
      components (starting at offset), or if <code>pixel</code> is not large
      enough to hold a pixel value for this ColorModel.</div>
<a id="L1741" name="L1741"></a>1741     <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/15734.html" title="Multiple referred from 80 places.">getComponents</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel, <strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1742" name="L1742"></a>1742         <strong class="reserved">int</strong> intpixel[];
<a id="L1743" name="L1743"></a>1743         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1744" name="L1744"></a>1744             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1745" name="L1745"></a>1745         <em class="brace">}</em>
<a id="L1746" name="L1746"></a>1746         <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1747" name="L1747"></a>1747             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1748" name="L1748"></a>1748                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1749" name="L1749"></a>1749                     "This ColorModel does not support the unnormalized form");
<a id="L1750" name="L1750"></a>1750         <em class="brace">}</em>
<a id="L1751" name="L1751"></a>1751         <strong class="reserved">if</strong> (pixel <strong class="reserved">instanceof</strong> <strong class="reserved">int</strong>[]) <em class="brace">{</em>
<a id="L1752" name="L1752"></a>1752             intpixel = (<strong class="reserved">int</strong>[])pixel;
<a id="L1753" name="L1753"></a>1753         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1754" name="L1754"></a>1754             intpixel = <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.<a href="../D/35415.html" title="Multiple defined in 3 places.">toIntArray</a>(pixel);
<a id="L1755" name="L1755"></a>1755             <strong class="reserved">if</strong> (intpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L1757" name="L1757"></a>1757                    "implemented for transferType " + transferType);
<a id="L1758" name="L1758"></a>1758             <em class="brace">}</em>
<a id="L1759" name="L1759"></a>1759         <em class="brace">}</em>
<a id="L1760" name="L1760"></a>1760         <strong class="reserved">if</strong> (intpixel.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt; numComponents) <em class="brace">{</em>
<a id="L1761" name="L1761"></a>1761             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>
<a id="L1762" name="L1762"></a>1762                 ("Length of pixel array &lt; number of components in model");
<a id="L1763" name="L1763"></a>1763         <em class="brace">}</em>
<a id="L1764" name="L1764"></a>1764         <strong class="reserved">if</strong> (components == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1765" name="L1765"></a>1765             components = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+numComponents];
<a id="L1766" name="L1766"></a>1766         <em class="brace">}</em>
<a id="L1767" name="L1767"></a>1767         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((components.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) &lt; numComponents) <em class="brace">{</em>
<a id="L1768" name="L1768"></a>1768             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>
<a id="L1769" name="L1769"></a>1769                 ("Length of components array &lt; number of components in model");
<a id="L1770" name="L1770"></a>1770         <em class="brace">}</em>
<a id="L1771" name="L1771"></a>1771         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(intpixel, 0, components, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, numComponents);
<a id="L1772" name="L1772"></a>1772 
<a id="L1773" name="L1773"></a>1773         <strong class="reserved">return</strong> components;
<a id="L1774" name="L1774"></a>1774     <em class="brace">}</em>
<a id="L1775" name="L1775"></a>1775 
<div class="comment">
      Returns an array of all of the color/alpha components in unnormalized
      form, given a normalized component array.  Unnormalized components
      are unsigned integral values between 0 and 2<sup>n</sup> - 1, where
      n is the number of bits for a particular component.  Normalized
      components are float values between a per component minimum and
      maximum specified by the <code>ColorSpace</code> object for this
      <code>ColorModel</code>.  An <code>IllegalArgumentException</code>
      will be thrown if color component values for this
      <code>ColorModel</code> are not conveniently representable in the
      unnormalized form.  If the
      <code>components</code> array is <code>null</code>, a new array
      will be allocated.  The <code>components</code> array will
      be returned.  Color/alpha components are stored in the
      <code>components</code> array starting at <code>offset</code> (even
      if the array is allocated by this method). An
      <code>ArrayIndexOutOfBoundsException</code> is thrown if the
      <code>components</code> array is not <code>null</code> and is not
      large enough to hold all the color and alpha
      components (starting at <code>offset</code>).  An
      <code>IllegalArgumentException</code> is thrown if the
      <code>normComponents</code> array is not large enough to hold
      all the color and alpha components starting at
      <code>normOffset</code>.
      @param normComponents an array containing normalized components
      @param normOffset the offset into the <code>normComponents</code>
      array at which to start retrieving normalized components
      @param components an array that receives the components from
      <code>normComponents</code>
      @param offset the index into <code>components</code> at which to
      begin storing normalized components from
      <code>normComponents</code>
      @return an array containing unnormalized color and alpha
      components.
      @throws IllegalArgumentException If this
      <code>ComponentColorModel</code> does not support the unnormalized form
      @throws IllegalArgumentException if the length of
               <code>normComponents</code> minus <code>normOffset</code>
               is less than <code>numComponents</code></div>
<a id="L1816" name="L1816"></a>1816     <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/19688.html" title="Multiple referred from 3 places.">getUnnormalizedComponents</a>(<strong class="reserved">float</strong>[] normComponents,
<a id="L1817" name="L1817"></a>1817                                            <strong class="reserved">int</strong> normOffset,
<a id="L1818" name="L1818"></a>1818                                            <strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1819" name="L1819"></a>1819         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1820" name="L1820"></a>1820             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1821" name="L1821"></a>1821         <em class="brace">}</em>
<a id="L1822" name="L1822"></a>1822         <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1823" name="L1823"></a>1823             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1824" name="L1824"></a>1824                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1825" name="L1825"></a>1825                     "This ColorModel does not support the unnormalized form");
<a id="L1826" name="L1826"></a>1826         <em class="brace">}</em>
<a id="L1827" name="L1827"></a>1827         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/23428.html" title="Multiple defined in 2 places.">getUnnormalizedComponents</a>(normComponents, normOffset,
<a id="L1828" name="L1828"></a>1828                                                components, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L1829" name="L1829"></a>1829     <em class="brace">}</em>
<a id="L1830" name="L1830"></a>1830 
<div class="comment">
      Returns an array of all of the color/alpha components in normalized
      form, given an unnormalized component array.  Unnormalized components
      are unsigned integral values between 0 and 2<sup>n</sup> - 1, where
      n is the number of bits for a particular component.  Normalized
      components are float values between a per component minimum and
      maximum specified by the <code>ColorSpace</code> object for this
      <code>ColorModel</code>.  An <code>IllegalArgumentException</code>
      will be thrown if color component values for this
      <code>ColorModel</code> are not conveniently representable in the
      unnormalized form.  If the
      <code>normComponents</code> array is <code>null</code>, a new array
      will be allocated.  The <code>normComponents</code> array
      will be returned.  Color/alpha components are stored in the
      <code>normComponents</code> array starting at
      <code>normOffset</code> (even if the array is allocated by this
      method).  An <code>ArrayIndexOutOfBoundsException</code> is thrown
      if the <code>normComponents</code> array is not <code>null</code>
      and is not large enough to hold all the color and alpha components
      (starting at <code>normOffset</code>).  An
      <code>IllegalArgumentException</code> is thrown if the
      <code>components</code> array is not large enough to hold all the
      color and alpha components starting at <code>offset</code>.
      @param components an array containing unnormalized components
      @param offset the offset into the <code>components</code> array at
      which to start retrieving unnormalized components
      @param normComponents an array that receives the normalized components
      @param normOffset the index into <code>normComponents</code> at
      which to begin storing normalized components
      @return an array containing normalized color and alpha
      components.
      @throws IllegalArgumentException If this
      <code>ComponentColorModel</code> does not support the unnormalized form</div>
<a id="L1865" name="L1865"></a>1865     <strong class="reserved">public</strong> <strong class="reserved">float</strong>[] <a href="../R/18006.html" title="Multiple referred from 16 places.">getNormalizedComponents</a>(<strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>,
<a id="L1866" name="L1866"></a>1866                                            <strong class="reserved">float</strong>[] normComponents,
<a id="L1867" name="L1867"></a>1867                                            <strong class="reserved">int</strong> normOffset) <em class="brace">{</em>
<a id="L1868" name="L1868"></a>1868         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1869" name="L1869"></a>1869             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1870" name="L1870"></a>1870         <em class="brace">}</em>
<a id="L1871" name="L1871"></a>1871         <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1872" name="L1872"></a>1872             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1873" name="L1873"></a>1873                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1874" name="L1874"></a>1874                     "This ColorModel does not support the unnormalized form");
<a id="L1875" name="L1875"></a>1875         <em class="brace">}</em>
<a id="L1876" name="L1876"></a>1876         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(components, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>,
<a id="L1877" name="L1877"></a>1877                                              normComponents, normOffset);
<a id="L1878" name="L1878"></a>1878     <em class="brace">}</em>
<a id="L1879" name="L1879"></a>1879 
<div class="comment">
      Returns a pixel value represented as an int in this <code>ColorModel</code>,
      given an array of unnormalized color/alpha components.
      @param components An array of unnormalized color/alpha components.
      @param offset An offset into the <code>components</code> array.
      @return A pixel value represented as an int.
      @throws IllegalArgumentException If there is more than one component
      in this <code>ColorModel</code>.
      @throws IllegalArgumentException If this
      <code>ComponentColorModel</code> does not support the unnormalized form</div>
<a id="L1894" name="L1894"></a>1894     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15948.html" title="Multiple referred from 2 places.">getDataElement</a>(<strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1895" name="L1895"></a>1895         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1896" name="L1896"></a>1896             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1897" name="L1897"></a>1897         <em class="brace">}</em>
<a id="L1898" name="L1898"></a>1898         <strong class="reserved">if</strong> (numComponents == 1) <em class="brace">{</em>
<a id="L1899" name="L1899"></a>1899             <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1900" name="L1900"></a>1900                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1901" name="L1901"></a>1901                     <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1902" name="L1902"></a>1902                     "This ColorModel does not support the unnormalized form");
<a id="L1903" name="L1903"></a>1903             <em class="brace">}</em>
<a id="L1904" name="L1904"></a>1904             <strong class="reserved">return</strong> components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+0];
<a id="L1905" name="L1905"></a>1905         <em class="brace">}</em>
<a id="L1906" name="L1906"></a>1906         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("This model returns "+
<a id="L1907" name="L1907"></a>1907                                            numComponents+
<a id="L1908" name="L1908"></a>1908                                            " elements in the pixel array.");
<a id="L1909" name="L1909"></a>1909     <em class="brace">}</em>
<a id="L1910" name="L1910"></a>1910 
<div class="comment">
      Returns a data element array representation of a pixel in this
      <code>ColorModel</code>, given an array of unnormalized color/alpha
      components. This array can then be passed to the <code>setDataElements</code>
      method of a <code>WritableRaster</code> object.
      @param components An array of unnormalized color/alpha components.
      @param offset The integer offset into the <code>components</code> array.
      @param obj The object in which to store the data element array
      representation of the pixel. If <code>obj</code> variable is null,
      a new array is allocated.  If <code>obj</code> is not null, it must
      be a primitive array of type <code>transferType</code>. An
      <code>ArrayIndexOutOfBoundsException</code> is thrown if
      <code>obj</code> is not large enough to hold a pixel value
      for this <code>ColorModel</code>.  Since
      <code>ComponentColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't
      override it then they throw an exception if they use an
      unsupported <code>transferType</code>.
      @return The data element array representation of a pixel
      in this <code>ColorModel</code>.
      @throws IllegalArgumentException If the components array
      is not large enough to hold all the color and alpha components
      (starting at offset).
      @throws ClassCastException If <code>obj</code> is not null and is not a
      primitive  array of type <code>transferType</code>.
      @throws ArrayIndexOutOfBoundsException If <code>obj</code> is not large
      enough to hold a pixel value for this <code>ColorModel</code>.
      @throws IllegalArgumentException If this
      <code>ComponentColorModel</code> does not support the unnormalized form
      @throws UnsupportedOperationException If the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the following transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      or <code>DataBuffer.TYPE_INT</code>.
      @see WritableRaster#setDataElements
      @see SampleModel#setDataElements</div>
<a id="L1952" name="L1952"></a>1952     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/15949.html" title="Multiple referred from 46 places.">getDataElements</a>(<strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L1953" name="L1953"></a>1953         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L1954" name="L1954"></a>1954             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L1955" name="L1955"></a>1955         <em class="brace">}</em>
<a id="L1956" name="L1956"></a>1956         <strong class="reserved">if</strong> (noUnnorm) <em class="brace">{</em>
<a id="L1957" name="L1957"></a>1957             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L1958" name="L1958"></a>1958                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1959" name="L1959"></a>1959                     "This ColorModel does not support the unnormalized form");
<a id="L1960" name="L1960"></a>1960         <em class="brace">}</em>
<a id="L1961" name="L1961"></a>1961         <strong class="reserved">if</strong> ((components.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) &lt; numComponents) <em class="brace">{</em>
<a id="L1962" name="L1962"></a>1962             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Component array too small"+
<a id="L1963" name="L1963"></a>1963                                                " (should be "+numComponents);
<a id="L1964" name="L1964"></a>1964         <em class="brace">}</em>
<a id="L1965" name="L1965"></a>1965         <strong class="reserved">switch</strong>(transferType) <em class="brace">{</em>
<a id="L1966" name="L1966"></a>1966         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L1967" name="L1967"></a>1967             <em class="brace">{</em>
<a id="L1968" name="L1968"></a>1968                 <strong class="reserved">int</strong>[] pixel;
<a id="L1969" name="L1969"></a>1969                 <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1970" name="L1970"></a>1970                     pixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L1971" name="L1971"></a>1971                 <em class="brace">}</em>
<a id="L1972" name="L1972"></a>1972                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1973" name="L1973"></a>1973                     pixel = (<strong class="reserved">int</strong>[]) obj;
<a id="L1974" name="L1974"></a>1974                 <em class="brace">}</em>
<a id="L1975" name="L1975"></a>1975                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(components, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, pixel, 0,
<a id="L1976" name="L1976"></a>1976                                  numComponents);
<a id="L1977" name="L1977"></a>1977                 <strong class="reserved">return</strong> pixel;
<a id="L1978" name="L1978"></a>1978             <em class="brace">}</em>
<a id="L1979" name="L1979"></a>1979 
<a id="L1980" name="L1980"></a>1980         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L1981" name="L1981"></a>1981             <em class="brace">{</em>
<a id="L1982" name="L1982"></a>1982                 <strong class="reserved">byte</strong>[] pixel;
<a id="L1983" name="L1983"></a>1983                 <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                     pixel = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[numComponents];
<a id="L1985" name="L1985"></a>1985                 <em class="brace">}</em>
<a id="L1986" name="L1986"></a>1986                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1987" name="L1987"></a>1987                     pixel = (<strong class="reserved">byte</strong>[]) obj;
<a id="L1988" name="L1988"></a>1988                 <em class="brace">}</em>
<a id="L1989" name="L1989"></a>1989                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1990" name="L1990"></a>1990                     pixel[i] = (<strong class="reserved">byte</strong>) (components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+i]&amp;0xff);
<a id="L1991" name="L1991"></a>1991                 <em class="brace">}</em>
<a id="L1992" name="L1992"></a>1992                 <strong class="reserved">return</strong> pixel;
<a id="L1993" name="L1993"></a>1993             <em class="brace">}</em>
<a id="L1994" name="L1994"></a>1994 
<a id="L1995" name="L1995"></a>1995         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L1996" name="L1996"></a>1996             <em class="brace">{</em>
<a id="L1997" name="L1997"></a>1997                 <strong class="reserved">short</strong>[] pixel;
<a id="L1998" name="L1998"></a>1998                 <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999                     pixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L2000" name="L2000"></a>2000                 <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2002" name="L2002"></a>2002                     pixel = (<strong class="reserved">short</strong>[]) obj;
<a id="L2003" name="L2003"></a>2003                 <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L2005" name="L2005"></a>2005                     pixel[i] = (<strong class="reserved">short</strong>) (components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+i]&amp;0xffff);
<a id="L2006" name="L2006"></a>2006                 <em class="brace">}</em>
<a id="L2007" name="L2007"></a>2007                 <strong class="reserved">return</strong> pixel;
<a id="L2008" name="L2008"></a>2008             <em class="brace">}</em>
<a id="L2009" name="L2009"></a>2009 
<a id="L2010" name="L2010"></a>2010         <strong class="reserved">default</strong>:
<a id="L2011" name="L2011"></a>2011             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L2012" name="L2012"></a>2012                                         "implemented for transferType " +
<a id="L2013" name="L2013"></a>2013                                         transferType);
<a id="L2014" name="L2014"></a>2014         <em class="brace">}</em>
<a id="L2015" name="L2015"></a>2015     <em class="brace">}</em>
<a id="L2016" name="L2016"></a>2016 
<div class="comment">
      Returns a pixel value represented as an <code>int</code> in this
      <code>ColorModel</code>, given an array of normalized color/alpha
      components.  This method will throw an
      <code>IllegalArgumentException</code> if pixel values for this
      <code>ColorModel</code> are not conveniently representable as a
      single <code>int</code>.  An
      <code>ArrayIndexOutOfBoundsException</code> is thrown if  the
      <code>normComponents</code> array is not large enough to hold all the
      color and alpha components (starting at <code>normOffset</code>).
      @param normComponents an array of normalized color and alpha
      components
      @param normOffset the index into <code>normComponents</code> at which to
      begin retrieving the color and alpha components
      @return an <code>int</code> pixel value in this
      <code>ColorModel</code> corresponding to the specified components.
      @throws IllegalArgumentException if
       pixel values for this <code>ColorModel</code> are not
       conveniently representable as a single <code>int</code>
      @throws ArrayIndexOutOfBoundsException if
       the <code>normComponents</code> array is not large enough to
       hold all of the color and alpha components starting at
       <code>normOffset</code>
      @since 1.4</div>
<a id="L2042" name="L2042"></a>2042     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15948.html" title="Multiple referred from 2 places.">getDataElement</a>(<strong class="reserved">float</strong>[] normComponents, <strong class="reserved">int</strong> normOffset) <em class="brace">{</em>
<a id="L2043" name="L2043"></a>2043         <strong class="reserved">if</strong> (numComponents &gt; 1) <em class="brace">{</em>
<a id="L2044" name="L2044"></a>2044             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L2045" name="L2045"></a>2045                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("More than one component per pixel");
<a id="L2046" name="L2046"></a>2046         <em class="brace">}</em>
<a id="L2047" name="L2047"></a>2047         <strong class="reserved">if</strong> (signed) <em class="brace">{</em>
<a id="L2048" name="L2048"></a>2048             <strong class="reserved">throw</strong> <strong class="reserved">new</strong>
<a id="L2049" name="L2049"></a>2049                 <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Component value is signed");
<a id="L2050" name="L2050"></a>2050         <em class="brace">}</em>
<a id="L2051" name="L2051"></a>2051         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L2052" name="L2052"></a>2052             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L2053" name="L2053"></a>2053         <em class="brace">}</em>
<a id="L2054" name="L2054"></a>2054         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel = <a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(normComponents, normOffset, <strong class="reserved">null</strong>);
<a id="L2055" name="L2055"></a>2055         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2056" name="L2056"></a>2056         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L2057" name="L2057"></a>2057             <em class="brace">{</em>
<a id="L2058" name="L2058"></a>2058                 <strong class="reserved">byte</strong> bpixel[] = (<strong class="reserved">byte</strong>[]) pixel;
<a id="L2059" name="L2059"></a>2059                 <strong class="reserved">return</strong> bpixel[0] &amp; 0xff;
<a id="L2060" name="L2060"></a>2060             <em class="brace">}</em>
<a id="L2061" name="L2061"></a>2061         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L2062" name="L2062"></a>2062             <em class="brace">{</em>
<a id="L2063" name="L2063"></a>2063                 <strong class="reserved">short</strong>[] uspixel = (<strong class="reserved">short</strong>[]) pixel;
<a id="L2064" name="L2064"></a>2064                 <strong class="reserved">return</strong> uspixel[0] &amp; 0xffff;
<a id="L2065" name="L2065"></a>2065             <em class="brace">}</em>
<a id="L2066" name="L2066"></a>2066         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L2067" name="L2067"></a>2067             <em class="brace">{</em>
<a id="L2068" name="L2068"></a>2068                 <strong class="reserved">int</strong>[] ipixel = (<strong class="reserved">int</strong>[]) pixel;
<a id="L2069" name="L2069"></a>2069                 <strong class="reserved">return</strong> ipixel[0];
<a id="L2070" name="L2070"></a>2070             <em class="brace">}</em>
<a id="L2071" name="L2071"></a>2071         <strong class="reserved">default</strong>:
<a id="L2072" name="L2072"></a>2072             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "
<a id="L2073" name="L2073"></a>2073                 + "implemented for transferType " + transferType);
<a id="L2074" name="L2074"></a>2074         <em class="brace">}</em>
<a id="L2075" name="L2075"></a>2075     <em class="brace">}</em>
<a id="L2076" name="L2076"></a>2076 
<div class="comment">
      Returns a data element array representation of a pixel in this
      <code>ColorModel</code>, given an array of normalized color/alpha
      components.  This array can then be passed to the
      <code>setDataElements</code> method of a <code>WritableRaster</code>
      object.  An <code>ArrayIndexOutOfBoundsException</code> is thrown
      if the <code>normComponents</code> array is not large enough to hold
      all the color and alpha components (starting at
      <code>normOffset</code>).  If the <code>obj</code> variable is
      <code>null</code>, a new array will be allocated.  If
      <code>obj</code> is not <code>null</code>, it must be a primitive
      array of type transferType; otherwise, a
      <code>ClassCastException</code> is thrown.  An
      <code>ArrayIndexOutOfBoundsException</code> is thrown if
      <code>obj</code> is not large enough to hold a pixel value for this
      <code>ColorModel</code>.
      @param normComponents an array of normalized color and alpha
      components
      @param normOffset the index into <code>normComponents</code> at which to
      begin retrieving color and alpha components
      @param obj a primitive data array to hold the returned pixel
      @return an <code>Object</code> which is a primitive data array
      representation of a pixel
      @throws ClassCastException if <code>obj</code>
       is not a primitive array of type <code>transferType</code>
      @throws ArrayIndexOutOfBoundsException if
       <code>obj</code> is not large enough to hold a pixel value
       for this <code>ColorModel</code> or the <code>normComponents</code>
       array is not large enough to hold all of the color and alpha
       components starting at <code>normOffset</code>
      @see WritableRaster#setDataElements
      @see SampleModel#setDataElements
      @since 1.4</div>
<a id="L2111" name="L2111"></a>2111     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/15949.html" title="Multiple referred from 46 places.">getDataElements</a>(<strong class="reserved">float</strong>[] normComponents, <strong class="reserved">int</strong> normOffset,
<a id="L2112" name="L2112"></a>2112                                   <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2113" name="L2113"></a>2113         <strong class="reserved">boolean</strong> needAlpha = supportsAlpha &amp;&amp; <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>;
<a id="L2114" name="L2114"></a>2114         <strong class="reserved">float</strong>[] stdNormComponents;
<a id="L2115" name="L2115"></a>2115         <strong class="reserved">if</strong> (needScaleInit) <em class="brace">{</em>
<a id="L2116" name="L2116"></a>2116             <a href="../S/2267.html#L480" title="Defined at 480 in src/java/awt/image/ComponentColorModel.java.">initScale</a>();
<a id="L2117" name="L2117"></a>2117         <em class="brace">}</em>
<a id="L2118" name="L2118"></a>2118         <strong class="reserved">if</strong> (nonStdScale) <em class="brace">{</em>
<a id="L2119" name="L2119"></a>2119             stdNormComponents = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L2120" name="L2120"></a>2120             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2121" name="L2121"></a>2121                  <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2122" name="L2122"></a>2122                 stdNormComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (normComponents[nc] - compOffset[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) *
<a id="L2123" name="L2123"></a>2123                                        compScale[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>];
<a id="L2124" name="L2124"></a>2124                 <em class="comment">// REMIND: need to analyze whether this</em>
<a id="L2125" name="L2125"></a>2125                 <em class="comment">// clamping is necessary</em>
<a id="L2126" name="L2126"></a>2126                 <strong class="reserved">if</strong> (stdNormComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &lt; 0.0f) <em class="brace">{</em>
<a id="L2127" name="L2127"></a>2127                     stdNormComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = 0.0f;
<a id="L2128" name="L2128"></a>2128                 <em class="brace">}</em>
<a id="L2129" name="L2129"></a>2129                 <strong class="reserved">if</strong> (stdNormComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &gt; 1.0f) <em class="brace">{</em>
<a id="L2130" name="L2130"></a>2130                     stdNormComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = 1.0f;
<a id="L2131" name="L2131"></a>2131                 <em class="brace">}</em>
<a id="L2132" name="L2132"></a>2132             <em class="brace">}</em>
<a id="L2133" name="L2133"></a>2133             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L2134" name="L2134"></a>2134                 stdNormComponents[numColorComponents] =
<a id="L2135" name="L2135"></a>2135                     normComponents[numColorComponents + normOffset];
<a id="L2136" name="L2136"></a>2136             <em class="brace">}</em>
<a id="L2137" name="L2137"></a>2137             normOffset = 0;
<a id="L2138" name="L2138"></a>2138         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2139" name="L2139"></a>2139             stdNormComponents = normComponents;
<a id="L2140" name="L2140"></a>2140         <em class="brace">}</em>
<a id="L2141" name="L2141"></a>2141         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2142" name="L2142"></a>2142         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L2143" name="L2143"></a>2143             <strong class="reserved">byte</strong>[] bpixel;
<a id="L2144" name="L2144"></a>2144             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2145" name="L2145"></a>2145                 bpixel = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[numComponents];
<a id="L2146" name="L2146"></a>2146             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2147" name="L2147"></a>2147                 bpixel = (<strong class="reserved">byte</strong>[]) obj;
<a id="L2148" name="L2148"></a>2148             <em class="brace">}</em>
<a id="L2149" name="L2149"></a>2149             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2150" name="L2150"></a>2150                 <strong class="reserved">float</strong> alpha =
<a id="L2151" name="L2151"></a>2151                     stdNormComponents[numColorComponents + normOffset];
<a id="L2152" name="L2152"></a>2152                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2153" name="L2153"></a>2153                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2154" name="L2154"></a>2154                     bpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">byte</strong>) ((stdNormComponents[nc] * alpha) *
<a id="L2155" name="L2155"></a>2155                                         ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) + 0.5f);
<a id="L2156" name="L2156"></a>2156                 <em class="brace">}</em>
<a id="L2157" name="L2157"></a>2157                 bpixel[numColorComponents] =
<a id="L2158" name="L2158"></a>2158                     (<strong class="reserved">byte</strong>) (alpha *
<a id="L2159" name="L2159"></a>2159                             ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[numColorComponents]) - 1)) +
<a id="L2160" name="L2160"></a>2160                             0.5f);
<a id="L2161" name="L2161"></a>2161             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2162" name="L2162"></a>2162                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2163" name="L2163"></a>2163                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2164" name="L2164"></a>2164                     bpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">byte</strong>) (stdNormComponents[nc] *
<a id="L2165" name="L2165"></a>2165                                         ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) + 0.5f);
<a id="L2166" name="L2166"></a>2166                 <em class="brace">}</em>
<a id="L2167" name="L2167"></a>2167             <em class="brace">}</em>
<a id="L2168" name="L2168"></a>2168             <strong class="reserved">return</strong> bpixel;
<a id="L2169" name="L2169"></a>2169         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L2170" name="L2170"></a>2170             <strong class="reserved">short</strong>[] uspixel;
<a id="L2171" name="L2171"></a>2171             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2172" name="L2172"></a>2172                 uspixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L2173" name="L2173"></a>2173             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2174" name="L2174"></a>2174                 uspixel = (<strong class="reserved">short</strong>[]) obj;
<a id="L2175" name="L2175"></a>2175             <em class="brace">}</em>
<a id="L2176" name="L2176"></a>2176             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2177" name="L2177"></a>2177                 <strong class="reserved">float</strong> alpha =
<a id="L2178" name="L2178"></a>2178                     stdNormComponents[numColorComponents + normOffset];
<a id="L2179" name="L2179"></a>2179                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2180" name="L2180"></a>2180                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2181" name="L2181"></a>2181                     uspixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>) ((stdNormComponents[nc] * alpha) *
<a id="L2182" name="L2182"></a>2182                                           ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) +
<a id="L2183" name="L2183"></a>2183                                           0.5f);
<a id="L2184" name="L2184"></a>2184                 <em class="brace">}</em>
<a id="L2185" name="L2185"></a>2185                 uspixel[numColorComponents] =
<a id="L2186" name="L2186"></a>2186                     (<strong class="reserved">short</strong>) (alpha *
<a id="L2187" name="L2187"></a>2187                              ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[numColorComponents]) - 1)) +
<a id="L2188" name="L2188"></a>2188                              0.5f);
<a id="L2189" name="L2189"></a>2189             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2190" name="L2190"></a>2190                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2191" name="L2191"></a>2191                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2192" name="L2192"></a>2192                     uspixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>) (stdNormComponents[nc] *
<a id="L2193" name="L2193"></a>2193                                           ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) +
<a id="L2194" name="L2194"></a>2194                                           0.5f);
<a id="L2195" name="L2195"></a>2195                 <em class="brace">}</em>
<a id="L2196" name="L2196"></a>2196             <em class="brace">}</em>
<a id="L2197" name="L2197"></a>2197             <strong class="reserved">return</strong> uspixel;
<a id="L2198" name="L2198"></a>2198         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L2199" name="L2199"></a>2199             <strong class="reserved">int</strong>[] ipixel;
<a id="L2200" name="L2200"></a>2200             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2201" name="L2201"></a>2201                 ipixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L2202" name="L2202"></a>2202             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2203" name="L2203"></a>2203                 ipixel = (<strong class="reserved">int</strong>[]) obj;
<a id="L2204" name="L2204"></a>2204             <em class="brace">}</em>
<a id="L2205" name="L2205"></a>2205             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2206" name="L2206"></a>2206                 <strong class="reserved">float</strong> alpha =
<a id="L2207" name="L2207"></a>2207                     stdNormComponents[numColorComponents + normOffset];
<a id="L2208" name="L2208"></a>2208                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2209" name="L2209"></a>2209                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2210" name="L2210"></a>2210                     ipixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) ((stdNormComponents[nc] * alpha) *
<a id="L2211" name="L2211"></a>2211                                        ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) + 0.5f);
<a id="L2212" name="L2212"></a>2212                 <em class="brace">}</em>
<a id="L2213" name="L2213"></a>2213                 ipixel[numColorComponents] =
<a id="L2214" name="L2214"></a>2214                     (<strong class="reserved">int</strong>) (alpha *
<a id="L2215" name="L2215"></a>2215                            ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[numColorComponents]) - 1)) +
<a id="L2216" name="L2216"></a>2216                            0.5f);
<a id="L2217" name="L2217"></a>2217             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2218" name="L2218"></a>2218                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2219" name="L2219"></a>2219                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2220" name="L2220"></a>2220                     ipixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (stdNormComponents[nc] *
<a id="L2221" name="L2221"></a>2221                                        ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1)) + 0.5f);
<a id="L2222" name="L2222"></a>2222                 <em class="brace">}</em>
<a id="L2223" name="L2223"></a>2223             <em class="brace">}</em>
<a id="L2224" name="L2224"></a>2224             <strong class="reserved">return</strong> ipixel;
<a id="L2225" name="L2225"></a>2225         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L2226" name="L2226"></a>2226             <strong class="reserved">short</strong>[] spixel;
<a id="L2227" name="L2227"></a>2227             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2228" name="L2228"></a>2228                 spixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L2229" name="L2229"></a>2229             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2230" name="L2230"></a>2230                 spixel = (<strong class="reserved">short</strong>[]) obj;
<a id="L2231" name="L2231"></a>2231             <em class="brace">}</em>
<a id="L2232" name="L2232"></a>2232             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2233" name="L2233"></a>2233                 <strong class="reserved">float</strong> alpha =
<a id="L2234" name="L2234"></a>2234                     stdNormComponents[numColorComponents + normOffset];
<a id="L2235" name="L2235"></a>2235                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2236" name="L2236"></a>2236                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2237" name="L2237"></a>2237                     spixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>)
<a id="L2238" name="L2238"></a>2238                         (stdNormComponents[nc] * alpha * 32767.0f + 0.5f);
<a id="L2239" name="L2239"></a>2239                 <em class="brace">}</em>
<a id="L2240" name="L2240"></a>2240                 spixel[numColorComponents] = (<strong class="reserved">short</strong>) (alpha * 32767.0f + 0.5f);
<a id="L2241" name="L2241"></a>2241             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2242" name="L2242"></a>2242                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2243" name="L2243"></a>2243                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2244" name="L2244"></a>2244                     spixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>)
<a id="L2245" name="L2245"></a>2245                         (stdNormComponents[nc] * 32767.0f + 0.5f);
<a id="L2246" name="L2246"></a>2246                 <em class="brace">}</em>
<a id="L2247" name="L2247"></a>2247             <em class="brace">}</em>
<a id="L2248" name="L2248"></a>2248             <strong class="reserved">return</strong> spixel;
<a id="L2249" name="L2249"></a>2249         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT:
<a id="L2250" name="L2250"></a>2250             <strong class="reserved">float</strong>[] fpixel;
<a id="L2251" name="L2251"></a>2251             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2252" name="L2252"></a>2252                 fpixel = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L2253" name="L2253"></a>2253             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2254" name="L2254"></a>2254                 fpixel = (<strong class="reserved">float</strong>[]) obj;
<a id="L2255" name="L2255"></a>2255             <em class="brace">}</em>
<a id="L2256" name="L2256"></a>2256             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2257" name="L2257"></a>2257                 <strong class="reserved">float</strong> alpha = normComponents[numColorComponents + normOffset];
<a id="L2258" name="L2258"></a>2258                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2259" name="L2259"></a>2259                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2260" name="L2260"></a>2260                     fpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = normComponents[nc] * alpha;
<a id="L2261" name="L2261"></a>2261                 <em class="brace">}</em>
<a id="L2262" name="L2262"></a>2262                 fpixel[numColorComponents] = alpha;
<a id="L2263" name="L2263"></a>2263             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2264" name="L2264"></a>2264                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2265" name="L2265"></a>2265                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2266" name="L2266"></a>2266                     fpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = normComponents[nc];
<a id="L2267" name="L2267"></a>2267                 <em class="brace">}</em>
<a id="L2268" name="L2268"></a>2268             <em class="brace">}</em>
<a id="L2269" name="L2269"></a>2269             <strong class="reserved">return</strong> fpixel;
<a id="L2270" name="L2270"></a>2270         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE:
<a id="L2271" name="L2271"></a>2271             <strong class="reserved">double</strong>[] dpixel;
<a id="L2272" name="L2272"></a>2272             <strong class="reserved">if</strong> (obj == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2273" name="L2273"></a>2273                 dpixel = <strong class="reserved">new</strong> <strong class="reserved">double</strong>[numComponents];
<a id="L2274" name="L2274"></a>2274             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2275" name="L2275"></a>2275                 dpixel = (<strong class="reserved">double</strong>[]) obj;
<a id="L2276" name="L2276"></a>2276             <em class="brace">}</em>
<a id="L2277" name="L2277"></a>2277             <strong class="reserved">if</strong> (needAlpha) <em class="brace">{</em>
<a id="L2278" name="L2278"></a>2278                 <strong class="reserved">double</strong> alpha =
<a id="L2279" name="L2279"></a>2279                     (<strong class="reserved">double</strong>) (normComponents[numColorComponents + normOffset]);
<a id="L2280" name="L2280"></a>2280                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents;
<a id="L2281" name="L2281"></a>2281                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2282" name="L2282"></a>2282                     dpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = normComponents[nc] * alpha;
<a id="L2283" name="L2283"></a>2283                 <em class="brace">}</em>
<a id="L2284" name="L2284"></a>2284                 dpixel[numColorComponents] = alpha;
<a id="L2285" name="L2285"></a>2285             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2286" name="L2286"></a>2286                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents;
<a id="L2287" name="L2287"></a>2287                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2288" name="L2288"></a>2288                     dpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">double</strong>) normComponents[nc];
<a id="L2289" name="L2289"></a>2289                 <em class="brace">}</em>
<a id="L2290" name="L2290"></a>2290             <em class="brace">}</em>
<a id="L2291" name="L2291"></a>2291             <strong class="reserved">return</strong> dpixel;
<a id="L2292" name="L2292"></a>2292         <strong class="reserved">default</strong>:
<a id="L2293" name="L2293"></a>2293             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L2294" name="L2294"></a>2294                                         "implemented for transferType " +
<a id="L2295" name="L2295"></a>2295                                         transferType);
<a id="L2296" name="L2296"></a>2296         <em class="brace">}</em>
<a id="L2297" name="L2297"></a>2297     <em class="brace">}</em>
<a id="L2298" name="L2298"></a>2298 
<div class="comment">
      Returns an array of all of the color/alpha components in normalized
      form, given a pixel in this <code>ColorModel</code>.  The pixel
      value is specified by an array of data elements of type transferType
      passed in as an object reference.  If pixel is not a primitive array
      of type transferType, a <code>ClassCastException</code> is thrown.
      An <code>ArrayIndexOutOfBoundsException</code> is thrown if
      <code>pixel</code> is not large enough to hold a pixel value for this
      <code>ColorModel</code>.
      Normalized components are float values between a per component minimum
      and maximum specified by the <code>ColorSpace</code> object for this
      <code>ColorModel</code>.  If the
      <code>normComponents</code> array is <code>null</code>, a new array
      will be allocated.  The <code>normComponents</code> array
      will be returned.  Color/alpha components are stored in the
      <code>normComponents</code> array starting at
      <code>normOffset</code> (even if the array is allocated by this
      method).  An <code>ArrayIndexOutOfBoundsException</code> is thrown
      if the <code>normComponents</code> array is not <code>null</code>
      and is not large enough to hold all the color and alpha components
      (starting at <code>normOffset</code>).
      <p>
      This method must be overridden by a subclass if that subclass
      is designed to translate pixel sample values to color component values
      in a non-default way.  The default translations implemented by this
      class is described in the class comments.  Any subclass implementing
      a non-default translation must follow the constraints on allowable
      translations defined there.
      @param pixel the specified pixel
      @param normComponents an array to receive the normalized components
      @param normOffset the offset into the <code>normComponents</code>
      array at which to start storing normalized components
      @return an array containing normalized color and alpha
      components.
      @throws ClassCastException if <code>pixel</code> is not a primitive
               array of type transferType
      @throws ArrayIndexOutOfBoundsException if
               <code>normComponents</code> is not large enough to hold all
               color and alpha components starting at <code>normOffset</code>
      @throws ArrayIndexOutOfBoundsException if
               <code>pixel</code> is not large enough to hold a pixel
               value for this <code>ColorModel</code>.
      @since 1.4</p></div>
<a id="L2343" name="L2343"></a>2343     <strong class="reserved">public</strong> <strong class="reserved">float</strong>[] <a href="../R/18006.html" title="Multiple referred from 16 places.">getNormalizedComponents</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel,
<a id="L2344" name="L2344"></a>2344                                            <strong class="reserved">float</strong>[] normComponents,
<a id="L2345" name="L2345"></a>2345                                            <strong class="reserved">int</strong> normOffset) <em class="brace">{</em>
<a id="L2346" name="L2346"></a>2346         <strong class="reserved">if</strong> (normComponents == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2347" name="L2347"></a>2347             normComponents = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents+normOffset];
<a id="L2348" name="L2348"></a>2348         <em class="brace">}</em>
<a id="L2349" name="L2349"></a>2349         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2350" name="L2350"></a>2350         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L2351" name="L2351"></a>2351             <strong class="reserved">byte</strong>[] bpixel = (<strong class="reserved">byte</strong>[]) pixel;
<a id="L2352" name="L2352"></a>2352             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2353" name="L2353"></a>2353                 normComponents[nc] = ((<strong class="reserved">float</strong>) (bpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xff)) /
<a id="L2354" name="L2354"></a>2354                                      ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1));
<a id="L2355" name="L2355"></a>2355             <em class="brace">}</em>
<a id="L2356" name="L2356"></a>2356             <strong class="reserved">break</strong>;
<a id="L2357" name="L2357"></a>2357         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L2358" name="L2358"></a>2358             <strong class="reserved">short</strong>[] uspixel = (<strong class="reserved">short</strong>[]) pixel;
<a id="L2359" name="L2359"></a>2359             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2360" name="L2360"></a>2360                 normComponents[nc] = ((<strong class="reserved">float</strong>) (uspixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xffff)) /
<a id="L2361" name="L2361"></a>2361                                      ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1));
<a id="L2362" name="L2362"></a>2362             <em class="brace">}</em>
<a id="L2363" name="L2363"></a>2363             <strong class="reserved">break</strong>;
<a id="L2364" name="L2364"></a>2364         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L2365" name="L2365"></a>2365             <strong class="reserved">int</strong>[] ipixel = (<strong class="reserved">int</strong>[]) pixel;
<a id="L2366" name="L2366"></a>2366             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2367" name="L2367"></a>2367                 normComponents[nc] = ((<strong class="reserved">float</strong>) ipixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) /
<a id="L2368" name="L2368"></a>2368                                      ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) - 1));
<a id="L2369" name="L2369"></a>2369             <em class="brace">}</em>
<a id="L2370" name="L2370"></a>2370             <strong class="reserved">break</strong>;
<a id="L2371" name="L2371"></a>2371         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT:
<a id="L2372" name="L2372"></a>2372             <strong class="reserved">short</strong>[] spixel = (<strong class="reserved">short</strong>[]) pixel;
<a id="L2373" name="L2373"></a>2373             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2374" name="L2374"></a>2374                 normComponents[nc] = ((<strong class="reserved">float</strong>) spixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>]) / 32767.0f;
<a id="L2375" name="L2375"></a>2375             <em class="brace">}</em>
<a id="L2376" name="L2376"></a>2376             <strong class="reserved">break</strong>;
<a id="L2377" name="L2377"></a>2377         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT:
<a id="L2378" name="L2378"></a>2378             <strong class="reserved">float</strong>[] fpixel = (<strong class="reserved">float</strong>[]) pixel;
<a id="L2379" name="L2379"></a>2379             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2380" name="L2380"></a>2380                 normComponents[nc] = fpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>];
<a id="L2381" name="L2381"></a>2381             <em class="brace">}</em>
<a id="L2382" name="L2382"></a>2382             <strong class="reserved">break</strong>;
<a id="L2383" name="L2383"></a>2383         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE:
<a id="L2384" name="L2384"></a>2384             <strong class="reserved">double</strong>[] dpixel = (<strong class="reserved">double</strong>[]) pixel;
<a id="L2385" name="L2385"></a>2385             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0, nc = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++, nc++) <em class="brace">{</em>
<a id="L2386" name="L2386"></a>2386                 normComponents[nc] = (<strong class="reserved">float</strong>) dpixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>];
<a id="L2387" name="L2387"></a>2387             <em class="brace">}</em>
<a id="L2388" name="L2388"></a>2388             <strong class="reserved">break</strong>;
<a id="L2389" name="L2389"></a>2389         <strong class="reserved">default</strong>:
<a id="L2390" name="L2390"></a>2390             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L2391" name="L2391"></a>2391                                         "implemented for transferType " +
<a id="L2392" name="L2392"></a>2392                                         transferType);
<a id="L2393" name="L2393"></a>2393         <em class="brace">}</em>
<a id="L2394" name="L2394"></a>2394 
<a id="L2395" name="L2395"></a>2395         <strong class="reserved">if</strong> (supportsAlpha &amp;&amp; <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L2396" name="L2396"></a>2396             <strong class="reserved">float</strong> alpha = normComponents[numColorComponents + normOffset];
<a id="L2397" name="L2397"></a>2397             <strong class="reserved">if</strong> (alpha != 0.0f) <em class="brace">{</em>
<a id="L2398" name="L2398"></a>2398                 <strong class="reserved">float</strong> invAlpha = 1.0f / alpha;
<a id="L2399" name="L2399"></a>2399                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = normOffset; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents + normOffset;
<a id="L2400" name="L2400"></a>2400                      <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2401" name="L2401"></a>2401                     normComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] *= invAlpha;
<a id="L2402" name="L2402"></a>2402                 <em class="brace">}</em>
<a id="L2403" name="L2403"></a>2403             <em class="brace">}</em>
<a id="L2404" name="L2404"></a>2404         <em class="brace">}</em>
<a id="L2405" name="L2405"></a>2405         <strong class="reserved">if</strong> (<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2406" name="L2406"></a>2406             <em class="comment">// Normally (i.e. when this class is not subclassed to override</em>
<a id="L2407" name="L2407"></a>2407             <em class="comment">// this method), the test (min != null) will be equivalent to</em>
<a id="L2408" name="L2408"></a>2408             <em class="comment">// the test (nonStdScale).  However, there is an unlikely, but</em>
<a id="L2409" name="L2409"></a>2409             <em class="comment">// possible case, in which this method is overridden, nonStdScale</em>
<a id="L2410" name="L2410"></a>2410             <em class="comment">// is set true by initScale(), the subclass method for some</em>
<a id="L2411" name="L2411"></a>2411             <em class="comment">// reason calls this superclass method, but the min and</em>
<a id="L2412" name="L2412"></a>2412             <em class="comment">// diffMinMax arrays were never initialized by setupLUTs().  In</em>
<a id="L2413" name="L2413"></a>2413             <em class="comment">// that case, the right thing to do is follow the intended</em>
<a id="L2414" name="L2414"></a>2414             <em class="comment">// semantics of this method, and rescale the color components</em>
<a id="L2415" name="L2415"></a>2415             <em class="comment">// only if the ColorSpace min/max were detected to be other</em>
<a id="L2416" name="L2416"></a>2416             <em class="comment">// than 0.0/1.0 by setupLUTs().  Note that this implies the</em>
<a id="L2417" name="L2417"></a>2417             <em class="comment">// transferType is byte, ushort, int, or short - i.e. components</em>
<a id="L2418" name="L2418"></a>2418             <em class="comment">// derived from float and double pixel data are never rescaled.</em>
<a id="L2419" name="L2419"></a>2419             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = 0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; numColorComponents; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2420" name="L2420"></a>2420                 normComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> + normOffset] = <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] +
<a id="L2421" name="L2421"></a>2421                     diffMinMax[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normComponents[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> + normOffset];
<a id="L2422" name="L2422"></a>2422             <em class="brace">}</em>
<a id="L2423" name="L2423"></a>2423         <em class="brace">}</em>
<a id="L2424" name="L2424"></a>2424         <strong class="reserved">return</strong> normComponents;
<a id="L2425" name="L2425"></a>2425     <em class="brace">}</em>
<a id="L2426" name="L2426"></a>2426 
<div class="comment">
      Forces the raster data to match the state specified in the
      <code>isAlphaPremultiplied</code> variable, assuming the data
      is currently correctly described by this <code>ColorModel</code>.
      It may multiply or divide the color raster data by alpha, or
      do nothing if the data is in the correct state.  If the data needs
      to be coerced, this method also returns an instance of
      this <code>ColorModel</code> with
      the <code>isAlphaPremultiplied</code> flag set appropriately.
      Since <code>ColorModel</code> can be subclassed, subclasses inherit
      the implementation of this method and if they don't override it
      then they throw an exception if they use an unsupported
      <code>transferType</code>.
      @throws NullPointerException if <code>raster</code> is
      <code>null</code> and data coercion is required.
      @throws UnsupportedOperationException if the transfer type of
      this <code>ComponentColorModel</code>
      is not one of the supported transfer types:
      <code>DataBuffer.TYPE_BYTE</code>, <code>DataBuffer.TYPE_USHORT</code>,
      <code>DataBuffer.TYPE_INT</code>, <code>DataBuffer.TYPE_SHORT</code>,
      <code>DataBuffer.TYPE_FLOAT</code>, or <code>DataBuffer.TYPE_DOUBLE</code>.</div>
<a id="L2450" name="L2450"></a>2450     <strong class="reserved">public</strong> <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> <a href="../R/11634.html" title="Multiple referred from 4 places.">coerceData</a> (<a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> raster,
<a id="L2451" name="L2451"></a>2451                                   <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L2452" name="L2452"></a>2452         <strong class="reserved">if</strong> ((supportsAlpha == <strong class="reserved">false</strong>) ||
<a id="L2453" name="L2453"></a>2453             (<strong class="reserved">this</strong>.<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a> == <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>))
<a id="L2454" name="L2454"></a>2454         <em class="brace">{</em>
<a id="L2455" name="L2455"></a>2455             <em class="comment">// Nothing to do</em>
<a id="L2456" name="L2456"></a>2456             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L2457" name="L2457"></a>2457         <em class="brace">}</em>
<a id="L2458" name="L2458"></a>2458 
<a id="L2459" name="L2459"></a>2459         <strong class="reserved">int</strong> w = raster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>();
<a id="L2460" name="L2460"></a>2460         <strong class="reserved">int</strong> h = raster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L2461" name="L2461"></a>2461         <strong class="reserved">int</strong> aIdx = raster.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>() - 1;
<a id="L2462" name="L2462"></a>2462         <strong class="reserved">float</strong> normAlpha;
<a id="L2463" name="L2463"></a>2463         <strong class="reserved">int</strong> rminX = raster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L2464" name="L2464"></a>2464         <strong class="reserved">int</strong> rY = raster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L2465" name="L2465"></a>2465         <strong class="reserved">int</strong> rX;
<a id="L2466" name="L2466"></a>2466         <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L2467" name="L2467"></a>2467             <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2468" name="L2468"></a>2468                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L2469" name="L2469"></a>2469                     <strong class="reserved">byte</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2470" name="L2470"></a>2470                     <strong class="reserved">byte</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2471" name="L2471"></a>2471                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2472" name="L2472"></a>2472                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2473" name="L2473"></a>2473                         rX = rminX;
<a id="L2474" name="L2474"></a>2474                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2475" name="L2475"></a>2475                             pixel = (<strong class="reserved">byte</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2476" name="L2476"></a>2476                                                                    pixel);
<a id="L2477" name="L2477"></a>2477                             normAlpha = (pixel[aIdx] &amp; 0xff) * alphaScale;
<a id="L2478" name="L2478"></a>2478                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2479" name="L2479"></a>2479                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2480" name="L2480"></a>2480                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">byte</strong>)((pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xff) *
<a id="L2481" name="L2481"></a>2481                                                       normAlpha + 0.5f);
<a id="L2482" name="L2482"></a>2482                                 <em class="brace">}</em>
<a id="L2483" name="L2483"></a>2483                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2484" name="L2484"></a>2484                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2485" name="L2485"></a>2485                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2486" name="L2486"></a>2486                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[numComponents];
<a id="L2487" name="L2487"></a>2487                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, (<strong class="reserved">byte</strong>) 0);
<a id="L2488" name="L2488"></a>2488                                 <em class="brace">}</em>
<a id="L2489" name="L2489"></a>2489                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2490" name="L2490"></a>2490                             <em class="brace">}</em>
<a id="L2491" name="L2491"></a>2491                         <em class="brace">}</em>
<a id="L2492" name="L2492"></a>2492                     <em class="brace">}</em>
<a id="L2493" name="L2493"></a>2493                 <em class="brace">}</em>
<a id="L2494" name="L2494"></a>2494                 <strong class="reserved">break</strong>;
<a id="L2495" name="L2495"></a>2495                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT: <em class="brace">{</em>
<a id="L2496" name="L2496"></a>2496                     <strong class="reserved">short</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2497" name="L2497"></a>2497                     <strong class="reserved">short</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2498" name="L2498"></a>2498                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2499" name="L2499"></a>2499                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2500" name="L2500"></a>2500                         rX = rminX;
<a id="L2501" name="L2501"></a>2501                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2502" name="L2502"></a>2502                             pixel = (<strong class="reserved">short</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2503" name="L2503"></a>2503                                                                     pixel);
<a id="L2504" name="L2504"></a>2504                             normAlpha = (pixel[aIdx] &amp; 0xffff) * alphaScale;
<a id="L2505" name="L2505"></a>2505                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2506" name="L2506"></a>2506                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2507" name="L2507"></a>2507                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>)
<a id="L2508" name="L2508"></a>2508                                         ((pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xffff) * normAlpha +
<a id="L2509" name="L2509"></a>2509                                          0.5f);
<a id="L2510" name="L2510"></a>2510                                 <em class="brace">}</em>
<a id="L2511" name="L2511"></a>2511                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2512" name="L2512"></a>2512                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2513" name="L2513"></a>2513                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2514" name="L2514"></a>2514                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L2515" name="L2515"></a>2515                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, (<strong class="reserved">short</strong>) 0);
<a id="L2516" name="L2516"></a>2516                                 <em class="brace">}</em>
<a id="L2517" name="L2517"></a>2517                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2518" name="L2518"></a>2518                             <em class="brace">}</em>
<a id="L2519" name="L2519"></a>2519                         <em class="brace">}</em>
<a id="L2520" name="L2520"></a>2520                     <em class="brace">}</em>
<a id="L2521" name="L2521"></a>2521                 <em class="brace">}</em>
<a id="L2522" name="L2522"></a>2522                 <strong class="reserved">break</strong>;
<a id="L2523" name="L2523"></a>2523                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT: <em class="brace">{</em>
<a id="L2524" name="L2524"></a>2524                     <strong class="reserved">int</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2525" name="L2525"></a>2525                     <strong class="reserved">int</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2526" name="L2526"></a>2526                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2527" name="L2527"></a>2527                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2528" name="L2528"></a>2528                         rX = rminX;
<a id="L2529" name="L2529"></a>2529                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2530" name="L2530"></a>2530                             pixel = (<strong class="reserved">int</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2531" name="L2531"></a>2531                                                                   pixel);
<a id="L2532" name="L2532"></a>2532                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L2533" name="L2533"></a>2533                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2534" name="L2534"></a>2534                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2535" name="L2535"></a>2535                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normAlpha +
<a id="L2536" name="L2536"></a>2536                                                       0.5f);
<a id="L2537" name="L2537"></a>2537                                 <em class="brace">}</em>
<a id="L2538" name="L2538"></a>2538                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2539" name="L2539"></a>2539                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2540" name="L2540"></a>2540                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2541" name="L2541"></a>2541                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L2542" name="L2542"></a>2542                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0);
<a id="L2543" name="L2543"></a>2543                                 <em class="brace">}</em>
<a id="L2544" name="L2544"></a>2544                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2545" name="L2545"></a>2545                             <em class="brace">}</em>
<a id="L2546" name="L2546"></a>2546                         <em class="brace">}</em>
<a id="L2547" name="L2547"></a>2547                     <em class="brace">}</em>
<a id="L2548" name="L2548"></a>2548                 <em class="brace">}</em>
<a id="L2549" name="L2549"></a>2549                 <strong class="reserved">break</strong>;
<a id="L2550" name="L2550"></a>2550                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT: <em class="brace">{</em>
<a id="L2551" name="L2551"></a>2551                     <strong class="reserved">short</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2552" name="L2552"></a>2552                     <strong class="reserved">short</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2553" name="L2553"></a>2553                     <strong class="reserved">float</strong> alphaScale = 1.0f / 32767.0f;
<a id="L2554" name="L2554"></a>2554                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2555" name="L2555"></a>2555                         rX = rminX;
<a id="L2556" name="L2556"></a>2556                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2557" name="L2557"></a>2557                             pixel = (<strong class="reserved">short</strong>[]) raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2558" name="L2558"></a>2558                                                                      pixel);
<a id="L2559" name="L2559"></a>2559                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L2560" name="L2560"></a>2560                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2561" name="L2561"></a>2561                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2562" name="L2562"></a>2562                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normAlpha +
<a id="L2563" name="L2563"></a>2563                                                         0.5f);
<a id="L2564" name="L2564"></a>2564                                 <em class="brace">}</em>
<a id="L2565" name="L2565"></a>2565                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2566" name="L2566"></a>2566                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2567" name="L2567"></a>2567                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2568" name="L2568"></a>2568                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[numComponents];
<a id="L2569" name="L2569"></a>2569                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, (<strong class="reserved">short</strong>) 0);
<a id="L2570" name="L2570"></a>2570                                 <em class="brace">}</em>
<a id="L2571" name="L2571"></a>2571                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2572" name="L2572"></a>2572                             <em class="brace">}</em>
<a id="L2573" name="L2573"></a>2573                         <em class="brace">}</em>
<a id="L2574" name="L2574"></a>2574                     <em class="brace">}</em>
<a id="L2575" name="L2575"></a>2575                 <em class="brace">}</em>
<a id="L2576" name="L2576"></a>2576                 <strong class="reserved">break</strong>;
<a id="L2577" name="L2577"></a>2577                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT: <em class="brace">{</em>
<a id="L2578" name="L2578"></a>2578                     <strong class="reserved">float</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2579" name="L2579"></a>2579                     <strong class="reserved">float</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2580" name="L2580"></a>2580                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2581" name="L2581"></a>2581                         rX = rminX;
<a id="L2582" name="L2582"></a>2582                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2583" name="L2583"></a>2583                             pixel = (<strong class="reserved">float</strong>[]) raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2584" name="L2584"></a>2584                                                                      pixel);
<a id="L2585" name="L2585"></a>2585                             normAlpha = pixel[aIdx];
<a id="L2586" name="L2586"></a>2586                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2587" name="L2587"></a>2587                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2588" name="L2588"></a>2588                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] *= normAlpha;
<a id="L2589" name="L2589"></a>2589                                 <em class="brace">}</em>
<a id="L2590" name="L2590"></a>2590                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2591" name="L2591"></a>2591                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2592" name="L2592"></a>2592                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2593" name="L2593"></a>2593                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[numComponents];
<a id="L2594" name="L2594"></a>2594                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0.0f);
<a id="L2595" name="L2595"></a>2595                                 <em class="brace">}</em>
<a id="L2596" name="L2596"></a>2596                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2597" name="L2597"></a>2597                             <em class="brace">}</em>
<a id="L2598" name="L2598"></a>2598                         <em class="brace">}</em>
<a id="L2599" name="L2599"></a>2599                     <em class="brace">}</em>
<a id="L2600" name="L2600"></a>2600                 <em class="brace">}</em>
<a id="L2601" name="L2601"></a>2601                 <strong class="reserved">break</strong>;
<a id="L2602" name="L2602"></a>2602                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE: <em class="brace">{</em>
<a id="L2603" name="L2603"></a>2603                     <strong class="reserved">double</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2604" name="L2604"></a>2604                     <strong class="reserved">double</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L2605" name="L2605"></a>2605                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2606" name="L2606"></a>2606                         rX = rminX;
<a id="L2607" name="L2607"></a>2607                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2608" name="L2608"></a>2608                             pixel = (<strong class="reserved">double</strong>[]) raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2609" name="L2609"></a>2609                                                                       pixel);
<a id="L2610" name="L2610"></a>2610                             <strong class="reserved">double</strong> dnormAlpha = pixel[aIdx];
<a id="L2611" name="L2611"></a>2611                             <strong class="reserved">if</strong> (dnormAlpha != 0.0) <em class="brace">{</em>
<a id="L2612" name="L2612"></a>2612                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2613" name="L2613"></a>2613                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] *= dnormAlpha;
<a id="L2614" name="L2614"></a>2614                                 <em class="brace">}</em>
<a id="L2615" name="L2615"></a>2615                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2616" name="L2616"></a>2616                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2617" name="L2617"></a>2617                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2618" name="L2618"></a>2618                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">double</strong>[numComponents];
<a id="L2619" name="L2619"></a>2619                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0.0);
<a id="L2620" name="L2620"></a>2620                                 <em class="brace">}</em>
<a id="L2621" name="L2621"></a>2621                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, zpixel);
<a id="L2622" name="L2622"></a>2622                             <em class="brace">}</em>
<a id="L2623" name="L2623"></a>2623                         <em class="brace">}</em>
<a id="L2624" name="L2624"></a>2624                     <em class="brace">}</em>
<a id="L2625" name="L2625"></a>2625                 <em class="brace">}</em>
<a id="L2626" name="L2626"></a>2626                 <strong class="reserved">break</strong>;
<a id="L2627" name="L2627"></a>2627                 <strong class="reserved">default</strong>:
<a id="L2628" name="L2628"></a>2628                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L2629" name="L2629"></a>2629                          "implemented for transferType " + transferType);
<a id="L2630" name="L2630"></a>2630             <em class="brace">}</em>
<a id="L2631" name="L2631"></a>2631         <em class="brace">}</em>
<a id="L2632" name="L2632"></a>2632         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2633" name="L2633"></a>2633             <em class="comment">// We are premultiplied and want to divide it out</em>
<a id="L2634" name="L2634"></a>2634             <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2635" name="L2635"></a>2635                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L2636" name="L2636"></a>2636                     <strong class="reserved">byte</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2637" name="L2637"></a>2637                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2638" name="L2638"></a>2638                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2639" name="L2639"></a>2639                         rX = rminX;
<a id="L2640" name="L2640"></a>2640                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2641" name="L2641"></a>2641                             pixel = (<strong class="reserved">byte</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2642" name="L2642"></a>2642                                                                    pixel);
<a id="L2643" name="L2643"></a>2643                             normAlpha = (pixel[aIdx] &amp; 0xff) * alphaScale;
<a id="L2644" name="L2644"></a>2644                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2645" name="L2645"></a>2645                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L2646" name="L2646"></a>2646                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2647" name="L2647"></a>2647                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">byte</strong>)
<a id="L2648" name="L2648"></a>2648                                         ((pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xff) * invAlpha + 0.5f);
<a id="L2649" name="L2649"></a>2649                                 <em class="brace">}</em>
<a id="L2650" name="L2650"></a>2650                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2651" name="L2651"></a>2651                             <em class="brace">}</em>
<a id="L2652" name="L2652"></a>2652                         <em class="brace">}</em>
<a id="L2653" name="L2653"></a>2653                     <em class="brace">}</em>
<a id="L2654" name="L2654"></a>2654                 <em class="brace">}</em>
<a id="L2655" name="L2655"></a>2655                 <strong class="reserved">break</strong>;
<a id="L2656" name="L2656"></a>2656                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT: <em class="brace">{</em>
<a id="L2657" name="L2657"></a>2657                     <strong class="reserved">short</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2658" name="L2658"></a>2658                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2659" name="L2659"></a>2659                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2660" name="L2660"></a>2660                         rX = rminX;
<a id="L2661" name="L2661"></a>2661                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2662" name="L2662"></a>2662                             pixel = (<strong class="reserved">short</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2663" name="L2663"></a>2663                                                                     pixel);
<a id="L2664" name="L2664"></a>2664                             normAlpha = (pixel[aIdx] &amp; 0xffff) * alphaScale;
<a id="L2665" name="L2665"></a>2665                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2666" name="L2666"></a>2666                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L2667" name="L2667"></a>2667                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2668" name="L2668"></a>2668                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>)
<a id="L2669" name="L2669"></a>2669                                         ((pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xffff) * invAlpha + 0.5f);
<a id="L2670" name="L2670"></a>2670                                 <em class="brace">}</em>
<a id="L2671" name="L2671"></a>2671                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2672" name="L2672"></a>2672                             <em class="brace">}</em>
<a id="L2673" name="L2673"></a>2673                         <em class="brace">}</em>
<a id="L2674" name="L2674"></a>2674                     <em class="brace">}</em>
<a id="L2675" name="L2675"></a>2675                 <em class="brace">}</em>
<a id="L2676" name="L2676"></a>2676                 <strong class="reserved">break</strong>;
<a id="L2677" name="L2677"></a>2677                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT: <em class="brace">{</em>
<a id="L2678" name="L2678"></a>2678                     <strong class="reserved">int</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2679" name="L2679"></a>2679                     <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1&lt;&lt;nBits[aIdx]) - 1));
<a id="L2680" name="L2680"></a>2680                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2681" name="L2681"></a>2681                         rX = rminX;
<a id="L2682" name="L2682"></a>2682                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2683" name="L2683"></a>2683                             pixel = (<strong class="reserved">int</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2684" name="L2684"></a>2684                                                                   pixel);
<a id="L2685" name="L2685"></a>2685                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L2686" name="L2686"></a>2686                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2687" name="L2687"></a>2687                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L2688" name="L2688"></a>2688                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2689" name="L2689"></a>2689                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>)
<a id="L2690" name="L2690"></a>2690                                         (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * invAlpha + 0.5f);
<a id="L2691" name="L2691"></a>2691                                 <em class="brace">}</em>
<a id="L2692" name="L2692"></a>2692                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2693" name="L2693"></a>2693                             <em class="brace">}</em>
<a id="L2694" name="L2694"></a>2694                         <em class="brace">}</em>
<a id="L2695" name="L2695"></a>2695                     <em class="brace">}</em>
<a id="L2696" name="L2696"></a>2696                 <em class="brace">}</em>
<a id="L2697" name="L2697"></a>2697                 <strong class="reserved">break</strong>;
<a id="L2698" name="L2698"></a>2698                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_SHORT: <em class="brace">{</em>
<a id="L2699" name="L2699"></a>2699                     <strong class="reserved">short</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2700" name="L2700"></a>2700                     <strong class="reserved">float</strong> alphaScale = 1.0f / 32767.0f;
<a id="L2701" name="L2701"></a>2701                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2702" name="L2702"></a>2702                         rX = rminX;
<a id="L2703" name="L2703"></a>2703                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2704" name="L2704"></a>2704                             pixel = (<strong class="reserved">short</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2705" name="L2705"></a>2705                                                                     pixel);
<a id="L2706" name="L2706"></a>2706                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L2707" name="L2707"></a>2707                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2708" name="L2708"></a>2708                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L2709" name="L2709"></a>2709                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2710" name="L2710"></a>2710                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">short</strong>)
<a id="L2711" name="L2711"></a>2711                                         (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * invAlpha + 0.5f);
<a id="L2712" name="L2712"></a>2712                                 <em class="brace">}</em>
<a id="L2713" name="L2713"></a>2713                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2714" name="L2714"></a>2714                             <em class="brace">}</em>
<a id="L2715" name="L2715"></a>2715                         <em class="brace">}</em>
<a id="L2716" name="L2716"></a>2716                     <em class="brace">}</em>
<a id="L2717" name="L2717"></a>2717                 <em class="brace">}</em>
<a id="L2718" name="L2718"></a>2718                 <strong class="reserved">break</strong>;
<a id="L2719" name="L2719"></a>2719                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_FLOAT: <em class="brace">{</em>
<a id="L2720" name="L2720"></a>2720                     <strong class="reserved">float</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2721" name="L2721"></a>2721                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2722" name="L2722"></a>2722                         rX = rminX;
<a id="L2723" name="L2723"></a>2723                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2724" name="L2724"></a>2724                             pixel = (<strong class="reserved">float</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2725" name="L2725"></a>2725                                                                     pixel);
<a id="L2726" name="L2726"></a>2726                             normAlpha = pixel[aIdx];
<a id="L2727" name="L2727"></a>2727                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L2728" name="L2728"></a>2728                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L2729" name="L2729"></a>2729                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2730" name="L2730"></a>2730                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] *= invAlpha;
<a id="L2731" name="L2731"></a>2731                                 <em class="brace">}</em>
<a id="L2732" name="L2732"></a>2732                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2733" name="L2733"></a>2733                             <em class="brace">}</em>
<a id="L2734" name="L2734"></a>2734                         <em class="brace">}</em>
<a id="L2735" name="L2735"></a>2735                     <em class="brace">}</em>
<a id="L2736" name="L2736"></a>2736                 <em class="brace">}</em>
<a id="L2737" name="L2737"></a>2737                 <strong class="reserved">break</strong>;
<a id="L2738" name="L2738"></a>2738                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_DOUBLE: <em class="brace">{</em>
<a id="L2739" name="L2739"></a>2739                     <strong class="reserved">double</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L2740" name="L2740"></a>2740                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L2741" name="L2741"></a>2741                         rX = rminX;
<a id="L2742" name="L2742"></a>2742                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L2743" name="L2743"></a>2743                             pixel = (<strong class="reserved">double</strong>[])raster.<a href="../D/18198.html" title="Multiple defined in 18 places.">getDataElements</a>(rX, rY,
<a id="L2744" name="L2744"></a>2744                                                                      pixel);
<a id="L2745" name="L2745"></a>2745                             <strong class="reserved">double</strong> dnormAlpha = pixel[aIdx];
<a id="L2746" name="L2746"></a>2746                             <strong class="reserved">if</strong> (dnormAlpha != 0.0) <em class="brace">{</em>
<a id="L2747" name="L2747"></a>2747                                 <strong class="reserved">double</strong> invAlpha = 1.0 / dnormAlpha;
<a id="L2748" name="L2748"></a>2748                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L2749" name="L2749"></a>2749                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] *= invAlpha;
<a id="L2750" name="L2750"></a>2750                                 <em class="brace">}</em>
<a id="L2751" name="L2751"></a>2751                                 raster.<a href="../D/32349.html" title="Multiple defined in 9 places.">setDataElements</a>(rX, rY, pixel);
<a id="L2752" name="L2752"></a>2752                             <em class="brace">}</em>
<a id="L2753" name="L2753"></a>2753                         <em class="brace">}</em>
<a id="L2754" name="L2754"></a>2754                     <em class="brace">}</em>
<a id="L2755" name="L2755"></a>2755                 <em class="brace">}</em>
<a id="L2756" name="L2756"></a>2756                 <strong class="reserved">break</strong>;
<a id="L2757" name="L2757"></a>2757                 <strong class="reserved">default</strong>:
<a id="L2758" name="L2758"></a>2758                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L2759" name="L2759"></a>2759                          "implemented for transferType " + transferType);
<a id="L2760" name="L2760"></a>2760             <em class="brace">}</em>
<a id="L2761" name="L2761"></a>2761         <em class="brace">}</em>
<a id="L2762" name="L2762"></a>2762 
<a id="L2763" name="L2763"></a>2763         <em class="comment">// Return a new color model</em>
<a id="L2764" name="L2764"></a>2764         <strong class="reserved">if</strong> (!signed) <em class="brace">{</em>
<a id="L2765" name="L2765"></a>2765             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2267.html#L177" title="Defined at 177 in src/java/awt/image/ComponentColorModel.java.">ComponentColorModel</a>(colorSpace, nBits, supportsAlpha,
<a id="L2766" name="L2766"></a>2766                                            <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>, transparency,
<a id="L2767" name="L2767"></a>2767                                            transferType);
<a id="L2768" name="L2768"></a>2768         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2769" name="L2769"></a>2769             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2267.html#L177" title="Defined at 177 in src/java/awt/image/ComponentColorModel.java.">ComponentColorModel</a>(colorSpace, supportsAlpha,
<a id="L2770" name="L2770"></a>2770                                            <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>, transparency,
<a id="L2771" name="L2771"></a>2771                                            transferType);
<a id="L2772" name="L2772"></a>2772         <em class="brace">}</em>
<a id="L2773" name="L2773"></a>2773 
<a id="L2774" name="L2774"></a>2774     <em class="brace">}</em>
<a id="L2775" name="L2775"></a>2775 
<div class="comment">
       Returns true if <code>raster</code> is compatible with this
       <code>ColorModel</code>; false if it is not.
       @param raster The <code>Raster</code> object to test for compatibility.
       @return <code>true</code> if <code>raster</code> is compatible with this
       <code>ColorModel</code>, <code>false</code> if it is not.</div>
<a id="L2785" name="L2785"></a>2785     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21271.html" title="Multiple referred from 3 places.">isCompatibleRaster</a>(<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> raster) <em class="brace">{</em>
<a id="L2786" name="L2786"></a>2786 
<a id="L2787" name="L2787"></a>2787         <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> sm = raster.<a href="../D/22223.html" title="Multiple defined in 5 places.">getSampleModel</a>();
<a id="L2788" name="L2788"></a>2788 
<a id="L2789" name="L2789"></a>2789         <strong class="reserved">if</strong> (sm <strong class="reserved">instanceof</strong> <a href="../S/2254.html#L76" title="Defined at 76 in src/java/awt/image/ComponentSampleModel.java.">ComponentSampleModel</a>) <em class="brace">{</em>
<a id="L2790" name="L2790"></a>2790             <strong class="reserved">if</strong> (sm.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>() != <a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>()) <em class="brace">{</em>
<a id="L2791" name="L2791"></a>2791                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2792" name="L2792"></a>2792             <em class="brace">}</em>
<a id="L2793" name="L2793"></a>2793             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;nBits.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L2794" name="L2794"></a>2794                 <strong class="reserved">if</strong> (sm.<a href="../D/22227.html" title="Multiple defined in 8 places.">getSampleSize</a>(i) &lt; nBits[i]) <em class="brace">{</em>
<a id="L2795" name="L2795"></a>2795                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2796" name="L2796"></a>2796                 <em class="brace">}</em>
<a id="L2797" name="L2797"></a>2797             <em class="brace">}</em>
<a id="L2798" name="L2798"></a>2798             <strong class="reserved">return</strong> (raster.<a href="../D/23246.html" title="Multiple defined in 4 places.">getTransferType</a>() == transferType);
<a id="L2799" name="L2799"></a>2799         <em class="brace">}</em>
<a id="L2800" name="L2800"></a>2800         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2801" name="L2801"></a>2801             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2802" name="L2802"></a>2802         <em class="brace">}</em>
<a id="L2803" name="L2803"></a>2803     <em class="brace">}</em>
<a id="L2804" name="L2804"></a>2804 
<div class="comment">
      Creates a <code>WritableRaster</code> with the specified width and height,
      that  has a data layout (<code>SampleModel</code>) compatible with
      this <code>ColorModel</code>.
      @param w The width of the <code>WritableRaster</code> you want to create.
      @param h The height of the <code>WritableRaster</code> you want to create.
      @return A <code>WritableRaster</code> that is compatible with
      this <code>ColorModel</code>.
      @see WritableRaster
      @see SampleModel</div>
<a id="L2818" name="L2818"></a>2818     <strong class="reserved">public</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../R/12291.html" title="Multiple referred from 37 places.">createCompatibleWritableRaster</a> (<strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h) <em class="brace">{</em>
<a id="L2819" name="L2819"></a>2819         <strong class="reserved">int</strong> dataSize = w*h*numComponents;
<a id="L2820" name="L2820"></a>2820         <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> raster = <strong class="reserved">null</strong>;
<a id="L2821" name="L2821"></a>2821 
<a id="L2822" name="L2822"></a>2822         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2823" name="L2823"></a>2823         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L2824" name="L2824"></a>2824         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L2825" name="L2825"></a>2825             raster = <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a>.<a href="../D/13973.html" title="Multiple defined in 3 places.">createInterleavedRaster</a>(transferType,
<a id="L2826" name="L2826"></a>2826                                                     w, h,
<a id="L2827" name="L2827"></a>2827                                                     numComponents, <strong class="reserved">null</strong>);
<a id="L2828" name="L2828"></a>2828             <strong class="reserved">break</strong>;
<a id="L2829" name="L2829"></a>2829         <strong class="reserved">default</strong>:
<a id="L2830" name="L2830"></a>2830             <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> sm = <a href="../D/13707.html" title="Multiple defined in 10 places.">createCompatibleSampleModel</a>(w, h);
<a id="L2831" name="L2831"></a>2831             <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a> db = sm.<a href="../D/13750.html" title="Multiple defined in 5 places.">createDataBuffer</a>();
<a id="L2832" name="L2832"></a>2832             raster = <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a>.<a href="../D/14329.html" title="Multiple defined in 2 places.">createWritableRaster</a>(sm, db, <strong class="reserved">null</strong>);
<a id="L2833" name="L2833"></a>2833         <em class="brace">}</em>
<a id="L2834" name="L2834"></a>2834 
<a id="L2835" name="L2835"></a>2835         <strong class="reserved">return</strong> raster;
<a id="L2836" name="L2836"></a>2836     <em class="brace">}</em>
<a id="L2837" name="L2837"></a>2837 
<div class="comment">
      Creates a <code>SampleModel</code> with the specified width and height,
      that  has a data layout compatible with this <code>ColorModel</code>.
      @param w The width of the <code>SampleModel</code> you want to create.
      @param h The height of the <code>SampleModel</code> you want to create.
      @return A <code>SampleModel</code> that is compatible with this
      <code>ColorModel</code>.
      @see SampleModel</div>
<a id="L2850" name="L2850"></a>2850     <strong class="reserved">public</strong> <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> <a href="../R/12288.html" title="Multiple referred from 9 places.">createCompatibleSampleModel</a>(<strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h) <em class="brace">{</em>
<a id="L2851" name="L2851"></a>2851         <strong class="reserved">int</strong>[] bandOffsets = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L2852" name="L2852"></a>2852         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L2853" name="L2853"></a>2853             bandOffsets[i] = i;
<a id="L2854" name="L2854"></a>2854         <em class="brace">}</em>
<a id="L2855" name="L2855"></a>2855         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L2856" name="L2856"></a>2856         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L2857" name="L2857"></a>2857         <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L2858" name="L2858"></a>2858             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2244.html#L56" title="Defined at 56 in src/java/awt/image/PixelInterleavedSampleModel.java.">PixelInterleavedSampleModel</a>(transferType, w, h,
<a id="L2859" name="L2859"></a>2859                                                    numComponents,
<a id="L2860" name="L2860"></a>2860                                                    w*numComponents,
<a id="L2861" name="L2861"></a>2861                                                    bandOffsets);
<a id="L2862" name="L2862"></a>2862         <strong class="reserved">default</strong>:
<a id="L2863" name="L2863"></a>2863             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2254.html#L76" title="Defined at 76 in src/java/awt/image/ComponentSampleModel.java.">ComponentSampleModel</a>(transferType, w, h,
<a id="L2864" name="L2864"></a>2864                                             numComponents,
<a id="L2865" name="L2865"></a>2865                                             w*numComponents,
<a id="L2866" name="L2866"></a>2866                                             bandOffsets);
<a id="L2867" name="L2867"></a>2867         <em class="brace">}</em>
<a id="L2868" name="L2868"></a>2868     <em class="brace">}</em>
<a id="L2869" name="L2869"></a>2869 
<div class="comment">
      Checks whether or not the specified <code>SampleModel</code>
      is compatible with this <code>ColorModel</code>.
      @param sm The <code>SampleModel</code> to test for compatibility.
      @return <code>true</code> if the <code>SampleModel</code> is
      compatible with this <code>ColorModel</code>, <code>false</code>
      if it is not.
      @see SampleModel</div>
<a id="L2882" name="L2882"></a>2882     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4243.html#L105" title="Referred from 105 in src/javax/imageio/ImageTypeSpecifier.java.">isCompatibleSampleModel</a>(<a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> sm) <em class="brace">{</em>
<a id="L2883" name="L2883"></a>2883         <strong class="reserved">if</strong> (!(sm <strong class="reserved">instanceof</strong> <a href="../S/2254.html#L76" title="Defined at 76 in src/java/awt/image/ComponentSampleModel.java.">ComponentSampleModel</a>)) <em class="brace">{</em>
<a id="L2884" name="L2884"></a>2884             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2885" name="L2885"></a>2885         <em class="brace">}</em>
<a id="L2886" name="L2886"></a>2886 
<a id="L2887" name="L2887"></a>2887         <em class="comment">// Must have the same number of components</em>
<a id="L2888" name="L2888"></a>2888         <strong class="reserved">if</strong> (numComponents != sm.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>()) <em class="brace">{</em>
<a id="L2889" name="L2889"></a>2889             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2890" name="L2890"></a>2890         <em class="brace">}</em>
<a id="L2891" name="L2891"></a>2891 
<a id="L2892" name="L2892"></a>2892         <strong class="reserved">if</strong> (sm.<a href="../D/23246.html" title="Multiple defined in 4 places.">getTransferType</a>() != transferType) <em class="brace">{</em>
<a id="L2893" name="L2893"></a>2893             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2894" name="L2894"></a>2894         <em class="brace">}</em>
<a id="L2895" name="L2895"></a>2895 
<a id="L2896" name="L2896"></a>2896         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2897" name="L2897"></a>2897     <em class="brace">}</em>
<a id="L2898" name="L2898"></a>2898 
<div class="comment">
      Returns a <code>Raster</code> representing the alpha channel of an image,
      extracted from the input <code>Raster</code>.
      This method assumes that <code>Raster</code> objects associated with
      this <code>ColorModel</code> store the alpha band, if present, as
      the last band of image data. Returns null if there is no separate spatial
      alpha channel associated with this <code>ColorModel</code>.
      This method creates a new <code>Raster</code>, but will share the data
      array.
      @param raster The <code>WritableRaster</code> from which to extract the
      alpha  channel.
      @return A <code>WritableRaster</code> containing the image's alpha channel.</div>
<a id="L2915" name="L2915"></a>2915     <strong class="reserved">public</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../S/2258.html#L888" title="Referred from 888 in src/java/awt/image/BufferedImage.java.">getAlphaRaster</a>(<a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> raster) <em class="brace">{</em>
<a id="L2916" name="L2916"></a>2916         <strong class="reserved">if</strong> (<a href="../S/2256.html#L406" title="Defined at 406 in src/java/awt/image/ColorModel.java.">hasAlpha</a>() == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L2917" name="L2917"></a>2917             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2918" name="L2918"></a>2918         <em class="brace">}</em>
<a id="L2919" name="L2919"></a>2919 
<a id="L2920" name="L2920"></a>2920         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = raster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L2921" name="L2921"></a>2921         <strong class="reserved">int</strong> y = raster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L2922" name="L2922"></a>2922         <strong class="reserved">int</strong>[] band = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L2923" name="L2923"></a>2923         band[0] = raster.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>() - 1;
<a id="L2924" name="L2924"></a>2924         <strong class="reserved">return</strong> raster.<a href="../S/2280.html#L217" title="Defined at 217 in src/java/awt/image/WritableRaster.java.">createWritableChild</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, raster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>(),
<a id="L2925" name="L2925"></a>2925                                           raster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>(), <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y,
<a id="L2926" name="L2926"></a>2926                                           band);
<a id="L2927" name="L2927"></a>2927     <em class="brace">}</em>
<a id="L2928" name="L2928"></a>2928 
<div class="comment">
      Compares this color model with another for equality.
      @param obj The object to compare with this color model.
      @return <code>true</code> if the color model objects are equal,
      <code>false</code> if they are not.</div>
<a id="L2936" name="L2936"></a>2936     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L2937" name="L2937"></a>2937         <strong class="reserved">if</strong> (!<strong class="reserved">super</strong>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(obj)) <em class="brace">{</em>
<a id="L2938" name="L2938"></a>2938             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2939" name="L2939"></a>2939         <em class="brace">}</em>
<a id="L2940" name="L2940"></a>2940 
<a id="L2941" name="L2941"></a>2941         <strong class="reserved">if</strong> (obj.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>() !=  <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()) <em class="brace">{</em>
<a id="L2942" name="L2942"></a>2942             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2943" name="L2943"></a>2943         <em class="brace">}</em>
<a id="L2944" name="L2944"></a>2944 
<a id="L2945" name="L2945"></a>2945         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2946" name="L2946"></a>2946     <em class="brace">}</em>
<a id="L2947" name="L2947"></a>2947 
<a id="L2948" name="L2948"></a>2948 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L355">[^]</a><a href="#L2936">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L299">[^]</a><a href="#L2520">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L299" title="Defined at 299.">setUseSourceLocation</a></li>
<li><a href="#L311" title="Defined at 311.">_dataOrQName</a></li>
<li><a href="#L334" title="Defined at 334.">clearCoRoutine</a></li>
<li><a href="#L346" title="Defined at 346.">clearCoRoutine</a></li>
<li><a href="#L370" title="Defined at 370.">setIncrementalSAXSource</a></li>
<li><a href="#L408" title="Defined at 408.">getContentHandler</a></li>
<li><a href="#L431" title="Defined at 431.">getLexicalHandler</a></li>
<li><a href="#L446" title="Defined at 446.">getEntityResolver</a></li>
<li><a href="#L456" title="Defined at 456.">getDTDHandler</a></li>
<li><a href="#L466" title="Defined at 466.">getErrorHandler</a></li>
<li><a href="#L476" title="Defined at 476.">getDeclHandler</a></li>
<li><a href="#L487" title="Defined at 487.">needsTwoThreads</a></li>
<li><a href="#L509" title="Defined at 509.">dispatchCharactersEvents</a></li>
<li><a href="#L601" title="Defined at 601.">getNodeName</a></li>
<li><a href="#L650" title="Defined at 650.">getNodeNameX</a></li>
<li><a href="#L688" title="Defined at 688.">isAttributeSpecified</a></li>
<li><a href="#L703" title="Defined at 703.">getDocumentTypeDeclarationSystemIdentifier</a></li>
<li><a href="#L719" title="Defined at 719.">getNextNodeIdentity</a></li>
<li><a href="#L743" title="Defined at 743.">dispatchToEvents</a></li>
<li><a href="#L773" title="Defined at 773.">getNumberOfNodes</a></li>
<li><a href="#L784" title="Defined at 784.">nextNode</a></li>
<li><a href="#L843" title="Defined at 843.">isTextType</a></li>
<li><a href="#L877" title="Defined at 877.">addNode</a></li>
<li><a href="#L934" title="Defined at 934.">addNewDTMID</a></li>
<li><a href="#L962" title="Defined at 962.">migrateTo</a></li>
<li><a href="#L983" title="Defined at 983.">setSourceLocation</a></li>
<li><a href="#L1008" title="Defined at 1008.">getNodeValue</a></li>
<li><a href="#L1050" title="Defined at 1050.">getLocalName</a></li>
<li><a href="#L1089" title="Defined at 1089.">getUnparsedEntityURI</a></li>
<li><a href="#L1147" title="Defined at 1147.">getPrefix</a></li>
<li><a href="#L1195" title="Defined at 1195.">getAttributeNode</a></li>
<li><a href="#L1223" title="Defined at 1223.">getDocumentTypeDeclarationPublicIdentifier</a></li>
<li><a href="#L1243" title="Defined at 1243.">getNamespaceURI</a></li>
<li><a href="#L1258" title="Defined at 1258.">getStringValue</a></li>
<li><a href="#L1333" title="Defined at 1333.">isWhitespace</a></li>
<li><a href="#L1370" title="Defined at 1370.">getElementById</a></li>
<li><a href="#L1402" title="Defined at 1402.">getPrefix</a></li>
<li><a href="#L1472" title="Defined at 1472.">getIdForNamespace</a></li>
<li><a href="#L1485" title="Defined at 1485.">getNamespaceURI</a></li>
<li><a href="#L1514" title="Defined at 1514.">setIDAttribute</a></li>
<li><a href="#L1523" title="Defined at 1523.">charactersFlush</a></li>
<li><a href="#L1584" title="Defined at 1584.">resolveEntity</a></li>
<li><a href="#L1611" title="Defined at 1611.">notationDecl</a></li>
<li><a href="#L1636" title="Defined at 1636.">unparsedEntityDecl</a></li>
<li><a href="#L1684" title="Defined at 1684.">setDocumentLocator</a></li>
<li><a href="#L1697" title="Defined at 1697.">startDocument</a></li>
<li><a href="#L1720" title="Defined at 1720.">endDocument</a></li>
<li><a href="#L1758" title="Defined at 1758.">startPrefixMapping</a></li>
<li><a href="#L1784" title="Defined at 1784.">endPrefixMapping</a></li>
<li><a href="#L1817" title="Defined at 1817.">declAlreadyDeclared</a></li>
<li><a href="#L1861" title="Defined at 1861.">startElement</a></li>
<li><a href="#L2030" title="Defined at 2030.">endElement</a></li>
<li><a href="#L2078" title="Defined at 2078.">characters</a></li>
<li><a href="#L2113" title="Defined at 2113.">ignorableWhitespace</a></li>
<li><a href="#L2137" title="Defined at 2137.">processingInstruction</a></li>
<li><a href="#L2167" title="Defined at 2167.">skippedEntity</a></li>
<li><a href="#L2192" title="Defined at 2192.">warning</a></li>
<li><a href="#L2213" title="Defined at 2213.">error</a></li>
<li><a href="#L2235" title="Defined at 2235.">fatalError</a></li>
<li><a href="#L2257" title="Defined at 2257.">elementDecl</a></li>
<li><a href="#L2282" title="Defined at 2282.">attributeDecl</a></li>
<li><a href="#L2303" title="Defined at 2303.">internalEntityDecl</a></li>
<li><a href="#L2325" title="Defined at 2325.">externalEntityDecl</a></li>
<li><a href="#L2357" title="Defined at 2357.">startDTD</a></li>
<li><a href="#L2370" title="Defined at 2370.">endDTD</a></li>
<li><a href="#L2398" title="Defined at 2398.">startEntity</a></li>
<li><a href="#L2411" title="Defined at 2411.">endEntity</a></li>
<li><a href="#L2427" title="Defined at 2427.">startCDATA</a></li>
<li><a href="#L2438" title="Defined at 2438.">endCDATA</a></li>
<li><a href="#L2455" title="Defined at 2455.">comment</a></li>
<li><a href="#L2484" title="Defined at 2484.">setProperty</a></li>
<li><a href="#L2496" title="Defined at 2496.">getSourceLocatorFor</a></li>
<li><a href="#L2520" title="Defined at 2520.">getFixedNames</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: SAX2DTM.java,v 1.2.4.1 2005/09/15 08:15:11 suresh_emailid Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.dtm.<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>.sax2dtm;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.util.Vector;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> javax.xml.transform.Source;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> javax.xml.transform.SourceLocator;
<a id="L29" name="L29"></a>  29 
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.*;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.ref.*;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.StringVector;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.IntVector;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.FastStringBuffer;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.IntStack;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.SuballocatedIntVector;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.SystemIDResolver;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.WrappedRuntimeException;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.XMLString;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.XMLStringFactory;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLErrorResources;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLMessages;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> org.xml.sax.*;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> org.xml.sax.ext.*;
<a id="L45" name="L45"></a>  45 
<div class="comment">
  This class implements a DTM that tends to be optimized more for speed than
  for compactness, that is constructed via SAX2 ContentHandler events.</div>
<a id="L50" name="L50"></a>  50 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6792.html" title="Multiple referred from 7 places.">SAX2DTM</a> <strong class="reserved">extends</strong> <a href="../S/5905.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBaseIterators.java.">DTMDefaultBaseIterators</a>
<a id="L51" name="L51"></a>  51         <strong class="reserved">implements</strong> <a href="../S/722.html#L93" title="Defined at 93 in src/org/xml/sax/EntityResolver.java.">EntityResolver</a>, <a href="../S/721.html#L74" title="Defined at 74 in src/org/xml/sax/DTDHandler.java.">DTDHandler</a>, <a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a>, <a href="../S/723.html#L73" title="Defined at 73 in src/org/xml/sax/ErrorHandler.java.">ErrorHandler</a>,
<a id="L52" name="L52"></a>  52                    <a href="../S/716.html#L72" title="Defined at 72 in src/org/xml/sax/ext/DeclHandler.java.">DeclHandler</a>, <a href="../S/719.html#L68" title="Defined at 68 in src/org/xml/sax/ext/LexicalHandler.java.">LexicalHandler</a>
<a id="L53" name="L53"></a>  53 <em class="brace">{</em>
<div class="comment">
   /** Set true to monitor SAX events and similar diagnostic info. */</div>
<a id="L55" name="L55"></a>  55   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG = <strong class="reserved">false</strong>;
<a id="L56" name="L56"></a>  56 
<div class="comment">
    If we're building the model incrementally on demand, we need to
    be able to tell the source when to send us more data.
    Note that if this has not been set, and you attempt to read ahead
    of the current build point, we'll probably throw a null-pointer
    exception. We could try to wait-and-retry instead, as a very poor
    fallback, but that has all the known problems with multithreading
    on multiprocessors and we Don't Want to Go There.
    @see setIncrementalSAXSource</div>
<a id="L69" name="L69"></a>  69   <strong class="reserved">private</strong> <a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a> m_incrementalSAXSource = <strong class="reserved">null</strong>;
<a id="L70" name="L70"></a>  70 
<div class="comment">
    All the character content, including attribute values, are stored in
    this buffer.
    %REVIEW% Should this have an option of being shared across DTMs?
    Sequentially only; not threadsafe... Currently, I think not.
    %REVIEW% Initial size was pushed way down to reduce weight of RTFs.
    pending reduction in number of RTF DTMs. Now that we're sharing a DTM
    between RTFs, and tail-pruning... consider going back to the larger/faster.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L84" name="L84"></a>  84   <em class="comment">//private FastStringBuffer m_chars = new FastStringBuffer(13, 13);</em>
<a id="L85" name="L85"></a>  85   <strong class="reserved">protected</strong> <a href="../S/5847.html#L56" title="Defined at 56 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">FastStringBuffer</a> m_chars;
<a id="L86" name="L86"></a>  86 
<div class="comment">
 This vector holds offset and length data.</div>
<a id="L89" name="L89"></a>  89   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_data;
<a id="L90" name="L90"></a>  90 
<div class="comment">
 The parent stack, needed only for construction.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L94" name="L94"></a>  94   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a> m_parents;
<a id="L95" name="L95"></a>  95 
<div class="comment">
 The current previous node, needed only for construction time.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L99" name="L99"></a>  99   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_previous = 0;
<a id="L100" name="L100"></a> 100 
<div class="comment">
 Namespace support, only relevent at construction time.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L104" name="L104"></a> 104   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> m_prefixMappings =
<a id="L105" name="L105"></a> 105     <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L106" name="L106"></a> 106 
<div class="comment">
 Namespace support, only relevent at construction time.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L110" name="L110"></a> 110   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a> m_contextIndexes;
<a id="L111" name="L111"></a> 111 
<div class="comment">
   /** Type of next characters() event within text block in prgress. */</div>
<a id="L113" name="L113"></a> 113   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_textType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE;
<a id="L114" name="L114"></a> 114 
<div class="comment">
    Type of coalesced text block. See logic in the characters()
    method.</div>
<a id="L119" name="L119"></a> 119   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_coalescedTextType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE;
<a id="L120" name="L120"></a> 120 
<div class="comment">
   /** The SAX Document locator */</div>
<a id="L122" name="L122"></a> 122   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <a href="../D/5191.html" title="Multiple defined in 3 places.">Locator</a> m_locator = <strong class="reserved">null</strong>;
<a id="L123" name="L123"></a> 123 
<div class="comment">
   /** The SAX Document system-id */</div>
<a id="L125" name="L125"></a> 125   <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_systemId = <strong class="reserved">null</strong>;
<a id="L126" name="L126"></a> 126 
<div class="comment">
   /** We are inside the DTD.  This is used for ignoring comments.  */</div>
<a id="L128" name="L128"></a> 128   <strong class="reserved">transient</strong> <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_insideDTD = <strong class="reserved">false</strong>;
<a id="L129" name="L129"></a> 129 
<div class="comment">
   /** Tree Walker for dispatchToEvents. */</div>
<a id="L131" name="L131"></a> 131   <strong class="reserved">protected</strong> <a href="../S/5893.html#L41" title="Defined at 41 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">DTMTreeWalker</a> m_walker = <strong class="reserved">new</strong> <a href="../S/5893.html#L41" title="Defined at 41 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">DTMTreeWalker</a>();
<a id="L132" name="L132"></a> 132 
<div class="comment">
   /** pool of string values that come as strings. */</div>
<a id="L134" name="L134"></a> 134   <strong class="reserved">protected</strong> <a href="../S/5913.html#L59" title="Defined at 59 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMStringPool.java.">DTMStringPool</a> m_valuesOrPrefixes;
<a id="L135" name="L135"></a> 135 
<div class="comment">
 End document has been reached.
    Made protected rather than private so SAX2RTFDTM can access it.</div>
<a id="L139" name="L139"></a> 139   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_endDocumentOccured = <strong class="reserved">false</strong>;
<a id="L140" name="L140"></a> 140 
<div class="comment">
   /** Data or qualified name values, one array element for each node. */</div>
<a id="L142" name="L142"></a> 142   <strong class="reserved">protected</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a> m_dataOrQName;
<a id="L143" name="L143"></a> 143 
<div class="comment">
    This table holds the ID string to node associations, for
    XML IDs.</div>
<a id="L148" name="L148"></a> 148   <strong class="reserved">protected</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> m_idAttributes = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L149" name="L149"></a> 149 
<div class="comment">
    fixed dom-style names.</div>
<a id="L153" name="L153"></a> 153   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] m_fixednames = <em class="brace">{</em> <strong class="reserved">null</strong>,
<a id="L154" name="L154"></a> 154                     <strong class="reserved">null</strong>,  <em class="comment">// nothing, Element</em>
<a id="L155" name="L155"></a> 155                     <strong class="reserved">null</strong>, "#text",  <em class="comment">// Attr, Text</em>
<a id="L156" name="L156"></a> 156                     "#cdata_section", <strong class="reserved">null</strong>,  <em class="comment">// CDATA, EntityReference</em>
<a id="L157" name="L157"></a> 157                     <strong class="reserved">null</strong>, <strong class="reserved">null</strong>,  <em class="comment">// Entity, PI</em>
<a id="L158" name="L158"></a> 158                     "#comment", "#document",  <em class="comment">// Comment, Document</em>
<a id="L159" name="L159"></a> 159                     <strong class="reserved">null</strong>, "#document-fragment",  <em class="comment">// Doctype, DocumentFragment</em>
<a id="L160" name="L160"></a> 160                     <strong class="reserved">null</strong> <em class="brace">}</em>;  <em class="comment">// Notation</em>
<a id="L161" name="L161"></a> 161 
<div class="comment">
    Vector of entities.  Each record is composed of four Strings:
     publicId, systemID, notationName, and name.</div>
<a id="L166" name="L166"></a> 166   <strong class="reserved">private</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> m_entities = <strong class="reserved">null</strong>;
<a id="L167" name="L167"></a> 167 
<div class="comment">
   /** m_entities public ID offset. */</div>
<a id="L169" name="L169"></a> 169   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY_FIELD_PUBLICID = 0;
<a id="L170" name="L170"></a> 170 
<div class="comment">
   /** m_entities system ID offset. */</div>
<a id="L172" name="L172"></a> 172   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY_FIELD_SYSTEMID = 1;
<a id="L173" name="L173"></a> 173 
<div class="comment">
   /** m_entities notation name offset. */</div>
<a id="L175" name="L175"></a> 175   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY_FIELD_NOTATIONNAME = 2;
<a id="L176" name="L176"></a> 176 
<div class="comment">
   /** m_entities name offset. */</div>
<a id="L178" name="L178"></a> 178   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY_FIELD_NAME = 3;
<a id="L179" name="L179"></a> 179 
<div class="comment">
   /** Number of entries per record for m_entities. */</div>
<a id="L181" name="L181"></a> 181   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY_FIELDS_PER = 4;
<a id="L182" name="L182"></a> 182 
<div class="comment">
    The starting offset within m_chars for the text or
    CDATA_SECTION node currently being acumulated,
    or -1 if there is no text node in progress</div>
<a id="L188" name="L188"></a> 188   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_textPendingStart = -1;
<a id="L189" name="L189"></a> 189 
<div class="comment">
    Describes whether information about document source location
    should be maintained or not.
    Made protected for access by SAX2RTFDTM.</div>
<a id="L196" name="L196"></a> 196   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> m_useSourceLocationProperty = <strong class="reserved">false</strong>;
<a id="L197" name="L197"></a> 197 
<div class="comment">
 Made protected for access by SAX2RTFDTM.</div>
<a id="L200" name="L200"></a> 200   <strong class="reserved">protected</strong> <a href="../S/5880.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/utils/StringVector.java.">StringVector</a> m_sourceSystemId;
<div class="comment">
 Made protected for access by SAX2RTFDTM.</div>
<a id="L203" name="L203"></a> 203   <strong class="reserved">protected</strong> <a href="../D/4297.html" title="Multiple defined in 3 places.">IntVector</a> m_sourceLine;
<div class="comment">
 Made protected for access by SAX2RTFDTM.</div>
<a id="L206" name="L206"></a> 206   <strong class="reserved">protected</strong> <a href="../D/4297.html" title="Multiple defined in 3 places.">IntVector</a> m_sourceColumn;
<a id="L207" name="L207"></a> 207 
<div class="comment">
    Construct a SAX2DTM object using the default block size.
    @param mgr The DTMManager who owns this DTM.
    @param source the JAXP 1.1 Source object for this DTM.
    @param dtmIdentity The DTM identity ID for this DTM.
    @param whiteSpaceFilter The white space filter for this DTM, which may
                            be null.
    @param xstringfactory XMLString factory for creating character content.
    @param doIndexing true if the caller considers it worth it to use
                      indexing schemes.</div>
<a id="L220" name="L220"></a> 220   <strong class="reserved">public</strong> SAX2DTM(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr, <a href="../S/4049.html#L32" title="Defined at 32 in src/javax/xml/transform/Source.java.">Source</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, <strong class="reserved">int</strong> dtmIdentity,
<a id="L221" name="L221"></a> 221                  <a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a> whiteSpaceFilter,
<a id="L222" name="L222"></a> 222                  <a href="../S/5839.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/utils/XMLStringFactory.java.">XMLStringFactory</a> xstringfactory,
<a id="L223" name="L223"></a> 223                  <strong class="reserved">boolean</strong> doIndexing)
<a id="L224" name="L224"></a> 224   <em class="brace">{</em>
<a id="L225" name="L225"></a> 225 
<a id="L226" name="L226"></a> 226     <strong class="reserved">this</strong>(mgr, <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, dtmIdentity, whiteSpaceFilter,
<a id="L227" name="L227"></a> 227           xstringfactory, doIndexing, DEFAULT_BLOCKSIZE, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L228" name="L228"></a> 228   <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<div class="comment">
    Construct a SAX2DTM object ready to be constructed from SAX2
    ContentHandler events.
    @param mgr The DTMManager who owns this DTM.
    @param source the JAXP 1.1 Source object for this DTM.
    @param dtmIdentity The DTM identity ID for this DTM.
    @param whiteSpaceFilter The white space filter for this DTM, which may
                            be null.
    @param xstringfactory XMLString factory for creating character content.
    @param doIndexing true if the caller considers it worth it to use
                      indexing schemes.
    @param blocksize The block size of the DTM.
    @param usePrevsib true if we want to build the previous sibling node array.
    @param newNameTable true if we want to use a new ExpandedNameTable for this DTM.</div>
<a id="L246" name="L246"></a> 246   <strong class="reserved">public</strong> SAX2DTM(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr, <a href="../S/4049.html#L32" title="Defined at 32 in src/javax/xml/transform/Source.java.">Source</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, <strong class="reserved">int</strong> dtmIdentity,
<a id="L247" name="L247"></a> 247                  <a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a> whiteSpaceFilter,
<a id="L248" name="L248"></a> 248                  <a href="../S/5839.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/utils/XMLStringFactory.java.">XMLStringFactory</a> xstringfactory,
<a id="L249" name="L249"></a> 249                  <strong class="reserved">boolean</strong> doIndexing,
<a id="L250" name="L250"></a> 250                  <strong class="reserved">int</strong> blocksize,
<a id="L251" name="L251"></a> 251                  <strong class="reserved">boolean</strong> usePrevsib,
<a id="L252" name="L252"></a> 252                  <strong class="reserved">boolean</strong> newNameTable)
<a id="L253" name="L253"></a> 253   <em class="brace">{</em>
<a id="L254" name="L254"></a> 254 
<a id="L255" name="L255"></a> 255     <strong class="reserved">super</strong>(mgr, <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, dtmIdentity, whiteSpaceFilter,
<a id="L256" name="L256"></a> 256           xstringfactory, doIndexing, blocksize, usePrevsib, newNameTable);
<a id="L257" name="L257"></a> 257 
<a id="L258" name="L258"></a> 258     <em class="comment">// %OPT% Use smaller sizes for all internal storage units when</em>
<a id="L259" name="L259"></a> 259     <em class="comment">// the blocksize is small. This reduces the cost of creating an RTF.</em>
<a id="L260" name="L260"></a> 260     <strong class="reserved">if</strong> (blocksize &lt;= 64)
<a id="L261" name="L261"></a> 261     <em class="brace">{</em>
<a id="L262" name="L262"></a> 262       m_data = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, DEFAULT_NUMBLOCKS_SMALL);
<a id="L263" name="L263"></a> 263       m_dataOrQName = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, DEFAULT_NUMBLOCKS_SMALL);
<a id="L264" name="L264"></a> 264       m_valuesOrPrefixes = <strong class="reserved">new</strong> <a href="../S/5913.html#L59" title="Defined at 59 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMStringPool.java.">DTMStringPool</a>(16);
<a id="L265" name="L265"></a> 265       m_chars = <strong class="reserved">new</strong> <a href="../S/5847.html#L56" title="Defined at 56 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">FastStringBuffer</a>(7, 10);
<a id="L266" name="L266"></a> 266       m_contextIndexes = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>(4);
<a id="L267" name="L267"></a> 267       m_parents = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>(4);
<a id="L268" name="L268"></a> 268     <em class="brace">}</em>
<a id="L269" name="L269"></a> 269     <strong class="reserved">else</strong>
<a id="L270" name="L270"></a> 270     <em class="brace">{</em>
<a id="L271" name="L271"></a> 271       m_data = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, DEFAULT_NUMBLOCKS);
<a id="L272" name="L272"></a> 272       m_dataOrQName = <strong class="reserved">new</strong> <a href="../S/5856.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/utils/SuballocatedIntVector.java.">SuballocatedIntVector</a>(blocksize, DEFAULT_NUMBLOCKS);
<a id="L273" name="L273"></a> 273       m_valuesOrPrefixes = <strong class="reserved">new</strong> <a href="../S/5913.html#L59" title="Defined at 59 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMStringPool.java.">DTMStringPool</a>();
<a id="L274" name="L274"></a> 274       m_chars = <strong class="reserved">new</strong> <a href="../S/5847.html#L56" title="Defined at 56 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">FastStringBuffer</a>(10, 13);
<a id="L275" name="L275"></a> 275       m_contextIndexes = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>();
<a id="L276" name="L276"></a> 276       m_parents = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>();
<a id="L277" name="L277"></a> 277     <em class="brace">}</em>
<a id="L278" name="L278"></a> 278 
<a id="L279" name="L279"></a> 279     <em class="comment">// %REVIEW%  Initial size pushed way down to reduce weight of RTFs</em>
<a id="L280" name="L280"></a> 280     <em class="comment">// (I'm not entirely sure 0 would work, so I'm playing it safe for now.)</em>
<a id="L281" name="L281"></a> 281     <em class="comment">//m_data = new SuballocatedIntVector(doIndexing ? (1024*2) : 512, 1024);</em>
<a id="L282" name="L282"></a> 282     <em class="comment">//m_data = new SuballocatedIntVector(blocksize);</em>
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284     m_data.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(0);   <em class="comment">// Need placeholder in case index into here must be &lt;0.</em>
<a id="L285" name="L285"></a> 285 
<a id="L286" name="L286"></a> 286     <em class="comment">//m_dataOrQName = new SuballocatedIntVector(blocksize);</em>
<a id="L287" name="L287"></a> 287 
<a id="L288" name="L288"></a> 288     <em class="comment">// m_useSourceLocationProperty=com.sun.org.apache.xalan.internal.processor.TransformerFactoryImpl.m_source_location;</em>
<a id="L289" name="L289"></a> 289     m_useSourceLocationProperty = mgr.<a href="../S/5920.html#L285" title="Defined at 285 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">getSource_location</a>();
<a id="L290" name="L290"></a> 290     m_sourceSystemId = (m_useSourceLocationProperty) ? <strong class="reserved">new</strong> <a href="../S/5880.html#L30" title="Defined at 30 in src/com/sun/org/apache/xml/internal/utils/StringVector.java.">StringVector</a>() : <strong class="reserved">null</strong>;
<a id="L291" name="L291"></a> 291         m_sourceLine = (m_useSourceLocationProperty) ?  <strong class="reserved">new</strong> <a href="../D/4297.html" title="Multiple defined in 3 places.">IntVector</a>() : <strong class="reserved">null</strong>;
<a id="L292" name="L292"></a> 292     m_sourceColumn = (m_useSourceLocationProperty) ?  <strong class="reserved">new</strong> <a href="../D/4297.html" title="Multiple defined in 3 places.">IntVector</a>() : <strong class="reserved">null</strong>;
<a id="L293" name="L293"></a> 293   <em class="brace">}</em>
<a id="L294" name="L294"></a> 294 
<div class="comment">
    Set whether information about document source location
    should be maintained or not.</div>
<a id="L299" name="L299"></a> 299   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setUseSourceLocation(<strong class="reserved">boolean</strong> useSourceLocation)
<a id="L300" name="L300"></a> 300   <em class="brace">{</em>
<a id="L301" name="L301"></a> 301     m_useSourceLocationProperty = useSourceLocation;
<a id="L302" name="L302"></a> 302   <em class="brace">}</em>
<a id="L303" name="L303"></a> 303 
<div class="comment">
    Get the data or qualified name for the given node identity.
    @param identity The node identity.
    @return The data or qualified name, or DTM.NULL.</div>
<a id="L311" name="L311"></a> 311   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9402.html" title="Multiple referred from 15 places.">_dataOrQName</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L312" name="L312"></a> 312   <em class="brace">{</em>
<a id="L313" name="L313"></a> 313 
<a id="L314" name="L314"></a> 314     <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L315" name="L315"></a> 315       <strong class="reserved">return</strong> m_dataOrQName.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L316" name="L316"></a> 316 
<a id="L317" name="L317"></a> 317     <em class="comment">// Check to see if the information requested has been processed, and,</em>
<a id="L318" name="L318"></a> 318     <em class="comment">// if not, advance the iterator until we the information has been</em>
<a id="L319" name="L319"></a> 319     <em class="comment">// processed.</em>
<a id="L320" name="L320"></a> 320     <strong class="reserved">while</strong> (<strong class="reserved">true</strong>)
<a id="L321" name="L321"></a> 321     <em class="brace">{</em>
<a id="L322" name="L322"></a> 322       <strong class="reserved">boolean</strong> isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L323" name="L323"></a> 323 
<a id="L324" name="L324"></a> 324       <strong class="reserved">if</strong> (!isMore)
<a id="L325" name="L325"></a> 325         <strong class="reserved">return</strong> <a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L326" name="L326"></a> 326       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &lt; m_size)
<a id="L327" name="L327"></a> 327         <strong class="reserved">return</strong> m_dataOrQName.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L328" name="L328"></a> 328     <em class="brace">}</em>
<a id="L329" name="L329"></a> 329   <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<div class="comment">
    Ask the CoRoutine parser to doTerminate and clear the reference.</div>
<a id="L334" name="L334"></a> 334   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11510.html" title="Multiple referred from 9 places.">clearCoRoutine</a>()
<a id="L335" name="L335"></a> 335   <em class="brace">{</em>
<a id="L336" name="L336"></a> 336     <a href="../D/12832.html" title="Multiple defined in 2 places.">clearCoRoutine</a>(<strong class="reserved">true</strong>);
<a id="L337" name="L337"></a> 337   <em class="brace">}</em>
<a id="L338" name="L338"></a> 338 
<div class="comment">
    Ask the CoRoutine parser to doTerminate and clear the reference. If
    the CoRoutine parser has already been cleared, this will have no effect.
    @param callDoTerminate true of doTerminate should be called on the
    coRoutine parser.</div>
<a id="L346" name="L346"></a> 346   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11510.html" title="Multiple referred from 9 places.">clearCoRoutine</a>(<strong class="reserved">boolean</strong> callDoTerminate)
<a id="L347" name="L347"></a> 347   <em class="brace">{</em>
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_incrementalSAXSource)
<a id="L350" name="L350"></a> 350     <em class="brace">{</em>
<a id="L351" name="L351"></a> 351       <strong class="reserved">if</strong> (callDoTerminate)
<a id="L352" name="L352"></a> 352         m_incrementalSAXSource.<a href="../D/14824.html" title="Multiple defined in 3 places.">deliverMoreNodes</a>(<strong class="reserved">false</strong>);
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354       m_incrementalSAXSource = <strong class="reserved">null</strong>;
<a id="L355" name="L355"></a> 355     <em class="brace">}</em>
<a id="L356" name="L356"></a> 356   <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<div class="comment">
    Bind a IncrementalSAXSource to this DTM. If we discover we need nodes
    that have not yet been built, we will ask this object to send us more
    events, and it will manage interactions with its data sources.
    Note that we do not actually build the IncrementalSAXSource, since we don't
    know what source it's reading from, what thread that source will run in,
    or when it will run.
    @param incrementalSAXSource The parser that we want to recieve events from
    on demand.</div>
<a id="L370" name="L370"></a> 370   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5906.html#L391" title="Referred from 391 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">setIncrementalSAXSource</a>(<a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a> incrementalSAXSource)
<a id="L371" name="L371"></a> 371   <em class="brace">{</em>
<a id="L372" name="L372"></a> 372 
<a id="L373" name="L373"></a> 373     <em class="comment">// Establish coroutine link so we can request more data</em>
<a id="L374" name="L374"></a> 374     <em class="comment">//</em>
<a id="L375" name="L375"></a> 375     <em class="comment">// Note: It's possible that some versions of IncrementalSAXSource may</em>
<a id="L376" name="L376"></a> 376     <em class="comment">// not actually use a CoroutineManager, and hence may not require</em>
<a id="L377" name="L377"></a> 377     <em class="comment">// that we obtain an Application Coroutine ID. (This relies on the</em>
<a id="L378" name="L378"></a> 378     <em class="comment">// coroutine transaction details having been encapsulated in the</em>
<a id="L379" name="L379"></a> 379     <em class="comment">// IncrementalSAXSource.do...() methods.)</em>
<a id="L380" name="L380"></a> 380     m_incrementalSAXSource = incrementalSAXSource;
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382     <em class="comment">// Establish SAX-stream link so we can receive the requested data</em>
<a id="L383" name="L383"></a> 383     incrementalSAXSource.<a href="../D/32251.html" title="Multiple defined in 23 places.">setContentHandler</a>(<strong class="reserved">this</strong>);
<a id="L384" name="L384"></a> 384     incrementalSAXSource.<a href="../D/33083.html" title="Multiple defined in 6 places.">setLexicalHandler</a>(<strong class="reserved">this</strong>);
<a id="L385" name="L385"></a> 385     incrementalSAXSource.<a href="../D/32341.html" title="Multiple defined in 25 places.">setDTDHandler</a>(<strong class="reserved">this</strong>);
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387     <em class="comment">// Are the following really needed? incrementalSAXSource doesn't yet</em>
<a id="L388" name="L388"></a> 388     <em class="comment">// support them, and they're mostly no-ops here...</em>
<a id="L389" name="L389"></a> 389     <em class="comment">//incrementalSAXSource.setErrorHandler(this);</em>
<a id="L390" name="L390"></a> 390     <em class="comment">//incrementalSAXSource.setDeclHandler(this);</em>
<a id="L391" name="L391"></a> 391   <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 
<div class="comment">
    getContentHandler returns "our SAX builder" -- the thing that
    someone else should send SAX events to in order to extend this
    DTM model.
    %REVIEW% Should this return null if constrution already done/begun?
    @return null if this model doesn't respond to SAX events,
    "this" if the DTM object has a built-in SAX ContentHandler,
    the IncrementalSAXSource if we're bound to one and should receive
    the SAX stream via it for incremental build purposes...
    Note that IncrementalSAXSource_Filter is package private, hence
    it can be statically referenced using instanceof (CR 6537912).</div>
<a id="L408" name="L408"></a> 408   <strong class="reserved">public</strong> <a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> <a href="../R/15784.html" title="Multiple referred from 7 places.">getContentHandler</a>()
<a id="L409" name="L409"></a> 409   <em class="brace">{</em>
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411     <strong class="reserved">if</strong> (m_incrementalSAXSource.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()
<a id="L412" name="L412"></a> 412         .<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("com.sun.org.apache.xml.internal.dtm.ref.IncrementalSAXSource_Filter"))
<a id="L413" name="L413"></a> 413       <strong class="reserved">return</strong> (<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a>) m_incrementalSAXSource;
<a id="L414" name="L414"></a> 414     <strong class="reserved">else</strong>
<a id="L415" name="L415"></a> 415       <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L416" name="L416"></a> 416   <em class="brace">}</em>
<a id="L417" name="L417"></a> 417 
<div class="comment">
    Return this DTM's lexical handler.
    %REVIEW% Should this return null if constrution already done/begun?
    @return null if this model doesn't respond to lexical SAX events,
    "this" if the DTM object has a built-in SAX ContentHandler,
    the IncrementalSAXSource if we're bound to one and should receive
    the SAX stream via it for incremental build purposes...
    Note that IncrementalSAXSource_Filter is package private, hence
    it can be statically referenced using instanceof (CR 6537912).</div>
<a id="L431" name="L431"></a> 431   <strong class="reserved">public</strong> <a href="../S/719.html#L68" title="Defined at 68 in src/org/xml/sax/ext/LexicalHandler.java.">LexicalHandler</a> <a href="../R/17346.html" title="Multiple referred from 4 places.">getLexicalHandler</a>()
<a id="L432" name="L432"></a> 432   <em class="brace">{</em>
<a id="L433" name="L433"></a> 433 
<a id="L434" name="L434"></a> 434     <strong class="reserved">if</strong> (m_incrementalSAXSource.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>()
<a id="L435" name="L435"></a> 435         .<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("com.sun.org.apache.xml.internal.dtm.ref.IncrementalSAXSource_Filter"))
<a id="L436" name="L436"></a> 436       <strong class="reserved">return</strong> (<a href="../S/719.html#L68" title="Defined at 68 in src/org/xml/sax/ext/LexicalHandler.java.">LexicalHandler</a>) m_incrementalSAXSource;
<a id="L437" name="L437"></a> 437     <strong class="reserved">else</strong>
<a id="L438" name="L438"></a> 438       <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L439" name="L439"></a> 439   <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<div class="comment">
    Return this DTM's EntityResolver.
    @return null if this model doesn't respond to SAX entity ref events.</div>
<a id="L446" name="L446"></a> 446   <strong class="reserved">public</strong> <a href="../S/722.html#L93" title="Defined at 93 in src/org/xml/sax/EntityResolver.java.">EntityResolver</a> <a href="../R/16392.html" title="Multiple referred from 19 places.">getEntityResolver</a>()
<a id="L447" name="L447"></a> 447   <em class="brace">{</em>
<a id="L448" name="L448"></a> 448     <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L449" name="L449"></a> 449   <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<div class="comment">
    Return this DTM's DTDHandler.
    @return null if this model doesn't respond to SAX dtd events.</div>
<a id="L456" name="L456"></a> 456   <strong class="reserved">public</strong> <a href="../S/721.html#L74" title="Defined at 74 in src/org/xml/sax/DTDHandler.java.">DTDHandler</a> <a href="../R/15931.html" title="Multiple referred from 4 places.">getDTDHandler</a>()
<a id="L457" name="L457"></a> 457   <em class="brace">{</em>
<a id="L458" name="L458"></a> 458     <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L459" name="L459"></a> 459   <em class="brace">}</em>
<a id="L460" name="L460"></a> 460 
<div class="comment">
    Return this DTM's ErrorHandler.
    @return null if this model doesn't respond to SAX error events.</div>
<a id="L466" name="L466"></a> 466   <strong class="reserved">public</strong> <a href="../S/723.html#L73" title="Defined at 73 in src/org/xml/sax/ErrorHandler.java.">ErrorHandler</a> <a href="../R/16431.html" title="Multiple referred from 39 places.">getErrorHandler</a>()
<a id="L467" name="L467"></a> 467   <em class="brace">{</em>
<a id="L468" name="L468"></a> 468     <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L469" name="L469"></a> 469   <em class="brace">}</em>
<a id="L470" name="L470"></a> 470 
<div class="comment">
    Return this DTM's DeclHandler.
    @return null if this model doesn't respond to SAX Decl events.</div>
<a id="L476" name="L476"></a> 476   <strong class="reserved">public</strong> <a href="../S/716.html#L72" title="Defined at 72 in src/org/xml/sax/ext/DeclHandler.java.">DeclHandler</a> <a href="../R/15973.html" title="Multiple referred from 3 places.">getDeclHandler</a>()
<a id="L477" name="L477"></a> 477   <em class="brace">{</em>
<a id="L478" name="L478"></a> 478     <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L479" name="L479"></a> 479   <em class="brace">}</em>
<a id="L480" name="L480"></a> 480 
<div class="comment">
    @return true iff we're building this model incrementally (eg
    we're partnered with a IncrementalSAXSource) and thus require that the
    transformation and the parse run simultaneously. Guidance to the
    DTMManager.</div>
<a id="L487" name="L487"></a> 487   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/23508.html" title="Multiple referred from 2 places.">needsTwoThreads</a>()
<a id="L488" name="L488"></a> 488   <em class="brace">{</em>
<a id="L489" name="L489"></a> 489     <strong class="reserved">return</strong> <strong class="reserved">null</strong> != m_incrementalSAXSource;
<a id="L490" name="L490"></a> 490   <em class="brace">}</em>
<a id="L491" name="L491"></a> 491 
<div class="comment">
    Directly call the
    characters method on the passed ContentHandler for the
    string-value of the given node (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value). Multiple calls to the
    ContentHandler's characters methods may well occur for a single call to
    this method.
    @param nodeHandle The node ID.
    @param ch A non-null reference to a ContentHandler.
    @param normalize true if the content should be normalized according to
    the rules for the XPath
    <a href="http://www.w3.org/TR/xpath#function-normalize-space">normalize-space</a>
    function.
    @throws SAXException</div>
<a id="L509" name="L509"></a> 509   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13318.html" title="Multiple referred from 11 places.">dispatchCharactersEvents</a>(<strong class="reserved">int</strong> nodeHandle, <a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> ch,
<a id="L510" name="L510"></a> 510                                        <strong class="reserved">boolean</strong> <a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>)
<a id="L511" name="L511"></a> 511           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L512" name="L512"></a> 512   <em class="brace">{</em>
<a id="L513" name="L513"></a> 513 
<a id="L514" name="L514"></a> 514     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516     <strong class="reserved">if</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L517" name="L517"></a> 517       <strong class="reserved">return</strong>;
<a id="L518" name="L518"></a> 518 
<a id="L519" name="L519"></a> 519     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521     <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L522" name="L522"></a> 522     <em class="brace">{</em>
<a id="L523" name="L523"></a> 523       <strong class="reserved">int</strong> dataIndex = m_dataOrQName.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L524" name="L524"></a> 524       <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L525" name="L525"></a> 525       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527       <strong class="reserved">if</strong>(<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>)
<a id="L528" name="L528"></a> 528         m_chars.<a href="../D/31740.html" title="Multiple defined in 3 places.">sendNormalizedSAXcharacters</a>(ch, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L529" name="L529"></a> 529       <strong class="reserved">else</strong>
<a id="L530" name="L530"></a> 530         m_chars.<a href="../S/5847.html#L980" title="Defined at 980 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">sendSAXcharacters</a>(ch, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L531" name="L531"></a> 531     <em class="brace">}</em>
<a id="L532" name="L532"></a> 532     <strong class="reserved">else</strong>
<a id="L533" name="L533"></a> 533     <em class="brace">{</em>
<a id="L534" name="L534"></a> 534       <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L535" name="L535"></a> 535 
<a id="L536" name="L536"></a> 536       <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)
<a id="L537" name="L537"></a> 537       <em class="brace">{</em>
<a id="L538" name="L538"></a> 538         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = -1;
<a id="L539" name="L539"></a> 539         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = 0;
<a id="L540" name="L540"></a> 540         <strong class="reserved">int</strong> <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a> = <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L541" name="L541"></a> 541 
<a id="L542" name="L542"></a> 542         <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>;
<a id="L543" name="L543"></a> 543 
<a id="L544" name="L544"></a> 544         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L545" name="L545"></a> 545           <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547           <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L548" name="L548"></a> 548           <em class="brace">{</em>
<a id="L549" name="L549"></a> 549             <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L550" name="L550"></a> 550 
<a id="L551" name="L551"></a> 551             <strong class="reserved">if</strong> (-1 == <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>)
<a id="L552" name="L552"></a> 552             <em class="brace">{</em>
<a id="L553" name="L553"></a> 553               <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L554" name="L554"></a> 554             <em class="brace">}</em>
<a id="L555" name="L555"></a> 555 
<a id="L556" name="L556"></a> 556             <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> += m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L557" name="L557"></a> 557           <em class="brace">}</em>
<a id="L558" name="L558"></a> 558 
<a id="L559" name="L559"></a> 559           <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L560" name="L560"></a> 560         <em class="brace">}</em> <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &amp;&amp; (<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) &gt;= <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a>));
<a id="L561" name="L561"></a> 561 
<a id="L562" name="L562"></a> 562         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0)
<a id="L563" name="L563"></a> 563         <em class="brace">{</em>
<a id="L564" name="L564"></a> 564           <strong class="reserved">if</strong>(<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>)
<a id="L565" name="L565"></a> 565             m_chars.<a href="../D/31740.html" title="Multiple defined in 3 places.">sendNormalizedSAXcharacters</a>(ch, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L566" name="L566"></a> 566           <strong class="reserved">else</strong>
<a id="L567" name="L567"></a> 567             m_chars.<a href="../S/5847.html#L980" title="Defined at 980 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">sendSAXcharacters</a>(ch, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L568" name="L568"></a> 568         <em class="brace">}</em>
<a id="L569" name="L569"></a> 569       <em class="brace">}</em>
<a id="L570" name="L570"></a> 570       <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE)
<a id="L571" name="L571"></a> 571       <em class="brace">{</em>
<a id="L572" name="L572"></a> 572         <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574         <strong class="reserved">if</strong> (dataIndex &lt; 0)
<a id="L575" name="L575"></a> 575         <em class="brace">{</em>
<a id="L576" name="L576"></a> 576           dataIndex = -dataIndex;
<a id="L577" name="L577"></a> 577           dataIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L578" name="L578"></a> 578         <em class="brace">}</em>
<a id="L579" name="L579"></a> 579 
<a id="L580" name="L580"></a> 580         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(dataIndex);
<a id="L581" name="L581"></a> 581 
<a id="L582" name="L582"></a> 582           <strong class="reserved">if</strong>(<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>)
<a id="L583" name="L583"></a> 583             <a href="../S/5847.html#L56" title="Defined at 56 in src/com/sun/org/apache/xml/internal/utils/FastStringBuffer.java.">FastStringBuffer</a>.<a href="../D/31740.html" title="Multiple defined in 3 places.">sendNormalizedSAXcharacters</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>(),
<a id="L584" name="L584"></a> 584                                                          0, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), ch);
<a id="L585" name="L585"></a> 585           <strong class="reserved">else</strong>
<a id="L586" name="L586"></a> 586             ch.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>(), 0, <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L587" name="L587"></a> 587       <em class="brace">}</em>
<a id="L588" name="L588"></a> 588     <em class="brace">}</em>
<a id="L589" name="L589"></a> 589   <em class="brace">}</em>
<a id="L590" name="L590"></a> 590 
<a id="L591" name="L591"></a> 591 
<div class="comment">
    Given a node handle, return its DOM-style node name. This will
    include names such as #text or #document.
    @param nodeHandle the id of the node.
    @return String Name of this node, which may be an empty string.
    %REVIEW% Document when empty string is possible...
    %REVIEW-COMMENT% It should never be empty, should it?</div>
<a id="L601" name="L601"></a> 601   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17984.html" title="Multiple referred from 297 places.">getNodeName</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L602" name="L602"></a> 602   <em class="brace">{</em>
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604     <strong class="reserved">int</strong> expandedTypeID = <a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(nodeHandle);
<a id="L605" name="L605"></a> 605     <em class="comment">// If just testing nonzero, no need to shift...</em>
<a id="L606" name="L606"></a> 606     <strong class="reserved">int</strong> namespaceID = m_expandedNameTable.<a href="../S/5887.html#L331" title="Defined at 331 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getNamespaceID</a>(expandedTypeID);
<a id="L607" name="L607"></a> 607 
<a id="L608" name="L608"></a> 608     <strong class="reserved">if</strong> (0 == namespaceID)
<a id="L609" name="L609"></a> 609     <em class="brace">{</em>
<a id="L610" name="L610"></a> 610       <em class="comment">// Don't retrieve name until/unless needed</em>
<a id="L611" name="L611"></a> 611       <em class="comment">// String name = m_expandedNameTable.getLocalName(expandedTypeID);</em>
<a id="L612" name="L612"></a> 612       <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/20988.html" title="Multiple defined in 34 places.">getNodeType</a>(nodeHandle);
<a id="L613" name="L613"></a> 613 
<a id="L614" name="L614"></a> 614       <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE)
<a id="L615" name="L615"></a> 615       <em class="brace">{</em>
<a id="L616" name="L616"></a> 616         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(expandedTypeID))
<a id="L617" name="L617"></a> 617           <strong class="reserved">return</strong> "xmlns";
<a id="L618" name="L618"></a> 618         <strong class="reserved">else</strong>
<a id="L619" name="L619"></a> 619           <strong class="reserved">return</strong> "xmlns:" + m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(expandedTypeID);
<a id="L620" name="L620"></a> 620       <em class="brace">}</em>
<a id="L621" name="L621"></a> 621       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (0 == m_expandedNameTable.<a href="../S/5887.html#L302" title="Defined at 302 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getLocalNameID</a>(expandedTypeID))
<a id="L622" name="L622"></a> 622       <em class="brace">{</em>
<a id="L623" name="L623"></a> 623         <strong class="reserved">return</strong> m_fixednames[<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>];
<a id="L624" name="L624"></a> 624       <em class="brace">}</em>
<a id="L625" name="L625"></a> 625       <strong class="reserved">else</strong>
<a id="L626" name="L626"></a> 626         <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(expandedTypeID);
<a id="L627" name="L627"></a> 627     <em class="brace">}</em>
<a id="L628" name="L628"></a> 628     <strong class="reserved">else</strong>
<a id="L629" name="L629"></a> 629     <em class="brace">{</em>
<a id="L630" name="L630"></a> 630       <strong class="reserved">int</strong> qnameIndex = m_dataOrQName.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle));
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632       <strong class="reserved">if</strong> (qnameIndex &lt; 0)
<a id="L633" name="L633"></a> 633       <em class="brace">{</em>
<a id="L634" name="L634"></a> 634         qnameIndex = -qnameIndex;
<a id="L635" name="L635"></a> 635         qnameIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(qnameIndex);
<a id="L636" name="L636"></a> 636       <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638       <strong class="reserved">return</strong> m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(qnameIndex);
<a id="L639" name="L639"></a> 639     <em class="brace">}</em>
<a id="L640" name="L640"></a> 640   <em class="brace">}</em>
<a id="L641" name="L641"></a> 641 
<div class="comment">
    Given a node handle, return the XPath node name.  This should be
    the name as described by the XPath data model, NOT the DOM-style
    name.
    @param nodeHandle the id of the node.
    @return String Name of this node, which may be an empty string.</div>
<a id="L650" name="L650"></a> 650   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17985.html" title="Multiple referred from 11 places.">getNodeNameX</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L651" name="L651"></a> 651   <em class="brace">{</em>
<a id="L652" name="L652"></a> 652 
<a id="L653" name="L653"></a> 653     <strong class="reserved">int</strong> expandedTypeID = <a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(nodeHandle);
<a id="L654" name="L654"></a> 654     <strong class="reserved">int</strong> namespaceID = m_expandedNameTable.<a href="../S/5887.html#L331" title="Defined at 331 in src/com/sun/org/apache/xml/internal/dtm/ref/ExpandedNameTable.java.">getNamespaceID</a>(expandedTypeID);
<a id="L655" name="L655"></a> 655 
<a id="L656" name="L656"></a> 656     <strong class="reserved">if</strong> (0 == namespaceID)
<a id="L657" name="L657"></a> 657     <em class="brace">{</em>
<a id="L658" name="L658"></a> 658       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(expandedTypeID);
<a id="L659" name="L659"></a> 659 
<a id="L660" name="L660"></a> 660       <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> == <strong class="reserved">null</strong>)
<a id="L661" name="L661"></a> 661         <strong class="reserved">return</strong> "";
<a id="L662" name="L662"></a> 662       <strong class="reserved">else</strong>
<a id="L663" name="L663"></a> 663         <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L664" name="L664"></a> 664     <em class="brace">}</em>
<a id="L665" name="L665"></a> 665     <strong class="reserved">else</strong>
<a id="L666" name="L666"></a> 666     <em class="brace">{</em>
<a id="L667" name="L667"></a> 667       <strong class="reserved">int</strong> qnameIndex = m_dataOrQName.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle));
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669       <strong class="reserved">if</strong> (qnameIndex &lt; 0)
<a id="L670" name="L670"></a> 670       <em class="brace">{</em>
<a id="L671" name="L671"></a> 671         qnameIndex = -qnameIndex;
<a id="L672" name="L672"></a> 672         qnameIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(qnameIndex);
<a id="L673" name="L673"></a> 673       <em class="brace">}</em>
<a id="L674" name="L674"></a> 674 
<a id="L675" name="L675"></a> 675       <strong class="reserved">return</strong> m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(qnameIndex);
<a id="L676" name="L676"></a> 676     <em class="brace">}</em>
<a id="L677" name="L677"></a> 677   <em class="brace">}</em>
<a id="L678" name="L678"></a> 678 
<div class="comment">
        5. [specified] A flag indicating whether this attribute was actually
           specified in the start-tag of its element, or was defaulted from the
           DTD.
    @param attributeHandle Must be a valid handle to an attribute node.
    @return <code>true</code> if the attribute was specified;
            <code>false</code> if it was defaulted.</div>
<a id="L688" name="L688"></a> 688   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21189.html" title="Multiple referred from 5 places.">isAttributeSpecified</a>(<strong class="reserved">int</strong> attributeHandle)
<a id="L689" name="L689"></a> 689   <em class="brace">{</em>
<a id="L690" name="L690"></a> 690 
<a id="L691" name="L691"></a> 691     <em class="comment">// I'm not sure if I want to do anything with this...</em>
<a id="L692" name="L692"></a> 692     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;  <em class="comment">// ??</em>
<a id="L693" name="L693"></a> 693   <em class="brace">}</em>
<a id="L694" name="L694"></a> 694 
<div class="comment">
      A document type declaration information item has the following properties:
        1. [system identifier] The system identifier of the external subset, if
           it exists. Otherwise this property has no value.
    @return the system identifier String object, or null if there is none.</div>
<a id="L703" name="L703"></a> 703   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16231.html" title="Multiple referred from 2 places.">getDocumentTypeDeclarationSystemIdentifier</a>()
<a id="L704" name="L704"></a> 704   <em class="brace">{</em>
<a id="L705" name="L705"></a> 705 
<div class="comment">
     /** @todo: implement this com.sun.org.apache.xml.internal.dtm.DTMDefaultBase abstract method */</div>
<a id="L707" name="L707"></a> 707     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"Not yet supported!");</em>
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L710" name="L710"></a> 710   <em class="brace">}</em>
<a id="L711" name="L711"></a> 711 
<div class="comment">
    Get the next node identity value in the list, and call the iterator
    if it hasn't been added yet.
    @param identity The node identity (index).
    @return identity+1, or DTM.NULL.</div>
<a id="L719" name="L719"></a> 719   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/17935.html" title="Multiple referred from 9 places.">getNextNodeIdentity</a>(<strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>)
<a id="L720" name="L720"></a> 720   <em class="brace">{</em>
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722     <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> += 1;
<a id="L723" name="L723"></a> 723 
<a id="L724" name="L724"></a> 724     <strong class="reserved">while</strong> (<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &gt;= m_size)
<a id="L725" name="L725"></a> 725     <em class="brace">{</em>
<a id="L726" name="L726"></a> 726       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_incrementalSAXSource)
<a id="L727" name="L727"></a> 727         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L728" name="L728"></a> 728 
<a id="L729" name="L729"></a> 729       <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L730" name="L730"></a> 730     <em class="brace">}</em>
<a id="L731" name="L731"></a> 731 
<a id="L732" name="L732"></a> 732     <strong class="reserved">return</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L733" name="L733"></a> 733   <em class="brace">}</em>
<a id="L734" name="L734"></a> 734 
<div class="comment">
    Directly create SAX parser events from a subtree.
    @param nodeHandle The node ID.
    @param ch A non-null reference to a ContentHandler.
    @throws org.xml.sax.SAXException</div>
<a id="L743" name="L743"></a> 743   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13328.html" title="Multiple referred from 2 places.">dispatchToEvents</a>(<strong class="reserved">int</strong> nodeHandle, org.xml.sax.<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> ch)
<a id="L744" name="L744"></a> 744           <strong class="reserved">throws</strong> org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L745" name="L745"></a> 745   <em class="brace">{</em>
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747     <a href="../S/5893.html#L41" title="Defined at 41 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">DTMTreeWalker</a> treeWalker = m_walker;
<a id="L748" name="L748"></a> 748     <a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> prevCH = treeWalker.<a href="../S/5893.html#L65" title="Defined at 65 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">getcontentHandler</a>();
<a id="L749" name="L749"></a> 749 
<a id="L750" name="L750"></a> 750     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != prevCH)
<a id="L751" name="L751"></a> 751     <em class="brace">{</em>
<a id="L752" name="L752"></a> 752       treeWalker = <strong class="reserved">new</strong> <a href="../S/5893.html#L41" title="Defined at 41 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">DTMTreeWalker</a>();
<a id="L753" name="L753"></a> 753     <em class="brace">}</em>
<a id="L754" name="L754"></a> 754 
<a id="L755" name="L755"></a> 755     treeWalker.<a href="../S/5893.html#L75" title="Defined at 75 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">setcontentHandler</a>(ch);
<a id="L756" name="L756"></a> 756     treeWalker.<a href="../S/5893.html#L55" title="Defined at 55 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">setDTM</a>(<strong class="reserved">this</strong>);
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758     <strong class="reserved">try</strong>
<a id="L759" name="L759"></a> 759     <em class="brace">{</em>
<a id="L760" name="L760"></a> 760       treeWalker.<a href="../D/35644.html" title="Multiple defined in 11 places.">traverse</a>(nodeHandle);
<a id="L761" name="L761"></a> 761     <em class="brace">}</em>
<a id="L762" name="L762"></a> 762     <strong class="reserved">finally</strong>
<a id="L763" name="L763"></a> 763     <em class="brace">{</em>
<a id="L764" name="L764"></a> 764       treeWalker.<a href="../S/5893.html#L75" title="Defined at 75 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMTreeWalker.java.">setcontentHandler</a>(<strong class="reserved">null</strong>);
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766   <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<div class="comment">
    Get the number of nodes that have been added.
    @return The number of that are currently in the tree.</div>
<a id="L773" name="L773"></a> 773   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18057.html" title="Multiple referred from 3 places.">getNumberOfNodes</a>()
<a id="L774" name="L774"></a> 774   <em class="brace">{</em>
<a id="L775" name="L775"></a> 775     <strong class="reserved">return</strong> m_size;
<a id="L776" name="L776"></a> 776   <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<div class="comment">
    This method should try and build one or more nodes in the table.
    @return The true if a next node is found or false if
            there are no more nodes.</div>
<a id="L784" name="L784"></a> 784   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>()
<a id="L785" name="L785"></a> 785   <em class="brace">{</em>
<a id="L786" name="L786"></a> 786 
<a id="L787" name="L787"></a> 787     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_incrementalSAXSource)
<a id="L788" name="L788"></a> 788       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L789" name="L789"></a> 789 
<a id="L790" name="L790"></a> 790     <strong class="reserved">if</strong> (m_endDocumentOccured)
<a id="L791" name="L791"></a> 791     <em class="brace">{</em>
<a id="L792" name="L792"></a> 792       <a href="../D/12832.html" title="Multiple defined in 2 places.">clearCoRoutine</a>();
<a id="L793" name="L793"></a> 793 
<a id="L794" name="L794"></a> 794       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L795" name="L795"></a> 795     <em class="brace">}</em>
<a id="L796" name="L796"></a> 796 
<a id="L797" name="L797"></a> 797     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> gotMore = m_incrementalSAXSource.<a href="../D/14824.html" title="Multiple defined in 3 places.">deliverMoreNodes</a>(<strong class="reserved">true</strong>);
<a id="L798" name="L798"></a> 798 
<a id="L799" name="L799"></a> 799     <em class="comment">// gotMore may be a Boolean (TRUE if still parsing, FALSE if</em>
<a id="L800" name="L800"></a> 800     <em class="comment">// EOF) or an exception if IncrementalSAXSource malfunctioned</em>
<a id="L801" name="L801"></a> 801     <em class="comment">// (code error rather than user error).</em>
<a id="L802" name="L802"></a> 802     <em class="comment">//</em>
<a id="L803" name="L803"></a> 803     <em class="comment">// %REVIEW% Currently the ErrorHandlers sketched herein are</em>
<a id="L804" name="L804"></a> 804     <em class="comment">// no-ops, so I'm going to initially leave this also as a</em>
<a id="L805" name="L805"></a> 805     <em class="comment">// no-op.</em>
<a id="L806" name="L806"></a> 806     <strong class="reserved">if</strong> (!(gotMore <strong class="reserved">instanceof</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>))
<a id="L807" name="L807"></a> 807     <em class="brace">{</em>
<a id="L808" name="L808"></a> 808       <strong class="reserved">if</strong>(gotMore <strong class="reserved">instanceof</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>)
<a id="L809" name="L809"></a> 809       <em class="brace">{</em>
<a id="L810" name="L810"></a> 810         <strong class="reserved">throw</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>)gotMore;
<a id="L811" name="L811"></a> 811       <em class="brace">}</em>
<a id="L812" name="L812"></a> 812       <strong class="reserved">else</strong> <strong class="reserved">if</strong>(gotMore <strong class="reserved">instanceof</strong> <a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a>)
<a id="L813" name="L813"></a> 813       <em class="brace">{</em>
<a id="L814" name="L814"></a> 814         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>((<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a>)gotMore);
<a id="L815" name="L815"></a> 815       <em class="brace">}</em>
<a id="L816" name="L816"></a> 816       <em class="comment">// for now...</em>
<a id="L817" name="L817"></a> 817       <a href="../D/12832.html" title="Multiple defined in 2 places.">clearCoRoutine</a>();
<a id="L818" name="L818"></a> 818 
<a id="L819" name="L819"></a> 819       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L820" name="L820"></a> 820 
<a id="L821" name="L821"></a> 821       <em class="comment">// %TBD%</em>
<a id="L822" name="L822"></a> 822     <em class="brace">}</em>
<a id="L823" name="L823"></a> 823 
<a id="L824" name="L824"></a> 824     <strong class="reserved">if</strong> (gotMore != <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE)
<a id="L825" name="L825"></a> 825     <em class="brace">{</em>
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827       <em class="comment">// EOF reached without satisfying the request</em>
<a id="L828" name="L828"></a> 828       <a href="../D/12832.html" title="Multiple defined in 2 places.">clearCoRoutine</a>();  <em class="comment">// Drop connection, stop trying</em>
<a id="L829" name="L829"></a> 829 
<a id="L830" name="L830"></a> 830       <em class="comment">// %TBD% deregister as its listener?</em>
<a id="L831" name="L831"></a> 831     <em class="brace">}</em>
<a id="L832" name="L832"></a> 832 
<a id="L833" name="L833"></a> 833     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L834" name="L834"></a> 834   <em class="brace">}</em>
<a id="L835" name="L835"></a> 835 
<div class="comment">
    Bottleneck determination of text type.
    @param type oneof DTM.XXX_NODE.
    @return true if this is a text or cdata section.</div>
<a id="L843" name="L843"></a> 843   <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/22104.html" title="Multiple referred from 6 places.">isTextType</a>(<strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L844" name="L844"></a> 844   <em class="brace">{</em>
<a id="L845" name="L845"></a> 845     <strong class="reserved">return</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> || <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.CDATA_SECTION_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L846" name="L846"></a> 846   <em class="brace">}</em>
<a id="L847" name="L847"></a> 847 
<a id="L848" name="L848"></a> 848 <em class="comment">//    /**</em>
<a id="L849" name="L849"></a> 849 <em class="comment">//     * Ensure that the size of the information arrays can hold another entry</em>
<a id="L850" name="L850"></a> 850 <em class="comment">//     * at the given index.</em>
<a id="L851" name="L851"></a> 851 <em class="comment">//     *</em>
<a id="L852" name="L852"></a> 852 <em class="comment">//     * @param on exit from this function, the information arrays sizes must be</em>
<a id="L853" name="L853"></a> 853 <em class="comment">//     * at least index+1.</em>
<a id="L854" name="L854"></a> 854 <em class="comment">//     *</em>
<a id="L855" name="L855"></a> 855 <em class="comment">//     * NEEDSDOC @param index</em>
<a id="L856" name="L856"></a> 856 <em class="comment">//     */</em>
<a id="L857" name="L857"></a> 857 <em class="comment">//    protected void ensureSize(int index)</em>
<a id="L858" name="L858"></a> 858 <em class="comment">//    {</em>
<a id="L859" name="L859"></a> 859 <em class="comment">//          // dataOrQName is an SuballocatedIntVector and hence self-sizing.</em>
<a id="L860" name="L860"></a> 860 <em class="comment">//          // But DTMDefaultBase may need fixup.</em>
<a id="L861" name="L861"></a> 861 <em class="comment">//        super.ensureSize(index);</em>
<a id="L862" name="L862"></a> 862 <em class="comment">//    }</em>
<a id="L863" name="L863"></a> 863 
<div class="comment">
    Construct the node map from the node.
    @param type raw type ID, one of DTM.XXX_NODE.
    @param expandedTypeID The expended type ID.
    @param parentIndex The current parent index.
    @param previousSibling The previous sibling index.
    @param dataOrPrefix index into m_data table, or string handle.
    @param canHaveFirstChild true if the node can have a first child, false
                             if it is atomic.
    @return The index identity of the node that was added.</div>
<a id="L877" name="L877"></a> 877   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9871.html" title="Multiple referred from 39 places.">addNode</a>(<strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">int</strong> expandedTypeID,
<a id="L878" name="L878"></a> 878                         <strong class="reserved">int</strong> parentIndex, <strong class="reserved">int</strong> <a href="../D/29608.html" title="Multiple defined in 4 places.">previousSibling</a>,
<a id="L879" name="L879"></a> 879                         <strong class="reserved">int</strong> dataOrPrefix, <strong class="reserved">boolean</strong> canHaveFirstChild)
<a id="L880" name="L880"></a> 880   <em class="brace">{</em>
<a id="L881" name="L881"></a> 881     <em class="comment">// Common to all nodes:</em>
<a id="L882" name="L882"></a> 882     <strong class="reserved">int</strong> nodeIndex = m_size++;
<a id="L883" name="L883"></a> 883 
<a id="L884" name="L884"></a> 884     <em class="comment">// Have we overflowed a DTM Identity's addressing range?</em>
<a id="L885" name="L885"></a> 885     <strong class="reserved">if</strong>(m_dtmIdent.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == (nodeIndex&gt;&gt;&gt;<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS))
<a id="L886" name="L886"></a> 886     <em class="brace">{</em>
<a id="L887" name="L887"></a> 887       <a href="../S/5892.html#L934" title="Defined at 934 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">addNewDTMID</a>(nodeIndex);
<a id="L888" name="L888"></a> 888     <em class="brace">}</em>
<a id="L889" name="L889"></a> 889 
<a id="L890" name="L890"></a> 890     m_firstch.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(canHaveFirstChild ? NOTPROCESSED : <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>);
<a id="L891" name="L891"></a> 891     m_nextsib.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(NOTPROCESSED);
<a id="L892" name="L892"></a> 892     m_parent.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(parentIndex);
<a id="L893" name="L893"></a> 893     m_exptype.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(expandedTypeID);
<a id="L894" name="L894"></a> 894     m_dataOrQName.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(dataOrPrefix);
<a id="L895" name="L895"></a> 895 
<a id="L896" name="L896"></a> 896     <strong class="reserved">if</strong> (m_prevsib != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L897" name="L897"></a> 897       m_prevsib.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/29608.html" title="Multiple defined in 4 places.">previousSibling</a>);
<a id="L898" name="L898"></a> 898     <em class="brace">}</em>
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/29608.html" title="Multiple defined in 4 places.">previousSibling</a>) <em class="brace">{</em>
<a id="L901" name="L901"></a> 901       m_nextsib.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(nodeIndex,<a href="../D/29608.html" title="Multiple defined in 4 places.">previousSibling</a>);
<a id="L902" name="L902"></a> 902     <em class="brace">}</em>
<a id="L903" name="L903"></a> 903 
<a id="L904" name="L904"></a> 904     <strong class="reserved">if</strong> (m_locator != <strong class="reserved">null</strong> &amp;&amp; m_useSourceLocationProperty) <em class="brace">{</em>
<a id="L905" name="L905"></a> 905       <a href="../S/5892.html#L983" title="Defined at 983 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">setSourceLocation</a>();
<a id="L906" name="L906"></a> 906     <em class="brace">}</em>
<a id="L907" name="L907"></a> 907 
<a id="L908" name="L908"></a> 908     <em class="comment">// Note that nextSibling is not processed until charactersFlush()</em>
<a id="L909" name="L909"></a> 909     <em class="comment">// is called, to handle successive characters() events.</em>
<a id="L910" name="L910"></a> 910 
<a id="L911" name="L911"></a> 911     <em class="comment">// Special handling by type: Declare namespaces, attach first child</em>
<a id="L912" name="L912"></a> 912     <strong class="reserved">switch</strong>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L913" name="L913"></a> 913     <em class="brace">{</em>
<a id="L914" name="L914"></a> 914     <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE:
<a id="L915" name="L915"></a> 915       <a href="../S/5889.html#L1262" title="Defined at 1262 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">declareNamespaceInContext</a>(parentIndex,nodeIndex);
<a id="L916" name="L916"></a> 916       <strong class="reserved">break</strong>;
<a id="L917" name="L917"></a> 917     <strong class="reserved">case</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE:
<a id="L918" name="L918"></a> 918       <strong class="reserved">break</strong>;
<a id="L919" name="L919"></a> 919     <strong class="reserved">default</strong>:
<a id="L920" name="L920"></a> 920       <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == <a href="../D/29608.html" title="Multiple defined in 4 places.">previousSibling</a> &amp;&amp; <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != parentIndex) <em class="brace">{</em>
<a id="L921" name="L921"></a> 921         m_firstch.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(nodeIndex,parentIndex);
<a id="L922" name="L922"></a> 922       <em class="brace">}</em>
<a id="L923" name="L923"></a> 923       <strong class="reserved">break</strong>;
<a id="L924" name="L924"></a> 924     <em class="brace">}</em>
<a id="L925" name="L925"></a> 925 
<a id="L926" name="L926"></a> 926     <strong class="reserved">return</strong> nodeIndex;
<a id="L927" name="L927"></a> 927   <em class="brace">}</em>
<a id="L928" name="L928"></a> 928 
<div class="comment">
    Get a new DTM ID beginning at the specified node index.
    @param  nodeIndex The node identity at which the new DTM ID will begin
    addressing.</div>
<a id="L934" name="L934"></a> 934   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/9865.html" title="Multiple referred from 2 places.">addNewDTMID</a>(<strong class="reserved">int</strong> nodeIndex) <em class="brace">{</em>
<a id="L935" name="L935"></a> 935     <strong class="reserved">try</strong>
<a id="L936" name="L936"></a> 936     <em class="brace">{</em>
<a id="L937" name="L937"></a> 937       <strong class="reserved">if</strong>(m_mgr==<strong class="reserved">null</strong>)
<a id="L938" name="L938"></a> 938         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a>();
<a id="L939" name="L939"></a> 939 
<a id="L940" name="L940"></a> 940                               <em class="comment">// Handle as Extended Addressing</em>
<a id="L941" name="L941"></a> 941       <a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a> mgrD=(<a href="../S/5906.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">DTMManagerDefault</a>)m_mgr;
<a id="L942" name="L942"></a> 942       <strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>=mgrD.<a href="../S/5906.html#L187" title="Defined at 187 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">getFirstFreeDTMID</a>();
<a id="L943" name="L943"></a> 943       mgrD.<a href="../D/10743.html" title="Multiple defined in 2 places.">addDTM</a>(<strong class="reserved">this</strong>,<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>,nodeIndex);
<a id="L944" name="L944"></a> 944       m_dtmIdent.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>&lt;&lt;<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS);
<a id="L945" name="L945"></a> 945     <em class="brace">}</em>
<a id="L946" name="L946"></a> 946     <strong class="reserved">catch</strong>(<a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a> e)
<a id="L947" name="L947"></a> 947     <em class="brace">{</em>
<a id="L948" name="L948"></a> 948       <em class="comment">// %REVIEW% Wrong error message, but I've been told we're trying</em>
<a id="L949" name="L949"></a> 949       <em class="comment">// not to add messages right not for I18N reasons.</em>
<a id="L950" name="L950"></a> 950       <em class="comment">// %REVIEW% Should this be a Fatal Error?</em>
<a id="L951" name="L951"></a> 951       <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_NO_DTMIDS_AVAIL, <strong class="reserved">null</strong>));<em class="comment">//"No more DTM IDs are available";</em>
<a id="L952" name="L952"></a> 952     <em class="brace">}</em>
<a id="L953" name="L953"></a> 953   <em class="brace">}</em>
<a id="L954" name="L954"></a> 954 
<div class="comment">
     Migrate a DTM built with an old DTMManager to a new DTMManager.
     After the migration, the new DTMManager will treat the DTM as
     one that is built by itself.
     This is used to support DTM sharing between multiple transformations.
     @param manager the DTMManager</div>
<a id="L962" name="L962"></a> 962   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23285.html" title="Multiple referred from 4 places.">migrateTo</a>(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> manager) <em class="brace">{</em>
<a id="L963" name="L963"></a> 963     <strong class="reserved">super</strong>.<a href="../D/27695.html" title="Multiple defined in 6 places.">migrateTo</a>(manager);
<a id="L964" name="L964"></a> 964 
<a id="L965" name="L965"></a> 965     <em class="comment">// We have to reset the information in m_dtmIdent and</em>
<a id="L966" name="L966"></a> 966     <em class="comment">// register the DTM with the new manager.</em>
<a id="L967" name="L967"></a> 967     <strong class="reserved">int</strong> numDTMs = m_dtmIdent.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L968" name="L968"></a> 968     <strong class="reserved">int</strong> dtmId = m_mgrDefault.<a href="../S/5906.html#L187" title="Defined at 187 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMManagerDefault.java.">getFirstFreeDTMID</a>();
<a id="L969" name="L969"></a> 969     <strong class="reserved">int</strong> nodeIndex = 0;
<a id="L970" name="L970"></a> 970     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; numDTMs; i++)
<a id="L971" name="L971"></a> 971     <em class="brace">{</em>
<a id="L972" name="L972"></a> 972       m_dtmIdent.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(dtmId &lt;&lt; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS, i);
<a id="L973" name="L973"></a> 973       m_mgrDefault.<a href="../D/10743.html" title="Multiple defined in 2 places.">addDTM</a>(<strong class="reserved">this</strong>, dtmId, nodeIndex);
<a id="L974" name="L974"></a> 974       dtmId++;
<a id="L975" name="L975"></a> 975       nodeIndex += (1 &lt;&lt; <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a>.IDENT_DTM_NODE_BITS);
<a id="L976" name="L976"></a> 976     <em class="brace">}</em>
<a id="L977" name="L977"></a> 977   <em class="brace">}</em>
<a id="L978" name="L978"></a> 978 
<div class="comment">
    Store the source location of the current node.  This method must be called
    as every node is added to the DTM or for no node.</div>
<a id="L983" name="L983"></a> 983   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/28201.html" title="Multiple referred from 2 places.">setSourceLocation</a>() <em class="brace">{</em>
<a id="L984" name="L984"></a> 984     m_sourceSystemId.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(m_locator.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>());
<a id="L985" name="L985"></a> 985     m_sourceLine.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(m_locator.<a href="../D/20122.html" title="Multiple defined in 41 places.">getLineNumber</a>());
<a id="L986" name="L986"></a> 986     m_sourceColumn.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(m_locator.<a href="../D/17813.html" title="Multiple defined in 33 places.">getColumnNumber</a>());
<a id="L987" name="L987"></a> 987 
<a id="L988" name="L988"></a> 988     <em class="comment">//%REVIEW% %BUG% Prevent this from arising in the first place</em>
<a id="L989" name="L989"></a> 989     <em class="comment">// by not allowing the enabling conditions to change after we start</em>
<a id="L990" name="L990"></a> 990     <em class="comment">// building the document.</em>
<a id="L991" name="L991"></a> 991     <strong class="reserved">if</strong> (m_sourceSystemId.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() != m_size) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = "CODING ERROR in Source Location: " + m_size + " != "
<a id="L993" name="L993"></a> 993                     + m_sourceSystemId.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L994" name="L994"></a> 994         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L995" name="L995"></a> 995         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L996" name="L996"></a> 996     <em class="brace">}</em>
<a id="L997" name="L997"></a> 997   <em class="brace">}</em>
<a id="L998" name="L998"></a> 998 
<div class="comment">
    Given a node handle, return its node value. This is mostly
    as defined by the DOM, but may ignore some conveniences.
    <p>
    @param nodeHandle The node id.
    @return String Value of this node, or null if not
    meaningful for this node type.</p></div>
<a id="L1008" name="L1008"></a>1008   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17992.html" title="Multiple referred from 231 places.">getNodeValue</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1009" name="L1009"></a>1009   <em class="brace">{</em>
<a id="L1010" name="L1010"></a>1010 
<a id="L1011" name="L1011"></a>1011     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1012" name="L1012"></a>1012     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1013" name="L1013"></a>1013 
<a id="L1014" name="L1014"></a>1014     <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L1015" name="L1015"></a>1015     <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016       <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1017" name="L1017"></a>1017       <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L1018" name="L1018"></a>1018       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1019" name="L1019"></a>1019 
<a id="L1020" name="L1020"></a>1020       <em class="comment">// %OPT% We should cache this, I guess.</em>
<a id="L1021" name="L1021"></a>1021       <strong class="reserved">return</strong> m_chars.<a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1022" name="L1022"></a>1022     <em class="brace">}</em>
<a id="L1023" name="L1023"></a>1023     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> || <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_FRAGMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>
<a id="L1024" name="L1024"></a>1024              || <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1025" name="L1025"></a>1025     <em class="brace">{</em>
<a id="L1026" name="L1026"></a>1026       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1027" name="L1027"></a>1027     <em class="brace">}</em>
<a id="L1028" name="L1028"></a>1028     <strong class="reserved">else</strong>
<a id="L1029" name="L1029"></a>1029     <em class="brace">{</em>
<a id="L1030" name="L1030"></a>1030       <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1031" name="L1031"></a>1031 
<a id="L1032" name="L1032"></a>1032       <strong class="reserved">if</strong> (dataIndex &lt; 0)
<a id="L1033" name="L1033"></a>1033       <em class="brace">{</em>
<a id="L1034" name="L1034"></a>1034         dataIndex = -dataIndex;
<a id="L1035" name="L1035"></a>1035         dataIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1036" name="L1036"></a>1036       <em class="brace">}</em>
<a id="L1037" name="L1037"></a>1037 
<a id="L1038" name="L1038"></a>1038       <strong class="reserved">return</strong> m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(dataIndex);
<a id="L1039" name="L1039"></a>1039     <em class="brace">}</em>
<a id="L1040" name="L1040"></a>1040   <em class="brace">}</em>
<a id="L1041" name="L1041"></a>1041 
<div class="comment">
    Given a node handle, return its XPath-style localname.
    (As defined in Namespaces, this is the portion of the name after any
    colon character).
    @param nodeHandle the id of the node.
    @return String Local name of this node.</div>
<a id="L1050" name="L1050"></a>1050   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17419.html" title="Multiple referred from 323 places.">getLocalName</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1051" name="L1051"></a>1051   <em class="brace">{</em>
<a id="L1052" name="L1052"></a>1052     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle)));
<a id="L1053" name="L1053"></a>1053   <em class="brace">}</em>
<a id="L1054" name="L1054"></a>1054 
<div class="comment">
    The getUnparsedEntityURI function returns the URI of the unparsed
    entity with the specified name in the same document as the context
    node (see [3.3 Unparsed Entities]). It returns the empty string if
    there is no such entity.
    <p>
    XML processors may choose to use the System Identifier (if one
    is provided) to resolve the entity, rather than the URI in the
    Public Identifier. The details are dependent on the processor, and
    we would have to support some form of plug-in resolver to handle
    this properly. Currently, we simply return the System Identifier if
    present, and hope that it a usable URI or that our caller can
    map it to one.
    TODO: Resolve Public Identifiers... or consider changing function name.
    </p><p>
    If we find a relative URI
    reference, XML expects it to be resolved in terms of the base URI
    of the document. The DOM doesn't do that for us, and it isn't
    entirely clear whether that should be done here; currently that's
    pushed up to a higher level of our application. (Note that DOM Level
    1 didn't store the document's base URI.)
    TODO: Consider resolving Relative URIs.
    </p><p>
    (The DOM's statement that "An XML processor may choose to
    completely expand entities before the structure model is passed
    to the DOM" refers only to parsed entities, not unparsed, and hence
    doesn't affect this function.)
    @param name A string containing the Entity Name of the unparsed
    entity.
    @return String containing the URI of the Unparsed Entity, or an
    empty string if no such entity exists.</p></div>
<a id="L1089" name="L1089"></a>1089   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19689.html" title="Multiple referred from 6 places.">getUnparsedEntityURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L1090" name="L1090"></a>1090   <em class="brace">{</em>
<a id="L1091" name="L1091"></a>1091 
<a id="L1092" name="L1092"></a>1092     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> url = "";
<a id="L1093" name="L1093"></a>1093 
<a id="L1094" name="L1094"></a>1094     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_entities)
<a id="L1095" name="L1095"></a>1095       <strong class="reserved">return</strong> url;
<a id="L1096" name="L1096"></a>1096 
<a id="L1097" name="L1097"></a>1097     <strong class="reserved">int</strong> n = m_entities.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1098" name="L1098"></a>1098 
<a id="L1099" name="L1099"></a>1099     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i += ENTITY_FIELDS_PER)
<a id="L1100" name="L1100"></a>1100     <em class="brace">{</em>
<a id="L1101" name="L1101"></a>1101       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ename = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_entities.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i + ENTITY_FIELD_NAME);
<a id="L1102" name="L1102"></a>1102 
<a id="L1103" name="L1103"></a>1103       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != ename &amp;&amp; ename.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>))
<a id="L1104" name="L1104"></a>1104       <em class="brace">{</em>
<a id="L1105" name="L1105"></a>1105         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nname = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_entities.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i
<a id="L1106" name="L1106"></a>1106                          + ENTITY_FIELD_NOTATIONNAME);
<a id="L1107" name="L1107"></a>1107 
<a id="L1108" name="L1108"></a>1108         <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != nname)
<a id="L1109" name="L1109"></a>1109         <em class="brace">{</em>
<a id="L1110" name="L1110"></a>1110 
<a id="L1111" name="L1111"></a>1111           <em class="comment">// The draft says: "The XSLT processor may use the public</em>
<a id="L1112" name="L1112"></a>1112           <em class="comment">// identifier to generate a URI for the entity instead of the URI</em>
<a id="L1113" name="L1113"></a>1113           <em class="comment">// specified in the system identifier. If the XSLT processor does</em>
<a id="L1114" name="L1114"></a>1114           <em class="comment">// not use the public identifier to generate the URI, it must use</em>
<a id="L1115" name="L1115"></a>1115           <em class="comment">// the system identifier; if the system identifier is a relative</em>
<a id="L1116" name="L1116"></a>1116           <em class="comment">// URI, it must be resolved into an absolute URI using the URI of</em>
<a id="L1117" name="L1117"></a>1117           <em class="comment">// the resource containing the entity declaration as the base</em>
<a id="L1118" name="L1118"></a>1118           <em class="comment">// URI [RFC2396]."</em>
<a id="L1119" name="L1119"></a>1119           <em class="comment">// So I'm falling a bit short here.</em>
<a id="L1120" name="L1120"></a>1120           url = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_entities.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i + ENTITY_FIELD_SYSTEMID);
<a id="L1121" name="L1121"></a>1121 
<a id="L1122" name="L1122"></a>1122           <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == url)
<a id="L1123" name="L1123"></a>1123           <em class="brace">{</em>
<a id="L1124" name="L1124"></a>1124             url = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_entities.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i + ENTITY_FIELD_PUBLICID);
<a id="L1125" name="L1125"></a>1125           <em class="brace">}</em>
<a id="L1126" name="L1126"></a>1126         <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127 
<a id="L1128" name="L1128"></a>1128         <strong class="reserved">break</strong>;
<a id="L1129" name="L1129"></a>1129       <em class="brace">}</em>
<a id="L1130" name="L1130"></a>1130     <em class="brace">}</em>
<a id="L1131" name="L1131"></a>1131 
<a id="L1132" name="L1132"></a>1132     <strong class="reserved">return</strong> url;
<a id="L1133" name="L1133"></a>1133   <em class="brace">}</em>
<a id="L1134" name="L1134"></a>1134 
<div class="comment">
    Given a namespace handle, return the prefix that the namespace decl is
    mapping.
    Given a node handle, return the prefix used to map to the namespace.
    <p> %REVIEW% Are you sure you want "" for no prefix?  </p>
    <p> %REVIEW-COMMENT% I think so... not totally sure. -sb  </p>
    @param nodeHandle the id of the node.
    @return String prefix of this node's name, or "" if no explicit
    namespace prefix was given.</div>
<a id="L1147" name="L1147"></a>1147   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1148" name="L1148"></a>1148   <em class="brace">{</em>
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1151" name="L1151"></a>1151     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1152" name="L1152"></a>1152 
<a id="L1153" name="L1153"></a>1153     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1154" name="L1154"></a>1154     <em class="brace">{</em>
<a id="L1155" name="L1155"></a>1155       <strong class="reserved">int</strong> prefixIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1156" name="L1156"></a>1156 
<a id="L1157" name="L1157"></a>1157       <strong class="reserved">if</strong> (0 == prefixIndex)
<a id="L1158" name="L1158"></a>1158         <strong class="reserved">return</strong> "";
<a id="L1159" name="L1159"></a>1159       <strong class="reserved">else</strong>
<a id="L1160" name="L1160"></a>1160       <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname = m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(prefixIndex);
<a id="L1162" name="L1162"></a>1162 
<a id="L1163" name="L1163"></a>1163         <strong class="reserved">return</strong> <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(qname, <strong class="reserved">null</strong>);
<a id="L1164" name="L1164"></a>1164       <em class="brace">}</em>
<a id="L1165" name="L1165"></a>1165     <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE == <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)
<a id="L1167" name="L1167"></a>1167     <em class="brace">{</em>
<a id="L1168" name="L1168"></a>1168       <strong class="reserved">int</strong> prefixIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1169" name="L1169"></a>1169 
<a id="L1170" name="L1170"></a>1170       <strong class="reserved">if</strong> (prefixIndex &lt; 0)
<a id="L1171" name="L1171"></a>1171       <em class="brace">{</em>
<a id="L1172" name="L1172"></a>1172         prefixIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(-prefixIndex);
<a id="L1173" name="L1173"></a>1173 
<a id="L1174" name="L1174"></a>1174         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname = m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(prefixIndex);
<a id="L1175" name="L1175"></a>1175 
<a id="L1176" name="L1176"></a>1176         <strong class="reserved">return</strong> <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(qname, <strong class="reserved">null</strong>);
<a id="L1177" name="L1177"></a>1177       <em class="brace">}</em>
<a id="L1178" name="L1178"></a>1178     <em class="brace">}</em>
<a id="L1179" name="L1179"></a>1179 
<a id="L1180" name="L1180"></a>1180     <strong class="reserved">return</strong> "";
<a id="L1181" name="L1181"></a>1181   <em class="brace">}</em>
<a id="L1182" name="L1182"></a>1182 
<div class="comment">
    Retrieves an attribute node by by qualified name and namespace URI.
    @param nodeHandle int Handle of the node upon which to look up this attribute..
    @param namespaceURI The namespace URI of the attribute to
      retrieve, or null.
    @param name The local name of the attribute to
      retrieve.
    @return The attribute node handle with the specified name (
      <code>nodeName</code>) or <code>DTM.NULL</code> if there is no such
      attribute.</div>
<a id="L1195" name="L1195"></a>1195   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15154.html" title="Multiple referred from 32 places.">getAttributeNode</a>(<strong class="reserved">int</strong> nodeHandle, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>,
<a id="L1196" name="L1196"></a>1196                               <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L1197" name="L1197"></a>1197   <em class="brace">{</em>
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> attrH = <a href="../D/19083.html" title="Multiple defined in 6 places.">getFirstAttribute</a>(nodeHandle); <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != attrH;
<a id="L1200" name="L1200"></a>1200             attrH = <a href="../D/20886.html" title="Multiple defined in 6 places.">getNextAttribute</a>(attrH))
<a id="L1201" name="L1201"></a>1201     <em class="brace">{</em>
<a id="L1202" name="L1202"></a>1202       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrNS = <a href="../D/20828.html" title="Multiple defined in 47 places.">getNamespaceURI</a>(attrH);
<a id="L1203" name="L1203"></a>1203       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrName = <a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(attrH);
<a id="L1204" name="L1204"></a>1204       <strong class="reserved">boolean</strong> nsMatch = <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a> == attrNS
<a id="L1205" name="L1205"></a>1205                         || (<a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a> != <strong class="reserved">null</strong>
<a id="L1206" name="L1206"></a>1206                             &amp;&amp; <a href="../S/3963.html#L58" title="Defined at 58 in src/javax/xml/bind/annotation/XmlNs.java.">namespaceURI</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(attrNS));
<a id="L1207" name="L1207"></a>1207 
<a id="L1208" name="L1208"></a>1208       <strong class="reserved">if</strong> (nsMatch &amp;&amp; <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(attrName))
<a id="L1209" name="L1209"></a>1209         <strong class="reserved">return</strong> attrH;
<a id="L1210" name="L1210"></a>1210     <em class="brace">}</em>
<a id="L1211" name="L1211"></a>1211 
<a id="L1212" name="L1212"></a>1212     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1213" name="L1213"></a>1213   <em class="brace">}</em>
<a id="L1214" name="L1214"></a>1214 
<div class="comment">
    Return the public identifier of the external subset,
    normalized as described in 4.2.2 External Entities [XML]. If there is
    no external subset or if it has no public identifier, this property
    has no value.
    @return the public identifier String object, or null if there is none.</div>
<a id="L1223" name="L1223"></a>1223   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16230.html" title="Multiple referred from 2 places.">getDocumentTypeDeclarationPublicIdentifier</a>()
<a id="L1224" name="L1224"></a>1224   <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225 
<div class="comment">
     /** @todo: implement this com.sun.org.apache.xml.internal.dtm.DTMDefaultBase abstract method */</div>
<a id="L1227" name="L1227"></a>1227     <a href="../D/15699.html" title="Multiple defined in 51 places.">error</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_METHOD_NOT_SUPPORTED, <strong class="reserved">null</strong>));<em class="comment">//"Not yet supported!");</em>
<a id="L1228" name="L1228"></a>1228 
<a id="L1229" name="L1229"></a>1229     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1230" name="L1230"></a>1230   <em class="brace">}</em>
<a id="L1231" name="L1231"></a>1231 
<div class="comment">
    Given a node handle, return its DOM-style namespace URI
    (As defined in Namespaces, this is the declared URI which this node's
    prefix -- or default in lieu thereof -- was mapped to.)
    <p>%REVIEW% Null or ""? -sb</p>
    @param nodeHandle the id of the node.
    @return String URI value of this node's namespace, or null if no
    namespace was resolved.</div>
<a id="L1243" name="L1243"></a>1243   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17864.html" title="Multiple referred from 185 places.">getNamespaceURI</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1244" name="L1244"></a>1244   <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245 
<a id="L1246" name="L1246"></a>1246     <strong class="reserved">return</strong> m_expandedNameTable.<a href="../D/20808.html" title="Multiple defined in 28 places.">getNamespace</a>(<a href="../D/10424.html" title="Multiple defined in 2 places.">_exptype</a>(<a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle)));
<a id="L1247" name="L1247"></a>1247   <em class="brace">}</em>
<a id="L1248" name="L1248"></a>1248 
<div class="comment">
    Get the string-value of a node as a String object
    (see http://www.w3.org/TR/xpath#data-model
    for the definition of a node's string-value).
    @param nodeHandle The node ID.
    @return A string object that represents the string-value of the given node.</div>
<a id="L1258" name="L1258"></a>1258   <strong class="reserved">public</strong> <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../R/19227.html" title="Multiple referred from 38 places.">getStringValue</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1259" name="L1259"></a>1259   <em class="brace">{</em>
<a id="L1260" name="L1260"></a>1260     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1261" name="L1261"></a>1261     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1262" name="L1262"></a>1262     <strong class="reserved">if</strong>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>==<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="comment">// Separate lines because I wanted to breakpoint it</em>
<a id="L1263" name="L1263"></a>1263       <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1264" name="L1264"></a>1264     <strong class="reserved">else</strong>
<a id="L1265" name="L1265"></a>1265       <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>= <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1266" name="L1266"></a>1266 
<a id="L1267" name="L1267"></a>1267     <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L1268" name="L1268"></a>1268     <em class="brace">{</em>
<a id="L1269" name="L1269"></a>1269       <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1270" name="L1270"></a>1270       <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L1271" name="L1271"></a>1271       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1272" name="L1272"></a>1272 
<a id="L1273" name="L1273"></a>1273       <strong class="reserved">return</strong> m_xstrf.<a href="../D/28130.html" title="Multiple defined in 9 places.">newstr</a>(m_chars, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1274" name="L1274"></a>1274     <em class="brace">}</em>
<a id="L1275" name="L1275"></a>1275     <strong class="reserved">else</strong>
<a id="L1276" name="L1276"></a>1276     <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277       <strong class="reserved">int</strong> <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a> = <a href="../S/5889.html#L524" title="Defined at 524 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_firstch</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1278" name="L1278"></a>1278 
<a id="L1279" name="L1279"></a>1279       <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>)
<a id="L1280" name="L1280"></a>1280       <em class="brace">{</em>
<a id="L1281" name="L1281"></a>1281         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = -1;
<a id="L1282" name="L1282"></a>1282         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = 0;
<a id="L1283" name="L1283"></a>1283         <strong class="reserved">int</strong> <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a> = <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L1284" name="L1284"></a>1284 
<a id="L1285" name="L1285"></a>1285         <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/16394.html" title="Multiple defined in 2 places.">firstChild</a>;
<a id="L1286" name="L1286"></a>1286 
<a id="L1287" name="L1287"></a>1287         <strong class="reserved">do</strong> <em class="brace">{</em>
<a id="L1288" name="L1288"></a>1288           <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1289" name="L1289"></a>1289 
<a id="L1290" name="L1290"></a>1290           <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L1291" name="L1291"></a>1291           <em class="brace">{</em>
<a id="L1292" name="L1292"></a>1292             <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1293" name="L1293"></a>1293 
<a id="L1294" name="L1294"></a>1294             <strong class="reserved">if</strong> (-1 == <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>)
<a id="L1295" name="L1295"></a>1295             <em class="brace">{</em>
<a id="L1296" name="L1296"></a>1296               <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L1297" name="L1297"></a>1297             <em class="brace">}</em>
<a id="L1298" name="L1298"></a>1298 
<a id="L1299" name="L1299"></a>1299             <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> += m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1300" name="L1300"></a>1300           <em class="brace">}</em>
<a id="L1301" name="L1301"></a>1301 
<a id="L1302" name="L1302"></a>1302           <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../D/20923.html" title="Multiple defined in 3 places.">getNextNodeIdentity</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1303" name="L1303"></a>1303         <em class="brace">}</em> <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> &amp;&amp; (<a href="../S/5889.html#L616" title="Defined at 616 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">_parent</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>) &gt;= <a href="../D/34804.html" title="Multiple defined in 6 places.">startNode</a>));
<a id="L1304" name="L1304"></a>1304 
<a id="L1305" name="L1305"></a>1305         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0)
<a id="L1306" name="L1306"></a>1306         <em class="brace">{</em>
<a id="L1307" name="L1307"></a>1307           <strong class="reserved">return</strong> m_xstrf.<a href="../D/28130.html" title="Multiple defined in 9 places.">newstr</a>(m_chars, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1308" name="L1308"></a>1308         <em class="brace">}</em>
<a id="L1309" name="L1309"></a>1309       <em class="brace">}</em>
<a id="L1310" name="L1310"></a>1310       <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE)
<a id="L1311" name="L1311"></a>1311       <em class="brace">{</em>
<a id="L1312" name="L1312"></a>1312         <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1313" name="L1313"></a>1313 
<a id="L1314" name="L1314"></a>1314         <strong class="reserved">if</strong> (dataIndex &lt; 0)
<a id="L1315" name="L1315"></a>1315         <em class="brace">{</em>
<a id="L1316" name="L1316"></a>1316           dataIndex = -dataIndex;
<a id="L1317" name="L1317"></a>1317           dataIndex = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1318" name="L1318"></a>1318         <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319         <strong class="reserved">return</strong> m_xstrf.<a href="../D/28130.html" title="Multiple defined in 9 places.">newstr</a>(m_valuesOrPrefixes.<a href="../D/24479.html" title="Multiple defined in 3 places.">indexToString</a>(dataIndex));
<a id="L1320" name="L1320"></a>1320       <em class="brace">}</em>
<a id="L1321" name="L1321"></a>1321     <em class="brace">}</em>
<a id="L1322" name="L1322"></a>1322 
<a id="L1323" name="L1323"></a>1323     <strong class="reserved">return</strong> m_xstrf.<a href="../D/15369.html" title="Multiple defined in 3 places.">emptystr</a>();
<a id="L1324" name="L1324"></a>1324   <em class="brace">}</em>
<a id="L1325" name="L1325"></a>1325 
<div class="comment">
    Determine if the string-value of a node is whitespace
    @param nodeHandle The node Handle.
    @return Return true if the given node is whitespace.</div>
<a id="L1333" name="L1333"></a>1333   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22238.html" title="Multiple referred from 54 places.">isWhitespace</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L1334" name="L1334"></a>1334   <em class="brace">{</em>
<a id="L1335" name="L1335"></a>1335     <strong class="reserved">int</strong> <a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(nodeHandle);
<a id="L1336" name="L1336"></a>1336     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1337" name="L1337"></a>1337     <strong class="reserved">if</strong>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>==<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>) <em class="comment">// Separate lines because I wanted to breakpoint it</em>
<a id="L1338" name="L1338"></a>1338       <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1339" name="L1339"></a>1339     <strong class="reserved">else</strong>
<a id="L1340" name="L1340"></a>1340       <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>= <a href="../D/10508.html" title="Multiple defined in 126 places.">_type</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1341" name="L1341"></a>1341 
<a id="L1342" name="L1342"></a>1342     <strong class="reserved">if</strong> (<a href="../S/5892.html#L843" title="Defined at 843 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">isTextType</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>))
<a id="L1343" name="L1343"></a>1343     <em class="brace">{</em>
<a id="L1344" name="L1344"></a>1344       <strong class="reserved">int</strong> dataIndex = <a href="../S/5892.html#L311" title="Defined at 311 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">_dataOrQName</a>(<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>);
<a id="L1345" name="L1345"></a>1345       <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex);
<a id="L1346" name="L1346"></a>1346       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = m_data.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(dataIndex + 1);
<a id="L1347" name="L1347"></a>1347 
<a id="L1348" name="L1348"></a>1348       <strong class="reserved">return</strong> m_chars.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1349" name="L1349"></a>1349     <em class="brace">}</em>
<a id="L1350" name="L1350"></a>1350     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1351" name="L1351"></a>1351   <em class="brace">}</em>
<a id="L1352" name="L1352"></a>1352 
<div class="comment">
    Returns the <code>Element</code> whose <code>ID</code> is given by
    <code>elementId</code>. If no such element exists, returns
    <code>DTM.NULL</code>. Behavior is not defined if more than one element
    has this <code>ID</code>. Attributes (including those
    with the name "ID") are not of type ID unless so defined by DTD/Schema
    information available to the DTM implementation.
    Implementations that do not know whether attributes are of type ID or
    not are expected to return <code>DTM.NULL</code>.
    <p>%REVIEW% Presumably IDs are still scoped to a single document,
    and this operation searches only within a single document, right?
    Wouldn't want collisions between DTMs in the same process.</p>
    @param elementId The unique <code>id</code> value for an element.
    @return The handle of the matching element.</div>
<a id="L1370" name="L1370"></a>1370   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16314.html" title="Multiple referred from 11 places.">getElementById</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> elementId)
<a id="L1371" name="L1371"></a>1371   <em class="brace">{</em>
<a id="L1372" name="L1372"></a>1372 
<a id="L1373" name="L1373"></a>1373     <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> intObj;
<a id="L1374" name="L1374"></a>1374     <strong class="reserved">boolean</strong> isMore = <strong class="reserved">true</strong>;
<a id="L1375" name="L1375"></a>1375 
<a id="L1376" name="L1376"></a>1376     <strong class="reserved">do</strong>
<a id="L1377" name="L1377"></a>1377     <em class="brace">{</em>
<a id="L1378" name="L1378"></a>1378       intObj = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) m_idAttributes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(elementId);
<a id="L1379" name="L1379"></a>1379 
<a id="L1380" name="L1380"></a>1380       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != intObj)
<a id="L1381" name="L1381"></a>1381         <strong class="reserved">return</strong> <a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(intObj.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>());
<a id="L1382" name="L1382"></a>1382 
<a id="L1383" name="L1383"></a>1383       <strong class="reserved">if</strong> (!isMore || m_endDocumentOccured)
<a id="L1384" name="L1384"></a>1384         <strong class="reserved">break</strong>;
<a id="L1385" name="L1385"></a>1385 
<a id="L1386" name="L1386"></a>1386       isMore = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L1387" name="L1387"></a>1387     <em class="brace">}</em>
<a id="L1388" name="L1388"></a>1388     <strong class="reserved">while</strong> (<strong class="reserved">null</strong> == intObj);
<a id="L1389" name="L1389"></a>1389 
<a id="L1390" name="L1390"></a>1390     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1391" name="L1391"></a>1391   <em class="brace">}</em>
<a id="L1392" name="L1392"></a>1392 
<div class="comment">
    Get a prefix either from the qname or from the uri mapping, or just make
    one up!
    @param qname The qualified name, which may be null.
    @param uri The namespace URI, which may be null.
    @return The prefix if there is one, or null.</div>
<a id="L1402" name="L1402"></a>1402   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18418.html" title="Multiple referred from 112 places.">getPrefix</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L1403" name="L1403"></a>1403   <em class="brace">{</em>
<a id="L1404" name="L1404"></a>1404 
<a id="L1405" name="L1405"></a>1405     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L1406" name="L1406"></a>1406     <strong class="reserved">int</strong> uriIndex = -1;
<a id="L1407" name="L1407"></a>1407 
<a id="L1408" name="L1408"></a>1408     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != uri &amp;&amp; uri.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0)
<a id="L1409" name="L1409"></a>1409     <em class="brace">{</em>
<a id="L1410" name="L1410"></a>1410 
<a id="L1411" name="L1411"></a>1411       <strong class="reserved">do</strong>
<a id="L1412" name="L1412"></a>1412       <em class="brace">{</em>
<a id="L1413" name="L1413"></a>1413         uriIndex = m_prefixMappings.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(uri, ++uriIndex);
<a id="L1414" name="L1414"></a>1414       <em class="brace">}</em> <strong class="reserved">while</strong> ( (uriIndex &amp; 0x01) == 0);
<a id="L1415" name="L1415"></a>1415 
<a id="L1416" name="L1416"></a>1416       <strong class="reserved">if</strong> (uriIndex &gt;= 0)
<a id="L1417" name="L1417"></a>1417       <em class="brace">{</em>
<a id="L1418" name="L1418"></a>1418         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_prefixMappings.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(uriIndex - 1);
<a id="L1419" name="L1419"></a>1419       <em class="brace">}</em>
<a id="L1420" name="L1420"></a>1420       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != qname)
<a id="L1421" name="L1421"></a>1421       <em class="brace">{</em>
<a id="L1422" name="L1422"></a>1422         <strong class="reserved">int</strong> indexOfNSSep = qname.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L1423" name="L1423"></a>1423 
<a id="L1424" name="L1424"></a>1424         <strong class="reserved">if</strong> (qname.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xmlns"))
<a id="L1425" name="L1425"></a>1425           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = "";
<a id="L1426" name="L1426"></a>1426         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (qname.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("xmlns:"))
<a id="L1427" name="L1427"></a>1427           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = qname.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(indexOfNSSep + 1);
<a id="L1428" name="L1428"></a>1428         <strong class="reserved">else</strong>
<a id="L1429" name="L1429"></a>1429           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (indexOfNSSep &gt; 0)
<a id="L1430" name="L1430"></a>1430                    ? qname.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, indexOfNSSep) : <strong class="reserved">null</strong>;
<a id="L1431" name="L1431"></a>1431       <em class="brace">}</em>
<a id="L1432" name="L1432"></a>1432       <strong class="reserved">else</strong>
<a id="L1433" name="L1433"></a>1433       <em class="brace">{</em>
<a id="L1434" name="L1434"></a>1434         <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">null</strong>;
<a id="L1435" name="L1435"></a>1435       <em class="brace">}</em>
<a id="L1436" name="L1436"></a>1436     <em class="brace">}</em>
<a id="L1437" name="L1437"></a>1437     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != qname)
<a id="L1438" name="L1438"></a>1438     <em class="brace">{</em>
<a id="L1439" name="L1439"></a>1439       <strong class="reserved">int</strong> indexOfNSSep = qname.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L1440" name="L1440"></a>1440 
<a id="L1441" name="L1441"></a>1441       <strong class="reserved">if</strong> (indexOfNSSep &gt; 0)
<a id="L1442" name="L1442"></a>1442       <em class="brace">{</em>
<a id="L1443" name="L1443"></a>1443         <strong class="reserved">if</strong> (qname.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("xmlns:"))
<a id="L1444" name="L1444"></a>1444           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = qname.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(indexOfNSSep + 1);
<a id="L1445" name="L1445"></a>1445         <strong class="reserved">else</strong>
<a id="L1446" name="L1446"></a>1446           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = qname.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, indexOfNSSep);
<a id="L1447" name="L1447"></a>1447       <em class="brace">}</em>
<a id="L1448" name="L1448"></a>1448       <strong class="reserved">else</strong>
<a id="L1449" name="L1449"></a>1449       <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450         <strong class="reserved">if</strong> (qname.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xmlns"))
<a id="L1451" name="L1451"></a>1451           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = "";
<a id="L1452" name="L1452"></a>1452         <strong class="reserved">else</strong>
<a id="L1453" name="L1453"></a>1453           <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">null</strong>;
<a id="L1454" name="L1454"></a>1454       <em class="brace">}</em>
<a id="L1455" name="L1455"></a>1455     <em class="brace">}</em>
<a id="L1456" name="L1456"></a>1456     <strong class="reserved">else</strong>
<a id="L1457" name="L1457"></a>1457     <em class="brace">{</em>
<a id="L1458" name="L1458"></a>1458       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">null</strong>;
<a id="L1459" name="L1459"></a>1459     <em class="brace">}</em>
<a id="L1460" name="L1460"></a>1460 
<a id="L1461" name="L1461"></a>1461     <strong class="reserved">return</strong> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L1462" name="L1462"></a>1462   <em class="brace">}</em>
<a id="L1463" name="L1463"></a>1463 
<div class="comment">
    Get a prefix either from the uri mapping, or just make
    one up!
    @param uri The namespace URI, which may be null.
    @return The prefix if there is one, or null.</div>
<a id="L1472" name="L1472"></a>1472   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16969.html" title="Multiple referred from 4 places.">getIdForNamespace</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L1473" name="L1473"></a>1473   <em class="brace">{</em>
<a id="L1474" name="L1474"></a>1474 
<a id="L1475" name="L1475"></a>1475      <strong class="reserved">return</strong> m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(uri);
<a id="L1476" name="L1476"></a>1476 
<a id="L1477" name="L1477"></a>1477   <em class="brace">}</em>
<a id="L1478" name="L1478"></a>1478 
<div class="comment">
    Get a prefix either from the qname or from the uri mapping, or just make
    one up!
    @return The prefix if there is one, or null.</div>
<a id="L1485" name="L1485"></a>1485   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/17864.html" title="Multiple referred from 185 places.">getNamespaceURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1486" name="L1486"></a>1486   <em class="brace">{</em>
<a id="L1487" name="L1487"></a>1487 
<a id="L1488" name="L1488"></a>1488     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri = "";
<a id="L1489" name="L1489"></a>1489     <strong class="reserved">int</strong> prefixIndex = m_contextIndexes.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>() - 1 ;
<a id="L1490" name="L1490"></a>1490 
<a id="L1491" name="L1491"></a>1491     <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1492" name="L1492"></a>1492       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = "";
<a id="L1493" name="L1493"></a>1493 
<a id="L1494" name="L1494"></a>1494       <strong class="reserved">do</strong>
<a id="L1495" name="L1495"></a>1495       <em class="brace">{</em>
<a id="L1496" name="L1496"></a>1496         prefixIndex = m_prefixMappings.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, ++prefixIndex);
<a id="L1497" name="L1497"></a>1497       <em class="brace">}</em> <strong class="reserved">while</strong> ( (prefixIndex &gt;= 0) &amp;&amp; (prefixIndex &amp; 0x01) == 0x01);
<a id="L1498" name="L1498"></a>1498 
<a id="L1499" name="L1499"></a>1499       <strong class="reserved">if</strong> (prefixIndex &gt; -1)
<a id="L1500" name="L1500"></a>1500       <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501         uri = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_prefixMappings.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(prefixIndex + 1);
<a id="L1502" name="L1502"></a>1502       <em class="brace">}</em>
<a id="L1503" name="L1503"></a>1503 
<a id="L1504" name="L1504"></a>1504 
<a id="L1505" name="L1505"></a>1505     <strong class="reserved">return</strong> uri;
<a id="L1506" name="L1506"></a>1506   <em class="brace">}</em>
<a id="L1507" name="L1507"></a>1507 
<div class="comment">
    Set an ID string to node association in the ID table.
    @param id The ID string.
    @param elem The associated element handle.</div>
<a id="L1514" name="L1514"></a>1514   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27517.html" title="Multiple referred from 3 places.">setIDAttribute</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <strong class="reserved">int</strong> elem)
<a id="L1515" name="L1515"></a>1515   <em class="brace">{</em>
<a id="L1516" name="L1516"></a>1516     m_idAttributes.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(elem));
<a id="L1517" name="L1517"></a>1517   <em class="brace">}</em>
<a id="L1518" name="L1518"></a>1518 
<div class="comment">
    Check whether accumulated text should be stripped; if not,
    append the appropriate flavor of text/cdata node.</div>
<a id="L1523" name="L1523"></a>1523   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11057.html" title="Multiple referred from 10 places.">charactersFlush</a>()
<a id="L1524" name="L1524"></a>1524   <em class="brace">{</em>
<a id="L1525" name="L1525"></a>1525 
<a id="L1526" name="L1526"></a>1526     <strong class="reserved">if</strong> (m_textPendingStart &gt;= 0)  <em class="comment">// -1 indicates no-text-in-progress</em>
<a id="L1527" name="L1527"></a>1527     <em class="brace">{</em>
<a id="L1528" name="L1528"></a>1528       <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = m_chars.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() - m_textPendingStart;
<a id="L1529" name="L1529"></a>1529       <strong class="reserved">boolean</strong> doStrip = <strong class="reserved">false</strong>;
<a id="L1530" name="L1530"></a>1530 
<a id="L1531" name="L1531"></a>1531       <strong class="reserved">if</strong> (<a href="../D/22489.html" title="Multiple defined in 2 places.">getShouldStripWhitespace</a>())
<a id="L1532" name="L1532"></a>1532       <em class="brace">{</em>
<a id="L1533" name="L1533"></a>1533         doStrip = m_chars.<a href="../D/26507.html" title="Multiple defined in 18 places.">isWhitespace</a>(m_textPendingStart, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1534" name="L1534"></a>1534       <em class="brace">}</em>
<a id="L1535" name="L1535"></a>1535 
<a id="L1536" name="L1536"></a>1536       <strong class="reserved">if</strong> (doStrip) <em class="brace">{</em>
<a id="L1537" name="L1537"></a>1537         m_chars.<a href="../D/33077.html" title="Multiple defined in 10 places.">setLength</a>(m_textPendingStart);  <em class="comment">// Discard accumulated text</em>
<a id="L1538" name="L1538"></a>1538       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1539" name="L1539"></a>1539         <em class="comment">// Guard against characters/ignorableWhitespace events that</em>
<a id="L1540" name="L1540"></a>1540         <em class="comment">// contained no characters.  They should not result in a node.</em>
<a id="L1541" name="L1541"></a>1541         <strong class="reserved">if</strong> (<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0) <em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542           <strong class="reserved">int</strong> exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE);
<a id="L1543" name="L1543"></a>1543           <strong class="reserved">int</strong> dataIndex = m_data.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1544" name="L1544"></a>1544 
<a id="L1545" name="L1545"></a>1545           m_previous = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(m_coalescedTextType, exName,
<a id="L1546" name="L1546"></a>1546                                m_parents.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(), m_previous, dataIndex, <strong class="reserved">false</strong>);
<a id="L1547" name="L1547"></a>1547 
<a id="L1548" name="L1548"></a>1548           m_data.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(m_textPendingStart);
<a id="L1549" name="L1549"></a>1549           m_data.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1550" name="L1550"></a>1550         <em class="brace">}</em>
<a id="L1551" name="L1551"></a>1551       <em class="brace">}</em>
<a id="L1552" name="L1552"></a>1552 
<a id="L1553" name="L1553"></a>1553       <em class="comment">// Reset for next text block</em>
<a id="L1554" name="L1554"></a>1554       m_textPendingStart = -1;
<a id="L1555" name="L1555"></a>1555       m_textType = m_coalescedTextType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE;
<a id="L1556" name="L1556"></a>1556     <em class="brace">}</em>
<a id="L1557" name="L1557"></a>1557   <em class="brace">}</em>
<a id="L1558" name="L1558"></a>1558 
<a id="L1559" name="L1559"></a>1559   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1560" name="L1560"></a>1560   <em class="comment">// Implementation of the EntityResolver interface.</em>
<a id="L1561" name="L1561"></a>1561   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1562" name="L1562"></a>1562 
<div class="comment">
    Resolve an external entity.
    <p>Always return null, so that the parser will use the system
    identifier provided in the XML document.  This method implements
    the SAX default behaviour: application writers can override it
    in a subclass to do special translations such as catalog lookups
    or URI redirection.</p>
    @param publicId The public identifer, or null if none is
                    available.
    @param systemId The system identifier provided in the XML
                    document.
    @return The new input source, or null to require the
            default behaviour.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.EntityResolver#resolveEntity
    @throws SAXException</div>
<a id="L1584" name="L1584"></a>1584   <strong class="reserved">public</strong> <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../R/26336.html" title="Multiple referred from 17 places.">resolveEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1585" name="L1585"></a>1585           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1586" name="L1586"></a>1586   <em class="brace">{</em>
<a id="L1587" name="L1587"></a>1587     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1588" name="L1588"></a>1588   <em class="brace">}</em>
<a id="L1589" name="L1589"></a>1589 
<a id="L1590" name="L1590"></a>1590   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1591" name="L1591"></a>1591   <em class="comment">// Implementation of DTDHandler interface.</em>
<a id="L1592" name="L1592"></a>1592   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1593" name="L1593"></a>1593 
<div class="comment">
    Receive notification of a notation declaration.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass if they wish to keep track of the notations
    declared in a document.</p>
    @param name The notation name.
    @param publicId The notation public identifier, or null if not
                    available.
    @param systemId The notation system identifier.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.DTDHandler#notationDecl
    @throws SAXException</div>
<a id="L1611" name="L1611"></a>1611   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23809.html" title="Multiple referred from 25 places.">notationDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1612" name="L1612"></a>1612           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1613" name="L1613"></a>1613   <em class="brace">{</em>
<a id="L1614" name="L1614"></a>1614 
<a id="L1615" name="L1615"></a>1615     <em class="comment">// no op</em>
<a id="L1616" name="L1616"></a>1616   <em class="brace">}</em>
<a id="L1617" name="L1617"></a>1617 
<div class="comment">
    Receive notification of an unparsed entity declaration.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to keep track of the unparsed entities
    declared in a document.</p>
    @param name The entity name.
    @param publicId The entity public identifier, or null if not
                    available.
    @param systemId The entity system identifier.
    @param notationName The name of the associated notation.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.DTDHandler#unparsedEntityDecl
    @throws SAXException</div>
<a id="L1636" name="L1636"></a>1636   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29743.html" title="Multiple referred from 14 places.">unparsedEntityDecl</a>(
<a id="L1637" name="L1637"></a>1637           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> notationName)
<a id="L1638" name="L1638"></a>1638             <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1639" name="L1639"></a>1639   <em class="brace">{</em>
<a id="L1640" name="L1640"></a>1640 
<a id="L1641" name="L1641"></a>1641     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_entities)
<a id="L1642" name="L1642"></a>1642     <em class="brace">{</em>
<a id="L1643" name="L1643"></a>1643       m_entities = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1644" name="L1644"></a>1644     <em class="brace">}</em>
<a id="L1645" name="L1645"></a>1645 
<a id="L1646" name="L1646"></a>1646     <strong class="reserved">try</strong>
<a id="L1647" name="L1647"></a>1647     <em class="brace">{</em>
<a id="L1648" name="L1648"></a>1648       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../D/8695.html" title="Multiple defined in 2 places.">SystemIDResolver</a>.<a href="../D/16701.html" title="Multiple defined in 4 places.">getAbsoluteURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>,
<a id="L1649" name="L1649"></a>1649                                                  <a href="../D/18556.html" title="Multiple defined in 5 places.">getDocumentBaseURI</a>());
<a id="L1650" name="L1650"></a>1650     <em class="brace">}</em>
<a id="L1651" name="L1651"></a>1651     <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e)
<a id="L1652" name="L1652"></a>1652     <em class="brace">{</em>
<a id="L1653" name="L1653"></a>1653       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> org.xml.sax.<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(e);
<a id="L1654" name="L1654"></a>1654     <em class="brace">}</em>
<a id="L1655" name="L1655"></a>1655 
<a id="L1656" name="L1656"></a>1656     <em class="comment">//  private static final int ENTITY_FIELD_PUBLICID = 0;</em>
<a id="L1657" name="L1657"></a>1657     m_entities.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1658" name="L1658"></a>1658 
<a id="L1659" name="L1659"></a>1659     <em class="comment">//  private static final int ENTITY_FIELD_SYSTEMID = 1;</em>
<a id="L1660" name="L1660"></a>1660     m_entities.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1661" name="L1661"></a>1661 
<a id="L1662" name="L1662"></a>1662     <em class="comment">//  private static final int ENTITY_FIELD_NOTATIONNAME = 2;</em>
<a id="L1663" name="L1663"></a>1663     m_entities.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(notationName);
<a id="L1664" name="L1664"></a>1664 
<a id="L1665" name="L1665"></a>1665     <em class="comment">//  private static final int ENTITY_FIELD_NAME = 3;</em>
<a id="L1666" name="L1666"></a>1666     m_entities.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L1667" name="L1667"></a>1667   <em class="brace">}</em>
<a id="L1668" name="L1668"></a>1668 
<a id="L1669" name="L1669"></a>1669   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1670" name="L1670"></a>1670   <em class="comment">// Implementation of ContentHandler interface.</em>
<a id="L1671" name="L1671"></a>1671   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L1672" name="L1672"></a>1672 
<div class="comment">
    Receive a Locator object for document events.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass if they wish to store the locator for use
    with other document events.</p>
    @param locator A locator for all SAX document events.
    @see org.xml.sax.ContentHandler#setDocumentLocator
    @see org.xml.sax.Locator</div>
<a id="L1684" name="L1684"></a>1684   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27270.html" title="Multiple referred from 45 places.">setDocumentLocator</a>(<a href="../D/5191.html" title="Multiple defined in 3 places.">Locator</a> locator)
<a id="L1685" name="L1685"></a>1685   <em class="brace">{</em>
<a id="L1686" name="L1686"></a>1686     m_locator = locator;
<a id="L1687" name="L1687"></a>1687     m_systemId = locator.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>();
<a id="L1688" name="L1688"></a>1688   <em class="brace">}</em>
<a id="L1689" name="L1689"></a>1689 
<div class="comment">
    Receive notification of the beginning of the document.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#startDocument</div>
<a id="L1697" name="L1697"></a>1697   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28800.html" title="Multiple referred from 67 places.">startDocument</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1698" name="L1698"></a>1698   <em class="brace">{</em>
<a id="L1699" name="L1699"></a>1699     <strong class="reserved">if</strong> (DEBUG)
<a id="L1700" name="L1700"></a>1700       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("startDocument");
<a id="L1701" name="L1701"></a>1701 
<a id="L1702" name="L1702"></a>1702 
<a id="L1703" name="L1703"></a>1703     <strong class="reserved">int</strong> doc = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE,
<a id="L1704" name="L1704"></a>1704                       m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.DOCUMENT_NODE),
<a id="L1705" name="L1705"></a>1705                       <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>, <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>, 0, <strong class="reserved">true</strong>);
<a id="L1706" name="L1706"></a>1706 
<a id="L1707" name="L1707"></a>1707     m_parents.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(doc);
<a id="L1708" name="L1708"></a>1708     m_previous = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1709" name="L1709"></a>1709 
<a id="L1710" name="L1710"></a>1710     m_contextIndexes.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(m_prefixMappings.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());  <em class="comment">// for the next element.</em>
<a id="L1711" name="L1711"></a>1711   <em class="brace">}</em>
<a id="L1712" name="L1712"></a>1712 
<div class="comment">
    Receive notification of the end of the document.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#endDocument</div>
<a id="L1720" name="L1720"></a>1720   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13761.html" title="Multiple referred from 58 places.">endDocument</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1721" name="L1721"></a>1721   <em class="brace">{</em>
<a id="L1722" name="L1722"></a>1722     <strong class="reserved">if</strong> (DEBUG)
<a id="L1723" name="L1723"></a>1723       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("endDocument");
<a id="L1724" name="L1724"></a>1724 
<a id="L1725" name="L1725"></a>1725                 <a href="../D/12340.html" title="Multiple defined in 2 places.">charactersFlush</a>();
<a id="L1726" name="L1726"></a>1726 
<a id="L1727" name="L1727"></a>1727     m_nextsib.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,0);
<a id="L1728" name="L1728"></a>1728 
<a id="L1729" name="L1729"></a>1729     <strong class="reserved">if</strong> (m_firstch.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(0) == NOTPROCESSED)
<a id="L1730" name="L1730"></a>1730       m_firstch.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,0);
<a id="L1731" name="L1731"></a>1731 
<a id="L1732" name="L1732"></a>1732     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != m_previous)
<a id="L1733" name="L1733"></a>1733       m_nextsib.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,m_previous);
<a id="L1734" name="L1734"></a>1734 
<a id="L1735" name="L1735"></a>1735     m_parents = <strong class="reserved">null</strong>;
<a id="L1736" name="L1736"></a>1736     m_prefixMappings = <strong class="reserved">null</strong>;
<a id="L1737" name="L1737"></a>1737     m_contextIndexes = <strong class="reserved">null</strong>;
<a id="L1738" name="L1738"></a>1738 
<a id="L1739" name="L1739"></a>1739     m_endDocumentOccured = <strong class="reserved">true</strong>;
<a id="L1740" name="L1740"></a>1740 
<a id="L1741" name="L1741"></a>1741     <em class="comment">// Bugzilla 4858: throw away m_locator. we cache m_systemId</em>
<a id="L1742" name="L1742"></a>1742     m_locator = <strong class="reserved">null</strong>;
<a id="L1743" name="L1743"></a>1743   <em class="brace">}</em>
<a id="L1744" name="L1744"></a>1744 
<div class="comment">
    Receive notification of the start of a Namespace mapping.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions at the start of
    each Namespace prefix scope (such as storing the prefix mapping).</p>
    @param prefix The Namespace prefix being declared.
    @param uri The Namespace URI mapped to the prefix.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#startPrefixMapping</div>
<a id="L1758" name="L1758"></a>1758   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28846.html" title="Multiple referred from 46 places.">startPrefixMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L1759" name="L1759"></a>1759           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1760" name="L1760"></a>1760   <em class="brace">{</em>
<a id="L1761" name="L1761"></a>1761 
<a id="L1762" name="L1762"></a>1762     <strong class="reserved">if</strong> (DEBUG)
<a id="L1763" name="L1763"></a>1763       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("startPrefixMapping: prefix: " + <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> + ", uri: "
<a id="L1764" name="L1764"></a>1764                          + uri);
<a id="L1765" name="L1765"></a>1765 
<a id="L1766" name="L1766"></a>1766     <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1767" name="L1767"></a>1767       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = "";
<a id="L1768" name="L1768"></a>1768     m_prefixMappings.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);  <em class="comment">// JDK 1.1.x compat -sc</em>
<a id="L1769" name="L1769"></a>1769     m_prefixMappings.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(uri);  <em class="comment">// JDK 1.1.x compat -sc</em>
<a id="L1770" name="L1770"></a>1770   <em class="brace">}</em>
<a id="L1771" name="L1771"></a>1771 
<div class="comment">
    Receive notification of the end of a Namespace mapping.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions at the end of
    each prefix mapping.</p>
    @param prefix The Namespace prefix being declared.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#endPrefixMapping</div>
<a id="L1784" name="L1784"></a>1784   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13786.html" title="Multiple referred from 22 places.">endPrefixMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1785" name="L1785"></a>1785   <em class="brace">{</em>
<a id="L1786" name="L1786"></a>1786     <strong class="reserved">if</strong> (DEBUG)
<a id="L1787" name="L1787"></a>1787       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("endPrefixMapping: prefix: " + <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>);
<a id="L1788" name="L1788"></a>1788 
<a id="L1789" name="L1789"></a>1789     <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1790" name="L1790"></a>1790       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = "";
<a id="L1791" name="L1791"></a>1791 
<a id="L1792" name="L1792"></a>1792     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = m_contextIndexes.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>() - 1;
<a id="L1793" name="L1793"></a>1793 
<a id="L1794" name="L1794"></a>1794     <strong class="reserved">do</strong>
<a id="L1795" name="L1795"></a>1795     <em class="brace">{</em>
<a id="L1796" name="L1796"></a>1796       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = m_prefixMappings.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1797" name="L1797"></a>1797     <em class="brace">}</em> <strong class="reserved">while</strong> ( (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) &amp;&amp; ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &amp; 0x01) == 0x01) );
<a id="L1798" name="L1798"></a>1798 
<a id="L1799" name="L1799"></a>1799 
<a id="L1800" name="L1800"></a>1800     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; -1)
<a id="L1801" name="L1801"></a>1801     <em class="brace">{</em>
<a id="L1802" name="L1802"></a>1802       m_prefixMappings.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>("%@$#^@#", <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1803" name="L1803"></a>1803       m_prefixMappings.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>("%@$#^@#", <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1);
<a id="L1804" name="L1804"></a>1804     <em class="brace">}</em>
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806     <em class="comment">// no op</em>
<a id="L1807" name="L1807"></a>1807   <em class="brace">}</em>
<a id="L1808" name="L1808"></a>1808 
<div class="comment">
    Check if a declaration has already been made for a given prefix.
    @param prefix non-null prefix string.
    @return true if the declaration has already been declared in the
            current context.</div>
<a id="L1817" name="L1817"></a>1817   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/12934.html" title="Multiple referred from 2 places.">declAlreadyDeclared</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1818" name="L1818"></a>1818   <em class="brace">{</em>
<a id="L1819" name="L1819"></a>1819 
<a id="L1820" name="L1820"></a>1820     <strong class="reserved">int</strong> startDecls = m_contextIndexes.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1821" name="L1821"></a>1821     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> prefixMappings = m_prefixMappings;
<a id="L1822" name="L1822"></a>1822     <strong class="reserved">int</strong> nDecls = prefixMappings.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1823" name="L1823"></a>1823 
<a id="L1824" name="L1824"></a>1824     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = startDecls; i &lt; nDecls; i += 2)
<a id="L1825" name="L1825"></a>1825     <em class="brace">{</em>
<a id="L1826" name="L1826"></a>1826       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> prefixDecl = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) prefixMappings.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1827" name="L1827"></a>1827 
<a id="L1828" name="L1828"></a>1828       <strong class="reserved">if</strong> (prefixDecl == <strong class="reserved">null</strong>)
<a id="L1829" name="L1829"></a>1829         <strong class="reserved">continue</strong>;
<a id="L1830" name="L1830"></a>1830 
<a id="L1831" name="L1831"></a>1831       <strong class="reserved">if</strong> (prefixDecl.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>))
<a id="L1832" name="L1832"></a>1832         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1833" name="L1833"></a>1833     <em class="brace">}</em>
<a id="L1834" name="L1834"></a>1834 
<a id="L1835" name="L1835"></a>1835     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1836" name="L1836"></a>1836   <em class="brace">}</em>
<a id="L1837" name="L1837"></a>1837 
<a id="L1838" name="L1838"></a>1838         <strong class="reserved">boolean</strong> m_pastFirstElement=<strong class="reserved">false</strong>;
<a id="L1839" name="L1839"></a>1839 
<div class="comment">
    Receive notification of the start of an element.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions at the start of
    each element (such as allocating a new tree node or writing
    output to a file).</p>
    @param uri The Namespace URI, or the empty string if the
           element has no Namespace URI or if Namespace
           processing is not being performed.
    @param localName The local name (without prefix), or the
           empty string if Namespace processing is not being
           performed.
    @param qName The qualified name (with prefix), or the
           empty string if qualified names are not available.
    @param attributes The specified or defaulted attributes.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#startElement</div>
<a id="L1861" name="L1861"></a>1861   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>(
<a id="L1862" name="L1862"></a>1862           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName, <a href="../D/601.html" title="Multiple defined in 4 places.">Attributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>)
<a id="L1863" name="L1863"></a>1863             <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L1864" name="L1864"></a>1864   <em class="brace">{</em>
<a id="L1865" name="L1865"></a>1865    <strong class="reserved">if</strong> (DEBUG)
<a id="L1866" name="L1866"></a>1866          <em class="brace">{</em>
<a id="L1867" name="L1867"></a>1867       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("startElement: uri: " + uri + ", localname: "
<a id="L1868" name="L1868"></a>1868                                                                                                  + <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> + ", qname: "+qName+", atts: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L1869" name="L1869"></a>1869 
<a id="L1870" name="L1870"></a>1870                         <strong class="reserved">boolean</strong> DEBUG_ATTRS=<strong class="reserved">true</strong>;
<a id="L1871" name="L1871"></a>1871                         <strong class="reserved">if</strong>(DEBUG_ATTRS &amp; <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>!=<strong class="reserved">null</strong>)
<a id="L1872" name="L1872"></a>1872                         <em class="brace">{</em>
<a id="L1873" name="L1873"></a>1873                                 <strong class="reserved">int</strong> n = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1874" name="L1874"></a>1874                                 <strong class="reserved">if</strong>(n==0)
<a id="L1875" name="L1875"></a>1875                                         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("\tempty attribute list");
<a id="L1876" name="L1876"></a>1876                                 <strong class="reserved">else</strong> <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L1877" name="L1877"></a>1877                                         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("\t attr: uri: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(i) +
<a id="L1878" name="L1878"></a>1878                                                                                                                  ", localname: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(i) +
<a id="L1879" name="L1879"></a>1879                                                                                                                  ", qname: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(i) +
<a id="L1880" name="L1880"></a>1880                                                                                                                  ", type: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(i) +
<a id="L1881" name="L1881"></a>1881                                                                                                                  ", value: " + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(i)
<a id="L1882" name="L1882"></a>1882                                                                                                                  );
<a id="L1883" name="L1883"></a>1883                         <em class="brace">}</em>
<a id="L1884" name="L1884"></a>1884          <em class="brace">}</em>
<a id="L1885" name="L1885"></a>1885 
<a id="L1886" name="L1886"></a>1886     <a href="../D/12340.html" title="Multiple defined in 2 places.">charactersFlush</a>();
<a id="L1887" name="L1887"></a>1887 
<a id="L1888" name="L1888"></a>1888     <strong class="reserved">int</strong> exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(uri, <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE);
<a id="L1889" name="L1889"></a>1889     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(qName, uri);
<a id="L1890" name="L1890"></a>1890     <strong class="reserved">int</strong> prefixIndex = (<strong class="reserved">null</strong> != <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1891" name="L1891"></a>1891                       ? m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(qName) : 0;
<a id="L1892" name="L1892"></a>1892 
<a id="L1893" name="L1893"></a>1893     <strong class="reserved">int</strong> elemNode = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE, exName,
<a id="L1894" name="L1894"></a>1894                            m_parents.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(), m_previous, prefixIndex, <strong class="reserved">true</strong>);
<a id="L1895" name="L1895"></a>1895 
<a id="L1896" name="L1896"></a>1896     <strong class="reserved">if</strong>(m_indexing)
<a id="L1897" name="L1897"></a>1897       <a href="../S/5889.html#L319" title="Defined at 319 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">indexNode</a>(exName, elemNode);
<a id="L1898" name="L1898"></a>1898 
<a id="L1899" name="L1899"></a>1899 
<a id="L1900" name="L1900"></a>1900     m_parents.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(elemNode);
<a id="L1901" name="L1901"></a>1901 
<a id="L1902" name="L1902"></a>1902     <strong class="reserved">int</strong> startDecls = m_contextIndexes.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L1903" name="L1903"></a>1903     <strong class="reserved">int</strong> nDecls = m_prefixMappings.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1904" name="L1904"></a>1904     <strong class="reserved">int</strong> prev = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L1905" name="L1905"></a>1905 
<a id="L1906" name="L1906"></a>1906     <strong class="reserved">if</strong>(!m_pastFirstElement)
<a id="L1907" name="L1907"></a>1907     <em class="brace">{</em>
<a id="L1908" name="L1908"></a>1908       <em class="comment">// SPECIAL CASE: Implied declaration at root element</em>
<a id="L1909" name="L1909"></a>1909       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>="xml";
<a id="L1910" name="L1910"></a>1910       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> declURL = "http://www.w3.org/XML/1998/namespace";
<a id="L1911" name="L1911"></a>1911       exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<strong class="reserved">null</strong>, <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE);
<a id="L1912" name="L1912"></a>1912       <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(declURL);
<a id="L1913" name="L1913"></a>1913       prev = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE, exName, elemNode,
<a id="L1914" name="L1914"></a>1914                      prev, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">false</strong>);
<a id="L1915" name="L1915"></a>1915       m_pastFirstElement=<strong class="reserved">true</strong>;
<a id="L1916" name="L1916"></a>1916     <em class="brace">}</em>
<a id="L1917" name="L1917"></a>1917 
<a id="L1918" name="L1918"></a>1918     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = startDecls; i &lt; nDecls; i += 2)
<a id="L1919" name="L1919"></a>1919     <em class="brace">{</em>
<a id="L1920" name="L1920"></a>1920       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_prefixMappings.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L1921" name="L1921"></a>1921 
<a id="L1922" name="L1922"></a>1922       <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> == <strong class="reserved">null</strong>)
<a id="L1923" name="L1923"></a>1923         <strong class="reserved">continue</strong>;
<a id="L1924" name="L1924"></a>1924 
<a id="L1925" name="L1925"></a>1925       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> declURL = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_prefixMappings.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i + 1);
<a id="L1926" name="L1926"></a>1926 
<a id="L1927" name="L1927"></a>1927       exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<strong class="reserved">null</strong>, <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>, <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE);
<a id="L1928" name="L1928"></a>1928 
<a id="L1929" name="L1929"></a>1929       <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(declURL);
<a id="L1930" name="L1930"></a>1930 
<a id="L1931" name="L1931"></a>1931       prev = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE, exName, elemNode,
<a id="L1932" name="L1932"></a>1932                      prev, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>, <strong class="reserved">false</strong>);
<a id="L1933" name="L1933"></a>1933     <em class="brace">}</em>
<a id="L1934" name="L1934"></a>1934 
<a id="L1935" name="L1935"></a>1935     <strong class="reserved">int</strong> n = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1936" name="L1936"></a>1936 
<a id="L1937" name="L1937"></a>1937     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++)
<a id="L1938" name="L1938"></a>1938     <em class="brace">{</em>
<a id="L1939" name="L1939"></a>1939       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrUri = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23369.html" title="Multiple defined in 43 places.">getURI</a>(i);
<a id="L1940" name="L1940"></a>1940       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrQName = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(i);
<a id="L1941" name="L1941"></a>1941       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> valString = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(i);
<a id="L1942" name="L1942"></a>1942 
<a id="L1943" name="L1943"></a>1943       <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <a href="../D/21592.html" title="Multiple defined in 61 places.">getPrefix</a>(attrQName, attrUri);
<a id="L1944" name="L1944"></a>1944 
<a id="L1945" name="L1945"></a>1945       <strong class="reserved">int</strong> nodeType;
<a id="L1946" name="L1946"></a>1946 
<a id="L1947" name="L1947"></a>1947        <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrLocalName = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20201.html" title="Multiple defined in 44 places.">getLocalName</a>(i);
<a id="L1948" name="L1948"></a>1948 
<a id="L1949" name="L1949"></a>1949       <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != attrQName)
<a id="L1950" name="L1950"></a>1950               &amp;&amp; (attrQName.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xmlns")
<a id="L1951" name="L1951"></a>1951                   || attrQName.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("xmlns:")))
<a id="L1952" name="L1952"></a>1952       <em class="brace">{</em>
<a id="L1953" name="L1953"></a>1953         <strong class="reserved">if</strong> (<a href="../S/5892.html#L1817" title="Defined at 1817 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM.java.">declAlreadyDeclared</a>(<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>))
<a id="L1954" name="L1954"></a>1954           <strong class="reserved">continue</strong>;  <em class="comment">// go to the next attribute.</em>
<a id="L1955" name="L1955"></a>1955 
<a id="L1956" name="L1956"></a>1956         nodeType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE;
<a id="L1957" name="L1957"></a>1957       <em class="brace">}</em>
<a id="L1958" name="L1958"></a>1958       <strong class="reserved">else</strong>
<a id="L1959" name="L1959"></a>1959       <em class="brace">{</em>
<a id="L1960" name="L1960"></a>1960         nodeType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE;
<a id="L1961" name="L1961"></a>1961 
<a id="L1962" name="L1962"></a>1962         <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>(i).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("ID"))
<a id="L1963" name="L1963"></a>1963           <a href="../D/32872.html" title="Multiple defined in 2 places.">setIDAttribute</a>(valString, elemNode);
<a id="L1964" name="L1964"></a>1964       <em class="brace">}</em>
<a id="L1965" name="L1965"></a>1965 
<a id="L1966" name="L1966"></a>1966       <em class="comment">// Bit of a hack... if somehow valString is null, stringToIndex will</em>
<a id="L1967" name="L1967"></a>1967       <em class="comment">// return -1, which will make things very unhappy.</em>
<a id="L1968" name="L1968"></a>1968       <strong class="reserved">if</strong>(<strong class="reserved">null</strong> == valString)
<a id="L1969" name="L1969"></a>1969         valString = "";
<a id="L1970" name="L1970"></a>1970 
<a id="L1971" name="L1971"></a>1971       <strong class="reserved">int</strong> <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(valString);
<a id="L1972" name="L1972"></a>1972       <em class="comment">//String attrLocalName = attributes.getLocalName(i);</em>
<a id="L1973" name="L1973"></a>1973 
<a id="L1974" name="L1974"></a>1974       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>)
<a id="L1975" name="L1975"></a>1975       <em class="brace">{</em>
<a id="L1976" name="L1976"></a>1976 
<a id="L1977" name="L1977"></a>1977         prefixIndex = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(attrQName);
<a id="L1978" name="L1978"></a>1978 
<a id="L1979" name="L1979"></a>1979         <strong class="reserved">int</strong> dataIndex = m_data.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L1980" name="L1980"></a>1980 
<a id="L1981" name="L1981"></a>1981         m_data.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(prefixIndex);
<a id="L1982" name="L1982"></a>1982         m_data.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>);
<a id="L1983" name="L1983"></a>1983 
<a id="L1984" name="L1984"></a>1984         <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a> = -dataIndex;
<a id="L1985" name="L1985"></a>1985       <em class="brace">}</em>
<a id="L1986" name="L1986"></a>1986 
<a id="L1987" name="L1987"></a>1987       exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(attrUri, attrLocalName, nodeType);
<a id="L1988" name="L1988"></a>1988       prev = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(nodeType, exName, elemNode, prev, <a href="../S/1444.html#L56" title="Defined at 56 in src/java/io/ExpiringCache.java.">val</a>,
<a id="L1989" name="L1989"></a>1989                      <strong class="reserved">false</strong>);
<a id="L1990" name="L1990"></a>1990     <em class="brace">}</em>
<a id="L1991" name="L1991"></a>1991 
<a id="L1992" name="L1992"></a>1992     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != prev)
<a id="L1993" name="L1993"></a>1993       m_nextsib.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,prev);
<a id="L1994" name="L1994"></a>1994 
<a id="L1995" name="L1995"></a>1995     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_wsfilter)
<a id="L1996" name="L1996"></a>1996     <em class="brace">{</em>
<a id="L1997" name="L1997"></a>1997       <strong class="reserved">short</strong> wsv = m_wsfilter.<a href="../D/22488.html" title="Multiple defined in 2 places.">getShouldStripSpace</a>(<a href="../S/5889.html#L902" title="Defined at 902 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeHandle</a>(elemNode), <strong class="reserved">this</strong>);
<a id="L1998" name="L1998"></a>1998       <strong class="reserved">boolean</strong> shouldStrip = (<a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a>.INHERIT == wsv)
<a id="L1999" name="L1999"></a>1999                             ? <a href="../D/22489.html" title="Multiple defined in 2 places.">getShouldStripWhitespace</a>()
<a id="L2000" name="L2000"></a>2000                             : (<a href="../S/5926.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMWSFilter.java.">DTMWSFilter</a>.STRIP == wsv);
<a id="L2001" name="L2001"></a>2001 
<a id="L2002" name="L2002"></a>2002       <a href="../S/5889.html#L2281" title="Defined at 2281 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">pushShouldStripWhitespace</a>(shouldStrip);
<a id="L2003" name="L2003"></a>2003     <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004 
<a id="L2005" name="L2005"></a>2005     m_previous = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L2006" name="L2006"></a>2006 
<a id="L2007" name="L2007"></a>2007     m_contextIndexes.<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(m_prefixMappings.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());  <em class="comment">// for the children.</em>
<a id="L2008" name="L2008"></a>2008   <em class="brace">}</em>
<a id="L2009" name="L2009"></a>2009 
<div class="comment">
    Receive notification of the end of an element.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions at the end of
    each element (such as finalising a tree node or writing
    output to a file).</p>
    @param uri The Namespace URI, or the empty string if the
           element has no Namespace URI or if Namespace
           processing is not being performed.
    @param localName The local name (without prefix), or the
           empty string if Namespace processing is not being
           performed.
    @param qName The qualified XML 1.0 name (with prefix), or the
           empty string if qualified names are not available.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#endElement</div>
<a id="L2030" name="L2030"></a>2030   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qName)
<a id="L2031" name="L2031"></a>2031           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2032" name="L2032"></a>2032   <em class="brace">{</em>
<a id="L2033" name="L2033"></a>2033    <strong class="reserved">if</strong> (DEBUG)
<a id="L2034" name="L2034"></a>2034       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("endElement: uri: " + uri + ", localname: "
<a id="L2035" name="L2035"></a>2035                                                                                                  + <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> + ", qname: "+qName);
<a id="L2036" name="L2036"></a>2036 
<a id="L2037" name="L2037"></a>2037     <a href="../D/12340.html" title="Multiple defined in 2 places.">charactersFlush</a>();
<a id="L2038" name="L2038"></a>2038 
<a id="L2039" name="L2039"></a>2039     <em class="comment">// If no one noticed, startPrefixMapping is a drag.</em>
<a id="L2040" name="L2040"></a>2040     <em class="comment">// Pop the context for the last child (the one pushed by startElement)</em>
<a id="L2041" name="L2041"></a>2041     m_contextIndexes.<a href="../D/30076.html" title="Multiple defined in 2 places.">quickPop</a>(1);
<a id="L2042" name="L2042"></a>2042 
<a id="L2043" name="L2043"></a>2043     <em class="comment">// Do it again for this one (the one pushed by the last endElement).</em>
<a id="L2044" name="L2044"></a>2044     <strong class="reserved">int</strong> topContextIndex = m_contextIndexes.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>();
<a id="L2045" name="L2045"></a>2045     <strong class="reserved">if</strong> (topContextIndex != m_prefixMappings.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()) <em class="brace">{</em>
<a id="L2046" name="L2046"></a>2046       m_prefixMappings.<a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(topContextIndex);
<a id="L2047" name="L2047"></a>2047     <em class="brace">}</em>
<a id="L2048" name="L2048"></a>2048 
<a id="L2049" name="L2049"></a>2049     <strong class="reserved">int</strong> lastNode = m_previous;
<a id="L2050" name="L2050"></a>2050 
<a id="L2051" name="L2051"></a>2051     m_previous = m_parents.<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L2052" name="L2052"></a>2052 
<a id="L2053" name="L2053"></a>2053     <em class="comment">// If lastNode is still DTM.NULL, this element had no children</em>
<a id="L2054" name="L2054"></a>2054     <strong class="reserved">if</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> == lastNode)
<a id="L2055" name="L2055"></a>2055       m_firstch.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,m_previous);
<a id="L2056" name="L2056"></a>2056     <strong class="reserved">else</strong>
<a id="L2057" name="L2057"></a>2057       m_nextsib.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>,lastNode);
<a id="L2058" name="L2058"></a>2058 
<a id="L2059" name="L2059"></a>2059     <a href="../S/5889.html#L2295" title="Defined at 2295 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">popShouldStripWhitespace</a>();
<a id="L2060" name="L2060"></a>2060   <em class="brace">}</em>
<a id="L2061" name="L2061"></a>2061 
<div class="comment">
    Receive notification of character data inside an element.
    <p>By default, do nothing.  Application writers may override this
    method to take specific actions for each chunk of character data
    (such as adding the data to a node or buffer, or printing it to
    a file).</p>
    @param ch The characters.
    @param start The start position in the character array.
    @param length The number of characters to use from the
                  character array.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#characters</div>
<a id="L2078" name="L2078"></a>2078   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>(<strong class="reserved">char</strong> ch[], <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2079" name="L2079"></a>2079   <em class="brace">{</em>
<a id="L2080" name="L2080"></a>2080     <strong class="reserved">if</strong> (m_textPendingStart == -1)  <em class="comment">// First one in this block</em>
<a id="L2081" name="L2081"></a>2081     <em class="brace">{</em>
<a id="L2082" name="L2082"></a>2082       m_textPendingStart = m_chars.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L2083" name="L2083"></a>2083       m_coalescedTextType = m_textType;
<a id="L2084" name="L2084"></a>2084     <em class="brace">}</em>
<a id="L2085" name="L2085"></a>2085     <em class="comment">// Type logic: If all adjacent text is CDATASections, the</em>
<a id="L2086" name="L2086"></a>2086     <em class="comment">// concatentated text is treated as a single CDATASection (see</em>
<a id="L2087" name="L2087"></a>2087     <em class="comment">// initialization above).  If any were ordinary Text, the whole</em>
<a id="L2088" name="L2088"></a>2088     <em class="comment">// thing is treated as Text. This may be worth %REVIEW%ing.</em>
<a id="L2089" name="L2089"></a>2089     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (m_textType == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE)
<a id="L2090" name="L2090"></a>2090     <em class="brace">{</em>
<a id="L2091" name="L2091"></a>2091       m_coalescedTextType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE;
<a id="L2092" name="L2092"></a>2092     <em class="brace">}</em>
<a id="L2093" name="L2093"></a>2093 
<a id="L2094" name="L2094"></a>2094     m_chars.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(ch, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L2095" name="L2095"></a>2095   <em class="brace">}</em>
<a id="L2096" name="L2096"></a>2096 
<div class="comment">
    Receive notification of ignorable whitespace in element content.
    <p>By default, do nothing.  Application writers may override this
    method to take specific actions for each chunk of ignorable
    whitespace (such as adding data to a node or buffer, or printing
    it to a file).</p>
    @param ch The whitespace characters.
    @param start The start position in the character array.
    @param length The number of characters to use from the
                  character array.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#ignorableWhitespace</div>
<a id="L2113" name="L2113"></a>2113   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20375.html" title="Multiple referred from 42 places.">ignorableWhitespace</a>(<strong class="reserved">char</strong> ch[], <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>)
<a id="L2114" name="L2114"></a>2114           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2115" name="L2115"></a>2115   <em class="brace">{</em>
<a id="L2116" name="L2116"></a>2116 
<a id="L2117" name="L2117"></a>2117     <em class="comment">// %OPT% We can probably take advantage of the fact that we know this</em>
<a id="L2118" name="L2118"></a>2118     <em class="comment">// is whitespace.</em>
<a id="L2119" name="L2119"></a>2119     <a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(ch, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L2120" name="L2120"></a>2120   <em class="brace">}</em>
<a id="L2121" name="L2121"></a>2121 
<div class="comment">
    Receive notification of a processing instruction.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions for each
    processing instruction, such as setting status variables or
    invoking other methods.</p>
    @param target The processing instruction target.
    @param data The processing instruction data, or null if
                none is supplied.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#processingInstruction</div>
<a id="L2137" name="L2137"></a>2137   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25204.html" title="Multiple referred from 66 places.">processingInstruction</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>)
<a id="L2138" name="L2138"></a>2138           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2139" name="L2139"></a>2139   <em class="brace">{</em>
<a id="L2140" name="L2140"></a>2140     <strong class="reserved">if</strong> (DEBUG)
<a id="L2141" name="L2141"></a>2141                  <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("processingInstruction: target: " + <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a> +", data: "+<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>);
<a id="L2142" name="L2142"></a>2142 
<a id="L2143" name="L2143"></a>2143     <a href="../D/12340.html" title="Multiple defined in 2 places.">charactersFlush</a>();
<a id="L2144" name="L2144"></a>2144 
<a id="L2145" name="L2145"></a>2145     <strong class="reserved">int</strong> exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<strong class="reserved">null</strong>, <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>,
<a id="L2146" name="L2146"></a>2146                                          <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.PROCESSING_INSTRUCTION_NODE);
<a id="L2147" name="L2147"></a>2147     <strong class="reserved">int</strong> dataIndex = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>);
<a id="L2148" name="L2148"></a>2148 
<a id="L2149" name="L2149"></a>2149     m_previous = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.PROCESSING_INSTRUCTION_NODE, exName,
<a id="L2150" name="L2150"></a>2150                          m_parents.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(), m_previous,
<a id="L2151" name="L2151"></a>2151                          dataIndex, <strong class="reserved">false</strong>);
<a id="L2152" name="L2152"></a>2152   <em class="brace">}</em>
<a id="L2153" name="L2153"></a>2153 
<div class="comment">
    Receive notification of a skipped entity.
    <p>By default, do nothing.  Application writers may override this
    method in a subclass to take specific actions for each
    processing instruction, such as setting status variables or
    invoking other methods.</p>
    @param name The name of the skipped entity.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ContentHandler#processingInstruction</div>
<a id="L2167" name="L2167"></a>2167   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28670.html" title="Multiple referred from 11 places.">skippedEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2168" name="L2168"></a>2168   <em class="brace">{</em>
<a id="L2169" name="L2169"></a>2169 
<a id="L2170" name="L2170"></a>2170     <em class="comment">// %REVIEW% What should be done here?</em>
<a id="L2171" name="L2171"></a>2171     <em class="comment">// no op</em>
<a id="L2172" name="L2172"></a>2172   <em class="brace">}</em>
<a id="L2173" name="L2173"></a>2173 
<a id="L2174" name="L2174"></a>2174   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2175" name="L2175"></a>2175   <em class="comment">// Implementation of the ErrorHandler interface.</em>
<a id="L2176" name="L2176"></a>2176   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2177" name="L2177"></a>2177 
<div class="comment">
    Receive notification of a parser warning.
    <p>The default implementation does nothing.  Application writers
    may override this method in a subclass to take specific actions
    for each warning, such as inserting the message in a log file or
    printing it to the console.</p>
    @param e The warning information encoded as an exception.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ErrorHandler#warning
    @see org.xml.sax.SAXParseException</div>
<a id="L2192" name="L2192"></a>2192   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30453.html" title="Multiple referred from 107 places.">warning</a>(<a href="../S/712.html#L62" title="Defined at 62 in src/org/xml/sax/SAXParseException.java.">SAXParseException</a> e) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2193" name="L2193"></a>2193   <em class="brace">{</em>
<a id="L2194" name="L2194"></a>2194 
<a id="L2195" name="L2195"></a>2195     <em class="comment">// %REVIEW% Is there anyway to get the JAXP error listener here?</em>
<a id="L2196" name="L2196"></a>2196     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L2197" name="L2197"></a>2197   <em class="brace">}</em>
<a id="L2198" name="L2198"></a>2198 
<div class="comment">
    Receive notification of a recoverable parser error.
    <p>The default implementation does nothing.  Application writers
    may override this method in a subclass to take specific actions
    for each error, such as inserting the message in a log file or
    printing it to the console.</p>
    @param e The warning information encoded as an exception.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ErrorHandler#warning
    @see org.xml.sax.SAXParseException</div>
<a id="L2213" name="L2213"></a>2213   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14003.html" title="Multiple referred from 408 places.">error</a>(<a href="../S/712.html#L62" title="Defined at 62 in src/org/xml/sax/SAXParseException.java.">SAXParseException</a> e) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2214" name="L2214"></a>2214   <em class="brace">{</em>
<a id="L2215" name="L2215"></a>2215     <strong class="reserved">throw</strong> e;
<a id="L2216" name="L2216"></a>2216   <em class="brace">}</em>
<a id="L2217" name="L2217"></a>2217 
<div class="comment">
    Report a fatal XML parsing error.
    <p>The default implementation throws a SAXParseException.
    Application writers may override this method in a subclass if
    they need to take specific actions for each fatal error (such as
    collecting all of the errors into a single report): in any case,
    the application must stop all regular processing when this
    method is invoked, since the document is no longer reliable, and
    the parser may no longer report parsing events.</p>
    @param e The error information encoded as an exception.
    @throws SAXException Any SAX exception, possibly
               wrapping another exception.
    @see org.xml.sax.ErrorHandler#fatalError
    @see org.xml.sax.SAXParseException</div>
<a id="L2235" name="L2235"></a>2235   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14255.html" title="Multiple referred from 46 places.">fatalError</a>(<a href="../S/712.html#L62" title="Defined at 62 in src/org/xml/sax/SAXParseException.java.">SAXParseException</a> e) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2236" name="L2236"></a>2236   <em class="brace">{</em>
<a id="L2237" name="L2237"></a>2237     <strong class="reserved">throw</strong> e;
<a id="L2238" name="L2238"></a>2238   <em class="brace">}</em>
<a id="L2239" name="L2239"></a>2239 
<a id="L2240" name="L2240"></a>2240   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2241" name="L2241"></a>2241   <em class="comment">// Implementation of the DeclHandler interface.</em>
<a id="L2242" name="L2242"></a>2242   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2243" name="L2243"></a>2243 
<div class="comment">
    Report an element type declaration.
    <p>The content model will consist of the string "EMPTY", the
    string "ANY", or a parenthesised group, optionally followed
    by an occurrence indicator.  The model will be normalized so
    that all whitespace is removed,and will include the enclosing
    parentheses.</p>
    @param name The element type name.
    @param model The content model as a normalized string.
    @throws SAXException The application may raise an exception.</div>
<a id="L2257" name="L2257"></a>2257   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13637.html" title="Multiple referred from 56 places.">elementDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> model) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2258" name="L2258"></a>2258   <em class="brace">{</em>
<a id="L2259" name="L2259"></a>2259 
<a id="L2260" name="L2260"></a>2260     <em class="comment">// no op</em>
<a id="L2261" name="L2261"></a>2261   <em class="brace">}</em>
<a id="L2262" name="L2262"></a>2262 
<div class="comment">
    Report an attribute type declaration.
    <p>Only the effective (first) declaration for an attribute will
    be reported.  The type will be one of the strings "CDATA",
    "ID", "IDREF", "IDREFS", "NMTOKEN", "NMTOKENS", "ENTITY",
    "ENTITIES", or "NOTATION", or a parenthesized token group with
    the separator "|" and all whitespace removed.</p>
    @param eName The name of the associated element.
    @param aName The name of the attribute.
    @param type A string representing the attribute type.
    @param valueDefault A string representing the attribute default
           ("#IMPLIED", "#REQUIRED", or "#FIXED") or null if
           none of these applies.
    @param value A string representing the attribute's default value,
           or null if there is none.
    @throws SAXException The application may raise an exception.</div>
<a id="L2282" name="L2282"></a>2282   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10404.html" title="Multiple referred from 33 places.">attributeDecl</a>(
<a id="L2283" name="L2283"></a>2283           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> eName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> aName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> valueDefault, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L2284" name="L2284"></a>2284             <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2285" name="L2285"></a>2285   <em class="brace">{</em>
<a id="L2286" name="L2286"></a>2286 
<a id="L2287" name="L2287"></a>2287     <em class="comment">// no op</em>
<a id="L2288" name="L2288"></a>2288   <em class="brace">}</em>
<a id="L2289" name="L2289"></a>2289 
<div class="comment">
    Report an internal entity declaration.
    <p>Only the effective (first) declaration for each entity
    will be reported.</p>
    @param name The name of the entity.  If it is a parameter
           entity, the name will begin with '%'.
    @param value The replacement text of the entity.
    @throws SAXException The application may raise an exception.
    @see #externalEntityDecl
    @see org.xml.sax.DTDHandler#unparsedEntityDecl</div>
<a id="L2303" name="L2303"></a>2303   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20928.html" title="Multiple referred from 8 places.">internalEntityDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L2304" name="L2304"></a>2304           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2305" name="L2305"></a>2305   <em class="brace">{</em>
<a id="L2306" name="L2306"></a>2306 
<a id="L2307" name="L2307"></a>2307     <em class="comment">// no op</em>
<a id="L2308" name="L2308"></a>2308   <em class="brace">}</em>
<a id="L2309" name="L2309"></a>2309 
<div class="comment">
    Report a parsed external entity declaration.
    <p>Only the effective (first) declaration for each entity
    will be reported.</p>
    @param name The name of the entity.  If it is a parameter
           entity, the name will begin with '%'.
    @param publicId The declared public identifier of the entity, or
           null if none was declared.
    @param systemId The declared system identifier of the entity.
    @throws SAXException The application may raise an exception.
    @see #internalEntityDecl
    @see org.xml.sax.DTDHandler#unparsedEntityDecl</div>
<a id="L2325" name="L2325"></a>2325   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14189.html" title="Multiple referred from 8 places.">externalEntityDecl</a>(
<a id="L2326" name="L2326"></a>2326           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2327" name="L2327"></a>2327   <em class="brace">{</em>
<a id="L2328" name="L2328"></a>2328 
<a id="L2329" name="L2329"></a>2329     <em class="comment">// no op</em>
<a id="L2330" name="L2330"></a>2330   <em class="brace">}</em>
<a id="L2331" name="L2331"></a>2331 
<a id="L2332" name="L2332"></a>2332   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2333" name="L2333"></a>2333   <em class="comment">// Implementation of the LexicalHandler interface.</em>
<a id="L2334" name="L2334"></a>2334   <em class="comment">////////////////////////////////////////////////////////////////////</em>
<a id="L2335" name="L2335"></a>2335 
<div class="comment">
    Report the start of DTD declarations, if any.
    <p>Any declarations are assumed to be in the internal subset
    unless otherwise indicated by a {@link #startEntity startEntity}
    event.</p>
    <p>Note that the start/endDTD events will appear within
    the start/endDocument events from ContentHandler and
    before the first startElement event.</p>
    @param name The document type name.
    @param publicId The declared public identifier for the
           external DTD subset, or null if none was declared.
    @param systemId The declared system identifier for the
           external DTD subset, or null if none was declared.
    @throws SAXException The application may raise an
               exception.
    @see #endDTD
    @see #startEntity</div>
<a id="L2357" name="L2357"></a>2357   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28798.html" title="Multiple referred from 16 places.">startDTD</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L2358" name="L2358"></a>2358           <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2359" name="L2359"></a>2359   <em class="brace">{</em>
<a id="L2360" name="L2360"></a>2360 
<a id="L2361" name="L2361"></a>2361     m_insideDTD = <strong class="reserved">true</strong>;
<a id="L2362" name="L2362"></a>2362   <em class="brace">}</em>
<a id="L2363" name="L2363"></a>2363 
<div class="comment">
    Report the end of DTD declarations.
    @throws SAXException The application may raise an exception.
    @see #startDTD</div>
<a id="L2370" name="L2370"></a>2370   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13759.html" title="Multiple referred from 17 places.">endDTD</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2371" name="L2371"></a>2371   <em class="brace">{</em>
<a id="L2372" name="L2372"></a>2372 
<a id="L2373" name="L2373"></a>2373     m_insideDTD = <strong class="reserved">false</strong>;
<a id="L2374" name="L2374"></a>2374   <em class="brace">}</em>
<a id="L2375" name="L2375"></a>2375 
<div class="comment">
    Report the beginning of an entity in content.
    <p><strong>NOTE: entity references in attribute
    values -- and the start and end of the document entity --
    are never reported.</strong></p><strong>
    <p>The start and end of the external DTD subset are reported
    using the pseudo-name "[dtd]".  All other events must be
    properly nested within start/end entity events.</p>
    <p>Note that skipped entities will be reported through the
    {@link org.xml.sax.ContentHandler#skippedEntity skippedEntity}
    event, which is part of the ContentHandler interface.</p>
    @param name The name of the entity.  If it is a parameter
           entity, the name will begin with '%'.
    @throws SAXException The application may raise an exception.
    @see #endEntity
    @see org.xml.sax.ext.DeclHandler#internalEntityDecl
    @see org.xml.sax.ext.DeclHandler#externalEntityDecl</strong></div>
<a id="L2398" name="L2398"></a>2398   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28814.html" title="Multiple referred from 28 places.">startEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2399" name="L2399"></a>2399   <em class="brace">{</em>
<a id="L2400" name="L2400"></a>2400 
<a id="L2401" name="L2401"></a>2401     <em class="comment">// no op</em>
<a id="L2402" name="L2402"></a>2402   <em class="brace">}</em>
<a id="L2403" name="L2403"></a>2403 
<div class="comment">
    Report the end of an entity.
    @param name The name of the entity that is ending.
    @throws SAXException The application may raise an exception.
    @see #startEntity</div>
<a id="L2411" name="L2411"></a>2411   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13769.html" title="Multiple referred from 20 places.">endEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2412" name="L2412"></a>2412   <em class="brace">{</em>
<a id="L2413" name="L2413"></a>2413 
<a id="L2414" name="L2414"></a>2414     <em class="comment">// no op</em>
<a id="L2415" name="L2415"></a>2415   <em class="brace">}</em>
<a id="L2416" name="L2416"></a>2416 
<div class="comment">
    Report the start of a CDATA section.
    <p>The contents of the CDATA section will be reported through
    the regular {@link org.xml.sax.ContentHandler#characters
    characters} event.</p>
    @throws SAXException The application may raise an exception.
    @see #endCDATA</div>
<a id="L2427" name="L2427"></a>2427   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28793.html" title="Multiple referred from 30 places.">startCDATA</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2428" name="L2428"></a>2428   <em class="brace">{</em>
<a id="L2429" name="L2429"></a>2429     m_textType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.CDATA_SECTION_NODE;
<a id="L2430" name="L2430"></a>2430   <em class="brace">}</em>
<a id="L2431" name="L2431"></a>2431 
<div class="comment">
    Report the end of a CDATA section.
    @throws SAXException The application may raise an exception.
    @see #startCDATA</div>
<a id="L2438" name="L2438"></a>2438   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13755.html" title="Multiple referred from 33 places.">endCDATA</a>() <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2439" name="L2439"></a>2439   <em class="brace">{</em>
<a id="L2440" name="L2440"></a>2440     m_textType = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.TEXT_NODE;
<a id="L2441" name="L2441"></a>2441   <em class="brace">}</em>
<a id="L2442" name="L2442"></a>2442 
<div class="comment">
    Report an XML comment anywhere in the document.
    <p>This callback will be used for comments inside or outside the
    document element, including comments in the external DTD
    subset (if read).</p>
    @param ch An array holding the characters in the comment.
    @param start The starting position in the array.
    @param length The number of characters to use from the array.
    @throws SAXException The application may raise an exception.</div>
<a id="L2455" name="L2455"></a>2455   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11671.html" title="Multiple referred from 126 places.">comment</a>(<strong class="reserved">char</strong> ch[], <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L2456" name="L2456"></a>2456   <em class="brace">{</em>
<a id="L2457" name="L2457"></a>2457 
<a id="L2458" name="L2458"></a>2458     <strong class="reserved">if</strong> (m_insideDTD)      <em class="comment">// ignore comments if we're inside the DTD</em>
<a id="L2459" name="L2459"></a>2459       <strong class="reserved">return</strong>;
<a id="L2460" name="L2460"></a>2460 
<a id="L2461" name="L2461"></a>2461     <a href="../D/12340.html" title="Multiple defined in 2 places.">charactersFlush</a>();
<a id="L2462" name="L2462"></a>2462 
<a id="L2463" name="L2463"></a>2463     <strong class="reserved">int</strong> exName = m_expandedNameTable.<a href="../D/18929.html" title="Multiple defined in 16 places.">getExpandedTypeID</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.COMMENT_NODE);
<a id="L2464" name="L2464"></a>2464 
<a id="L2465" name="L2465"></a>2465     <em class="comment">// For now, treat comments as strings...  I guess we should do a</em>
<a id="L2466" name="L2466"></a>2466     <em class="comment">// seperate FSB buffer instead.</em>
<a id="L2467" name="L2467"></a>2467     <strong class="reserved">int</strong> dataIndex = m_valuesOrPrefixes.<a href="../D/34939.html" title="Multiple defined in 3 places.">stringToIndex</a>(<strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>(ch, <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>,
<a id="L2468" name="L2468"></a>2468                       <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>));
<a id="L2469" name="L2469"></a>2469 
<a id="L2470" name="L2470"></a>2470 
<a id="L2471" name="L2471"></a>2471     m_previous = <a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.COMMENT_NODE, exName,
<a id="L2472" name="L2472"></a>2472                          m_parents.<a href="../D/29287.html" title="Multiple defined in 50 places.">peek</a>(), m_previous, dataIndex, <strong class="reserved">false</strong>);
<a id="L2473" name="L2473"></a>2473   <em class="brace">}</em>
<a id="L2474" name="L2474"></a>2474 
<div class="comment">
    Set a run time property for this DTM instance.
    %REVIEW% Now that we no longer use this method to support
    getSourceLocatorFor, can we remove it?
    @param property a <code>String</code> value
    @param value an <code>Object</code> value</div>
<a id="L2484" name="L2484"></a>2484   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27976.html" title="Multiple referred from 343 places.">setProperty</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> property, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L2485" name="L2485"></a>2485   <em class="brace">{</em>
<a id="L2486" name="L2486"></a>2486   <em class="brace">}</em>
<a id="L2487" name="L2487"></a>2487 
<div class="comment">
 Retrieve the SourceLocator associated with a specific node.
    This is only meaningful if the XalanProperties.SOURCE_LOCATION flag was
    set True using setProperty; if it was never set, or was set false, we
    will return null.
    (We _could_ return a locator with the document's base URI and bogus
    line/column information. Trying that; see the else clause.)
   * </div>
<a id="L2496" name="L2496"></a>2496   <strong class="reserved">public</strong> <a href="../S/4044.html#L32" title="Defined at 32 in src/javax/xml/transform/SourceLocator.java.">SourceLocator</a> <a href="../R/19100.html" title="Multiple referred from 10 places.">getSourceLocatorFor</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L2497" name="L2497"></a>2497   <em class="brace">{</em>
<a id="L2498" name="L2498"></a>2498     <strong class="reserved">if</strong> (m_useSourceLocationProperty)
<a id="L2499" name="L2499"></a>2499     <em class="brace">{</em>
<a id="L2500" name="L2500"></a>2500 
<a id="L2501" name="L2501"></a>2501       <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> = <a href="../S/5889.html#L929" title="Defined at 929 in src/com/sun/org/apache/xml/internal/dtm/ref/DTMDefaultBase.java.">makeNodeIdentity</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L2502" name="L2502"></a>2502 
<a id="L2503" name="L2503"></a>2503 
<a id="L2504" name="L2504"></a>2504       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5908.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/dtm/ref/NodeLocator.java.">NodeLocator</a>(<strong class="reserved">null</strong>,
<a id="L2505" name="L2505"></a>2505                              m_sourceSystemId.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>),
<a id="L2506" name="L2506"></a>2506                              m_sourceLine.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>),
<a id="L2507" name="L2507"></a>2507                              m_sourceColumn.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>));
<a id="L2508" name="L2508"></a>2508     <em class="brace">}</em>
<a id="L2509" name="L2509"></a>2509     <strong class="reserved">else</strong> <strong class="reserved">if</strong>(m_locator!=<strong class="reserved">null</strong>)
<a id="L2510" name="L2510"></a>2510     <em class="brace">{</em>
<a id="L2511" name="L2511"></a>2511         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5908.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/dtm/ref/NodeLocator.java.">NodeLocator</a>(<strong class="reserved">null</strong>,m_locator.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>(),-1,-1);
<a id="L2512" name="L2512"></a>2512     <em class="brace">}</em>
<a id="L2513" name="L2513"></a>2513     <strong class="reserved">else</strong> <strong class="reserved">if</strong>(m_systemId!=<strong class="reserved">null</strong>)
<a id="L2514" name="L2514"></a>2514     <em class="brace">{</em>
<a id="L2515" name="L2515"></a>2515         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5908.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/dtm/ref/NodeLocator.java.">NodeLocator</a>(<strong class="reserved">null</strong>,m_systemId,-1,-1);
<a id="L2516" name="L2516"></a>2516     <em class="brace">}</em>
<a id="L2517" name="L2517"></a>2517     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2518" name="L2518"></a>2518   <em class="brace">}</em>
<a id="L2519" name="L2519"></a>2519 
<a id="L2520" name="L2520"></a>2520   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5891.html#L2736" title="Referred from 2736 in src/com/sun/org/apache/xml/internal/dtm/ref/sax2dtm/SAX2DTM2.java.">getFixedNames</a>(<strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>)<em class="brace">{</em>
<a id="L2521" name="L2521"></a>2521     <strong class="reserved">return</strong> m_fixednames[<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>];
<a id="L2522" name="L2522"></a>2522   <em class="brace">}</em>
<a id="L2523" name="L2523"></a>2523 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L299">[^]</a><a href="#L2520">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
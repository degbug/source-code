<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/DefaultCaret.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L202">[^]</a><a href="#L1916">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L202" title="Defined at 202.">setUpdatePolicy</a></li>
<li><a href="#L219" title="Defined at 219.">getUpdatePolicy</a></li>
<li><a href="#L229" title="Defined at 229.">getComponent</a></li>
<li><a href="#L243" title="Defined at 243.">repaint</a></li>
<li><a href="#L259" title="Defined at 259.">damage</a></li>
<li><a href="#L280" title="Defined at 280.">adjustVisibility</a></li>
<li><a href="#L296" title="Defined at 296.">getSelectionPainter</a></li>
<li><a href="#L306" title="Defined at 306.">positionCaret</a></li>
<li><a href="#L325" title="Defined at 325.">moveCaret</a></li>
<li><a href="#L346" title="Defined at 346.">focusGained</a></li>
<li><a href="#L363" title="Defined at 363.">focusLost</a></li>
<li><a href="#L372" title="Defined at 372.">selectWord</a></li>
<li><a href="#L405" title="Defined at 405.">mouseClicked</a></li>
<li><a href="#L488" title="Defined at 488.">mousePressed</a></li>
<li><a href="#L505" title="Defined at 505.">adjustCaretAndFocus</a></li>
<li><a href="#L513" title="Defined at 513.">adjustCaret</a></li>
<li><a href="#L527" title="Defined at 527.">adjustFocus</a></li>
<li><a href="#L545" title="Defined at 545.">mouseReleased</a></li>
<li><a href="#L560" title="Defined at 560.">mouseEntered</a></li>
<li><a href="#L569" title="Defined at 569.">mouseExited</a></li>
<li><a href="#L584" title="Defined at 584.">mouseDragged</a></li>
<li><a href="#L596" title="Defined at 596.">mouseMoved</a></li>
<li><a href="#L617" title="Defined at 617.">paint</a></li>
<li><a href="#L684" title="Defined at 684.">install</a></li>
<li><a href="#L727" title="Defined at 727.">deinstall</a></li>
<li><a href="#L753" title="Defined at 753.">addChangeListener</a></li>
<li><a href="#L763" title="Defined at 763.">removeChangeListener</a></li>
<li><a href="#L780" title="Defined at 780.">getChangeListeners</a></li>
<li><a href="#L792" title="Defined at 792.">fireStateChanged</a></li>
<li><a href="#L843" title="Defined at 843.">getListeners</a></li>
<li><a href="#L852" title="Defined at 852.">setSelectionVisible</a></li>
<li><a href="#L884" title="Defined at 884.">isSelectionVisible</a></li>
<li><a href="#L902" title="Defined at 902.">isActive</a></li>
<li><a href="#L923" title="Defined at 923.">isVisible</a></li>
<li><a href="#L961" title="Defined at 961.">setVisible</a></li>
<li><a href="#L994" title="Defined at 994.">setBlinkRate</a></li>
<li><a href="#L1016" title="Defined at 1016.">getBlinkRate</a></li>
<li><a href="#L1026" title="Defined at 1026.">getDot</a></li>
<li><a href="#L1037" title="Defined at 1037.">getMark</a></li>
<li><a href="#L1050" title="Defined at 1050.">setDot</a></li>
<li><a href="#L1062" title="Defined at 1062.">moveDot</a></li>
<li><a href="#L1078" title="Defined at 1078.">moveDot</a></li>
<li><a href="#L1100" title="Defined at 1100.">handleMoveDot</a></li>
<li><a href="#L1143" title="Defined at 1143.">setDot</a></li>
<li><a href="#L1158" title="Defined at 1158.">handleSetDot</a></li>
<li><a href="#L1190" title="Defined at 1190.">getDotBias</a></li>
<li><a href="#L1200" title="Defined at 1200.">getMarkBias</a></li>
<li><a href="#L1204" title="Defined at 1204.">isDotLeftToRight</a></li>
<li><a href="#L1208" title="Defined at 1208.">isMarkLeftToRight</a></li>
<li><a href="#L1212" title="Defined at 1212.">isPositionLTR</a></li>
<li><a href="#L1219" title="Defined at 1219.">guessBiasForOffset</a></li>
<li><a href="#L1258" title="Defined at 1258.">changeCaretPosition</a></li>
<li><a href="#L1299" title="Defined at 1299.">repaintNewCaret</a></li>
<li><a href="#L1326" title="Defined at 1326.">updateSystemSelection</a></li>
<li><a href="#L1366" title="Defined at 1366.">getSystemSelection</a></li>
<li><a href="#L1377" title="Defined at 1377.">getClipboardOwner</a></li>
<li><a href="#L1387" title="Defined at 1387.">ensureValidPosition</a></li>
<li><a href="#L1406" title="Defined at 1406.">setMagicCaretPosition</a></li>
<li><a href="#L1416" title="Defined at 1416.">getMagicCaretPosition</a></li>
<li><a href="#L1430" title="Defined at 1430.">equals</a></li>
<li><a href="#L1434" title="Defined at 1434.">toString</a></li>
<li><a href="#L1440" title="Defined at 1440.">getFilterBypass</a></li>
<li><a href="#L1449" title="Defined at 1449.">_contains</a></li>
<li><a href="#L1496" title="Defined at 1496.">getCaretWidth</a></li>
<li><a href="#L1515" title="Defined at 1515.">readObject</a></li>
<li><a href="#L1534" title="Defined at 1534.">writeObject</a></li>
<li><a href="#L1618" title="Defined at 1618.">run</a></li>
<li><a href="#L1639" title="Defined at 1639.">actionPerformed</a></li>
<li><a href="#L1668" title="Defined at 1668.">insertUpdate</a></li>
<li><a href="#L1746" title="Defined at 1746.">removeUpdate</a></li>
<li><a href="#L1828" title="Defined at 1828.">changedUpdate</a></li>
<li><a href="#L1845" title="Defined at 1845.">propertyChange</a></li>
<li><a href="#L1895" title="Defined at 1895.">lostOwnership</a></li>
<li><a href="#L1908" title="Defined at 1908.">getCaret</a></li>
<li><a href="#L1912" title="Defined at 1912.">setDot</a></li>
<li><a href="#L1916" title="Defined at 1916.">moveDot</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.event.*;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.datatransfer.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.beans.*;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.awt.event.ActionEvent;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.awt.event.ActionListener;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.io.*;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> javax.swing.*;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> javax.swing.event.*;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> javax.swing.plaf.*;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.EventListener;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> sun.swing.SwingUtilities2;
<a id="L39" name="L39"></a>  39 
<div class="comment">
  A default implementation of Caret.  The caret is rendered as
  a vertical line in the color specified by the CaretColor property
  of the associated JTextComponent.  It can blink at the rate specified
  by the BlinkRate property.
  <p>
  This implementation expects two sources of asynchronous notification.
  The timer thread fires asynchronously, and causes the caret to simply
  repaint the most recent bounding box.  The caret also tracks change
  as the document is modified.  Typically this will happen on the
  event dispatch thread as a result of some mouse or keyboard event.
  The caret behavior on both synchronous and asynchronous documents updates
  is controlled by <code>UpdatePolicy</code> property. The repaint of the
  new caret location will occur on the event thread in any case, as calls to
  <code>modelToView</code> are only safe on the event thread.
  </p><p>
  The caret acts as a mouse and focus listener on the text component
  it has been installed in, and defines the caret semantics based upon
  those events.  The listener methods can be reimplemented to change the
  semantics.
  By default, the first mouse button will be used to set focus and caret
  position.  Dragging the mouse pointer with the first mouse button will
  sweep out a selection that is contiguous in the model.  If the associated
  text component is editable, the caret will become visible when focus
  is gained, and invisible when focus is lost.
  </p><p>
  The Highlighter bound to the associated text component is used to
  render the selection by default.
  Selection appearance can be customized by supplying a
  painter to use for the highlights.  By default a painter is used that
  will render a solid color as specified in the associated text component
  in the <code>SelectionColor</code> property.  This can easily be changed
  by reimplementing the
  <a href="#L296" title="Defined at 296.">getSelectionPainter</a>
  method.
  </p><p>
  A customized caret appearance can be achieved by reimplementing
  the paint method.  If the paint method is changed, the damage method
  should also be reimplemented to cause a repaint for the area needed
  to render the caret.  The caret extends the Rectangle class which
  is used to hold the bounding box for where the caret was last rendered.
  This enables the caret to repaint in a thread-safe manner when the
  caret moves without making a call to modelToView which is unstable
  between model updates and view repair (i.e. the order of delivery
  to DocumentListeners is not guaranteed).
  </p><p>
  The magic caret position is set to null when the caret position changes.
  A timer is used to determine the new location (after the caret change).
  When the timer fires, if the magic caret position is still null it is
  reset to the current caret position. Any actions that change
  the caret position and want the magic caret position to remain the
  same, must remember the magic caret position, change the cursor, and
  then set the magic caret position to its original value. This has the
  benefit that only actions that want the magic caret position to persist
  (such as open/down) need to know about it.
  </p><p>
  <strong>Warning:</strong>
  Serialized objects of this class will not be compatible with
  future Swing releases. The current serialization support is
  appropriate for short term storage or RMI between applications running
  the same version of Swing.  As of 1.4, support for long term storage
  of all JavaBeans™
  has been added to the <code>java.beans</code> package.
  Please see {@link java.beans.XMLEncoder}.
  @author  Timothy Prinzing
  @see     Caret</p></div>
<a id="L108" name="L108"></a> 108 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2075.html" title="Multiple referred from 27 places.">DefaultCaret</a> <strong class="reserved">extends</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <strong class="reserved">implements</strong> <a href="../D/1302.html" title="Multiple defined in 2 places.">Caret</a>, <a href="../S/2436.html#L50" title="Defined at 50 in src/java/awt/event/FocusListener.java.">FocusListener</a>, <a href="../S/2395.html#L57" title="Defined at 57 in src/java/awt/event/MouseListener.java.">MouseListener</a>, <a href="../S/2396.html#L54" title="Defined at 54 in src/java/awt/event/MouseMotionListener.java.">MouseMotionListener</a> <em class="brace">{</em>
<a id="L109" name="L109"></a> 109 
<div class="comment">
      Indicates that the caret position is to be updated only when
      document changes are performed on the Event Dispatching Thread.
      @see #setUpdatePolicy
      @see #getUpdatePolicy
      @since 1.5</div>
<a id="L117" name="L117"></a> 117     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UPDATE_WHEN_ON_EDT = 0;
<a id="L118" name="L118"></a> 118 
<div class="comment">
      Indicates that the caret should remain at the same
      absolute position in the document regardless of any document
      updates, except when the document length becomes less than
      the current caret position due to removal. In that case the caret
      position is adjusted to the end of the document.
      @see #setUpdatePolicy
      @see #getUpdatePolicy
      @since 1.5</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NEVER_UPDATE = 1;
<a id="L131" name="L131"></a> 131 
<div class="comment">
      Indicates that the caret position is to be <b>always</b>
      updated accordingly to the document changes regardless whether
      the document updates are performed on the Event Dispatching Thread
      or not.
      @see #setUpdatePolicy
      @see #getUpdatePolicy
      @since 1.5</div>
<a id="L142" name="L142"></a> 142     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ALWAYS_UPDATE = 2;
<a id="L143" name="L143"></a> 143 
<div class="comment">
      Constructs a default caret.</div>
<a id="L147" name="L147"></a> 147     <strong class="reserved">public</strong> DefaultCaret() <em class="brace">{</em>
<a id="L148" name="L148"></a> 148     <em class="brace">}</em>
<a id="L149" name="L149"></a> 149 
<div class="comment">
      Sets the caret movement policy on the document updates. Normally
      the caret updates its absolute position within the document on
      insertions occurred before or at the caret position and
      on removals before the caret position. 'Absolute position'
      means here the position relative to the start of the document.
      For example if
      a character is typed within editable text component it is inserted
      at the caret position and the caret moves to the next absolute
      position within the document due to insertion and if
      <code>BACKSPACE</code> is typed then caret decreases its absolute
      position due to removal of a character before it. Sometimes
      it may be useful to turn off the caret position updates so that
      the caret stays at the same absolute position within the
      document position regardless of any document updates.
      <p>
      The following update policies are allowed:
      </p><ul><li><code>NEVER_UPDATE</code>: the caret stays at the same
            absolute position in the document regardless of any document
            updates, except when document length becomes less than
            the current caret position due to removal. In that case caret
            position is adjusted to the end of the document.
            The caret doesn't try to keep itself visible by scrolling
            the associated view when using this policy. </li><li><code>ALWAYS_UPDATE</code>: the caret always tracks document
            changes. For regular changes it increases its position
            if an insertion occurs before or at its current position,
            and decreases position if a removal occurs before
            its current position. For undo/redo updates it is always
            moved to the position where update occurred. The caret
            also tries to keep itself visible by calling
            <code>adjustVisibility</code> method.</li><li><code>UPDATE_WHEN_ON_EDT</code>: acts like <code>ALWAYS_UPDATE</code>
            if the document updates are performed on the Event Dispatching Thread
            and like <code>NEVER_UPDATE</code> if updates are performed on
            other thread. </li>
      </ul> <p>
      The default property value is <code>UPDATE_WHEN_ON_EDT</code>.
      @param policy one of the following values : <code>UPDATE_WHEN_ON_EDT</code>,
      <code>NEVER_UPDATE</code>, <code>ALWAYS_UPDATE</code>
      @throws IllegalArgumentException if invalid value is passed
      @see #getUpdatePolicy
      @see #adjustVisibility
      @see #UPDATE_WHEN_ON_EDT
      @see #NEVER_UPDATE
      @see #ALWAYS_UPDATE
      @since 1.5</p></div>
<a id="L202" name="L202"></a> 202     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setUpdatePolicy(<strong class="reserved">int</strong> policy) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203         updatePolicy = policy;
<a id="L204" name="L204"></a> 204     <em class="brace">}</em>
<a id="L205" name="L205"></a> 205 
<div class="comment">
      Gets the caret movement policy on document updates.
      @return one of the following values : <code>UPDATE_WHEN_ON_EDT</code>,
      <code>NEVER_UPDATE</code>, <code>ALWAYS_UPDATE</code>
      @see #setUpdatePolicy
      @see #UPDATE_WHEN_ON_EDT
      @see #NEVER_UPDATE
      @see #ALWAYS_UPDATE
      @since 1.5</div>
<a id="L219" name="L219"></a> 219     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19700.html" title="Multiple referred from 6 places.">getUpdatePolicy</a>() <em class="brace">{</em>
<a id="L220" name="L220"></a> 220         <strong class="reserved">return</strong> updatePolicy;
<a id="L221" name="L221"></a> 221     <em class="brace">}</em>
<a id="L222" name="L222"></a> 222 
<div class="comment">
      Gets the text editor component that this caret is
      is bound to.
      @return the component</div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> <a href="../R/15711.html" title="Multiple referred from 414 places.">getComponent</a>() <em class="brace">{</em>
<a id="L230" name="L230"></a> 230         <strong class="reserved">return</strong> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232 
<div class="comment">
      Cause the caret to be painted.  The repaint
      area is the bounding box of the caret (i.e.
      the caret rectangle or <em>this</em>).
      <p>
      This method is thread safe, although most Swing methods
      are not. Please see
      <a href="https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency
      in Swing</a> for more information.</p></div>
<a id="L243" name="L243"></a> 243     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/26120.html" title="Multiple referred from 412 places.">repaint</a>() <em class="brace">{</em>
<a id="L244" name="L244"></a> 244         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245             <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L246" name="L246"></a> 246         <em class="brace">}</em>
<a id="L247" name="L247"></a> 247     <em class="brace">}</em>
<a id="L248" name="L248"></a> 248 
<div class="comment">
      Damages the area surrounding the caret to cause
      it to be repainted in a new location.  If paint()
      is reimplemented, this method should also be
      reimplemented.  This method should update the
      caret bounds (x, y, width, and height).
      @param r  the current location of the caret
      @see #paint</div>
<a id="L259" name="L259"></a> 259     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/12890.html" title="Multiple referred from 7 places.">damage</a>(<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r) <em class="brace">{</em>
<a id="L260" name="L260"></a> 260         <strong class="reserved">if</strong> (r != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261             <strong class="reserved">int</strong> damageWidth = <a href="../S/3356.html#L1496" title="Defined at 1496 in src/javax/swing/text/DefaultCaret.java.">getCaretWidth</a>(r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L262" name="L262"></a> 262             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = r.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> - 4 - (damageWidth &gt;&gt; 1);
<a id="L263" name="L263"></a> 263             y = r.y;
<a id="L264" name="L264"></a> 264             <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = 9 + damageWidth;
<a id="L265" name="L265"></a> 265             <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> = r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>;
<a id="L266" name="L266"></a> 266             <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L267" name="L267"></a> 267         <em class="brace">}</em>
<a id="L268" name="L268"></a> 268     <em class="brace">}</em>
<a id="L269" name="L269"></a> 269 
<div class="comment">
      Scrolls the associated view (if necessary) to make
      the caret visible.  Since how this should be done
      is somewhat of a policy, this method can be
      reimplemented to change the behavior.  By default
      the scrollRectToVisible method is called on the
      associated component.
      @param nloc the new position to scroll to</div>
<a id="L280" name="L280"></a> 280     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/3356.html#L1313" title="Referred from 1313 in src/javax/swing/text/DefaultCaret.java.">adjustVisibility</a>(<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> nloc) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281         <strong class="reserved">if</strong>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282             <strong class="reserved">return</strong>;
<a id="L283" name="L283"></a> 283         <em class="brace">}</em>
<a id="L284" name="L284"></a> 284         <strong class="reserved">if</strong> (<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L1359" title="Defined at 1359 in src/javax/swing/SwingUtilities.java.">isEventDispatchThread</a>()) <em class="brace">{</em>
<a id="L285" name="L285"></a> 285                 <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/31645.html" title="Multiple defined in 3 places.">scrollRectToVisible</a>(nloc);
<a id="L286" name="L286"></a> 286         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L287" name="L287"></a> 287             <a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../D/25068.html" title="Multiple defined in 2 places.">invokeLater</a>(<strong class="reserved">new</strong> <a href="../D/7585.html" title="Multiple defined in 2 places.">SafeScroller</a>(nloc));
<a id="L288" name="L288"></a> 288         <em class="brace">}</em>
<a id="L289" name="L289"></a> 289     <em class="brace">}</em>
<a id="L290" name="L290"></a> 290 
<div class="comment">
      Gets the painter for the Highlighter.
      @return the painter</div>
<a id="L296" name="L296"></a> 296     <strong class="reserved">protected</strong> <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a>.<a href="../S/3239.html#L112" title="Defined at 112 in src/javax/swing/text/Highlighter.java.">HighlightPainter</a> <a href="../R/18942.html" title="Multiple referred from 2 places.">getSelectionPainter</a>() <em class="brace">{</em>
<a id="L297" name="L297"></a> 297         <strong class="reserved">return</strong> <a href="../S/3339.html#L39" title="Defined at 39 in src/javax/swing/text/DefaultHighlighter.java.">DefaultHighlighter</a>.DefaultPainter;
<a id="L298" name="L298"></a> 298     <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<div class="comment">
      Tries to set the position of the caret from
      the coordinates of a mouse event, using viewToModel().
      @param e the mouse event</div>
<a id="L306" name="L306"></a> 306     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/24842.html" title="Multiple referred from 2 places.">positionCaret</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L307" name="L307"></a> 307         <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> pt = <strong class="reserved">new</strong> <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a>(e.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>(), e.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>());
<a id="L308" name="L308"></a> 308         <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet = <strong class="reserved">new</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[1];
<a id="L309" name="L309"></a> 309         <strong class="reserved">int</strong> pos = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>().<a href="../D/36416.html" title="Multiple defined in 28 places.">viewToModel</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, pt, biasRet);
<a id="L310" name="L310"></a> 310         <strong class="reserved">if</strong>(biasRet[0] == <strong class="reserved">null</strong>)
<a id="L311" name="L311"></a> 311             biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L312" name="L312"></a> 312         <strong class="reserved">if</strong> (pos &gt;= 0) <em class="brace">{</em>
<a id="L313" name="L313"></a> 313             <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(pos, biasRet[0]);
<a id="L314" name="L314"></a> 314         <em class="brace">}</em>
<a id="L315" name="L315"></a> 315     <em class="brace">}</em>
<a id="L316" name="L316"></a> 316 
<div class="comment">
      Tries to move the position of the caret from
      the coordinates of a mouse event, using viewToModel().
      This will cause a selection if the dot and mark
      are different.
      @param e the mouse event</div>
<a id="L325" name="L325"></a> 325     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/23375.html" title="Multiple referred from 2 places.">moveCaret</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326         <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> pt = <strong class="reserved">new</strong> <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a>(e.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>(), e.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>());
<a id="L327" name="L327"></a> 327         <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet = <strong class="reserved">new</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[1];
<a id="L328" name="L328"></a> 328         <strong class="reserved">int</strong> pos = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>().<a href="../D/36416.html" title="Multiple defined in 28 places.">viewToModel</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, pt, biasRet);
<a id="L329" name="L329"></a> 329         <strong class="reserved">if</strong>(biasRet[0] == <strong class="reserved">null</strong>)
<a id="L330" name="L330"></a> 330             biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L331" name="L331"></a> 331         <strong class="reserved">if</strong> (pos &gt;= 0) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             <a href="../D/27808.html" title="Multiple defined in 8 places.">moveDot</a>(pos, biasRet[0]);
<a id="L333" name="L333"></a> 333         <em class="brace">}</em>
<a id="L334" name="L334"></a> 334     <em class="brace">}</em>
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336     <em class="comment">// --- FocusListener methods --------------------------</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
      Called when the component containing the caret gains
      focus.  This is implemented to set the caret to visible
      if the component is editable.
      @param e the focus event
      @see FocusListener#focusGained</div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14715.html" title="Multiple referred from 20 places.">focusGained</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> e) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()) <em class="brace">{</em>
<a id="L348" name="L348"></a> 348             <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25485.html" title="Multiple defined in 5 places.">isEditable</a>()) <em class="brace">{</em>
<a id="L349" name="L349"></a> 349                 <a href="../D/34303.html" title="Multiple defined in 23 places.">setVisible</a>(<strong class="reserved">true</strong>);
<a id="L350" name="L350"></a> 350             <em class="brace">}</em>
<a id="L351" name="L351"></a> 351             <a href="../D/33875.html" title="Multiple defined in 2 places.">setSelectionVisible</a>(<strong class="reserved">true</strong>);
<a id="L352" name="L352"></a> 352         <em class="brace">}</em>
<a id="L353" name="L353"></a> 353     <em class="brace">}</em>
<a id="L354" name="L354"></a> 354 
<div class="comment">
      Called when the component containing the caret loses
      focus.  This is implemented to set the caret to visibility
      to false.
      @param e the focus event
      @see FocusListener#focusLost</div>
<a id="L363" name="L363"></a> 363     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14716.html" title="Multiple referred from 16 places.">focusLost</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> e) <em class="brace">{</em>
<a id="L364" name="L364"></a> 364         <a href="../D/34303.html" title="Multiple defined in 23 places.">setVisible</a>(<strong class="reserved">false</strong>);
<a id="L365" name="L365"></a> 365         <a href="../D/33875.html" title="Multiple defined in 2 places.">setSelectionVisible</a>(ownsSelection || e.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>());
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<a id="L368" name="L368"></a> 368 
<div class="comment">
      Selects word based on the MouseEvent</div>
<a id="L372" name="L372"></a> 372     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/26748.html" title="Multiple referred from 6 places.">selectWord</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L373" name="L373"></a> 373         <strong class="reserved">if</strong> (selectedWordEvent != <strong class="reserved">null</strong>
<a id="L374" name="L374"></a> 374             &amp;&amp; selectedWordEvent.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>() == e.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>()
<a id="L375" name="L375"></a> 375             &amp;&amp; selectedWordEvent.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>() == e.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>()) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376             <em class="comment">//we already done selection for this</em>
<a id="L377" name="L377"></a> 377             <strong class="reserved">return</strong>;
<a id="L378" name="L378"></a> 378         <em class="brace">}</em>
<a id="L379" name="L379"></a> 379                     <a href="../D/306.html" title="Multiple defined in 5 places.">Action</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">null</strong>;
<a id="L380" name="L380"></a> 380                     <a href="../S/3374.html#L59" title="Defined at 59 in src/javax/swing/ActionMap.java.">ActionMap</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>().<a href="../D/16787.html" title="Multiple defined in 9 places.">getActionMap</a>();
<a id="L381" name="L381"></a> 381                     <strong class="reserved">if</strong> (<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382                         <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/3360.html#L73" title="Defined at 73 in src/javax/swing/text/DefaultEditorKit.java.">DefaultEditorKit</a>.selectWordAction);
<a id="L383" name="L383"></a> 383                     <em class="brace">}</em>
<a id="L384" name="L384"></a> 384                     <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385                         <strong class="reserved">if</strong> (<a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L386" name="L386"></a> 386                             <a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a> = <strong class="reserved">new</strong> <a href="../S/3360.html#L73" title="Defined at 73 in src/javax/swing/text/DefaultEditorKit.java.">DefaultEditorKit</a>.<a href="../S/3360.html#L2147" title="Defined at 2147 in src/javax/swing/text/DefaultEditorKit.java.">SelectWordAction</a>();
<a id="L387" name="L387"></a> 387                         <em class="brace">}</em>
<a id="L388" name="L388"></a> 388                         <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a>;
<a id="L389" name="L389"></a> 389                     <em class="brace">}</em>
<a id="L390" name="L390"></a> 390                     <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/10592.html" title="Multiple defined in 159 places.">actionPerformed</a>(<strong class="reserved">new</strong> <a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a>(<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>(),
<a id="L391" name="L391"></a> 391                                                       <a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a>.ACTION_PERFORMED, <strong class="reserved">null</strong>, e.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>(), e.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>()));
<a id="L392" name="L392"></a> 392         selectedWordEvent = e;
<a id="L393" name="L393"></a> 393     <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395     <em class="comment">// --- MouseListener methods -----------------------------------</em>
<a id="L396" name="L396"></a> 396 
<div class="comment">
      Called when the mouse is clicked.  If the click was generated
      from button1, a double click selects a word,
      and a triple click the current line.
      @param e the mouse event
      @see MouseListener#mouseClicked</div>
<a id="L405" name="L405"></a> 405     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23351.html" title="Multiple referred from 20 places.">mouseClicked</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L406" name="L406"></a> 406         <strong class="reserved">if</strong> (<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407             <strong class="reserved">return</strong>;
<a id="L408" name="L408"></a> 408         <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410         <strong class="reserved">int</strong> nclicks = SwingUtilities2.getAdjustedClickCount(<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>(), e);
<a id="L411" name="L411"></a> 411 
<a id="L412" name="L412"></a> 412         <strong class="reserved">if</strong> (! e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413             <strong class="reserved">if</strong> (<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L795" title="Defined at 795 in src/javax/swing/SwingUtilities.java.">isLeftMouseButton</a>(e)) <em class="brace">{</em>
<a id="L414" name="L414"></a> 414                 <em class="comment">// mouse 1 behavior</em>
<a id="L415" name="L415"></a> 415                 <strong class="reserved">if</strong>(nclicks == 1) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416                     selectedWordEvent = <strong class="reserved">null</strong>;
<a id="L417" name="L417"></a> 417                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>(nclicks == 2
<a id="L418" name="L418"></a> 418                           &amp;&amp; SwingUtilities2.canEventAccessSystemClipboard(e)) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                     <a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a>(e);
<a id="L420" name="L420"></a> 420                     selectedWordEvent = <strong class="reserved">null</strong>;
<a id="L421" name="L421"></a> 421                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>(nclicks == 3
<a id="L422" name="L422"></a> 422                           &amp;&amp; SwingUtilities2.canEventAccessSystemClipboard(e)) <em class="brace">{</em>
<a id="L423" name="L423"></a> 423                     <a href="../D/306.html" title="Multiple defined in 5 places.">Action</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <strong class="reserved">null</strong>;
<a id="L424" name="L424"></a> 424                     <a href="../S/3374.html#L59" title="Defined at 59 in src/javax/swing/ActionMap.java.">ActionMap</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>().<a href="../D/16787.html" title="Multiple defined in 9 places.">getActionMap</a>();
<a id="L425" name="L425"></a> 425                     <strong class="reserved">if</strong> (<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426                         <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/3360.html#L73" title="Defined at 73 in src/javax/swing/text/DefaultEditorKit.java.">DefaultEditorKit</a>.selectLineAction);
<a id="L427" name="L427"></a> 427                     <em class="brace">}</em>
<a id="L428" name="L428"></a> 428                     <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L429" name="L429"></a> 429                         <strong class="reserved">if</strong> (selectLine == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430                             selectLine = <strong class="reserved">new</strong> <a href="../S/3360.html#L73" title="Defined at 73 in src/javax/swing/text/DefaultEditorKit.java.">DefaultEditorKit</a>.<a href="../S/3360.html#L2176" title="Defined at 2176 in src/javax/swing/text/DefaultEditorKit.java.">SelectLineAction</a>();
<a id="L431" name="L431"></a> 431                         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432                         <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = selectLine;
<a id="L433" name="L433"></a> 433                     <em class="brace">}</em>
<a id="L434" name="L434"></a> 434                     <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/10592.html" title="Multiple defined in 159 places.">actionPerformed</a>(<strong class="reserved">new</strong> <a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a>(<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>(),
<a id="L435" name="L435"></a> 435                                                       <a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a>.ACTION_PERFORMED, <strong class="reserved">null</strong>, e.<a href="../D/23677.html" title="Multiple defined in 4 places.">getWhen</a>(), e.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>()));
<a id="L436" name="L436"></a> 436                 <em class="brace">}</em>
<a id="L437" name="L437"></a> 437             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L806" title="Defined at 806 in src/javax/swing/SwingUtilities.java.">isMiddleMouseButton</a>(e)) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438                 <em class="comment">// mouse 2 behavior</em>
<a id="L439" name="L439"></a> 439                 <strong class="reserved">if</strong> (nclicks == 1 &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25485.html" title="Multiple defined in 5 places.">isEditable</a>() &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()
<a id="L440" name="L440"></a> 440                     &amp;&amp; SwingUtilities2.canEventAccessSystemClipboard(e)) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441                     <em class="comment">// paste system selection, if it exists</em>
<a id="L442" name="L442"></a> 442                     <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) e.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L443" name="L443"></a> 443                     <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L444" name="L444"></a> 444                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L445" name="L445"></a> 445                             <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a> tk = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/23200.html" title="Multiple defined in 2 places.">getToolkit</a>();
<a id="L446" name="L446"></a> 446                             <a href="../S/2291.html#L53" title="Defined at 53 in src/java/awt/datatransfer/Clipboard.java.">Clipboard</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> = tk.<a href="../D/22928.html" title="Multiple defined in 2 places.">getSystemSelection</a>();
<a id="L447" name="L447"></a> 447                             <strong class="reserved">if</strong> (<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448                                 <em class="comment">// platform supports system selections, update it.</em>
<a id="L449" name="L449"></a> 449                                 <a href="../S/3356.html#L513" title="Defined at 513 in src/javax/swing/text/DefaultCaret.java.">adjustCaret</a>(e);
<a id="L450" name="L450"></a> 450                                 <a href="../S/3192.html#L88" title="Defined at 88 in src/javax/swing/TransferHandler.java.">TransferHandler</a> th = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/23244.html" title="Multiple defined in 7 places.">getTransferHandler</a>();
<a id="L451" name="L451"></a> 451                                 <strong class="reserved">if</strong> (th != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L452" name="L452"></a> 452                                     <a href="../S/2289.html#L42" title="Defined at 42 in src/java/awt/datatransfer/Transferable.java.">Transferable</a> trans = <strong class="reserved">null</strong>;
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454                                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L455" name="L455"></a> 455                                         trans = <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/17972.html" title="Multiple defined in 129 places.">getContents</a>(<strong class="reserved">null</strong>);
<a id="L456" name="L456"></a> 456                                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a> ise) <em class="brace">{</em>
<a id="L457" name="L457"></a> 457                                         <em class="comment">// clipboard was unavailable</em>
<a id="L458" name="L458"></a> 458                                         <a href="../S/3125.html#L177" title="Defined at 177 in src/javax/swing/UIManager.java.">UIManager</a>.<a href="../S/3125.html#L491" title="Defined at 491 in src/javax/swing/UIManager.java.">getLookAndFeel</a>().<a href="../D/29904.html" title="Multiple defined in 3 places.">provideErrorFeedback</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L459" name="L459"></a> 459                                     <em class="brace">}</em>
<a id="L460" name="L460"></a> 460 
<a id="L461" name="L461"></a> 461                                     <strong class="reserved">if</strong> (trans != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L462" name="L462"></a> 462                                         th.<a href="../D/24388.html" title="Multiple defined in 5 places.">importData</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, trans);
<a id="L463" name="L463"></a> 463                                     <em class="brace">}</em>
<a id="L464" name="L464"></a> 464                                 <em class="brace">}</em>
<a id="L465" name="L465"></a> 465                                 <a href="../S/3356.html#L527" title="Defined at 527 in src/javax/swing/text/DefaultCaret.java.">adjustFocus</a>(<strong class="reserved">true</strong>);
<a id="L466" name="L466"></a> 466                             <em class="brace">}</em>
<a id="L467" name="L467"></a> 467                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2385.html#L36" title="Defined at 36 in src/java/awt/HeadlessException.java.">HeadlessException</a> he) <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                             <em class="comment">// do nothing... there is no system clipboard</em>
<a id="L469" name="L469"></a> 469                         <em class="brace">}</em>
<a id="L470" name="L470"></a> 470                     <em class="brace">}</em>
<a id="L471" name="L471"></a> 471                 <em class="brace">}</em>
<a id="L472" name="L472"></a> 472             <em class="brace">}</em>
<a id="L473" name="L473"></a> 473         <em class="brace">}</em>
<a id="L474" name="L474"></a> 474     <em class="brace">}</em>
<a id="L475" name="L475"></a> 475 
<div class="comment">
      If button 1 is pressed, this is implemented to
      request focus on the associated text component,
      and to set the caret position. If the shift key is held down,
      the caret will be moved, potentially resulting in a selection,
      otherwise the
      caret position will be set to the new location.  If the component
      is not enabled, there will be no request for focus.
      @param e the mouse event
      @see MouseListener#mousePressed</div>
<a id="L488" name="L488"></a> 488     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23363.html" title="Multiple referred from 30 places.">mousePressed</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">int</strong> nclicks = SwingUtilities2.getAdjustedClickCount(<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>(), e);
<a id="L490" name="L490"></a> 490 
<a id="L491" name="L491"></a> 491         <strong class="reserved">if</strong> (<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L795" title="Defined at 795 in src/javax/swing/SwingUtilities.java.">isLeftMouseButton</a>(e)) <em class="brace">{</em>
<a id="L492" name="L492"></a> 492             <strong class="reserved">if</strong> (e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()) <em class="brace">{</em>
<a id="L493" name="L493"></a> 493                 shouldHandleRelease = <strong class="reserved">true</strong>;
<a id="L494" name="L494"></a> 494             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L495" name="L495"></a> 495                 shouldHandleRelease = <strong class="reserved">false</strong>;
<a id="L496" name="L496"></a> 496                 <a href="../S/3356.html#L505" title="Defined at 505 in src/javax/swing/text/DefaultCaret.java.">adjustCaretAndFocus</a>(e);
<a id="L497" name="L497"></a> 497                 <strong class="reserved">if</strong> (nclicks == 2
<a id="L498" name="L498"></a> 498                     &amp;&amp; SwingUtilities2.canEventAccessSystemClipboard(e)) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499                     <a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a>(e);
<a id="L500" name="L500"></a> 500                 <em class="brace">}</em>
<a id="L501" name="L501"></a> 501             <em class="brace">}</em>
<a id="L502" name="L502"></a> 502         <em class="brace">}</em>
<a id="L503" name="L503"></a> 503     <em class="brace">}</em>
<a id="L504" name="L504"></a> 504 
<a id="L505" name="L505"></a> 505     <strong class="reserved">void</strong> <a href="../R/10065.html" title="Multiple referred from 2 places.">adjustCaretAndFocus</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506         <a href="../S/3356.html#L513" title="Defined at 513 in src/javax/swing/text/DefaultCaret.java.">adjustCaret</a>(e);
<a id="L507" name="L507"></a> 507         <a href="../S/3356.html#L527" title="Defined at 527 in src/javax/swing/text/DefaultCaret.java.">adjustFocus</a>(<strong class="reserved">false</strong>);
<a id="L508" name="L508"></a> 508     <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<div class="comment">
      Adjusts the caret location based on the MouseEvent.</div>
<a id="L513" name="L513"></a> 513     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10064.html" title="Multiple referred from 2 places.">adjustCaret</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514         <strong class="reserved">if</strong> ((e.<a href="../D/20712.html" title="Multiple defined in 18 places.">getModifiers</a>() &amp; <a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a>.SHIFT_MASK) != 0 &amp;&amp;
<a id="L515" name="L515"></a> 515             <a href="../D/18581.html" title="Multiple defined in 4 places.">getDot</a>() != -1) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516             <a href="../S/3356.html#L325" title="Defined at 325 in src/javax/swing/text/DefaultCaret.java.">moveCaret</a>(e);
<a id="L517" name="L517"></a> 517         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!e.<a href="../D/26068.html" title="Multiple defined in 6 places.">isPopupTrigger</a>()) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518             <a href="../D/29465.html" title="Multiple defined in 2 places.">positionCaret</a>(e);
<a id="L519" name="L519"></a> 519         <em class="brace">}</em>
<a id="L520" name="L520"></a> 520     <em class="brace">}</em>
<a id="L521" name="L521"></a> 521 
<div class="comment">
      Adjusts the focus, if necessary.
      @param inWindow if true indicates requestFocusInWindow should be used</div>
<a id="L527" name="L527"></a> 527     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10072.html" title="Multiple referred from 10 places.">adjustFocus</a>(<strong class="reserved">boolean</strong> inWindow) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528         <strong class="reserved">if</strong> ((<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>() &amp;&amp;
<a id="L529" name="L529"></a> 529                                    <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3152.html#L1455" title="Defined at 1455 in src/javax/swing/JComponent.java.">isRequestFocusEnabled</a>()) <em class="brace">{</em>
<a id="L530" name="L530"></a> 530             <strong class="reserved">if</strong> (inWindow) <em class="brace">{</em>
<a id="L531" name="L531"></a> 531                 <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/31126.html" title="Multiple defined in 6 places.">requestFocusInWindow</a>();
<a id="L532" name="L532"></a> 532             <em class="brace">}</em>
<a id="L533" name="L533"></a> 533             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L534" name="L534"></a> 534                 <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/31123.html" title="Multiple defined in 22 places.">requestFocus</a>();
<a id="L535" name="L535"></a> 535             <em class="brace">}</em>
<a id="L536" name="L536"></a> 536         <em class="brace">}</em>
<a id="L537" name="L537"></a> 537     <em class="brace">}</em>
<a id="L538" name="L538"></a> 538 
<div class="comment">
      Called when the mouse is released.
      @param e the mouse event
      @see MouseListener#mouseReleased</div>
<a id="L545" name="L545"></a> 545     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23367.html" title="Multiple referred from 25 places.">mouseReleased</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L546" name="L546"></a> 546         <strong class="reserved">if</strong> (!e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()
<a id="L547" name="L547"></a> 547                 &amp;&amp; shouldHandleRelease
<a id="L548" name="L548"></a> 548                 &amp;&amp; <a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L795" title="Defined at 795 in src/javax/swing/SwingUtilities.java.">isLeftMouseButton</a>(e)) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550             <a href="../S/3356.html#L505" title="Defined at 505 in src/javax/swing/text/DefaultCaret.java.">adjustCaretAndFocus</a>(e);
<a id="L551" name="L551"></a> 551         <em class="brace">}</em>
<a id="L552" name="L552"></a> 552     <em class="brace">}</em>
<a id="L553" name="L553"></a> 553 
<div class="comment">
      Called when the mouse enters a region.
      @param e the mouse event
      @see MouseListener#mouseEntered</div>
<a id="L560" name="L560"></a> 560     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23357.html" title="Multiple referred from 19 places.">mouseEntered</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561     <em class="brace">}</em>
<a id="L562" name="L562"></a> 562 
<div class="comment">
      Called when the mouse exits a region.
      @param e the mouse event
      @see MouseListener#mouseExited</div>
<a id="L569" name="L569"></a> 569     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23359.html" title="Multiple referred from 18 places.">mouseExited</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L570" name="L570"></a> 570     <em class="brace">}</em>
<a id="L571" name="L571"></a> 571 
<a id="L572" name="L572"></a> 572     <em class="comment">// --- MouseMotionListener methods -------------------------</em>
<a id="L573" name="L573"></a> 573 
<div class="comment">
      Moves the caret position
      according to the mouse pointer's current
      location.  This effectively extends the
      selection.  By default, this is only done
      for mouse button 1.
      @param e the mouse event
      @see MouseMotionListener#mouseDragged</div>
<a id="L584" name="L584"></a> 584     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23354.html" title="Multiple referred from 20 places.">mouseDragged</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L585" name="L585"></a> 585         <strong class="reserved">if</strong> ((! e.<a href="../D/25364.html" title="Multiple defined in 4 places.">isConsumed</a>()) &amp;&amp; <a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L795" title="Defined at 795 in src/javax/swing/SwingUtilities.java.">isLeftMouseButton</a>(e)) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586             <a href="../S/3356.html#L325" title="Defined at 325 in src/javax/swing/text/DefaultCaret.java.">moveCaret</a>(e);
<a id="L587" name="L587"></a> 587         <em class="brace">}</em>
<a id="L588" name="L588"></a> 588     <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<div class="comment">
      Called when the mouse is moved.
      @param e the mouse event
      @see MouseMotionListener#mouseMoved</div>
<a id="L596" name="L596"></a> 596     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23361.html" title="Multiple referred from 19 places.">mouseMoved</a>(<a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> e) <em class="brace">{</em>
<a id="L597" name="L597"></a> 597     <em class="brace">}</em>
<a id="L598" name="L598"></a> 598 
<a id="L599" name="L599"></a> 599     <em class="comment">// ---- Caret methods ---------------------------------</em>
<a id="L600" name="L600"></a> 600 
<div class="comment">
      Renders the caret as a vertical line.  If this is reimplemented
      the damage method should also be reimplemented as it assumes the
      shape of the caret is a vertical line.  Sets the caret color to
      the value returned by getCaretColor().
      <p>
      If there are multiple text directions present in the associated
      document, a flag indicating the caret bias will be rendered.
      This will occur only if the associated document is a subclass
      of AbstractDocument and there are multiple bidi levels present
      in the bidi element structure (i.e. the text has multiple
      directions associated with it).
      @param g the graphics context
      @see #damage</p></div>
<a id="L617" name="L617"></a> 617     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g) <em class="brace">{</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">if</strong>(<a href="../D/26487.html" title="Multiple defined in 29 places.">isVisible</a>()) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L620" name="L620"></a> 620                 <a href="../S/2930.html#L39" title="Defined at 39 in src/javax/swing/plaf/TextUI.java.">TextUI</a> mapper = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>();
<a id="L621" name="L621"></a> 621                 <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r = mapper.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, dot, dotBias);
<a id="L622" name="L622"></a> 622 
<a id="L623" name="L623"></a> 623                 <strong class="reserved">if</strong> ((r == <strong class="reserved">null</strong>) || ((r.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> == 0) &amp;&amp; (r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> == 0))) <em class="brace">{</em>
<a id="L624" name="L624"></a> 624                     <strong class="reserved">return</strong>;
<a id="L625" name="L625"></a> 625                 <em class="brace">}</em>
<a id="L626" name="L626"></a> 626                 <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> &gt; 0 &amp;&amp; <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> &gt; 0 &amp;&amp;
<a id="L627" name="L627"></a> 627                                 !<strong class="reserved">this</strong>.<a href="../S/3356.html#L1449" title="Defined at 1449 in src/javax/swing/text/DefaultCaret.java.">_contains</a>(r.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, r.y, r.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>)) <em class="brace">{</em>
<a id="L628" name="L628"></a> 628                     <em class="comment">// We seem to have gotten out of sync and no longer</em>
<a id="L629" name="L629"></a> 629                     <em class="comment">// contain the right location, adjust accordingly.</em>
<a id="L630" name="L630"></a> 630                     <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> = g.<a href="../D/17730.html" title="Multiple defined in 3 places.">getClipBounds</a>();
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632                     <strong class="reserved">if</strong> (<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(<strong class="reserved">this</strong>)) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633                         <em class="comment">// Clip doesn't contain the old location, force it</em>
<a id="L634" name="L634"></a> 634                         <em class="comment">// to be repainted lest we leave a caret around.</em>
<a id="L635" name="L635"></a> 635                         <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L636" name="L636"></a> 636                     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637                     <em class="comment">// This will potentially cause a repaint of something</em>
<a id="L638" name="L638"></a> 638                     <em class="comment">// we're already repainting, but without changing the</em>
<a id="L639" name="L639"></a> 639                     <em class="comment">// semantics of damage we can't really get around this.</em>
<a id="L640" name="L640"></a> 640                     <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>(r);
<a id="L641" name="L641"></a> 641                 <em class="brace">}</em>
<a id="L642" name="L642"></a> 642                 g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L1198" title="Defined at 1198 in src/javax/swing/text/JTextComponent.java.">getCaretColor</a>());
<a id="L643" name="L643"></a> 643                 <strong class="reserved">int</strong> paintWidth = <a href="../S/3356.html#L1496" title="Defined at 1496 in src/javax/swing/text/DefaultCaret.java.">getCaretWidth</a>(r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L644" name="L644"></a> 644                 r.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> -= paintWidth  &gt;&gt; 1;
<a id="L645" name="L645"></a> 645                 g.<a href="../D/16053.html" title="Multiple defined in 2 places.">fillRect</a>(r.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, r.y, paintWidth, r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L646" name="L646"></a> 646 
<a id="L647" name="L647"></a> 647                 <em class="comment">// see if we should paint a flag to indicate the bias</em>
<a id="L648" name="L648"></a> 648                 <em class="comment">// of the caret.</em>
<a id="L649" name="L649"></a> 649                 <em class="comment">// PENDING(prinz) this should be done through</em>
<a id="L650" name="L650"></a> 650                 <em class="comment">// protected methods so that alternative LAF</em>
<a id="L651" name="L651"></a> 651                 <em class="comment">// will show bidi information.</em>
<a id="L652" name="L652"></a> 652                 <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L653" name="L653"></a> 653                 <strong class="reserved">if</strong> (doc <strong class="reserved">instanceof</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>) <em class="brace">{</em>
<a id="L654" name="L654"></a> 654                     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> bidi = ((<a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>)doc).<a href="../S/3268.html#L908" title="Defined at 908 in src/javax/swing/text/AbstractDocument.java.">getBidiRootElement</a>();
<a id="L655" name="L655"></a> 655                     <strong class="reserved">if</strong> ((bidi != <strong class="reserved">null</strong>) &amp;&amp; (bidi.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() &gt; 1)) <em class="brace">{</em>
<a id="L656" name="L656"></a> 656                         <em class="comment">// there are multiple directions present.</em>
<a id="L657" name="L657"></a> 657                         flagXPoints[0] = r.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> + ((dotLTR) ? paintWidth : 0);
<a id="L658" name="L658"></a> 658                         flagYPoints[0] = r.y;
<a id="L659" name="L659"></a> 659                         flagXPoints[1] = flagXPoints[0];
<a id="L660" name="L660"></a> 660                         flagYPoints[1] = flagYPoints[0] + 4;
<a id="L661" name="L661"></a> 661                         flagXPoints[2] = flagXPoints[0] + ((dotLTR) ? 4 : -4);
<a id="L662" name="L662"></a> 662                         flagYPoints[2] = flagYPoints[0];
<a id="L663" name="L663"></a> 663                         g.<a href="../D/16049.html" title="Multiple defined in 3 places.">fillPolygon</a>(flagXPoints, flagYPoints, 3);
<a id="L664" name="L664"></a> 664                     <em class="brace">}</em>
<a id="L665" name="L665"></a> 665                 <em class="brace">}</em>
<a id="L666" name="L666"></a> 666             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                 <em class="comment">// can't render I guess</em>
<a id="L668" name="L668"></a> 668                 <em class="comment">//System.err.println("Can't render cursor");</em>
<a id="L669" name="L669"></a> 669             <em class="brace">}</em>
<a id="L670" name="L670"></a> 670         <em class="brace">}</em>
<a id="L671" name="L671"></a> 671     <em class="brace">}</em>
<a id="L672" name="L672"></a> 672 
<div class="comment">
      Called when the UI is being installed into the
      interface of a JTextComponent.  This can be used
      to gain access to the model that is being navigated
      by the implementation of this interface.  Sets the dot
      and mark to 0, and establishes document, property change,
      focus, mouse, and mouse motion listeners.
      @param c the component
      @see Caret#install</div>
<a id="L684" name="L684"></a> 684     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20832.html" title="Multiple referred from 32 places.">install</a>(<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L685" name="L685"></a> 685         <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L686" name="L686"></a> 686         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L687" name="L687"></a> 687         dot = <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = 0;
<a id="L688" name="L688"></a> 688         dotLTR = markLTR = <strong class="reserved">true</strong>;
<a id="L689" name="L689"></a> 689         dotBias = markBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L690" name="L690"></a> 690         <strong class="reserved">if</strong> (doc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L691" name="L691"></a> 691             doc.<a href="../D/10761.html" title="Multiple defined in 3 places.">addDocumentListener</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L692" name="L692"></a> 692         <em class="brace">}</em>
<a id="L693" name="L693"></a> 693         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/11015.html" title="Multiple defined in 48 places.">addPropertyChangeListener</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L694" name="L694"></a> 694         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10812.html" title="Multiple defined in 12 places.">addFocusListener</a>(<strong class="reserved">this</strong>);
<a id="L695" name="L695"></a> 695         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10945.html" title="Multiple defined in 2 places.">addMouseListener</a>(<strong class="reserved">this</strong>);
<a id="L696" name="L696"></a> 696         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/10946.html" title="Multiple defined in 2 places.">addMouseMotionListener</a>(<strong class="reserved">this</strong>);
<a id="L697" name="L697"></a> 697 
<a id="L698" name="L698"></a> 698         <em class="comment">// if the component already has focus, it won't</em>
<a id="L699" name="L699"></a> 699         <em class="comment">// be notified.</em>
<a id="L700" name="L700"></a> 700         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/2177.html#L8034" title="Defined at 8034 in src/java/awt/Component.java.">hasFocus</a>()) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701             <a href="../D/16494.html" title="Multiple defined in 35 places.">focusGained</a>(<strong class="reserved">null</strong>);
<a id="L702" name="L702"></a> 702         <em class="brace">}</em>
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704         <a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a> ratio = (<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/3152.html#L4020" title="Defined at 4020 in src/javax/swing/JComponent.java.">getClientProperty</a>("caretAspectRatio");
<a id="L705" name="L705"></a> 705         <strong class="reserved">if</strong> (ratio != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L706" name="L706"></a> 706             aspectRatio = ratio.<a href="../D/16466.html" title="Multiple defined in 15 places.">floatValue</a>();
<a id="L707" name="L707"></a> 707         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L708" name="L708"></a> 708             aspectRatio = -1;
<a id="L709" name="L709"></a> 709         <em class="brace">}</em>
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/3152.html#L4020" title="Defined at 4020 in src/javax/swing/JComponent.java.">getClientProperty</a>("caretWidth");
<a id="L712" name="L712"></a> 712         <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713             caretWidth = <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L714" name="L714"></a> 714         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L715" name="L715"></a> 715             caretWidth = -1;
<a id="L716" name="L716"></a> 716         <em class="brace">}</em>
<a id="L717" name="L717"></a> 717     <em class="brace">}</em>
<a id="L718" name="L718"></a> 718 
<div class="comment">
      Called when the UI is being removed from the
      interface of a JTextComponent.  This is used to
      unregister any listeners that were attached.
      @param c the component
      @see Caret#deinstall</div>
<a id="L727" name="L727"></a> 727     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13194.html" title="Multiple referred from 5 places.">deinstall</a>(<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L728" name="L728"></a> 728         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/30883.html" title="Multiple defined in 2 places.">removeMouseListener</a>(<strong class="reserved">this</strong>);
<a id="L729" name="L729"></a> 729         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/30884.html" title="Multiple defined in 2 places.">removeMouseMotionListener</a>(<strong class="reserved">this</strong>);
<a id="L730" name="L730"></a> 730         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/30799.html" title="Multiple defined in 12 places.">removeFocusListener</a>(<strong class="reserved">this</strong>);
<a id="L731" name="L731"></a> 731         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/30926.html" title="Multiple defined in 44 places.">removePropertyChangeListener</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L732" name="L732"></a> 732         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L733" name="L733"></a> 733         <strong class="reserved">if</strong> (doc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L734" name="L734"></a> 734             doc.<a href="../D/30761.html" title="Multiple defined in 3 places.">removeDocumentListener</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L735" name="L735"></a> 735         <em class="brace">}</em>
<a id="L736" name="L736"></a> 736         <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L737" name="L737"></a> 737             <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> = <strong class="reserved">null</strong>;
<a id="L738" name="L738"></a> 738         <em class="brace">}</em>
<a id="L739" name="L739"></a> 739         <strong class="reserved">if</strong> (flasher != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L740" name="L740"></a> 740             flasher.<a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>();
<a id="L741" name="L741"></a> 741         <em class="brace">}</em>
<a id="L742" name="L742"></a> 742 
<a id="L743" name="L743"></a> 743 
<a id="L744" name="L744"></a> 744     <em class="brace">}</em>
<a id="L745" name="L745"></a> 745 
<div class="comment">
      Adds a listener to track whenever the caret position has
      been changed.
      @param l the listener
      @see Caret#addChangeListener</div>
<a id="L753" name="L753"></a> 753     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9640.html" title="Multiple referred from 51 places.">addChangeListener</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> l) <em class="brace">{</em>
<a id="L754" name="L754"></a> 754         listenerList.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>.<strong class="reserved">class</strong>, l);
<a id="L755" name="L755"></a> 755     <em class="brace">}</em>
<a id="L756" name="L756"></a> 756 
<div class="comment">
      Removes a listener that was tracking caret position changes.
      @param l the listener
      @see Caret#removeChangeListener</div>
<a id="L763" name="L763"></a> 763     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25919.html" title="Multiple referred from 42 places.">removeChangeListener</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a> l) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         listenerList.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>.<strong class="reserved">class</strong>, l);
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<div class="comment">
      Returns an array of all the change listeners
      registered on this caret.
      @return all of this caret's <code>ChangeListener</code>s
              or an empty
              array if no change listeners are currently registered
      @see #addChangeListener
      @see #removeChangeListener
      @since 1.4</div>
<a id="L780" name="L780"></a> 780     <strong class="reserved">public</strong> <a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>[] <a href="../R/15492.html" title="Multiple referred from 2 places.">getChangeListeners</a>() <em class="brace">{</em>
<a id="L781" name="L781"></a> 781         <strong class="reserved">return</strong> listenerList.<a href="../D/20173.html" title="Multiple defined in 32 places.">getListeners</a>(<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>.<strong class="reserved">class</strong>);
<a id="L782" name="L782"></a> 782     <em class="brace">}</em>
<a id="L783" name="L783"></a> 783 
<div class="comment">
      Notifies all listeners that have registered interest for
      notification on this event type.  The event instance
      is lazily created using the parameters passed into
      the fire method.  The listener list is processed last to first.
      @see EventListenerList</div>
<a id="L792" name="L792"></a> 792     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14609.html" title="Multiple referred from 41 places.">fireStateChanged</a>() <em class="brace">{</em>
<a id="L793" name="L793"></a> 793         <em class="comment">// Guaranteed to return a non-null array</em>
<a id="L794" name="L794"></a> 794         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] listeners = listenerList.<a href="../S/3406.html#L124" title="Defined at 124 in src/javax/swing/event/EventListenerList.java.">getListenerList</a>();
<a id="L795" name="L795"></a> 795         <em class="comment">// Process the listeners last to first, notifying</em>
<a id="L796" name="L796"></a> 796         <em class="comment">// those that are interested in this event</em>
<a id="L797" name="L797"></a> 797         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = listeners.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>-2; i&gt;=0; i-=2) <em class="brace">{</em>
<a id="L798" name="L798"></a> 798             <strong class="reserved">if</strong> (listeners[i]==<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L799" name="L799"></a> 799                 <em class="comment">// Lazily create the event:</em>
<a id="L800" name="L800"></a> 800                 <strong class="reserved">if</strong> (changeEvent == <strong class="reserved">null</strong>)
<a id="L801" name="L801"></a> 801                     changeEvent = <strong class="reserved">new</strong> <a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a>(<strong class="reserved">this</strong>);
<a id="L802" name="L802"></a> 802                 ((<a href="../S/3411.html#L36" title="Defined at 36 in src/javax/swing/event/ChangeListener.java.">ChangeListener</a>)listeners[i+1]).<a href="../D/34849.html" title="Multiple defined in 44 places.">stateChanged</a>(changeEvent);
<a id="L803" name="L803"></a> 803             <em class="brace">}</em>
<a id="L804" name="L804"></a> 804         <em class="brace">}</em>
<a id="L805" name="L805"></a> 805     <em class="brace">}</em>
<a id="L806" name="L806"></a> 806 
<div class="comment">
      Returns an array of all the objects currently registered
      as <code><em>Foo</em>Listener</code>s
      upon this caret.
      <code><em>Foo</em>Listener</code>s are registered using the
      <code>add<em>Foo</em>Listener</code> method.
      <p>
      You can specify the <code>listenerType</code> argument
      with a class literal,
      such as
      <code><em>Foo</em>Listener.class</code>.
      For example, you can query a
      <code>DefaultCaret</code> <code>c</code>
      for its change listeners with the following code:
      </p><pre>ChangeListener[] cls = (ChangeListener[])(c.getListeners(ChangeListener.class));</pre>
      If no such listeners exist, this method returns an empty array.
      @param listenerType the type of listeners requested; this parameter
               should specify an interface that descends from
               <code>java.util.EventListener</code>
      @return an array of all objects registered as
               <code><em>Foo</em>Listener</code>s on this component,
               or an empty array if no such
               listeners have been added
      @exception ClassCastException if <code>listenerType</code>
               doesn't specify a class or interface that implements
               <code>java.util.EventListener</code>
      @see #getChangeListeners
      @since 1.3</div>
<a id="L843" name="L843"></a> 843     <strong class="reserved">public</strong> &lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a> <strong class="reserved">extends</strong> <a href="../D/2994.html" title="Multiple defined in 2 places.">EventListener</a>&gt; <a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>[] <a href="../R/17397.html" title="Multiple referred from 122 places.">getListeners</a>(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;<a href="../D/8701.html" title="Multiple defined in 3 places.">T</a>&gt; listenerType) <em class="brace">{</em>
<a id="L844" name="L844"></a> 844         <strong class="reserved">return</strong> listenerList.<a href="../D/20173.html" title="Multiple defined in 32 places.">getListeners</a>(listenerType);
<a id="L845" name="L845"></a> 845     <em class="brace">}</em>
<a id="L846" name="L846"></a> 846 
<div class="comment">
      Changes the selection visibility.
      @param vis the new visibility</div>
<a id="L852" name="L852"></a> 852     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28155.html" title="Multiple referred from 5 places.">setSelectionVisible</a>(<strong class="reserved">boolean</strong> vis) <em class="brace">{</em>
<a id="L853" name="L853"></a> 853         <strong class="reserved">if</strong> (vis != selectionVisible) <em class="brace">{</em>
<a id="L854" name="L854"></a> 854             selectionVisible = vis;
<a id="L855" name="L855"></a> 855             <strong class="reserved">if</strong> (selectionVisible) <em class="brace">{</em>
<a id="L856" name="L856"></a> 856                 <em class="comment">// show</em>
<a id="L857" name="L857"></a> 857                 <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L858" name="L858"></a> 858                 <strong class="reserved">if</strong> ((dot != <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>) &amp;&amp; (h != <strong class="reserved">null</strong>) &amp;&amp; (selectionTag == <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L859" name="L859"></a> 859                     <strong class="reserved">int</strong> p0 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>);
<a id="L860" name="L860"></a> 860                     <strong class="reserved">int</strong> p1 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>);
<a id="L861" name="L861"></a> 861                     <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a>.<a href="../S/3239.html#L112" title="Defined at 112 in src/javax/swing/text/Highlighter.java.">HighlightPainter</a> p = <a href="../D/22376.html" title="Multiple defined in 3 places.">getSelectionPainter</a>();
<a id="L862" name="L862"></a> 862                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L863" name="L863"></a> 863                         selectionTag = h.<a href="../D/10841.html" title="Multiple defined in 2 places.">addHighlight</a>(p0, p1, p);
<a id="L864" name="L864"></a> 864                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> bl) <em class="brace">{</em>
<a id="L865" name="L865"></a> 865                         selectionTag = <strong class="reserved">null</strong>;
<a id="L866" name="L866"></a> 866                     <em class="brace">}</em>
<a id="L867" name="L867"></a> 867                 <em class="brace">}</em>
<a id="L868" name="L868"></a> 868             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L869" name="L869"></a> 869                 <em class="comment">// hide</em>
<a id="L870" name="L870"></a> 870                 <strong class="reserved">if</strong> (selectionTag != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L871" name="L871"></a> 871                     <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L872" name="L872"></a> 872                     h.<a href="../D/30814.html" title="Multiple defined in 2 places.">removeHighlight</a>(selectionTag);
<a id="L873" name="L873"></a> 873                     selectionTag = <strong class="reserved">null</strong>;
<a id="L874" name="L874"></a> 874                 <em class="brace">}</em>
<a id="L875" name="L875"></a> 875             <em class="brace">}</em>
<a id="L876" name="L876"></a> 876         <em class="brace">}</em>
<a id="L877" name="L877"></a> 877     <em class="brace">}</em>
<a id="L878" name="L878"></a> 878 
<div class="comment">
      Checks whether the current selection is visible.
      @return true if the selection is visible</div>
<a id="L884" name="L884"></a> 884     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22003.html" title="Multiple referred from 2 places.">isSelectionVisible</a>() <em class="brace">{</em>
<a id="L885" name="L885"></a> 885         <strong class="reserved">return</strong> selectionVisible;
<a id="L886" name="L886"></a> 886     <em class="brace">}</em>
<a id="L887" name="L887"></a> 887 
<div class="comment">
      Determines if the caret is currently active.
      <p>
      This method returns whether or not the <code>Caret</code>
      is currently in a blinking state. It does not provide
      information as to whether it is currently blinked on or off.
      To determine if the caret is currently painted use the
      <code>isVisible</code> method.
      @return <code>true</code> if active else <code>false</code>
      @see #isVisible
      @since 1.5</p></div>
<a id="L902" name="L902"></a> 902     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21137.html" title="Multiple referred from 67 places.">isActive</a>() <em class="brace">{</em>
<a id="L903" name="L903"></a> 903         <strong class="reserved">return</strong> <a href="../D/10612.html" title="Multiple defined in 4 places.">active</a>;
<a id="L904" name="L904"></a> 904     <em class="brace">}</em>
<a id="L905" name="L905"></a> 905 
<div class="comment">
      Indicates whether or not the caret is currently visible. As the
      caret flashes on and off the return value of this will change
      between true, when the caret is painted, and false, when the
      caret is not painted. <code>isActive</code> indicates whether
      or not the caret is in a blinking state, such that it <b>can</b>
      be visible, and <code>isVisible</code> indicates whether or not
      the caret <b>is</b> actually visible.
      <p>
      Subclasses that wish to render a different flashing caret
      should override paint and only paint the caret if this method
      returns true.
      @return true if visible else false
      @see Caret#isVisible
      @see #isActive</p></div>
<a id="L923" name="L923"></a> 923     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/22218.html" title="Multiple referred from 244 places.">isVisible</a>() <em class="brace">{</em>
<a id="L924" name="L924"></a> 924         <strong class="reserved">return</strong> visible;
<a id="L925" name="L925"></a> 925     <em class="brace">}</em>
<a id="L926" name="L926"></a> 926 
<div class="comment">
      Sets the caret visibility, and repaints the caret.
      It is important to understand the relationship between this method,
      <code>isVisible</code> and <code>isActive</code>.
      Calling this method with a value of <code>true</code> activates the
      caret blinking. Setting it to <code>false</code> turns it completely off.
      To determine whether the blinking is active, you should call
      <code>isActive</code>. In effect, <code>isActive</code> is an
      appropriate corresponding "getter" method for this one.
      <code>isVisible</code> can be used to fetch the current
      visibility status of the caret, meaning whether or not it is currently
      painted. This status will change as the caret blinks on and off.
      <p>
      Here's a list showing the potential return values of both
      <code>isActive</code> and <code>isVisible</code>
      after calling this method:
      </p><p>
      <b><code>setVisible(true)</code></b>:
      </p><ul><li>isActive(): true</li><li>isVisible(): true or false depending on whether
              or not the caret is blinked on or off</li>
      </ul>
      <p>
      <b><code>setVisible(false)</code></b>:
      </p><ul><li>isActive(): false</li><li>isVisible(): false</li>
      </ul>
      @param e the visibility specifier
      @see #isActive
      @see Caret#setVisible</div>
<a id="L961" name="L961"></a> 961     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28402.html" title="Multiple referred from 115 places.">setVisible</a>(<strong class="reserved">boolean</strong> e) <em class="brace">{</em>
<a id="L962" name="L962"></a> 962         <em class="comment">// focus lost notification can come in later after the</em>
<a id="L963" name="L963"></a> 963         <em class="comment">// caret has been deinstalled, in which case the component</em>
<a id="L964" name="L964"></a> 964         <em class="comment">// will be null.</em>
<a id="L965" name="L965"></a> 965         <a href="../D/10612.html" title="Multiple defined in 4 places.">active</a> = e;
<a id="L966" name="L966"></a> 966         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L967" name="L967"></a> 967             <a href="../S/2930.html#L39" title="Defined at 39 in src/javax/swing/plaf/TextUI.java.">TextUI</a> mapper = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>();
<a id="L968" name="L968"></a> 968             <strong class="reserved">if</strong> (visible != e) <em class="brace">{</em>
<a id="L969" name="L969"></a> 969                 visible = e;
<a id="L970" name="L970"></a> 970                 <em class="comment">// repaint the caret</em>
<a id="L971" name="L971"></a> 971                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L972" name="L972"></a> 972                     <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> loc = mapper.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, dot,dotBias);
<a id="L973" name="L973"></a> 973                     <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>(loc);
<a id="L974" name="L974"></a> 974                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> badloc) <em class="brace">{</em>
<a id="L975" name="L975"></a> 975                     <em class="comment">// hmm... not legally positioned</em>
<a id="L976" name="L976"></a> 976                 <em class="brace">}</em>
<a id="L977" name="L977"></a> 977             <em class="brace">}</em>
<a id="L978" name="L978"></a> 978         <em class="brace">}</em>
<a id="L979" name="L979"></a> 979         <strong class="reserved">if</strong> (flasher != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L980" name="L980"></a> 980             <strong class="reserved">if</strong> (visible) <em class="brace">{</em>
<a id="L981" name="L981"></a> 981                 flasher.<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>();
<a id="L982" name="L982"></a> 982             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L983" name="L983"></a> 983                 flasher.<a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>();
<a id="L984" name="L984"></a> 984             <em class="brace">}</em>
<a id="L985" name="L985"></a> 985         <em class="brace">}</em>
<a id="L986" name="L986"></a> 986     <em class="brace">}</em>
<a id="L987" name="L987"></a> 987 
<div class="comment">
      Sets the caret blink rate.
      @param rate the rate in milliseconds, 0 to stop blinking
      @see Caret#setBlinkRate</div>
<a id="L994" name="L994"></a> 994     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26951.html" title="Multiple referred from 3 places.">setBlinkRate</a>(<strong class="reserved">int</strong> rate) <em class="brace">{</em>
<a id="L995" name="L995"></a> 995         <strong class="reserved">if</strong> (rate != 0) <em class="brace">{</em>
<a id="L996" name="L996"></a> 996             <strong class="reserved">if</strong> (flasher == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L997" name="L997"></a> 997                 flasher = <strong class="reserved">new</strong> <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>(rate, <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L998" name="L998"></a> 998             <em class="brace">}</em>
<a id="L999" name="L999"></a> 999             flasher.<a href="../D/32423.html" title="Multiple defined in 2 places.">setDelay</a>(rate);
<a id="L1000" name="L1000"></a>1000         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001             <strong class="reserved">if</strong> (flasher != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1002" name="L1002"></a>1002                 flasher.<a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>();
<a id="L1003" name="L1003"></a>1003                 flasher.<a href="../D/30680.html" title="Multiple defined in 14 places.">removeActionListener</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L1004" name="L1004"></a>1004                 flasher = <strong class="reserved">null</strong>;
<a id="L1005" name="L1005"></a>1005             <em class="brace">}</em>
<a id="L1006" name="L1006"></a>1006         <em class="brace">}</em>
<a id="L1007" name="L1007"></a>1007     <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008 
<div class="comment">
      Gets the caret blink rate.
      @return the delay in milliseconds.  If this is
       zero the caret will not blink.
      @see Caret#getBlinkRate</div>
<a id="L1016" name="L1016"></a>1016     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/3351.html#L4913" title="Referred from 4913 in src/javax/swing/text/JTextComponent.java.">getBlinkRate</a>() <em class="brace">{</em>
<a id="L1017" name="L1017"></a>1017         <strong class="reserved">return</strong> (flasher == <strong class="reserved">null</strong>) ? 0 : flasher.<a href="../D/18399.html" title="Multiple defined in 5 places.">getDelay</a>();
<a id="L1018" name="L1018"></a>1018     <em class="brace">}</em>
<a id="L1019" name="L1019"></a>1019 
<div class="comment">
      Fetches the current position of the caret.
      @return the position &gt;= 0
      @see Caret#getDot</div>
<a id="L1026" name="L1026"></a>1026     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16240.html" title="Multiple referred from 43 places.">getDot</a>() <em class="brace">{</em>
<a id="L1027" name="L1027"></a>1027         <strong class="reserved">return</strong> dot;
<a id="L1028" name="L1028"></a>1028     <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029 
<div class="comment">
      Fetches the current position of the mark.  If there is a selection,
      the dot and mark will not be the same.
      @return the position &gt;= 0
      @see Caret#getMark</div>
<a id="L1037" name="L1037"></a>1037     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17555.html" title="Multiple referred from 21 places.">getMark</a>() <em class="brace">{</em>
<a id="L1038" name="L1038"></a>1038         <strong class="reserved">return</strong> <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>;
<a id="L1039" name="L1039"></a>1039     <em class="brace">}</em>
<a id="L1040" name="L1040"></a>1040 
<div class="comment">
      Sets the caret position and mark to the specified position,
      with a forward bias. This implicitly sets the
      selection range to zero.
      @param dot the position &gt;= 0
      @see #setDot(int, Position.Bias)
      @see Caret#setDot</div>
<a id="L1050" name="L1050"></a>1050     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27277.html" title="Multiple referred from 29 places.">setDot</a>(<strong class="reserved">int</strong> dot) <em class="brace">{</em>
<a id="L1051" name="L1051"></a>1051         <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1052" name="L1052"></a>1052     <em class="brace">}</em>
<a id="L1053" name="L1053"></a>1053 
<div class="comment">
      Moves the caret position to the specified position,
      with a forward bias.
      @param dot the position &gt;= 0
      @see #moveDot(int, javax.swing.text.Position.Bias)
      @see Caret#moveDot</div>
<a id="L1062" name="L1062"></a>1062     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23379.html" title="Multiple referred from 15 places.">moveDot</a>(<strong class="reserved">int</strong> dot) <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063         <a href="../D/27808.html" title="Multiple defined in 8 places.">moveDot</a>(dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1064" name="L1064"></a>1064     <em class="brace">}</em>
<a id="L1065" name="L1065"></a>1065 
<a id="L1066" name="L1066"></a>1066     <em class="comment">// ---- Bidi methods (we could put these in a subclass)</em>
<a id="L1067" name="L1067"></a>1067 
<div class="comment">
      Moves the caret position to the specified position, with the
      specified bias.
      @param dot the position &gt;= 0
      @param dotBias the bias for this position, not <code>null</code>
      @throws IllegalArgumentException if the bias is <code>null</code>
      @see Caret#moveDot
      @since 1.6</div>
<a id="L1078" name="L1078"></a>1078     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23379.html" title="Multiple referred from 15 places.">moveDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias) <em class="brace">{</em>
<a id="L1079" name="L1079"></a>1079         <strong class="reserved">if</strong> (dotBias == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1080" name="L1080"></a>1080             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("null bias");
<a id="L1081" name="L1081"></a>1081         <em class="brace">}</em>
<a id="L1082" name="L1082"></a>1082 
<a id="L1083" name="L1083"></a>1083         <strong class="reserved">if</strong> (! <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()) <em class="brace">{</em>
<a id="L1084" name="L1084"></a>1084             <em class="comment">// don't allow selection on disabled components.</em>
<a id="L1085" name="L1085"></a>1085             <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(dot, dotBias);
<a id="L1086" name="L1086"></a>1086             <strong class="reserved">return</strong>;
<a id="L1087" name="L1087"></a>1087         <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088         <strong class="reserved">if</strong> (dot != <strong class="reserved">this</strong>.dot) <em class="brace">{</em>
<a id="L1089" name="L1089"></a>1089             <a href="../S/3347.html#L51" title="Defined at 51 in src/javax/swing/text/NavigationFilter.java.">NavigationFilter</a> <a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a> = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/20847.html" title="Multiple defined in 3 places.">getNavigationFilter</a>();
<a id="L1090" name="L1090"></a>1090 
<a id="L1091" name="L1091"></a>1091             <strong class="reserved">if</strong> (<a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1092" name="L1092"></a>1092                 <a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>.<a href="../D/27808.html" title="Multiple defined in 8 places.">moveDot</a>(<a href="../D/19072.html" title="Multiple defined in 2 places.">getFilterBypass</a>(), dot, dotBias);
<a id="L1093" name="L1093"></a>1093             <em class="brace">}</em>
<a id="L1094" name="L1094"></a>1094             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095                 <a href="../S/3356.html#L1100" title="Defined at 1100 in src/javax/swing/text/DefaultCaret.java.">handleMoveDot</a>(dot, dotBias);
<a id="L1096" name="L1096"></a>1096             <em class="brace">}</em>
<a id="L1097" name="L1097"></a>1097         <em class="brace">}</em>
<a id="L1098" name="L1098"></a>1098     <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099 
<a id="L1100" name="L1100"></a>1100     <strong class="reserved">void</strong> <a href="../R/20117.html" title="Multiple referred from 2 places.">handleMoveDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias) <em class="brace">{</em>
<a id="L1101" name="L1101"></a>1101         <a href="../S/3356.html#L1258" title="Defined at 1258 in src/javax/swing/text/DefaultCaret.java.">changeCaretPosition</a>(dot, dotBias);
<a id="L1102" name="L1102"></a>1102 
<a id="L1103" name="L1103"></a>1103         <strong class="reserved">if</strong> (selectionVisible) <em class="brace">{</em>
<a id="L1104" name="L1104"></a>1104             <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L1105" name="L1105"></a>1105             <strong class="reserved">if</strong> (h != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106                 <strong class="reserved">int</strong> p0 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>);
<a id="L1107" name="L1107"></a>1107                 <strong class="reserved">int</strong> p1 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>);
<a id="L1108" name="L1108"></a>1108 
<a id="L1109" name="L1109"></a>1109                 <em class="comment">// if p0 == p1 then there should be no highlight, remove it if necessary</em>
<a id="L1110" name="L1110"></a>1110                 <strong class="reserved">if</strong> (p0 == p1) <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111                     <strong class="reserved">if</strong> (selectionTag != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1112" name="L1112"></a>1112                         h.<a href="../D/30814.html" title="Multiple defined in 2 places.">removeHighlight</a>(selectionTag);
<a id="L1113" name="L1113"></a>1113                         selectionTag = <strong class="reserved">null</strong>;
<a id="L1114" name="L1114"></a>1114                     <em class="brace">}</em>
<a id="L1115" name="L1115"></a>1115                 <em class="comment">// otherwise, change or add the highlight</em>
<a id="L1116" name="L1116"></a>1116                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1117" name="L1117"></a>1117                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1118" name="L1118"></a>1118                         <strong class="reserved">if</strong> (selectionTag != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1119" name="L1119"></a>1119                             h.<a href="../D/12298.html" title="Multiple defined in 2 places.">changeHighlight</a>(selectionTag, p0, p1);
<a id="L1120" name="L1120"></a>1120                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1121" name="L1121"></a>1121                             <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a>.<a href="../S/3239.html#L112" title="Defined at 112 in src/javax/swing/text/Highlighter.java.">HighlightPainter</a> p = <a href="../D/22376.html" title="Multiple defined in 3 places.">getSelectionPainter</a>();
<a id="L1122" name="L1122"></a>1122                             selectionTag = h.<a href="../D/10841.html" title="Multiple defined in 2 places.">addHighlight</a>(p0, p1, p);
<a id="L1123" name="L1123"></a>1123                         <em class="brace">}</em>
<a id="L1124" name="L1124"></a>1124                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("Bad caret position");
<a id="L1126" name="L1126"></a>1126                     <em class="brace">}</em>
<a id="L1127" name="L1127"></a>1127                 <em class="brace">}</em>
<a id="L1128" name="L1128"></a>1128             <em class="brace">}</em>
<a id="L1129" name="L1129"></a>1129         <em class="brace">}</em>
<a id="L1130" name="L1130"></a>1130     <em class="brace">}</em>
<a id="L1131" name="L1131"></a>1131 
<div class="comment">
      Sets the caret position and mark to the specified position, with the
      specified bias. This implicitly sets the selection range
      to zero.
      @param dot the position &gt;= 0
      @param dotBias the bias for this position, not <code>null</code>
      @throws IllegalArgumentException if the bias is <code>null</code>
      @see Caret#setDot
      @since 1.6</div>
<a id="L1143" name="L1143"></a>1143     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27277.html" title="Multiple referred from 29 places.">setDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias) <em class="brace">{</em>
<a id="L1144" name="L1144"></a>1144         <strong class="reserved">if</strong> (dotBias == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("null bias");
<a id="L1146" name="L1146"></a>1146         <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147 
<a id="L1148" name="L1148"></a>1148         <a href="../S/3347.html#L51" title="Defined at 51 in src/javax/swing/text/NavigationFilter.java.">NavigationFilter</a> <a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a> = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/20847.html" title="Multiple defined in 3 places.">getNavigationFilter</a>();
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150         <strong class="reserved">if</strong> (<a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1151" name="L1151"></a>1151             <a href="../D/16061.html" title="Multiple defined in 29 places.">filter</a>.<a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(<a href="../D/19072.html" title="Multiple defined in 2 places.">getFilterBypass</a>(), dot, dotBias);
<a id="L1152" name="L1152"></a>1152         <em class="brace">}</em>
<a id="L1153" name="L1153"></a>1153         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1154" name="L1154"></a>1154             <a href="../S/3356.html#L1158" title="Defined at 1158 in src/javax/swing/text/DefaultCaret.java.">handleSetDot</a>(dot, dotBias);
<a id="L1155" name="L1155"></a>1155         <em class="brace">}</em>
<a id="L1156" name="L1156"></a>1156     <em class="brace">}</em>
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158     <strong class="reserved">void</strong> <a href="../R/20143.html" title="Multiple referred from 3 places.">handleSetDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias) <em class="brace">{</em>
<a id="L1159" name="L1159"></a>1159         <em class="comment">// move dot, if it changed</em>
<a id="L1160" name="L1160"></a>1160         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1161" name="L1161"></a>1161         <strong class="reserved">if</strong> (doc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1162" name="L1162"></a>1162             dot = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, doc.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>());
<a id="L1163" name="L1163"></a>1163         <em class="brace">}</em>
<a id="L1164" name="L1164"></a>1164         dot = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(dot, 0);
<a id="L1165" name="L1165"></a>1165 
<a id="L1166" name="L1166"></a>1166         <em class="comment">// The position (0,Backward) is out of range so disallow it.</em>
<a id="L1167" name="L1167"></a>1167         <strong class="reserved">if</strong>( dot == 0 )
<a id="L1168" name="L1168"></a>1168             dotBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1169" name="L1169"></a>1169 
<a id="L1170" name="L1170"></a>1170         <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = dot;
<a id="L1171" name="L1171"></a>1171         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.dot != dot || <strong class="reserved">this</strong>.dotBias != dotBias ||
<a id="L1172" name="L1172"></a>1172             selectionTag != <strong class="reserved">null</strong> || forceCaretPositionChange) <em class="brace">{</em>
<a id="L1173" name="L1173"></a>1173             <a href="../S/3356.html#L1258" title="Defined at 1258 in src/javax/swing/text/DefaultCaret.java.">changeCaretPosition</a>(dot, dotBias);
<a id="L1174" name="L1174"></a>1174         <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175         <strong class="reserved">this</strong>.markBias = <strong class="reserved">this</strong>.dotBias;
<a id="L1176" name="L1176"></a>1176         <strong class="reserved">this</strong>.markLTR = dotLTR;
<a id="L1177" name="L1177"></a>1177         <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L1178" name="L1178"></a>1178         <strong class="reserved">if</strong> ((h != <strong class="reserved">null</strong>) &amp;&amp; (selectionTag != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L1179" name="L1179"></a>1179             h.<a href="../D/30814.html" title="Multiple defined in 2 places.">removeHighlight</a>(selectionTag);
<a id="L1180" name="L1180"></a>1180             selectionTag = <strong class="reserved">null</strong>;
<a id="L1181" name="L1181"></a>1181         <em class="brace">}</em>
<a id="L1182" name="L1182"></a>1182     <em class="brace">}</em>
<a id="L1183" name="L1183"></a>1183 
<div class="comment">
      Returns the bias of the caret position.
      @return the bias of the caret position
      @since 1.6</div>
<a id="L1190" name="L1190"></a>1190     <strong class="reserved">public</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> <a href="../R/16241.html" title="Multiple referred from 5 places.">getDotBias</a>() <em class="brace">{</em>
<a id="L1191" name="L1191"></a>1191         <strong class="reserved">return</strong> dotBias;
<a id="L1192" name="L1192"></a>1192     <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193 
<div class="comment">
      Returns the bias of the mark.
      @return the bias of the mark
      @since 1.6</div>
<a id="L1200" name="L1200"></a>1200     <strong class="reserved">public</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> <a href="../S/3351.html#L884" title="Referred from 884 in src/javax/swing/text/JTextComponent.java.">getMarkBias</a>() <em class="brace">{</em>
<a id="L1201" name="L1201"></a>1201         <strong class="reserved">return</strong> markBias;
<a id="L1202" name="L1202"></a>1202     <em class="brace">}</em>
<a id="L1203" name="L1203"></a>1203 
<a id="L1204" name="L1204"></a>1204     <strong class="reserved">boolean</strong> isDotLeftToRight() <em class="brace">{</em>
<a id="L1205" name="L1205"></a>1205         <strong class="reserved">return</strong> dotLTR;
<a id="L1206" name="L1206"></a>1206     <em class="brace">}</em>
<a id="L1207" name="L1207"></a>1207 
<a id="L1208" name="L1208"></a>1208     <strong class="reserved">boolean</strong> isMarkLeftToRight() <em class="brace">{</em>
<a id="L1209" name="L1209"></a>1209         <strong class="reserved">return</strong> markLTR;
<a id="L1210" name="L1210"></a>1210     <em class="brace">}</em>
<a id="L1211" name="L1211"></a>1211 
<a id="L1212" name="L1212"></a>1212     <strong class="reserved">boolean</strong> <a href="../R/21887.html" title="Multiple referred from 3 places.">isPositionLTR</a>(<strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> bias) <em class="brace">{</em>
<a id="L1213" name="L1213"></a>1213         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1214" name="L1214"></a>1214         <strong class="reserved">if</strong>(bias == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward &amp;&amp; --<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> &lt; 0)
<a id="L1215" name="L1215"></a>1215             <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> = 0;
<a id="L1216" name="L1216"></a>1216         <strong class="reserved">return</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>(doc, <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>);
<a id="L1217" name="L1217"></a>1217     <em class="brace">}</em>
<a id="L1218" name="L1218"></a>1218 
<a id="L1219" name="L1219"></a>1219     <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> <a href="../R/20052.html" title="Multiple referred from 3 places.">guessBiasForOffset</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> lastBias,
<a id="L1220" name="L1220"></a>1220                                      <strong class="reserved">boolean</strong> lastLTR) <em class="brace">{</em>
<a id="L1221" name="L1221"></a>1221         <em class="comment">// There is an abiguous case here. That if your model looks like:</em>
<a id="L1222" name="L1222"></a>1222         <em class="comment">// abAB with the cursor at abB]A (visual representation of</em>
<a id="L1223" name="L1223"></a>1223         <em class="comment">// 3 forward) deleting could either become abB] or</em>
<a id="L1224" name="L1224"></a>1224         <em class="comment">// ab[B. I'ld actually prefer abB]. But, if I implement that</em>
<a id="L1225" name="L1225"></a>1225         <em class="comment">// a delete at abBA] would result in aBA] vs a[BA which I</em>
<a id="L1226" name="L1226"></a>1226         <em class="comment">// think is totally wrong. To get this right we need to know what</em>
<a id="L1227" name="L1227"></a>1227         <em class="comment">// was deleted. And we could get this from the bidi structure</em>
<a id="L1228" name="L1228"></a>1228         <em class="comment">// in the change event. So:</em>
<a id="L1229" name="L1229"></a>1229         <em class="comment">// PENDING: base this off what was deleted.</em>
<a id="L1230" name="L1230"></a>1230         <strong class="reserved">if</strong>(lastLTR != <a href="../S/3356.html#L1212" title="Defined at 1212 in src/javax/swing/text/DefaultCaret.java.">isPositionLTR</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, lastBias)) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231             lastBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L1232" name="L1232"></a>1232         <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233         <strong class="reserved">else</strong> <strong class="reserved">if</strong>(lastBias != <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward &amp;&amp;
<a id="L1234" name="L1234"></a>1234                 lastLTR != <a href="../S/3356.html#L1212" title="Defined at 1212 in src/javax/swing/text/DefaultCaret.java.">isPositionLTR</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward)) <em class="brace">{</em>
<a id="L1235" name="L1235"></a>1235             lastBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L1236" name="L1236"></a>1236         <em class="brace">}</em>
<a id="L1237" name="L1237"></a>1237         <strong class="reserved">if</strong> (lastBias == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward &amp;&amp; <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> &gt; 0) <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1239" name="L1239"></a>1239                 <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>();
<a id="L1240" name="L1240"></a>1240                 <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> - 1, 1, s);
<a id="L1241" name="L1241"></a>1241                 <strong class="reserved">if</strong> (s.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0 &amp;&amp; s.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>] == '\n') <em class="brace">{</em>
<a id="L1242" name="L1242"></a>1242                     lastBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1243" name="L1243"></a>1243                 <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244             <em class="brace">}</em>
<a id="L1245" name="L1245"></a>1245             <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em><em class="brace">}</em>
<a id="L1246" name="L1246"></a>1246         <em class="brace">}</em>
<a id="L1247" name="L1247"></a>1247         <strong class="reserved">return</strong> lastBias;
<a id="L1248" name="L1248"></a>1248     <em class="brace">}</em>
<a id="L1249" name="L1249"></a>1249 
<a id="L1250" name="L1250"></a>1250     <em class="comment">// ---- local methods --------------------------------------------</em>
<a id="L1251" name="L1251"></a>1251 
<div class="comment">
      Sets the caret position (dot) to a new location.  This
      causes the old and new location to be repainted.  It
      also makes sure that the caret is within the visible
      region of the view, if the view is scrollable.</div>
<a id="L1258" name="L1258"></a>1258     <strong class="reserved">void</strong> <a href="../R/11013.html" title="Multiple referred from 2 places.">changeCaretPosition</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias) <em class="brace">{</em>
<a id="L1259" name="L1259"></a>1259         <em class="comment">// repaint the old position and set the new value of</em>
<a id="L1260" name="L1260"></a>1260         <em class="comment">// the dot.</em>
<a id="L1261" name="L1261"></a>1261         <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L1262" name="L1262"></a>1262 
<a id="L1263" name="L1263"></a>1263 
<a id="L1264" name="L1264"></a>1264         <em class="comment">// Make sure the caret is visible if this window has the focus.</em>
<a id="L1265" name="L1265"></a>1265         <strong class="reserved">if</strong> (flasher != <strong class="reserved">null</strong> &amp;&amp; flasher.<a href="../D/26198.html" title="Multiple defined in 5 places.">isRunning</a>()) <em class="brace">{</em>
<a id="L1266" name="L1266"></a>1266             visible = <strong class="reserved">true</strong>;
<a id="L1267" name="L1267"></a>1267             flasher.<a href="../D/31344.html" title="Multiple defined in 2 places.">restart</a>();
<a id="L1268" name="L1268"></a>1268         <em class="brace">}</em>
<a id="L1269" name="L1269"></a>1269 
<a id="L1270" name="L1270"></a>1270         <em class="comment">// notify listeners at the caret moved</em>
<a id="L1271" name="L1271"></a>1271         <strong class="reserved">this</strong>.dot = dot;
<a id="L1272" name="L1272"></a>1272         <strong class="reserved">this</strong>.dotBias = dotBias;
<a id="L1273" name="L1273"></a>1273         dotLTR = <a href="../S/3356.html#L1212" title="Defined at 1212 in src/javax/swing/text/DefaultCaret.java.">isPositionLTR</a>(dot, dotBias);
<a id="L1274" name="L1274"></a>1274         <a href="../D/16373.html" title="Multiple defined in 17 places.">fireStateChanged</a>();
<a id="L1275" name="L1275"></a>1275 
<a id="L1276" name="L1276"></a>1276         <a href="../S/3356.html#L1326" title="Defined at 1326 in src/javax/swing/text/DefaultCaret.java.">updateSystemSelection</a>();
<a id="L1277" name="L1277"></a>1277 
<a id="L1278" name="L1278"></a>1278         <a href="../D/33170.html" title="Multiple defined in 2 places.">setMagicCaretPosition</a>(<strong class="reserved">null</strong>);
<a id="L1279" name="L1279"></a>1279 
<a id="L1280" name="L1280"></a>1280         <em class="comment">// We try to repaint the caret later, since things</em>
<a id="L1281" name="L1281"></a>1281         <em class="comment">// may be unstable at the time this is called</em>
<a id="L1282" name="L1282"></a>1282         <em class="comment">// (i.e. we don't want to depend upon notification</em>
<a id="L1283" name="L1283"></a>1283         <em class="comment">// order or the fact that this might happen on</em>
<a id="L1284" name="L1284"></a>1284         <em class="comment">// an unsafe thread).</em>
<a id="L1285" name="L1285"></a>1285         <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> callRepaintNewCaret = <strong class="reserved">new</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>() <em class="brace">{</em>
<a id="L1286" name="L1286"></a>1286             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287                 <a href="../S/3356.html#L1299" title="Defined at 1299 in src/javax/swing/text/DefaultCaret.java.">repaintNewCaret</a>();
<a id="L1288" name="L1288"></a>1288             <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289         <em class="brace">}</em>;
<a id="L1290" name="L1290"></a>1290         <a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../D/25068.html" title="Multiple defined in 2 places.">invokeLater</a>(callRepaintNewCaret);
<a id="L1291" name="L1291"></a>1291     <em class="brace">}</em>
<a id="L1292" name="L1292"></a>1292 
<div class="comment">
      Repaints the new caret position, with the
      assumption that this is happening on the
      event thread so that calling <code>modelToView</code>
      is safe.</div>
<a id="L1299" name="L1299"></a>1299     <strong class="reserved">void</strong> <a href="../S/3356.html#L1287" title="Referred from 1287 in src/javax/swing/text/DefaultCaret.java.">repaintNewCaret</a>() <em class="brace">{</em>
<a id="L1300" name="L1300"></a>1300         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301             <a href="../S/2930.html#L39" title="Defined at 39 in src/javax/swing/plaf/TextUI.java.">TextUI</a> mapper = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>();
<a id="L1302" name="L1302"></a>1302             <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1303" name="L1303"></a>1303             <strong class="reserved">if</strong> ((mapper != <strong class="reserved">null</strong>) &amp;&amp; (doc != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L1304" name="L1304"></a>1304                 <em class="comment">// determine the new location and scroll if</em>
<a id="L1305" name="L1305"></a>1305                 <em class="comment">// not visible.</em>
<a id="L1306" name="L1306"></a>1306                 <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> newLoc;
<a id="L1307" name="L1307"></a>1307                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1308" name="L1308"></a>1308                     newLoc = mapper.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, <strong class="reserved">this</strong>.dot, <strong class="reserved">this</strong>.dotBias);
<a id="L1309" name="L1309"></a>1309                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310                     newLoc = <strong class="reserved">null</strong>;
<a id="L1311" name="L1311"></a>1311                 <em class="brace">}</em>
<a id="L1312" name="L1312"></a>1312                 <strong class="reserved">if</strong> (newLoc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1313" name="L1313"></a>1313                     <a href="../D/11245.html" title="Multiple defined in 2 places.">adjustVisibility</a>(newLoc);
<a id="L1314" name="L1314"></a>1314                     <em class="comment">// If there is no magic caret position, make one</em>
<a id="L1315" name="L1315"></a>1315                     <strong class="reserved">if</strong> (<a href="../D/20343.html" title="Multiple defined in 2 places.">getMagicCaretPosition</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1316" name="L1316"></a>1316                         <a href="../D/33170.html" title="Multiple defined in 2 places.">setMagicCaretPosition</a>(<strong class="reserved">new</strong> <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a>(newLoc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, newLoc.y));
<a id="L1317" name="L1317"></a>1317                     <em class="brace">}</em>
<a id="L1318" name="L1318"></a>1318                 <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319 
<a id="L1320" name="L1320"></a>1320                 <em class="comment">// repaint the new position</em>
<a id="L1321" name="L1321"></a>1321                 <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>(newLoc);
<a id="L1322" name="L1322"></a>1322             <em class="brace">}</em>
<a id="L1323" name="L1323"></a>1323         <em class="brace">}</em>
<a id="L1324" name="L1324"></a>1324     <em class="brace">}</em>
<a id="L1325" name="L1325"></a>1325 
<a id="L1326" name="L1326"></a>1326     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/3356.html#L1276" title="Referred from 1276 in src/javax/swing/text/DefaultCaret.java.">updateSystemSelection</a>() <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327         <strong class="reserved">if</strong> ( ! SwingUtilities2.canCurrentEventAccessSystemClipboard() ) <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328             <strong class="reserved">return</strong>;
<a id="L1329" name="L1329"></a>1329         <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330         <strong class="reserved">if</strong> (<strong class="reserved">this</strong>.dot != <strong class="reserved">this</strong>.<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/2177.html#L8034" title="Defined at 8034 in src/java/awt/Component.java.">hasFocus</a>()) <em class="brace">{</em>
<a id="L1331" name="L1331"></a>1331             <a href="../S/2291.html#L53" title="Defined at 53 in src/java/awt/datatransfer/Clipboard.java.">Clipboard</a> <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> = <a href="../D/22928.html" title="Multiple defined in 2 places.">getSystemSelection</a>();
<a id="L1332" name="L1332"></a>1332             <strong class="reserved">if</strong> (<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1333" name="L1333"></a>1333                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> selectedText;
<a id="L1334" name="L1334"></a>1334                 <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> <strong class="reserved">instanceof</strong> <a href="../S/2755.html#L77" title="Defined at 77 in src/javax/swing/JPasswordField.java.">JPasswordField</a>
<a id="L1335" name="L1335"></a>1335                     &amp;&amp; <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3152.html#L4020" title="Defined at 4020 in src/javax/swing/JComponent.java.">getClientProperty</a>("JPasswordField.cutCopyAllowed") !=
<a id="L1336" name="L1336"></a>1336                     <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE) <em class="brace">{</em>
<a id="L1337" name="L1337"></a>1337                     <em class="comment">//fix for 4793761</em>
<a id="L1338" name="L1338"></a>1338                     <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> txt = <strong class="reserved">null</strong>;
<a id="L1339" name="L1339"></a>1339                     <strong class="reserved">char</strong> echoChar = ((<a href="../S/2755.html#L77" title="Defined at 77 in src/javax/swing/JPasswordField.java.">JPasswordField</a>)<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>).<a href="../D/18635.html" title="Multiple defined in 2 places.">getEchoChar</a>();
<a id="L1340" name="L1340"></a>1340                     <strong class="reserved">int</strong> p0 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/18581.html" title="Multiple defined in 4 places.">getDot</a>(), <a href="../D/20387.html" title="Multiple defined in 4 places.">getMark</a>());
<a id="L1341" name="L1341"></a>1341                     <strong class="reserved">int</strong> p1 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(<a href="../D/18581.html" title="Multiple defined in 4 places.">getDot</a>(), <a href="../D/20387.html" title="Multiple defined in 4 places.">getMark</a>());
<a id="L1342" name="L1342"></a>1342                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = p0; i &lt; p1; i++) <em class="brace">{</em>
<a id="L1343" name="L1343"></a>1343                         <strong class="reserved">if</strong> (txt == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1344" name="L1344"></a>1344                             txt = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1345" name="L1345"></a>1345                         <em class="brace">}</em>
<a id="L1346" name="L1346"></a>1346                         txt.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(echoChar);
<a id="L1347" name="L1347"></a>1347                     <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348                     selectedText = (txt != <strong class="reserved">null</strong>) ? txt.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>() : <strong class="reserved">null</strong>;
<a id="L1349" name="L1349"></a>1349                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350                     selectedText = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/22360.html" title="Multiple defined in 12 places.">getSelectedText</a>();
<a id="L1351" name="L1351"></a>1351                 <em class="brace">}</em>
<a id="L1352" name="L1352"></a>1352                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1353" name="L1353"></a>1353                     <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.<a href="../S/2291.html#L119" title="Defined at 119 in src/java/awt/datatransfer/Clipboard.java.">setContents</a>(
<a id="L1354" name="L1354"></a>1354                         <strong class="reserved">new</strong> <a href="../S/2295.html#L45" title="Defined at 45 in src/java/awt/datatransfer/StringSelection.java.">StringSelection</a>(selectedText), <a href="../S/3356.html#L1377" title="Defined at 1377 in src/javax/swing/text/DefaultCaret.java.">getClipboardOwner</a>());
<a id="L1355" name="L1355"></a>1355 
<a id="L1356" name="L1356"></a>1356                     ownsSelection = <strong class="reserved">true</strong>;
<a id="L1357" name="L1357"></a>1357                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1555.html#L38" title="Defined at 38 in src/java/lang/IllegalStateException.java.">IllegalStateException</a> ise) <em class="brace">{</em>
<a id="L1358" name="L1358"></a>1358                     <em class="comment">// clipboard was unavailable</em>
<a id="L1359" name="L1359"></a>1359                     <em class="comment">// no need to provide error feedback to user since updating</em>
<a id="L1360" name="L1360"></a>1360                     <em class="comment">// the system selection is not a user invoked action</em>
<a id="L1361" name="L1361"></a>1361                 <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362             <em class="brace">}</em>
<a id="L1363" name="L1363"></a>1363         <em class="brace">}</em>
<a id="L1364" name="L1364"></a>1364     <em class="brace">}</em>
<a id="L1365" name="L1365"></a>1365 
<a id="L1366" name="L1366"></a>1366     <strong class="reserved">private</strong> <a href="../S/2291.html#L53" title="Defined at 53 in src/java/awt/datatransfer/Clipboard.java.">Clipboard</a> <a href="../R/19332.html" title="Multiple referred from 4 places.">getSystemSelection</a>() <em class="brace">{</em>
<a id="L1367" name="L1367"></a>1367         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1368" name="L1368"></a>1368             <strong class="reserved">return</strong> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23200.html" title="Multiple defined in 2 places.">getToolkit</a>().<a href="../D/22928.html" title="Multiple defined in 2 places.">getSystemSelection</a>();
<a id="L1369" name="L1369"></a>1369         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/2385.html#L36" title="Defined at 36 in src/java/awt/HeadlessException.java.">HeadlessException</a> he) <em class="brace">{</em>
<a id="L1370" name="L1370"></a>1370             <em class="comment">// do nothing... there is no system clipboard</em>
<a id="L1371" name="L1371"></a>1371         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> se) <em class="brace">{</em>
<a id="L1372" name="L1372"></a>1372             <em class="comment">// do nothing... there is no allowed system clipboard</em>
<a id="L1373" name="L1373"></a>1373         <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1375" name="L1375"></a>1375     <em class="brace">}</em>
<a id="L1376" name="L1376"></a>1376 
<a id="L1377" name="L1377"></a>1377     <strong class="reserved">private</strong> <a href="../S/2298.html#L44" title="Defined at 44 in src/java/awt/datatransfer/ClipboardOwner.java.">ClipboardOwner</a> <a href="../S/3356.html#L1354" title="Referred from 1354 in src/javax/swing/text/DefaultCaret.java.">getClipboardOwner</a>() <em class="brace">{</em>
<a id="L1378" name="L1378"></a>1378         <strong class="reserved">return</strong> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>;
<a id="L1379" name="L1379"></a>1379     <em class="brace">}</em>
<a id="L1380" name="L1380"></a>1380 
<div class="comment">
      This is invoked after the document changes to verify the current
      dot/mark is valid. We do this in case the <code>NavigationFilter</code>
      changed where to position the dot, that resulted in the current location
      being bogus.</div>
<a id="L1387" name="L1387"></a>1387     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13945.html" title="Multiple referred from 4 places.">ensureValidPosition</a>() <em class="brace">{</em>
<a id="L1388" name="L1388"></a>1388         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1389" name="L1389"></a>1389         <strong class="reserved">if</strong> (dot &gt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> || <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> &gt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1390" name="L1390"></a>1390             <em class="comment">// Current location is bogus and filter likely vetoed the</em>
<a id="L1391" name="L1391"></a>1391             <em class="comment">// change, force the reset without giving the filter a</em>
<a id="L1392" name="L1392"></a>1392             <em class="comment">// chance at changing it.</em>
<a id="L1393" name="L1393"></a>1393             <a href="../S/3356.html#L1158" title="Defined at 1158 in src/javax/swing/text/DefaultCaret.java.">handleSetDot</a>(<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1394" name="L1394"></a>1394         <em class="brace">}</em>
<a id="L1395" name="L1395"></a>1395     <em class="brace">}</em>
<a id="L1396" name="L1396"></a>1396 
<a id="L1397" name="L1397"></a>1397 
<div class="comment">
      Saves the current caret position.  This is used when
      caret up/down actions occur, moving between lines
      that have uneven end positions.
      @param p the position
      @see #getMagicCaretPosition</div>
<a id="L1406" name="L1406"></a>1406     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27710.html" title="Multiple referred from 4 places.">setMagicCaretPosition</a>(<a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> p) <em class="brace">{</em>
<a id="L1407" name="L1407"></a>1407         magicCaretPosition = p;
<a id="L1408" name="L1408"></a>1408     <em class="brace">}</em>
<a id="L1409" name="L1409"></a>1409 
<div class="comment">
      Gets the saved caret position.
      @return the position
      see #setMagicCaretPosition</div>
<a id="L1416" name="L1416"></a>1416     <strong class="reserved">public</strong> <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> <a href="../R/17523.html" title="Multiple referred from 6 places.">getMagicCaretPosition</a>() <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417         <strong class="reserved">return</strong> magicCaretPosition;
<a id="L1418" name="L1418"></a>1418     <em class="brace">}</em>
<a id="L1419" name="L1419"></a>1419 
<div class="comment">
      Compares this object to the specified object.
      The superclass behavior of comparing rectangles
      is not desired, so this is changed to the Object
      behavior.
      @param     obj   the object to compare this font with
      @return    <code>true</code> if the objects are equal;
                 <code>false</code> otherwise</div>
<a id="L1430" name="L1430"></a>1430     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L1431" name="L1431"></a>1431         <strong class="reserved">return</strong> (<strong class="reserved">this</strong> == obj);
<a id="L1432" name="L1432"></a>1432     <em class="brace">}</em>
<a id="L1433" name="L1433"></a>1433 
<a id="L1434" name="L1434"></a>1434     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1435" name="L1435"></a>1435         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = "Dot=(" + dot + ", " + dotBias + ")";
<a id="L1436" name="L1436"></a>1436         s += " Mark=(" + <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> + ", " + markBias + ")";
<a id="L1437" name="L1437"></a>1437         <strong class="reserved">return</strong> s;
<a id="L1438" name="L1438"></a>1438     <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439 
<a id="L1440" name="L1440"></a>1440     <strong class="reserved">private</strong> <a href="../S/3347.html#L51" title="Defined at 51 in src/javax/swing/text/NavigationFilter.java.">NavigationFilter</a>.<a href="../D/3245.html" title="Multiple defined in 2 places.">FilterBypass</a> <a href="../R/16591.html" title="Multiple referred from 5 places.">getFilterBypass</a>() <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441         <strong class="reserved">if</strong> (filterBypass == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1442" name="L1442"></a>1442             filterBypass = <strong class="reserved">new</strong> <a href="../D/2277.html" title="Multiple defined in 2 places.">DefaultFilterBypass</a>();
<a id="L1443" name="L1443"></a>1443         <em class="brace">}</em>
<a id="L1444" name="L1444"></a>1444         <strong class="reserved">return</strong> filterBypass;
<a id="L1445" name="L1445"></a>1445     <em class="brace">}</em>
<a id="L1446" name="L1446"></a>1446 
<a id="L1447" name="L1447"></a>1447     <em class="comment">// Rectangle.contains returns false if passed a rect with a w or h == 0,</em>
<a id="L1448" name="L1448"></a>1448     <em class="comment">// this won't (assuming X,Y are contained with this rectangle).</em>
<a id="L1449" name="L1449"></a>1449     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/3356.html#L627" title="Referred from 627 in src/javax/swing/text/DefaultCaret.java.">_contains</a>(<strong class="reserved">int</strong> X, <strong class="reserved">int</strong> Y, <strong class="reserved">int</strong> W, <strong class="reserved">int</strong> H) <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450         <strong class="reserved">int</strong> w = <strong class="reserved">this</strong>.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>;
<a id="L1451" name="L1451"></a>1451         <strong class="reserved">int</strong> h = <strong class="reserved">this</strong>.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>;
<a id="L1452" name="L1452"></a>1452         <strong class="reserved">if</strong> ((w | h | W | H) &lt; 0) <em class="brace">{</em>
<a id="L1453" name="L1453"></a>1453             <em class="comment">// At least one of the dimensions is negative...</em>
<a id="L1454" name="L1454"></a>1454             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1455" name="L1455"></a>1455         <em class="brace">}</em>
<a id="L1456" name="L1456"></a>1456         <em class="comment">// Note: if any dimension is zero, tests below must return false...</em>
<a id="L1457" name="L1457"></a>1457         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <strong class="reserved">this</strong>.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1458" name="L1458"></a>1458         <strong class="reserved">int</strong> y = <strong class="reserved">this</strong>.y;
<a id="L1459" name="L1459"></a>1459         <strong class="reserved">if</strong> (X &lt; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> || Y &lt; y) <em class="brace">{</em>
<a id="L1460" name="L1460"></a>1460             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1461" name="L1461"></a>1461         <em class="brace">}</em>
<a id="L1462" name="L1462"></a>1462         <strong class="reserved">if</strong> (W &gt; 0) <em class="brace">{</em>
<a id="L1463" name="L1463"></a>1463             w += <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L1464" name="L1464"></a>1464             W += X;
<a id="L1465" name="L1465"></a>1465             <strong class="reserved">if</strong> (W &lt;= X) <em class="brace">{</em>
<a id="L1466" name="L1466"></a>1466                 <em class="comment">// X+W overflowed or W was zero, return false if...</em>
<a id="L1467" name="L1467"></a>1467                 <em class="comment">// either original w or W was zero or</em>
<a id="L1468" name="L1468"></a>1468                 <em class="comment">// x+w did not overflow or</em>
<a id="L1469" name="L1469"></a>1469                 <em class="comment">// the overflowed x+w is smaller than the overflowed X+W</em>
<a id="L1470" name="L1470"></a>1470                 <strong class="reserved">if</strong> (w &gt;= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> || W &gt; w) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1471" name="L1471"></a>1471             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1472" name="L1472"></a>1472                 <em class="comment">// X+W did not overflow and W was not zero, return false if...</em>
<a id="L1473" name="L1473"></a>1473                 <em class="comment">// original w was zero or</em>
<a id="L1474" name="L1474"></a>1474                 <em class="comment">// x+w did not overflow and x+w is smaller than X+W</em>
<a id="L1475" name="L1475"></a>1475                 <strong class="reserved">if</strong> (w &gt;= <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &amp;&amp; W &gt; w) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1476" name="L1476"></a>1476             <em class="brace">}</em>
<a id="L1477" name="L1477"></a>1477         <em class="brace">}</em>
<a id="L1478" name="L1478"></a>1478         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> + w) &lt; X) <em class="brace">{</em>
<a id="L1479" name="L1479"></a>1479             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1480" name="L1480"></a>1480         <em class="brace">}</em>
<a id="L1481" name="L1481"></a>1481         <strong class="reserved">if</strong> (H &gt; 0) <em class="brace">{</em>
<a id="L1482" name="L1482"></a>1482             h += y;
<a id="L1483" name="L1483"></a>1483             H += Y;
<a id="L1484" name="L1484"></a>1484             <strong class="reserved">if</strong> (H &lt;= Y) <em class="brace">{</em>
<a id="L1485" name="L1485"></a>1485                 <strong class="reserved">if</strong> (h &gt;= y || H &gt; h) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1486" name="L1486"></a>1486             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1487" name="L1487"></a>1487                 <strong class="reserved">if</strong> (h &gt;= y &amp;&amp; H &gt; h) <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1488" name="L1488"></a>1488             <em class="brace">}</em>
<a id="L1489" name="L1489"></a>1489         <em class="brace">}</em>
<a id="L1490" name="L1490"></a>1490         <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((y + h) &lt; Y) <em class="brace">{</em>
<a id="L1491" name="L1491"></a>1491             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1492" name="L1492"></a>1492         <em class="brace">}</em>
<a id="L1493" name="L1493"></a>1493         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1494" name="L1494"></a>1494     <em class="brace">}</em>
<a id="L1495" name="L1495"></a>1495 
<a id="L1496" name="L1496"></a>1496     <strong class="reserved">int</strong> <a href="../R/15454.html" title="Multiple referred from 2 places.">getCaretWidth</a>(<strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L1497" name="L1497"></a>1497         <strong class="reserved">if</strong> (aspectRatio &gt; -1) <em class="brace">{</em>
<a id="L1498" name="L1498"></a>1498             <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (aspectRatio * <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) + 1;
<a id="L1499" name="L1499"></a>1499         <em class="brace">}</em>
<a id="L1500" name="L1500"></a>1500 
<a id="L1501" name="L1501"></a>1501         <strong class="reserved">if</strong> (caretWidth &gt; -1) <em class="brace">{</em>
<a id="L1502" name="L1502"></a>1502             <strong class="reserved">return</strong> caretWidth;
<a id="L1503" name="L1503"></a>1503         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1504" name="L1504"></a>1504             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> property = <a href="../S/3125.html#L177" title="Defined at 177 in src/javax/swing/UIManager.java.">UIManager</a>.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("Caret.width");
<a id="L1505" name="L1505"></a>1505             <strong class="reserved">if</strong> (property <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L1506" name="L1506"></a>1506                 <strong class="reserved">return</strong> ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) property).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L1507" name="L1507"></a>1507             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1508" name="L1508"></a>1508                 <strong class="reserved">return</strong> 1;
<a id="L1509" name="L1509"></a>1509             <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510         <em class="brace">}</em>
<a id="L1511" name="L1511"></a>1511     <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512 
<a id="L1513" name="L1513"></a>1513     <em class="comment">// --- serialization ---------------------------------------------</em>
<a id="L1514" name="L1514"></a>1514 
<a id="L1515" name="L1515"></a>1515     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> s)
<a id="L1516" name="L1516"></a>1516       <strong class="reserved">throws</strong> <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1517" name="L1517"></a>1517     <em class="brace">{</em>
<a id="L1518" name="L1518"></a>1518         s.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L1519" name="L1519"></a>1519         <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a> = <strong class="reserved">new</strong> <a href="../D/3727.html" title="Multiple defined in 33 places.">Handler</a>();
<a id="L1520" name="L1520"></a>1520         <strong class="reserved">if</strong> (!s.<a href="../D/30135.html" title="Multiple defined in 10 places.">readBoolean</a>()) <em class="brace">{</em>
<a id="L1521" name="L1521"></a>1521             dotBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1522" name="L1522"></a>1522         <em class="brace">}</em>
<a id="L1523" name="L1523"></a>1523         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1524" name="L1524"></a>1524             dotBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L1525" name="L1525"></a>1525         <em class="brace">}</em>
<a id="L1526" name="L1526"></a>1526         <strong class="reserved">if</strong> (!s.<a href="../D/30135.html" title="Multiple defined in 10 places.">readBoolean</a>()) <em class="brace">{</em>
<a id="L1527" name="L1527"></a>1527             markBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1528" name="L1528"></a>1528         <em class="brace">}</em>
<a id="L1529" name="L1529"></a>1529         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1530" name="L1530"></a>1530             markBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L1531" name="L1531"></a>1531         <em class="brace">}</em>
<a id="L1532" name="L1532"></a>1532     <em class="brace">}</em>
<a id="L1533" name="L1533"></a>1533 
<a id="L1534" name="L1534"></a>1534     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1535" name="L1535"></a>1535         s.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();
<a id="L1536" name="L1536"></a>1536         s.<a href="../D/37001.html" title="Multiple defined in 10 places.">writeBoolean</a>((dotBias == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward));
<a id="L1537" name="L1537"></a>1537         s.<a href="../D/37001.html" title="Multiple defined in 10 places.">writeBoolean</a>((markBias == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward));
<a id="L1538" name="L1538"></a>1538     <em class="brace">}</em>
<a id="L1539" name="L1539"></a>1539 
<a id="L1540" name="L1540"></a>1540     <em class="comment">// ---- member variables ------------------------------------------</em>
<a id="L1541" name="L1541"></a>1541 
<div class="comment">
      The event listener list.</div>
<a id="L1545" name="L1545"></a>1545     <strong class="reserved">protected</strong> <a href="../S/3406.html#L101" title="Defined at 101 in src/javax/swing/event/EventListenerList.java.">EventListenerList</a> listenerList = <strong class="reserved">new</strong> <a href="../S/3406.html#L101" title="Defined at 101 in src/javax/swing/event/EventListenerList.java.">EventListenerList</a>();
<a id="L1546" name="L1546"></a>1546 
<div class="comment">
      The change event for the model.
      Only one ChangeEvent is needed per model instance since the
      event's only (read-only) state is the source property.  The source
      of events generated here is always "this".</div>
<a id="L1553" name="L1553"></a>1553     <strong class="reserved">protected</strong> <strong class="reserved">transient</strong> <a href="../S/3414.html#L46" title="Defined at 46 in src/javax/swing/event/ChangeEvent.java.">ChangeEvent</a> changeEvent = <strong class="reserved">null</strong>;
<a id="L1554" name="L1554"></a>1554 
<a id="L1555" name="L1555"></a>1555     <em class="comment">// package-private to avoid inner classes private member</em>
<a id="L1556" name="L1556"></a>1556     <em class="comment">// access bug</em>
<a id="L1557" name="L1557"></a>1557     <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L1558" name="L1558"></a>1558 
<a id="L1559" name="L1559"></a>1559     <strong class="reserved">int</strong> updatePolicy = UPDATE_WHEN_ON_EDT;
<a id="L1560" name="L1560"></a>1560     <strong class="reserved">boolean</strong> visible;
<a id="L1561" name="L1561"></a>1561     <strong class="reserved">boolean</strong> <a href="../D/10612.html" title="Multiple defined in 4 places.">active</a>;
<a id="L1562" name="L1562"></a>1562     <strong class="reserved">int</strong> dot;
<a id="L1563" name="L1563"></a>1563     <strong class="reserved">int</strong> <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>;
<a id="L1564" name="L1564"></a>1564     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> selectionTag;
<a id="L1565" name="L1565"></a>1565     <strong class="reserved">boolean</strong> selectionVisible;
<a id="L1566" name="L1566"></a>1566     <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a> flasher;
<a id="L1567" name="L1567"></a>1567     <a href="../S/2123.html#L38" title="Defined at 38 in src/java/awt/Point.java.">Point</a> magicCaretPosition;
<a id="L1568" name="L1568"></a>1568     <strong class="reserved">transient</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias;
<a id="L1569" name="L1569"></a>1569     <strong class="reserved">transient</strong> <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> markBias;
<a id="L1570" name="L1570"></a>1570     <strong class="reserved">boolean</strong> dotLTR;
<a id="L1571" name="L1571"></a>1571     <strong class="reserved">boolean</strong> markLTR;
<a id="L1572" name="L1572"></a>1572     <strong class="reserved">transient</strong> <a href="../D/3727.html" title="Multiple defined in 33 places.">Handler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a> = <strong class="reserved">new</strong> <a href="../D/3727.html" title="Multiple defined in 33 places.">Handler</a>();
<a id="L1573" name="L1573"></a>1573     <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] flagXPoints = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[3];
<a id="L1574" name="L1574"></a>1574     <strong class="reserved">transient</strong> <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] flagYPoints = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[3];
<a id="L1575" name="L1575"></a>1575     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../S/3347.html#L51" title="Defined at 51 in src/javax/swing/text/NavigationFilter.java.">NavigationFilter</a>.<a href="../D/3245.html" title="Multiple defined in 2 places.">FilterBypass</a> filterBypass;
<a id="L1576" name="L1576"></a>1576     <strong class="reserved">static</strong> <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/306.html" title="Multiple defined in 5 places.">Action</a> <a href="../S/3356.html#L372" title="Defined at 372 in src/javax/swing/text/DefaultCaret.java.">selectWord</a> = <strong class="reserved">null</strong>;
<a id="L1577" name="L1577"></a>1577     <strong class="reserved">static</strong> <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/306.html" title="Multiple defined in 5 places.">Action</a> selectLine = <strong class="reserved">null</strong>;
<div class="comment">
      This is used to indicate if the caret currently owns the selection.
      This is always false if the system does not support the system
      clipboard.</div>
<a id="L1583" name="L1583"></a>1583     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> ownsSelection;
<a id="L1584" name="L1584"></a>1584 
<div class="comment">
      If this is true, the location of the dot is updated regardless of
      the current location. This is set in the DocumentListener
      such that even if the model location of dot hasn't changed (perhaps do
      to a forward delete) the visual location is updated.</div>
<a id="L1591" name="L1591"></a>1591     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> forceCaretPositionChange;
<a id="L1592" name="L1592"></a>1592 
<div class="comment">
      Whether or not mouseReleased should adjust the caret and focus.
      This flag is set by mousePressed if it wanted to adjust the caret
      and focus but couldn't because of a possible DnD operation.</div>
<a id="L1598" name="L1598"></a>1598     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> shouldHandleRelease;
<a id="L1599" name="L1599"></a>1599 
<a id="L1600" name="L1600"></a>1600 
<div class="comment">
      holds last MouseEvent which caused the word selection</div>
<a id="L1604" name="L1604"></a>1604     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/5776.html" title="Multiple defined in 2 places.">MouseEvent</a> selectedWordEvent = <strong class="reserved">null</strong>;
<a id="L1605" name="L1605"></a>1605 
<div class="comment">
      The width of the caret in pixels.</div>
<a id="L1609" name="L1609"></a>1609     <strong class="reserved">private</strong> <strong class="reserved">int</strong> caretWidth = -1;
<a id="L1610" name="L1610"></a>1610     <strong class="reserved">private</strong> <strong class="reserved">float</strong> aspectRatio = -1;
<a id="L1611" name="L1611"></a>1611 
<a id="L1612" name="L1612"></a>1612     <strong class="reserved">class</strong> <a href="../R/6904.html" title="Multiple referred from 2 places.">SafeScroller</a> <strong class="reserved">implements</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <em class="brace">{</em>
<a id="L1613" name="L1613"></a>1613 
<a id="L1614" name="L1614"></a>1614         SafeScroller(<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r) <em class="brace">{</em>
<a id="L1615" name="L1615"></a>1615             <strong class="reserved">this</strong>.r = r;
<a id="L1616" name="L1616"></a>1616         <em class="brace">}</em>
<a id="L1617" name="L1617"></a>1617 
<a id="L1618" name="L1618"></a>1618         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a>() <em class="brace">{</em>
<a id="L1619" name="L1619"></a>1619             <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620                 <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/31645.html" title="Multiple defined in 3 places.">scrollRectToVisible</a>(r);
<a id="L1621" name="L1621"></a>1621             <em class="brace">}</em>
<a id="L1622" name="L1622"></a>1622         <em class="brace">}</em>
<a id="L1623" name="L1623"></a>1623 
<a id="L1624" name="L1624"></a>1624         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r;
<a id="L1625" name="L1625"></a>1625     <em class="brace">}</em>
<a id="L1626" name="L1626"></a>1626 
<a id="L1627" name="L1627"></a>1627 
<a id="L1628" name="L1628"></a>1628     <strong class="reserved">class</strong> <a href="../R/3376.html" title="Multiple referred from 140 places.">Handler</a> <strong class="reserved">implements</strong> <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a>, <a href="../S/3408.html#L53" title="Defined at 53 in src/javax/swing/event/DocumentListener.java.">DocumentListener</a>, <a href="../S/2397.html#L45" title="Defined at 45 in src/java/awt/event/ActionListener.java.">ActionListener</a>, <a href="../S/2298.html#L44" title="Defined at 44 in src/java/awt/datatransfer/ClipboardOwner.java.">ClipboardOwner</a> <em class="brace">{</em>
<a id="L1629" name="L1629"></a>1629 
<a id="L1630" name="L1630"></a>1630         <em class="comment">// --- ActionListener methods ----------------------------------</em>
<a id="L1631" name="L1631"></a>1631 
<div class="comment">
          Invoked when the blink timer fires.  This is called
          asynchronously.  The simply changes the visibility
          and repaints the rectangle that last bounded the caret.
          @param e the action event</div>
<a id="L1639" name="L1639"></a>1639         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9558.html" title="Multiple referred from 49 places.">actionPerformed</a>(<a href="../S/2432.html#L60" title="Defined at 60 in src/java/awt/event/ActionEvent.java.">ActionEvent</a> e) <em class="brace">{</em>
<a id="L1640" name="L1640"></a>1640             <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> == 0 || <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> == 0) <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641                 <em class="comment">// setVisible(true) will cause a scroll, only do this if the</em>
<a id="L1642" name="L1642"></a>1642                 <em class="comment">// new location is really valid.</em>
<a id="L1643" name="L1643"></a>1643                 <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1644" name="L1644"></a>1644                     <a href="../S/2930.html#L39" title="Defined at 39 in src/javax/swing/plaf/TextUI.java.">TextUI</a> mapper = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/23358.html" title="Multiple defined in 33 places.">getUI</a>();
<a id="L1645" name="L1645"></a>1645                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1646" name="L1646"></a>1646                         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r = mapper.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, dot,
<a id="L1647" name="L1647"></a>1647                                                          dotBias);
<a id="L1648" name="L1648"></a>1648                         <strong class="reserved">if</strong> (r != <strong class="reserved">null</strong> &amp;&amp; r.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> != 0 &amp;&amp; r.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> != 0) <em class="brace">{</em>
<a id="L1649" name="L1649"></a>1649                             <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>(r);
<a id="L1650" name="L1650"></a>1650                         <em class="brace">}</em>
<a id="L1651" name="L1651"></a>1651                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em>
<a id="L1652" name="L1652"></a>1652                     <em class="brace">}</em>
<a id="L1653" name="L1653"></a>1653                 <em class="brace">}</em>
<a id="L1654" name="L1654"></a>1654             <em class="brace">}</em>
<a id="L1655" name="L1655"></a>1655             visible = !visible;
<a id="L1656" name="L1656"></a>1656             <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L1657" name="L1657"></a>1657         <em class="brace">}</em>
<a id="L1658" name="L1658"></a>1658 
<a id="L1659" name="L1659"></a>1659         <em class="comment">// --- DocumentListener methods --------------------------------</em>
<a id="L1660" name="L1660"></a>1660 
<div class="comment">
          Updates the dot and mark if they were changed by
          the insertion.
          @param e the document event
          @see DocumentListener#insertUpdate</div>
<a id="L1668" name="L1668"></a>1668         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20799.html" title="Multiple referred from 23 places.">insertUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e) <em class="brace">{</em>
<a id="L1669" name="L1669"></a>1669             <strong class="reserved">if</strong> (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == NEVER_UPDATE ||
<a id="L1670" name="L1670"></a>1670                     (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == UPDATE_WHEN_ON_EDT &amp;&amp;
<a id="L1671" name="L1671"></a>1671                     !<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L1359" title="Defined at 1359 in src/javax/swing/SwingUtilities.java.">isEventDispatchThread</a>())) <em class="brace">{</em>
<a id="L1672" name="L1672"></a>1672 
<a id="L1673" name="L1673"></a>1673                 <strong class="reserved">if</strong> ((e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>() &lt;= dot || e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>() &lt;= <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>)
<a id="L1674" name="L1674"></a>1674                         &amp;&amp; selectionTag != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1675" name="L1675"></a>1675                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1676" name="L1676"></a>1676                         <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>().<a href="../D/12298.html" title="Multiple defined in 2 places.">changeHighlight</a>(selectionTag,
<a id="L1677" name="L1677"></a>1677                                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>), <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>));
<a id="L1678" name="L1678"></a>1678                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e1) <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679                         e1.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>();
<a id="L1680" name="L1680"></a>1680                     <em class="brace">}</em>
<a id="L1681" name="L1681"></a>1681                 <em class="brace">}</em>
<a id="L1682" name="L1682"></a>1682                 <strong class="reserved">return</strong>;
<a id="L1683" name="L1683"></a>1683             <em class="brace">}</em>
<a id="L1684" name="L1684"></a>1684             <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L1685" name="L1685"></a>1685             <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = e.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1686" name="L1686"></a>1686             <strong class="reserved">int</strong> newDot = dot;
<a id="L1687" name="L1687"></a>1687             <strong class="reserved">short</strong> <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> = 0;
<a id="L1688" name="L1688"></a>1688 
<a id="L1689" name="L1689"></a>1689             <strong class="reserved">if</strong> (e <strong class="reserved">instanceof</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../S/3268.html#L2948" title="Defined at 2948 in src/javax/swing/text/AbstractDocument.java.">UndoRedoDocumentEvent</a>) <em class="brace">{</em>
<a id="L1690" name="L1690"></a>1690                 <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1691" name="L1691"></a>1691                 <strong class="reserved">return</strong>;
<a id="L1692" name="L1692"></a>1692             <em class="brace">}</em>
<a id="L1693" name="L1693"></a>1693             <strong class="reserved">if</strong> (newDot &gt;= <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1694" name="L1694"></a>1694                 newDot += <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1695" name="L1695"></a>1695                 <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> |= 1;
<a id="L1696" name="L1696"></a>1696             <em class="brace">}</em>
<a id="L1697" name="L1697"></a>1697             <strong class="reserved">int</strong> newMark = <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>;
<a id="L1698" name="L1698"></a>1698             <strong class="reserved">if</strong> (newMark &gt;= <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1699" name="L1699"></a>1699                 newMark += <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L1700" name="L1700"></a>1700                 <a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> |= 2;
<a id="L1701" name="L1701"></a>1701             <em class="brace">}</em>
<a id="L1702" name="L1702"></a>1702 
<a id="L1703" name="L1703"></a>1703             <strong class="reserved">if</strong> (<a href="../D/12315.html" title="Multiple defined in 4 places.">changed</a> != 0) <em class="brace">{</em>
<a id="L1704" name="L1704"></a>1704                 <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias = <a href="../S/3356.html#L108" title="Defined at 108 in src/javax/swing/text/DefaultCaret.java.">DefaultCaret</a>.<strong class="reserved">this</strong>.dotBias;
<a id="L1705" name="L1705"></a>1705                 <strong class="reserved">if</strong> (dot == <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1706" name="L1706"></a>1706                     <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1707" name="L1707"></a>1707                     <strong class="reserved">boolean</strong> <a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a>;
<a id="L1708" name="L1708"></a>1708                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1709" name="L1709"></a>1709                         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>();
<a id="L1710" name="L1710"></a>1710                         doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(newDot - 1, 1, s);
<a id="L1711" name="L1711"></a>1711                         <a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a> = (s.<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0 &amp;&amp;
<a id="L1712" name="L1712"></a>1712                                 s.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[s.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>] == '\n');
<a id="L1713" name="L1713"></a>1713                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em>
<a id="L1714" name="L1714"></a>1714                         <a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a> = <strong class="reserved">false</strong>;
<a id="L1715" name="L1715"></a>1715                     <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716                     <strong class="reserved">if</strong> (<a href="../S/4535.html#L1729" title="Defined at 1729 in src/com/sun/org/apache/regexp/internal/RE.java.">isNewline</a>) <em class="brace">{</em>
<a id="L1717" name="L1717"></a>1717                         dotBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L1718" name="L1718"></a>1718                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1719" name="L1719"></a>1719                         dotBias = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L1720" name="L1720"></a>1720                     <em class="brace">}</em>
<a id="L1721" name="L1721"></a>1721                 <em class="brace">}</em>
<a id="L1722" name="L1722"></a>1722                 <strong class="reserved">if</strong> (newMark == newDot) <em class="brace">{</em>
<a id="L1723" name="L1723"></a>1723                     <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(newDot, dotBias);
<a id="L1724" name="L1724"></a>1724                     <a href="../S/3356.html#L1387" title="Defined at 1387 in src/javax/swing/text/DefaultCaret.java.">ensureValidPosition</a>();
<a id="L1725" name="L1725"></a>1725                 <em class="brace">}</em>
<a id="L1726" name="L1726"></a>1726                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1727" name="L1727"></a>1727                     <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(newMark, markBias);
<a id="L1728" name="L1728"></a>1728                     <strong class="reserved">if</strong> (<a href="../D/18581.html" title="Multiple defined in 4 places.">getDot</a>() == newMark) <em class="brace">{</em>
<a id="L1729" name="L1729"></a>1729                         <em class="comment">// Due this test in case the filter vetoed the</em>
<a id="L1730" name="L1730"></a>1730                         <em class="comment">// change in which case this probably won't be</em>
<a id="L1731" name="L1731"></a>1731                         <em class="comment">// valid either.</em>
<a id="L1732" name="L1732"></a>1732                         <a href="../D/27808.html" title="Multiple defined in 8 places.">moveDot</a>(newDot, dotBias);
<a id="L1733" name="L1733"></a>1733                     <em class="brace">}</em>
<a id="L1734" name="L1734"></a>1734                     <a href="../S/3356.html#L1387" title="Defined at 1387 in src/javax/swing/text/DefaultCaret.java.">ensureValidPosition</a>();
<a id="L1735" name="L1735"></a>1735                 <em class="brace">}</em>
<a id="L1736" name="L1736"></a>1736             <em class="brace">}</em>
<a id="L1737" name="L1737"></a>1737         <em class="brace">}</em>
<a id="L1738" name="L1738"></a>1738 
<div class="comment">
          Updates the dot and mark if they were changed
          by the removal.
          @param e the document event
          @see DocumentListener#removeUpdate</div>
<a id="L1746" name="L1746"></a>1746         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26095.html" title="Multiple referred from 20 places.">removeUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e) <em class="brace">{</em>
<a id="L1747" name="L1747"></a>1747             <strong class="reserved">if</strong> (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == NEVER_UPDATE ||
<a id="L1748" name="L1748"></a>1748                     (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == UPDATE_WHEN_ON_EDT &amp;&amp;
<a id="L1749" name="L1749"></a>1749                     !<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L1359" title="Defined at 1359 in src/javax/swing/SwingUtilities.java.">isEventDispatchThread</a>())) <em class="brace">{</em>
<a id="L1750" name="L1750"></a>1750 
<a id="L1751" name="L1751"></a>1751                 <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1752" name="L1752"></a>1752                 dot = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1753" name="L1753"></a>1753                 <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>, <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1754" name="L1754"></a>1754                 <strong class="reserved">if</strong> ((e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>() &lt; dot || e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>() &lt; <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>)
<a id="L1755" name="L1755"></a>1755                         &amp;&amp; selectionTag != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1757" name="L1757"></a>1757                         <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>().<a href="../D/12298.html" title="Multiple defined in 2 places.">changeHighlight</a>(selectionTag,
<a id="L1758" name="L1758"></a>1758                                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>), <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(dot, <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>));
<a id="L1759" name="L1759"></a>1759                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e1) <em class="brace">{</em>
<a id="L1760" name="L1760"></a>1760                         e1.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>();
<a id="L1761" name="L1761"></a>1761                     <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762                 <em class="brace">}</em>
<a id="L1763" name="L1763"></a>1763                 <strong class="reserved">return</strong>;
<a id="L1764" name="L1764"></a>1764             <em class="brace">}</em>
<a id="L1765" name="L1765"></a>1765             <strong class="reserved">int</strong> offs0 = e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>();
<a id="L1766" name="L1766"></a>1766             <strong class="reserved">int</strong> offs1 = offs0 + e.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1767" name="L1767"></a>1767             <strong class="reserved">int</strong> newDot = dot;
<a id="L1768" name="L1768"></a>1768             <strong class="reserved">boolean</strong> adjustDotBias = <strong class="reserved">false</strong>;
<a id="L1769" name="L1769"></a>1769             <strong class="reserved">int</strong> newMark = <a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>;
<a id="L1770" name="L1770"></a>1770             <strong class="reserved">boolean</strong> adjustMarkBias = <strong class="reserved">false</strong>;
<a id="L1771" name="L1771"></a>1771 
<a id="L1772" name="L1772"></a>1772             <strong class="reserved">if</strong>(e <strong class="reserved">instanceof</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../S/3268.html#L2948" title="Defined at 2948 in src/javax/swing/text/AbstractDocument.java.">UndoRedoDocumentEvent</a>) <em class="brace">{</em>
<a id="L1773" name="L1773"></a>1773                 <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(offs0);
<a id="L1774" name="L1774"></a>1774                 <strong class="reserved">return</strong>;
<a id="L1775" name="L1775"></a>1775             <em class="brace">}</em>
<a id="L1776" name="L1776"></a>1776             <strong class="reserved">if</strong> (newDot &gt;= offs1) <em class="brace">{</em>
<a id="L1777" name="L1777"></a>1777                 newDot -= (offs1 - offs0);
<a id="L1778" name="L1778"></a>1778                 <strong class="reserved">if</strong>(newDot == offs1) <em class="brace">{</em>
<a id="L1779" name="L1779"></a>1779                     adjustDotBias = <strong class="reserved">true</strong>;
<a id="L1780" name="L1780"></a>1780                 <em class="brace">}</em>
<a id="L1781" name="L1781"></a>1781             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (newDot &gt;= offs0) <em class="brace">{</em>
<a id="L1782" name="L1782"></a>1782                 newDot = offs0;
<a id="L1783" name="L1783"></a>1783                 adjustDotBias = <strong class="reserved">true</strong>;
<a id="L1784" name="L1784"></a>1784             <em class="brace">}</em>
<a id="L1785" name="L1785"></a>1785             <strong class="reserved">if</strong> (newMark &gt;= offs1) <em class="brace">{</em>
<a id="L1786" name="L1786"></a>1786                 newMark -= (offs1 - offs0);
<a id="L1787" name="L1787"></a>1787                 <strong class="reserved">if</strong>(newMark == offs1) <em class="brace">{</em>
<a id="L1788" name="L1788"></a>1788                     adjustMarkBias = <strong class="reserved">true</strong>;
<a id="L1789" name="L1789"></a>1789                 <em class="brace">}</em>
<a id="L1790" name="L1790"></a>1790             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (newMark &gt;= offs0) <em class="brace">{</em>
<a id="L1791" name="L1791"></a>1791                 newMark = offs0;
<a id="L1792" name="L1792"></a>1792                 adjustMarkBias = <strong class="reserved">true</strong>;
<a id="L1793" name="L1793"></a>1793             <em class="brace">}</em>
<a id="L1794" name="L1794"></a>1794             <strong class="reserved">if</strong> (newMark == newDot) <em class="brace">{</em>
<a id="L1795" name="L1795"></a>1795                 forceCaretPositionChange = <strong class="reserved">true</strong>;
<a id="L1796" name="L1796"></a>1796                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1797" name="L1797"></a>1797                     <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(newDot, <a href="../S/3356.html#L1219" title="Defined at 1219 in src/javax/swing/text/DefaultCaret.java.">guessBiasForOffset</a>(newDot, dotBias,
<a id="L1798" name="L1798"></a>1798                             dotLTR));
<a id="L1799" name="L1799"></a>1799                 <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1800" name="L1800"></a>1800                     forceCaretPositionChange = <strong class="reserved">false</strong>;
<a id="L1801" name="L1801"></a>1801                 <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802                 <a href="../S/3356.html#L1387" title="Defined at 1387 in src/javax/swing/text/DefaultCaret.java.">ensureValidPosition</a>();
<a id="L1803" name="L1803"></a>1803             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1804" name="L1804"></a>1804                 <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> dotBias = <a href="../S/3356.html#L108" title="Defined at 108 in src/javax/swing/text/DefaultCaret.java.">DefaultCaret</a>.<strong class="reserved">this</strong>.dotBias;
<a id="L1805" name="L1805"></a>1805                 <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> markBias = <a href="../S/3356.html#L108" title="Defined at 108 in src/javax/swing/text/DefaultCaret.java.">DefaultCaret</a>.<strong class="reserved">this</strong>.markBias;
<a id="L1806" name="L1806"></a>1806                 <strong class="reserved">if</strong>(adjustDotBias) <em class="brace">{</em>
<a id="L1807" name="L1807"></a>1807                     dotBias = <a href="../S/3356.html#L1219" title="Defined at 1219 in src/javax/swing/text/DefaultCaret.java.">guessBiasForOffset</a>(newDot, dotBias, dotLTR);
<a id="L1808" name="L1808"></a>1808                 <em class="brace">}</em>
<a id="L1809" name="L1809"></a>1809                 <strong class="reserved">if</strong>(adjustMarkBias) <em class="brace">{</em>
<a id="L1810" name="L1810"></a>1810                     markBias = <a href="../S/3356.html#L1219" title="Defined at 1219 in src/javax/swing/text/DefaultCaret.java.">guessBiasForOffset</a>(<a href="../D/27489.html" title="Multiple defined in 38 places.">mark</a>, markBias, markLTR);
<a id="L1811" name="L1811"></a>1811                 <em class="brace">}</em>
<a id="L1812" name="L1812"></a>1812                 <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(newMark, markBias);
<a id="L1813" name="L1813"></a>1813                 <strong class="reserved">if</strong> (<a href="../D/18581.html" title="Multiple defined in 4 places.">getDot</a>() == newMark) <em class="brace">{</em>
<a id="L1814" name="L1814"></a>1814                     <em class="comment">// Due this test in case the filter vetoed the change</em>
<a id="L1815" name="L1815"></a>1815                     <em class="comment">// in which case this probably won't be valid either.</em>
<a id="L1816" name="L1816"></a>1816                     <a href="../D/27808.html" title="Multiple defined in 8 places.">moveDot</a>(newDot, dotBias);
<a id="L1817" name="L1817"></a>1817                 <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818                 <a href="../S/3356.html#L1387" title="Defined at 1387 in src/javax/swing/text/DefaultCaret.java.">ensureValidPosition</a>();
<a id="L1819" name="L1819"></a>1819             <em class="brace">}</em>
<a id="L1820" name="L1820"></a>1820         <em class="brace">}</em>
<a id="L1821" name="L1821"></a>1821 
<div class="comment">
          Gives notification that an attribute or set of attributes changed.
          @param e the document event
          @see DocumentListener#changedUpdate</div>
<a id="L1828" name="L1828"></a>1828         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11034.html" title="Multiple referred from 17 places.">changedUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e) <em class="brace">{</em>
<a id="L1829" name="L1829"></a>1829             <strong class="reserved">if</strong> (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == NEVER_UPDATE ||
<a id="L1830" name="L1830"></a>1830                     (<a href="../S/3356.html#L219" title="Defined at 219 in src/javax/swing/text/DefaultCaret.java.">getUpdatePolicy</a>() == UPDATE_WHEN_ON_EDT &amp;&amp;
<a id="L1831" name="L1831"></a>1831                     !<a href="../S/3164.html#L53" title="Defined at 53 in src/javax/swing/SwingUtilities.java.">SwingUtilities</a>.<a href="../S/3164.html#L1359" title="Defined at 1359 in src/javax/swing/SwingUtilities.java.">isEventDispatchThread</a>())) <em class="brace">{</em>
<a id="L1832" name="L1832"></a>1832                 <strong class="reserved">return</strong>;
<a id="L1833" name="L1833"></a>1833             <em class="brace">}</em>
<a id="L1834" name="L1834"></a>1834             <strong class="reserved">if</strong>(e <strong class="reserved">instanceof</strong> <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../S/3268.html#L2948" title="Defined at 2948 in src/javax/swing/text/AbstractDocument.java.">UndoRedoDocumentEvent</a>) <em class="brace">{</em>
<a id="L1835" name="L1835"></a>1835                 <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(e.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>() + e.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>());
<a id="L1836" name="L1836"></a>1836             <em class="brace">}</em>
<a id="L1837" name="L1837"></a>1837         <em class="brace">}</em>
<a id="L1838" name="L1838"></a>1838 
<a id="L1839" name="L1839"></a>1839         <em class="comment">// --- PropertyChangeListener methods -----------------------</em>
<a id="L1840" name="L1840"></a>1840 
<div class="comment">
          This method gets called when a bound property is changed.
          We are looking for document changes on the editor.</div>
<a id="L1845" name="L1845"></a>1845         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25223.html" title="Multiple referred from 58 places.">propertyChange</a>(<a href="../S/1790.html#L47" title="Defined at 47 in src/java/beans/PropertyChangeEvent.java.">PropertyChangeEvent</a> evt) <em class="brace">{</em>
<a id="L1846" name="L1846"></a>1846             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue = evt.<a href="../D/21192.html" title="Multiple defined in 2 places.">getOldValue</a>();
<a id="L1847" name="L1847"></a>1847             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue = evt.<a href="../D/20884.html" title="Multiple defined in 5 places.">getNewValue</a>();
<a id="L1848" name="L1848"></a>1848             <strong class="reserved">if</strong> ((oldValue <strong class="reserved">instanceof</strong> <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a>) || (newValue <strong class="reserved">instanceof</strong> <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a>)) <em class="brace">{</em>
<a id="L1849" name="L1849"></a>1849                 <a href="../D/32508.html" title="Multiple defined in 8 places.">setDot</a>(0);
<a id="L1850" name="L1850"></a>1850                 <strong class="reserved">if</strong> (oldValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1851" name="L1851"></a>1851                     ((<a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a>)oldValue).<a href="../D/30761.html" title="Multiple defined in 3 places.">removeDocumentListener</a>(<strong class="reserved">this</strong>);
<a id="L1852" name="L1852"></a>1852                 <em class="brace">}</em>
<a id="L1853" name="L1853"></a>1853                 <strong class="reserved">if</strong> (newValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1854" name="L1854"></a>1854                     ((<a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a>)newValue).<a href="../D/10761.html" title="Multiple defined in 3 places.">addDocumentListener</a>(<strong class="reserved">this</strong>);
<a id="L1855" name="L1855"></a>1855                 <em class="brace">}</em>
<a id="L1856" name="L1856"></a>1856             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>("enabled".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(evt.<a href="../D/21736.html" title="Multiple defined in 8 places.">getPropertyName</a>())) <em class="brace">{</em>
<a id="L1857" name="L1857"></a>1857                 <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../S/6200.html#L92" title="Defined at 92 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">enabled</a> = (<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>) evt.<a href="../D/20884.html" title="Multiple defined in 5 places.">getNewValue</a>();
<a id="L1858" name="L1858"></a>1858                 <strong class="reserved">if</strong>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/2177.html#L8047" title="Defined at 8047 in src/java/awt/Component.java.">isFocusOwner</a>()) <em class="brace">{</em>
<a id="L1859" name="L1859"></a>1859                     <strong class="reserved">if</strong>(<a href="../S/6200.html#L92" title="Defined at 92 in src/com/sun/org/apache/xalan/internal/xsltc/compiler/Output.java.">enabled</a> == <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE) <em class="brace">{</em>
<a id="L1860" name="L1860"></a>1860                         <strong class="reserved">if</strong>(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../D/25485.html" title="Multiple defined in 5 places.">isEditable</a>()) <em class="brace">{</em>
<a id="L1861" name="L1861"></a>1861                             <a href="../D/34303.html" title="Multiple defined in 23 places.">setVisible</a>(<strong class="reserved">true</strong>);
<a id="L1862" name="L1862"></a>1862                         <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863                         <a href="../D/33875.html" title="Multiple defined in 2 places.">setSelectionVisible</a>(<strong class="reserved">true</strong>);
<a id="L1864" name="L1864"></a>1864                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1865" name="L1865"></a>1865                         <a href="../D/34303.html" title="Multiple defined in 23 places.">setVisible</a>(<strong class="reserved">false</strong>);
<a id="L1866" name="L1866"></a>1866                         <a href="../D/33875.html" title="Multiple defined in 2 places.">setSelectionVisible</a>(<strong class="reserved">false</strong>);
<a id="L1867" name="L1867"></a>1867                     <em class="brace">}</em>
<a id="L1868" name="L1868"></a>1868                 <em class="brace">}</em>
<a id="L1869" name="L1869"></a>1869             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>("caretWidth".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(evt.<a href="../D/21736.html" title="Multiple defined in 8 places.">getPropertyName</a>())) <em class="brace">{</em>
<a id="L1870" name="L1870"></a>1870                 <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> newWidth = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) evt.<a href="../D/20884.html" title="Multiple defined in 5 places.">getNewValue</a>();
<a id="L1871" name="L1871"></a>1871                 <strong class="reserved">if</strong> (newWidth != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1872" name="L1872"></a>1872                     caretWidth = newWidth.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L1873" name="L1873"></a>1873                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1874" name="L1874"></a>1874                     caretWidth = -1;
<a id="L1875" name="L1875"></a>1875                 <em class="brace">}</em>
<a id="L1876" name="L1876"></a>1876                 <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L1877" name="L1877"></a>1877             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>("caretAspectRatio".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(evt.<a href="../D/21736.html" title="Multiple defined in 8 places.">getPropertyName</a>())) <em class="brace">{</em>
<a id="L1878" name="L1878"></a>1878                 <a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a> newRatio = (<a href="../D/6185.html" title="Multiple defined in 4 places.">Number</a>) evt.<a href="../D/20884.html" title="Multiple defined in 5 places.">getNewValue</a>();
<a id="L1879" name="L1879"></a>1879                 <strong class="reserved">if</strong> (newRatio != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1880" name="L1880"></a>1880                     aspectRatio = newRatio.<a href="../D/16466.html" title="Multiple defined in 15 places.">floatValue</a>();
<a id="L1881" name="L1881"></a>1881                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1882" name="L1882"></a>1882                     aspectRatio = -1;
<a id="L1883" name="L1883"></a>1883                 <em class="brace">}</em>
<a id="L1884" name="L1884"></a>1884                 <a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L1885" name="L1885"></a>1885             <em class="brace">}</em>
<a id="L1886" name="L1886"></a>1886         <em class="brace">}</em>
<a id="L1887" name="L1887"></a>1887 
<a id="L1888" name="L1888"></a>1888 
<a id="L1889" name="L1889"></a>1889         <em class="comment">//</em>
<a id="L1890" name="L1890"></a>1890         <em class="comment">// ClipboardOwner</em>
<a id="L1891" name="L1891"></a>1891         <em class="comment">//</em>
<div class="comment">
          Toggles the visibility of the selection when ownership is lost.</div>
<a id="L1895" name="L1895"></a>1895         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2291.html#L129" title="Referred from 129 in src/java/awt/datatransfer/Clipboard.java.">lostOwnership</a>(<a href="../S/2291.html#L53" title="Defined at 53 in src/java/awt/datatransfer/Clipboard.java.">Clipboard</a> clipboard,
<a id="L1896" name="L1896"></a>1896                                       <a href="../S/2289.html#L42" title="Defined at 42 in src/java/awt/datatransfer/Transferable.java.">Transferable</a> contents) <em class="brace">{</em>
<a id="L1897" name="L1897"></a>1897             <strong class="reserved">if</strong> (ownsSelection) <em class="brace">{</em>
<a id="L1898" name="L1898"></a>1898                 ownsSelection = <strong class="reserved">false</strong>;
<a id="L1899" name="L1899"></a>1899                 <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>.<a href="../S/2177.html#L8034" title="Defined at 8034 in src/java/awt/Component.java.">hasFocus</a>()) <em class="brace">{</em>
<a id="L1900" name="L1900"></a>1900                     <a href="../D/33875.html" title="Multiple defined in 2 places.">setSelectionVisible</a>(<strong class="reserved">false</strong>);
<a id="L1901" name="L1901"></a>1901                 <em class="brace">}</em>
<a id="L1902" name="L1902"></a>1902             <em class="brace">}</em>
<a id="L1903" name="L1903"></a>1903         <em class="brace">}</em>
<a id="L1904" name="L1904"></a>1904     <em class="brace">}</em>
<a id="L1905" name="L1905"></a>1905 
<a id="L1906" name="L1906"></a>1906 
<a id="L1907" name="L1907"></a>1907     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/2090.html" title="Multiple referred from 2 places.">DefaultFilterBypass</a> <strong class="reserved">extends</strong> <a href="../S/3347.html#L51" title="Defined at 51 in src/javax/swing/text/NavigationFilter.java.">NavigationFilter</a>.<a href="../D/3245.html" title="Multiple defined in 2 places.">FilterBypass</a> <em class="brace">{</em>
<a id="L1908" name="L1908"></a>1908         <strong class="reserved">public</strong> <a href="../D/1302.html" title="Multiple defined in 2 places.">Caret</a> <a href="../R/15446.html" title="Multiple referred from 23 places.">getCaret</a>() <em class="brace">{</em>
<a id="L1909" name="L1909"></a>1909             <strong class="reserved">return</strong> <a href="../S/3356.html#L108" title="Defined at 108 in src/javax/swing/text/DefaultCaret.java.">DefaultCaret</a>.<strong class="reserved">this</strong>;
<a id="L1910" name="L1910"></a>1910         <em class="brace">}</em>
<a id="L1911" name="L1911"></a>1911 
<a id="L1912" name="L1912"></a>1912         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27277.html" title="Multiple referred from 29 places.">setDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> bias) <em class="brace">{</em>
<a id="L1913" name="L1913"></a>1913             <a href="../S/3356.html#L1158" title="Defined at 1158 in src/javax/swing/text/DefaultCaret.java.">handleSetDot</a>(dot, bias);
<a id="L1914" name="L1914"></a>1914         <em class="brace">}</em>
<a id="L1915" name="L1915"></a>1915 
<a id="L1916" name="L1916"></a>1916         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/23379.html" title="Multiple referred from 15 places.">moveDot</a>(<strong class="reserved">int</strong> dot, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> bias) <em class="brace">{</em>
<a id="L1917" name="L1917"></a>1917             <a href="../S/3356.html#L1100" title="Defined at 1100 in src/javax/swing/text/DefaultCaret.java.">handleMoveDot</a>(dot, bias);
<a id="L1918" name="L1918"></a>1918         <em class="brace">}</em>
<a id="L1919" name="L1919"></a>1919     <em class="brace">}</em>
<a id="L1920" name="L1920"></a>1920 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L202">[^]</a><a href="#L1916">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
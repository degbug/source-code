<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/PlainView.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L56">[^]</a><a href="#L659">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L56" title="Defined at 56.">getTabSize</a></li>
<li><a href="#L76" title="Defined at 76.">drawLine</a></li>
<li><a href="#L96" title="Defined at 96.">drawElement</a></li>
<li><a href="#L148" title="Defined at 148.">drawUnselectedText</a></li>
<li><a href="#L173" title="Defined at 173.">drawSelectedText</a></li>
<li><a href="#L190" title="Defined at 190.">getLineBuffer</a></li>
<li><a href="#L203" title="Defined at 203.">updateMetrics</a></li>
<li><a href="#L227" title="Defined at 227.">getPreferredSpan</a></li>
<li><a href="#L249" title="Defined at 249.">paint</a></li>
<li><a href="#L327" title="Defined at 327.">adjustPaintRegion</a></li>
<li><a href="#L342" title="Defined at 342.">modelToView</a></li>
<li><a href="#L379" title="Defined at 379.">viewToModel</a></li>
<li><a href="#L450" title="Defined at 450.">insertUpdate</a></li>
<li><a href="#L463" title="Defined at 463.">removeUpdate</a></li>
<li><a href="#L476" title="Defined at 476.">changedUpdate</a></li>
<li><a href="#L488" title="Defined at 488.">setSize</a></li>
<li><a href="#L505" title="Defined at 505.">nextTabStop</a></li>
<li><a href="#L525" title="Defined at 525.">updateDamage</a></li>
<li><a href="#L592" title="Defined at 592.">damageLineRange</a></li>
<li><a href="#L613" title="Defined at 613.">lineToRect</a></li>
<li><a href="#L636" title="Defined at 636.">calculateLongestLine</a></li>
<li><a href="#L659" title="Defined at 659.">getLineWidth</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.Vector;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Properties;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.swing.event.*;
<a id="L31" name="L31"></a>  31 
<div class="comment">
  Implements View interface for a simple multi-line text view
  that has text in one font and color.  The view represents each
  child element as a line of text.
  @author  Timothy Prinzing
  @see     View</div>
<a id="L40" name="L40"></a>  40 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/6120.html" title="Multiple referred from 2 places.">PlainView</a> <strong class="reserved">extends</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <strong class="reserved">implements</strong> <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> <em class="brace">{</em>
<a id="L41" name="L41"></a>  41 
<div class="comment">
      Constructs a new PlainView wrapped on an element.
      @param elem the element</div>
<a id="L47" name="L47"></a>  47     <strong class="reserved">public</strong> PlainView(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem) <em class="brace">{</em>
<a id="L48" name="L48"></a>  48         <strong class="reserved">super</strong>(elem);
<a id="L49" name="L49"></a>  49     <em class="brace">}</em>
<a id="L50" name="L50"></a>  50 
<div class="comment">
      Returns the tab size set for the document, defaulting to 8.
      @return the tab size</div>
<a id="L56" name="L56"></a>  56     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/19365.html" title="Multiple referred from 3 places.">getTabSize</a>() <em class="brace">{</em>
<a id="L57" name="L57"></a>  57         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> i = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../S/3340.html#L59" title="Defined at 59 in src/javax/swing/text/PlainDocument.java.">PlainDocument</a>.tabSizeAttribute);
<a id="L58" name="L58"></a>  58         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = (i != <strong class="reserved">null</strong>) ? i.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>() : 8;
<a id="L59" name="L59"></a>  59         <strong class="reserved">return</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L60" name="L60"></a>  60     <em class="brace">}</em>
<a id="L61" name="L61"></a>  61 
<div class="comment">
      Renders a line of text, suppressing whitespace at the end
      and expanding any tabs.  This is implemented to make calls
      to the methods <code>drawUnselectedText</code> and
      <code>drawSelectedText</code> so that the way selected and
      unselected text are rendered can be customized.
      @param lineIndex the line to draw &gt;= 0
      @param g the <code>Graphics</code> context
      @param x the starting X position &gt;= 0
      @param y the starting Y position &gt;= 0
      @see #drawUnselectedText
      @see #drawSelectedText</div>
<a id="L76" name="L76"></a>  76     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/13556.html" title="Multiple referred from 1513 places.">drawLine</a>(<strong class="reserved">int</strong> lineIndex, <a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y) <em class="brace">{</em>
<a id="L77" name="L77"></a>  77         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(lineIndex);
<a id="L78" name="L78"></a>  78         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem;
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L81" name="L81"></a>  81             <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/25780.html" title="Multiple defined in 13 places.">isLeaf</a>()) <em class="brace">{</em>
<a id="L82" name="L82"></a>  82                 <a href="../S/3237.html#L96" title="Defined at 96 in src/javax/swing/text/PlainView.java.">drawElement</a>(lineIndex, <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L83" name="L83"></a>  83             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L84" name="L84"></a>  84                 <em class="comment">// this line contains the composed text.</em>
<a id="L85" name="L85"></a>  85                 <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L86" name="L86"></a>  86                 <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>; i++) <em class="brace">{</em>
<a id="L87" name="L87"></a>  87                     elem = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i);
<a id="L88" name="L88"></a>  88                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../S/3237.html#L96" title="Defined at 96 in src/javax/swing/text/PlainView.java.">drawElement</a>(lineIndex, elem, g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L89" name="L89"></a>  89                 <em class="brace">}</em>
<a id="L90" name="L90"></a>  90             <em class="brace">}</em>
<a id="L91" name="L91"></a>  91         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em>
<a id="L92" name="L92"></a>  92             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3266.html#L34" title="Defined at 34 in src/javax/swing/text/StateInvariantError.java.">StateInvariantError</a>("Can't render line: " + lineIndex);
<a id="L93" name="L93"></a>  93         <em class="brace">}</em>
<a id="L94" name="L94"></a>  94     <em class="brace">}</em>
<a id="L95" name="L95"></a>  95 
<a id="L96" name="L96"></a>  96     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/13541.html" title="Multiple referred from 2 places.">drawElement</a>(<strong class="reserved">int</strong> lineIndex, <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem, <a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L97" name="L97"></a>  97         <strong class="reserved">int</strong> p0 = elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L98" name="L98"></a>  98         <strong class="reserved">int</strong> p1 = elem.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L99" name="L99"></a>  99         p1 = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(), p1);
<a id="L100" name="L100"></a> 100 
<a id="L101" name="L101"></a> 101         <strong class="reserved">if</strong> (lineIndex == 0) <em class="brace">{</em>
<a id="L102" name="L102"></a> 102             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += firstLineOffset;
<a id="L103" name="L103"></a> 103         <em class="brace">}</em>
<a id="L104" name="L104"></a> 104         <a href="../D/585.html" title="Multiple defined in 3 places.">AttributeSet</a> <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a> = elem.<a href="../D/17112.html" title="Multiple defined in 109 places.">getAttributes</a>();
<a id="L105" name="L105"></a> 105         <strong class="reserved">if</strong> (<a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../S/3270.html#L874" title="Defined at 874 in src/javax/swing/text/Utilities.java.">isComposedTextAttributeDefined</a>(<a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>)) <em class="brace">{</em>
<a id="L106" name="L106"></a> 106             g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(unselected);
<a id="L107" name="L107"></a> 107             <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../S/3270.html#L891" title="Defined at 891 in src/javax/swing/text/Utilities.java.">drawComposedText</a>(<strong class="reserved">this</strong>, <a href="../D/11626.html" title="Multiple defined in 2 places.">attr</a>, g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y,
<a id="L108" name="L108"></a> 108                                         p0-elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L109" name="L109"></a> 109                                         p1-elem.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>());
<a id="L110" name="L110"></a> 110         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L111" name="L111"></a> 111             <strong class="reserved">if</strong> (sel0 == sel1 || selected == unselected) <em class="brace">{</em>
<a id="L112" name="L112"></a> 112                 <em class="comment">// no selection, or it is invisible</em>
<a id="L113" name="L113"></a> 113                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, p1);
<a id="L114" name="L114"></a> 114             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> ((p0 &gt;= sel0 &amp;&amp; p0 &lt;= sel1) &amp;&amp; (p1 &gt;= sel0 &amp;&amp; p1 &lt;= sel1)) <em class="brace">{</em>
<a id="L115" name="L115"></a> 115                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15216.html" title="Multiple defined in 3 places.">drawSelectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, p1);
<a id="L116" name="L116"></a> 116             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sel0 &gt;= p0 &amp;&amp; sel0 &lt;= p1) <em class="brace">{</em>
<a id="L117" name="L117"></a> 117                 <strong class="reserved">if</strong> (sel1 &gt;= p0 &amp;&amp; sel1 &lt;= p1) <em class="brace">{</em>
<a id="L118" name="L118"></a> 118                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, sel0);
<a id="L119" name="L119"></a> 119                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15216.html" title="Multiple defined in 3 places.">drawSelectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, sel0, sel1);
<a id="L120" name="L120"></a> 120                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, sel1, p1);
<a id="L121" name="L121"></a> 121                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L122" name="L122"></a> 122                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, sel0);
<a id="L123" name="L123"></a> 123                     <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15216.html" title="Multiple defined in 3 places.">drawSelectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, sel0, p1);
<a id="L124" name="L124"></a> 124                 <em class="brace">}</em>
<a id="L125" name="L125"></a> 125             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (sel1 &gt;= p0 &amp;&amp; sel1 &lt;= p1) <em class="brace">{</em>
<a id="L126" name="L126"></a> 126                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15216.html" title="Multiple defined in 3 places.">drawSelectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, sel1);
<a id="L127" name="L127"></a> 127                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, sel1, p1);
<a id="L128" name="L128"></a> 128             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L129" name="L129"></a> 129                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = <a href="../D/15227.html" title="Multiple defined in 3 places.">drawUnselectedText</a>(g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, p0, p1);
<a id="L130" name="L130"></a> 130             <em class="brace">}</em>
<a id="L131" name="L131"></a> 131         <em class="brace">}</em>
<a id="L132" name="L132"></a> 132 
<a id="L133" name="L133"></a> 133         <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L134" name="L134"></a> 134     <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<div class="comment">
      Renders the given range in the model as normal unselected
      text.  Uses the foreground or disabled color to render the text.
      @param g the graphics context
      @param x the starting X coordinate &gt;= 0
      @param y the starting Y coordinate &gt;= 0
      @param p0 the beginning position in the model &gt;= 0
      @param p1 the ending position in the model &gt;= 0
      @return the X location of the end of the range &gt;= 0
      @exception BadLocationException if the range is invalid</div>
<a id="L148" name="L148"></a> 148     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/13578.html" title="Multiple referred from 13 places.">drawUnselectedText</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y,
<a id="L149" name="L149"></a> 149                                      <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L150" name="L150"></a> 150         g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(unselected);
<a id="L151" name="L151"></a> 151         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L152" name="L152"></a> 152         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L153" name="L153"></a> 153         doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1 - p0, s);
<a id="L154" name="L154"></a> 154         <strong class="reserved">int</strong> ret = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/15221.html" title="Multiple defined in 3 places.">drawTabbedText</a>(<strong class="reserved">this</strong>, s, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, g, <strong class="reserved">this</strong>, p0);
<a id="L155" name="L155"></a> 155         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L156" name="L156"></a> 156         <strong class="reserved">return</strong> ret;
<a id="L157" name="L157"></a> 157     <em class="brace">}</em>
<a id="L158" name="L158"></a> 158 
<div class="comment">
      Renders the given range in the model as selected text.  This
      is implemented to render the text in the color specified in
      the hosting component.  It assumes the highlighter will render
      the selected background.
      @param g the graphics context
      @param x the starting X coordinate &gt;= 0
      @param y the starting Y coordinate &gt;= 0
      @param p0 the beginning position in the model &gt;= 0
      @param p1 the ending position in the model &gt;= 0
      @return the location of the end of the range
      @exception BadLocationException if the range is invalid</div>
<a id="L173" name="L173"></a> 173     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/13567.html" title="Multiple referred from 9 places.">drawSelectedText</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>,
<a id="L174" name="L174"></a> 174                                    <strong class="reserved">int</strong> y, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L175" name="L175"></a> 175         g.<a href="../D/32183.html" title="Multiple defined in 19 places.">setColor</a>(selected);
<a id="L176" name="L176"></a> 176         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L177" name="L177"></a> 177         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L178" name="L178"></a> 178         doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1 - p0, s);
<a id="L179" name="L179"></a> 179         <strong class="reserved">int</strong> ret = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/15221.html" title="Multiple defined in 3 places.">drawTabbedText</a>(<strong class="reserved">this</strong>, s, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, g, <strong class="reserved">this</strong>, p0);
<a id="L180" name="L180"></a> 180         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L181" name="L181"></a> 181         <strong class="reserved">return</strong> ret;
<a id="L182" name="L182"></a> 182     <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<div class="comment">
      Gives access to a buffer that can be used to fetch
      text from the associated document.
      @return the buffer</div>
<a id="L190" name="L190"></a> 190     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> getLineBuffer() <em class="brace">{</em>
<a id="L191" name="L191"></a> 191         <strong class="reserved">if</strong> (lineBuffer == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L192" name="L192"></a> 192             lineBuffer = <strong class="reserved">new</strong> <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a>();
<a id="L193" name="L193"></a> 193         <em class="brace">}</em>
<a id="L194" name="L194"></a> 194         <strong class="reserved">return</strong> lineBuffer;
<a id="L195" name="L195"></a> 195     <em class="brace">}</em>
<a id="L196" name="L196"></a> 196 
<div class="comment">
      Checks to see if the font metrics and longest line
      are up-to-date.
      @since 1.4</div>
<a id="L203" name="L203"></a> 203     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/29917.html" title="Multiple referred from 10 places.">updateMetrics</a>() <em class="brace">{</em>
<a id="L204" name="L204"></a> 204         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> host = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L205" name="L205"></a> 205         <a href="../S/2176.html#L224" title="Defined at 224 in src/java/awt/Font.java.">Font</a> f = host.<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>();
<a id="L206" name="L206"></a> 206         <strong class="reserved">if</strong> (font != f) <em class="brace">{</em>
<a id="L207" name="L207"></a> 207             <em class="comment">// The font changed, we need to recalculate the</em>
<a id="L208" name="L208"></a> 208             <em class="comment">// longest line.</em>
<a id="L209" name="L209"></a> 209             <a href="../S/3237.html#L636" title="Defined at 636 in src/javax/swing/text/PlainView.java.">calculateLongestLine</a>();
<a id="L210" name="L210"></a> 210             tabSize = <a href="../D/22967.html" title="Multiple defined in 3 places.">getTabSize</a>() * metrics.<a href="../D/12333.html" title="Multiple defined in 2 places.">charWidth</a>('m');
<a id="L211" name="L211"></a> 211         <em class="brace">}</em>
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<a id="L214" name="L214"></a> 214     <em class="comment">// ---- View methods ----------------------------------------------------</em>
<a id="L215" name="L215"></a> 215 
<div class="comment">
      Determines the preferred span for this view along an
      axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return   the span the view would like to be rendered into &gt;= 0.
                Typically the view is told to render into the span
                that is returned, although there is no guarantee.
                The parent may choose to resize or break the view.
      @exception IllegalArgumentException for an invalid axis</div>
<a id="L227" name="L227"></a> 227     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/18413.html" title="Multiple referred from 96 places.">getPreferredSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L228" name="L228"></a> 228         <a href="../D/36161.html" title="Multiple defined in 2 places.">updateMetrics</a>();
<a id="L229" name="L229"></a> 229         <strong class="reserved">switch</strong> (axis) <em class="brace">{</em>
<a id="L230" name="L230"></a> 230         <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.X_AXIS:
<a id="L231" name="L231"></a> 231             <strong class="reserved">return</strong> <a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(longLine);
<a id="L232" name="L232"></a> 232         <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.Y_AXIS:
<a id="L233" name="L233"></a> 233             <strong class="reserved">return</strong> <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>().<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() * metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L234" name="L234"></a> 234         <strong class="reserved">default</strong>:
<a id="L235" name="L235"></a> 235             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Invalid axis: " + axis);
<a id="L236" name="L236"></a> 236         <em class="brace">}</em>
<a id="L237" name="L237"></a> 237     <em class="brace">}</em>
<a id="L238" name="L238"></a> 238 
<div class="comment">
      Renders using the given rendering surface and area on that surface.
      The view may need to do layout and create child views to enable
      itself to render into the given allocation.
      @param g the rendering surface to use
      @param a the allocated region to render into
      @see View#paint</div>
<a id="L249" name="L249"></a> 249     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250         <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> originalA = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L251" name="L251"></a> 251         <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = <a href="../D/11230.html" title="Multiple defined in 2 places.">adjustPaintRegion</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L252" name="L252"></a> 252         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = (<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L253" name="L253"></a> 253         tabBase = alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L254" name="L254"></a> 254         <a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a> host = (<a href="../S/3351.html#L293" title="Defined at 293 in src/javax/swing/text/JTextComponent.java.">JTextComponent</a>) <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L255" name="L255"></a> 255         <a href="../S/3239.html#L37" title="Defined at 37 in src/javax/swing/text/Highlighter.java.">Highlighter</a> h = host.<a href="../S/3351.html#L600" title="Defined at 600 in src/javax/swing/text/JTextComponent.java.">getHighlighter</a>();
<a id="L256" name="L256"></a> 256         g.<a href="../D/32750.html" title="Multiple defined in 25 places.">setFont</a>(host.<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>());
<a id="L257" name="L257"></a> 257         sel0 = host.<a href="../D/22380.html" title="Multiple defined in 11 places.">getSelectionStart</a>();
<a id="L258" name="L258"></a> 258         sel1 = host.<a href="../D/22371.html" title="Multiple defined in 11 places.">getSelectionEnd</a>();
<a id="L259" name="L259"></a> 259         unselected = (host.<a href="../D/25496.html" title="Multiple defined in 50 places.">isEnabled</a>()) ?
<a id="L260" name="L260"></a> 260             host.<a href="../D/19200.html" title="Multiple defined in 21 places.">getForeground</a>() : host.<a href="../D/18507.html" title="Multiple defined in 4 places.">getDisabledTextColor</a>();
<a id="L261" name="L261"></a> 261         <a href="../D/1302.html" title="Multiple defined in 2 places.">Caret</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = host.<a href="../D/17495.html" title="Multiple defined in 4 places.">getCaret</a>();
<a id="L262" name="L262"></a> 262         selected = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/26220.html" title="Multiple defined in 2 places.">isSelectionVisible</a>() &amp;&amp; h != <strong class="reserved">null</strong> ?
<a id="L263" name="L263"></a> 263                        host.<a href="../S/3351.html#L1256" title="Defined at 1256 in src/javax/swing/text/JTextComponent.java.">getSelectedTextColor</a>() : unselected;
<a id="L264" name="L264"></a> 264         <a href="../D/36161.html" title="Multiple defined in 2 places.">updateMetrics</a>();
<a id="L265" name="L265"></a> 265 
<a id="L266" name="L266"></a> 266         <em class="comment">// If the lines are clipped then we don't expend the effort to</em>
<a id="L267" name="L267"></a> 267         <em class="comment">// try and paint them.  Since all of the lines are the same height</em>
<a id="L268" name="L268"></a> 268         <em class="comment">// with this object, determination of what lines need to be repainted</em>
<a id="L269" name="L269"></a> 269         <em class="comment">// is quick.</em>
<a id="L270" name="L270"></a> 270         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> = g.<a href="../D/17730.html" title="Multiple defined in 3 places.">getClipBounds</a>();
<a id="L271" name="L271"></a> 271         <strong class="reserved">int</strong> fontHeight = metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L272" name="L272"></a> 272         <strong class="reserved">int</strong> heightBelow = (alloc.y + alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) - (<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.y + <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L273" name="L273"></a> 273         <strong class="reserved">int</strong> heightAbove = <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.y - alloc.y;
<a id="L274" name="L274"></a> 274         <strong class="reserved">int</strong> linesBelow, linesAbove, linesTotal;
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276         <strong class="reserved">if</strong> (fontHeight &gt; 0) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277             linesBelow = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, heightBelow / fontHeight);
<a id="L278" name="L278"></a> 278             linesAbove = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, heightAbove / fontHeight);
<a id="L279" name="L279"></a> 279             linesTotal = alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> / fontHeight;
<a id="L280" name="L280"></a> 280             <strong class="reserved">if</strong> (alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> % fontHeight != 0) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281                 linesTotal++;
<a id="L282" name="L282"></a> 282             <em class="brace">}</em>
<a id="L283" name="L283"></a> 283         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L284" name="L284"></a> 284             linesBelow = linesAbove = linesTotal = 0;
<a id="L285" name="L285"></a> 285         <em class="brace">}</em>
<a id="L286" name="L286"></a> 286 
<a id="L287" name="L287"></a> 287         <em class="comment">// update the visible lines</em>
<a id="L288" name="L288"></a> 288         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> lineArea = <a href="../S/3237.html#L613" title="Defined at 613 in src/javax/swing/text/PlainView.java.">lineToRect</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, linesAbove);
<a id="L289" name="L289"></a> 289         <strong class="reserved">int</strong> y = lineArea.y + metrics.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>();
<a id="L290" name="L290"></a> 290         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = lineArea.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L291" name="L291"></a> 291         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L292" name="L292"></a> 292         <strong class="reserved">int</strong> lineCount = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L293" name="L293"></a> 293         <strong class="reserved">int</strong> endLine = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>(lineCount, linesTotal - linesBelow);
<a id="L294" name="L294"></a> 294         lineCount--;
<a id="L295" name="L295"></a> 295         <a href="../S/3241.html#L36" title="Defined at 36 in src/javax/swing/text/LayeredHighlighter.java.">LayeredHighlighter</a> dh = (h <strong class="reserved">instanceof</strong> <a href="../S/3241.html#L36" title="Defined at 36 in src/javax/swing/text/LayeredHighlighter.java.">LayeredHighlighter</a>) ?
<a id="L296" name="L296"></a> 296                            (<a href="../S/3241.html#L36" title="Defined at 36 in src/javax/swing/text/LayeredHighlighter.java.">LayeredHighlighter</a>)h : <strong class="reserved">null</strong>;
<a id="L297" name="L297"></a> 297         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = linesAbove; <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> &lt; endLine; <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>++) <em class="brace">{</em>
<a id="L298" name="L298"></a> 298             <strong class="reserved">if</strong> (dh != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> lineElement = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>);
<a id="L300" name="L300"></a> 300                 <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> == lineCount) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301                     dh.<a href="../D/28848.html" title="Multiple defined in 3 places.">paintLayeredHighlights</a>(g, lineElement.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L302" name="L302"></a> 302                                               lineElement.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>(),
<a id="L303" name="L303"></a> 303                                               originalA, host, <strong class="reserved">this</strong>);
<a id="L304" name="L304"></a> 304                 <em class="brace">}</em>
<a id="L305" name="L305"></a> 305                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L306" name="L306"></a> 306                     dh.<a href="../D/28848.html" title="Multiple defined in 3 places.">paintLayeredHighlights</a>(g, lineElement.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L307" name="L307"></a> 307                                               lineElement.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() - 1,
<a id="L308" name="L308"></a> 308                                               originalA, host, <strong class="reserved">this</strong>);
<a id="L309" name="L309"></a> 309                 <em class="brace">}</em>
<a id="L310" name="L310"></a> 310             <em class="brace">}</em>
<a id="L311" name="L311"></a> 311             <a href="../D/15201.html" title="Multiple defined in 7 places.">drawLine</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, g, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L312" name="L312"></a> 312             y += fontHeight;
<a id="L313" name="L313"></a> 313             <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> == 0) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314                 <em class="comment">// This should never really happen, in so far as if</em>
<a id="L315" name="L315"></a> 315                 <em class="comment">// firstLineOffset is non 0, there should only be one</em>
<a id="L316" name="L316"></a> 316                 <em class="comment">// line of text.</em>
<a id="L317" name="L317"></a> 317                 <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> -= firstLineOffset;
<a id="L318" name="L318"></a> 318             <em class="brace">}</em>
<a id="L319" name="L319"></a> 319         <em class="brace">}</em>
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<div class="comment">
      Should return a shape ideal for painting based on the passed in
      Shape <code>a</code>. This is useful if painting in a different
      region. The default implementation returns <code>a</code>.</div>
<a id="L327" name="L327"></a> 327     <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../S/3237.html#L251" title="Referred from 251 in src/javax/swing/text/PlainView.java.">adjustPaintRegion</a>(<a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328         <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L329" name="L329"></a> 329     <em class="brace">}</em>
<a id="L330" name="L330"></a> 330 
<div class="comment">
      Provides a mapping from the document model coordinate space
      to the coordinate space of the view mapped to it.
      @param pos the position to convert &gt;= 0
      @param a the allocated region to render into
      @return the bounding box of the given position
      @exception BadLocationException  if the given position does not
        represent a valid location in the associated document
      @see View#modelToView</div>
<a id="L342" name="L342"></a> 342     <strong class="reserved">public</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/23332.html" title="Multiple referred from 109 places.">modelToView</a>(<strong class="reserved">int</strong> pos, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L343" name="L343"></a> 343         <em class="comment">// line coordinates</em>
<a id="L344" name="L344"></a> 344         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L345" name="L345"></a> 345         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L346" name="L346"></a> 346         <strong class="reserved">int</strong> lineIndex = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(pos);
<a id="L347" name="L347"></a> 347         <strong class="reserved">if</strong> (lineIndex &lt; 0) <em class="brace">{</em>
<a id="L348" name="L348"></a> 348             <strong class="reserved">return</strong> <a href="../S/3237.html#L613" title="Defined at 613 in src/javax/swing/text/PlainView.java.">lineToRect</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, 0);
<a id="L349" name="L349"></a> 349         <em class="brace">}</em>
<a id="L350" name="L350"></a> 350         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> lineArea = <a href="../S/3237.html#L613" title="Defined at 613 in src/javax/swing/text/PlainView.java.">lineToRect</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, lineIndex);
<a id="L351" name="L351"></a> 351 
<a id="L352" name="L352"></a> 352         <em class="comment">// determine span from the start of the line</em>
<a id="L353" name="L353"></a> 353         tabBase = lineArea.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L354" name="L354"></a> 354         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(lineIndex);
<a id="L355" name="L355"></a> 355         <strong class="reserved">int</strong> p0 = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L356" name="L356"></a> 356         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L357" name="L357"></a> 357         doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, pos - p0, s);
<a id="L358" name="L358"></a> 358         <strong class="reserved">int</strong> xOffs = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/22971.html" title="Multiple defined in 2 places.">getTabbedTextWidth</a>(s, metrics, tabBase, <strong class="reserved">this</strong>,p0);
<a id="L359" name="L359"></a> 359         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L360" name="L360"></a> 360 
<a id="L361" name="L361"></a> 361         <em class="comment">// fill in the results and return</em>
<a id="L362" name="L362"></a> 362         lineArea.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += xOffs;
<a id="L363" name="L363"></a> 363         lineArea.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = 1;
<a id="L364" name="L364"></a> 364         lineArea.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> = metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L365" name="L365"></a> 365         <strong class="reserved">return</strong> lineArea;
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<div class="comment">
      Provides a mapping from the view coordinate space to the logical
      coordinate space of the model.
      @param fx the X coordinate &gt;= 0
      @param fy the Y coordinate &gt;= 0
      @param a the allocated region to render into
      @return the location within the model that best represents the
       given point in the view &gt;= 0
      @see View#viewToModel</div>
<a id="L379" name="L379"></a> 379     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/30138.html" title="Multiple referred from 99 places.">viewToModel</a>(<strong class="reserved">float</strong> fx, <strong class="reserved">float</strong> fy, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] bias) <em class="brace">{</em>
<a id="L380" name="L380"></a> 380         <em class="comment">// PENDING(prinz) properly calculate bias</em>
<a id="L381" name="L381"></a> 381         bias[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L384" name="L384"></a> 384         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L385" name="L385"></a> 385         <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<strong class="reserved">int</strong>) fx;
<a id="L386" name="L386"></a> 386         <strong class="reserved">int</strong> y = (<strong class="reserved">int</strong>) fy;
<a id="L387" name="L387"></a> 387         <strong class="reserved">if</strong> (y &lt; alloc.y) <em class="brace">{</em>
<a id="L388" name="L388"></a> 388             <em class="comment">// above the area covered by this icon, so the the position</em>
<a id="L389" name="L389"></a> 389             <em class="comment">// is assumed to be the start of the coverage for this view.</em>
<a id="L390" name="L390"></a> 390             <strong class="reserved">return</strong> <a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L391" name="L391"></a> 391         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (y &gt; alloc.y + alloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <em class="comment">// below the area covered by this icon, so the the position</em>
<a id="L393" name="L393"></a> 393             <em class="comment">// is assumed to be the end of the coverage for this view.</em>
<a id="L394" name="L394"></a> 394             <strong class="reserved">return</strong> <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() - 1;
<a id="L395" name="L395"></a> 395         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L396" name="L396"></a> 396             <em class="comment">// positioned within the coverage of this view vertically,</em>
<a id="L397" name="L397"></a> 397             <em class="comment">// so we figure out which line the point corresponds to.</em>
<a id="L398" name="L398"></a> 398             <em class="comment">// if the line is greater than the number of lines contained, then</em>
<a id="L399" name="L399"></a> 399             <em class="comment">// simply use the last line as it represents the last possible place</em>
<a id="L400" name="L400"></a> 400             <em class="comment">// we can position to.</em>
<a id="L401" name="L401"></a> 401             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = doc.<a href="../D/18357.html" title="Multiple defined in 4 places.">getDefaultRootElement</a>();
<a id="L402" name="L402"></a> 402             <strong class="reserved">int</strong> fontHeight = metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L403" name="L403"></a> 403             <strong class="reserved">int</strong> lineIndex = (fontHeight &gt; 0 ?
<a id="L404" name="L404"></a> 404                                 <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/10523.html" title="Multiple defined in 14 places.">abs</a>((y - alloc.y) / fontHeight) :
<a id="L405" name="L405"></a> 405                                 <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>() - 1);
<a id="L406" name="L406"></a> 406             <strong class="reserved">if</strong> (lineIndex &gt;= <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>()) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407                 <strong class="reserved">return</strong> <a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() - 1;
<a id="L408" name="L408"></a> 408             <em class="brace">}</em>
<a id="L409" name="L409"></a> 409             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(lineIndex);
<a id="L410" name="L410"></a> 410             <strong class="reserved">int</strong> dx = 0;
<a id="L411" name="L411"></a> 411             <strong class="reserved">if</strong> (lineIndex == 0) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412                 alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += firstLineOffset;
<a id="L413" name="L413"></a> 413                 alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> -= firstLineOffset;
<a id="L414" name="L414"></a> 414             <em class="brace">}</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416                 <em class="comment">// point is to the left of the line</em>
<a id="L417" name="L417"></a> 417                 <strong class="reserved">return</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L418" name="L418"></a> 418             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &gt; alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> + alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>) <em class="brace">{</em>
<a id="L419" name="L419"></a> 419                 <em class="comment">// point is to the right of the line</em>
<a id="L420" name="L420"></a> 420                 <strong class="reserved">return</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() - 1;
<a id="L421" name="L421"></a> 421             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L422" name="L422"></a> 422                 <em class="comment">// Determine the offset into the text</em>
<a id="L423" name="L423"></a> 423                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L424" name="L424"></a> 424                     <strong class="reserved">int</strong> p0 = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L425" name="L425"></a> 425                     <strong class="reserved">int</strong> p1 = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() - 1;
<a id="L426" name="L426"></a> 426                     <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L427" name="L427"></a> 427                     doc.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1 - p0, s);
<a id="L428" name="L428"></a> 428                     tabBase = alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L429" name="L429"></a> 429                     <strong class="reserved">int</strong> offs = p0 + <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/22970.html" title="Multiple defined in 4 places.">getTabbedTextOffset</a>(s, metrics,
<a id="L430" name="L430"></a> 430                                                                   tabBase, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">this</strong>, p0);
<a id="L431" name="L431"></a> 431                     <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L432" name="L432"></a> 432                     <strong class="reserved">return</strong> offs;
<a id="L433" name="L433"></a> 433                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434                     <em class="comment">// should not happen</em>
<a id="L435" name="L435"></a> 435                     <strong class="reserved">return</strong> -1;
<a id="L436" name="L436"></a> 436                 <em class="brace">}</em>
<a id="L437" name="L437"></a> 437             <em class="brace">}</em>
<a id="L438" name="L438"></a> 438         <em class="brace">}</em>
<a id="L439" name="L439"></a> 439     <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<div class="comment">
      Gives notification that something was inserted into the document
      in a location that this view is responsible for.
      @param changes the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#insertUpdate</div>
<a id="L450" name="L450"></a> 450     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20799.html" title="Multiple referred from 23 places.">insertUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L451" name="L451"></a> 451         <a href="../S/3237.html#L525" title="Defined at 525 in src/javax/swing/text/PlainView.java.">updateDamage</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, f);
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<div class="comment">
      Gives notification that something was removed from the document
      in a location that this view is responsible for.
      @param changes the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#removeUpdate</div>
<a id="L463" name="L463"></a> 463     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26095.html" title="Multiple referred from 20 places.">removeUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L464" name="L464"></a> 464         <a href="../S/3237.html#L525" title="Defined at 525 in src/javax/swing/text/PlainView.java.">updateDamage</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, f);
<a id="L465" name="L465"></a> 465     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<div class="comment">
      Gives notification from the document that attributes were changed
      in a location that this view is responsible for.
      @param changes the change information from the associated document
      @param a the current allocation of the view
      @param f the factory to use to rebuild if the view has children
      @see View#changedUpdate</div>
<a id="L476" name="L476"></a> 476     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11034.html" title="Multiple referred from 17 places.">changedUpdate</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L477" name="L477"></a> 477         <a href="../S/3237.html#L525" title="Defined at 525 in src/javax/swing/text/PlainView.java.">updateDamage</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, f);
<a id="L478" name="L478"></a> 478     <em class="brace">}</em>
<a id="L479" name="L479"></a> 479 
<div class="comment">
      Sets the size of the view.  This should cause
      layout of the view along the given axis, if it
      has any layout duties.
      @param width the width &gt;= 0
      @param height the height &gt;= 0</div>
<a id="L488" name="L488"></a> 488     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28186.html" title="Multiple referred from 157 places.">setSize</a>(<strong class="reserved">float</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">float</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">super</strong>.<a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L490" name="L490"></a> 490         <a href="../D/36161.html" title="Multiple defined in 2 places.">updateMetrics</a>();
<a id="L491" name="L491"></a> 491     <em class="brace">}</em>
<a id="L492" name="L492"></a> 492 
<a id="L493" name="L493"></a> 493     <em class="comment">// --- TabExpander methods ------------------------------------------</em>
<a id="L494" name="L494"></a> 494 
<div class="comment">
      Returns the next tab stop position after a given reference position.
      This implementation does not support things like centering so it
      ignores the tabOffset argument.
      @param x the current position &gt;= 0
      @param tabOffset the position within the text stream
        that the tab occurred at &gt;= 0.
      @return the tab stop, measured in points &gt;= 0</div>
<a id="L505" name="L505"></a> 505     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/23698.html" title="Multiple referred from 4 places.">nextTabStop</a>(<strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> tabOffset) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506         <strong class="reserved">if</strong> (tabSize == 0) <em class="brace">{</em>
<a id="L507" name="L507"></a> 507             <strong class="reserved">return</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L508" name="L508"></a> 508         <em class="brace">}</em>
<a id="L509" name="L509"></a> 509         <strong class="reserved">int</strong> ntabs = (((<strong class="reserved">int</strong>) <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) - tabBase) / tabSize;
<a id="L510" name="L510"></a> 510         <strong class="reserved">return</strong> tabBase + ((ntabs + 1) * tabSize);
<a id="L511" name="L511"></a> 511     <em class="brace">}</em>
<a id="L512" name="L512"></a> 512 
<a id="L513" name="L513"></a> 513     <em class="comment">// --- local methods ------------------------------------------------</em>
<a id="L514" name="L514"></a> 514 
<div class="comment">
      Repaint the region of change covered by the given document
      event.  Damages the line that begins the range to cover
      the case when the insert/remove is only on one line.
      If lines are added or removed, damages the whole
      view.  The longest line is checked to see if it has
      changed.
      @since 1.4</div>
<a id="L525" name="L525"></a> 525     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/29844.html" title="Multiple referred from 3 places.">updateDamage</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L526" name="L526"></a> 526         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> host = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L527" name="L527"></a> 527         <a href="../D/36161.html" title="Multiple defined in 2 places.">updateMetrics</a>();
<a id="L528" name="L528"></a> 528         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L529" name="L529"></a> 529         <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../S/3381.html#L143" title="Defined at 143 in src/javax/swing/event/DocumentEvent.java.">ElementChange</a> ec = <a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/17564.html" title="Multiple defined in 3 places.">getChange</a>(elem);
<a id="L530" name="L530"></a> 530 
<a id="L531" name="L531"></a> 531         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] added = (ec != <strong class="reserved">null</strong>) ? ec.<a href="../D/17656.html" title="Multiple defined in 2 places.">getChildrenAdded</a>() : <strong class="reserved">null</strong>;
<a id="L532" name="L532"></a> 532         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a>[] removed = (ec != <strong class="reserved">null</strong>) ? ec.<a href="../D/17657.html" title="Multiple defined in 2 places.">getChildrenRemoved</a>() : <strong class="reserved">null</strong>;
<a id="L533" name="L533"></a> 533         <strong class="reserved">if</strong> (((added != <strong class="reserved">null</strong>) &amp;&amp; (added.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0)) ||
<a id="L534" name="L534"></a> 534             ((removed != <strong class="reserved">null</strong>) &amp;&amp; (removed.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt; 0))) <em class="brace">{</em>
<a id="L535" name="L535"></a> 535             <em class="comment">// lines were added or removed...</em>
<a id="L536" name="L536"></a> 536             <strong class="reserved">if</strong> (added != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L537" name="L537"></a> 537                 <strong class="reserved">int</strong> currWide = <a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(longLine);
<a id="L538" name="L538"></a> 538                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; added.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L539" name="L539"></a> 539                     <strong class="reserved">int</strong> w = <a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(added[i]);
<a id="L540" name="L540"></a> 540                     <strong class="reserved">if</strong> (w &gt; currWide) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541                         currWide = w;
<a id="L542" name="L542"></a> 542                         longLine = added[i];
<a id="L543" name="L543"></a> 543                     <em class="brace">}</em>
<a id="L544" name="L544"></a> 544                 <em class="brace">}</em>
<a id="L545" name="L545"></a> 545             <em class="brace">}</em>
<a id="L546" name="L546"></a> 546             <strong class="reserved">if</strong> (removed != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L547" name="L547"></a> 547                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; removed.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L548" name="L548"></a> 548                     <strong class="reserved">if</strong> (removed[i] == longLine) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549                         <a href="../S/3237.html#L636" title="Defined at 636 in src/javax/swing/text/PlainView.java.">calculateLongestLine</a>();
<a id="L550" name="L550"></a> 550                         <strong class="reserved">break</strong>;
<a id="L551" name="L551"></a> 551                     <em class="brace">}</em>
<a id="L552" name="L552"></a> 552                 <em class="brace">}</em>
<a id="L553" name="L553"></a> 553             <em class="brace">}</em>
<a id="L554" name="L554"></a> 554             <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">true</strong>);
<a id="L555" name="L555"></a> 555             host.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L556" name="L556"></a> 556         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L557" name="L557"></a> 557             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L558" name="L558"></a> 558             <strong class="reserved">int</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>());
<a id="L559" name="L559"></a> 559             <a href="../S/3237.html#L592" title="Defined at 592 in src/javax/swing/text/PlainView.java.">damageLineRange</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, host);
<a id="L560" name="L560"></a> 560             <strong class="reserved">if</strong> (<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.INSERT) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561                 <em class="comment">// check to see if the line is longer than current</em>
<a id="L562" name="L562"></a> 562                 <em class="comment">// longest line.</em>
<a id="L563" name="L563"></a> 563                 <strong class="reserved">int</strong> w = <a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(longLine);
<a id="L564" name="L564"></a> 564                 <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>);
<a id="L565" name="L565"></a> 565                 <strong class="reserved">if</strong> (e == longLine) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566                     <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L567" name="L567"></a> 567                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(e) &gt; w) <em class="brace">{</em>
<a id="L568" name="L568"></a> 568                     longLine = e;
<a id="L569" name="L569"></a> 569                     <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L570" name="L570"></a> 570                 <em class="brace">}</em>
<a id="L571" name="L571"></a> 571             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/12317.html" title="Multiple defined in 2 places.">changes</a>.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() == <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../D/3004.html" title="Multiple defined in 3 places.">EventType</a>.REMOVE) <em class="brace">{</em>
<a id="L572" name="L572"></a> 572                 <strong class="reserved">if</strong> (<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>) == longLine) <em class="brace">{</em>
<a id="L573" name="L573"></a> 573                     <em class="comment">// removed from longest line... recalc</em>
<a id="L574" name="L574"></a> 574                     <a href="../S/3237.html#L636" title="Defined at 636 in src/javax/swing/text/PlainView.java.">calculateLongestLine</a>();
<a id="L575" name="L575"></a> 575                     <a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">null</strong>, <strong class="reserved">true</strong>, <strong class="reserved">false</strong>);
<a id="L576" name="L576"></a> 576                 <em class="brace">}</em>
<a id="L577" name="L577"></a> 577             <em class="brace">}</em>
<a id="L578" name="L578"></a> 578         <em class="brace">}</em>
<a id="L579" name="L579"></a> 579     <em class="brace">}</em>
<a id="L580" name="L580"></a> 580 
<div class="comment">
      Repaint the given line range.
      @param host the component hosting the view (used to call repaint)
      @param a  the region allocated for the view to render into
      @param line0 the starting line number to repaint.  This must
        be a valid line number in the model.
      @param line1 the ending line number to repaint.  This must
        be a valid line number in the model.
      @since 1.4</div>
<a id="L592" name="L592"></a> 592     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/3237.html#L559" title="Referred from 559 in src/javax/swing/text/PlainView.java.">damageLineRange</a>(<strong class="reserved">int</strong> line0, <strong class="reserved">int</strong> line1, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> host) <em class="brace">{</em>
<a id="L593" name="L593"></a> 593         <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L594" name="L594"></a> 594             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> area0 = <a href="../S/3237.html#L613" title="Defined at 613 in src/javax/swing/text/PlainView.java.">lineToRect</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, line0);
<a id="L595" name="L595"></a> 595             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> area1 = <a href="../S/3237.html#L613" title="Defined at 613 in src/javax/swing/text/PlainView.java.">lineToRect</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, line1);
<a id="L596" name="L596"></a> 596             <strong class="reserved">if</strong> ((area0 != <strong class="reserved">null</strong>) &amp;&amp; (area1 != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L597" name="L597"></a> 597                 <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a> = area0.<strong class="reserved">union</strong>(area1);
<a id="L598" name="L598"></a> 598                 host.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>(<a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>.y, <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../D/14452.html" title="Multiple defined in 2 places.">damage</a>.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L599" name="L599"></a> 599             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L600" name="L600"></a> 600                 host.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L601" name="L601"></a> 601             <em class="brace">}</em>
<a id="L602" name="L602"></a> 602         <em class="brace">}</em>
<a id="L603" name="L603"></a> 603     <em class="brace">}</em>
<a id="L604" name="L604"></a> 604 
<div class="comment">
      Determine the rectangle that represents the given line.
      @param a  the region allocated for the view to render into
      @param line the line number to find the region of.  This must
        be a valid line number in the model.
      @since 1.4</div>
<a id="L613" name="L613"></a> 613     <strong class="reserved">protected</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../R/22508.html" title="Multiple referred from 5 places.">lineToRect</a>(<a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">int</strong> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>) <em class="brace">{</em>
<a id="L614" name="L614"></a> 614         <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> r = <strong class="reserved">null</strong>;
<a id="L615" name="L615"></a> 615         <a href="../D/36161.html" title="Multiple defined in 2 places.">updateMetrics</a>();
<a id="L616" name="L616"></a> 616         <strong class="reserved">if</strong> (metrics != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> alloc = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L618" name="L618"></a> 618             <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> == 0) <em class="brace">{</em>
<a id="L619" name="L619"></a> 619                 alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += firstLineOffset;
<a id="L620" name="L620"></a> 620                 alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> -= firstLineOffset;
<a id="L621" name="L621"></a> 621             <em class="brace">}</em>
<a id="L622" name="L622"></a> 622             r = <strong class="reserved">new</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>(alloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, alloc.y + (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> * metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>()),
<a id="L623" name="L623"></a> 623                               alloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, metrics.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>());
<a id="L624" name="L624"></a> 624         <em class="brace">}</em>
<a id="L625" name="L625"></a> 625         <strong class="reserved">return</strong> r;
<a id="L626" name="L626"></a> 626     <em class="brace">}</em>
<a id="L627" name="L627"></a> 627 
<div class="comment">
      Iterate over the lines represented by the child elements
      of the element this view represents, looking for the line
      that is the longest.  The <em>longLine</em> variable is updated to
      represent the longest line contained.  The <em>font</em> variable
      is updated to indicate the font used to calculate the
      longest line.</div>
<a id="L636" name="L636"></a> 636     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/10812.html" title="Multiple referred from 3 places.">calculateLongestLine</a>() <em class="brace">{</em>
<a id="L637" name="L637"></a> 637         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L638" name="L638"></a> 638         font = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/19178.html" title="Multiple defined in 44 places.">getFont</a>();
<a id="L639" name="L639"></a> 639         metrics = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/19185.html" title="Multiple defined in 25 places.">getFontMetrics</a>(font);
<a id="L640" name="L640"></a> 640         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L641" name="L641"></a> 641         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../D/26848.html" title="Multiple defined in 3 places.">lines</a> = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L642" name="L642"></a> 642         <strong class="reserved">int</strong> n = <a href="../D/26848.html" title="Multiple defined in 3 places.">lines</a>.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L643" name="L643"></a> 643         <strong class="reserved">int</strong> maxWidth = -1;
<a id="L644" name="L644"></a> 644         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L645" name="L645"></a> 645             <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../D/26848.html" title="Multiple defined in 3 places.">lines</a>.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i);
<a id="L646" name="L646"></a> 646             <strong class="reserved">int</strong> w = <a href="../D/20129.html" title="Multiple defined in 3 places.">getLineWidth</a>(<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>);
<a id="L647" name="L647"></a> 647             <strong class="reserved">if</strong> (w &gt; maxWidth) <em class="brace">{</em>
<a id="L648" name="L648"></a> 648                 maxWidth = w;
<a id="L649" name="L649"></a> 649                 longLine = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>;
<a id="L650" name="L650"></a> 650             <em class="brace">}</em>
<a id="L651" name="L651"></a> 651         <em class="brace">}</em>
<a id="L652" name="L652"></a> 652     <em class="brace">}</em>
<a id="L653" name="L653"></a> 653 
<div class="comment">
      Calculate the width of the line represented by
      the given element.  It is assumed that the font
      and font metrics are up-to-date.</div>
<a id="L659" name="L659"></a> 659     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/17370.html" title="Multiple referred from 12 places.">getLineWidth</a>(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>) <em class="brace">{</em>
<a id="L660" name="L660"></a> 660         <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L661" name="L661"></a> 661             <strong class="reserved">return</strong> 0;
<a id="L662" name="L662"></a> 662         <em class="brace">}</em>
<a id="L663" name="L663"></a> 663         <strong class="reserved">int</strong> p0 = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L664" name="L664"></a> 664         <strong class="reserved">int</strong> p1 = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L665" name="L665"></a> 665         <strong class="reserved">int</strong> w;
<a id="L666" name="L666"></a> 666         <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> s = <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L65" title="Defined at 65 in src/javax/swing/text/SegmentCache.java.">getSharedSegment</a>();
<a id="L667" name="L667"></a> 667         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L668" name="L668"></a> 668             <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>().<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(p0, p1 - p0, s);
<a id="L669" name="L669"></a> 669             w = <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/22971.html" title="Multiple defined in 2 places.">getTabbedTextWidth</a>(s, metrics, tabBase, <strong class="reserved">this</strong>, p0);
<a id="L670" name="L670"></a> 670         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> ble) <em class="brace">{</em>
<a id="L671" name="L671"></a> 671             w = 0;
<a id="L672" name="L672"></a> 672         <em class="brace">}</em>
<a id="L673" name="L673"></a> 673         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(s);
<a id="L674" name="L674"></a> 674         <strong class="reserved">return</strong> w;
<a id="L675" name="L675"></a> 675     <em class="brace">}</em>
<a id="L676" name="L676"></a> 676 
<a id="L677" name="L677"></a> 677     <em class="comment">// --- member variables -----------------------------------------------</em>
<a id="L678" name="L678"></a> 678 
<div class="comment">
      Font metrics for the current font.</div>
<a id="L682" name="L682"></a> 682     <strong class="reserved">protected</strong> <a href="../S/2386.html#L99" title="Defined at 99 in src/java/awt/FontMetrics.java.">FontMetrics</a> metrics;
<a id="L683" name="L683"></a> 683 
<div class="comment">
      The current longest line.  This is used to calculate
      the preferred width of the view.  Since the calculation
      is potentially expensive we try to avoid it by stashing
      which line is currently the longest.</div>
<a id="L690" name="L690"></a> 690     <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> longLine;
<a id="L691" name="L691"></a> 691 
<div class="comment">
      Font used to calculate the longest line... if this
      changes we need to recalculate the longest line</div>
<a id="L696" name="L696"></a> 696     <a href="../S/2176.html#L224" title="Defined at 224 in src/java/awt/Font.java.">Font</a> font;
<a id="L697" name="L697"></a> 697 
<a id="L698" name="L698"></a> 698     <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> lineBuffer;
<a id="L699" name="L699"></a> 699     <strong class="reserved">int</strong> tabSize;
<a id="L700" name="L700"></a> 700     <strong class="reserved">int</strong> tabBase;
<a id="L701" name="L701"></a> 701 
<a id="L702" name="L702"></a> 702     <strong class="reserved">int</strong> sel0;
<a id="L703" name="L703"></a> 703     <strong class="reserved">int</strong> sel1;
<a id="L704" name="L704"></a> 704     <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> unselected;
<a id="L705" name="L705"></a> 705     <a href="../S/2447.html#L60" title="Defined at 60 in src/java/awt/Color.java.">Color</a> selected;
<a id="L706" name="L706"></a> 706 
<div class="comment">
      Offset of where to draw the first character on the first line.
      This is a hack and temporary until we can better address the problem
      of text measuring. This field is actually never set directly in
      PlainView, but by FieldView.</div>
<a id="L713" name="L713"></a> 713     <strong class="reserved">int</strong> firstLineOffset;
<a id="L714" name="L714"></a> 714 
<a id="L715" name="L715"></a> 715 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L56">[^]</a><a href="#L659">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
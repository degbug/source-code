<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/management/timer/Timer.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L200">[^]</a><a href="#L1212">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L200" title="Defined at 200.">preRegister</a></li>
<li><a href="#L211" title="Defined at 211.">postRegister</a></li>
<li><a href="#L222" title="Defined at 222.">preDeregister</a></li>
<li><a href="#L238" title="Defined at 238.">postDeregister</a></li>
<li><a href="#L249" title="Defined at 249.">getNotificationInfo</a></li>
<li><a href="#L274" title="Defined at 274.">start</a></li>
<li><a href="#L337" title="Defined at 337.">stop</a></li>
<li><a href="#L422" title="Defined at 422.">addNotification</a></li>
<li><a href="#L567" title="Defined at 567.">addNotification</a></li>
<li><a href="#L605" title="Defined at 605.">addNotification</a></li>
<li><a href="#L637" title="Defined at 637.">addNotification</a></li>
<li><a href="#L652" title="Defined at 652.">removeNotification</a></li>
<li><a href="#L715" title="Defined at 715.">removeNotifications</a></li>
<li><a href="#L730" title="Defined at 730.">removeAllNotifications</a></li>
<li><a href="#L778" title="Defined at 778.">getNbNotifications</a></li>
<li><a href="#L788" title="Defined at 788.">getAllNotificationIDs</a></li>
<li><a href="#L802" title="Defined at 802.">getNotificationIDs</a></li>
<li><a href="#L826" title="Defined at 826.">getNotificationType</a></li>
<li><a href="#L843" title="Defined at 843.">getNotificationMessage</a></li>
<li><a href="#L864" title="Defined at 864.">getNotificationUserData</a></li>
<li><a href="#L880" title="Defined at 880.">getDate</a></li>
<li><a href="#L898" title="Defined at 898.">getPeriod</a></li>
<li><a href="#L915" title="Defined at 915.">getNbOccurences</a></li>
<li><a href="#L933" title="Defined at 933.">getFixedRate</a></li>
<li><a href="#L951" title="Defined at 951.">getSendPastNotifications</a></li>
<li><a href="#L963" title="Defined at 963.">setSendPastNotifications</a></li>
<li><a href="#L975" title="Defined at 975.">isActive</a></li>
<li><a href="#L984" title="Defined at 984.">isEmpty</a></li>
<li><a href="#L1000" title="Defined at 1000.">sendPastNotifications</a></li>
<li><a href="#L1070" title="Defined at 1070.">updateTimerTable</a></li>
<li><a href="#L1176" title="Defined at 1176.">SuppressWarnings</a></li>
<li><a href="#L1177" title="Defined at 1177.">notifyAlarmClock</a></li>
<li><a href="#L1212" title="Defined at 1212.">sendNotification</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1999, 2012, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.management.timer;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> static com.sun.jmx.defaults.JmxProperties.TIMER_LOGGER;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.Date;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.Map;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.Set;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.TreeSet;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Vector;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.logging.Level;
<a id="L37" name="L37"></a>  37 
<a id="L38" name="L38"></a>  38 <em class="comment">// jmx imports</em>
<a id="L39" name="L39"></a>  39 <em class="comment">//</em>
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> javax.management.InstanceNotFoundException;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> javax.management.MBeanNotificationInfo;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> javax.management.MBeanRegistration;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> javax.management.MBeanServer;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> javax.management.NotificationBroadcasterSupport;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> javax.management.ObjectName;
<a id="L46" name="L46"></a>  46 
<div class="comment">
  Provides the implementation of the timer MBean.
  The timer MBean sends out an alarm at a specified time
  that wakes up all the listeners registered to receive timer notifications.
  <p>
  This class manages a list of dated timer notifications.
  A method allows users to add/remove as many notifications as required.
  When a timer notification is emitted by the timer and becomes obsolete,
  it is automatically removed from the list of timer notifications.
  <br>Additional timer notifications can be added into regularly repeating notifications.
  </p><p>
  Note:
  </p><ol>
  <li>When sending timer notifications, the timer updates the notification sequence number
  irrespective of the notification type.
  </li><li>The timer service relies on the system date of the host where the <code>Timer</code> class is loaded.
  Listeners may receive untimely notifications
  if their host has a different system date.
  To avoid such problems, synchronize the system date of all host machines where timing is needed.
  </li><li>The default behavior for periodic notifications is <i>fixed-delay execution</i>, as
      specified in {@link java.util.Timer}. In order to use <i>fixed-rate execution</i>, use the
      overloaded {@link #addNotification(String, String, Object, Date, long, long, boolean)} method.
  </li><li>Notification listeners are potentially all executed in the same
  thread.  Therefore, they should execute rapidly to avoid holding up
  other listeners or perturbing the regularity of fixed-delay
  executions.  See <a href="../S/3524.html#L62" title="Defined at 62 in src/javax/management/NotificationBroadcasterSupport.java.">NotificationBroadcasterSupport</a>.
  </li></ol>
  @since 1.5</div>
<a id="L80" name="L80"></a>  80 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/8168.html" title="Multiple referred from 88 places.">Timer</a> <strong class="reserved">extends</strong> <a href="../S/3524.html#L62" title="Defined at 62 in src/javax/management/NotificationBroadcasterSupport.java.">NotificationBroadcasterSupport</a>
<a id="L81" name="L81"></a>  81         <strong class="reserved">implements</strong> <a href="../S/3512.html#L47" title="Defined at 47 in src/javax/management/timer/TimerMBean.java.">TimerMBean</a>, <a href="../S/3438.html#L38" title="Defined at 38 in src/javax/management/MBeanRegistration.java.">MBeanRegistration</a> <em class="brace">{</em>
<a id="L82" name="L82"></a>  82 
<a id="L83" name="L83"></a>  83 
<div class="comment">
      ------------------------------------------
       PUBLIC VARIABLES
      ------------------------------------------</div>
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Number of milliseconds in one second.
      Useful constant for the <code>addNotification</code> method.</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_SECOND = 1000;
<a id="L95" name="L95"></a>  95 
<div class="comment">
      Number of milliseconds in one minute.
      Useful constant for the <code>addNotification</code> method.</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_MINUTE = 60*ONE_SECOND;
<a id="L101" name="L101"></a> 101 
<div class="comment">
      Number of milliseconds in one hour.
      Useful constant for the <code>addNotification</code> method.</div>
<a id="L106" name="L106"></a> 106     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_HOUR   = 60*ONE_MINUTE;
<a id="L107" name="L107"></a> 107 
<div class="comment">
      Number of milliseconds in one day.
      Useful constant for the <code>addNotification</code> method.</div>
<a id="L112" name="L112"></a> 112     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_DAY    = 24*ONE_HOUR;
<a id="L113" name="L113"></a> 113 
<div class="comment">
      Number of milliseconds in one week.
      Useful constant for the <code>addNotification</code> method.</div>
<a id="L118" name="L118"></a> 118     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> ONE_WEEK   = 7*ONE_DAY;
<a id="L119" name="L119"></a> 119 
<div class="comment">
      ------------------------------------------
       PRIVATE VARIABLES
      ------------------------------------------</div>
<a id="L125" name="L125"></a> 125 
<div class="comment">
      Table containing all the timer notifications of this timer,
      with the associated date, period and number of occurrences.</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">final</strong> <strong class="reserved">private</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>,<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]&gt; timerTable =
<a id="L131" name="L131"></a> 131         <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;&gt;();
<a id="L132" name="L132"></a> 132 
<div class="comment">
      Past notifications sending on/off flag value.
      This attribute is used to specify if the timer has to send past notifications after start.
      <br>The default value is set to <code>false</code>.</div>
<a id="L138" name="L138"></a> 138     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/3514.html#L1000" title="Defined at 1000 in src/javax/management/timer/Timer.java.">sendPastNotifications</a> = <strong class="reserved">false</strong>;
<a id="L139" name="L139"></a> 139 
<div class="comment">
      Timer state.
      The default value is set to <code>false</code>.</div>
<a id="L144" name="L144"></a> 144     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> <a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> = <strong class="reserved">false</strong>;
<a id="L145" name="L145"></a> 145 
<div class="comment">
      Timer sequence number.
      The default value is set to 0.</div>
<a id="L150" name="L150"></a> 150     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">long</strong> sequenceNumber = 0;
<a id="L151" name="L151"></a> 151 
<a id="L152" name="L152"></a> 152     <em class="comment">// Flags needed to keep the indexes of the objects in the array.</em>
<a id="L153" name="L153"></a> 153     <em class="comment">//</em>
<a id="L154" name="L154"></a> 154     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TIMER_NOTIF_INDEX     = 0;
<a id="L155" name="L155"></a> 155     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TIMER_DATE_INDEX      = 1;
<a id="L156" name="L156"></a> 156     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TIMER_PERIOD_INDEX    = 2;
<a id="L157" name="L157"></a> 157     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TIMER_NB_OCCUR_INDEX  = 3;
<a id="L158" name="L158"></a> 158     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ALARM_CLOCK_INDEX     = 4;
<a id="L159" name="L159"></a> 159     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FIXED_RATE_INDEX      = 5;
<a id="L160" name="L160"></a> 160 
<div class="comment">
      The notification counter ID.
      Used to keep the max key value inserted into the timer table.</div>
<a id="L165" name="L165"></a> 165     <strong class="reserved">volatile</strong> <strong class="reserved">private</strong> <strong class="reserved">int</strong> counterID = 0;
<a id="L166" name="L166"></a> 166 
<a id="L167" name="L167"></a> 167     <strong class="reserved">private</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a> timer;
<a id="L168" name="L168"></a> 168 
<div class="comment">
      ------------------------------------------
       CONSTRUCTORS
      ------------------------------------------</div>
<a id="L174" name="L174"></a> 174 
<div class="comment">
      Default constructor.</div>
<a id="L178" name="L178"></a> 178     <strong class="reserved">public</strong> Timer() <em class="brace">{</em>
<a id="L179" name="L179"></a> 179     <em class="brace">}</em>
<a id="L180" name="L180"></a> 180 
<div class="comment">
      ------------------------------------------
       PUBLIC METHODS
      ------------------------------------------</div>
<a id="L186" name="L186"></a> 186 
<div class="comment">
      Allows the timer MBean to perform any operations it needs before being registered
      in the MBean server.
      <p>
      Not used in this context.
      @param server The MBean server in which the timer MBean will be registered.
      @param name The object name of the timer MBean.
      @return The name of the timer MBean registered.
      @exception java.lang.Exception</p></div>
<a id="L200" name="L200"></a> 200     <strong class="reserved">public</strong> <a href="../S/3486.html#L223" title="Defined at 223 in src/javax/management/ObjectName.java.">ObjectName</a> <a href="../R/24896.html" title="Multiple referred from 4 places.">preRegister</a>(<a href="../S/3578.html#L260" title="Defined at 260 in src/javax/management/MBeanServer.java.">MBeanServer</a> server, <a href="../S/3486.html#L223" title="Defined at 223 in src/javax/management/ObjectName.java.">ObjectName</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)
<a id="L201" name="L201"></a> 201         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <em class="brace">{</em>
<a id="L202" name="L202"></a> 202         <strong class="reserved">return</strong> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>;
<a id="L203" name="L203"></a> 203     <em class="brace">}</em>
<a id="L204" name="L204"></a> 204 
<div class="comment">
      Allows the timer MBean to perform any operations needed after having been
      registered in the MBean server or after the registration has failed.
      <p>
      Not used in this context.</p></div>
<a id="L211" name="L211"></a> 211     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24865.html" title="Multiple referred from 4 places.">postRegister</a> (<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> registrationDone) <em class="brace">{</em>
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<div class="comment">
      Allows the timer MBean to perform any operations it needs before being unregistered
      by the MBean server.
      <p>
      Stops the timer.
      @exception java.lang.Exception</p></div>
<a id="L222" name="L222"></a> 222     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24887.html" title="Multiple referred from 3 places.">preDeregister</a>() <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <em class="brace">{</em>
<a id="L223" name="L223"></a> 223 
<a id="L224" name="L224"></a> 224         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L225" name="L225"></a> 225                 "preDeregister", "stop the timer");
<a id="L226" name="L226"></a> 226 
<a id="L227" name="L227"></a> 227         <em class="comment">// Stop the timer.</em>
<a id="L228" name="L228"></a> 228         <em class="comment">//</em>
<a id="L229" name="L229"></a> 229         <a href="../D/34877.html" title="Multiple defined in 25 places.">stop</a>();
<a id="L230" name="L230"></a> 230     <em class="brace">}</em>
<a id="L231" name="L231"></a> 231 
<div class="comment">
      Allows the timer MBean to perform any operations needed after having been
      unregistered by the MBean server.
      <p>
      Not used in this context.</p></div>
<a id="L238" name="L238"></a> 238     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24854.html" title="Multiple referred from 3 places.">postDeregister</a>() <em class="brace">{</em>
<a id="L239" name="L239"></a> 239     <em class="brace">}</em>
<a id="L240" name="L240"></a> 240 
<div class="comment">
      This overrides the method in NotificationBroadcasterSupport.
      Return the MBeanNotificationInfo[] array for this MBean.
      The returned array has one element to indicate that the MBean
      can emit TimerNotification.  The array of type strings
      associated with this entry is a snapshot of the current types
      that were given to addNotification.</div>
<a id="L249" name="L249"></a> 249     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/3444.html#L61" title="Defined at 61 in src/javax/management/MBeanNotificationInfo.java.">MBeanNotificationInfo</a>[] <a href="../R/18026.html" title="Multiple referred from 6 places.">getNotificationInfo</a>() <em class="brace">{</em>
<a id="L250" name="L250"></a> 250         <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>&gt; notifTypes = <strong class="reserved">new</strong> <a href="../S/1161.html#L92" title="Defined at 92 in src/java/util/TreeSet.java.">TreeSet</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>&gt;();
<a id="L251" name="L251"></a> 251         <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] entry : timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L252" name="L252"></a> 252             <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> notif = (<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)
<a id="L253" name="L253"></a> 253                 entry[TIMER_NOTIF_INDEX];
<a id="L254" name="L254"></a> 254             notifTypes.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(notif.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>());
<a id="L255" name="L255"></a> 255         <em class="brace">}</em>
<a id="L256" name="L256"></a> 256         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] notifTypesArray =
<a id="L257" name="L257"></a> 257             notifTypes.<a href="../D/35348.html" title="Multiple defined in 117 places.">toArray</a>(<strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[0]);
<a id="L258" name="L258"></a> 258         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3444.html#L61" title="Defined at 61 in src/javax/management/MBeanNotificationInfo.java.">MBeanNotificationInfo</a>[] <em class="brace">{</em>
<a id="L259" name="L259"></a> 259             <strong class="reserved">new</strong> <a href="../S/3444.html#L61" title="Defined at 61 in src/javax/management/MBeanNotificationInfo.java.">MBeanNotificationInfo</a>(notifTypesArray,
<a id="L260" name="L260"></a> 260                                       <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L261" name="L261"></a> 261                                       "Notification sent by Timer MBean")
<a id="L262" name="L262"></a> 262         <em class="brace">}</em>;
<a id="L263" name="L263"></a> 263     <em class="brace">}</em>
<a id="L264" name="L264"></a> 264 
<div class="comment">
      Starts the timer.
      <p>
      If there is one or more timer notifications before the time in the list of notifications, the notification
      is sent according to the <code>sendPastNotifications</code> flag and then, updated
      according to its period and remaining number of occurrences.
      If the timer notification date remains earlier than the current date, this notification is just removed
      from the list of notifications.</p></div>
<a id="L274" name="L274"></a> 274     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/28780.html" title="Multiple referred from 2027 places.">start</a>() <em class="brace">{</em>
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L277" name="L277"></a> 277                 "start", "starting the timer");
<a id="L278" name="L278"></a> 278 
<a id="L279" name="L279"></a> 279         <em class="comment">// Start the TimerAlarmClock.</em>
<a id="L280" name="L280"></a> 280         <em class="comment">//</em>
<a id="L281" name="L281"></a> 281         <strong class="reserved">if</strong> (<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282 
<a id="L283" name="L283"></a> 283             timer = <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>();
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285             <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock;
<a id="L286" name="L286"></a> 286             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>;
<a id="L287" name="L287"></a> 287 
<a id="L288" name="L288"></a> 288             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> currentDate = <strong class="reserved">new</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>();
<a id="L289" name="L289"></a> 289 
<a id="L290" name="L290"></a> 290             <em class="comment">// Send or not past notifications depending on the flag.</em>
<a id="L291" name="L291"></a> 291             <em class="comment">// Update the date and the number of occurrences of past notifications</em>
<a id="L292" name="L292"></a> 292             <em class="comment">// to make them later than the current date.</em>
<a id="L293" name="L293"></a> 293             <em class="comment">//</em>
<a id="L294" name="L294"></a> 294             <a href="../S/3514.html#L1000" title="Defined at 1000 in src/javax/management/timer/Timer.java.">sendPastNotifications</a>(currentDate, <a href="../S/3514.html#L1000" title="Defined at 1000 in src/javax/management/timer/Timer.java.">sendPastNotifications</a>);
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296             <em class="comment">// Update and start all the TimerAlarmClocks.</em>
<a id="L297" name="L297"></a> 297             <em class="comment">// Here, all the notifications in the timer table are later than the current date.</em>
<a id="L298" name="L298"></a> 298             <em class="comment">//</em>
<a id="L299" name="L299"></a> 299             <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj : timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L300" name="L300"></a> 300 
<a id="L301" name="L301"></a> 301                 <em class="comment">// Retrieve the date notification and the TimerAlarmClock.</em>
<a id="L302" name="L302"></a> 302                 <em class="comment">//</em>
<a id="L303" name="L303"></a> 303                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = (<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>)obj[TIMER_DATE_INDEX];
<a id="L304" name="L304"></a> 304 
<a id="L305" name="L305"></a> 305                 <em class="comment">// Update all the TimerAlarmClock timeouts and start them.</em>
<a id="L306" name="L306"></a> 306                 <em class="comment">//</em>
<a id="L307" name="L307"></a> 307                 <strong class="reserved">boolean</strong> fixedRate = ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)obj[FIXED_RATE_INDEX]).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L308" name="L308"></a> 308                 <strong class="reserved">if</strong> (fixedRate)
<a id="L309" name="L309"></a> 309                 <em class="brace">{</em>
<a id="L310" name="L310"></a> 310                   alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L311" name="L311"></a> 311                   obj[ALARM_CLOCK_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)alarmClock;
<a id="L312" name="L312"></a> 312                   timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L313" name="L313"></a> 313                 <em class="brace">}</em>
<a id="L314" name="L314"></a> 314                 <strong class="reserved">else</strong>
<a id="L315" name="L315"></a> 315                 <em class="brace">{</em>
<a id="L316" name="L316"></a> 316                   alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>() - currentDate.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>()));
<a id="L317" name="L317"></a> 317                   obj[ALARM_CLOCK_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)alarmClock;
<a id="L318" name="L318"></a> 318                   timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.timeout);
<a id="L319" name="L319"></a> 319                 <em class="brace">}</em>
<a id="L320" name="L320"></a> 320             <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<a id="L322" name="L322"></a> 322             <em class="comment">// Set the state to ON.</em>
<a id="L323" name="L323"></a> 323             <em class="comment">//</em>
<a id="L324" name="L324"></a> 324             <a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> = <strong class="reserved">true</strong>;
<a id="L325" name="L325"></a> 325 
<a id="L326" name="L326"></a> 326             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L327" name="L327"></a> 327                     "start", "timer started");
<a id="L328" name="L328"></a> 328         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L330" name="L330"></a> 330                     "start", "the timer is already activated");
<a id="L331" name="L331"></a> 331         <em class="brace">}</em>
<a id="L332" name="L332"></a> 332     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333 
<div class="comment">
      Stops the timer.</div>
<a id="L337" name="L337"></a> 337     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/28900.html" title="Multiple referred from 176 places.">stop</a>() <em class="brace">{</em>
<a id="L338" name="L338"></a> 338 
<a id="L339" name="L339"></a> 339         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L340" name="L340"></a> 340                 "stop", "stopping the timer");
<a id="L341" name="L341"></a> 341 
<a id="L342" name="L342"></a> 342         <em class="comment">// Stop the TimerAlarmClock.</em>
<a id="L343" name="L343"></a> 343         <em class="comment">//</em>
<a id="L344" name="L344"></a> 344         <strong class="reserved">if</strong> (<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> == <strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L345" name="L345"></a> 345 
<a id="L346" name="L346"></a> 346             <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj : timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L347" name="L347"></a> 347 
<a id="L348" name="L348"></a> 348                 <em class="comment">// Stop all the TimerAlarmClock.</em>
<a id="L349" name="L349"></a> 349                 <em class="comment">//</em>
<a id="L350" name="L350"></a> 350                 <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock = (<a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>)obj[ALARM_CLOCK_INDEX];
<a id="L351" name="L351"></a> 351                 <strong class="reserved">if</strong> (alarmClock != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352 <em class="comment">//                     alarmClock.interrupt();</em>
<a id="L353" name="L353"></a> 353 <em class="comment">//                     try {</em>
<a id="L354" name="L354"></a> 354 <em class="comment">//                         // Wait until the thread die.</em>
<a id="L355" name="L355"></a> 355 <em class="comment">//                         //</em>
<a id="L356" name="L356"></a> 356 <em class="comment">//                         alarmClock.join();</em>
<a id="L357" name="L357"></a> 357 <em class="comment">//                     } catch (InterruptedException ex) {</em>
<a id="L358" name="L358"></a> 358 <em class="comment">//                         // Ignore...</em>
<a id="L359" name="L359"></a> 359 <em class="comment">//                     }</em>
<a id="L360" name="L360"></a> 360 <em class="comment">//                     // Remove the reference on the TimerAlarmClock.</em>
<a id="L361" name="L361"></a> 361 <em class="comment">//                     //</em>
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363                     alarmClock.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L364" name="L364"></a> 364                 <em class="brace">}</em>
<a id="L365" name="L365"></a> 365             <em class="brace">}</em>
<a id="L366" name="L366"></a> 366 
<a id="L367" name="L367"></a> 367             timer.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L368" name="L368"></a> 368 
<a id="L369" name="L369"></a> 369             <em class="comment">// Set the state to OFF.</em>
<a id="L370" name="L370"></a> 370             <em class="comment">//</em>
<a id="L371" name="L371"></a> 371             <a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> = <strong class="reserved">false</strong>;
<a id="L372" name="L372"></a> 372 
<a id="L373" name="L373"></a> 373             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L374" name="L374"></a> 374                     "stop", "timer stopped");
<a id="L375" name="L375"></a> 375         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L376" name="L376"></a> 376             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L377" name="L377"></a> 377                     "stop", "the timer is already deactivated");
<a id="L378" name="L378"></a> 378         <em class="brace">}</em>
<a id="L379" name="L379"></a> 379     <em class="brace">}</em>
<a id="L380" name="L380"></a> 380 
<div class="comment">
      Creates a new timer notification with the specified <code>type</code>, <code>message</code>
      and <code>userData</code> and inserts it into the list of notifications with a given date,
      period and number of occurrences.
      <p>
      If the timer notification to be inserted has a date that is before the current date,
      the method behaves as if the specified date were the current date. <br>
      For once-off notifications, the notification is delivered immediately. <br>
      For periodic notifications, the first notification is delivered immediately and the
      subsequent ones are spaced as specified by the period parameter.
      </p><p>
      Note that once the timer notification has been added into the list of notifications,
      its associated date, period and number of occurrences cannot be updated.
      </p><p>
      In the case of a periodic notification, the value of parameter <i>fixedRate</i> is used to
      specify the execution scheme, as specified in {@link java.util.Timer}.
      @param type The timer notification type.
      @param message The timer notification detailed message.
      @param userData The timer notification user data object.
      @param date The date when the notification occurs.
      @param period The period of the timer notification (in milliseconds).
      @param nbOccurences The total number the timer notification will be emitted.
      @param fixedRate If <code>true</code> and if the notification is periodic, the notification
                       is scheduled with a <i>fixed-rate</i> execution scheme. If
                       <code>false</code> and if the notification is periodic, the notification
                       is scheduled with a <i>fixed-delay</i> execution scheme. Ignored if the
                       notification is not periodic.
      @return The identifier of the new created timer notification.
      @exception java.lang.IllegalArgumentException The date is <code>null</code> or
      the period or the number of occurrences is negative.
      @see #addNotification(String, String, Object, Date, long, long)</p></div>
<a id="L417" name="L417"></a> 417 <em class="comment">// NPCTE fix for bugId 4464388, esc 0,  MR, to be added after modification of jmx spec</em>
<a id="L418" name="L418"></a> 418 <em class="comment">//  public synchronized Integer addNotification(String type, String message, Serializable userData,</em>
<a id="L419" name="L419"></a> 419 <em class="comment">//                                                Date date, long period, long nbOccurences)</em>
<a id="L420" name="L420"></a> 420 <em class="comment">// end of NPCTE fix for bugId 4464388</em>
<a id="L421" name="L421"></a> 421 
<a id="L422" name="L422"></a> 422     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/9879.html" title="Multiple referred from 4 places.">addNotification</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData,
<a id="L423" name="L423"></a> 423                                                 <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>, <strong class="reserved">long</strong> nbOccurences, <strong class="reserved">boolean</strong> fixedRate)
<a id="L424" name="L424"></a> 424         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <em class="brace">{</em>
<a id="L425" name="L425"></a> 425 
<a id="L426" name="L426"></a> 426         <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L427" name="L427"></a> 427             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Timer notification date cannot be null.");
<a id="L428" name="L428"></a> 428         <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430         <em class="comment">// Check that all the timer notification attributes are valid.</em>
<a id="L431" name="L431"></a> 431         <em class="comment">//</em>
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433         <em class="comment">// Invalid timer period value exception:</em>
<a id="L434" name="L434"></a> 434         <em class="comment">// Check that the period and the nbOccurences are POSITIVE VALUES.</em>
<a id="L435" name="L435"></a> 435         <em class="comment">//</em>
<a id="L436" name="L436"></a> 436         <strong class="reserved">if</strong> ((<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> &lt; 0) || (nbOccurences &lt; 0)) <em class="brace">{</em>
<a id="L437" name="L437"></a> 437             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Negative values for the periodicity");
<a id="L438" name="L438"></a> 438         <em class="brace">}</em>
<a id="L439" name="L439"></a> 439 
<a id="L440" name="L440"></a> 440         <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> currentDate = <strong class="reserved">new</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>();
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442         <em class="comment">// Update the date if it is before the current date.</em>
<a id="L443" name="L443"></a> 443         <em class="comment">//</em>
<a id="L444" name="L444"></a> 444         <strong class="reserved">if</strong> (currentDate.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)) <em class="brace">{</em>
<a id="L445" name="L445"></a> 445 
<a id="L446" name="L446"></a> 446             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/34137.html" title="Multiple defined in 25 places.">setTime</a>(currentDate.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>());
<a id="L447" name="L447"></a> 447             <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448                 TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L449" name="L449"></a> 449                         "addNotification",
<a id="L450" name="L450"></a> 450                         "update timer notification to add with:" +
<a id="L451" name="L451"></a> 451                         "\n\tNotification date = " + <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L452" name="L452"></a> 452             <em class="brace">}</em>
<a id="L453" name="L453"></a> 453         <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<a id="L455" name="L455"></a> 455         <em class="comment">// Create and add the timer notification into the timer table.</em>
<a id="L456" name="L456"></a> 456         <em class="comment">//</em>
<a id="L457" name="L457"></a> 457         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> notifID = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(++counterID);
<a id="L458" name="L458"></a> 458 
<a id="L459" name="L459"></a> 459         <em class="comment">// The sequenceNumber and the timeStamp attributes are updated</em>
<a id="L460" name="L460"></a> 460         <em class="comment">// when the notification is emitted by the timer.</em>
<a id="L461" name="L461"></a> 461         <em class="comment">//</em>
<a id="L462" name="L462"></a> 462         <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> notif = <strong class="reserved">new</strong> <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">this</strong>, 0, 0, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, notifID);
<a id="L463" name="L463"></a> 463         notif.<a href="../D/34247.html" title="Multiple defined in 16 places.">setUserData</a>(userData);
<a id="L464" name="L464"></a> 464 
<a id="L465" name="L465"></a> 465         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[6];
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467         <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock;
<a id="L468" name="L468"></a> 468         <strong class="reserved">if</strong> (fixedRate)
<a id="L469" name="L469"></a> 469         <em class="brace">{</em>
<a id="L470" name="L470"></a> 470           alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L471" name="L471"></a> 471         <em class="brace">}</em>
<a id="L472" name="L472"></a> 472         <strong class="reserved">else</strong>
<a id="L473" name="L473"></a> 473         <em class="brace">{</em>
<a id="L474" name="L474"></a> 474           alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>() - currentDate.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>()));
<a id="L475" name="L475"></a> 475         <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477         <em class="comment">// Fix bug 00417.B</em>
<a id="L478" name="L478"></a> 478         <em class="comment">// The date registered into the timer is a clone from the date parameter.</em>
<a id="L479" name="L479"></a> 479         <em class="comment">//</em>
<a id="L480" name="L480"></a> 480         <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> d = <strong class="reserved">new</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>());
<a id="L481" name="L481"></a> 481 
<a id="L482" name="L482"></a> 482         obj[TIMER_NOTIF_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)notif;
<a id="L483" name="L483"></a> 483         obj[TIMER_DATE_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)d;
<a id="L484" name="L484"></a> 484         obj[TIMER_PERIOD_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>) <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>;
<a id="L485" name="L485"></a> 485         obj[TIMER_NB_OCCUR_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>) nbOccurences;
<a id="L486" name="L486"></a> 486         obj[ALARM_CLOCK_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)alarmClock;
<a id="L487" name="L487"></a> 487         obj[FIXED_RATE_INDEX] = <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(fixedRate);
<a id="L488" name="L488"></a> 488 
<a id="L489" name="L489"></a> 489         <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L490" name="L490"></a> 490             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> strb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>()
<a id="L491" name="L491"></a> 491             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("adding timer notification:\n\t")
<a id="L492" name="L492"></a> 492             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("Notification source = ")
<a id="L493" name="L493"></a> 493             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>())
<a id="L494" name="L494"></a> 494             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification type = ")
<a id="L495" name="L495"></a> 495             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L496" name="L496"></a> 496             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification ID = ")
<a id="L497" name="L497"></a> 497             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notifID)
<a id="L498" name="L498"></a> 498             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification date = ")
<a id="L499" name="L499"></a> 499             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(d)
<a id="L500" name="L500"></a> 500             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification period = ")
<a id="L501" name="L501"></a> 501             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>)
<a id="L502" name="L502"></a> 502             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification nb of occurrences = ")
<a id="L503" name="L503"></a> 503             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(nbOccurences)
<a id="L504" name="L504"></a> 504             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification executes at fixed rate = ")
<a id="L505" name="L505"></a> 505             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(fixedRate);
<a id="L506" name="L506"></a> 506             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L507" name="L507"></a> 507                     "addNotification", strb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L508" name="L508"></a> 508         <em class="brace">}</em>
<a id="L509" name="L509"></a> 509 
<a id="L510" name="L510"></a> 510         timerTable.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(notifID, obj);
<a id="L511" name="L511"></a> 511 
<a id="L512" name="L512"></a> 512         <em class="comment">// Update and start the TimerAlarmClock.</em>
<a id="L513" name="L513"></a> 513         <em class="comment">//</em>
<a id="L514" name="L514"></a> 514         <strong class="reserved">if</strong> (<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> == <strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L515" name="L515"></a> 515           <strong class="reserved">if</strong> (fixedRate)
<a id="L516" name="L516"></a> 516           <em class="brace">{</em>
<a id="L517" name="L517"></a> 517             timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L518" name="L518"></a> 518           <em class="brace">}</em>
<a id="L519" name="L519"></a> 519           <strong class="reserved">else</strong>
<a id="L520" name="L520"></a> 520           <em class="brace">{</em>
<a id="L521" name="L521"></a> 521             timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.timeout);
<a id="L522" name="L522"></a> 522           <em class="brace">}</em>
<a id="L523" name="L523"></a> 523         <em class="brace">}</em>
<a id="L524" name="L524"></a> 524 
<a id="L525" name="L525"></a> 525         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L526" name="L526"></a> 526                 "addNotification", "timer notification added");
<a id="L527" name="L527"></a> 527         <strong class="reserved">return</strong> notifID;
<a id="L528" name="L528"></a> 528     <em class="brace">}</em>
<a id="L529" name="L529"></a> 529 
<div class="comment">
      Creates a new timer notification with the specified <code>type</code>, <code>message</code>
      and <code>userData</code> and inserts it into the list of notifications with a given date,
      period and number of occurrences.
      <p>
      If the timer notification to be inserted has a date that is before the current date,
      the method behaves as if the specified date were the current date. <br>
      For once-off notifications, the notification is delivered immediately. <br>
      For periodic notifications, the first notification is delivered immediately and the
      subsequent ones are spaced as specified by the period parameter.
      </p><p>
      Note that once the timer notification has been added into the list of notifications,
      its associated date, period and number of occurrences cannot be updated.
      </p><p>
      In the case of a periodic notification, uses a <i>fixed-delay</i> execution scheme, as specified in
      {@link java.util.Timer}. In order to use a <i>fixed-rate</i> execution scheme, use
      {@link #addNotification(String, String, Object, Date, long, long, boolean)} instead.
      @param type The timer notification type.
      @param message The timer notification detailed message.
      @param userData The timer notification user data object.
      @param date The date when the notification occurs.
      @param period The period of the timer notification (in milliseconds).
      @param nbOccurences The total number the timer notification will be emitted.
      @return The identifier of the new created timer notification.
      @exception java.lang.IllegalArgumentException The date is <code>null</code> or
      the period or the number of occurrences is negative.
      @see #addNotification(String, String, Object, Date, long, long, boolean)</p></div>
<a id="L562" name="L562"></a> 562 <em class="comment">// NPCTE fix for bugId 4464388, esc 0,  MR , to be added after modification of jmx spec</em>
<a id="L563" name="L563"></a> 563 <em class="comment">//  public synchronized Integer addNotification(String type, String message, Serializable userData,</em>
<a id="L564" name="L564"></a> 564 <em class="comment">//                                              Date date, long period)</em>
<a id="L565" name="L565"></a> 565 <em class="comment">// end of NPCTE fix for bugId 4464388 */</em>
<a id="L566" name="L566"></a> 566 
<a id="L567" name="L567"></a> 567     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/9879.html" title="Multiple referred from 4 places.">addNotification</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData,
<a id="L568" name="L568"></a> 568                                                 <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>, <strong class="reserved">long</strong> nbOccurences)
<a id="L569" name="L569"></a> 569         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <em class="brace">{</em>
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571       <strong class="reserved">return</strong> <a href="../D/10973.html" title="Multiple defined in 9 places.">addNotification</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>, nbOccurences, <strong class="reserved">false</strong>);
<a id="L572" name="L572"></a> 572     <em class="brace">}</em>
<a id="L573" name="L573"></a> 573 
<div class="comment">
      Creates a new timer notification with the specified <code>type</code>, <code>message</code>
      and <code>userData</code> and inserts it into the list of notifications with a given date
      and period and a null number of occurrences.
      <p>
      The timer notification will repeat continuously using the timer period using a <i>fixed-delay</i>
      execution scheme, as specified in {@link java.util.Timer}. In order to use a <i>fixed-rate</i>
      execution scheme, use {@link #addNotification(String, String, Object, Date, long, long,
      boolean)} instead.
      </p><p>
      If the timer notification to be inserted has a date that is before the current date,
      the method behaves as if the specified date were the current date. The
      first notification is delivered immediately and the subsequent ones are
      spaced as specified by the period parameter.
      @param type The timer notification type.
      @param message The timer notification detailed message.
      @param userData The timer notification user data object.
      @param date The date when the notification occurs.
      @param period The period of the timer notification (in milliseconds).
      @return The identifier of the new created timer notification.
      @exception java.lang.IllegalArgumentException The date is <code>null</code> or
      the period is negative.</p></div>
<a id="L600" name="L600"></a> 600 <em class="comment">// NPCTE fix for bugId 4464388, esc 0,  MR , to be added after modification of jmx spec</em>
<a id="L601" name="L601"></a> 601 <em class="comment">//  public synchronized Integer addNotification(String type, String message, Serializable userData,</em>
<a id="L602" name="L602"></a> 602 <em class="comment">//                                              Date date, long period)</em>
<a id="L603" name="L603"></a> 603 <em class="comment">// end of NPCTE fix for bugId 4464388 */</em>
<a id="L604" name="L604"></a> 604 
<a id="L605" name="L605"></a> 605     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/9879.html" title="Multiple referred from 4 places.">addNotification</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData,
<a id="L606" name="L606"></a> 606                                                 <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">long</strong> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>)
<a id="L607" name="L607"></a> 607         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <em class="brace">{</em>
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609         <strong class="reserved">return</strong> (<a href="../D/10973.html" title="Multiple defined in 9 places.">addNotification</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>, 0));
<a id="L610" name="L610"></a> 610     <em class="brace">}</em>
<a id="L611" name="L611"></a> 611 
<div class="comment">
      Creates a new timer notification with the specified <code>type</code>, <code>message</code>
      and <code>userData</code> and inserts it into the list of notifications with a given date
      and a null period and number of occurrences.
      <p>
      The timer notification will be handled once at the specified date.
      </p><p>
      If the timer notification to be inserted has a date that is before the current date,
      the method behaves as if the specified date were the current date and the
      notification is delivered immediately.
      @param type The timer notification type.
      @param message The timer notification detailed message.
      @param userData The timer notification user data object.
      @param date The date when the notification occurs.
      @return The identifier of the new created timer notification.
      @exception java.lang.IllegalArgumentException The date is <code>null</code>.</p></div>
<a id="L632" name="L632"></a> 632 <em class="comment">// NPCTE fix for bugId 4464388, esc 0,  MR, to be added after modification of jmx spec</em>
<a id="L633" name="L633"></a> 633 <em class="comment">//  public synchronized Integer addNotification(String type, String message, Serializable userData, Date date)</em>
<a id="L634" name="L634"></a> 634 <em class="comment">//      throws java.lang.IllegalArgumentException {</em>
<a id="L635" name="L635"></a> 635 <em class="comment">// end of NPCTE fix for bugId 4464388</em>
<a id="L636" name="L636"></a> 636 
<a id="L637" name="L637"></a> 637     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../R/9879.html" title="Multiple referred from 4 places.">addNotification</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> userData, <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)
<a id="L638" name="L638"></a> 638         <strong class="reserved">throws</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a> <em class="brace">{</em>
<a id="L639" name="L639"></a> 639 
<a id="L640" name="L640"></a> 640 
<a id="L641" name="L641"></a> 641         <strong class="reserved">return</strong> (<a href="../D/10973.html" title="Multiple defined in 9 places.">addNotification</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>, userData, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, 0, 0));
<a id="L642" name="L642"></a> 642     <em class="brace">}</em>
<a id="L643" name="L643"></a> 643 
<div class="comment">
      Removes the timer notification corresponding to the specified identifier from the list of notifications.
      @param id The timer notification identifier.
      @exception InstanceNotFoundException The specified identifier does not correspond to any timer notification
      in the list of notifications of this timer MBean.</div>
<a id="L652" name="L652"></a> 652     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/3514.html#L723" title="Referred from 723 in src/javax/management/timer/Timer.java.">removeNotification</a>(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <strong class="reserved">throws</strong> <a href="../S/3436.html#L34" title="Defined at 34 in src/javax/management/InstanceNotFoundException.java.">InstanceNotFoundException</a> <em class="brace">{</em>
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654         <em class="comment">// Check that the notification to remove is effectively in the timer table.</em>
<a id="L655" name="L655"></a> 655         <em class="comment">//</em>
<a id="L656" name="L656"></a> 656         <strong class="reserved">if</strong> (timerTable.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3436.html#L34" title="Defined at 34 in src/javax/management/InstanceNotFoundException.java.">InstanceNotFoundException</a>("Timer notification to remove not in the list of notifications");
<a id="L658" name="L658"></a> 658         <em class="brace">}</em>
<a id="L659" name="L659"></a> 659 
<a id="L660" name="L660"></a> 660         <em class="comment">// Stop the TimerAlarmClock.</em>
<a id="L661" name="L661"></a> 661         <em class="comment">//</em>
<a id="L662" name="L662"></a> 662         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L663" name="L663"></a> 663         <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock = (<a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>)obj[ALARM_CLOCK_INDEX];
<a id="L664" name="L664"></a> 664         <strong class="reserved">if</strong> (alarmClock != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L665" name="L665"></a> 665 <em class="comment">//             alarmClock.interrupt();</em>
<a id="L666" name="L666"></a> 666 <em class="comment">//             try {</em>
<a id="L667" name="L667"></a> 667 <em class="comment">//                 // Wait until the thread die.</em>
<a id="L668" name="L668"></a> 668 <em class="comment">//                 //</em>
<a id="L669" name="L669"></a> 669 <em class="comment">//                 alarmClock.join();</em>
<a id="L670" name="L670"></a> 670 <em class="comment">//             } catch (InterruptedException e) {</em>
<a id="L671" name="L671"></a> 671 <em class="comment">//                 // Ignore...</em>
<a id="L672" name="L672"></a> 672 <em class="comment">//             }</em>
<a id="L673" name="L673"></a> 673 <em class="comment">//             // Remove the reference on the TimerAlarmClock.</em>
<a id="L674" name="L674"></a> 674 <em class="comment">//             //</em>
<a id="L675" name="L675"></a> 675             alarmClock.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L676" name="L676"></a> 676         <em class="brace">}</em>
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678         <em class="comment">// Remove the timer notification from the timer table.</em>
<a id="L679" name="L679"></a> 679         <em class="comment">//</em>
<a id="L680" name="L680"></a> 680         <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L681" name="L681"></a> 681             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> strb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>()
<a id="L682" name="L682"></a> 682             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("removing timer notification:")
<a id="L683" name="L683"></a> 683             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification source = ")
<a id="L684" name="L684"></a> 684             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>())
<a id="L685" name="L685"></a> 685             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification type = ")
<a id="L686" name="L686"></a> 686             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L687" name="L687"></a> 687             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification ID = ")
<a id="L688" name="L688"></a> 688             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>())
<a id="L689" name="L689"></a> 689             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification date = ")
<a id="L690" name="L690"></a> 690             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[TIMER_DATE_INDEX])
<a id="L691" name="L691"></a> 691             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification period = ")
<a id="L692" name="L692"></a> 692             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[TIMER_PERIOD_INDEX])
<a id="L693" name="L693"></a> 693             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification nb of occurrences = ")
<a id="L694" name="L694"></a> 694             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[TIMER_NB_OCCUR_INDEX])
<a id="L695" name="L695"></a> 695             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification executes at fixed rate = ")
<a id="L696" name="L696"></a> 696             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[FIXED_RATE_INDEX]);
<a id="L697" name="L697"></a> 697             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L698" name="L698"></a> 698                     "removeNotification", strb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L699" name="L699"></a> 699         <em class="brace">}</em>
<a id="L700" name="L700"></a> 700 
<a id="L701" name="L701"></a> 701         timerTable.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L702" name="L702"></a> 702 
<a id="L703" name="L703"></a> 703         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L704" name="L704"></a> 704                 "removeNotification", "timer notification removed");
<a id="L705" name="L705"></a> 705     <em class="brace">}</em>
<a id="L706" name="L706"></a> 706 
<div class="comment">
      Removes all the timer notifications corresponding to the specified type from the list of notifications.
      @param type The timer notification type.
      @exception InstanceNotFoundException The specified type does not correspond to any timer notification
      in the list of notifications of this timer MBean.</div>
<a id="L715" name="L715"></a> 715     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> removeNotifications(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <strong class="reserved">throws</strong> <a href="../S/3436.html#L34" title="Defined at 34 in src/javax/management/InstanceNotFoundException.java.">InstanceNotFoundException</a> <em class="brace">{</em>
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; v = <a href="../D/21035.html" title="Multiple defined in 2 places.">getNotificationIDs</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L718" name="L718"></a> 718 
<a id="L719" name="L719"></a> 719         <strong class="reserved">if</strong> (v.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>())
<a id="L720" name="L720"></a> 720             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3436.html#L34" title="Defined at 34 in src/javax/management/InstanceNotFoundException.java.">InstanceNotFoundException</a>("Timer notifications to remove not in the list of notifications");
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722         <strong class="reserved">for</strong> (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> i : v)
<a id="L723" name="L723"></a> 723             <a href="../D/30898.html" title="Multiple defined in 2 places.">removeNotification</a>(i);
<a id="L724" name="L724"></a> 724     <em class="brace">}</em>
<a id="L725" name="L725"></a> 725 
<div class="comment">
      Removes all the timer notifications from the list of notifications
      and resets the counter used to update the timer notification identifiers.</div>
<a id="L730" name="L730"></a> 730     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> removeAllNotifications() <em class="brace">{</em>
<a id="L731" name="L731"></a> 731 
<a id="L732" name="L732"></a> 732         <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock;
<a id="L733" name="L733"></a> 733 
<a id="L734" name="L734"></a> 734         <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj : timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L735" name="L735"></a> 735 
<a id="L736" name="L736"></a> 736             <em class="comment">// Stop the TimerAlarmClock.</em>
<a id="L737" name="L737"></a> 737             <em class="comment">//</em>
<a id="L738" name="L738"></a> 738             alarmClock = (<a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>)obj[ALARM_CLOCK_INDEX];
<a id="L739" name="L739"></a> 739 <em class="comment">//             if (alarmClock != null) {</em>
<a id="L740" name="L740"></a> 740 <em class="comment">//                 alarmClock.interrupt();</em>
<a id="L741" name="L741"></a> 741 <em class="comment">//                 try {</em>
<a id="L742" name="L742"></a> 742 <em class="comment">//                     // Wait until the thread die.</em>
<a id="L743" name="L743"></a> 743 <em class="comment">//                     //</em>
<a id="L744" name="L744"></a> 744 <em class="comment">//                     alarmClock.join();</em>
<a id="L745" name="L745"></a> 745 <em class="comment">//                 } catch (InterruptedException ex) {</em>
<a id="L746" name="L746"></a> 746 <em class="comment">//                     // Ignore...</em>
<a id="L747" name="L747"></a> 747 <em class="comment">//                 }</em>
<a id="L748" name="L748"></a> 748                   <em class="comment">// Remove the reference on the TimerAlarmClock.</em>
<a id="L749" name="L749"></a> 749                   <em class="comment">//</em>
<a id="L750" name="L750"></a> 750 <em class="comment">//             }</em>
<a id="L751" name="L751"></a> 751             alarmClock.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753 
<a id="L754" name="L754"></a> 754         <em class="comment">// Remove all the timer notifications from the timer table.</em>
<a id="L755" name="L755"></a> 755         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L756" name="L756"></a> 756                 "removeAllNotifications", "removing all timer notifications");
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758         timerTable.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L759" name="L759"></a> 759 
<a id="L760" name="L760"></a> 760         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L761" name="L761"></a> 761                 "removeAllNotifications", "all timer notifications removed");
<a id="L762" name="L762"></a> 762         <em class="comment">// Reset the counterID.</em>
<a id="L763" name="L763"></a> 763         <em class="comment">//</em>
<a id="L764" name="L764"></a> 764         counterID = 0;
<a id="L765" name="L765"></a> 765 
<a id="L766" name="L766"></a> 766         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L767" name="L767"></a> 767                 "removeAllNotifications", "timer notification counter ID reset");
<a id="L768" name="L768"></a> 768     <em class="brace">}</em>
<a id="L769" name="L769"></a> 769 
<a id="L770" name="L770"></a> 770     <em class="comment">// GETTERS AND SETTERS</em>
<a id="L771" name="L771"></a> 771     <em class="comment">//--------------------</em>
<a id="L772" name="L772"></a> 772 
<div class="comment">
      Gets the number of timer notifications registered into the list of notifications.
      @return The number of timer notifications.</div>
<a id="L778" name="L778"></a> 778     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> getNbNotifications() <em class="brace">{</em>
<a id="L779" name="L779"></a> 779         <strong class="reserved">return</strong> timerTable.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L780" name="L780"></a> 780     <em class="brace">}</em>
<a id="L781" name="L781"></a> 781 
<div class="comment">
      Gets all timer notification identifiers registered into the list of notifications.
      @return A vector of <code>Integer</code> objects containing all the timer notification identifiers.
      <br>The vector is empty if there is no timer notification registered for this timer MBean.</div>
<a id="L788" name="L788"></a> 788     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; getAllNotificationIDs() <em class="brace">{</em>
<a id="L789" name="L789"></a> 789         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt;(timerTable.<a href="../D/26719.html" title="Multiple defined in 33 places.">keySet</a>());
<a id="L790" name="L790"></a> 790     <em class="brace">}</em>
<a id="L791" name="L791"></a> 791 
<div class="comment">
      Gets all the identifiers of timer notifications corresponding to the specified type.
      @param type The timer notification type.
      @return A vector of <code>Integer</code> objects containing all the identifiers of
      timer notifications with the specified <code>type</code>.
      <br>The vector is empty if there is no timer notifications registered for this timer MBean
      with the specified <code>type</code>.</div>
<a id="L802" name="L802"></a> 802     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../S/3514.html#L717" title="Referred from 717 in src/javax/management/timer/Timer.java.">getNotificationIDs</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L803" name="L803"></a> 803 
<a id="L804" name="L804"></a> 804         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s;
<a id="L805" name="L805"></a> 805 
<a id="L806" name="L806"></a> 806         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; v = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt;();
<a id="L807" name="L807"></a> 807 
<a id="L808" name="L808"></a> 808         <strong class="reserved">for</strong> (<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>.<a href="../D/2925.html" title="Multiple defined in 20 places.">Entry</a>&lt;<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>,<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]&gt; entry : timerTable.<a href="../D/15653.html" title="Multiple defined in 34 places.">entrySet</a>()) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = entry.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>();
<a id="L810" name="L810"></a> 810             s = ((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>();
<a id="L811" name="L811"></a> 811             <strong class="reserved">if</strong> ((<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <strong class="reserved">null</strong>) ? s == <strong class="reserved">null</strong> : <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(s))
<a id="L812" name="L812"></a> 812                 v.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>());
<a id="L813" name="L813"></a> 813         <em class="brace">}</em>
<a id="L814" name="L814"></a> 814         <strong class="reserved">return</strong> v;
<a id="L815" name="L815"></a> 815     <em class="brace">}</em>
<a id="L816" name="L816"></a> 816     <em class="comment">// 5089997: return is Vector&lt;Integer&gt; not Vector&lt;TimerNotification&gt;</em>
<a id="L817" name="L817"></a> 817 
<div class="comment">
      Gets the timer notification type corresponding to the specified identifier.
      @param id The timer notification identifier.
      @return The timer notification type or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L826" name="L826"></a> 826     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> getNotificationType(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L827" name="L827"></a> 827 
<a id="L828" name="L828"></a> 828         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L829" name="L829"></a> 829         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L830" name="L830"></a> 830             <strong class="reserved">return</strong> ( ((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>() );
<a id="L831" name="L831"></a> 831         <em class="brace">}</em>
<a id="L832" name="L832"></a> 832         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L833" name="L833"></a> 833     <em class="brace">}</em>
<a id="L834" name="L834"></a> 834 
<div class="comment">
      Gets the timer notification detailed message corresponding to the specified identifier.
      @param id The timer notification identifier.
      @return The timer notification detailed message or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L843" name="L843"></a> 843     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> getNotificationMessage(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L844" name="L844"></a> 844 
<a id="L845" name="L845"></a> 845         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L846" name="L846"></a> 846         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L847" name="L847"></a> 847             <strong class="reserved">return</strong> ( ((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>() );
<a id="L848" name="L848"></a> 848         <em class="brace">}</em>
<a id="L849" name="L849"></a> 849         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L850" name="L850"></a> 850     <em class="brace">}</em>
<a id="L851" name="L851"></a> 851 
<div class="comment">
      Gets the timer notification user data object corresponding to the specified identifier.
      @param id The timer notification identifier.
      @return The timer notification user data object or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L860" name="L860"></a> 860     <em class="comment">// NPCTE fix for bugId 4464388, esc 0, MR, 03 sept 2001, to be added after modification of jmx spec</em>
<a id="L861" name="L861"></a> 861     <em class="comment">//public Serializable getNotificationUserData(Integer id) {</em>
<a id="L862" name="L862"></a> 862     <em class="comment">// end of NPCTE fix for bugId 4464388</em>
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> getNotificationUserData(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L865" name="L865"></a> 865         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L866" name="L866"></a> 866         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L867" name="L867"></a> 867             <strong class="reserved">return</strong> ( ((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX]).<a href="../D/23486.html" title="Multiple defined in 18 places.">getUserData</a>() );
<a id="L868" name="L868"></a> 868         <em class="brace">}</em>
<a id="L869" name="L869"></a> 869         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L870" name="L870"></a> 870     <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<div class="comment">
      Gets a copy of the date associated to a timer notification.
      @param id The timer notification identifier.
      @return A copy of the date or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L880" name="L880"></a> 880     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../R/15956.html" title="Multiple referred from 8 places.">getDate</a>(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L881" name="L881"></a> 881 
<a id="L882" name="L882"></a> 882         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L883" name="L883"></a> 883         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L884" name="L884"></a> 884             <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = (<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>)obj[TIMER_DATE_INDEX];
<a id="L885" name="L885"></a> 885             <strong class="reserved">return</strong> (<strong class="reserved">new</strong> <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>()));
<a id="L886" name="L886"></a> 886         <em class="brace">}</em>
<a id="L887" name="L887"></a> 887         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L888" name="L888"></a> 888     <em class="brace">}</em>
<a id="L889" name="L889"></a> 889 
<div class="comment">
      Gets a copy of the period (in milliseconds) associated to a timer notification.
      @param id The timer notification identifier.
      @return A copy of the period or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L898" name="L898"></a> 898     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> getPeriod(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L901" name="L901"></a> 901         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L902" name="L902"></a> 902             <strong class="reserved">return</strong> (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)obj[TIMER_PERIOD_INDEX];
<a id="L903" name="L903"></a> 903         <em class="brace">}</em>
<a id="L904" name="L904"></a> 904         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L905" name="L905"></a> 905     <em class="brace">}</em>
<a id="L906" name="L906"></a> 906 
<div class="comment">
      Gets a copy of the remaining number of occurrences associated to a timer notification.
      @param id The timer notification identifier.
      @return A copy of the remaining number of occurrences or null if the identifier is not mapped to any
      timer notification registered for this timer MBean.</div>
<a id="L915" name="L915"></a> 915     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> getNbOccurences(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L916" name="L916"></a> 916 
<a id="L917" name="L917"></a> 917         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L918" name="L918"></a> 918         <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L919" name="L919"></a> 919             <strong class="reserved">return</strong> (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)obj[TIMER_NB_OCCUR_INDEX];
<a id="L920" name="L920"></a> 920         <em class="brace">}</em>
<a id="L921" name="L921"></a> 921         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L922" name="L922"></a> 922     <em class="brace">}</em>
<a id="L923" name="L923"></a> 923 
<div class="comment">
      Gets a copy of the flag indicating whether a periodic notification is
      executed at <i>fixed-delay</i> or at <i>fixed-rate</i>.
      @param id The timer notification identifier.
      @return A copy of the flag indicating whether a periodic notification is
              executed at <i>fixed-delay</i> or at <i>fixed-rate</i>.</div>
<a id="L933" name="L933"></a> 933     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> getFixedRate(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L934" name="L934"></a> 934 
<a id="L935" name="L935"></a> 935       <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>);
<a id="L936" name="L936"></a> 936       <strong class="reserved">if</strong> (obj != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L937" name="L937"></a> 937         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> fixedRate = (<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)obj[FIXED_RATE_INDEX];
<a id="L938" name="L938"></a> 938         <strong class="reserved">return</strong> (<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(fixedRate.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>()));
<a id="L939" name="L939"></a> 939       <em class="brace">}</em>
<a id="L940" name="L940"></a> 940       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L941" name="L941"></a> 941     <em class="brace">}</em>
<a id="L942" name="L942"></a> 942 
<div class="comment">
      Gets the flag indicating whether or not the timer sends past notifications.
      <br>The default value of the past notifications sending on/off flag is <code>false</code>.
      @return The past notifications sending on/off flag value.
      @see #setSendPastNotifications</div>
<a id="L951" name="L951"></a> 951     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getSendPastNotifications() <em class="brace">{</em>
<a id="L952" name="L952"></a> 952         <strong class="reserved">return</strong> <a href="../S/3514.html#L1000" title="Defined at 1000 in src/javax/management/timer/Timer.java.">sendPastNotifications</a>;
<a id="L953" name="L953"></a> 953     <em class="brace">}</em>
<a id="L954" name="L954"></a> 954 
<div class="comment">
      Sets the flag indicating whether the timer sends past notifications or not.
      <br>The default value of the past notifications sending on/off flag is <code>false</code>.
      @param value The past notifications sending on/off flag value.
      @see #getSendPastNotifications</div>
<a id="L963" name="L963"></a> 963     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setSendPastNotifications(<strong class="reserved">boolean</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L964" name="L964"></a> 964         <a href="../S/3514.html#L1000" title="Defined at 1000 in src/javax/management/timer/Timer.java.">sendPastNotifications</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L965" name="L965"></a> 965     <em class="brace">}</em>
<a id="L966" name="L966"></a> 966 
<div class="comment">
      Tests whether the timer MBean is active.
      A timer MBean is marked active when the <a href="#L274" title="Defined at 274.">start</a> method is called.
      It becomes inactive when the <a href="#L337" title="Defined at 337.">stop</a> method is called.
      <br>The default value of the active on/off flag is <code>false</code>.
      @return <code>true</code> if the timer MBean is active, <code>false</code> otherwise.</div>
<a id="L975" name="L975"></a> 975     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21137.html" title="Multiple referred from 67 places.">isActive</a>() <em class="brace">{</em>
<a id="L976" name="L976"></a> 976         <strong class="reserved">return</strong> <a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a>;
<a id="L977" name="L977"></a> 977     <em class="brace">}</em>
<a id="L978" name="L978"></a> 978 
<div class="comment">
      Tests whether the list of timer notifications is empty.
      @return <code>true</code> if the list of timer notifications is empty, <code>false</code> otherwise.</div>
<a id="L984" name="L984"></a> 984     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> <a href="../R/21404.html" title="Multiple referred from 435 places.">isEmpty</a>() <em class="brace">{</em>
<a id="L985" name="L985"></a> 985         <strong class="reserved">return</strong> (timerTable.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>());
<a id="L986" name="L986"></a> 986     <em class="brace">}</em>
<a id="L987" name="L987"></a> 987 
<div class="comment">
      ------------------------------------------
       PRIVATE METHODS
      ------------------------------------------</div>
<a id="L993" name="L993"></a> 993 
<div class="comment">
      Sends or not past notifications depending on the specified flag.
      @param currentDate The current date.
      @param currentFlag The flag indicating if past notifications must be sent or not.</div>
<a id="L1000" name="L1000"></a>1000     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/26776.html" title="Multiple referred from 4 places.">sendPastNotifications</a>(<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> currentDate, <strong class="reserved">boolean</strong> currentFlag) <em class="brace">{</em>
<a id="L1001" name="L1001"></a>1001 
<a id="L1002" name="L1002"></a>1002         <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> notif;
<a id="L1003" name="L1003"></a>1003         <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> notifID;
<a id="L1004" name="L1004"></a>1004         <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>;
<a id="L1005" name="L1005"></a>1005 
<a id="L1006" name="L1006"></a>1006         <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]&gt; <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a> =
<a id="L1007" name="L1007"></a>1007             <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]&gt;(timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>());
<a id="L1008" name="L1008"></a>1008 
<a id="L1009" name="L1009"></a>1009         <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj : <a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>) <em class="brace">{</em>
<a id="L1010" name="L1010"></a>1010 
<a id="L1011" name="L1011"></a>1011             <em class="comment">// Retrieve the timer notification and the date notification.</em>
<a id="L1012" name="L1012"></a>1012             <em class="comment">//</em>
<a id="L1013" name="L1013"></a>1013             notif = (<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX];
<a id="L1014" name="L1014"></a>1014             notifID = notif.<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>();
<a id="L1015" name="L1015"></a>1015             <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = (<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>)obj[TIMER_DATE_INDEX];
<a id="L1016" name="L1016"></a>1016 
<a id="L1017" name="L1017"></a>1017             <em class="comment">// Update the timer notification while:</em>
<a id="L1018" name="L1018"></a>1018             <em class="comment">//  - the timer notification date is earlier than the current date</em>
<a id="L1019" name="L1019"></a>1019             <em class="comment">//  - the timer notification has not been removed from the timer table.</em>
<a id="L1020" name="L1020"></a>1020             <em class="comment">//</em>
<a id="L1021" name="L1021"></a>1021             <strong class="reserved">while</strong> ( (currentDate.<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)) &amp;&amp; (timerTable.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(notifID)) ) <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022 
<a id="L1023" name="L1023"></a>1023                 <strong class="reserved">if</strong> (currentFlag == <strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024                     <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L1025" name="L1025"></a>1025                         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> strb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>()
<a id="L1026" name="L1026"></a>1026                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("sending past timer notification:")
<a id="L1027" name="L1027"></a>1027                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification source = ")
<a id="L1028" name="L1028"></a>1028                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>())
<a id="L1029" name="L1029"></a>1029                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification type = ")
<a id="L1030" name="L1030"></a>1030                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L1031" name="L1031"></a>1031                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification ID = ")
<a id="L1032" name="L1032"></a>1032                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>())
<a id="L1033" name="L1033"></a>1033                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification date = ")
<a id="L1034" name="L1034"></a>1034                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)
<a id="L1035" name="L1035"></a>1035                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification period = ")
<a id="L1036" name="L1036"></a>1036                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[TIMER_PERIOD_INDEX])
<a id="L1037" name="L1037"></a>1037                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification nb of occurrences = ")
<a id="L1038" name="L1038"></a>1038                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[TIMER_NB_OCCUR_INDEX])
<a id="L1039" name="L1039"></a>1039                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification executes at fixed rate = ")
<a id="L1040" name="L1040"></a>1040                         .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(obj[FIXED_RATE_INDEX]);
<a id="L1041" name="L1041"></a>1041                         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1042" name="L1042"></a>1042                                 "sendPastNotifications", strb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1043" name="L1043"></a>1043                     <em class="brace">}</em>
<a id="L1044" name="L1044"></a>1044                     <a href="../D/31741.html" title="Multiple defined in 14 places.">sendNotification</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, notif);
<a id="L1045" name="L1045"></a>1045 
<a id="L1046" name="L1046"></a>1046                     TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1047" name="L1047"></a>1047                             "sendPastNotifications", "past timer notification sent");
<a id="L1048" name="L1048"></a>1048                 <em class="brace">}</em>
<a id="L1049" name="L1049"></a>1049 
<a id="L1050" name="L1050"></a>1050                 <em class="comment">// Update the date and the number of occurrences of the timer notification.</em>
<a id="L1051" name="L1051"></a>1051                 <em class="comment">//</em>
<a id="L1052" name="L1052"></a>1052                 <a href="../S/3514.html#L1070" title="Defined at 1070 in src/javax/management/timer/Timer.java.">updateTimerTable</a>(notif.<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>());
<a id="L1053" name="L1053"></a>1053             <em class="brace">}</em>
<a id="L1054" name="L1054"></a>1054         <em class="brace">}</em>
<a id="L1055" name="L1055"></a>1055     <em class="brace">}</em>
<a id="L1056" name="L1056"></a>1056 
<div class="comment">
      If the timer notification is not periodic, it is removed from the list of notifications.
      <p>
      If the timer period of the timer notification has a non null periodicity,
      the date of the timer notification is updated by adding the periodicity.
      The associated TimerAlarmClock is updated by setting its timeout to the period value.
      </p><p>
      If the timer period has a defined number of occurrences, the timer
      notification is updated if the number of occurrences has not yet been reached.
      Otherwise it is removed from the list of notifications.
      @param notifID The timer notification identifier to update.</p></div>
<a id="L1070" name="L1070"></a>1070     <strong class="reserved">private</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/29976.html" title="Multiple referred from 2 places.">updateTimerTable</a>(<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> notifID) <em class="brace">{</em>
<a id="L1071" name="L1071"></a>1071 
<a id="L1072" name="L1072"></a>1072         <em class="comment">// Retrieve the timer notification and the TimerAlarmClock.</em>
<a id="L1073" name="L1073"></a>1073         <em class="comment">//</em>
<a id="L1074" name="L1074"></a>1074         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj = timerTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(notifID);
<a id="L1075" name="L1075"></a>1075         <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> = (<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>)obj[TIMER_DATE_INDEX];
<a id="L1076" name="L1076"></a>1076         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a> = (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)obj[TIMER_PERIOD_INDEX];
<a id="L1077" name="L1077"></a>1077         <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a> nbOccurences = (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)obj[TIMER_NB_OCCUR_INDEX];
<a id="L1078" name="L1078"></a>1078         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> fixedRate = (<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)obj[FIXED_RATE_INDEX];
<a id="L1079" name="L1079"></a>1079         <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock = (<a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>)obj[ALARM_CLOCK_INDEX];
<a id="L1080" name="L1080"></a>1080 
<a id="L1081" name="L1081"></a>1081         <strong class="reserved">if</strong> (<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>() != 0) <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082 
<a id="L1083" name="L1083"></a>1083             <em class="comment">// Update the date and the number of occurrences of the timer notification</em>
<a id="L1084" name="L1084"></a>1084             <em class="comment">// and the TimerAlarmClock time out.</em>
<a id="L1085" name="L1085"></a>1085             <em class="comment">// NOTES :</em>
<a id="L1086" name="L1086"></a>1086             <em class="comment">//   nbOccurences = 0 notifies an infinite periodicity.</em>
<a id="L1087" name="L1087"></a>1087             <em class="comment">//   nbOccurences = 1 notifies a finite periodicity that has reached its end.</em>
<a id="L1088" name="L1088"></a>1088             <em class="comment">//   nbOccurences &gt; 1 notifies a finite periodicity that has not yet reached its end.</em>
<a id="L1089" name="L1089"></a>1089             <em class="comment">//</em>
<a id="L1090" name="L1090"></a>1090             <strong class="reserved">if</strong> ((nbOccurences.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>() == 0) || (nbOccurences.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>() &gt; 1)) <em class="brace">{</em>
<a id="L1091" name="L1091"></a>1091 
<a id="L1092" name="L1092"></a>1092                 <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/34137.html" title="Multiple defined in 25 places.">setTime</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>() + <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>());
<a id="L1093" name="L1093"></a>1093                 obj[TIMER_NB_OCCUR_INDEX] = <a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0L, (nbOccurences.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>() - 1)));
<a id="L1094" name="L1094"></a>1094                 nbOccurences = (<a href="../S/1720.html#L54" title="Defined at 54 in src/java/lang/Long.java.">Long</a>)obj[TIMER_NB_OCCUR_INDEX];
<a id="L1095" name="L1095"></a>1095 
<a id="L1096" name="L1096"></a>1096                 <strong class="reserved">if</strong> (<a href="../D/25158.html" title="Multiple defined in 19 places.">isActive</a> == <strong class="reserved">true</strong>) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097                   <strong class="reserved">if</strong> (fixedRate.<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>())
<a id="L1098" name="L1098"></a>1098                   <em class="brace">{</em>
<a id="L1099" name="L1099"></a>1099                     alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L1100" name="L1100"></a>1100                     obj[ALARM_CLOCK_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)alarmClock;
<a id="L1101" name="L1101"></a>1101                     timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L1102" name="L1102"></a>1102                   <em class="brace">}</em>
<a id="L1103" name="L1103"></a>1103                   <strong class="reserved">else</strong>
<a id="L1104" name="L1104"></a>1104                   <em class="brace">{</em>
<a id="L1105" name="L1105"></a>1105                     alarmClock = <strong class="reserved">new</strong> <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>(<strong class="reserved">this</strong>, <a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>.<a href="../D/27086.html" title="Multiple defined in 24 places.">longValue</a>());
<a id="L1106" name="L1106"></a>1106                     obj[ALARM_CLOCK_INDEX] = (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)alarmClock;
<a id="L1107" name="L1107"></a>1107                     timer.<a href="../D/31619.html" title="Multiple defined in 10 places.">schedule</a>(alarmClock, alarmClock.timeout);
<a id="L1108" name="L1108"></a>1108                   <em class="brace">}</em>
<a id="L1109" name="L1109"></a>1109                 <em class="brace">}</em>
<a id="L1110" name="L1110"></a>1110                 <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111                     <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> notif = (<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX];
<a id="L1112" name="L1112"></a>1112                     <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> strb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>()
<a id="L1113" name="L1113"></a>1113                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("update timer notification with:")
<a id="L1114" name="L1114"></a>1114                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification source = ")
<a id="L1115" name="L1115"></a>1115                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>())
<a id="L1116" name="L1116"></a>1116                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification type = ")
<a id="L1117" name="L1117"></a>1117                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notif.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L1118" name="L1118"></a>1118                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification ID = ")
<a id="L1119" name="L1119"></a>1119                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notifID)
<a id="L1120" name="L1120"></a>1120                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification date = ")
<a id="L1121" name="L1121"></a>1121                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)
<a id="L1122" name="L1122"></a>1122                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification period = ")
<a id="L1123" name="L1123"></a>1123                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/29329.html" title="Multiple defined in 2 places.">period</a>)
<a id="L1124" name="L1124"></a>1124                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification nb of occurrences = ")
<a id="L1125" name="L1125"></a>1125                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(nbOccurences)
<a id="L1126" name="L1126"></a>1126                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification executes at fixed rate = ")
<a id="L1127" name="L1127"></a>1127                     .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(fixedRate);
<a id="L1128" name="L1128"></a>1128                     TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1129" name="L1129"></a>1129                             "updateTimerTable", strb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1130" name="L1130"></a>1130                 <em class="brace">}</em>
<a id="L1131" name="L1131"></a>1131             <em class="brace">}</em>
<a id="L1132" name="L1132"></a>1132             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1133" name="L1133"></a>1133                 <strong class="reserved">if</strong> (alarmClock != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1134" name="L1134"></a>1134 <em class="comment">//                     alarmClock.interrupt();</em>
<a id="L1135" name="L1135"></a>1135 <em class="comment">//                     try {</em>
<a id="L1136" name="L1136"></a>1136 <em class="comment">//                         // Wait until the thread die.</em>
<a id="L1137" name="L1137"></a>1137 <em class="comment">//                         //</em>
<a id="L1138" name="L1138"></a>1138 <em class="comment">//                         alarmClock.join();</em>
<a id="L1139" name="L1139"></a>1139 <em class="comment">//                     } catch (InterruptedException e) {</em>
<a id="L1140" name="L1140"></a>1140 <em class="comment">//                         // Ignore...</em>
<a id="L1141" name="L1141"></a>1141 <em class="comment">//                     }</em>
<a id="L1142" name="L1142"></a>1142                     alarmClock.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L1143" name="L1143"></a>1143                 <em class="brace">}</em>
<a id="L1144" name="L1144"></a>1144                 timerTable.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(notifID);
<a id="L1145" name="L1145"></a>1145             <em class="brace">}</em>
<a id="L1146" name="L1146"></a>1146         <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1148" name="L1148"></a>1148             <strong class="reserved">if</strong> (alarmClock != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1149" name="L1149"></a>1149 <em class="comment">//                 alarmClock.interrupt();</em>
<a id="L1150" name="L1150"></a>1150 <em class="comment">//                 try {</em>
<a id="L1151" name="L1151"></a>1151 <em class="comment">//                     // Wait until the thread die.</em>
<a id="L1152" name="L1152"></a>1152 <em class="comment">//                     //</em>
<a id="L1153" name="L1153"></a>1153 <em class="comment">//                     alarmClock.join();</em>
<a id="L1154" name="L1154"></a>1154 <em class="comment">//                 } catch (InterruptedException e) {</em>
<a id="L1155" name="L1155"></a>1155 <em class="comment">//                     // Ignore...</em>
<a id="L1156" name="L1156"></a>1156 <em class="comment">//                 }</em>
<a id="L1157" name="L1157"></a>1157 
<a id="L1158" name="L1158"></a>1158                    alarmClock.<a href="../D/12192.html" title="Multiple defined in 21 places.">cancel</a>();
<a id="L1159" name="L1159"></a>1159             <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160             timerTable.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(notifID);
<a id="L1161" name="L1161"></a>1161         <em class="brace">}</em>
<a id="L1162" name="L1162"></a>1162     <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163 
<div class="comment">
      ------------------------------------------
       PACKAGE METHODS
      ------------------------------------------</div>
<a id="L1169" name="L1169"></a>1169 
<div class="comment">
      This method is called by the timer each time
      the TimerAlarmClock has exceeded its timeout.
      @param notification The TimerAlarmClock notification.</div>
<a id="L1176" name="L1176"></a>1176     @<a href="../R/7764.html" title="Multiple referred from 264 places.">SuppressWarnings</a>("deprecation")
<a id="L1177" name="L1177"></a>1177     <strong class="reserved">void</strong> <a href="../S/3513.html#L74" title="Referred from 74 in src/javax/management/timer/TimerAlarmClock.java.">notifyAlarmClock</a>(<a href="../S/3515.html#L32" title="Defined at 32 in src/javax/management/timer/TimerAlarmClockNotification.java.">TimerAlarmClockNotification</a> notification) <em class="brace">{</em>
<a id="L1178" name="L1178"></a>1178 
<a id="L1179" name="L1179"></a>1179         <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> timerNotification = <strong class="reserved">null</strong>;
<a id="L1180" name="L1180"></a>1180         <a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> timerDate = <strong class="reserved">null</strong>;
<a id="L1181" name="L1181"></a>1181 
<a id="L1182" name="L1182"></a>1182         <em class="comment">// Retrieve the timer notification associated to the alarm-clock.</em>
<a id="L1183" name="L1183"></a>1183         <em class="comment">//</em>
<a id="L1184" name="L1184"></a>1184         <a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a> alarmClock = (<a href="../S/3513.html#L38" title="Defined at 38 in src/javax/management/timer/TimerAlarmClock.java.">TimerAlarmClock</a>)notification.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L1185" name="L1185"></a>1185 
<a id="L1186" name="L1186"></a>1186         <strong class="reserved">synchronized</strong>(<a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1187" name="L1187"></a>1187             <strong class="reserved">for</strong> (<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] obj : timerTable.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L1188" name="L1188"></a>1188                 <strong class="reserved">if</strong> (obj[ALARM_CLOCK_INDEX] == alarmClock) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189                     timerNotification = (<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)obj[TIMER_NOTIF_INDEX];
<a id="L1190" name="L1190"></a>1190                     timerDate = (<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>)obj[TIMER_DATE_INDEX];
<a id="L1191" name="L1191"></a>1191                     <strong class="reserved">break</strong>;
<a id="L1192" name="L1192"></a>1192                 <em class="brace">}</em>
<a id="L1193" name="L1193"></a>1193             <em class="brace">}</em>
<a id="L1194" name="L1194"></a>1194         <em class="brace">}</em>
<a id="L1195" name="L1195"></a>1195 
<a id="L1196" name="L1196"></a>1196         <em class="comment">// Notify the timer.</em>
<a id="L1197" name="L1197"></a>1197         <em class="comment">//</em>
<a id="L1198" name="L1198"></a>1198         <a href="../D/31741.html" title="Multiple defined in 14 places.">sendNotification</a>(timerDate, timerNotification);
<a id="L1199" name="L1199"></a>1199 
<a id="L1200" name="L1200"></a>1200         <em class="comment">// Update the notification and the TimerAlarmClock timeout.</em>
<a id="L1201" name="L1201"></a>1201         <em class="comment">//</em>
<a id="L1202" name="L1202"></a>1202         <a href="../S/3514.html#L1070" title="Defined at 1070 in src/javax/management/timer/Timer.java.">updateTimerTable</a>(timerNotification.<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>());
<a id="L1203" name="L1203"></a>1203     <em class="brace">}</em>
<a id="L1204" name="L1204"></a>1204 
<div class="comment">
      This method is used by the timer MBean to update and send a timer
      notification to all the listeners registered for this kind of notification.
      @param timeStamp The notification emission date.
      @param notification The timer notification to send.</div>
<a id="L1212" name="L1212"></a>1212     <strong class="reserved">void</strong> <a href="../R/26772.html" title="Multiple referred from 32 places.">sendNotification</a>(<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> timeStamp, <a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a> notification) <em class="brace">{</em>
<a id="L1213" name="L1213"></a>1213 
<a id="L1214" name="L1214"></a>1214         <strong class="reserved">if</strong> (TIMER_LOGGER.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L1215" name="L1215"></a>1215             <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> strb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>()
<a id="L1216" name="L1216"></a>1216             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("sending timer notification:")
<a id="L1217" name="L1217"></a>1217             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification source = ")
<a id="L1218" name="L1218"></a>1218             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notification.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>())
<a id="L1219" name="L1219"></a>1219             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification type = ")
<a id="L1220" name="L1220"></a>1220             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notification.<a href="../D/23311.html" title="Multiple defined in 232 places.">getType</a>())
<a id="L1221" name="L1221"></a>1221             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification ID = ")
<a id="L1222" name="L1222"></a>1222             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(notification.<a href="../S/3516.html#L93" title="Defined at 93 in src/javax/management/timer/TimerNotification.java.">getNotificationID</a>())
<a id="L1223" name="L1223"></a>1223             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\n\tNotification date = ")
<a id="L1224" name="L1224"></a>1224             .<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(timeStamp);
<a id="L1225" name="L1225"></a>1225             TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1226" name="L1226"></a>1226                     "sendNotification", strb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1227" name="L1227"></a>1227         <em class="brace">}</em>
<a id="L1228" name="L1228"></a>1228         <strong class="reserved">long</strong> curSeqNumber;
<a id="L1229" name="L1229"></a>1229         <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1230" name="L1230"></a>1230             sequenceNumber = sequenceNumber + 1;
<a id="L1231" name="L1231"></a>1231             curSeqNumber = sequenceNumber;
<a id="L1232" name="L1232"></a>1232         <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233         <strong class="reserved">synchronized</strong> (notification) <em class="brace">{</em>
<a id="L1234" name="L1234"></a>1234             notification.<a href="../D/34141.html" title="Multiple defined in 3 places.">setTimeStamp</a>(timeStamp.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>());
<a id="L1235" name="L1235"></a>1235             notification.<a href="../D/33884.html" title="Multiple defined in 2 places.">setSequenceNumber</a>(curSeqNumber);
<a id="L1236" name="L1236"></a>1236             <strong class="reserved">this</strong>.<a href="../D/31741.html" title="Multiple defined in 14 places.">sendNotification</a>((<a href="../S/3516.html#L37" title="Defined at 37 in src/javax/management/timer/TimerNotification.java.">TimerNotification</a>)notification.<a href="../S/3516.html#L107" title="Defined at 107 in src/javax/management/timer/TimerNotification.java.">cloneTimerNotification</a>());
<a id="L1237" name="L1237"></a>1237         <em class="brace">}</em>
<a id="L1238" name="L1238"></a>1238 
<a id="L1239" name="L1239"></a>1239         TIMER_LOGGER.<a href="../D/27062.html" title="Multiple defined in 6 places.">logp</a>(<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER, <a href="../D/8987.html" title="Multiple defined in 3 places.">Timer</a>.<strong class="reserved">class</strong>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(),
<a id="L1240" name="L1240"></a>1240                 "sendNotification", "timer notification sent");
<a id="L1241" name="L1241"></a>1241     <em class="brace">}</em>
<a id="L1242" name="L1242"></a>1242 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L200">[^]</a><a href="#L1212">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
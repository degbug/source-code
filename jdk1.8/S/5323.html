<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/util/URI.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L462">[^]</a><a href="#L2182">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L462" title="Defined at 462.">initialize</a></li>
<li><a href="#L491" title="Defined at 491.">initialize</a></li>
<li><a href="#L610" title="Defined at 610.">initialize</a></li>
<li><a href="#L719" title="Defined at 719.">absolutize</a></li>
<li><a href="#L847" title="Defined at 847.">initializeScheme</a></li>
<li><a href="#L881" title="Defined at 881.">initializeAuthority</a></li>
<li><a href="#L987" title="Defined at 987.">isValidServerBasedAuthority</a></li>
<li><a href="#L1035" title="Defined at 1035.">isValidRegistryBasedAuthority</a></li>
<li><a href="#L1070" title="Defined at 1070.">initializePath</a></li>
<li><a href="#L1209" title="Defined at 1209.">getScheme</a></li>
<li><a href="#L1219" title="Defined at 1219.">getSchemeSpecificPart</a></li>
<li><a href="#L1268" title="Defined at 1268.">getUserinfo</a></li>
<li><a href="#L1277" title="Defined at 1277.">getHost</a></li>
<li><a href="#L1286" title="Defined at 1286.">getPort</a></li>
<li><a href="#L1295" title="Defined at 1295.">getRegBasedAuthority</a></li>
<li><a href="#L1304" title="Defined at 1304.">getAuthority</a></li>
<li><a href="#L1346" title="Defined at 1346.">getPath</a></li>
<li><a href="#L1368" title="Defined at 1368.">getPath</a></li>
<li><a href="#L1379" title="Defined at 1379.">getQueryString</a></li>
<li><a href="#L1390" title="Defined at 1390.">getFragment</a></li>
<li><a href="#L1403" title="Defined at 1403.">setScheme</a></li>
<li><a href="#L1424" title="Defined at 1424.">setUserinfo</a></li>
<li><a href="#L1472" title="Defined at 1472.">setHost</a></li>
<li><a href="#L1500" title="Defined at 1500.">setPort</a></li>
<li><a href="#L1524" title="Defined at 1524.">setRegBasedAuthority</a></li>
<li><a href="#L1558" title="Defined at 1558.">setPath</a></li>
<li><a href="#L1582" title="Defined at 1582.">appendPath</a></li>
<li><a href="#L1630" title="Defined at 1630.">setQueryString</a></li>
<li><a href="#L1662" title="Defined at 1662.">setFragment</a></li>
<li><a href="#L1692" title="Defined at 1692.">equals</a></li>
<li><a href="#L1721" title="Defined at 1721.">hashCode</a></li>
<li><a href="#L1739" title="Defined at 1739.">toString</a></li>
<li><a href="#L1757" title="Defined at 1757.">isGenericURI</a></li>
<li><a href="#L1769" title="Defined at 1769.">isAbsoluteURI</a></li>
<li><a href="#L1781" title="Defined at 1781.">isConformantSchemeName</a></li>
<li><a href="#L1814" title="Defined at 1814.">isWellFormedAddress</a></li>
<li><a href="#L1898" title="Defined at 1898.">isWellFormedIPv4Address</a></li>
<li><a href="#L1965" title="Defined at 1965.">isWellFormedIPv6Reference</a></li>
<li><a href="#L2041" title="Defined at 2041.">scanHexSequence</a></li>
<li><a href="#L2086" title="Defined at 2086.">isDigit</a></li>
<li><a href="#L2096" title="Defined at 2096.">isHex</a></li>
<li><a href="#L2105" title="Defined at 2105.">isAlpha</a></li>
<li><a href="#L2114" title="Defined at 2114.">isAlphanum</a></li>
<li><a href="#L2124" title="Defined at 2124.">isReservedCharacter</a></li>
<li><a href="#L2133" title="Defined at 2133.">isUnreservedCharacter</a></li>
<li><a href="#L2143" title="Defined at 2143.">isURICharacter</a></li>
<li><a href="#L2152" title="Defined at 2152.">isSchemeCharacter</a></li>
<li><a href="#L2161" title="Defined at 2161.">isUserinfoCharacter</a></li>
<li><a href="#L2170" title="Defined at 2170.">isPathCharacter</a></li>
<li><a href="#L2182" title="Defined at 2182.">isURIString</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.util;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> java.io.IOException;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.Objects;
<a id="L26" name="L26"></a>  26 
<div class="comment">
********************************************************************
 A class to represent a Uniform Resource Identifier (URI). This class
 is designed to handle the parsing of URIs and provide access to
 the various components (scheme, host, port, userinfo, path, query
 string and fragment) that may constitute a URI.
 <p>
 Parsing of a URI specification is done according to the URI
 syntax described in
 <a href="http://www.ietf.org/rfc/rfc2396.txt?number=2396">RFC 2396</a>,
 and amended by
 <a href="http://www.ietf.org/rfc/rfc2732.txt?number=2732">RFC 2732</a>.
 </p><p>
 Every absolute URI consists of a scheme, followed by a colon (':'),
 followed by a scheme-specific part. For URIs that follow the
 "generic URI" syntax, the scheme-specific part begins with two
 slashes ("//") and may be followed by an authority segment (comprised
 of user information, host, and port), path segment, query segment
 and fragment. Note that RFC 2396 no longer specifies the use of the
 parameters segment and excludes the "user:password" syntax as part of
 the authority segment. If "user:password" appears in a URI, the entire
 user/password string is stored as userinfo.
 </p><p>
 For URIs that do not follow the "generic URI" syntax (e.g. mailto),
 the entire scheme-specific part is treated as the "path" portion
 of the URI.
 </p><p>
 Note that, unlike the java.net.URL class, this class does not provide
 any built-in network access functionality nor does it provide any
 scheme-specific functionality (for example, it does not know a
 default port for a specific scheme). Rather, it only knows the
 grammar and basic set of operations that can be applied to a URI.
*********************************************************************</p></div>
<a id="L61" name="L61"></a>  61  <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/8400.html" title="Multiple referred from 322 places.">URI</a> <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a> <em class="brace">{</em>
<a id="L62" name="L62"></a>  62 
<div class="comment">
*****************************************************************
   MalformedURIExceptions are thrown in the process of building a URI
   or setting fields on a URI when an operation would result in an
   invalid URI specification.
  *******************************************************************</div>
<a id="L69" name="L69"></a>  69   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/4904.html" title="Multiple referred from 212 places.">MalformedURIException</a> <strong class="reserved">extends</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L70" name="L70"></a>  70 
<div class="comment">
    /** Serialization version. */</div>
<a id="L72" name="L72"></a>  72    <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -6695054834342951930L;
<a id="L73" name="L73"></a>  73 
<div class="comment">
****************************************************************
     Constructs a <code>MalformedURIException</code> with no specified
     detail message.
    *****************************************************************</div>
<a id="L78" name="L78"></a>  78     <strong class="reserved">public</strong> MalformedURIException() <em class="brace">{</em>
<a id="L79" name="L79"></a>  79       <strong class="reserved">super</strong>();
<a id="L80" name="L80"></a>  80     <em class="brace">}</em>
<a id="L81" name="L81"></a>  81 
<div class="comment">
***************************************************************
     Constructs a <code>MalformedURIException</code> with the
     specified detail message.
     @param p_msg the detail message.
    *****************************************************************</div>
<a id="L88" name="L88"></a>  88     <strong class="reserved">public</strong> MalformedURIException(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_msg) <em class="brace">{</em>
<a id="L89" name="L89"></a>  89       <strong class="reserved">super</strong>(p_msg);
<a id="L90" name="L90"></a>  90     <em class="brace">}</em>
<a id="L91" name="L91"></a>  91   <em class="brace">}</em>
<a id="L92" name="L92"></a>  92 
<div class="comment">
   /** Serialization version. */</div>
<a id="L94" name="L94"></a>  94   <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 1601921774685357214L;
<a id="L95" name="L95"></a>  95 
<a id="L96" name="L96"></a>  96   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> [] fgLookupTable = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[128];
<a id="L97" name="L97"></a>  97 
<div class="comment">
    Character Classes</div>
<a id="L101" name="L101"></a> 101 
<div class="comment">
   /** reserved characters ;/?:@&amp;=+$,[] */</div>
<a id="L103" name="L103"></a> 103   <em class="comment">//RFC 2732 added '[' and ']' as reserved characters</em>
<a id="L104" name="L104"></a> 104   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> RESERVED_CHARACTERS = 0x01;
<a id="L105" name="L105"></a> 105 
<div class="comment">
 URI punctuation mark characters: -_.!~*'() - these, combined with
      alphanumerics, constitute the "unreserved" characters </div>
<a id="L108" name="L108"></a> 108   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MARK_CHARACTERS = 0x02;
<a id="L109" name="L109"></a> 109 
<div class="comment">
   /** scheme can be composed of alphanumerics and these characters: +-. */</div>
<a id="L111" name="L111"></a> 111   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SCHEME_CHARACTERS = 0x04;
<a id="L112" name="L112"></a> 112 
<div class="comment">
 userinfo can be composed of unreserved, escaped and these
      characters: ;:&amp;=+$, </div>
<a id="L115" name="L115"></a> 115   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> USERINFO_CHARACTERS = 0x08;
<a id="L116" name="L116"></a> 116 
<div class="comment">
   /** ASCII letter characters */</div>
<a id="L118" name="L118"></a> 118   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ASCII_ALPHA_CHARACTERS = 0x10;
<a id="L119" name="L119"></a> 119 
<div class="comment">
   /** ASCII digit characters */</div>
<a id="L121" name="L121"></a> 121   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ASCII_DIGIT_CHARACTERS = 0x20;
<a id="L122" name="L122"></a> 122 
<div class="comment">
   /** ASCII hex characters */</div>
<a id="L124" name="L124"></a> 124   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ASCII_HEX_CHARACTERS = 0x40;
<a id="L125" name="L125"></a> 125 
<div class="comment">
   /** Path characters */</div>
<a id="L127" name="L127"></a> 127   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> PATH_CHARACTERS = 0x80;
<a id="L128" name="L128"></a> 128 
<div class="comment">
   /** Mask for alpha-numeric characters */</div>
<a id="L130" name="L130"></a> 130   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_ALPHA_NUMERIC = ASCII_ALPHA_CHARACTERS | ASCII_DIGIT_CHARACTERS;
<a id="L131" name="L131"></a> 131 
<div class="comment">
   /** Mask for unreserved characters */</div>
<a id="L133" name="L133"></a> 133   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_UNRESERVED_MASK = MASK_ALPHA_NUMERIC | MARK_CHARACTERS;
<a id="L134" name="L134"></a> 134 
<div class="comment">
   /** Mask for URI allowable characters except for % */</div>
<a id="L136" name="L136"></a> 136   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_URI_CHARACTER = MASK_UNRESERVED_MASK | RESERVED_CHARACTERS;
<a id="L137" name="L137"></a> 137 
<div class="comment">
   /** Mask for scheme characters */</div>
<a id="L139" name="L139"></a> 139   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_SCHEME_CHARACTER = MASK_ALPHA_NUMERIC | SCHEME_CHARACTERS;
<a id="L140" name="L140"></a> 140 
<div class="comment">
   /** Mask for userinfo characters */</div>
<a id="L142" name="L142"></a> 142   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_USERINFO_CHARACTER = MASK_UNRESERVED_MASK | USERINFO_CHARACTERS;
<a id="L143" name="L143"></a> 143 
<div class="comment">
   /** Mask for path characters */</div>
<a id="L145" name="L145"></a> 145   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MASK_PATH_CHARACTER = MASK_UNRESERVED_MASK | PATH_CHARACTERS;
<a id="L146" name="L146"></a> 146 
<a id="L147" name="L147"></a> 147   <strong class="reserved">static</strong> <em class="brace">{</em>
<a id="L148" name="L148"></a> 148       <em class="comment">// Add ASCII Digits and ASCII Hex Numbers</em>
<a id="L149" name="L149"></a> 149       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = '0'; i &lt;= '9'; ++i) <em class="brace">{</em>
<a id="L150" name="L150"></a> 150           fgLookupTable[i] |= ASCII_DIGIT_CHARACTERS | ASCII_HEX_CHARACTERS;
<a id="L151" name="L151"></a> 151       <em class="brace">}</em>
<a id="L152" name="L152"></a> 152 
<a id="L153" name="L153"></a> 153       <em class="comment">// Add ASCII Letters and ASCII Hex Numbers</em>
<a id="L154" name="L154"></a> 154       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 'A'; i &lt;= 'F'; ++i) <em class="brace">{</em>
<a id="L155" name="L155"></a> 155           fgLookupTable[i] |= ASCII_ALPHA_CHARACTERS | ASCII_HEX_CHARACTERS;
<a id="L156" name="L156"></a> 156           fgLookupTable[i+0x00000020] |= ASCII_ALPHA_CHARACTERS | ASCII_HEX_CHARACTERS;
<a id="L157" name="L157"></a> 157       <em class="brace">}</em>
<a id="L158" name="L158"></a> 158 
<a id="L159" name="L159"></a> 159       <em class="comment">// Add ASCII Letters</em>
<a id="L160" name="L160"></a> 160       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 'G'; i &lt;= 'Z'; ++i) <em class="brace">{</em>
<a id="L161" name="L161"></a> 161           fgLookupTable[i] |= ASCII_ALPHA_CHARACTERS;
<a id="L162" name="L162"></a> 162           fgLookupTable[i+0x00000020] |= ASCII_ALPHA_CHARACTERS;
<a id="L163" name="L163"></a> 163       <em class="brace">}</em>
<a id="L164" name="L164"></a> 164 
<a id="L165" name="L165"></a> 165       <em class="comment">// Add Reserved Characters</em>
<a id="L166" name="L166"></a> 166       fgLookupTable[';'] |= RESERVED_CHARACTERS;
<a id="L167" name="L167"></a> 167       fgLookupTable['/'] |= RESERVED_CHARACTERS;
<a id="L168" name="L168"></a> 168       fgLookupTable['?'] |= RESERVED_CHARACTERS;
<a id="L169" name="L169"></a> 169       fgLookupTable[':'] |= RESERVED_CHARACTERS;
<a id="L170" name="L170"></a> 170       fgLookupTable['@'] |= RESERVED_CHARACTERS;
<a id="L171" name="L171"></a> 171       fgLookupTable['&amp;'] |= RESERVED_CHARACTERS;
<a id="L172" name="L172"></a> 172       fgLookupTable['='] |= RESERVED_CHARACTERS;
<a id="L173" name="L173"></a> 173       fgLookupTable['+'] |= RESERVED_CHARACTERS;
<a id="L174" name="L174"></a> 174       fgLookupTable['$'] |= RESERVED_CHARACTERS;
<a id="L175" name="L175"></a> 175       fgLookupTable[','] |= RESERVED_CHARACTERS;
<a id="L176" name="L176"></a> 176       fgLookupTable['['] |= RESERVED_CHARACTERS;
<a id="L177" name="L177"></a> 177       fgLookupTable[']'] |= RESERVED_CHARACTERS;
<a id="L178" name="L178"></a> 178 
<a id="L179" name="L179"></a> 179       <em class="comment">// Add Mark Characters</em>
<a id="L180" name="L180"></a> 180       fgLookupTable['-'] |= MARK_CHARACTERS;
<a id="L181" name="L181"></a> 181       fgLookupTable['_'] |= MARK_CHARACTERS;
<a id="L182" name="L182"></a> 182       fgLookupTable['.'] |= MARK_CHARACTERS;
<a id="L183" name="L183"></a> 183       fgLookupTable['!'] |= MARK_CHARACTERS;
<a id="L184" name="L184"></a> 184       fgLookupTable['~'] |= MARK_CHARACTERS;
<a id="L185" name="L185"></a> 185       fgLookupTable['*'] |= MARK_CHARACTERS;
<a id="L186" name="L186"></a> 186       fgLookupTable['\''] |= MARK_CHARACTERS;
<a id="L187" name="L187"></a> 187       fgLookupTable['('] |= MARK_CHARACTERS;
<a id="L188" name="L188"></a> 188       fgLookupTable[')'] |= MARK_CHARACTERS;
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190       <em class="comment">// Add Scheme Characters</em>
<a id="L191" name="L191"></a> 191       fgLookupTable['+'] |= SCHEME_CHARACTERS;
<a id="L192" name="L192"></a> 192       fgLookupTable['-'] |= SCHEME_CHARACTERS;
<a id="L193" name="L193"></a> 193       fgLookupTable['.'] |= SCHEME_CHARACTERS;
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195       <em class="comment">// Add Userinfo Characters</em>
<a id="L196" name="L196"></a> 196       fgLookupTable[';'] |= USERINFO_CHARACTERS;
<a id="L197" name="L197"></a> 197       fgLookupTable[':'] |= USERINFO_CHARACTERS;
<a id="L198" name="L198"></a> 198       fgLookupTable['&amp;'] |= USERINFO_CHARACTERS;
<a id="L199" name="L199"></a> 199       fgLookupTable['='] |= USERINFO_CHARACTERS;
<a id="L200" name="L200"></a> 200       fgLookupTable['+'] |= USERINFO_CHARACTERS;
<a id="L201" name="L201"></a> 201       fgLookupTable['$'] |= USERINFO_CHARACTERS;
<a id="L202" name="L202"></a> 202       fgLookupTable[','] |= USERINFO_CHARACTERS;
<a id="L203" name="L203"></a> 203 
<a id="L204" name="L204"></a> 204       <em class="comment">// Add Path Characters</em>
<a id="L205" name="L205"></a> 205       fgLookupTable[';'] |= PATH_CHARACTERS;
<a id="L206" name="L206"></a> 206       fgLookupTable['/'] |= PATH_CHARACTERS;
<a id="L207" name="L207"></a> 207       fgLookupTable[':'] |= PATH_CHARACTERS;
<a id="L208" name="L208"></a> 208       fgLookupTable['@'] |= PATH_CHARACTERS;
<a id="L209" name="L209"></a> 209       fgLookupTable['&amp;'] |= PATH_CHARACTERS;
<a id="L210" name="L210"></a> 210       fgLookupTable['='] |= PATH_CHARACTERS;
<a id="L211" name="L211"></a> 211       fgLookupTable['+'] |= PATH_CHARACTERS;
<a id="L212" name="L212"></a> 212       fgLookupTable['$'] |= PATH_CHARACTERS;
<a id="L213" name="L213"></a> 213       fgLookupTable[','] |= PATH_CHARACTERS;
<a id="L214" name="L214"></a> 214   <em class="brace">}</em>
<a id="L215" name="L215"></a> 215 
<div class="comment">
   /** Stores the scheme (usually the protocol) for this URI. */</div>
<a id="L217" name="L217"></a> 217   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_scheme = <strong class="reserved">null</strong>;
<a id="L218" name="L218"></a> 218 
<div class="comment">
   /** If specified, stores the userinfo for this URI; otherwise null */</div>
<a id="L220" name="L220"></a> 220   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_userinfo = <strong class="reserved">null</strong>;
<a id="L221" name="L221"></a> 221 
<div class="comment">
   /** If specified, stores the host for this URI; otherwise null */</div>
<a id="L223" name="L223"></a> 223   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_host = <strong class="reserved">null</strong>;
<a id="L224" name="L224"></a> 224 
<div class="comment">
   /** If specified, stores the port for this URI; otherwise -1 */</div>
<a id="L226" name="L226"></a> 226   <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_port = -1;
<a id="L227" name="L227"></a> 227 
<div class="comment">
   /** If specified, stores the registry based authority for this URI; otherwise -1 */</div>
<a id="L229" name="L229"></a> 229   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_regAuthority = <strong class="reserved">null</strong>;
<a id="L230" name="L230"></a> 230 
<div class="comment">
   /** If specified, stores the path for this URI; otherwise null */</div>
<a id="L232" name="L232"></a> 232   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_path = <strong class="reserved">null</strong>;
<a id="L233" name="L233"></a> 233 
<div class="comment">
 If specified, stores the query string for this URI; otherwise
      null.  </div>
<a id="L236" name="L236"></a> 236   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_queryString = <strong class="reserved">null</strong>;
<a id="L237" name="L237"></a> 237 
<div class="comment">
   /** If specified, stores the fragment for this URI; otherwise null */</div>
<a id="L239" name="L239"></a> 239   <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> m_fragment = <strong class="reserved">null</strong>;
<a id="L240" name="L240"></a> 240 
<a id="L241" name="L241"></a> 241   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> DEBUG = <strong class="reserved">false</strong>;
<a id="L242" name="L242"></a> 242 
<div class="comment">
   Construct a new and uninitialized URI.</div>
<a id="L246" name="L246"></a> 246   <strong class="reserved">public</strong> URI() <em class="brace">{</em>
<a id="L247" name="L247"></a> 247   <em class="brace">}</em>
<a id="L248" name="L248"></a> 248 
<div class="comment">
   Construct a new URI from another URI. All fields for this URI are
   set equal to the fields of the URI passed in.
   @param p_other the URI to copy (cannot be null)</div>
<a id="L255" name="L255"></a> 255   <strong class="reserved">public</strong> <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>(URI p_other) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256     <a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(p_other);
<a id="L257" name="L257"></a> 257   <em class="brace">}</em>
<a id="L258" name="L258"></a> 258 
<div class="comment">
   Construct a new URI from a URI specification string. If the
   specification follows the "generic URI" syntax, (two slashes
   following the first colon), the specification will be parsed
   accordingly - setting the scheme, userinfo, host,port, path, query
   string and fragment fields as necessary. If the specification does
   not follow the "generic URI" syntax, the specification is parsed
   into a scheme and scheme-specific part (stored as the path) only.
   @param p_uriSpec the URI specification string (cannot be null or
                    empty)
   @exception MalformedURIException if p_uriSpec violates any syntax
                                     rules</div>
<a id="L274" name="L274"></a> 274   <strong class="reserved">public</strong> URI(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L275" name="L275"></a> 275     <strong class="reserved">this</strong>((<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>)<strong class="reserved">null</strong>, p_uriSpec);
<a id="L276" name="L276"></a> 276   <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<div class="comment">
    Construct a new URI from a URI specification string. If the
    specification follows the "generic URI" syntax, (two slashes
    following the first colon), the specification will be parsed
    accordingly - setting the scheme, userinfo, host,port, path, query
    string and fragment fields as necessary. If the specification does
    not follow the "generic URI" syntax, the specification is parsed
    into a scheme and scheme-specific part (stored as the path) only.
    Construct a relative URI if boolean is assigned to "true"
    and p_uriSpec is not valid absolute URI, instead of throwing an exception.
    @param p_uriSpec the URI specification string (cannot be null or
                     empty)
    @param allowNonAbsoluteURI true to permit non-absolute URIs,
                               false otherwise.
    @exception MalformedURIException if p_uriSpec violates any syntax
                                      rules</div>
<a id="L297" name="L297"></a> 297   <strong class="reserved">public</strong> URI(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec, <strong class="reserved">boolean</strong> allowNonAbsoluteURI) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L298" name="L298"></a> 298       <strong class="reserved">this</strong>((<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>)<strong class="reserved">null</strong>, p_uriSpec, allowNonAbsoluteURI);
<a id="L299" name="L299"></a> 299   <em class="brace">}</em>
<a id="L300" name="L300"></a> 300 
<div class="comment">
   Construct a new URI from a base URI and a URI specification string.
   The URI specification string may be a relative URI.
   @param p_base the base URI (cannot be null if p_uriSpec is null or
                 empty)
   @param p_uriSpec the URI specification string (cannot be null or
                    empty if p_base is null)
   @exception MalformedURIException if p_uriSpec violates any syntax
                                    rules</div>
<a id="L313" name="L313"></a> 313   <strong class="reserved">public</strong> <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>(URI p_base, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L314" name="L314"></a> 314     <a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(p_base, p_uriSpec);
<a id="L315" name="L315"></a> 315   <em class="brace">}</em>
<a id="L316" name="L316"></a> 316 
<div class="comment">
    Construct a new URI from a base URI and a URI specification string.
    The URI specification string may be a relative URI.
    Construct a relative URI if boolean is assigned to "true"
    and p_uriSpec is not valid absolute URI and p_base is null
    instead of throwing an exception.
    @param p_base the base URI (cannot be null if p_uriSpec is null or
                  empty)
    @param p_uriSpec the URI specification string (cannot be null or
                     empty if p_base is null)
    @param allowNonAbsoluteURI true to permit non-absolute URIs,
                               false otherwise.
    @exception MalformedURIException if p_uriSpec violates any syntax
                                     rules</div>
<a id="L334" name="L334"></a> 334   <strong class="reserved">public</strong> <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>(URI p_base, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec, <strong class="reserved">boolean</strong> allowNonAbsoluteURI) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L335" name="L335"></a> 335       <a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(p_base, p_uriSpec, allowNonAbsoluteURI);
<a id="L336" name="L336"></a> 336   <em class="brace">}</em>
<a id="L337" name="L337"></a> 337 
<div class="comment">
   Construct a new URI that does not follow the generic URI syntax.
   Only the scheme and scheme-specific part (stored as the path) are
   initialized.
   @param p_scheme the URI scheme (cannot be null or empty)
   @param p_schemeSpecificPart the scheme-specific part (cannot be
                               null or empty)
   @exception MalformedURIException if p_scheme violates any
                                    syntax rules</div>
<a id="L350" name="L350"></a> 350   <strong class="reserved">public</strong> URI(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_scheme, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_schemeSpecificPart)
<a id="L351" name="L351"></a> 351              <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L352" name="L352"></a> 352     <strong class="reserved">if</strong> (p_scheme == <strong class="reserved">null</strong> || p_scheme.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L353" name="L353"></a> 353       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L354" name="L354"></a> 354             "Cannot construct URI with null/empty scheme!");
<a id="L355" name="L355"></a> 355     <em class="brace">}</em>
<a id="L356" name="L356"></a> 356     <strong class="reserved">if</strong> (p_schemeSpecificPart == <strong class="reserved">null</strong> ||
<a id="L357" name="L357"></a> 357         p_schemeSpecificPart.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L359" name="L359"></a> 359           "Cannot construct URI with null/empty scheme-specific part!");
<a id="L360" name="L360"></a> 360     <em class="brace">}</em>
<a id="L361" name="L361"></a> 361     <a href="../D/33816.html" title="Multiple defined in 4 places.">setScheme</a>(p_scheme);
<a id="L362" name="L362"></a> 362     <a href="../D/33525.html" title="Multiple defined in 4 places.">setPath</a>(p_schemeSpecificPart);
<a id="L363" name="L363"></a> 363   <em class="brace">}</em>
<a id="L364" name="L364"></a> 364 
<div class="comment">
   Construct a new URI that follows the generic URI syntax from its
   component parts. Each component is validated for syntax and some
   basic semantic checks are performed as well.  See the individual
   setter methods for specifics.
   @param p_scheme the URI scheme (cannot be null or empty)
   @param p_host the hostname, IPv4 address or IPv6 reference for the URI
   @param p_path the URI path - if the path contains '?' or '#',
                 then the query string and/or fragment will be
                 set from the path; however, if the query and
                 fragment are specified both in the path and as
                 separate parameters, an exception is thrown
   @param p_queryString the URI query string (cannot be specified
                        if path is null)
   @param p_fragment the URI fragment (cannot be specified if path
                     is null)
   @exception MalformedURIException if any of the parameters violates
                                    syntax rules or semantic rules</div>
<a id="L386" name="L386"></a> 386   <strong class="reserved">public</strong> URI(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_scheme, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_host, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_path,
<a id="L387" name="L387"></a> 387              <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_queryString, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_fragment)
<a id="L388" name="L388"></a> 388          <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L389" name="L389"></a> 389     <strong class="reserved">this</strong>(p_scheme, <strong class="reserved">null</strong>, p_host, -1, p_path, p_queryString, p_fragment);
<a id="L390" name="L390"></a> 390   <em class="brace">}</em>
<a id="L391" name="L391"></a> 391 
<div class="comment">
   Construct a new URI that follows the generic URI syntax from its
   component parts. Each component is validated for syntax and some
   basic semantic checks are performed as well.  See the individual
   setter methods for specifics.
   @param p_scheme the URI scheme (cannot be null or empty)
   @param p_userinfo the URI userinfo (cannot be specified if host
                     is null)
   @param p_host the hostname, IPv4 address or IPv6 reference for the URI
   @param p_port the URI port (may be -1 for "unspecified"; cannot
                 be specified if host is null)
   @param p_path the URI path - if the path contains '?' or '#',
                 then the query string and/or fragment will be
                 set from the path; however, if the query and
                 fragment are specified both in the path and as
                 separate parameters, an exception is thrown
   @param p_queryString the URI query string (cannot be specified
                        if path is null)
   @param p_fragment the URI fragment (cannot be specified if path
                     is null)
   @exception MalformedURIException if any of the parameters violates
                                    syntax rules or semantic rules</div>
<a id="L417" name="L417"></a> 417   <strong class="reserved">public</strong> URI(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_scheme, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_userinfo,
<a id="L418" name="L418"></a> 418              <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_host, <strong class="reserved">int</strong> p_port, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_path,
<a id="L419" name="L419"></a> 419              <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_queryString, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_fragment)
<a id="L420" name="L420"></a> 420          <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L421" name="L421"></a> 421     <strong class="reserved">if</strong> (p_scheme == <strong class="reserved">null</strong> || p_scheme.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Scheme is required!");
<a id="L423" name="L423"></a> 423     <em class="brace">}</em>
<a id="L424" name="L424"></a> 424 
<a id="L425" name="L425"></a> 425     <strong class="reserved">if</strong> (p_host == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426       <strong class="reserved">if</strong> (p_userinfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L427" name="L427"></a> 427         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L428" name="L428"></a> 428              "Userinfo may not be specified if host is not specified!");
<a id="L429" name="L429"></a> 429       <em class="brace">}</em>
<a id="L430" name="L430"></a> 430       <strong class="reserved">if</strong> (p_port != -1) <em class="brace">{</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L432" name="L432"></a> 432              "Port may not be specified if host is not specified!");
<a id="L433" name="L433"></a> 433       <em class="brace">}</em>
<a id="L434" name="L434"></a> 434     <em class="brace">}</em>
<a id="L435" name="L435"></a> 435 
<a id="L436" name="L436"></a> 436     <strong class="reserved">if</strong> (p_path != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L437" name="L437"></a> 437       <strong class="reserved">if</strong> (p_path.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('?') != -1 &amp;&amp; p_queryString != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L439" name="L439"></a> 439           "Query string cannot be specified in path and query string!");
<a id="L440" name="L440"></a> 440       <em class="brace">}</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442       <strong class="reserved">if</strong> (p_path.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('#') != -1 &amp;&amp; p_fragment != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L443" name="L443"></a> 443         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L444" name="L444"></a> 444           "Fragment cannot be specified in both the path and fragment!");
<a id="L445" name="L445"></a> 445       <em class="brace">}</em>
<a id="L446" name="L446"></a> 446     <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<a id="L448" name="L448"></a> 448     <a href="../D/33816.html" title="Multiple defined in 4 places.">setScheme</a>(p_scheme);
<a id="L449" name="L449"></a> 449     <a href="../D/32858.html" title="Multiple defined in 4 places.">setHost</a>(p_host);
<a id="L450" name="L450"></a> 450     <a href="../D/33565.html" title="Multiple defined in 9 places.">setPort</a>(p_port);
<a id="L451" name="L451"></a> 451     <a href="../D/34251.html" title="Multiple defined in 3 places.">setUserinfo</a>(p_userinfo);
<a id="L452" name="L452"></a> 452     <a href="../D/33525.html" title="Multiple defined in 4 places.">setPath</a>(p_path);
<a id="L453" name="L453"></a> 453     <a href="../D/33643.html" title="Multiple defined in 3 places.">setQueryString</a>(p_queryString);
<a id="L454" name="L454"></a> 454     <a href="../D/32778.html" title="Multiple defined in 4 places.">setFragment</a>(p_fragment);
<a id="L455" name="L455"></a> 455   <em class="brace">}</em>
<a id="L456" name="L456"></a> 456 
<div class="comment">
   Initialize all fields of this URI from another URI.
   @param p_other the URI to copy (cannot be null)</div>
<a id="L462" name="L462"></a> 462   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20681.html" title="Multiple referred from 99 places.">initialize</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> p_other) <em class="brace">{</em>
<a id="L463" name="L463"></a> 463     m_scheme = p_other.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>();
<a id="L464" name="L464"></a> 464     m_userinfo = p_other.<a href="../D/23503.html" title="Multiple defined in 3 places.">getUserinfo</a>();
<a id="L465" name="L465"></a> 465     m_host = p_other.<a href="../D/19490.html" title="Multiple defined in 17 places.">getHost</a>();
<a id="L466" name="L466"></a> 466     m_port = p_other.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L467" name="L467"></a> 467     m_regAuthority = p_other.<a href="../S/5323.html#L1295" title="Defined at 1295 in src/com/sun/org/apache/xerces/internal/util/URI.java.">getRegBasedAuthority</a>();
<a id="L468" name="L468"></a> 468     m_path = p_other.<a href="../D/21434.html" title="Multiple defined in 38 places.">getPath</a>();
<a id="L469" name="L469"></a> 469     m_queryString = p_other.<a href="../D/21803.html" title="Multiple defined in 4 places.">getQueryString</a>();
<a id="L470" name="L470"></a> 470     m_fragment = p_other.<a href="../D/19228.html" title="Multiple defined in 4 places.">getFragment</a>();
<a id="L471" name="L471"></a> 471   <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<div class="comment">
    Initializes this URI from a base URI and a URI specification string.
    See RFC 2396 Section 4 and Appendix B for specifications on parsing
    the URI and Section 5 for specifications on resolving relative URIs
    and relative paths.
    @param p_base the base URI (may be null if p_uriSpec is an absolute
                  URI)
    @param p_uriSpec the URI spec string which may be an absolute or
                     relative URI (can only be null/empty if p_base
                     is not null)
    @param allowNonAbsoluteURI true to permit non-absolute URIs,
                            in case of relative URI, false otherwise.
    @exception MalformedURIException if p_base is null and p_uriSpec
                                     is not an absolute URI or if
                                     p_uriSpec violates syntax rules</div>
<a id="L491" name="L491"></a> 491   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20681.html" title="Multiple referred from 99 places.">initialize</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> p_base, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec, <strong class="reserved">boolean</strong> allowNonAbsoluteURI)
<a id="L492" name="L492"></a> 492       <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L493" name="L493"></a> 493 
<a id="L494" name="L494"></a> 494       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uriSpec = p_uriSpec;
<a id="L495" name="L495"></a> 495       <strong class="reserved">int</strong> uriSpecLen = (uriSpec != <strong class="reserved">null</strong>) ? uriSpec.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() : 0;
<a id="L496" name="L496"></a> 496 
<a id="L497" name="L497"></a> 497       <strong class="reserved">if</strong> (p_base == <strong class="reserved">null</strong> &amp;&amp; uriSpecLen == 0) <em class="brace">{</em>
<a id="L498" name="L498"></a> 498           <strong class="reserved">if</strong> (allowNonAbsoluteURI) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499               m_path = "";
<a id="L500" name="L500"></a> 500               <strong class="reserved">return</strong>;
<a id="L501" name="L501"></a> 501           <em class="brace">}</em>
<a id="L502" name="L502"></a> 502           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Cannot initialize URI with empty parameters.");
<a id="L503" name="L503"></a> 503       <em class="brace">}</em>
<a id="L504" name="L504"></a> 504 
<a id="L505" name="L505"></a> 505       <em class="comment">// just make a copy of the base if spec is empty</em>
<a id="L506" name="L506"></a> 506       <strong class="reserved">if</strong> (uriSpecLen == 0) <em class="brace">{</em>
<a id="L507" name="L507"></a> 507           <a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(p_base);
<a id="L508" name="L508"></a> 508           <strong class="reserved">return</strong>;
<a id="L509" name="L509"></a> 509       <em class="brace">}</em>
<a id="L510" name="L510"></a> 510 
<a id="L511" name="L511"></a> 511       <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L512" name="L512"></a> 512 
<a id="L513" name="L513"></a> 513       <em class="comment">// Check for scheme, which must be before '/', '?' or '#'.</em>
<a id="L514" name="L514"></a> 514       <strong class="reserved">int</strong> colonIdx = uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L515" name="L515"></a> 515       <strong class="reserved">if</strong> (colonIdx != -1) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516           <strong class="reserved">final</strong> <strong class="reserved">int</strong> searchFrom = colonIdx - 1;
<a id="L517" name="L517"></a> 517           <em class="comment">// search backwards starting from character before ':'.</em>
<a id="L518" name="L518"></a> 518           <strong class="reserved">int</strong> slashIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('/', searchFrom);
<a id="L519" name="L519"></a> 519           <strong class="reserved">int</strong> queryIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('?', searchFrom);
<a id="L520" name="L520"></a> 520           <strong class="reserved">int</strong> fragmentIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('#', searchFrom);
<a id="L521" name="L521"></a> 521 
<a id="L522" name="L522"></a> 522           <strong class="reserved">if</strong> (colonIdx == 0 || slashIdx != -1 ||
<a id="L523" name="L523"></a> 523               queryIdx != -1 || fragmentIdx != -1) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524               <em class="comment">// A standalone base is a valid URI according to spec</em>
<a id="L525" name="L525"></a> 525               <strong class="reserved">if</strong> (colonIdx == 0 || (p_base == <strong class="reserved">null</strong> &amp;&amp; fragmentIdx != 0 &amp;&amp; !allowNonAbsoluteURI)) <em class="brace">{</em>
<a id="L526" name="L526"></a> 526                   <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("No scheme found in URI.");
<a id="L527" name="L527"></a> 527               <em class="brace">}</em>
<a id="L528" name="L528"></a> 528           <em class="brace">}</em>
<a id="L529" name="L529"></a> 529           <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L530" name="L530"></a> 530               <a href="../D/24683.html" title="Multiple defined in 3 places.">initializeScheme</a>(uriSpec);
<a id="L531" name="L531"></a> 531               <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = m_scheme.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()+1;
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533               <em class="comment">// Neither 'scheme:' or 'scheme:#fragment' are valid URIs.</em>
<a id="L534" name="L534"></a> 534               <strong class="reserved">if</strong> (colonIdx == uriSpecLen - 1 || uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(colonIdx+1) == '#') <em class="brace">{</em>
<a id="L535" name="L535"></a> 535                   <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Scheme specific part cannot be empty.");
<a id="L536" name="L536"></a> 536               <em class="brace">}</em>
<a id="L537" name="L537"></a> 537           <em class="brace">}</em>
<a id="L538" name="L538"></a> 538       <em class="brace">}</em>
<a id="L539" name="L539"></a> 539       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p_base == <strong class="reserved">null</strong> &amp;&amp; uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('#') != 0 &amp;&amp; !allowNonAbsoluteURI) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("No scheme found in URI.");
<a id="L541" name="L541"></a> 541       <em class="brace">}</em>
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543       <em class="comment">// Two slashes means we may have authority, but definitely means we're either</em>
<a id="L544" name="L544"></a> 544       <em class="comment">// matching net_path or abs_path. These two productions are ambiguous in that</em>
<a id="L545" name="L545"></a> 545       <em class="comment">// every net_path (except those containing an IPv6Reference) is an abs_path.</em>
<a id="L546" name="L546"></a> 546       <em class="comment">// RFC 2396 resolves this ambiguity by applying a greedy left most matching rule.</em>
<a id="L547" name="L547"></a> 547       <em class="comment">// Try matching net_path first, and if that fails we don't have authority so</em>
<a id="L548" name="L548"></a> 548       <em class="comment">// then attempt to match abs_path.</em>
<a id="L549" name="L549"></a> 549       <em class="comment">//</em>
<a id="L550" name="L550"></a> 550       <em class="comment">// net_path = "//" authority [ abs_path ]</em>
<a id="L551" name="L551"></a> 551       <em class="comment">// abs_path = "/"  path_segments</em>
<a id="L552" name="L552"></a> 552       <strong class="reserved">if</strong> (((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) &lt; uriSpecLen) &amp;&amp;
<a id="L553" name="L553"></a> 553           (uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == '/' &amp;&amp; uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) == '/')) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554           <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L555" name="L555"></a> 555           <strong class="reserved">int</strong> startPos = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L556" name="L556"></a> 556 
<a id="L557" name="L557"></a> 557           <em class="comment">// Authority will be everything up to path, query or fragment</em>
<a id="L558" name="L558"></a> 558           <strong class="reserved">char</strong> testChar = '\0';
<a id="L559" name="L559"></a> 559           <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; uriSpecLen) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560               testChar = uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L561" name="L561"></a> 561               <strong class="reserved">if</strong> (testChar == '/' || testChar == '?' || testChar == '#') <em class="brace">{</em>
<a id="L562" name="L562"></a> 562                   <strong class="reserved">break</strong>;
<a id="L563" name="L563"></a> 563               <em class="brace">}</em>
<a id="L564" name="L564"></a> 564               <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L565" name="L565"></a> 565           <em class="brace">}</em>
<a id="L566" name="L566"></a> 566 
<a id="L567" name="L567"></a> 567           <em class="comment">// Attempt to parse authority. If the section is an empty string</em>
<a id="L568" name="L568"></a> 568           <em class="comment">// this is a valid server based authority, so set the host to this</em>
<a id="L569" name="L569"></a> 569           <em class="comment">// value.</em>
<a id="L570" name="L570"></a> 570           <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; startPos) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571               <em class="comment">// If we didn't find authority we need to back up. Attempt to</em>
<a id="L572" name="L572"></a> 572               <em class="comment">// match against abs_path next.</em>
<a id="L573" name="L573"></a> 573               <strong class="reserved">if</strong> (!<a href="../D/24649.html" title="Multiple defined in 3 places.">initializeAuthority</a>(uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(startPos, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>))) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574                   <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = startPos - 2;
<a id="L575" name="L575"></a> 575               <em class="brace">}</em>
<a id="L576" name="L576"></a> 576           <em class="brace">}</em>
<a id="L577" name="L577"></a> 577           <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L578" name="L578"></a> 578               m_host = "";
<a id="L579" name="L579"></a> 579           <em class="brace">}</em>
<a id="L580" name="L580"></a> 580       <em class="brace">}</em>
<a id="L581" name="L581"></a> 581 
<a id="L582" name="L582"></a> 582       <a href="../D/24679.html" title="Multiple defined in 4 places.">initializePath</a>(uriSpec, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L583" name="L583"></a> 583 
<a id="L584" name="L584"></a> 584       <em class="comment">// Resolve relative URI to base URI - see RFC 2396 Section 5.2</em>
<a id="L585" name="L585"></a> 585       <em class="comment">// In some cases, it might make more sense to throw an exception</em>
<a id="L586" name="L586"></a> 586       <em class="comment">// (when scheme is specified is the string spec and the base URI</em>
<a id="L587" name="L587"></a> 587       <em class="comment">// is also specified, for example), but we're just following the</em>
<a id="L588" name="L588"></a> 588       <em class="comment">// RFC specifications</em>
<a id="L589" name="L589"></a> 589       <strong class="reserved">if</strong> (p_base != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590           <a href="../S/5323.html#L719" title="Defined at 719 in src/com/sun/org/apache/xerces/internal/util/URI.java.">absolutize</a>(p_base);
<a id="L591" name="L591"></a> 591       <em class="brace">}</em>
<a id="L592" name="L592"></a> 592   <em class="brace">}</em>
<a id="L593" name="L593"></a> 593 
<div class="comment">
   Initializes this URI from a base URI and a URI specification string.
   See RFC 2396 Section 4 and Appendix B for specifications on parsing
   the URI and Section 5 for specifications on resolving relative URIs
   and relative paths.
   @param p_base the base URI (may be null if p_uriSpec is an absolute
                 URI)
   @param p_uriSpec the URI spec string which may be an absolute or
                    relative URI (can only be null/empty if p_base
                    is not null)
   @exception MalformedURIException if p_base is null and p_uriSpec
                                    is not an absolute URI or if
                                    p_uriSpec violates syntax rules</div>
<a id="L610" name="L610"></a> 610   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20681.html" title="Multiple referred from 99 places.">initialize</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> p_base, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec)
<a id="L611" name="L611"></a> 611                          <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L612" name="L612"></a> 612 
<a id="L613" name="L613"></a> 613     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uriSpec = p_uriSpec;
<a id="L614" name="L614"></a> 614     <strong class="reserved">int</strong> uriSpecLen = (uriSpec != <strong class="reserved">null</strong>) ? uriSpec.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() : 0;
<a id="L615" name="L615"></a> 615 
<a id="L616" name="L616"></a> 616     <strong class="reserved">if</strong> (p_base == <strong class="reserved">null</strong> &amp;&amp; uriSpecLen == 0) <em class="brace">{</em>
<a id="L617" name="L617"></a> 617       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L618" name="L618"></a> 618                   "Cannot initialize URI with empty parameters.");
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<a id="L621" name="L621"></a> 621     <em class="comment">// just make a copy of the base if spec is empty</em>
<a id="L622" name="L622"></a> 622     <strong class="reserved">if</strong> (uriSpecLen == 0) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623       <a href="../D/24646.html" title="Multiple defined in 91 places.">initialize</a>(p_base);
<a id="L624" name="L624"></a> 624       <strong class="reserved">return</strong>;
<a id="L625" name="L625"></a> 625     <em class="brace">}</em>
<a id="L626" name="L626"></a> 626 
<a id="L627" name="L627"></a> 627     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L628" name="L628"></a> 628 
<a id="L629" name="L629"></a> 629     <em class="comment">// Check for scheme, which must be before '/', '?' or '#'.</em>
<a id="L630" name="L630"></a> 630     <strong class="reserved">int</strong> colonIdx = uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L631" name="L631"></a> 631     <strong class="reserved">if</strong> (colonIdx != -1) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">final</strong> <strong class="reserved">int</strong> searchFrom = colonIdx - 1;
<a id="L633" name="L633"></a> 633         <em class="comment">// search backwards starting from character before ':'.</em>
<a id="L634" name="L634"></a> 634         <strong class="reserved">int</strong> slashIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('/', searchFrom);
<a id="L635" name="L635"></a> 635         <strong class="reserved">int</strong> queryIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('?', searchFrom);
<a id="L636" name="L636"></a> 636         <strong class="reserved">int</strong> fragmentIdx = uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('#', searchFrom);
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638         <strong class="reserved">if</strong> (colonIdx == 0 || slashIdx != -1 ||
<a id="L639" name="L639"></a> 639             queryIdx != -1 || fragmentIdx != -1) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640             <em class="comment">// A standalone base is a valid URI according to spec</em>
<a id="L641" name="L641"></a> 641             <strong class="reserved">if</strong> (colonIdx == 0 || (p_base == <strong class="reserved">null</strong> &amp;&amp; fragmentIdx != 0)) <em class="brace">{</em>
<a id="L642" name="L642"></a> 642                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("No scheme found in URI.");
<a id="L643" name="L643"></a> 643             <em class="brace">}</em>
<a id="L644" name="L644"></a> 644         <em class="brace">}</em>
<a id="L645" name="L645"></a> 645         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L646" name="L646"></a> 646             <a href="../D/24683.html" title="Multiple defined in 3 places.">initializeScheme</a>(uriSpec);
<a id="L647" name="L647"></a> 647             <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = m_scheme.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()+1;
<a id="L648" name="L648"></a> 648 
<a id="L649" name="L649"></a> 649             <em class="comment">// Neither 'scheme:' or 'scheme:#fragment' are valid URIs.</em>
<a id="L650" name="L650"></a> 650             <strong class="reserved">if</strong> (colonIdx == uriSpecLen - 1 || uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(colonIdx+1) == '#') <em class="brace">{</em>
<a id="L651" name="L651"></a> 651                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Scheme specific part cannot be empty.");
<a id="L652" name="L652"></a> 652             <em class="brace">}</em>
<a id="L653" name="L653"></a> 653         <em class="brace">}</em>
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p_base == <strong class="reserved">null</strong> &amp;&amp; uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('#') != 0) <em class="brace">{</em>
<a id="L656" name="L656"></a> 656         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("No scheme found in URI.");
<a id="L657" name="L657"></a> 657     <em class="brace">}</em>
<a id="L658" name="L658"></a> 658 
<a id="L659" name="L659"></a> 659     <em class="comment">// Two slashes means we may have authority, but definitely means we're either</em>
<a id="L660" name="L660"></a> 660     <em class="comment">// matching net_path or abs_path. These two productions are ambiguous in that</em>
<a id="L661" name="L661"></a> 661     <em class="comment">// every net_path (except those containing an IPv6Reference) is an abs_path.</em>
<a id="L662" name="L662"></a> 662     <em class="comment">// RFC 2396 resolves this ambiguity by applying a greedy left most matching rule.</em>
<a id="L663" name="L663"></a> 663     <em class="comment">// Try matching net_path first, and if that fails we don't have authority so</em>
<a id="L664" name="L664"></a> 664     <em class="comment">// then attempt to match abs_path.</em>
<a id="L665" name="L665"></a> 665     <em class="comment">//</em>
<a id="L666" name="L666"></a> 666     <em class="comment">// net_path = "//" authority [ abs_path ]</em>
<a id="L667" name="L667"></a> 667     <em class="comment">// abs_path = "/"  path_segments</em>
<a id="L668" name="L668"></a> 668     <strong class="reserved">if</strong> (((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) &lt; uriSpecLen) &amp;&amp;
<a id="L669" name="L669"></a> 669         (uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == '/' &amp;&amp; uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) == '/')) <em class="brace">{</em>
<a id="L670" name="L670"></a> 670       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L671" name="L671"></a> 671       <strong class="reserved">int</strong> startPos = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L672" name="L672"></a> 672 
<a id="L673" name="L673"></a> 673       <em class="comment">// Authority will be everything up to path, query or fragment</em>
<a id="L674" name="L674"></a> 674       <strong class="reserved">char</strong> testChar = '\0';
<a id="L675" name="L675"></a> 675       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; uriSpecLen) <em class="brace">{</em>
<a id="L676" name="L676"></a> 676         testChar = uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L677" name="L677"></a> 677         <strong class="reserved">if</strong> (testChar == '/' || testChar == '?' || testChar == '#') <em class="brace">{</em>
<a id="L678" name="L678"></a> 678           <strong class="reserved">break</strong>;
<a id="L679" name="L679"></a> 679         <em class="brace">}</em>
<a id="L680" name="L680"></a> 680         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L681" name="L681"></a> 681       <em class="brace">}</em>
<a id="L682" name="L682"></a> 682 
<a id="L683" name="L683"></a> 683       <em class="comment">// Attempt to parse authority. If the section is an empty string</em>
<a id="L684" name="L684"></a> 684       <em class="comment">// this is a valid server based authority, so set the host to this</em>
<a id="L685" name="L685"></a> 685       <em class="comment">// value.</em>
<a id="L686" name="L686"></a> 686       <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; startPos) <em class="brace">{</em>
<a id="L687" name="L687"></a> 687         <em class="comment">// If we didn't find authority we need to back up. Attempt to</em>
<a id="L688" name="L688"></a> 688         <em class="comment">// match against abs_path next.</em>
<a id="L689" name="L689"></a> 689         <strong class="reserved">if</strong> (!<a href="../D/24649.html" title="Multiple defined in 3 places.">initializeAuthority</a>(uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(startPos, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>))) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690           <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = startPos - 2;
<a id="L691" name="L691"></a> 691         <em class="brace">}</em>
<a id="L692" name="L692"></a> 692       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; uriSpecLen) <em class="brace">{</em>
<a id="L693" name="L693"></a> 693         <em class="comment">//Same as java.net.URI:</em>
<a id="L694" name="L694"></a> 694         <em class="comment">// DEVIATION: Allow empty authority prior to non-empty</em>
<a id="L695" name="L695"></a> 695         <em class="comment">// path, query component or fragment identifier</em>
<a id="L696" name="L696"></a> 696         m_host = "";
<a id="L697" name="L697"></a> 697       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L698" name="L698"></a> 698         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Expected authority.");
<a id="L699" name="L699"></a> 699       <em class="brace">}</em>
<a id="L700" name="L700"></a> 700     <em class="brace">}</em>
<a id="L701" name="L701"></a> 701 
<a id="L702" name="L702"></a> 702     <a href="../D/24679.html" title="Multiple defined in 4 places.">initializePath</a>(uriSpec, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L703" name="L703"></a> 703 
<a id="L704" name="L704"></a> 704     <em class="comment">// Resolve relative URI to base URI - see RFC 2396 Section 5.2</em>
<a id="L705" name="L705"></a> 705     <em class="comment">// In some cases, it might make more sense to throw an exception</em>
<a id="L706" name="L706"></a> 706     <em class="comment">// (when scheme is specified is the string spec and the base URI</em>
<a id="L707" name="L707"></a> 707     <em class="comment">// is also specified, for example), but we're just following the</em>
<a id="L708" name="L708"></a> 708     <em class="comment">// RFC specifications</em>
<a id="L709" name="L709"></a> 709     <strong class="reserved">if</strong> (p_base != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L710" name="L710"></a> 710         <a href="../S/5323.html#L719" title="Defined at 719 in src/com/sun/org/apache/xerces/internal/util/URI.java.">absolutize</a>(p_base);
<a id="L711" name="L711"></a> 711     <em class="brace">}</em>
<a id="L712" name="L712"></a> 712   <em class="brace">}</em>
<a id="L713" name="L713"></a> 713 
<div class="comment">
    Absolutize URI with given base URI.
    @param p_base base URI for absolutization</div>
<a id="L719" name="L719"></a> 719   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9511.html" title="Multiple referred from 8 places.">absolutize</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> p_base) <em class="brace">{</em>
<a id="L720" name="L720"></a> 720 
<a id="L721" name="L721"></a> 721       <em class="comment">// check to see if this is the current doc - RFC 2396 5.2 #2</em>
<a id="L722" name="L722"></a> 722       <em class="comment">// note that this is slightly different from the RFC spec in that</em>
<a id="L723" name="L723"></a> 723       <em class="comment">// we don't include the check for query string being null</em>
<a id="L724" name="L724"></a> 724       <em class="comment">// - this handles cases where the urispec is just a query</em>
<a id="L725" name="L725"></a> 725       <em class="comment">// string or a fragment (e.g. "?y" or "#s") -</em>
<a id="L726" name="L726"></a> 726       <em class="comment">// see &lt;http://www.ics.uci.edu/~fielding/url/test1.html&gt; which</em>
<a id="L727" name="L727"></a> 727       <em class="comment">// identified this as a bug in the RFC</em>
<a id="L728" name="L728"></a> 728       <strong class="reserved">if</strong> (m_path.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 &amp;&amp; m_scheme == <strong class="reserved">null</strong> &amp;&amp;
<a id="L729" name="L729"></a> 729           m_host == <strong class="reserved">null</strong> &amp;&amp; m_regAuthority == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L730" name="L730"></a> 730           m_scheme = p_base.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>();
<a id="L731" name="L731"></a> 731           m_userinfo = p_base.<a href="../D/23503.html" title="Multiple defined in 3 places.">getUserinfo</a>();
<a id="L732" name="L732"></a> 732           m_host = p_base.<a href="../D/19490.html" title="Multiple defined in 17 places.">getHost</a>();
<a id="L733" name="L733"></a> 733           m_port = p_base.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L734" name="L734"></a> 734           m_regAuthority = p_base.<a href="../S/5323.html#L1295" title="Defined at 1295 in src/com/sun/org/apache/xerces/internal/util/URI.java.">getRegBasedAuthority</a>();
<a id="L735" name="L735"></a> 735           m_path = p_base.<a href="../D/21434.html" title="Multiple defined in 38 places.">getPath</a>();
<a id="L736" name="L736"></a> 736 
<a id="L737" name="L737"></a> 737           <strong class="reserved">if</strong> (m_queryString == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L738" name="L738"></a> 738               m_queryString = p_base.<a href="../D/21803.html" title="Multiple defined in 4 places.">getQueryString</a>();
<a id="L739" name="L739"></a> 739 
<a id="L740" name="L740"></a> 740               <strong class="reserved">if</strong> (m_fragment == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L741" name="L741"></a> 741                   m_fragment = p_base.<a href="../D/19228.html" title="Multiple defined in 4 places.">getFragment</a>();
<a id="L742" name="L742"></a> 742               <em class="brace">}</em>
<a id="L743" name="L743"></a> 743           <em class="brace">}</em>
<a id="L744" name="L744"></a> 744           <strong class="reserved">return</strong>;
<a id="L745" name="L745"></a> 745       <em class="brace">}</em>
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747       <em class="comment">// check for scheme - RFC 2396 5.2 #3</em>
<a id="L748" name="L748"></a> 748       <em class="comment">// if we found a scheme, it means absolute URI, so we're done</em>
<a id="L749" name="L749"></a> 749       <strong class="reserved">if</strong> (m_scheme == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L750" name="L750"></a> 750           m_scheme = p_base.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>();
<a id="L751" name="L751"></a> 751       <em class="brace">}</em>
<a id="L752" name="L752"></a> 752       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L753" name="L753"></a> 753           <strong class="reserved">return</strong>;
<a id="L754" name="L754"></a> 754       <em class="brace">}</em>
<a id="L755" name="L755"></a> 755 
<a id="L756" name="L756"></a> 756       <em class="comment">// check for authority - RFC 2396 5.2 #4</em>
<a id="L757" name="L757"></a> 757       <em class="comment">// if we found a host, then we've got a network path, so we're done</em>
<a id="L758" name="L758"></a> 758       <strong class="reserved">if</strong> (m_host == <strong class="reserved">null</strong> &amp;&amp; m_regAuthority == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L759" name="L759"></a> 759           m_userinfo = p_base.<a href="../D/23503.html" title="Multiple defined in 3 places.">getUserinfo</a>();
<a id="L760" name="L760"></a> 760           m_host = p_base.<a href="../D/19490.html" title="Multiple defined in 17 places.">getHost</a>();
<a id="L761" name="L761"></a> 761           m_port = p_base.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>();
<a id="L762" name="L762"></a> 762           m_regAuthority = p_base.<a href="../S/5323.html#L1295" title="Defined at 1295 in src/com/sun/org/apache/xerces/internal/util/URI.java.">getRegBasedAuthority</a>();
<a id="L763" name="L763"></a> 763       <em class="brace">}</em>
<a id="L764" name="L764"></a> 764       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L765" name="L765"></a> 765           <strong class="reserved">return</strong>;
<a id="L766" name="L766"></a> 766       <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768       <em class="comment">// check for absolute path - RFC 2396 5.2 #5</em>
<a id="L769" name="L769"></a> 769       <strong class="reserved">if</strong> (m_path.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0 &amp;&amp;
<a id="L770" name="L770"></a> 770               m_path.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/")) <em class="brace">{</em>
<a id="L771" name="L771"></a> 771           <strong class="reserved">return</strong>;
<a id="L772" name="L772"></a> 772       <em class="brace">}</em>
<a id="L773" name="L773"></a> 773 
<a id="L774" name="L774"></a> 774       <em class="comment">// if we get to this point, we need to resolve relative path</em>
<a id="L775" name="L775"></a> 775       <em class="comment">// RFC 2396 5.2 #6</em>
<a id="L776" name="L776"></a> 776       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> path = "";
<a id="L777" name="L777"></a> 777       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> basePath = p_base.<a href="../D/21434.html" title="Multiple defined in 38 places.">getPath</a>();
<a id="L778" name="L778"></a> 778 
<a id="L779" name="L779"></a> 779       <em class="comment">// 6a - get all but the last segment of the base URI path</em>
<a id="L780" name="L780"></a> 780       <strong class="reserved">if</strong> (basePath != <strong class="reserved">null</strong> &amp;&amp; basePath.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781           <strong class="reserved">int</strong> lastSlash = basePath.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('/');
<a id="L782" name="L782"></a> 782           <strong class="reserved">if</strong> (lastSlash != -1) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783               path = basePath.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, lastSlash+1);
<a id="L784" name="L784"></a> 784           <em class="brace">}</em>
<a id="L785" name="L785"></a> 785       <em class="brace">}</em>
<a id="L786" name="L786"></a> 786       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (m_path.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L787" name="L787"></a> 787           path = "/";
<a id="L788" name="L788"></a> 788       <em class="brace">}</em>
<a id="L789" name="L789"></a> 789 
<a id="L790" name="L790"></a> 790       <em class="comment">// 6b - append the relative URI path</em>
<a id="L791" name="L791"></a> 791       path = path.<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(m_path);
<a id="L792" name="L792"></a> 792 
<a id="L793" name="L793"></a> 793       <em class="comment">// 6c - remove all "./" where "." is a complete path segment</em>
<a id="L794" name="L794"></a> 794       <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = -1;
<a id="L795" name="L795"></a> 795       <strong class="reserved">while</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = path.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("/./")) != -1) <em class="brace">{</em>
<a id="L796" name="L796"></a> 796           path = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1).<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+3));
<a id="L797" name="L797"></a> 797       <em class="brace">}</em>
<a id="L798" name="L798"></a> 798 
<a id="L799" name="L799"></a> 799       <em class="comment">// 6d - remove "." if path ends with "." as a complete path segment</em>
<a id="L800" name="L800"></a> 800       <strong class="reserved">if</strong> (path.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("/.")) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801           path = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, path.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-1);
<a id="L802" name="L802"></a> 802       <em class="brace">}</em>
<a id="L803" name="L803"></a> 803 
<a id="L804" name="L804"></a> 804       <em class="comment">// 6e - remove all "&lt;segment&gt;/../" where "&lt;segment&gt;" is a complete</em>
<a id="L805" name="L805"></a> 805       <em class="comment">// path segment not equal to ".."</em>
<a id="L806" name="L806"></a> 806       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 1;
<a id="L807" name="L807"></a> 807       <strong class="reserved">int</strong> segIndex = -1;
<a id="L808" name="L808"></a> 808       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> tempString = <strong class="reserved">null</strong>;
<a id="L809" name="L809"></a> 809 
<a id="L810" name="L810"></a> 810       <strong class="reserved">while</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = path.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("/../", <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)) &gt; 0) <em class="brace">{</em>
<a id="L811" name="L811"></a> 811           tempString = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, path.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("/../"));
<a id="L812" name="L812"></a> 812           segIndex = tempString.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('/');
<a id="L813" name="L813"></a> 813           <strong class="reserved">if</strong> (segIndex != -1) <em class="brace">{</em>
<a id="L814" name="L814"></a> 814               <strong class="reserved">if</strong> (!tempString.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(segIndex).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("..")) <em class="brace">{</em>
<a id="L815" name="L815"></a> 815                   path = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, segIndex+1).<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+4));
<a id="L816" name="L816"></a> 816                   <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = segIndex;
<a id="L817" name="L817"></a> 817               <em class="brace">}</em>
<a id="L818" name="L818"></a> 818               <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L819" name="L819"></a> 819                   <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 4;
<a id="L820" name="L820"></a> 820               <em class="brace">}</em>
<a id="L821" name="L821"></a> 821           <em class="brace">}</em>
<a id="L822" name="L822"></a> 822           <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L823" name="L823"></a> 823               <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 4;
<a id="L824" name="L824"></a> 824           <em class="brace">}</em>
<a id="L825" name="L825"></a> 825       <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<a id="L827" name="L827"></a> 827       <em class="comment">// 6f - remove ending "&lt;segment&gt;/.." where "&lt;segment&gt;" is a</em>
<a id="L828" name="L828"></a> 828       <em class="comment">// complete path segment</em>
<a id="L829" name="L829"></a> 829       <strong class="reserved">if</strong> (path.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("/..")) <em class="brace">{</em>
<a id="L830" name="L830"></a> 830           tempString = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, path.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()-3);
<a id="L831" name="L831"></a> 831           segIndex = tempString.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('/');
<a id="L832" name="L832"></a> 832           <strong class="reserved">if</strong> (segIndex != -1) <em class="brace">{</em>
<a id="L833" name="L833"></a> 833               path = path.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, segIndex+1);
<a id="L834" name="L834"></a> 834           <em class="brace">}</em>
<a id="L835" name="L835"></a> 835       <em class="brace">}</em>
<a id="L836" name="L836"></a> 836       m_path = path;
<a id="L837" name="L837"></a> 837   <em class="brace">}</em>
<a id="L838" name="L838"></a> 838 
<div class="comment">
   Initialize the scheme for this URI from a URI string spec.
   @param p_uriSpec the URI specification (cannot be null)
   @exception MalformedURIException if URI does not have a conformant
                                    scheme</div>
<a id="L847" name="L847"></a> 847   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20718.html" title="Multiple referred from 4 places.">initializeScheme</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec)
<a id="L848" name="L848"></a> 848                  <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L849" name="L849"></a> 849     <strong class="reserved">int</strong> uriSpecLen = p_uriSpec.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L850" name="L850"></a> 850     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L851" name="L851"></a> 851     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> scheme = <strong class="reserved">null</strong>;
<a id="L852" name="L852"></a> 852     <strong class="reserved">char</strong> testChar = '\0';
<a id="L853" name="L853"></a> 853 
<a id="L854" name="L854"></a> 854     <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; uriSpecLen) <em class="brace">{</em>
<a id="L855" name="L855"></a> 855       testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L856" name="L856"></a> 856       <strong class="reserved">if</strong> (testChar == ':' || testChar == '/' ||
<a id="L857" name="L857"></a> 857           testChar == '?' || testChar == '#') <em class="brace">{</em>
<a id="L858" name="L858"></a> 858         <strong class="reserved">break</strong>;
<a id="L859" name="L859"></a> 859       <em class="brace">}</em>
<a id="L860" name="L860"></a> 860       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L861" name="L861"></a> 861     <em class="brace">}</em>
<a id="L862" name="L862"></a> 862     scheme = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864     <strong class="reserved">if</strong> (scheme.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L865" name="L865"></a> 865       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("No scheme found in URI.");
<a id="L866" name="L866"></a> 866     <em class="brace">}</em>
<a id="L867" name="L867"></a> 867     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L868" name="L868"></a> 868       <a href="../D/33816.html" title="Multiple defined in 4 places.">setScheme</a>(scheme);
<a id="L869" name="L869"></a> 869     <em class="brace">}</em>
<a id="L870" name="L870"></a> 870   <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<div class="comment">
   Initialize the authority (either server or registry based)
   for this URI from a URI string spec.
   @param p_uriSpec the URI specification (cannot be null)
   @return true if the given string matched server or registry
   based authority</div>
<a id="L881" name="L881"></a> 881   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/20684.html" title="Multiple referred from 4 places.">initializeAuthority</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec) <em class="brace">{</em>
<a id="L882" name="L882"></a> 882 
<a id="L883" name="L883"></a> 883     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L884" name="L884"></a> 884     <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = 0;
<a id="L885" name="L885"></a> 885     <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = p_uriSpec.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L886" name="L886"></a> 886 
<a id="L887" name="L887"></a> 887     <strong class="reserved">char</strong> testChar = '\0';
<a id="L888" name="L888"></a> 888     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> userinfo = <strong class="reserved">null</strong>;
<a id="L889" name="L889"></a> 889 
<a id="L890" name="L890"></a> 890     <em class="comment">// userinfo is everything up to @</em>
<a id="L891" name="L891"></a> 891     <strong class="reserved">if</strong> (p_uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('@', <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) != -1) <em class="brace">{</em>
<a id="L892" name="L892"></a> 892       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L893" name="L893"></a> 893         testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L894" name="L894"></a> 894         <strong class="reserved">if</strong> (testChar == '@') <em class="brace">{</em>
<a id="L895" name="L895"></a> 895           <strong class="reserved">break</strong>;
<a id="L896" name="L896"></a> 896         <em class="brace">}</em>
<a id="L897" name="L897"></a> 897         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L898" name="L898"></a> 898       <em class="brace">}</em>
<a id="L899" name="L899"></a> 899       userinfo = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L900" name="L900"></a> 900       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L901" name="L901"></a> 901     <em class="brace">}</em>
<a id="L902" name="L902"></a> 902 
<a id="L903" name="L903"></a> 903     <em class="comment">// host is everything up to last ':', or up to</em>
<a id="L904" name="L904"></a> 904     <em class="comment">// and including ']' if followed by ':'.</em>
<a id="L905" name="L905"></a> 905     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> host = <strong class="reserved">null</strong>;
<a id="L906" name="L906"></a> 906     <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L907" name="L907"></a> 907     <strong class="reserved">boolean</strong> hasPort = <strong class="reserved">false</strong>;
<a id="L908" name="L908"></a> 908     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L909" name="L909"></a> 909       <strong class="reserved">if</strong> (p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) == '[') <em class="brace">{</em>
<a id="L910" name="L910"></a> 910         <strong class="reserved">int</strong> bracketIndex = p_uriSpec.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(']', <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>);
<a id="L911" name="L911"></a> 911         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (bracketIndex != -1) ? bracketIndex : <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L912" name="L912"></a> 912         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1 &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) == ':') <em class="brace">{</em>
<a id="L913" name="L913"></a> 913           ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L914" name="L914"></a> 914           hasPort = <strong class="reserved">true</strong>;
<a id="L915" name="L915"></a> 915         <em class="brace">}</em>
<a id="L916" name="L916"></a> 916         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L917" name="L917"></a> 917           <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L918" name="L918"></a> 918         <em class="brace">}</em>
<a id="L919" name="L919"></a> 919       <em class="brace">}</em>
<a id="L920" name="L920"></a> 920       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L921" name="L921"></a> 921         <strong class="reserved">int</strong> colonIndex = p_uriSpec.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>(':', <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L922" name="L922"></a> 922         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (colonIndex &gt; <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) ? colonIndex : <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L923" name="L923"></a> 923         hasPort = (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>);
<a id="L924" name="L924"></a> 924       <em class="brace">}</em>
<a id="L925" name="L925"></a> 925     <em class="brace">}</em>
<a id="L926" name="L926"></a> 926     host = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L927" name="L927"></a> 927     <strong class="reserved">int</strong> port = -1;
<a id="L928" name="L928"></a> 928     <strong class="reserved">if</strong> (host.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L929" name="L929"></a> 929       <em class="comment">// port</em>
<a id="L930" name="L930"></a> 930       <strong class="reserved">if</strong> (hasPort) <em class="brace">{</em>
<a id="L931" name="L931"></a> 931         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L932" name="L932"></a> 932         <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L933" name="L933"></a> 933         <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L934" name="L934"></a> 934           <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L935" name="L935"></a> 935         <em class="brace">}</em>
<a id="L936" name="L936"></a> 936         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> portStr = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L937" name="L937"></a> 937         <strong class="reserved">if</strong> (portStr.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0) <em class="brace">{</em>
<a id="L938" name="L938"></a> 938           <em class="comment">// REVISIT: Remove this code.</em>
<div class="comment">
 for (int i = 0; i &lt; portStr.length(); i++) {
            if (!isDigit(portStr.charAt(i))) {
              throw new MalformedURIException(
                   portStr +
                   " is invalid. Port should only contain digits!");
            }
          }*</div>
<a id="L946" name="L946"></a> 946           <em class="comment">// REVISIT: Remove this code.</em>
<a id="L947" name="L947"></a> 947           <em class="comment">// Store port value as string instead of integer.</em>
<a id="L948" name="L948"></a> 948           <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L949" name="L949"></a> 949             port = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(portStr);
<a id="L950" name="L950"></a> 950             <strong class="reserved">if</strong> (port == -1) --port;
<a id="L951" name="L951"></a> 951           <em class="brace">}</em>
<a id="L952" name="L952"></a> 952           <strong class="reserved">catch</strong> (<a href="../S/1762.html#L38" title="Defined at 38 in src/java/lang/NumberFormatException.java.">NumberFormatException</a> nfe) <em class="brace">{</em>
<a id="L953" name="L953"></a> 953             port = -2;
<a id="L954" name="L954"></a> 954           <em class="brace">}</em>
<a id="L955" name="L955"></a> 955         <em class="brace">}</em>
<a id="L956" name="L956"></a> 956       <em class="brace">}</em>
<a id="L957" name="L957"></a> 957     <em class="brace">}</em>
<a id="L958" name="L958"></a> 958 
<a id="L959" name="L959"></a> 959     <strong class="reserved">if</strong> (<a href="../S/5323.html#L987" title="Defined at 987 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isValidServerBasedAuthority</a>(host, port, userinfo)) <em class="brace">{</em>
<a id="L960" name="L960"></a> 960       m_host = host;
<a id="L961" name="L961"></a> 961       m_port = port;
<a id="L962" name="L962"></a> 962       m_userinfo = userinfo;
<a id="L963" name="L963"></a> 963       <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L964" name="L964"></a> 964     <em class="brace">}</em>
<a id="L965" name="L965"></a> 965     <em class="comment">// Note: Registry based authority is being removed from a</em>
<a id="L966" name="L966"></a> 966     <em class="comment">// new spec for URI which would obsolete RFC 2396. If the</em>
<a id="L967" name="L967"></a> 967     <em class="comment">// spec is added to XML errata, processing of reg_name</em>
<a id="L968" name="L968"></a> 968     <em class="comment">// needs to be removed. - mrglavas.</em>
<a id="L969" name="L969"></a> 969     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/5323.html#L1035" title="Defined at 1035 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isValidRegistryBasedAuthority</a>(p_uriSpec)) <em class="brace">{</em>
<a id="L970" name="L970"></a> 970       m_regAuthority = p_uriSpec;
<a id="L971" name="L971"></a> 971       <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L972" name="L972"></a> 972     <em class="brace">}</em>
<a id="L973" name="L973"></a> 973     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L974" name="L974"></a> 974   <em class="brace">}</em>
<a id="L975" name="L975"></a> 975 
<div class="comment">
    Determines whether the components host, port, and user info
    are valid as a server authority.
    @param host the host component of authority
    @param port the port number component of authority
    @param userinfo the user info component of authority
    @return true if the given host, port, and userinfo compose
    a valid server authority</div>
<a id="L987" name="L987"></a> 987   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/5323.html#L959" title="Referred from 959 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isValidServerBasedAuthority</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> host, <strong class="reserved">int</strong> port, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> userinfo) <em class="brace">{</em>
<a id="L988" name="L988"></a> 988 
<a id="L989" name="L989"></a> 989     <em class="comment">// Check if the host is well formed.</em>
<a id="L990" name="L990"></a> 990     <strong class="reserved">if</strong> (!<a href="../D/26500.html" title="Multiple defined in 3 places.">isWellFormedAddress</a>(host)) <em class="brace">{</em>
<a id="L991" name="L991"></a> 991       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L992" name="L992"></a> 992     <em class="brace">}</em>
<a id="L993" name="L993"></a> 993 
<a id="L994" name="L994"></a> 994     <em class="comment">// Check that port is well formed if it exists.</em>
<a id="L995" name="L995"></a> 995     <em class="comment">// REVISIT: There's no restriction on port value ranges, but</em>
<a id="L996" name="L996"></a> 996     <em class="comment">// perform the same check as in setPort to be consistent. Pass</em>
<a id="L997" name="L997"></a> 997     <em class="comment">// in a string to this method instead of an integer.</em>
<a id="L998" name="L998"></a> 998     <strong class="reserved">if</strong> (port &lt; -1 || port &gt; 65535) <em class="brace">{</em>
<a id="L999" name="L999"></a> 999       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1000" name="L1000"></a>1000     <em class="brace">}</em>
<a id="L1001" name="L1001"></a>1001 
<a id="L1002" name="L1002"></a>1002     <em class="comment">// Check that userinfo is well formed if it exists.</em>
<a id="L1003" name="L1003"></a>1003     <strong class="reserved">if</strong> (userinfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1004" name="L1004"></a>1004       <em class="comment">// Userinfo can contain alphanumerics, mark characters, escaped</em>
<a id="L1005" name="L1005"></a>1005       <em class="comment">// and ';',':','&amp;','=','+','$',','</em>
<a id="L1006" name="L1006"></a>1006       <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L1007" name="L1007"></a>1007       <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = userinfo.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1008" name="L1008"></a>1008       <strong class="reserved">char</strong> testChar = '\0';
<a id="L1009" name="L1009"></a>1009       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1010" name="L1010"></a>1010         testChar = userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1011" name="L1011"></a>1011         <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1012" name="L1012"></a>1012           <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1013" name="L1013"></a>1013             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1014" name="L1014"></a>1014             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1015" name="L1015"></a>1015             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1016" name="L1016"></a>1016           <em class="brace">}</em>
<a id="L1017" name="L1017"></a>1017           <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1018" name="L1018"></a>1018         <em class="brace">}</em>
<a id="L1019" name="L1019"></a>1019         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2161" title="Defined at 2161 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isUserinfoCharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1020" name="L1020"></a>1020           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1021" name="L1021"></a>1021         <em class="brace">}</em>
<a id="L1022" name="L1022"></a>1022         ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1023" name="L1023"></a>1023       <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024     <em class="brace">}</em>
<a id="L1025" name="L1025"></a>1025     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1026" name="L1026"></a>1026   <em class="brace">}</em>
<a id="L1027" name="L1027"></a>1027 
<div class="comment">
    Determines whether the given string is a registry based authority.
    @param authority the authority component of a URI
    @return true if the given string is a registry based authority</div>
<a id="L1035" name="L1035"></a>1035   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/22194.html" title="Multiple referred from 2 places.">isValidRegistryBasedAuthority</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> authority) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L1037" name="L1037"></a>1037     <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = authority.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1038" name="L1038"></a>1038     <strong class="reserved">char</strong> testChar;
<a id="L1039" name="L1039"></a>1039 
<a id="L1040" name="L1040"></a>1040     <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041       testChar = authority.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1042" name="L1042"></a>1042 
<a id="L1043" name="L1043"></a>1043       <em class="comment">// check for valid escape sequence</em>
<a id="L1044" name="L1044"></a>1044       <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1045" name="L1045"></a>1045         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1046" name="L1046"></a>1046             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(authority.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1047" name="L1047"></a>1047             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(authority.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1048" name="L1048"></a>1048             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1049" name="L1049"></a>1049         <em class="brace">}</em>
<a id="L1050" name="L1050"></a>1050         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1051" name="L1051"></a>1051       <em class="brace">}</em>
<a id="L1052" name="L1052"></a>1052       <em class="comment">// can check against path characters because the set</em>
<a id="L1053" name="L1053"></a>1053       <em class="comment">// is the same except for '/' which we've already excluded.</em>
<a id="L1054" name="L1054"></a>1054       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2170" title="Defined at 2170 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isPathCharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1055" name="L1055"></a>1055         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1056" name="L1056"></a>1056       <em class="brace">}</em>
<a id="L1057" name="L1057"></a>1057       ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1058" name="L1058"></a>1058     <em class="brace">}</em>
<a id="L1059" name="L1059"></a>1059     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1060" name="L1060"></a>1060   <em class="brace">}</em>
<a id="L1061" name="L1061"></a>1061 
<div class="comment">
   Initialize the path for this URI from a URI string spec.
   @param p_uriSpec the URI specification (cannot be null)
   @param p_nStartIndex the index to begin scanning from
   @exception MalformedURIException if p_uriSpec violates syntax rules</div>
<a id="L1070" name="L1070"></a>1070   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20714.html" title="Multiple referred from 9 places.">initializePath</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uriSpec, <strong class="reserved">int</strong> p_nStartIndex)
<a id="L1071" name="L1071"></a>1071                  <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1072" name="L1072"></a>1072     <strong class="reserved">if</strong> (p_uriSpec == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1073" name="L1073"></a>1073       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1074" name="L1074"></a>1074                 "Cannot initialize path from null string!");
<a id="L1075" name="L1075"></a>1075     <em class="brace">}</em>
<a id="L1076" name="L1076"></a>1076 
<a id="L1077" name="L1077"></a>1077     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = p_nStartIndex;
<a id="L1078" name="L1078"></a>1078     <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = p_nStartIndex;
<a id="L1079" name="L1079"></a>1079     <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = p_uriSpec.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1080" name="L1080"></a>1080     <strong class="reserved">char</strong> testChar = '\0';
<a id="L1081" name="L1081"></a>1081 
<a id="L1082" name="L1082"></a>1082     <em class="comment">// path - everything up to query string or fragment</em>
<a id="L1083" name="L1083"></a>1083     <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1084" name="L1084"></a>1084         <em class="comment">// RFC 2732 only allows '[' and ']' to appear in the opaque part.</em>
<a id="L1085" name="L1085"></a>1085         <strong class="reserved">if</strong> (<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>() == <strong class="reserved">null</strong> || p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) == '/') <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086 
<a id="L1087" name="L1087"></a>1087             <em class="comment">// Scan path.</em>
<a id="L1088" name="L1088"></a>1088             <em class="comment">// abs_path = "/"  path_segments</em>
<a id="L1089" name="L1089"></a>1089             <em class="comment">// rel_path = rel_segment [ abs_path ]</em>
<a id="L1090" name="L1090"></a>1090             <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1091" name="L1091"></a>1091                 testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1092" name="L1092"></a>1092 
<a id="L1093" name="L1093"></a>1093                 <em class="comment">// check for valid escape sequence</em>
<a id="L1094" name="L1094"></a>1094                 <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1095" name="L1095"></a>1095                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1096" name="L1096"></a>1096                     !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1097" name="L1097"></a>1097                     !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1098" name="L1098"></a>1098                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1099" name="L1099"></a>1099                             "Path contains invalid escape sequence!");
<a id="L1100" name="L1100"></a>1100                     <em class="brace">}</em>
<a id="L1101" name="L1101"></a>1101                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1102" name="L1102"></a>1102                 <em class="brace">}</em>
<a id="L1103" name="L1103"></a>1103                 <em class="comment">// Path segments cannot contain '[' or ']' since pchar</em>
<a id="L1104" name="L1104"></a>1104                 <em class="comment">// production was not changed by RFC 2732.</em>
<a id="L1105" name="L1105"></a>1105                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2170" title="Defined at 2170 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isPathCharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1106" name="L1106"></a>1106                     <strong class="reserved">if</strong> (testChar == '?' || testChar == '#') <em class="brace">{</em>
<a id="L1107" name="L1107"></a>1107                         <strong class="reserved">break</strong>;
<a id="L1108" name="L1108"></a>1108                     <em class="brace">}</em>
<a id="L1109" name="L1109"></a>1109                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1110" name="L1110"></a>1110                         "Path contains invalid character: " + testChar);
<a id="L1111" name="L1111"></a>1111                 <em class="brace">}</em>
<a id="L1112" name="L1112"></a>1112                 ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1113" name="L1113"></a>1113             <em class="brace">}</em>
<a id="L1114" name="L1114"></a>1114         <em class="brace">}</em>
<a id="L1115" name="L1115"></a>1115         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1116" name="L1116"></a>1116 
<a id="L1117" name="L1117"></a>1117             <em class="comment">// Scan opaque part.</em>
<a id="L1118" name="L1118"></a>1118             <em class="comment">// opaque_part = uric_no_slash *uric</em>
<a id="L1119" name="L1119"></a>1119             <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1120" name="L1120"></a>1120                 testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1121" name="L1121"></a>1121 
<a id="L1122" name="L1122"></a>1122                 <strong class="reserved">if</strong> (testChar == '?' || testChar == '#') <em class="brace">{</em>
<a id="L1123" name="L1123"></a>1123                     <strong class="reserved">break</strong>;
<a id="L1124" name="L1124"></a>1124                 <em class="brace">}</em>
<a id="L1125" name="L1125"></a>1125 
<a id="L1126" name="L1126"></a>1126                 <em class="comment">// check for valid escape sequence</em>
<a id="L1127" name="L1127"></a>1127                 <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1128" name="L1128"></a>1128                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1129" name="L1129"></a>1129                     !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1130" name="L1130"></a>1130                     !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1131" name="L1131"></a>1131                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1132" name="L1132"></a>1132                             "Opaque part contains invalid escape sequence!");
<a id="L1133" name="L1133"></a>1133                     <em class="brace">}</em>
<a id="L1134" name="L1134"></a>1134                     <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1135" name="L1135"></a>1135                 <em class="brace">}</em>
<a id="L1136" name="L1136"></a>1136                 <em class="comment">// If the scheme specific part is opaque, it can contain '['</em>
<a id="L1137" name="L1137"></a>1137                 <em class="comment">// and ']'. uric_no_slash wasn't modified by RFC 2732, which</em>
<a id="L1138" name="L1138"></a>1138                 <em class="comment">// I've interpreted as an error in the spec, since the</em>
<a id="L1139" name="L1139"></a>1139                 <em class="comment">// production should be equivalent to (uric - '/'), and uric</em>
<a id="L1140" name="L1140"></a>1140                 <em class="comment">// contains '[' and ']'. - mrglavas</em>
<a id="L1141" name="L1141"></a>1141                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2143" title="Defined at 2143 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isURICharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1142" name="L1142"></a>1142                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1143" name="L1143"></a>1143                         "Opaque part contains invalid character: " + testChar);
<a id="L1144" name="L1144"></a>1144                 <em class="brace">}</em>
<a id="L1145" name="L1145"></a>1145                 ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1146" name="L1146"></a>1146             <em class="brace">}</em>
<a id="L1147" name="L1147"></a>1147         <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148     <em class="brace">}</em>
<a id="L1149" name="L1149"></a>1149     m_path = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1150" name="L1150"></a>1150 
<a id="L1151" name="L1151"></a>1151     <em class="comment">// query - starts with ? and up to fragment or end</em>
<a id="L1152" name="L1152"></a>1152     <strong class="reserved">if</strong> (testChar == '?') <em class="brace">{</em>
<a id="L1153" name="L1153"></a>1153       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1154" name="L1154"></a>1154       <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1155" name="L1155"></a>1155       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1156" name="L1156"></a>1156         testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1157" name="L1157"></a>1157         <strong class="reserved">if</strong> (testChar == '#') <em class="brace">{</em>
<a id="L1158" name="L1158"></a>1158           <strong class="reserved">break</strong>;
<a id="L1159" name="L1159"></a>1159         <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160         <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161            <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1162" name="L1162"></a>1162               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1163" name="L1163"></a>1163               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1164" name="L1164"></a>1164             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1165" name="L1165"></a>1165                     "Query string contains invalid escape sequence!");
<a id="L1166" name="L1166"></a>1166            <em class="brace">}</em>
<a id="L1167" name="L1167"></a>1167            <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1168" name="L1168"></a>1168         <em class="brace">}</em>
<a id="L1169" name="L1169"></a>1169         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2143" title="Defined at 2143 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isURICharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1170" name="L1170"></a>1170           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1171" name="L1171"></a>1171                 "Query string contains invalid character: " + testChar);
<a id="L1172" name="L1172"></a>1172         <em class="brace">}</em>
<a id="L1173" name="L1173"></a>1173         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1174" name="L1174"></a>1174       <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175       m_queryString = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1176" name="L1176"></a>1176     <em class="brace">}</em>
<a id="L1177" name="L1177"></a>1177 
<a id="L1178" name="L1178"></a>1178     <em class="comment">// fragment - starts with #</em>
<a id="L1179" name="L1179"></a>1179     <strong class="reserved">if</strong> (testChar == '#') <em class="brace">{</em>
<a id="L1180" name="L1180"></a>1180       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1181" name="L1181"></a>1181       <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1182" name="L1182"></a>1182       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1183" name="L1183"></a>1183         testChar = p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1184" name="L1184"></a>1184 
<a id="L1185" name="L1185"></a>1185         <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1186" name="L1186"></a>1186            <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1187" name="L1187"></a>1187               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1188" name="L1188"></a>1188               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uriSpec.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1190" name="L1190"></a>1190                     "Fragment contains invalid escape sequence!");
<a id="L1191" name="L1191"></a>1191            <em class="brace">}</em>
<a id="L1192" name="L1192"></a>1192            <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1193" name="L1193"></a>1193         <em class="brace">}</em>
<a id="L1194" name="L1194"></a>1194         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2143" title="Defined at 2143 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isURICharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1195" name="L1195"></a>1195           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1196" name="L1196"></a>1196                 "Fragment contains invalid character: "+testChar);
<a id="L1197" name="L1197"></a>1197         <em class="brace">}</em>
<a id="L1198" name="L1198"></a>1198         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1199" name="L1199"></a>1199       <em class="brace">}</em>
<a id="L1200" name="L1200"></a>1200       m_fragment = p_uriSpec.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1201" name="L1201"></a>1201     <em class="brace">}</em>
<a id="L1202" name="L1202"></a>1202   <em class="brace">}</em>
<a id="L1203" name="L1203"></a>1203 
<div class="comment">
   Get the scheme for this URI.
   @return the scheme for this URI</div>
<a id="L1209" name="L1209"></a>1209   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18865.html" title="Multiple referred from 36 places.">getScheme</a>() <em class="brace">{</em>
<a id="L1210" name="L1210"></a>1210     <strong class="reserved">return</strong> m_scheme;
<a id="L1211" name="L1211"></a>1211   <em class="brace">}</em>
<a id="L1212" name="L1212"></a>1212 
<div class="comment">
   Get the scheme-specific part for this URI (everything following the
   scheme and the first colon). See RFC 2396 Section 5.2 for spec.
   @return the scheme-specific part for this URI</div>
<a id="L1219" name="L1219"></a>1219   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18866.html" title="Multiple referred from 7 places.">getSchemeSpecificPart</a>() <em class="brace">{</em>
<a id="L1220" name="L1220"></a>1220     <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> schemespec = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1221" name="L1221"></a>1221 
<a id="L1222" name="L1222"></a>1222     <strong class="reserved">if</strong> (m_host != <strong class="reserved">null</strong> || m_regAuthority != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1223" name="L1223"></a>1223       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("//");
<a id="L1224" name="L1224"></a>1224 
<a id="L1225" name="L1225"></a>1225       <em class="comment">// Server based authority.</em>
<a id="L1226" name="L1226"></a>1226       <strong class="reserved">if</strong> (m_host != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227 
<a id="L1228" name="L1228"></a>1228         <strong class="reserved">if</strong> (m_userinfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1229" name="L1229"></a>1229           schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_userinfo);
<a id="L1230" name="L1230"></a>1230           schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('@');
<a id="L1231" name="L1231"></a>1231         <em class="brace">}</em>
<a id="L1232" name="L1232"></a>1232 
<a id="L1233" name="L1233"></a>1233         schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_host);
<a id="L1234" name="L1234"></a>1234 
<a id="L1235" name="L1235"></a>1235         <strong class="reserved">if</strong> (m_port != -1) <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236           schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(':');
<a id="L1237" name="L1237"></a>1237           schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_port);
<a id="L1238" name="L1238"></a>1238         <em class="brace">}</em>
<a id="L1239" name="L1239"></a>1239       <em class="brace">}</em>
<a id="L1240" name="L1240"></a>1240       <em class="comment">// Registry based authority.</em>
<a id="L1241" name="L1241"></a>1241       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1242" name="L1242"></a>1242         schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_regAuthority);
<a id="L1243" name="L1243"></a>1243       <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244     <em class="brace">}</em>
<a id="L1245" name="L1245"></a>1245 
<a id="L1246" name="L1246"></a>1246     <strong class="reserved">if</strong> (m_path != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((m_path));
<a id="L1248" name="L1248"></a>1248     <em class="brace">}</em>
<a id="L1249" name="L1249"></a>1249 
<a id="L1250" name="L1250"></a>1250     <strong class="reserved">if</strong> (m_queryString != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1251" name="L1251"></a>1251       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('?');
<a id="L1252" name="L1252"></a>1252       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_queryString);
<a id="L1253" name="L1253"></a>1253     <em class="brace">}</em>
<a id="L1254" name="L1254"></a>1254 
<a id="L1255" name="L1255"></a>1255     <strong class="reserved">if</strong> (m_fragment != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1256" name="L1256"></a>1256       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('#');
<a id="L1257" name="L1257"></a>1257       schemespec.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_fragment);
<a id="L1258" name="L1258"></a>1258     <em class="brace">}</em>
<a id="L1259" name="L1259"></a>1259 
<a id="L1260" name="L1260"></a>1260     <strong class="reserved">return</strong> schemespec.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1261" name="L1261"></a>1261   <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262 
<div class="comment">
   Get the userinfo for this URI.
   @return the userinfo for this URI (null if not specified).</div>
<a id="L1268" name="L1268"></a>1268   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/19732.html" title="Multiple referred from 9 places.">getUserinfo</a>() <em class="brace">{</em>
<a id="L1269" name="L1269"></a>1269     <strong class="reserved">return</strong> m_userinfo;
<a id="L1270" name="L1270"></a>1270   <em class="brace">}</em>
<a id="L1271" name="L1271"></a>1271 
<div class="comment">
   Get the host for this URI.
   @return the host for this URI (null if not specified).</div>
<a id="L1277" name="L1277"></a>1277   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16910.html" title="Multiple referred from 54 places.">getHost</a>() <em class="brace">{</em>
<a id="L1278" name="L1278"></a>1278     <strong class="reserved">return</strong> m_host;
<a id="L1279" name="L1279"></a>1279   <em class="brace">}</em>
<a id="L1280" name="L1280"></a>1280 
<div class="comment">
   Get the port for this URI.
   @return the port for this URI (-1 if not specified).</div>
<a id="L1286" name="L1286"></a>1286   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18374.html" title="Multiple referred from 119 places.">getPort</a>() <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287     <strong class="reserved">return</strong> m_port;
<a id="L1288" name="L1288"></a>1288   <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289 
<div class="comment">
    Get the registry based authority for this URI.
    @return the registry based authority (null if not specified).</div>
<a id="L1295" name="L1295"></a>1295   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18647.html" title="Multiple referred from 3 places.">getRegBasedAuthority</a>() <em class="brace">{</em>
<a id="L1296" name="L1296"></a>1296     <strong class="reserved">return</strong> m_regAuthority;
<a id="L1297" name="L1297"></a>1297   <em class="brace">}</em>
<a id="L1298" name="L1298"></a>1298 
<div class="comment">
    Get the authority for this URI.
    @return the authority</div>
<a id="L1304" name="L1304"></a>1304   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/15182.html" title="Multiple referred from 12 places.">getAuthority</a>() <em class="brace">{</em>
<a id="L1305" name="L1305"></a>1305       <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> authority = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1306" name="L1306"></a>1306       <strong class="reserved">if</strong> (m_host != <strong class="reserved">null</strong> || m_regAuthority != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1307" name="L1307"></a>1307           authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("//");
<a id="L1308" name="L1308"></a>1308 
<a id="L1309" name="L1309"></a>1309           <em class="comment">// Server based authority.</em>
<a id="L1310" name="L1310"></a>1310           <strong class="reserved">if</strong> (m_host != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1311" name="L1311"></a>1311 
<a id="L1312" name="L1312"></a>1312               <strong class="reserved">if</strong> (m_userinfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1313" name="L1313"></a>1313                   authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_userinfo);
<a id="L1314" name="L1314"></a>1314                   authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('@');
<a id="L1315" name="L1315"></a>1315               <em class="brace">}</em>
<a id="L1316" name="L1316"></a>1316 
<a id="L1317" name="L1317"></a>1317               authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_host);
<a id="L1318" name="L1318"></a>1318 
<a id="L1319" name="L1319"></a>1319               <strong class="reserved">if</strong> (m_port != -1) <em class="brace">{</em>
<a id="L1320" name="L1320"></a>1320                   authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(':');
<a id="L1321" name="L1321"></a>1321                   authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_port);
<a id="L1322" name="L1322"></a>1322               <em class="brace">}</em>
<a id="L1323" name="L1323"></a>1323           <em class="brace">}</em>
<a id="L1324" name="L1324"></a>1324           <em class="comment">// Registry based authority.</em>
<a id="L1325" name="L1325"></a>1325           <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1326" name="L1326"></a>1326               authority.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_regAuthority);
<a id="L1327" name="L1327"></a>1327           <em class="brace">}</em>
<a id="L1328" name="L1328"></a>1328       <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329       <strong class="reserved">return</strong> authority.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1330" name="L1330"></a>1330   <em class="brace">}</em>
<a id="L1331" name="L1331"></a>1331 
<div class="comment">
   Get the path for this URI (optionally with the query string and
   fragment).
   @param p_includeQueryString if true (and query string is not null),
                               then a "?" followed by the query string
                               will be appended
   @param p_includeFragment if true (and fragment is not null),
                               then a "#" followed by the fragment
                               will be appended
   @return the path for this URI possibly including the query string
           and fragment</div>
<a id="L1346" name="L1346"></a>1346   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18300.html" title="Multiple referred from 125 places.">getPath</a>(<strong class="reserved">boolean</strong> p_includeQueryString,
<a id="L1347" name="L1347"></a>1347                         <strong class="reserved">boolean</strong> p_includeFragment) <em class="brace">{</em>
<a id="L1348" name="L1348"></a>1348     <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> pathString = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(m_path);
<a id="L1349" name="L1349"></a>1349 
<a id="L1350" name="L1350"></a>1350     <strong class="reserved">if</strong> (p_includeQueryString &amp;&amp; m_queryString != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1351" name="L1351"></a>1351       pathString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('?');
<a id="L1352" name="L1352"></a>1352       pathString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_queryString);
<a id="L1353" name="L1353"></a>1353     <em class="brace">}</em>
<a id="L1354" name="L1354"></a>1354 
<a id="L1355" name="L1355"></a>1355     <strong class="reserved">if</strong> (p_includeFragment &amp;&amp; m_fragment != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1356" name="L1356"></a>1356       pathString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('#');
<a id="L1357" name="L1357"></a>1357       pathString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_fragment);
<a id="L1358" name="L1358"></a>1358     <em class="brace">}</em>
<a id="L1359" name="L1359"></a>1359     <strong class="reserved">return</strong> pathString.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1360" name="L1360"></a>1360   <em class="brace">}</em>
<a id="L1361" name="L1361"></a>1361 
<div class="comment">
   Get the path for this URI. Note that the value returned is the path
   only and does not include the query string or fragment.
   @return the path for this URI.</div>
<a id="L1368" name="L1368"></a>1368   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18300.html" title="Multiple referred from 125 places.">getPath</a>() <em class="brace">{</em>
<a id="L1369" name="L1369"></a>1369     <strong class="reserved">return</strong> m_path;
<a id="L1370" name="L1370"></a>1370   <em class="brace">}</em>
<a id="L1371" name="L1371"></a>1371 
<div class="comment">
   Get the query string for this URI.
   @return the query string for this URI. Null is returned if there
           was no "?" in the URI spec, empty string if there was a
           "?" but no query string following it.</div>
<a id="L1379" name="L1379"></a>1379   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18570.html" title="Multiple referred from 7 places.">getQueryString</a>() <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380     <strong class="reserved">return</strong> m_queryString;
<a id="L1381" name="L1381"></a>1381   <em class="brace">}</em>
<a id="L1382" name="L1382"></a>1382 
<div class="comment">
   Get the fragment for this URI.
   @return the fragment for this URI. Null is returned if there
           was no "#" in the URI spec, empty string if there was a
           "#" but no fragment following it.</div>
<a id="L1390" name="L1390"></a>1390   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16710.html" title="Multiple referred from 11 places.">getFragment</a>() <em class="brace">{</em>
<a id="L1391" name="L1391"></a>1391     <strong class="reserved">return</strong> m_fragment;
<a id="L1392" name="L1392"></a>1392   <em class="brace">}</em>
<a id="L1393" name="L1393"></a>1393 
<div class="comment">
   Set the scheme for this URI. The scheme is converted to lowercase
   before it is set.
   @param p_scheme the scheme for this URI (cannot be null)
   @exception MalformedURIException if p_scheme is not a conformant
                                    scheme name</div>
<a id="L1403" name="L1403"></a>1403   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28107.html" title="Multiple referred from 9 places.">setScheme</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_scheme) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1404" name="L1404"></a>1404     <strong class="reserved">if</strong> (p_scheme == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1405" name="L1405"></a>1405       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1406" name="L1406"></a>1406                 "Cannot set scheme from null string!");
<a id="L1407" name="L1407"></a>1407     <em class="brace">}</em>
<a id="L1408" name="L1408"></a>1408     <strong class="reserved">if</strong> (!<a href="../D/25350.html" title="Multiple defined in 3 places.">isConformantSchemeName</a>(p_scheme)) <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("The scheme is not conformant.");
<a id="L1410" name="L1410"></a>1410     <em class="brace">}</em>
<a id="L1411" name="L1411"></a>1411 
<a id="L1412" name="L1412"></a>1412     m_scheme = p_scheme.<a href="../D/35437.html" title="Multiple defined in 19 places.">toLowerCase</a>();
<a id="L1413" name="L1413"></a>1413   <em class="brace">}</em>
<a id="L1414" name="L1414"></a>1414 
<div class="comment">
   Set the userinfo for this URI. If a non-null value is passed in and
   the host value is null, then an exception is thrown.
   @param p_userinfo the userinfo for this URI
   @exception MalformedURIException if p_userinfo contains invalid
                                    characters</div>
<a id="L1424" name="L1424"></a>1424   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28365.html" title="Multiple referred from 5 places.">setUserinfo</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_userinfo) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1425" name="L1425"></a>1425     <strong class="reserved">if</strong> (p_userinfo == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1426" name="L1426"></a>1426       m_userinfo = <strong class="reserved">null</strong>;
<a id="L1427" name="L1427"></a>1427       <strong class="reserved">return</strong>;
<a id="L1428" name="L1428"></a>1428     <em class="brace">}</em>
<a id="L1429" name="L1429"></a>1429     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430       <strong class="reserved">if</strong> (m_host == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1431" name="L1431"></a>1431         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1432" name="L1432"></a>1432                      "Userinfo cannot be set when host is null!");
<a id="L1433" name="L1433"></a>1433       <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434 
<a id="L1435" name="L1435"></a>1435       <em class="comment">// userinfo can contain alphanumerics, mark characters, escaped</em>
<a id="L1436" name="L1436"></a>1436       <em class="comment">// and ';',':','&amp;','=','+','$',','</em>
<a id="L1437" name="L1437"></a>1437       <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 0;
<a id="L1438" name="L1438"></a>1438       <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = p_userinfo.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1439" name="L1439"></a>1439       <strong class="reserved">char</strong> testChar = '\0';
<a id="L1440" name="L1440"></a>1440       <strong class="reserved">while</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441         testChar = p_userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1442" name="L1442"></a>1442         <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L1443" name="L1443"></a>1443           <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L1444" name="L1444"></a>1444               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1)) ||
<a id="L1445" name="L1445"></a>1445               !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_userinfo.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+2))) <em class="brace">{</em>
<a id="L1446" name="L1446"></a>1446             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1447" name="L1447"></a>1447                   "Userinfo contains invalid escape sequence!");
<a id="L1448" name="L1448"></a>1448           <em class="brace">}</em>
<a id="L1449" name="L1449"></a>1449         <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2161" title="Defined at 2161 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isUserinfoCharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1451" name="L1451"></a>1451           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1452" name="L1452"></a>1452                   "Userinfo contains invalid character:"+testChar);
<a id="L1453" name="L1453"></a>1453         <em class="brace">}</em>
<a id="L1454" name="L1454"></a>1454         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>++;
<a id="L1455" name="L1455"></a>1455       <em class="brace">}</em>
<a id="L1456" name="L1456"></a>1456     <em class="brace">}</em>
<a id="L1457" name="L1457"></a>1457     m_userinfo = p_userinfo;
<a id="L1458" name="L1458"></a>1458   <em class="brace">}</em>
<a id="L1459" name="L1459"></a>1459 
<div class="comment">
   <p>Set the host for this URI. If null is passed in, the userinfo
   field is also set to null and the port is set to -1.</p>
   <p>Note: This method overwrites registry based authority if it
   previously existed in this URI.</p>
   @param p_host the host for this URI
   @exception MalformedURIException if p_host is not a valid IP
                                    address or DNS hostname.</div>
<a id="L1472" name="L1472"></a>1472   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27510.html" title="Multiple referred from 8 places.">setHost</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_host) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1473" name="L1473"></a>1473     <strong class="reserved">if</strong> (p_host == <strong class="reserved">null</strong> || p_host.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L1474" name="L1474"></a>1474       <strong class="reserved">if</strong> (p_host != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1475" name="L1475"></a>1475         m_regAuthority = <strong class="reserved">null</strong>;
<a id="L1476" name="L1476"></a>1476       <em class="brace">}</em>
<a id="L1477" name="L1477"></a>1477       m_host = p_host;
<a id="L1478" name="L1478"></a>1478       m_userinfo = <strong class="reserved">null</strong>;
<a id="L1479" name="L1479"></a>1479       m_port = -1;
<a id="L1480" name="L1480"></a>1480       <strong class="reserved">return</strong>;
<a id="L1481" name="L1481"></a>1481     <em class="brace">}</em>
<a id="L1482" name="L1482"></a>1482     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/26500.html" title="Multiple defined in 3 places.">isWellFormedAddress</a>(p_host)) <em class="brace">{</em>
<a id="L1483" name="L1483"></a>1483       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Host is not a well formed address!");
<a id="L1484" name="L1484"></a>1484     <em class="brace">}</em>
<a id="L1485" name="L1485"></a>1485     m_host = p_host;
<a id="L1486" name="L1486"></a>1486     m_regAuthority = <strong class="reserved">null</strong>;
<a id="L1487" name="L1487"></a>1487   <em class="brace">}</em>
<a id="L1488" name="L1488"></a>1488 
<div class="comment">
   Set the port for this URI. -1 is used to indicate that the port is
   not specified, otherwise valid port numbers are  between 0 and 65535.
   If a valid port number is passed in and the host field is null,
   an exception is thrown.
   @param p_port the port number for this URI
   @exception MalformedURIException if p_port is not -1 and not a
                                    valid port number</div>
<a id="L1500" name="L1500"></a>1500   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27939.html" title="Multiple referred from 14 places.">setPort</a>(<strong class="reserved">int</strong> p_port) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501     <strong class="reserved">if</strong> (p_port &gt;= 0 &amp;&amp; p_port &lt;= 65535) <em class="brace">{</em>
<a id="L1502" name="L1502"></a>1502       <strong class="reserved">if</strong> (m_host == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1503" name="L1503"></a>1503         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1504" name="L1504"></a>1504                       "Port cannot be set when host is null!");
<a id="L1505" name="L1505"></a>1505       <em class="brace">}</em>
<a id="L1506" name="L1506"></a>1506     <em class="brace">}</em>
<a id="L1507" name="L1507"></a>1507     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (p_port != -1) <em class="brace">{</em>
<a id="L1508" name="L1508"></a>1508       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Invalid port number!");
<a id="L1509" name="L1509"></a>1509     <em class="brace">}</em>
<a id="L1510" name="L1510"></a>1510     m_port = p_port;
<a id="L1511" name="L1511"></a>1511   <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512 
<div class="comment">
    <p>Sets the registry based authority for this URI.</p>
    <p>Note: This method overwrites server based authority
    if it previously existed in this URI.</p>
    @param authority the registry based authority for this URI
    @exception MalformedURIException it authority is not a
    well formed registry based authority</div>
<a id="L1524" name="L1524"></a>1524   <strong class="reserved">public</strong> <strong class="reserved">void</strong> setRegBasedAuthority(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> authority)
<a id="L1525" name="L1525"></a>1525     <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1526" name="L1526"></a>1526 
<a id="L1527" name="L1527"></a>1527         <strong class="reserved">if</strong> (authority == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1528" name="L1528"></a>1528           m_regAuthority = <strong class="reserved">null</strong>;
<a id="L1529" name="L1529"></a>1529           <strong class="reserved">return</strong>;
<a id="L1530" name="L1530"></a>1530         <em class="brace">}</em>
<a id="L1531" name="L1531"></a>1531         <em class="comment">// reg_name = 1*( unreserved | escaped | "$" | "," |</em>
<a id="L1532" name="L1532"></a>1532         <em class="comment">//            ";" | ":" | "@" | "&amp;" | "=" | "+" )</em>
<a id="L1533" name="L1533"></a>1533         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (authority.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; 1 ||
<a id="L1534" name="L1534"></a>1534           !<a href="../S/5323.html#L1035" title="Defined at 1035 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isValidRegistryBasedAuthority</a>(authority) ||
<a id="L1535" name="L1535"></a>1535           authority.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('/') != -1) <em class="brace">{</em>
<a id="L1536" name="L1536"></a>1536       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>("Registry based authority is not well formed.");
<a id="L1537" name="L1537"></a>1537         <em class="brace">}</em>
<a id="L1538" name="L1538"></a>1538         m_regAuthority = authority;
<a id="L1539" name="L1539"></a>1539         m_host = <strong class="reserved">null</strong>;
<a id="L1540" name="L1540"></a>1540         m_userinfo = <strong class="reserved">null</strong>;
<a id="L1541" name="L1541"></a>1541         m_port = -1;
<a id="L1542" name="L1542"></a>1542   <em class="brace">}</em>
<a id="L1543" name="L1543"></a>1543 
<div class="comment">
   Set the path for this URI. If the supplied path is null, then the
   query string and fragment are set to null as well. If the supplied
   path includes a query string and/or fragment, these fields will be
   parsed and set as well. Note that, for URIs following the "generic
   URI" syntax, the path specified should start with a slash.
   For URIs that do not follow the generic URI syntax, this method
   sets the scheme-specific part.
   @param p_path the path for this URI (may be null)
   @exception MalformedURIException if p_path contains invalid
                                    characters</div>
<a id="L1558" name="L1558"></a>1558   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27921.html" title="Multiple referred from 8 places.">setPath</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_path) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1559" name="L1559"></a>1559     <strong class="reserved">if</strong> (p_path == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1560" name="L1560"></a>1560       m_path = <strong class="reserved">null</strong>;
<a id="L1561" name="L1561"></a>1561       m_queryString = <strong class="reserved">null</strong>;
<a id="L1562" name="L1562"></a>1562       m_fragment = <strong class="reserved">null</strong>;
<a id="L1563" name="L1563"></a>1563     <em class="brace">}</em>
<a id="L1564" name="L1564"></a>1564     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1565" name="L1565"></a>1565       <a href="../D/24679.html" title="Multiple defined in 4 places.">initializePath</a>(p_path, 0);
<a id="L1566" name="L1566"></a>1566     <em class="brace">}</em>
<a id="L1567" name="L1567"></a>1567   <em class="brace">}</em>
<a id="L1568" name="L1568"></a>1568 
<div class="comment">
   Append to the end of the path of this URI. If the current path does
   not end in a slash and the path to be appended does not begin with
   a slash, a slash will be appended to the current path before the
   new segment is added. Also, if the current path ends in a slash
   and the new segment begins with a slash, the extra slash will be
   removed before the new segment is appended.
   @param p_addToPath the new segment to be added to the current path
   @exception MalformedURIException if p_addToPath contains syntax
                                    errors</div>
<a id="L1582" name="L1582"></a>1582   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10232.html" title="Multiple referred from 4 places.">appendPath</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_addToPath)
<a id="L1583" name="L1583"></a>1583                          <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1584" name="L1584"></a>1584     <strong class="reserved">if</strong> (p_addToPath == <strong class="reserved">null</strong> || p_addToPath.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L1585" name="L1585"></a>1585       <strong class="reserved">return</strong>;
<a id="L1586" name="L1586"></a>1586     <em class="brace">}</em>
<a id="L1587" name="L1587"></a>1587 
<a id="L1588" name="L1588"></a>1588     <strong class="reserved">if</strong> (!<a href="../D/26388.html" title="Multiple defined in 3 places.">isURIString</a>(p_addToPath)) <em class="brace">{</em>
<a id="L1589" name="L1589"></a>1589       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1590" name="L1590"></a>1590               "Path contains invalid character!");
<a id="L1591" name="L1591"></a>1591     <em class="brace">}</em>
<a id="L1592" name="L1592"></a>1592 
<a id="L1593" name="L1593"></a>1593     <strong class="reserved">if</strong> (m_path == <strong class="reserved">null</strong> || m_path.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L1594" name="L1594"></a>1594       <strong class="reserved">if</strong> (p_addToPath.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/")) <em class="brace">{</em>
<a id="L1595" name="L1595"></a>1595         m_path = p_addToPath;
<a id="L1596" name="L1596"></a>1596       <em class="brace">}</em>
<a id="L1597" name="L1597"></a>1597       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1598" name="L1598"></a>1598         m_path = "/" + p_addToPath;
<a id="L1599" name="L1599"></a>1599       <em class="brace">}</em>
<a id="L1600" name="L1600"></a>1600     <em class="brace">}</em>
<a id="L1601" name="L1601"></a>1601     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (m_path.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("/")) <em class="brace">{</em>
<a id="L1602" name="L1602"></a>1602       <strong class="reserved">if</strong> (p_addToPath.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/")) <em class="brace">{</em>
<a id="L1603" name="L1603"></a>1603         m_path = m_path.<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(p_addToPath.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(1));
<a id="L1604" name="L1604"></a>1604       <em class="brace">}</em>
<a id="L1605" name="L1605"></a>1605       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1606" name="L1606"></a>1606         m_path = m_path.<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(p_addToPath);
<a id="L1607" name="L1607"></a>1607       <em class="brace">}</em>
<a id="L1608" name="L1608"></a>1608     <em class="brace">}</em>
<a id="L1609" name="L1609"></a>1609     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1610" name="L1610"></a>1610       <strong class="reserved">if</strong> (p_addToPath.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("/")) <em class="brace">{</em>
<a id="L1611" name="L1611"></a>1611         m_path = m_path.<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>(p_addToPath);
<a id="L1612" name="L1612"></a>1612       <em class="brace">}</em>
<a id="L1613" name="L1613"></a>1613       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1614" name="L1614"></a>1614         m_path = m_path.<a href="../D/13207.html" title="Multiple defined in 11 places.">concat</a>("/" + p_addToPath);
<a id="L1615" name="L1615"></a>1615       <em class="brace">}</em>
<a id="L1616" name="L1616"></a>1616     <em class="brace">}</em>
<a id="L1617" name="L1617"></a>1617   <em class="brace">}</em>
<a id="L1618" name="L1618"></a>1618 
<div class="comment">
   Set the query string for this URI. A non-null value is valid only
   if this is an URI conforming to the generic URI syntax and
   the path value is not null.
   @param p_queryString the query string for this URI
   @exception MalformedURIException if p_queryString is not null and this
                                    URI does not conform to the generic
                                    URI syntax or if the path is null</div>
<a id="L1630" name="L1630"></a>1630   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27987.html" title="Multiple referred from 3 places.">setQueryString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_queryString) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1631" name="L1631"></a>1631     <strong class="reserved">if</strong> (p_queryString == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1632" name="L1632"></a>1632       m_queryString = <strong class="reserved">null</strong>;
<a id="L1633" name="L1633"></a>1633     <em class="brace">}</em>
<a id="L1634" name="L1634"></a>1634     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/25627.html" title="Multiple defined in 3 places.">isGenericURI</a>()) <em class="brace">{</em>
<a id="L1635" name="L1635"></a>1635       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1636" name="L1636"></a>1636               "Query string can only be set for a generic URI!");
<a id="L1637" name="L1637"></a>1637     <em class="brace">}</em>
<a id="L1638" name="L1638"></a>1638     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/21434.html" title="Multiple defined in 38 places.">getPath</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1639" name="L1639"></a>1639       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1640" name="L1640"></a>1640               "Query string cannot be set when path is null!");
<a id="L1641" name="L1641"></a>1641     <em class="brace">}</em>
<a id="L1642" name="L1642"></a>1642     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/26388.html" title="Multiple defined in 3 places.">isURIString</a>(p_queryString)) <em class="brace">{</em>
<a id="L1643" name="L1643"></a>1643       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1644" name="L1644"></a>1644               "Query string contains invalid character!");
<a id="L1645" name="L1645"></a>1645     <em class="brace">}</em>
<a id="L1646" name="L1646"></a>1646     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1647" name="L1647"></a>1647       m_queryString = p_queryString;
<a id="L1648" name="L1648"></a>1648     <em class="brace">}</em>
<a id="L1649" name="L1649"></a>1649   <em class="brace">}</em>
<a id="L1650" name="L1650"></a>1650 
<div class="comment">
   Set the fragment for this URI. A non-null value is valid only
   if this is a URI conforming to the generic URI syntax and
   the path value is not null.
   @param p_fragment the fragment for this URI
   @exception MalformedURIException if p_fragment is not null and this
                                    URI does not conform to the generic
                                    URI syntax or if the path is null</div>
<a id="L1662" name="L1662"></a>1662   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27450.html" title="Multiple referred from 4 places.">setFragment</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_fragment) <strong class="reserved">throws</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a> <em class="brace">{</em>
<a id="L1663" name="L1663"></a>1663     <strong class="reserved">if</strong> (p_fragment == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1664" name="L1664"></a>1664       m_fragment = <strong class="reserved">null</strong>;
<a id="L1665" name="L1665"></a>1665     <em class="brace">}</em>
<a id="L1666" name="L1666"></a>1666     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/25627.html" title="Multiple defined in 3 places.">isGenericURI</a>()) <em class="brace">{</em>
<a id="L1667" name="L1667"></a>1667       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1668" name="L1668"></a>1668          "Fragment can only be set for a generic URI!");
<a id="L1669" name="L1669"></a>1669     <em class="brace">}</em>
<a id="L1670" name="L1670"></a>1670     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/21434.html" title="Multiple defined in 38 places.">getPath</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1671" name="L1671"></a>1671       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1672" name="L1672"></a>1672               "Fragment cannot be set when path is null!");
<a id="L1673" name="L1673"></a>1673     <em class="brace">}</em>
<a id="L1674" name="L1674"></a>1674     <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/26388.html" title="Multiple defined in 3 places.">isURIString</a>(p_fragment)) <em class="brace">{</em>
<a id="L1675" name="L1675"></a>1675       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/5390.html" title="Multiple defined in 3 places.">MalformedURIException</a>(
<a id="L1676" name="L1676"></a>1676               "Fragment contains invalid character!");
<a id="L1677" name="L1677"></a>1677     <em class="brace">}</em>
<a id="L1678" name="L1678"></a>1678     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679       m_fragment = p_fragment;
<a id="L1680" name="L1680"></a>1680     <em class="brace">}</em>
<a id="L1681" name="L1681"></a>1681   <em class="brace">}</em>
<a id="L1682" name="L1682"></a>1682 
<div class="comment">
   Determines if the passed-in Object is equivalent to this URI.
   @param p_test the Object to test for equality.
   @return true if p_test is a URI with all values equal to this
           URI, false otherwise</div>
<a id="L1691" name="L1691"></a>1691   @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1692" name="L1692"></a>1692   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> p_test) <em class="brace">{</em>
<a id="L1693" name="L1693"></a>1693     <strong class="reserved">if</strong> (p_test <strong class="reserved">instanceof</strong> <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>) <em class="brace">{</em>
<a id="L1694" name="L1694"></a>1694       <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> testURI = (<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>) p_test;
<a id="L1695" name="L1695"></a>1695       <strong class="reserved">if</strong> (((m_scheme == <strong class="reserved">null</strong> &amp;&amp; testURI.m_scheme == <strong class="reserved">null</strong>) ||
<a id="L1696" name="L1696"></a>1696            (m_scheme != <strong class="reserved">null</strong> &amp;&amp; testURI.m_scheme != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1697" name="L1697"></a>1697             m_scheme.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_scheme))) &amp;&amp;
<a id="L1698" name="L1698"></a>1698           ((m_userinfo == <strong class="reserved">null</strong> &amp;&amp; testURI.m_userinfo == <strong class="reserved">null</strong>) ||
<a id="L1699" name="L1699"></a>1699            (m_userinfo != <strong class="reserved">null</strong> &amp;&amp; testURI.m_userinfo != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1700" name="L1700"></a>1700             m_userinfo.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_userinfo))) &amp;&amp;
<a id="L1701" name="L1701"></a>1701           ((m_host == <strong class="reserved">null</strong> &amp;&amp; testURI.m_host == <strong class="reserved">null</strong>) ||
<a id="L1702" name="L1702"></a>1702            (m_host != <strong class="reserved">null</strong> &amp;&amp; testURI.m_host != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1703" name="L1703"></a>1703             m_host.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_host))) &amp;&amp;
<a id="L1704" name="L1704"></a>1704             m_port == testURI.m_port &amp;&amp;
<a id="L1705" name="L1705"></a>1705           ((m_path == <strong class="reserved">null</strong> &amp;&amp; testURI.m_path == <strong class="reserved">null</strong>) ||
<a id="L1706" name="L1706"></a>1706            (m_path != <strong class="reserved">null</strong> &amp;&amp; testURI.m_path != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1707" name="L1707"></a>1707             m_path.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_path))) &amp;&amp;
<a id="L1708" name="L1708"></a>1708           ((m_queryString == <strong class="reserved">null</strong> &amp;&amp; testURI.m_queryString == <strong class="reserved">null</strong>) ||
<a id="L1709" name="L1709"></a>1709            (m_queryString != <strong class="reserved">null</strong> &amp;&amp; testURI.m_queryString != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1710" name="L1710"></a>1710             m_queryString.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_queryString))) &amp;&amp;
<a id="L1711" name="L1711"></a>1711           ((m_fragment == <strong class="reserved">null</strong> &amp;&amp; testURI.m_fragment == <strong class="reserved">null</strong>) ||
<a id="L1712" name="L1712"></a>1712            (m_fragment != <strong class="reserved">null</strong> &amp;&amp; testURI.m_fragment != <strong class="reserved">null</strong> &amp;&amp;
<a id="L1713" name="L1713"></a>1713             m_fragment.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(testURI.m_fragment)))) <em class="brace">{</em>
<a id="L1714" name="L1714"></a>1714         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1715" name="L1715"></a>1715       <em class="brace">}</em>
<a id="L1716" name="L1716"></a>1716     <em class="brace">}</em>
<a id="L1717" name="L1717"></a>1717     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1718" name="L1718"></a>1718   <em class="brace">}</em>
<a id="L1719" name="L1719"></a>1719 
<a id="L1720" name="L1720"></a>1720     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1721" name="L1721"></a>1721     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>() <em class="brace">{</em>
<a id="L1722" name="L1722"></a>1722         <strong class="reserved">int</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 5;
<a id="L1723" name="L1723"></a>1723         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_scheme);
<a id="L1724" name="L1724"></a>1724         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_userinfo);
<a id="L1725" name="L1725"></a>1725         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_host);
<a id="L1726" name="L1726"></a>1726         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <strong class="reserved">this</strong>.m_port;
<a id="L1727" name="L1727"></a>1727         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_path);
<a id="L1728" name="L1728"></a>1728         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_queryString);
<a id="L1729" name="L1729"></a>1729         <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> = 47 * <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a> + <a href="../S/859.html#L38" title="Defined at 38 in src/java/util/Objects.java.">Objects</a>.<a href="../D/24220.html" title="Multiple defined in 552 places.">hashCode</a>(<strong class="reserved">this</strong>.m_fragment);
<a id="L1730" name="L1730"></a>1730         <strong class="reserved">return</strong> <a href="../D/24219.html" title="Multiple defined in 17 places.">hash</a>;
<a id="L1731" name="L1731"></a>1731     <em class="brace">}</em>
<a id="L1732" name="L1732"></a>1732 
<div class="comment">
   Get the URI as a string specification. See RFC 2396 Section 5.2.
   @return the URI string specification</div>
<a id="L1738" name="L1738"></a>1738   @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L1739" name="L1739"></a>1739   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1740" name="L1740"></a>1740     <strong class="reserved">final</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> uriSpecString = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>();
<a id="L1741" name="L1741"></a>1741 
<a id="L1742" name="L1742"></a>1742     <strong class="reserved">if</strong> (m_scheme != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1743" name="L1743"></a>1743       uriSpecString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(m_scheme);
<a id="L1744" name="L1744"></a>1744       uriSpecString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(':');
<a id="L1745" name="L1745"></a>1745     <em class="brace">}</em>
<a id="L1746" name="L1746"></a>1746     uriSpecString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/22275.html" title="Multiple defined in 4 places.">getSchemeSpecificPart</a>());
<a id="L1747" name="L1747"></a>1747     <strong class="reserved">return</strong> uriSpecString.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1748" name="L1748"></a>1748   <em class="brace">}</em>
<a id="L1749" name="L1749"></a>1749 
<div class="comment">
   Get the indicator as to whether this URI uses the "generic URI"
   syntax.
   @return true if this URI uses the "generic URI" syntax, false
           otherwise</div>
<a id="L1757" name="L1757"></a>1757   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21508.html" title="Multiple referred from 6 places.">isGenericURI</a>() <em class="brace">{</em>
<a id="L1758" name="L1758"></a>1758     <em class="comment">// presence of the host (whether valid or empty) means</em>
<a id="L1759" name="L1759"></a>1759     <em class="comment">// double-slashes which means generic uri</em>
<a id="L1760" name="L1760"></a>1760     <strong class="reserved">return</strong> (m_host != <strong class="reserved">null</strong>);
<a id="L1761" name="L1761"></a>1761   <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762 
<div class="comment">
    Returns whether this URI represents an absolute URI.
    @return true if this URI represents an absolute URI, false
            otherwise</div>
<a id="L1769" name="L1769"></a>1769   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21124.html" title="Multiple referred from 10 places.">isAbsoluteURI</a>() <em class="brace">{</em>
<a id="L1770" name="L1770"></a>1770       <em class="comment">// presence of the scheme means absolute uri</em>
<a id="L1771" name="L1771"></a>1771       <strong class="reserved">return</strong> (m_scheme != <strong class="reserved">null</strong>);
<a id="L1772" name="L1772"></a>1772   <em class="brace">}</em>
<a id="L1773" name="L1773"></a>1773 
<div class="comment">
   Determine whether a scheme conforms to the rules for a scheme name.
   A scheme is conformant if it starts with an alphanumeric, and
   contains only alphanumerics, '+','-' and '.'.
   @return true if the scheme is conformant, false otherwise</div>
<a id="L1781" name="L1781"></a>1781   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21282.html" title="Multiple referred from 3 places.">isConformantSchemeName</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_scheme) <em class="brace">{</em>
<a id="L1782" name="L1782"></a>1782     <strong class="reserved">if</strong> (p_scheme == <strong class="reserved">null</strong> || p_scheme.<a href="../D/35698.html" title="Multiple defined in 9 places.">trim</a>().<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0) <em class="brace">{</em>
<a id="L1783" name="L1783"></a>1783       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1784" name="L1784"></a>1784     <em class="brace">}</em>
<a id="L1785" name="L1785"></a>1785 
<a id="L1786" name="L1786"></a>1786     <strong class="reserved">if</strong> (!<a href="../D/25178.html" title="Multiple defined in 5 places.">isAlpha</a>(p_scheme.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0))) <em class="brace">{</em>
<a id="L1787" name="L1787"></a>1787       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1788" name="L1788"></a>1788     <em class="brace">}</em>
<a id="L1789" name="L1789"></a>1789 
<a id="L1790" name="L1790"></a>1790     <strong class="reserved">char</strong> testChar;
<a id="L1791" name="L1791"></a>1791     <strong class="reserved">int</strong> schemeLength = p_scheme.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1792" name="L1792"></a>1792     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 1; i &lt; schemeLength; ++i) <em class="brace">{</em>
<a id="L1793" name="L1793"></a>1793       testChar = p_scheme.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1794" name="L1794"></a>1794       <strong class="reserved">if</strong> (!<a href="../S/5323.html#L2152" title="Defined at 2152 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isSchemeCharacter</a>(testChar)) <em class="brace">{</em>
<a id="L1795" name="L1795"></a>1795         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1796" name="L1796"></a>1796       <em class="brace">}</em>
<a id="L1797" name="L1797"></a>1797     <em class="brace">}</em>
<a id="L1798" name="L1798"></a>1798 
<a id="L1799" name="L1799"></a>1799     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1800" name="L1800"></a>1800   <em class="brace">}</em>
<a id="L1801" name="L1801"></a>1801 
<div class="comment">
   Determine whether a string is syntactically capable of representing
   a valid IPv4 address, IPv6 reference or the domain name of a network host.
   A valid IPv4 address consists of four decimal digit groups separated by a
   '.'. Each group must consist of one to three digits. See RFC 2732 Section 3,
   and RFC 2373 Section 2.2, for the definition of IPv6 references. A hostname
   consists of domain labels (each of which must begin and end with an alphanumeric
   but may contain '-') separated &amp; by a '.'. See RFC 2396 Section 3.2.2.
   @return true if the string is a syntactically valid IPv4 address,
   IPv6 reference or hostname</div>
<a id="L1814" name="L1814"></a>1814   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22231.html" title="Multiple referred from 4 places.">isWellFormedAddress</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>) <em class="brace">{</em>
<a id="L1815" name="L1815"></a>1815     <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1816" name="L1816"></a>1816       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1817" name="L1817"></a>1817     <em class="brace">}</em>
<a id="L1818" name="L1818"></a>1818 
<a id="L1819" name="L1819"></a>1819     <strong class="reserved">int</strong> addrLength = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1820" name="L1820"></a>1820     <strong class="reserved">if</strong> (addrLength == 0) <em class="brace">{</em>
<a id="L1821" name="L1821"></a>1821       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1822" name="L1822"></a>1822     <em class="brace">}</em>
<a id="L1823" name="L1823"></a>1823 
<a id="L1824" name="L1824"></a>1824     <em class="comment">// Check if the host is a valid IPv6reference.</em>
<a id="L1825" name="L1825"></a>1825     <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("[")) <em class="brace">{</em>
<a id="L1826" name="L1826"></a>1826       <strong class="reserved">return</strong> <a href="../S/5323.html#L1965" title="Defined at 1965 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isWellFormedIPv6Reference</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>);
<a id="L1827" name="L1827"></a>1827     <em class="brace">}</em>
<a id="L1828" name="L1828"></a>1828 
<a id="L1829" name="L1829"></a>1829     <em class="comment">// Cannot start with a '.', '-', or end with a '-'.</em>
<a id="L1830" name="L1830"></a>1830     <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>(".") ||
<a id="L1831" name="L1831"></a>1831         <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("-") ||
<a id="L1832" name="L1832"></a>1832         <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>("-")) <em class="brace">{</em>
<a id="L1833" name="L1833"></a>1833       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1834" name="L1834"></a>1834     <em class="brace">}</em>
<a id="L1835" name="L1835"></a>1835 
<a id="L1836" name="L1836"></a>1836     <em class="comment">// rightmost domain label starting with digit indicates IP address</em>
<a id="L1837" name="L1837"></a>1837     <em class="comment">// since top level domain label can only start with an alpha</em>
<a id="L1838" name="L1838"></a>1838     <em class="comment">// see RFC 2396 Section 3.2.2</em>
<a id="L1839" name="L1839"></a>1839     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('.');
<a id="L1840" name="L1840"></a>1840     <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>(".")) <em class="brace">{</em>
<a id="L1841" name="L1841"></a>1841       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>).<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('.');
<a id="L1842" name="L1842"></a>1842     <em class="brace">}</em>
<a id="L1843" name="L1843"></a>1843 
<a id="L1844" name="L1844"></a>1844     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1 &lt; addrLength &amp;&amp; <a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1))) <em class="brace">{</em>
<a id="L1845" name="L1845"></a>1845       <strong class="reserved">return</strong> <a href="../S/5323.html#L1898" title="Defined at 1898 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isWellFormedIPv4Address</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>);
<a id="L1846" name="L1846"></a>1846     <em class="brace">}</em>
<a id="L1847" name="L1847"></a>1847     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1848" name="L1848"></a>1848       <em class="comment">// hostname      = *( domainlabel "." ) toplabel [ "." ]</em>
<a id="L1849" name="L1849"></a>1849       <em class="comment">// domainlabel   = alphanum | alphanum *( alphanum | "-" ) alphanum</em>
<a id="L1850" name="L1850"></a>1850       <em class="comment">// toplabel      = alpha | alpha *( alphanum | "-" ) alphanum</em>
<a id="L1851" name="L1851"></a>1851 
<a id="L1852" name="L1852"></a>1852       <em class="comment">// RFC 2396 states that hostnames take the form described in</em>
<a id="L1853" name="L1853"></a>1853       <em class="comment">// RFC 1034 (Section 3) and RFC 1123 (Section 2.1). According</em>
<a id="L1854" name="L1854"></a>1854       <em class="comment">// to RFC 1034, hostnames are limited to 255 characters.</em>
<a id="L1855" name="L1855"></a>1855       <strong class="reserved">if</strong> (addrLength &gt; 255) <em class="brace">{</em>
<a id="L1856" name="L1856"></a>1856         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1857" name="L1857"></a>1857       <em class="brace">}</em>
<a id="L1858" name="L1858"></a>1858 
<a id="L1859" name="L1859"></a>1859       <em class="comment">// domain labels can contain alphanumerics and '-"</em>
<a id="L1860" name="L1860"></a>1860       <em class="comment">// but must start and end with an alphanumeric</em>
<a id="L1861" name="L1861"></a>1861       <strong class="reserved">char</strong> testChar;
<a id="L1862" name="L1862"></a>1862       <strong class="reserved">int</strong> labelCharCount = 0;
<a id="L1863" name="L1863"></a>1863 
<a id="L1864" name="L1864"></a>1864       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; addrLength; i++) <em class="brace">{</em>
<a id="L1865" name="L1865"></a>1865         testChar = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1866" name="L1866"></a>1866         <strong class="reserved">if</strong> (testChar == '.') <em class="brace">{</em>
<a id="L1867" name="L1867"></a>1867           <strong class="reserved">if</strong> (!<a href="../D/25181.html" title="Multiple defined in 3 places.">isAlphanum</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i-1))) <em class="brace">{</em>
<a id="L1868" name="L1868"></a>1868             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1869" name="L1869"></a>1869           <em class="brace">}</em>
<a id="L1870" name="L1870"></a>1870           <strong class="reserved">if</strong> (i+1 &lt; addrLength &amp;&amp; !<a href="../D/25181.html" title="Multiple defined in 3 places.">isAlphanum</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+1))) <em class="brace">{</em>
<a id="L1871" name="L1871"></a>1871             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1872" name="L1872"></a>1872           <em class="brace">}</em>
<a id="L1873" name="L1873"></a>1873           labelCharCount = 0;
<a id="L1874" name="L1874"></a>1874         <em class="brace">}</em>
<a id="L1875" name="L1875"></a>1875         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/25181.html" title="Multiple defined in 3 places.">isAlphanum</a>(testChar) &amp;&amp; testChar != '-') <em class="brace">{</em>
<a id="L1876" name="L1876"></a>1876           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1877" name="L1877"></a>1877         <em class="brace">}</em>
<a id="L1878" name="L1878"></a>1878         <em class="comment">// RFC 1034: Labels must be 63 characters or less.</em>
<a id="L1879" name="L1879"></a>1879         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (++labelCharCount &gt; 63) <em class="brace">{</em>
<a id="L1880" name="L1880"></a>1880           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1881" name="L1881"></a>1881         <em class="brace">}</em>
<a id="L1882" name="L1882"></a>1882       <em class="brace">}</em>
<a id="L1883" name="L1883"></a>1883     <em class="brace">}</em>
<a id="L1884" name="L1884"></a>1884     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1885" name="L1885"></a>1885   <em class="brace">}</em>
<a id="L1886" name="L1886"></a>1886 
<div class="comment">
    <p>Determines whether a string is an IPv4 address as defined by
    RFC 2373, and under the further constraint that it must be a 32-bit
    address. Though not expressed in the grammar, in order to satisfy
    the 32-bit address constraint, each segment of the address cannot
    be greater than 255 (8 bits of information).</p>
    <p><code>IPv4address = 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT</code></p>
    @return true if the string is a syntactically valid IPv4 address</div>
<a id="L1898" name="L1898"></a>1898   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22232.html" title="Multiple referred from 3 places.">isWellFormedIPv4Address</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>) <em class="brace">{</em>
<a id="L1899" name="L1899"></a>1899 
<a id="L1900" name="L1900"></a>1900       <strong class="reserved">int</strong> addrLength = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1901" name="L1901"></a>1901       <strong class="reserved">char</strong> testChar;
<a id="L1902" name="L1902"></a>1902       <strong class="reserved">int</strong> numDots = 0;
<a id="L1903" name="L1903"></a>1903       <strong class="reserved">int</strong> numDigits = 0;
<a id="L1904" name="L1904"></a>1904 
<a id="L1905" name="L1905"></a>1905       <em class="comment">// make sure that 1) we see only digits and dot separators, 2) that</em>
<a id="L1906" name="L1906"></a>1906       <em class="comment">// any dot separator is preceded and followed by a digit and</em>
<a id="L1907" name="L1907"></a>1907       <em class="comment">// 3) that we find 3 dots</em>
<a id="L1908" name="L1908"></a>1908       <em class="comment">//</em>
<a id="L1909" name="L1909"></a>1909       <em class="comment">// RFC 2732 amended RFC 2396 by replacing the definition</em>
<a id="L1910" name="L1910"></a>1910       <em class="comment">// of IPv4address with the one defined by RFC 2373. - mrglavas</em>
<a id="L1911" name="L1911"></a>1911       <em class="comment">//</em>
<a id="L1912" name="L1912"></a>1912       <em class="comment">// IPv4address = 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT</em>
<a id="L1913" name="L1913"></a>1913       <em class="comment">//</em>
<a id="L1914" name="L1914"></a>1914       <em class="comment">// One to three digits must be in each segment.</em>
<a id="L1915" name="L1915"></a>1915       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; addrLength; i++) <em class="brace">{</em>
<a id="L1916" name="L1916"></a>1916         testChar = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L1917" name="L1917"></a>1917         <strong class="reserved">if</strong> (testChar == '.') <em class="brace">{</em>
<a id="L1918" name="L1918"></a>1918           <strong class="reserved">if</strong> ((i &gt; 0 &amp;&amp; !<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i-1))) ||
<a id="L1919" name="L1919"></a>1919               (i+1 &lt; addrLength &amp;&amp; !<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+1)))) <em class="brace">{</em>
<a id="L1920" name="L1920"></a>1920             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1921" name="L1921"></a>1921           <em class="brace">}</em>
<a id="L1922" name="L1922"></a>1922           numDigits = 0;
<a id="L1923" name="L1923"></a>1923           <strong class="reserved">if</strong> (++numDots &gt; 3) <em class="brace">{</em>
<a id="L1924" name="L1924"></a>1924             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1925" name="L1925"></a>1925           <em class="brace">}</em>
<a id="L1926" name="L1926"></a>1926         <em class="brace">}</em>
<a id="L1927" name="L1927"></a>1927         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/25439.html" title="Multiple defined in 11 places.">isDigit</a>(testChar)) <em class="brace">{</em>
<a id="L1928" name="L1928"></a>1928           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1929" name="L1929"></a>1929         <em class="brace">}</em>
<a id="L1930" name="L1930"></a>1930         <em class="comment">// Check that that there are no more than three digits</em>
<a id="L1931" name="L1931"></a>1931         <em class="comment">// in this segment.</em>
<a id="L1932" name="L1932"></a>1932         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (++numDigits &gt; 3) <em class="brace">{</em>
<a id="L1933" name="L1933"></a>1933           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1934" name="L1934"></a>1934         <em class="brace">}</em>
<a id="L1935" name="L1935"></a>1935         <em class="comment">// Check that this segment is not greater than 255.</em>
<a id="L1936" name="L1936"></a>1936         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (numDigits == 3) <em class="brace">{</em>
<a id="L1937" name="L1937"></a>1937           <strong class="reserved">char</strong> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i-2);
<a id="L1938" name="L1938"></a>1938           <strong class="reserved">char</strong> second = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i-1);
<a id="L1939" name="L1939"></a>1939           <strong class="reserved">if</strong> (!(<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> &lt; '2' ||
<a id="L1940" name="L1940"></a>1940                (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> == '2' &amp;&amp;
<a id="L1941" name="L1941"></a>1941                (second &lt; '5' ||
<a id="L1942" name="L1942"></a>1942                (second == '5' &amp;&amp; testChar &lt;= '5'))))) <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1944" name="L1944"></a>1944           <em class="brace">}</em>
<a id="L1945" name="L1945"></a>1945         <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946       <em class="brace">}</em>
<a id="L1947" name="L1947"></a>1947       <strong class="reserved">return</strong> (numDots == 3);
<a id="L1948" name="L1948"></a>1948   <em class="brace">}</em>
<a id="L1949" name="L1949"></a>1949 
<div class="comment">
    <p>Determines whether a string is an IPv6 reference as defined
    by RFC 2732, where IPv6address is defined in RFC 2373. The
    IPv6 address is parsed according to Section 2.2 of RFC 2373,
    with the additional constraint that the address be composed of
    128 bits of information.</p>
    <p><code>IPv6reference = "[" IPv6address "]"</code></p>
    <p>Note: The BNF expressed in RFC 2373 Appendix B does not
    accurately describe section 2.2, and was in fact removed from
    RFC 3513, the successor of RFC 2373.</p>
    @return true if the string is a syntactically valid IPv6 reference</div>
<a id="L1965" name="L1965"></a>1965   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/5323.html#L1826" title="Referred from 1826 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isWellFormedIPv6Reference</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>) <em class="brace">{</em>
<a id="L1966" name="L1966"></a>1966 
<a id="L1967" name="L1967"></a>1967       <strong class="reserved">int</strong> addrLength = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1968" name="L1968"></a>1968       <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = 1;
<a id="L1969" name="L1969"></a>1969       <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = addrLength-1;
<a id="L1970" name="L1970"></a>1970 
<a id="L1971" name="L1971"></a>1971       <em class="comment">// Check if string is a potential match for IPv6reference.</em>
<a id="L1972" name="L1972"></a>1972       <strong class="reserved">if</strong> (!(addrLength &gt; 2 &amp;&amp; <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0) == '['
<a id="L1973" name="L1973"></a>1973           &amp;&amp; <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) == ']')) <em class="brace">{</em>
<a id="L1974" name="L1974"></a>1974           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1975" name="L1975"></a>1975       <em class="brace">}</em>
<a id="L1976" name="L1976"></a>1976 
<a id="L1977" name="L1977"></a>1977       <em class="comment">// Counter for the number of 16-bit sections read in the address.</em>
<a id="L1978" name="L1978"></a>1978       <strong class="reserved">int</strong> [] counter = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L1979" name="L1979"></a>1979 
<a id="L1980" name="L1980"></a>1980       <em class="comment">// Scan hex sequence before possible '::' or IPv4 address.</em>
<a id="L1981" name="L1981"></a>1981       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/5323.html#L2041" title="Defined at 2041 in src/com/sun/org/apache/xerces/internal/util/URI.java.">scanHexSequence</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, counter);
<a id="L1982" name="L1982"></a>1982       <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == -1) <em class="brace">{</em>
<a id="L1983" name="L1983"></a>1983           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1984" name="L1984"></a>1984       <em class="brace">}</em>
<a id="L1985" name="L1985"></a>1985       <em class="comment">// Address must contain 128-bits of information.</em>
<a id="L1986" name="L1986"></a>1986       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1987" name="L1987"></a>1987           <strong class="reserved">return</strong> (counter[0] == 8);
<a id="L1988" name="L1988"></a>1988       <em class="brace">}</em>
<a id="L1989" name="L1989"></a>1989 
<a id="L1990" name="L1990"></a>1990       <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1 &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> &amp;&amp; <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) == ':') <em class="brace">{</em>
<a id="L1991" name="L1991"></a>1991           <strong class="reserved">if</strong> (<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) == ':') <em class="brace">{</em>
<a id="L1992" name="L1992"></a>1992               <em class="comment">// '::' represents at least one 16-bit group of zeros.</em>
<a id="L1993" name="L1993"></a>1993               <strong class="reserved">if</strong> (++counter[0] &gt; 8) <em class="brace">{</em>
<a id="L1994" name="L1994"></a>1994                   <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1995" name="L1995"></a>1995               <em class="brace">}</em>
<a id="L1996" name="L1996"></a>1996               <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> += 2;
<a id="L1997" name="L1997"></a>1997               <em class="comment">// Trailing zeros will fill out the rest of the address.</em>
<a id="L1998" name="L1998"></a>1998               <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L1999" name="L1999"></a>1999                  <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2000" name="L2000"></a>2000               <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001           <em class="brace">}</em>
<a id="L2002" name="L2002"></a>2002           <em class="comment">// If the second character wasn't ':', in order to be valid,</em>
<a id="L2003" name="L2003"></a>2003           <em class="comment">// the remainder of the string must match IPv4Address,</em>
<a id="L2004" name="L2004"></a>2004           <em class="comment">// and we must have read exactly 6 16-bit groups.</em>
<a id="L2005" name="L2005"></a>2005           <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2006" name="L2006"></a>2006               <strong class="reserved">return</strong> (counter[0] == 6) &amp;&amp;
<a id="L2007" name="L2007"></a>2007                   <a href="../S/5323.html#L1898" title="Defined at 1898 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isWellFormedIPv4Address</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>));
<a id="L2008" name="L2008"></a>2008           <em class="brace">}</em>
<a id="L2009" name="L2009"></a>2009       <em class="brace">}</em>
<a id="L2010" name="L2010"></a>2010       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2011" name="L2011"></a>2011           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2012" name="L2012"></a>2012       <em class="brace">}</em>
<a id="L2013" name="L2013"></a>2013 
<a id="L2014" name="L2014"></a>2014       <em class="comment">// 3. Scan hex sequence after '::'.</em>
<a id="L2015" name="L2015"></a>2015       <strong class="reserved">int</strong> prevCount = counter[0];
<a id="L2016" name="L2016"></a>2016       <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/5323.html#L2041" title="Defined at 2041 in src/com/sun/org/apache/xerces/internal/util/URI.java.">scanHexSequence</a>(<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, counter);
<a id="L2017" name="L2017"></a>2017 
<a id="L2018" name="L2018"></a>2018       <em class="comment">// We've either reached the end of the string, the address ends in</em>
<a id="L2019" name="L2019"></a>2019       <em class="comment">// an IPv4 address, or it is invalid. scanHexSequence has already</em>
<a id="L2020" name="L2020"></a>2020       <em class="comment">// made sure that we have the right number of bits.</em>
<a id="L2021" name="L2021"></a>2021       <strong class="reserved">return</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) ||
<a id="L2022" name="L2022"></a>2022           (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != -1 &amp;&amp; <a href="../S/5323.html#L1898" title="Defined at 1898 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isWellFormedIPv4Address</a>(
<a id="L2023" name="L2023"></a>2023           <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>((counter[0] &gt; prevCount) ? <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1 : <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>)));
<a id="L2024" name="L2024"></a>2024   <em class="brace">}</em>
<a id="L2025" name="L2025"></a>2025 
<div class="comment">
    Helper method for isWellFormedIPv6Reference which scans the
    hex sequences of an IPv6 address. It returns the index of the
    next character to scan in the address, or -1 if the string
    cannot match a valid IPv6 address.
    @param address the string to be scanned
    @param index the beginning index (inclusive)
    @param end the ending index (exclusive)
    @param counter a counter for the number of 16-bit sections read
    in the address
    @return the index of the next character to scan, or -1 if the
    string cannot match a valid IPv6 address</div>
<a id="L2041" name="L2041"></a>2041   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/26640.html" title="Multiple referred from 2 places.">scanHexSequence</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>, <strong class="reserved">int</strong> [] counter) <em class="brace">{</em>
<a id="L2042" name="L2042"></a>2042 
<a id="L2043" name="L2043"></a>2043       <strong class="reserved">char</strong> testChar;
<a id="L2044" name="L2044"></a>2044       <strong class="reserved">int</strong> numDigits = 0;
<a id="L2045" name="L2045"></a>2045       <strong class="reserved">int</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2046" name="L2046"></a>2046 
<a id="L2047" name="L2047"></a>2047       <em class="comment">// Trying to match the following productions:</em>
<a id="L2048" name="L2048"></a>2048       <em class="comment">// hexseq = hex4 *( ":" hex4)</em>
<a id="L2049" name="L2049"></a>2049       <em class="comment">// hex4   = 1*4HEXDIG</em>
<a id="L2050" name="L2050"></a>2050       <strong class="reserved">for</strong> (; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>; ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L2051" name="L2051"></a>2051         testChar = <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L2052" name="L2052"></a>2052         <strong class="reserved">if</strong> (testChar == ':') <em class="brace">{</em>
<a id="L2053" name="L2053"></a>2053             <em class="comment">// IPv6 addresses are 128-bit, so there can be at most eight sections.</em>
<a id="L2054" name="L2054"></a>2054             <strong class="reserved">if</strong> (numDigits &gt; 0 &amp;&amp; ++counter[0] &gt; 8) <em class="brace">{</em>
<a id="L2055" name="L2055"></a>2055                 <strong class="reserved">return</strong> -1;
<a id="L2056" name="L2056"></a>2056             <em class="brace">}</em>
<a id="L2057" name="L2057"></a>2057             <em class="comment">// This could be '::'.</em>
<a id="L2058" name="L2058"></a>2058             <strong class="reserved">if</strong> (numDigits == 0 || ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1 &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) &amp;&amp; <a href="../D/11204.html" title="Multiple defined in 16 places.">address</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>+1) == ':')) <em class="brace">{</em>
<a id="L2059" name="L2059"></a>2059                 <strong class="reserved">return</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L2060" name="L2060"></a>2060             <em class="brace">}</em>
<a id="L2061" name="L2061"></a>2061             numDigits = 0;
<a id="L2062" name="L2062"></a>2062         <em class="brace">}</em>
<a id="L2063" name="L2063"></a>2063         <em class="comment">// This might be invalid or an IPv4address. If it's potentially an IPv4address,</em>
<a id="L2064" name="L2064"></a>2064         <em class="comment">// backup to just after the last valid character that matches hexseq.</em>
<a id="L2065" name="L2065"></a>2065         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(testChar)) <em class="brace">{</em>
<a id="L2066" name="L2066"></a>2066             <strong class="reserved">if</strong> (testChar == '.' &amp;&amp; numDigits &lt; 4 &amp;&amp; numDigits &gt; 0 &amp;&amp; counter[0] &lt;= 6) <em class="brace">{</em>
<a id="L2067" name="L2067"></a>2067                 <strong class="reserved">int</strong> back = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> - numDigits - 1;
<a id="L2068" name="L2068"></a>2068                 <strong class="reserved">return</strong> (back &gt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) ? back : (back+1);
<a id="L2069" name="L2069"></a>2069             <em class="brace">}</em>
<a id="L2070" name="L2070"></a>2070             <strong class="reserved">return</strong> -1;
<a id="L2071" name="L2071"></a>2071         <em class="brace">}</em>
<a id="L2072" name="L2072"></a>2072         <em class="comment">// There can be at most 4 hex digits per group.</em>
<a id="L2073" name="L2073"></a>2073         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (++numDigits &gt; 4) <em class="brace">{</em>
<a id="L2074" name="L2074"></a>2074             <strong class="reserved">return</strong> -1;
<a id="L2075" name="L2075"></a>2075         <em class="brace">}</em>
<a id="L2076" name="L2076"></a>2076       <em class="brace">}</em>
<a id="L2077" name="L2077"></a>2077       <strong class="reserved">return</strong> (numDigits &gt; 0 &amp;&amp; ++counter[0] &lt;= 8) ? <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> : -1;
<a id="L2078" name="L2078"></a>2078   <em class="brace">}</em>
<a id="L2079" name="L2079"></a>2079 
<a id="L2080" name="L2080"></a>2080 
<div class="comment">
   Determine whether a char is a digit.
   @return true if the char is betweeen '0' and '9', false otherwise</div>
<a id="L2086" name="L2086"></a>2086   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21358.html" title="Multiple referred from 79 places.">isDigit</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2087" name="L2087"></a>2087     <strong class="reserved">return</strong> p_char &gt;= '0' &amp;&amp; p_char &lt;= '9';
<a id="L2088" name="L2088"></a>2088   <em class="brace">}</em>
<a id="L2089" name="L2089"></a>2089 
<div class="comment">
   Determine whether a character is a hexadecimal character.
   @return true if the char is betweeen '0' and '9', 'a' and 'f'
           or 'A' and 'F', false otherwise</div>
<a id="L2096" name="L2096"></a>2096   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21525.html" title="Multiple referred from 37 places.">isHex</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2097" name="L2097"></a>2097     <strong class="reserved">return</strong> (p_char &lt;= 'f' &amp;&amp; (fgLookupTable[p_char] &amp; ASCII_HEX_CHARACTERS) != 0);
<a id="L2098" name="L2098"></a>2098   <em class="brace">}</em>
<a id="L2099" name="L2099"></a>2099 
<div class="comment">
   Determine whether a char is an alphabetic character: a-z or A-Z
   @return true if the char is alphabetic, false otherwise</div>
<a id="L2105" name="L2105"></a>2105   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21153.html" title="Multiple referred from 7 places.">isAlpha</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2106" name="L2106"></a>2106       <strong class="reserved">return</strong> ((p_char &gt;= 'a' &amp;&amp; p_char &lt;= 'z') || (p_char &gt;= 'A' &amp;&amp; p_char &lt;= 'Z' ));
<a id="L2107" name="L2107"></a>2107   <em class="brace">}</em>
<a id="L2108" name="L2108"></a>2108 
<div class="comment">
   Determine whether a char is an alphanumeric: 0-9, a-z or A-Z
   @return true if the char is alphanumeric, false otherwise</div>
<a id="L2114" name="L2114"></a>2114   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21156.html" title="Multiple referred from 13 places.">isAlphanum</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2115" name="L2115"></a>2115      <strong class="reserved">return</strong> (p_char &lt;= 'z' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_ALPHA_NUMERIC) != 0);
<a id="L2116" name="L2116"></a>2116   <em class="brace">}</em>
<a id="L2117" name="L2117"></a>2117 
<div class="comment">
   Determine whether a character is a reserved character:
   ';', '/', '?', ':', '@', '&amp;', '=', '+', '$', ',', '[', or ']'
   @return true if the string contains any reserved characters</div>
<a id="L2124" name="L2124"></a>2124   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21962.html" title="Multiple referred from 8 places.">isReservedCharacter</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2125" name="L2125"></a>2125      <strong class="reserved">return</strong> (p_char &lt;= ']' &amp;&amp; (fgLookupTable[p_char] &amp; RESERVED_CHARACTERS) != 0);
<a id="L2126" name="L2126"></a>2126   <em class="brace">}</em>
<a id="L2127" name="L2127"></a>2127 
<div class="comment">
   Determine whether a char is an unreserved character.
   @return true if the char is unreserved, false otherwise</div>
<a id="L2133" name="L2133"></a>2133   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22149.html" title="Multiple referred from 10 places.">isUnreservedCharacter</a>(<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2134" name="L2134"></a>2134      <strong class="reserved">return</strong> (p_char &lt;= '~' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_UNRESERVED_MASK) != 0);
<a id="L2135" name="L2135"></a>2135   <em class="brace">}</em>
<a id="L2136" name="L2136"></a>2136 
<div class="comment">
   Determine whether a char is a URI character (reserved or
   unreserved, not including '%' for escaped octets).
   @return true if the char is a URI character, false otherwise</div>
<a id="L2143" name="L2143"></a>2143   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22132.html" title="Multiple referred from 4 places.">isURICharacter</a> (<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2144" name="L2144"></a>2144       <strong class="reserved">return</strong> (p_char &lt;= '~' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_URI_CHARACTER) != 0);
<a id="L2145" name="L2145"></a>2145   <em class="brace">}</em>
<a id="L2146" name="L2146"></a>2146 
<div class="comment">
   Determine whether a char is a scheme character.
   @return true if the char is a scheme character, false otherwise</div>
<a id="L2152" name="L2152"></a>2152   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/5323.html#L1794" title="Referred from 1794 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isSchemeCharacter</a> (<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2153" name="L2153"></a>2153       <strong class="reserved">return</strong> (p_char &lt;= 'z' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_SCHEME_CHARACTER) != 0);
<a id="L2154" name="L2154"></a>2154   <em class="brace">}</em>
<a id="L2155" name="L2155"></a>2155 
<div class="comment">
   Determine whether a char is a userinfo character.
   @return true if the char is a userinfo character, false otherwise</div>
<a id="L2161" name="L2161"></a>2161   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22161.html" title="Multiple referred from 2 places.">isUserinfoCharacter</a> (<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2162" name="L2162"></a>2162       <strong class="reserved">return</strong> (p_char &lt;= 'z' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_USERINFO_CHARACTER) != 0);
<a id="L2163" name="L2163"></a>2163   <em class="brace">}</em>
<a id="L2164" name="L2164"></a>2164 
<div class="comment">
   Determine whether a char is a path character.
   @return true if the char is a path character, false otherwise</div>
<a id="L2170" name="L2170"></a>2170   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21871.html" title="Multiple referred from 2 places.">isPathCharacter</a> (<strong class="reserved">char</strong> p_char) <em class="brace">{</em>
<a id="L2171" name="L2171"></a>2171       <strong class="reserved">return</strong> (p_char &lt;= '~' &amp;&amp; (fgLookupTable[p_char] &amp; MASK_PATH_CHARACTER) != 0);
<a id="L2172" name="L2172"></a>2172   <em class="brace">}</em>
<a id="L2173" name="L2173"></a>2173 
<a id="L2174" name="L2174"></a>2174 
<div class="comment">
   Determine whether a given string contains only URI characters (also
   called "uric" in RFC 2396). uric consist of all reserved
   characters, unreserved characters and escaped characters.
   @return true if the string is comprised of uric, false otherwise</div>
<a id="L2182" name="L2182"></a>2182   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22133.html" title="Multiple referred from 9 places.">isURIString</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p_uric) <em class="brace">{</em>
<a id="L2183" name="L2183"></a>2183     <strong class="reserved">if</strong> (p_uric == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2184" name="L2184"></a>2184       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2185" name="L2185"></a>2185     <em class="brace">}</em>
<a id="L2186" name="L2186"></a>2186     <strong class="reserved">int</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = p_uric.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L2187" name="L2187"></a>2187     <strong class="reserved">char</strong> testChar = '\0';
<a id="L2188" name="L2188"></a>2188     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>; i++) <em class="brace">{</em>
<a id="L2189" name="L2189"></a>2189       testChar = p_uric.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L2190" name="L2190"></a>2190       <strong class="reserved">if</strong> (testChar == '%') <em class="brace">{</em>
<a id="L2191" name="L2191"></a>2191         <strong class="reserved">if</strong> (i+2 &gt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> ||
<a id="L2192" name="L2192"></a>2192             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uric.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+1)) ||
<a id="L2193" name="L2193"></a>2193             !<a href="../D/25650.html" title="Multiple defined in 3 places.">isHex</a>(p_uric.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i+2))) <em class="brace">{</em>
<a id="L2194" name="L2194"></a>2194           <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2195" name="L2195"></a>2195         <em class="brace">}</em>
<a id="L2196" name="L2196"></a>2196         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2197" name="L2197"></a>2197           i += 2;
<a id="L2198" name="L2198"></a>2198           <strong class="reserved">continue</strong>;
<a id="L2199" name="L2199"></a>2199         <em class="brace">}</em>
<a id="L2200" name="L2200"></a>2200       <em class="brace">}</em>
<a id="L2201" name="L2201"></a>2201       <strong class="reserved">if</strong> (<a href="../S/5323.html#L2143" title="Defined at 2143 in src/com/sun/org/apache/xerces/internal/util/URI.java.">isURICharacter</a>(testChar)) <em class="brace">{</em>
<a id="L2202" name="L2202"></a>2202           <strong class="reserved">continue</strong>;
<a id="L2203" name="L2203"></a>2203       <em class="brace">}</em>
<a id="L2204" name="L2204"></a>2204       <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2205" name="L2205"></a>2205         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2206" name="L2206"></a>2206       <em class="brace">}</em>
<a id="L2207" name="L2207"></a>2207     <em class="brace">}</em>
<a id="L2208" name="L2208"></a>2208     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2209" name="L2209"></a>2209   <em class="brace">}</em>
<a id="L2210" name="L2210"></a>2210 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L462">[^]</a><a href="#L2182">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L187">[^]</a><a href="#L388">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L187" title="Defined at 187.">createIncrementalSAXSource</a></li>
<li><a href="#L204" title="Defined at 204.">createIncrementalSAXSource</a></li>
<li><a href="#L224" title="Defined at 224.">setContentHandler</a></li>
<li><a href="#L232" title="Defined at 232.">setLexicalHandler</a></li>
<li><a href="#L253" title="Defined at 253.">setDTDHandler</a></li>
<li><a href="#L267" title="Defined at 267.">startParse</a></li>
<li><a href="#L302" title="Defined at 302.">deliverMoreNodes</a></li>
<li><a href="#L325" title="Defined at 325.">parseSomeSetup</a></li>
<li><a href="#L366" title="Defined at 366.">parseSome</a></li>
<li><a href="#L388" title="Defined at 388.">_main</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: IncrementalSAXSource_Xerces.java,v 1.2.4.1 2005/09/15 08:15:08 suresh_emailid Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.dtm.<a href="../S/986.html#L2252" title="Defined at 2252 in src/java/util/regex/Pattern.java.">ref</a>;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.io.IOException;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.lang.reflect.Constructor;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.lang.reflect.Method;
<a id="L29" name="L29"></a>  29 
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.parsers.SAXParser;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLErrorResources;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.res.XMLMessages;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.utils.ObjectFactory;
<a id="L34" name="L34"></a>  34 
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> org.xml.sax.InputSource;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> org.xml.sax.XMLReader;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 
<div class="comment">
 <p>IncrementalSAXSource_Xerces takes advantage of the fact that Xerces1
  incremental mode is already a coroutine of sorts, and just wraps our
  IncrementalSAXSource API around it.</p>
  <p>Usage example: See main().</p>
  <p>Status: Passes simple main() unit-test. NEEDS JAVADOC.</p>
 * </div>
<a id="L48" name="L48"></a>  48 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/3770.html" title="Multiple referred from 3 places.">IncrementalSAXSource_Xerces</a>
<a id="L49" name="L49"></a>  49   <strong class="reserved">implements</strong> <a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a>
<a id="L50" name="L50"></a>  50 <em class="brace">{</em>
<a id="L51" name="L51"></a>  51   <em class="comment">//</em>
<a id="L52" name="L52"></a>  52   <em class="comment">// Reflection. To allow this to compile with both Xerces1 and Xerces2, which</em>
<a id="L53" name="L53"></a>  53   <em class="comment">// require very different methods and objects, we need to avoid static</em>
<a id="L54" name="L54"></a>  54   <em class="comment">// references to those APIs. So until Xerces2 is pervasive and we're willing</em>
<a id="L55" name="L55"></a>  55   <em class="comment">// to make it a prerequisite, we will rely upon relection.</em>
<a id="L56" name="L56"></a>  56   <em class="comment">//</em>
<a id="L57" name="L57"></a>  57   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fParseSomeSetup=<strong class="reserved">null</strong>; <em class="comment">// Xerces1 method</em>
<a id="L58" name="L58"></a>  58   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fParseSome=<strong class="reserved">null</strong>; <em class="comment">// Xerces1 method</em>
<a id="L59" name="L59"></a>  59   <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> fPullParserConfig=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 pull control object</em>
<a id="L60" name="L60"></a>  60   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fConfigSetInput=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 method</em>
<a id="L61" name="L61"></a>  61   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fConfigParse=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 method</em>
<a id="L62" name="L62"></a>  62   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fSetInputSource=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 pull control method</em>
<a id="L63" name="L63"></a>  63   <a href="../D/1833.html" title="Multiple defined in 2 places.">Constructor</a> fConfigInputSourceCtor=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 initialization method</em>
<a id="L64" name="L64"></a>  64   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fConfigSetByteStream=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 initialization method</em>
<a id="L65" name="L65"></a>  65   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fConfigSetCharStream=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 initialization method</em>
<a id="L66" name="L66"></a>  66   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fConfigSetEncoding=<strong class="reserved">null</strong>; <em class="comment">// Xerces2 initialization method</em>
<a id="L67" name="L67"></a>  67   <a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> fReset=<strong class="reserved">null</strong>; <em class="comment">// Both Xerces1 and Xerces2, but diff. signatures</em>
<a id="L68" name="L68"></a>  68 
<a id="L69" name="L69"></a>  69   <em class="comment">//</em>
<a id="L70" name="L70"></a>  70   <em class="comment">// Data</em>
<a id="L71" name="L71"></a>  71   <em class="comment">//</em>
<a id="L72" name="L72"></a>  72   <a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a> fIncrementalParser;
<a id="L73" name="L73"></a>  73   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> fParseInProgress=<strong class="reserved">false</strong>;
<a id="L74" name="L74"></a>  74 
<a id="L75" name="L75"></a>  75   <em class="comment">//</em>
<a id="L76" name="L76"></a>  76   <em class="comment">// Constructors</em>
<a id="L77" name="L77"></a>  77   <em class="comment">//</em>
<a id="L78" name="L78"></a>  78 
<div class="comment">
 Create a IncrementalSAXSource_Xerces, and create a SAXParser
    to go with it. Xerces2 incremental parsing is only supported if
    this constructor is used, due to limitations in the Xerces2 API (as of
    Beta 3). If you don't like that restriction, tell the Xerces folks that
    there should be a simpler way to request incremental SAX parsing.
   * </div>
<a id="L85" name="L85"></a>  85   <strong class="reserved">public</strong> IncrementalSAXSource_Xerces()
<a id="L86" name="L86"></a>  86                 <strong class="reserved">throws</strong> <a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a>
<a id="L87" name="L87"></a>  87         <em class="brace">{</em>
<a id="L88" name="L88"></a>  88                 <strong class="reserved">try</strong>
<a id="L89" name="L89"></a>  89                 <em class="brace">{</em>
<a id="L90" name="L90"></a>  90                         <em class="comment">// Xerces-2 incremental parsing support (as of Beta 3)</em>
<a id="L91" name="L91"></a>  91                         <em class="comment">// ContentHandlers still get set on fIncrementalParser (to get</em>
<a id="L92" name="L92"></a>  92                         <em class="comment">// conversion from XNI events to SAX events), but</em>
<a id="L93" name="L93"></a>  93                         <em class="comment">// _control_ for incremental parsing must be exercised via the config.</em>
<a id="L94" name="L94"></a>  94                         <em class="comment">//</em>
<a id="L95" name="L95"></a>  95                         <em class="comment">// At this time there's no way to read the existing config, only</em>
<a id="L96" name="L96"></a>  96                         <em class="comment">// to assert a new one... and only when creating a brand-new parser.</em>
<a id="L97" name="L97"></a>  97                         <em class="comment">//</em>
<a id="L98" name="L98"></a>  98                         <em class="comment">// Reflection is used to allow us to continue to compile against</em>
<a id="L99" name="L99"></a>  99                         <em class="comment">// Xerces1. If/when we can abandon the older versions of the parser,</em>
<a id="L100" name="L100"></a> 100                         <em class="comment">// this will simplify significantly.</em>
<a id="L101" name="L101"></a> 101 
<a id="L102" name="L102"></a> 102                         <em class="comment">// If we can't get the magic constructor, no need to look further.</em>
<a id="L103" name="L103"></a> 103                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> xniConfigClass=<a href="../D/6287.html" title="Multiple defined in 3 places.">ObjectFactory</a>.<a href="../D/16218.html" title="Multiple defined in 4 places.">findProviderClass</a>(
<a id="L104" name="L104"></a> 104                             "com.sun.org.apache.xerces.internal.xni.parser.XMLParserConfiguration",
<a id="L105" name="L105"></a> 105                             <strong class="reserved">true</strong>);
<a id="L106" name="L106"></a> 106                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args1=<em class="brace">{</em>xniConfigClass<em class="brace">}</em>;
<a id="L107" name="L107"></a> 107                         <a href="../D/1833.html" title="Multiple defined in 2 places.">Constructor</a> ctor=<a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a>.<strong class="reserved">class</strong>.<a href="../D/17932.html" title="Multiple defined in 2 places.">getConstructor</a>(args1);
<a id="L108" name="L108"></a> 108 
<a id="L109" name="L109"></a> 109                         <em class="comment">// Build the parser configuration object. StandardParserConfiguration</em>
<a id="L110" name="L110"></a> 110                         <em class="comment">// happens to implement XMLPullParserConfiguration, which is the API</em>
<a id="L111" name="L111"></a> 111                         <em class="comment">// we're going to want to use.</em>
<a id="L112" name="L112"></a> 112                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> xniStdConfigClass=<a href="../D/6287.html" title="Multiple defined in 3 places.">ObjectFactory</a>.<a href="../D/16218.html" title="Multiple defined in 4 places.">findProviderClass</a>(
<a id="L113" name="L113"></a> 113                             "com.sun.org.apache.xerces.internal.parsers.StandardParserConfiguration",
<a id="L114" name="L114"></a> 114                             <strong class="reserved">true</strong>);
<a id="L115" name="L115"></a> 115                         fPullParserConfig=xniStdConfigClass.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L116" name="L116"></a> 116                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args2=<em class="brace">{</em>fPullParserConfig<em class="brace">}</em>;
<a id="L117" name="L117"></a> 117                         fIncrementalParser = (<a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a>)ctor.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(args2);
<a id="L118" name="L118"></a> 118 
<a id="L119" name="L119"></a> 119                         <em class="comment">// Preload all the needed the configuration methods... I want to know they're</em>
<a id="L120" name="L120"></a> 120                         <em class="comment">// all here before we commit to trying to use them, just in case the</em>
<a id="L121" name="L121"></a> 121                         <em class="comment">// API changes again.</em>
<a id="L122" name="L122"></a> 122                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> fXniInputSourceClass=<a href="../D/6287.html" title="Multiple defined in 3 places.">ObjectFactory</a>.<a href="../D/16218.html" title="Multiple defined in 4 places.">findProviderClass</a>(
<a id="L123" name="L123"></a> 123                             "com.sun.org.apache.xerces.internal.xni.parser.XMLInputSource",
<a id="L124" name="L124"></a> 124                             <strong class="reserved">true</strong>);
<a id="L125" name="L125"></a> 125                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args3=<em class="brace">{</em>fXniInputSourceClass<em class="brace">}</em>;
<a id="L126" name="L126"></a> 126                         fConfigSetInput=xniStdConfigClass.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("setInputSource",args3);
<a id="L127" name="L127"></a> 127 
<a id="L128" name="L128"></a> 128                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args4=<em class="brace">{</em><a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong>,<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong>,<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong><em class="brace">}</em>;
<a id="L129" name="L129"></a> 129                         fConfigInputSourceCtor=fXniInputSourceClass.<a href="../D/17932.html" title="Multiple defined in 2 places.">getConstructor</a>(args4);
<a id="L130" name="L130"></a> 130                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args5=<em class="brace">{</em><a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a>.<strong class="reserved">class</strong><em class="brace">}</em>;
<a id="L131" name="L131"></a> 131                         fConfigSetByteStream=fXniInputSourceClass.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("setByteStream",args5);
<a id="L132" name="L132"></a> 132                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args6=<em class="brace">{</em><a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1412.html#L51" title="Defined at 51 in src/java/io/Reader.java.">Reader</a>.<strong class="reserved">class</strong><em class="brace">}</em>;
<a id="L133" name="L133"></a> 133                         fConfigSetCharStream=fXniInputSourceClass.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("setCharacterStream",args6);
<a id="L134" name="L134"></a> 134                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] args7=<em class="brace">{</em><a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong><em class="brace">}</em>;
<a id="L135" name="L135"></a> 135                         fConfigSetEncoding=fXniInputSourceClass.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("setEncoding",args7);
<a id="L136" name="L136"></a> 136 
<a id="L137" name="L137"></a> 137                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] argsb=<em class="brace">{</em><a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TYPE<em class="brace">}</em>;
<a id="L138" name="L138"></a> 138                         fConfigParse=xniStdConfigClass.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("parse",argsb);
<a id="L139" name="L139"></a> 139                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] noargs=<strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[0];
<a id="L140" name="L140"></a> 140                         fReset=fIncrementalParser.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("reset",noargs);
<a id="L141" name="L141"></a> 141                 <em class="brace">}</em>
<a id="L142" name="L142"></a> 142                 <strong class="reserved">catch</strong>(<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e)
<a id="L143" name="L143"></a> 143                 <em class="brace">{</em>
<a id="L144" name="L144"></a> 144             <em class="comment">// Fallback if this fails (implemented in createIncrementalSAXSource) is</em>
<a id="L145" name="L145"></a> 145                         <em class="comment">// to attempt Xerces-1 incremental setup. Can't do tail-call in</em>
<a id="L146" name="L146"></a> 146                         <em class="comment">// constructor, so create new, copy Xerces-1 initialization,</em>
<a id="L147" name="L147"></a> 147                         <em class="comment">// then throw it away... Ugh.</em>
<a id="L148" name="L148"></a> 148                         <a href="../S/5896.html#L48" title="Defined at 48 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">IncrementalSAXSource_Xerces</a> dummy=<strong class="reserved">new</strong> <a href="../S/5896.html#L48" title="Defined at 48 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">IncrementalSAXSource_Xerces</a>(<strong class="reserved">new</strong> <a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a>());
<a id="L149" name="L149"></a> 149                         <strong class="reserved">this</strong>.fParseSomeSetup=dummy.fParseSomeSetup;
<a id="L150" name="L150"></a> 150                         <strong class="reserved">this</strong>.fParseSome=dummy.fParseSome;
<a id="L151" name="L151"></a> 151                         <strong class="reserved">this</strong>.fIncrementalParser=dummy.fIncrementalParser;
<a id="L152" name="L152"></a> 152                 <em class="brace">}</em>
<a id="L153" name="L153"></a> 153   <em class="brace">}</em>
<a id="L154" name="L154"></a> 154 
<div class="comment">
 Create a IncrementalSAXSource_Xerces wrapped around
    an existing SAXParser. Currently this works only for recent
    releases of Xerces-1.  Xerces-2 incremental is currently possible
    only if we are allowed to create the parser instance, due to
    limitations in the API exposed by Xerces-2 Beta 3; see the
    no-args constructor for that code.
    @exception if the SAXParser class doesn't support the Xerces
    incremental parse operations. In that case, caller should
    fall back upon the IncrementalSAXSource_Filter approach.
   * </div>
<a id="L166" name="L166"></a> 166   <strong class="reserved">public</strong> IncrementalSAXSource_Xerces(<a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a> parser)
<a id="L167" name="L167"></a> 167     <strong class="reserved">throws</strong> <a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a>
<a id="L168" name="L168"></a> 168   <em class="brace">{</em>
<a id="L169" name="L169"></a> 169                 <em class="comment">// Reflection is used to allow us to compile against</em>
<a id="L170" name="L170"></a> 170                 <em class="comment">// Xerces2. If/when we can abandon the older versions of the parser,</em>
<a id="L171" name="L171"></a> 171                 <em class="comment">// this constructor will simply have to fail until/unless the</em>
<a id="L172" name="L172"></a> 172                 <em class="comment">// Xerces2 incremental support is made available on previously</em>
<a id="L173" name="L173"></a> 173                 <em class="comment">// constructed SAXParser instances.</em>
<a id="L174" name="L174"></a> 174     fIncrementalParser=parser;
<a id="L175" name="L175"></a> 175                 <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> me=parser.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L176" name="L176"></a> 176     <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[] parms=<em class="brace">{</em><a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a>.<strong class="reserved">class</strong><em class="brace">}</em>;
<a id="L177" name="L177"></a> 177     fParseSomeSetup=me.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("parseSomeSetup",parms);
<a id="L178" name="L178"></a> 178     parms=<strong class="reserved">new</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>[0];
<a id="L179" name="L179"></a> 179     fParseSome=me.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>("parseSome",parms);
<a id="L180" name="L180"></a> 180     <em class="comment">// Fallback if this fails (implemented in createIncrementalSAXSource) is</em>
<a id="L181" name="L181"></a> 181     <em class="comment">// to use IncrementalSAXSource_Filter rather than Xerces-specific code.</em>
<a id="L182" name="L182"></a> 182   <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<a id="L184" name="L184"></a> 184   <em class="comment">//</em>
<a id="L185" name="L185"></a> 185   <em class="comment">// Factories</em>
<a id="L186" name="L186"></a> 186   <em class="comment">//</em>
<a id="L187" name="L187"></a> 187   <strong class="reserved">static</strong> <strong class="reserved">public</strong> <a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a> <a href="../S/5896.html#L400" title="Referred from 400 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">createIncrementalSAXSource</a>()
<a id="L188" name="L188"></a> 188         <em class="brace">{</em>
<a id="L189" name="L189"></a> 189                 <strong class="reserved">try</strong>
<a id="L190" name="L190"></a> 190                 <em class="brace">{</em>
<a id="L191" name="L191"></a> 191                         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5896.html#L48" title="Defined at 48 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">IncrementalSAXSource_Xerces</a>();
<a id="L192" name="L192"></a> 192                 <em class="brace">}</em>
<a id="L193" name="L193"></a> 193                 <strong class="reserved">catch</strong>(<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> e)
<a id="L194" name="L194"></a> 194                 <em class="brace">{</em>
<a id="L195" name="L195"></a> 195                         <em class="comment">// Xerces version mismatch; neither Xerces1 nor Xerces2 succeeded.</em>
<a id="L196" name="L196"></a> 196                         <em class="comment">// Fall back on filtering solution.</em>
<a id="L197" name="L197"></a> 197                         <a href="../S/5910.html#L73" title="Defined at 73 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Filter.java.">IncrementalSAXSource_Filter</a> iss=<strong class="reserved">new</strong> <a href="../S/5910.html#L73" title="Defined at 73 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Filter.java.">IncrementalSAXSource_Filter</a>();
<a id="L198" name="L198"></a> 198                         iss.<a href="../D/34347.html" title="Multiple defined in 4 places.">setXMLReader</a>(<strong class="reserved">new</strong> <a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a>());
<a id="L199" name="L199"></a> 199                         <strong class="reserved">return</strong> iss;
<a id="L200" name="L200"></a> 200                 <em class="brace">}</em>
<a id="L201" name="L201"></a> 201   <em class="brace">}</em>
<a id="L202" name="L202"></a> 202 
<a id="L203" name="L203"></a> 203   <strong class="reserved">static</strong> <strong class="reserved">public</strong> <a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a>
<a id="L204" name="L204"></a> 204   <a href="../S/5896.html#L400" title="Referred from 400 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">createIncrementalSAXSource</a>(<a href="../D/7467.html" title="Multiple defined in 2 places.">SAXParser</a> parser) <em class="brace">{</em>
<a id="L205" name="L205"></a> 205                 <strong class="reserved">try</strong>
<a id="L206" name="L206"></a> 206                 <em class="brace">{</em>
<a id="L207" name="L207"></a> 207                         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5896.html#L48" title="Defined at 48 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">IncrementalSAXSource_Xerces</a>(parser);
<a id="L208" name="L208"></a> 208                 <em class="brace">}</em>
<a id="L209" name="L209"></a> 209                 <strong class="reserved">catch</strong>(<a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> e)
<a id="L210" name="L210"></a> 210                 <em class="brace">{</em>
<a id="L211" name="L211"></a> 211                         <em class="comment">// Xerces version mismatch; neither Xerces1 nor Xerces2 succeeded.</em>
<a id="L212" name="L212"></a> 212                         <em class="comment">// Fall back on filtering solution.</em>
<a id="L213" name="L213"></a> 213                         <a href="../S/5910.html#L73" title="Defined at 73 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Filter.java.">IncrementalSAXSource_Filter</a> iss=<strong class="reserved">new</strong> <a href="../S/5910.html#L73" title="Defined at 73 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Filter.java.">IncrementalSAXSource_Filter</a>();
<a id="L214" name="L214"></a> 214                         iss.<a href="../D/34347.html" title="Multiple defined in 4 places.">setXMLReader</a>(parser);
<a id="L215" name="L215"></a> 215                         <strong class="reserved">return</strong> iss;
<a id="L216" name="L216"></a> 216                 <em class="brace">}</em>
<a id="L217" name="L217"></a> 217   <em class="brace">}</em>
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219   <em class="comment">//</em>
<a id="L220" name="L220"></a> 220   <em class="comment">// Public methods</em>
<a id="L221" name="L221"></a> 221   <em class="comment">//</em>
<a id="L222" name="L222"></a> 222 
<a id="L223" name="L223"></a> 223   <em class="comment">// Register handler directly with the incremental parser</em>
<a id="L224" name="L224"></a> 224   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27103.html" title="Multiple referred from 47 places.">setContentHandler</a>(org.xml.sax.<a href="../D/1853.html" title="Multiple defined in 2 places.">ContentHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L225" name="L225"></a> 225   <em class="brace">{</em>
<a id="L226" name="L226"></a> 226     <em class="comment">// Typecast required in Xerces2; SAXParser doesn't inheret XMLReader</em>
<a id="L227" name="L227"></a> 227     <em class="comment">// %OPT% Cast at asignment?</em>
<a id="L228" name="L228"></a> 228     ((<a href="../S/724.html#L84" title="Defined at 84 in src/org/xml/sax/XMLReader.java.">XMLReader</a>)fIncrementalParser).<a href="../D/32251.html" title="Multiple defined in 23 places.">setContentHandler</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L229" name="L229"></a> 229   <em class="brace">}</em>
<a id="L230" name="L230"></a> 230 
<a id="L231" name="L231"></a> 231   <em class="comment">// Register handler directly with the incremental parser</em>
<a id="L232" name="L232"></a> 232   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27662.html" title="Multiple referred from 5 places.">setLexicalHandler</a>(org.xml.sax.ext.<a href="../S/719.html#L68" title="Defined at 68 in src/org/xml/sax/ext/LexicalHandler.java.">LexicalHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L233" name="L233"></a> 233   <em class="brace">{</em>
<a id="L234" name="L234"></a> 234     <em class="comment">// Not supported by all SAX2 parsers but should work in Xerces:</em>
<a id="L235" name="L235"></a> 235     <strong class="reserved">try</strong>
<a id="L236" name="L236"></a> 236     <em class="brace">{</em>
<a id="L237" name="L237"></a> 237       <em class="comment">// Typecast required in Xerces2; SAXParser doesn't inheret XMLReader</em>
<a id="L238" name="L238"></a> 238       <em class="comment">// %OPT% Cast at asignment?</em>
<a id="L239" name="L239"></a> 239       ((<a href="../S/724.html#L84" title="Defined at 84 in src/org/xml/sax/XMLReader.java.">XMLReader</a>)fIncrementalParser).<a href="../D/33622.html" title="Multiple defined in 81 places.">setProperty</a>("http://xml.org/sax/properties/lexical-handler",
<a id="L240" name="L240"></a> 240                                      <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L241" name="L241"></a> 241     <em class="brace">}</em>
<a id="L242" name="L242"></a> 242     <strong class="reserved">catch</strong>(org.xml.sax.<a href="../S/725.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotRecognizedException.java.">SAXNotRecognizedException</a> e)
<a id="L243" name="L243"></a> 243     <em class="brace">{</em>
<a id="L244" name="L244"></a> 244       <em class="comment">// Nothing we can do about it</em>
<a id="L245" name="L245"></a> 245     <em class="brace">}</em>
<a id="L246" name="L246"></a> 246     <strong class="reserved">catch</strong>(org.xml.sax.<a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a> e)
<a id="L247" name="L247"></a> 247     <em class="brace">{</em>
<a id="L248" name="L248"></a> 248       <em class="comment">// Nothing we can do about it</em>
<a id="L249" name="L249"></a> 249     <em class="brace">}</em>
<a id="L250" name="L250"></a> 250   <em class="brace">}</em>
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252   <em class="comment">// Register handler directly with the incremental parser</em>
<a id="L253" name="L253"></a> 253   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27157.html" title="Multiple referred from 65 places.">setDTDHandler</a>(org.xml.sax.<a href="../S/721.html#L74" title="Defined at 74 in src/org/xml/sax/DTDHandler.java.">DTDHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L254" name="L254"></a> 254   <em class="brace">{</em>
<a id="L255" name="L255"></a> 255     <em class="comment">// Typecast required in Xerces2; SAXParser doesn't inheret XMLReader</em>
<a id="L256" name="L256"></a> 256     <em class="comment">// %OPT% Cast at asignment?</em>
<a id="L257" name="L257"></a> 257     ((<a href="../S/724.html#L84" title="Defined at 84 in src/org/xml/sax/XMLReader.java.">XMLReader</a>)fIncrementalParser).<a href="../D/32341.html" title="Multiple defined in 25 places.">setDTDHandler</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L258" name="L258"></a> 258   <em class="brace">}</em>
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260   <em class="comment">//================================================================</em>
<div class="comment">
 startParse() is a simple API which tells the IncrementalSAXSource
    to begin reading a document.
    @throws SAXException is parse thread is already in progress
    or parsing can not be started.
   * </div>
<a id="L267" name="L267"></a> 267   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28844.html" title="Multiple referred from 2 places.">startParse</a>(<a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>) <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>
<a id="L268" name="L268"></a> 268   <em class="brace">{</em>
<a id="L269" name="L269"></a> 269     <strong class="reserved">if</strong> (fIncrementalParser==<strong class="reserved">null</strong>)
<a id="L270" name="L270"></a> 270       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_STARTPARSE_NEEDS_SAXPARSER, <strong class="reserved">null</strong>)); <em class="comment">//"startParse needs a non-null SAXParser.");</em>
<a id="L271" name="L271"></a> 271     <strong class="reserved">if</strong> (fParseInProgress)
<a id="L272" name="L272"></a> 272       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_STARTPARSE_WHILE_PARSING, <strong class="reserved">null</strong>)); <em class="comment">//"startParse may not be called while parsing.");</em>
<a id="L273" name="L273"></a> 273 
<a id="L274" name="L274"></a> 274     <strong class="reserved">boolean</strong> ok=<strong class="reserved">false</strong>;
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276     <strong class="reserved">try</strong>
<a id="L277" name="L277"></a> 277     <em class="brace">{</em>
<a id="L278" name="L278"></a> 278       ok = <a href="../S/5896.html#L325" title="Defined at 325 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">parseSomeSetup</a>(<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>);
<a id="L279" name="L279"></a> 279     <em class="brace">}</em>
<a id="L280" name="L280"></a> 280     <strong class="reserved">catch</strong>(<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>)
<a id="L281" name="L281"></a> 281     <em class="brace">{</em>
<a id="L282" name="L282"></a> 282       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L283" name="L283"></a> 283     <em class="brace">}</em>
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285     <strong class="reserved">if</strong>(!ok)
<a id="L286" name="L286"></a> 286       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/5529.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">XMLMessages</a>.<a href="../S/5529.html#L82" title="Defined at 82 in src/com/sun/org/apache/xml/internal/res/XMLMessages.java.">createXMLMessage</a>(<a href="../S/5541.html#L35" title="Defined at 35 in src/com/sun/org/apache/xml/internal/res/XMLErrorResources.java.">XMLErrorResources</a>.ER_COULD_NOT_INIT_PARSER, <strong class="reserved">null</strong>)); <em class="comment">//"could not initialize parser with");</em>
<a id="L287" name="L287"></a> 287   <em class="brace">}</em>
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289 
<div class="comment">
 deliverMoreNodes() is a simple API which tells the coroutine
    parser that we need more nodes.  This is intended to be called
    from one of our partner routines, and serves to encapsulate the
    details of how incremental parsing has been achieved.
    @param parsemore If true, tells the incremental parser to generate
    another chunk of output. If false, tells the parser that we're
    satisfied and it can terminate parsing of this document.
    @return Boolean.TRUE if the CoroutineParser believes more data may be available
    for further parsing. Boolean.FALSE if parsing ran to completion.
    Exception if the parser objected for some reason.
   * </div>
<a id="L302" name="L302"></a> 302   <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/13219.html" title="Multiple referred from 4 places.">deliverMoreNodes</a> (<strong class="reserved">boolean</strong> parsemore)
<a id="L303" name="L303"></a> 303   <em class="brace">{</em>
<a id="L304" name="L304"></a> 304     <strong class="reserved">if</strong>(!parsemore)
<a id="L305" name="L305"></a> 305     <em class="brace">{</em>
<a id="L306" name="L306"></a> 306       fParseInProgress=<strong class="reserved">false</strong>;
<a id="L307" name="L307"></a> 307       <strong class="reserved">return</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L308" name="L308"></a> 308     <em class="brace">}</em>
<a id="L309" name="L309"></a> 309 
<a id="L310" name="L310"></a> 310     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L311" name="L311"></a> 311     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L312" name="L312"></a> 312       <strong class="reserved">boolean</strong> keepgoing = <a href="../S/5896.html#L366" title="Defined at 366 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">parseSome</a>();
<a id="L313" name="L313"></a> 313       <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = keepgoing ? <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE : <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE;
<a id="L314" name="L314"></a> 314     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L315" name="L315"></a> 315       <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L316" name="L316"></a> 316     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L317" name="L317"></a> 317       <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L318" name="L318"></a> 318     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L319" name="L319"></a> 319       <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a> = <strong class="reserved">new</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321     <strong class="reserved">return</strong> <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L322" name="L322"></a> 322   <em class="brace">}</em>
<a id="L323" name="L323"></a> 323 
<a id="L324" name="L324"></a> 324         <em class="comment">// Private methods -- conveniences to hide the reflection details</em>
<a id="L325" name="L325"></a> 325         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/5896.html#L278" title="Referred from 278 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">parseSomeSetup</a>(<a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>)
<a id="L326" name="L326"></a> 326                 <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a>,
<a id="L327" name="L327"></a> 327                                          <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.reflect.<a href="../S/1671.html#L42" title="Defined at 42 in src/java/lang/reflect/InvocationTargetException.java.">InvocationTargetException</a>,
<a id="L328" name="L328"></a> 328                                          <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../S/1743.html#L46" title="Defined at 46 in src/java/lang/InstantiationException.java.">InstantiationException</a>
<a id="L329" name="L329"></a> 329         <em class="brace">{</em>
<a id="L330" name="L330"></a> 330                 <strong class="reserved">if</strong>(fConfigSetInput!=<strong class="reserved">null</strong>)
<a id="L331" name="L331"></a> 331                 <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                         <em class="comment">// Obtain input from SAX inputSource object, construct XNI version of</em>
<a id="L333" name="L333"></a> 333                         <em class="comment">// that object. Logic adapted from Xerces2.</em>
<a id="L334" name="L334"></a> 334                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] parms1=<em class="brace">{</em><a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/21781.html" title="Multiple defined in 41 places.">getPublicId</a>(),<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/22911.html" title="Multiple defined in 50 places.">getSystemId</a>(),<strong class="reserved">null</strong><em class="brace">}</em>;
<a id="L335" name="L335"></a> 335                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> xmlsource=fConfigInputSourceCtor.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(parms1);
<a id="L336" name="L336"></a> 336                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] parmsa=<em class="brace">{</em><a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/17410.html" title="Multiple defined in 6 places.">getByteStream</a>()<em class="brace">}</em>;
<a id="L337" name="L337"></a> 337                         fConfigSetByteStream.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(xmlsource,parmsa);
<a id="L338" name="L338"></a> 338                         parmsa[0]=<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/17614.html" title="Multiple defined in 15 places.">getCharacterStream</a>();
<a id="L339" name="L339"></a> 339                         fConfigSetCharStream.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(xmlsource,parmsa);
<a id="L340" name="L340"></a> 340                         parmsa[0]=<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>.<a href="../D/18747.html" title="Multiple defined in 37 places.">getEncoding</a>();
<a id="L341" name="L341"></a> 341                         fConfigSetEncoding.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(xmlsource,parmsa);
<a id="L342" name="L342"></a> 342 
<a id="L343" name="L343"></a> 343                         <em class="comment">// Bugzilla5272 patch suggested by Sandy Gao.</em>
<a id="L344" name="L344"></a> 344                         <em class="comment">// Has to be reflection to run with Xerces2</em>
<a id="L345" name="L345"></a> 345                         <em class="comment">// after compilation against Xerces1. or vice</em>
<a id="L346" name="L346"></a> 346                         <em class="comment">// versa, due to return type mismatches.</em>
<a id="L347" name="L347"></a> 347                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] noparms=<strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[0];
<a id="L348" name="L348"></a> 348                         fReset.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(fIncrementalParser,noparms);
<a id="L349" name="L349"></a> 349 
<a id="L350" name="L350"></a> 350                         parmsa[0]=xmlsource;
<a id="L351" name="L351"></a> 351                         fConfigSetInput.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(fPullParserConfig,parmsa);
<a id="L352" name="L352"></a> 352 
<a id="L353" name="L353"></a> 353                         <em class="comment">// %REVIEW% Do first pull. Should we instead just return true?</em>
<a id="L354" name="L354"></a> 354                         <strong class="reserved">return</strong> <a href="../S/5896.html#L366" title="Defined at 366 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource_Xerces.java.">parseSome</a>();
<a id="L355" name="L355"></a> 355                 <em class="brace">}</em>
<a id="L356" name="L356"></a> 356                 <strong class="reserved">else</strong>
<a id="L357" name="L357"></a> 357                 <em class="brace">{</em>
<a id="L358" name="L358"></a> 358                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] parm=<em class="brace">{</em><a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a><em class="brace">}</em>;
<a id="L359" name="L359"></a> 359                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ret=fParseSomeSetup.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(fIncrementalParser,parm);
<a id="L360" name="L360"></a> 360                         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)ret).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L361" name="L361"></a> 361                 <em class="brace">}</em>
<a id="L362" name="L362"></a> 362         <em class="brace">}</em>
<a id="L363" name="L363"></a> 363 <em class="comment">//  Would null work???</em>
<a id="L364" name="L364"></a> 364     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] noparms=<strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[0];
<a id="L365" name="L365"></a> 365     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] parmsfalse=<em class="brace">{</em><a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE<em class="brace">}</em>;
<a id="L366" name="L366"></a> 366     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/24622.html" title="Multiple referred from 2 places.">parseSome</a>()
<a id="L367" name="L367"></a> 367                 <strong class="reserved">throws</strong> <a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a>,
<a id="L368" name="L368"></a> 368                                          <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.reflect.<a href="../S/1671.html#L42" title="Defined at 42 in src/java/lang/reflect/InvocationTargetException.java.">InvocationTargetException</a>
<a id="L369" name="L369"></a> 369         <em class="brace">{</em>
<a id="L370" name="L370"></a> 370                 <em class="comment">// Take next parsing step, return false iff parsing complete:</em>
<a id="L371" name="L371"></a> 371                 <strong class="reserved">if</strong>(fConfigSetInput!=<strong class="reserved">null</strong>)
<a id="L372" name="L372"></a> 372                 <em class="brace">{</em>
<a id="L373" name="L373"></a> 373                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ret=(<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)(fConfigParse.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(fPullParserConfig,parmsfalse));
<a id="L374" name="L374"></a> 374                         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)ret).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L375" name="L375"></a> 375                 <em class="brace">}</em>
<a id="L376" name="L376"></a> 376                 <strong class="reserved">else</strong>
<a id="L377" name="L377"></a> 377                 <em class="brace">{</em>
<a id="L378" name="L378"></a> 378                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> ret=fParseSome.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(fIncrementalParser,noparms);
<a id="L379" name="L379"></a> 379                         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)ret).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L380" name="L380"></a> 380                 <em class="brace">}</em>
<a id="L381" name="L381"></a> 381         <em class="brace">}</em>
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384   <em class="comment">//================================================================</em>
<div class="comment">
 Simple unit test. Attempt coroutine parsing of document indicated
    by first argument (as a URI), report progress.</div>
<a id="L388" name="L388"></a> 388   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/9433.html" title="Multiple referred from 15 places.">_main</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> args[])
<a id="L389" name="L389"></a> 389   <em class="brace">{</em>
<a id="L390" name="L390"></a> 390     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Starting...");
<a id="L391" name="L391"></a> 391 
<a id="L392" name="L392"></a> 392     <a href="../S/5914.html#L108" title="Defined at 108 in src/com/sun/org/apache/xml/internal/dtm/ref/CoroutineManager.java.">CoroutineManager</a> co = <strong class="reserved">new</strong> <a href="../S/5914.html#L108" title="Defined at 108 in src/com/sun/org/apache/xml/internal/dtm/ref/CoroutineManager.java.">CoroutineManager</a>();
<a id="L393" name="L393"></a> 393     <strong class="reserved">int</strong> appCoroutineID = co.<a href="../S/5914.html#L186" title="Defined at 186 in src/com/sun/org/apache/xml/internal/dtm/ref/CoroutineManager.java.">co_joinCoroutineSet</a>(-1);
<a id="L394" name="L394"></a> 394     <strong class="reserved">if</strong> (appCoroutineID == -1)
<a id="L395" name="L395"></a> 395     <em class="brace">{</em>
<a id="L396" name="L396"></a> 396       <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("ERROR: Couldn't allocate coroutine number.\n");
<a id="L397" name="L397"></a> 397       <strong class="reserved">return</strong>;
<a id="L398" name="L398"></a> 398     <em class="brace">}</em>
<a id="L399" name="L399"></a> 399     <a href="../S/5909.html#L39" title="Defined at 39 in src/com/sun/org/apache/xml/internal/dtm/ref/IncrementalSAXSource.java.">IncrementalSAXSource</a> parser=
<a id="L400" name="L400"></a> 400       <a href="../D/13949.html" title="Multiple defined in 3 places.">createIncrementalSAXSource</a>();
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402     <em class="comment">// Use a serializer as our sample output</em>
<a id="L403" name="L403"></a> 403     com.sun.org.apache.xml.internal.<a href="../D/31785.html" title="Multiple defined in 18 places.">serialize</a>.<a href="../S/5793.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/serialize/XMLSerializer.java.">XMLSerializer</a> <a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>;
<a id="L404" name="L404"></a> 404     <a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>=<strong class="reserved">new</strong> com.sun.org.apache.xml.internal.<a href="../D/31785.html" title="Multiple defined in 18 places.">serialize</a>.<a href="../S/5793.html#L93" title="Defined at 93 in src/com/sun/org/apache/xml/internal/serialize/XMLSerializer.java.">XMLSerializer</a>(<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>,<strong class="reserved">null</strong>);
<a id="L405" name="L405"></a> 405     parser.<a href="../D/32251.html" title="Multiple defined in 23 places.">setContentHandler</a>(<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>);
<a id="L406" name="L406"></a> 406     parser.<a href="../D/33083.html" title="Multiple defined in 6 places.">setLexicalHandler</a>(<a href="../D/35559.html" title="Multiple defined in 6 places.">trace</a>);
<a id="L407" name="L407"></a> 407 
<a id="L408" name="L408"></a> 408     <em class="comment">// Tell coroutine to begin parsing, run while parsing is in progress</em>
<a id="L409" name="L409"></a> 409 
<a id="L410" name="L410"></a> 410     <strong class="reserved">for</strong>(<strong class="reserved">int</strong> <a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>=0;<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>&lt;args.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;++<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>)
<a id="L411" name="L411"></a> 411     <em class="brace">{</em>
<a id="L412" name="L412"></a> 412       <strong class="reserved">try</strong>
<a id="L413" name="L413"></a> 413       <em class="brace">{</em>
<a id="L414" name="L414"></a> 414         <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = <strong class="reserved">new</strong> <a href="../S/711.html#L84" title="Defined at 84 in src/org/xml/sax/InputSource.java.">InputSource</a>(args[<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>]);
<a id="L415" name="L415"></a> 415         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>=<strong class="reserved">null</strong>;
<a id="L416" name="L416"></a> 416         <strong class="reserved">boolean</strong> more=<strong class="reserved">true</strong>;
<a id="L417" name="L417"></a> 417         parser.<a href="../D/34816.html" title="Multiple defined in 3 places.">startParse</a>(<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>);
<a id="L418" name="L418"></a> 418         <strong class="reserved">for</strong>(<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = parser.<a href="../D/14824.html" title="Multiple defined in 3 places.">deliverMoreNodes</a>(more);
<a id="L419" name="L419"></a> 419             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>==<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE;
<a id="L420" name="L420"></a> 420             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = parser.<a href="../D/14824.html" title="Multiple defined in 3 places.">deliverMoreNodes</a>(more))
<a id="L421" name="L421"></a> 421         <em class="brace">{</em>
<a id="L422" name="L422"></a> 422           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("\nSome parsing successful, trying more.\n");
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424           <em class="comment">// Special test: Terminate parsing early.</em>
<a id="L425" name="L425"></a> 425           <strong class="reserved">if</strong>(<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>+1&lt;args.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp; "!".<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(args[<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>+1]))
<a id="L426" name="L426"></a> 426           <em class="brace">{</em>
<a id="L427" name="L427"></a> 427             ++<a href="../D/11479.html" title="Multiple defined in 2 places.">arg</a>;
<a id="L428" name="L428"></a> 428             more=<strong class="reserved">false</strong>;
<a id="L429" name="L429"></a> 429           <em class="brace">}</em>
<a id="L430" name="L430"></a> 430 
<a id="L431" name="L431"></a> 431         <em class="brace">}</em>
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433         <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> <strong class="reserved">instanceof</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> &amp;&amp; ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>)==<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE)
<a id="L434" name="L434"></a> 434         <em class="brace">{</em>
<a id="L435" name="L435"></a> 435           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("\nParser ended (EOF or on request).\n");
<a id="L436" name="L436"></a> 436         <em class="brace">}</em>
<a id="L437" name="L437"></a> 437         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("\nUNEXPECTED: Parser says shut down prematurely.\n");
<a id="L439" name="L439"></a> 439         <em class="brace">}</em>
<a id="L440" name="L440"></a> 440         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> <strong class="reserved">instanceof</strong> <a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a>) <em class="brace">{</em>
<a id="L441" name="L441"></a> 441           <strong class="reserved">throw</strong> <strong class="reserved">new</strong> com.sun.org.apache.xml.internal.utils.<a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>((<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a>)<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>);
<a id="L442" name="L442"></a> 442           <em class="comment">//          System.out.println("\nParser threw exception:");</em>
<a id="L443" name="L443"></a> 443           <em class="comment">//          ((Exception)result).printStackTrace();</em>
<a id="L444" name="L444"></a> 444         <em class="brace">}</em>
<a id="L445" name="L445"></a> 445 
<a id="L446" name="L446"></a> 446       <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<a id="L448" name="L448"></a> 448       <strong class="reserved">catch</strong>(<a href="../S/726.html#L62" title="Defined at 62 in src/org/xml/sax/SAXException.java.">SAXException</a> e)
<a id="L449" name="L449"></a> 449       <em class="brace">{</em>
<a id="L450" name="L450"></a> 450         e.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>();
<a id="L451" name="L451"></a> 451       <em class="brace">}</em>
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454   <em class="brace">}</em>
<a id="L455" name="L455"></a> 455 
<a id="L456" name="L456"></a> 456 
<a id="L457" name="L457"></a> 457 <em class="brace">}</em> <em class="comment">// class IncrementalSAXSource_Xerces</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L187">[^]</a><a href="#L388">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
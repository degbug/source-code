<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/GlyphPainter2.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L60">[^]</a><a href="#L236">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L60" title="Defined at 60.">getPainter</a></li>
<li><a href="#L70" title="Defined at 70.">getSpan</a></li>
<li><a href="#L89" title="Defined at 89.">getHeight</a></li>
<li><a href="#L97" title="Defined at 97.">getAscent</a></li>
<li><a href="#L105" title="Defined at 105.">getDescent</a></li>
<li><a href="#L115" title="Defined at 115.">paint</a></li>
<li><a href="#L138" title="Defined at 138.">modelToView</a></li>
<li><a href="#L167" title="Defined at 167.">viewToModel</a></li>
<li><a href="#L203" title="Defined at 203.">getBoundedPosition</a></li>
<li><a href="#L236" title="Defined at 236.">getNextVisualPositionFrom</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1999, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.text.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.*;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.font.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.geom.Rectangle2D;
<a id="L31" name="L31"></a>  31 
<div class="comment">
  A class to perform rendering of the glyphs.
  This can be implemented to be stateless, or
  to hold some information as a cache to
  facilitate faster rendering and model/view
  translation.  At a minimum, the GlyphPainter
  allows a View implementation to perform its
  duties independent of a particular version
  of JVM and selection of capabilities (i.e.
  shaping for i18n, etc).
  <p>
  This implementation is intended for operation
  under the JDK.  It uses the
  java.awt.font.TextLayout class to do i18n capable
  rendering.
  @author  Timothy Prinzing
  @see GlyphView</p></div>
<a id="L51" name="L51"></a>  51 <strong class="reserved">class</strong> <a href="../R/3296.html" title="Multiple referred from 2 places.">GlyphPainter2</a> <strong class="reserved">extends</strong> <a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a>.<a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> <em class="brace">{</em>
<a id="L52" name="L52"></a>  52 
<a id="L53" name="L53"></a>  53     <strong class="reserved">public</strong> GlyphPainter2(<a href="../S/2375.html#L239" title="Defined at 239 in src/java/awt/font/TextLayout.java.">TextLayout</a> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>) <em class="brace">{</em>
<a id="L54" name="L54"></a>  54         <strong class="reserved">this</strong>.<a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a> = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>;
<a id="L55" name="L55"></a>  55     <em class="brace">}</em>
<a id="L56" name="L56"></a>  56 
<div class="comment">
      Create a painter to use for the given GlyphView.</div>
<a id="L60" name="L60"></a>  60     <strong class="reserved">public</strong> <a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a>.<a href="../S/3275.html#L1147" title="Defined at 1147 in src/javax/swing/text/GlyphView.java.">GlyphPainter</a> <a href="../R/18240.html" title="Multiple referred from 260 places.">getPainter</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L61" name="L61"></a>  61         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L62" name="L62"></a>  62     <em class="brace">}</em>
<a id="L63" name="L63"></a>  63 
<div class="comment">
      Determine the span the glyphs given a start location
      (for tab expansion).  This implementation assumes it
      has no tabs (i.e. TextLayout doesn't deal with tab
      expansion).</div>
<a id="L70" name="L70"></a>  70     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/19117.html" title="Multiple referred from 19 places.">getSpan</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1,
<a id="L71" name="L71"></a>  71                          <a href="../S/3341.html#L34" title="Defined at 34 in src/javax/swing/text/TabExpander.java.">TabExpander</a> e, <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L72" name="L72"></a>  72 
<a id="L73" name="L73"></a>  73         <strong class="reserved">if</strong> ((p0 == v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()) &amp;&amp; (p1 == v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>())) <em class="brace">{</em>
<a id="L74" name="L74"></a>  74             <strong class="reserved">return</strong> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/16840.html" title="Multiple defined in 5 places.">getAdvance</a>();
<a id="L75" name="L75"></a>  75         <em class="brace">}</em>
<a id="L76" name="L76"></a>  76         <strong class="reserved">int</strong> p = v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L77" name="L77"></a>  77         <strong class="reserved">int</strong> index0 = p0 - p;
<a id="L78" name="L78"></a>  78         <strong class="reserved">int</strong> index1 = p1 - p;
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80         <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> hit0 = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L216" title="Defined at 216 in src/java/awt/font/TextHitInfo.java.">afterOffset</a>(index0);
<a id="L81" name="L81"></a>  81         <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> hit1 = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L205" title="Defined at 205 in src/java/awt/font/TextHitInfo.java.">beforeOffset</a>(index1);
<a id="L82" name="L82"></a>  82         <strong class="reserved">float</strong>[] locs = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17497.html" title="Multiple defined in 3 places.">getCaretInfo</a>(hit0);
<a id="L83" name="L83"></a>  83         <strong class="reserved">float</strong> x0 = locs[0];
<a id="L84" name="L84"></a>  84         locs = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17497.html" title="Multiple defined in 3 places.">getCaretInfo</a>(hit1);
<a id="L85" name="L85"></a>  85         <strong class="reserved">float</strong> x1 = locs[0];
<a id="L86" name="L86"></a>  86         <strong class="reserved">return</strong> (x1 &gt; x0) ? x1 - x0 : x0 - x1;
<a id="L87" name="L87"></a>  87     <em class="brace">}</em>
<a id="L88" name="L88"></a>  88 
<a id="L89" name="L89"></a>  89     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/16875.html" title="Multiple referred from 1014 places.">getHeight</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v) <em class="brace">{</em>
<a id="L90" name="L90"></a>  90         <strong class="reserved">return</strong> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>() + <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/18428.html" title="Multiple defined in 9 places.">getDescent</a>() + <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/20053.html" title="Multiple defined in 3 places.">getLeading</a>();
<a id="L91" name="L91"></a>  91     <em class="brace">}</em>
<a id="L92" name="L92"></a>  92 
<div class="comment">
      Fetch the ascent above the baseline for the glyphs
      corresponding to the given range in the model.</div>
<a id="L97" name="L97"></a>  97     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/15126.html" title="Multiple referred from 80 places.">getAscent</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v) <em class="brace">{</em>
<a id="L98" name="L98"></a>  98         <strong class="reserved">return</strong> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>();
<a id="L99" name="L99"></a>  99     <em class="brace">}</em>
<a id="L100" name="L100"></a> 100 
<div class="comment">
      Fetch the descent below the baseline for the glyphs
      corresponding to the given range in the model.</div>
<a id="L105" name="L105"></a> 105     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/16120.html" title="Multiple referred from 35 places.">getDescent</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v) <em class="brace">{</em>
<a id="L106" name="L106"></a> 106         <strong class="reserved">return</strong> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/18428.html" title="Multiple defined in 9 places.">getDescent</a>();
<a id="L107" name="L107"></a> 107     <em class="brace">}</em>
<a id="L108" name="L108"></a> 108 
<div class="comment">
      Paint the glyphs for the given view.  This is implemented
      to only render if the Graphics is of type Graphics2D which
      is required by TextLayout (and this should be the case if
      running on the JDK).</div>
<a id="L115" name="L115"></a> 115     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <strong class="reserved">int</strong> p0, <strong class="reserved">int</strong> p1) <em class="brace">{</em>
<a id="L116" name="L116"></a> 116         <strong class="reserved">if</strong> (g <strong class="reserved">instanceof</strong> <a href="../S/2098.html#L407" title="Defined at 407 in src/java/awt/Graphics2D.java.">Graphics2D</a>) <em class="brace">{</em>
<a id="L117" name="L117"></a> 117             <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a> alloc = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17336.html" title="Multiple defined in 36 places.">getBounds2D</a>();
<a id="L118" name="L118"></a> 118             <a href="../S/2098.html#L407" title="Defined at 407 in src/java/awt/Graphics2D.java.">Graphics2D</a> g2d = (<a href="../S/2098.html#L407" title="Defined at 407 in src/java/awt/Graphics2D.java.">Graphics2D</a>)g;
<a id="L119" name="L119"></a> 119             <strong class="reserved">float</strong> y = (<strong class="reserved">float</strong>) alloc.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>() + <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17040.html" title="Multiple defined in 9 places.">getAscent</a>() + <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/20053.html" title="Multiple defined in 3 places.">getLeading</a>();
<a id="L120" name="L120"></a> 120             <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = (<strong class="reserved">float</strong>) alloc.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>();
<a id="L121" name="L121"></a> 121             <strong class="reserved">if</strong>( p0 &gt; v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() || p1 &lt; v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>() ) <em class="brace">{</em>
<a id="L122" name="L122"></a> 122                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L123" name="L123"></a> 123                     <em class="comment">//TextLayout can't render only part of it's range, so if a</em>
<a id="L124" name="L124"></a> 124                     <em class="comment">//partial range is required, add a clip region.</em>
<a id="L125" name="L125"></a> 125                     <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> s = v.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(p0, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward,
<a id="L126" name="L126"></a> 126                                             p1, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L127" name="L127"></a> 127                     <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> savedClip = g.<a href="../D/17729.html" title="Multiple defined in 5 places.">getClip</a>();
<a id="L128" name="L128"></a> 128                     g2d.<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>(s);
<a id="L129" name="L129"></a> 129                     <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/15161.html" title="Multiple defined in 7 places.">draw</a>(g2d, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L130" name="L130"></a> 130                     g.<a href="../D/32167.html" title="Multiple defined in 6 places.">setClip</a>(savedClip);
<a id="L131" name="L131"></a> 131                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> e) <em class="brace">{</em><em class="brace">}</em>
<a id="L132" name="L132"></a> 132             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L133" name="L133"></a> 133                 <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/15161.html" title="Multiple defined in 7 places.">draw</a>(g2d, <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y);
<a id="L134" name="L134"></a> 134             <em class="brace">}</em>
<a id="L135" name="L135"></a> 135         <em class="brace">}</em>
<a id="L136" name="L136"></a> 136     <em class="brace">}</em>
<a id="L137" name="L137"></a> 137 
<a id="L138" name="L138"></a> 138     <strong class="reserved">public</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/23332.html" title="Multiple referred from 109 places.">modelToView</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> bias,
<a id="L139" name="L139"></a> 139                              <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L140" name="L140"></a> 140         <strong class="reserved">int</strong> offs = pos - v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L141" name="L141"></a> 141         <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a> alloc = <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17336.html" title="Multiple defined in 36 places.">getBounds2D</a>();
<a id="L142" name="L142"></a> 142         <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a> = (bias == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward) ?
<a id="L143" name="L143"></a> 143             <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L216" title="Defined at 216 in src/java/awt/font/TextHitInfo.java.">afterOffset</a>(offs) : <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L205" title="Defined at 205 in src/java/awt/font/TextHitInfo.java.">beforeOffset</a>(offs);
<a id="L144" name="L144"></a> 144         <strong class="reserved">float</strong>[] locs = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/17497.html" title="Multiple defined in 3 places.">getCaretInfo</a>(<a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a>);
<a id="L145" name="L145"></a> 145 
<a id="L146" name="L146"></a> 146         <em class="comment">// vertical at the baseline, should use slope and check if glyphs</em>
<a id="L147" name="L147"></a> 147         <em class="comment">// are being rendered vertically.</em>
<a id="L148" name="L148"></a> 148         alloc.<a href="../D/33672.html" title="Multiple defined in 10 places.">setRect</a>(alloc.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>() + locs[0], alloc.<a href="../D/23797.html" title="Multiple defined in 24 places.">getY</a>(), 1, alloc.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>());
<a id="L149" name="L149"></a> 149         <strong class="reserved">return</strong> alloc;
<a id="L150" name="L150"></a> 150     <em class="brace">}</em>
<a id="L151" name="L151"></a> 151 
<div class="comment">
      Provides a mapping from the view coordinate space to the logical
      coordinate space of the model.
      @param v the view containing the view coordinates
      @param x the X coordinate
      @param y the Y coordinate
      @param a the allocated region to render into
      @param biasReturn either <code>Position.Bias.Forward</code>
       or <code>Position.Bias.Backward</code> is returned as the
       zero-th element of this array
      @return the location within the model that best represents the
       given point of view
      @see View#viewToModel</div>
<a id="L167" name="L167"></a> 167     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/30138.html" title="Multiple referred from 99 places.">viewToModel</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> y, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L168" name="L168"></a> 168                            <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasReturn) <em class="brace">{</em>
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170         <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a> alloc = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a>) ? (<a href="../S/2335.html#L43" title="Defined at 43 in src/java/awt/geom/Rectangle2D.java.">Rectangle2D</a>)<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> : <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17336.html" title="Multiple defined in 36 places.">getBounds2D</a>();
<a id="L171" name="L171"></a> 171         <em class="comment">//Move the y co-ord of the hit onto the baseline.  This is because TextLayout supports</em>
<a id="L172" name="L172"></a> 172         <em class="comment">//italic carets and we do not.</em>
<a id="L173" name="L173"></a> 173         <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a> = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/24268.html" title="Multiple defined in 2 places.">hitTestChar</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> - (<strong class="reserved">float</strong>)alloc.<a href="../D/23738.html" title="Multiple defined in 24 places.">getX</a>(), 0);
<a id="L174" name="L174"></a> 174         <strong class="reserved">int</strong> pos = <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a>.<a href="../S/2364.html#L127" title="Defined at 127 in src/java/awt/font/TextHitInfo.java.">getInsertionIndex</a>();
<a id="L175" name="L175"></a> 175 
<a id="L176" name="L176"></a> 176         <strong class="reserved">if</strong> (pos == v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>()) <em class="brace">{</em>
<a id="L177" name="L177"></a> 177             pos--;
<a id="L178" name="L178"></a> 178         <em class="brace">}</em>
<a id="L179" name="L179"></a> 179 
<a id="L180" name="L180"></a> 180         biasReturn[0] = <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a>.<a href="../S/2364.html#L117" title="Defined at 117 in src/java/awt/font/TextHitInfo.java.">isLeadingEdge</a>() ? <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward : <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L181" name="L181"></a> 181         <strong class="reserved">return</strong> pos + v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L182" name="L182"></a> 182     <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<div class="comment">
      Determines the model location that represents the
      maximum advance that fits within the given span.
      This could be used to break the given view.  The result
      should be a location just shy of the given advance.  This
      differs from viewToModel which returns the closest
      position which might be proud of the maximum advance.
      @param v the view to find the model location to break at.
      @param p0 the location in the model where the
       fragment should start it's representation &gt;= 0.
      @param pos the graphic location along the axis that the
       broken view would occupy &gt;= 0.  This may be useful for
       things like tab calculations.
      @param len specifies the distance into the view
       where a potential break is desired &gt;= 0.
      @return the maximum model location possible for a break.
      @see View#breakView</div>
<a id="L203" name="L203"></a> 203     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15320.html" title="Multiple referred from 2 places.">getBoundedPosition</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> p0, <strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> len) <em class="brace">{</em>
<a id="L204" name="L204"></a> 204         <strong class="reserved">if</strong>( len &lt; 0 )
<a id="L205" name="L205"></a> 205             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Length must be &gt;= 0.");
<a id="L206" name="L206"></a> 206         <em class="comment">// note: this only works because swing uses TextLayouts that are</em>
<a id="L207" name="L207"></a> 207         <em class="comment">// only pure rtl or pure ltr</em>
<a id="L208" name="L208"></a> 208         <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a>;
<a id="L209" name="L209"></a> 209         <strong class="reserved">if</strong> (<a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>()) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210             <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a> = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/24268.html" title="Multiple defined in 2 places.">hitTestChar</a>(len, 0);
<a id="L211" name="L211"></a> 211         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L212" name="L212"></a> 212             <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a> = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/24268.html" title="Multiple defined in 2 places.">hitTestChar</a>(<a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/16840.html" title="Multiple defined in 5 places.">getAdvance</a>() - len, 0);
<a id="L213" name="L213"></a> 213         <em class="brace">}</em>
<a id="L214" name="L214"></a> 214         <strong class="reserved">return</strong> v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() + <a href="../S/2098.html#L821" title="Defined at 821 in src/java/awt/Graphics2D.java.">hit</a>.<a href="../S/2364.html#L107" title="Defined at 107 in src/java/awt/font/TextHitInfo.java.">getCharIndex</a>();
<a id="L215" name="L215"></a> 215     <em class="brace">}</em>
<a id="L216" name="L216"></a> 216 
<div class="comment">
          Provides a way to determine the next visually represented model
          location that one might place a caret.  Some views may not be
          visible, they might not be in the same order found in the model, or
          they just might not allow access to some of the locations in the
          model.
          @param v the view to use
          @param pos the position to convert &gt;= 0
          @param a the allocated region to render into
          @param direction the direction from the current position that can
           be thought of as the arrow keys typically found on a keyboard.
           This may be SwingConstants.WEST, SwingConstants.EAST,
           SwingConstants.NORTH, or SwingConstants.SOUTH.
          @return the location within the model that best represents the next
           location visual position.
          @exception BadLocationException
          @exception IllegalArgumentException for an invalid direction</div>
<a id="L236" name="L236"></a> 236         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17962.html" title="Multiple referred from 24 places.">getNextVisualPositionFrom</a>(<a href="../S/3275.html#L65" title="Defined at 65 in src/javax/swing/text/GlyphView.java.">GlyphView</a> v, <strong class="reserved">int</strong> pos,
<a id="L237" name="L237"></a> 237                                              <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L238" name="L238"></a> 238                                              <strong class="reserved">int</strong> direction,
<a id="L239" name="L239"></a> 239                                              <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet)
<a id="L240" name="L240"></a> 240             <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L241" name="L241"></a> 241 
<a id="L242" name="L242"></a> 242             <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = v.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L243" name="L243"></a> 243             <strong class="reserved">int</strong> startOffset = v.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L244" name="L244"></a> 244             <strong class="reserved">int</strong> endOffset = v.<a href="../D/18771.html" title="Multiple defined in 18 places.">getEndOffset</a>();
<a id="L245" name="L245"></a> 245             <a href="../D/7688.html" title="Multiple defined in 2 places.">Segment</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L246" name="L246"></a> 246             <strong class="reserved">boolean</strong> viewIsLeftToRight;
<a id="L247" name="L247"></a> 247             <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a> currentHit, nextHit;
<a id="L248" name="L248"></a> 248 
<a id="L249" name="L249"></a> 249             <strong class="reserved">switch</strong> (direction) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.NORTH:
<a id="L251" name="L251"></a> 251                 <strong class="reserved">break</strong>;
<a id="L252" name="L252"></a> 252             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.SOUTH:
<a id="L253" name="L253"></a> 253                 <strong class="reserved">break</strong>;
<a id="L254" name="L254"></a> 254             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.EAST:
<a id="L255" name="L255"></a> 255                 viewIsLeftToRight = <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>(doc, startOffset, endOffset);
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257                 <strong class="reserved">if</strong>(startOffset == doc.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258                     <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L260" name="L260"></a> 260                         <strong class="reserved">return</strong> startOffset;
<a id="L261" name="L261"></a> 261                     <em class="brace">}</em>
<a id="L262" name="L262"></a> 262                     <em class="comment">// End case for bidi text where newline is at beginning</em>
<a id="L263" name="L263"></a> 263                     <em class="comment">// of line.</em>
<a id="L264" name="L264"></a> 264                     <strong class="reserved">return</strong> -1;
<a id="L265" name="L265"></a> 265                 <em class="brace">}</em>
<a id="L266" name="L266"></a> 266                 <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L267" name="L267"></a> 267                     <em class="comment">// Entering view from the left.</em>
<a id="L268" name="L268"></a> 268                     <strong class="reserved">if</strong>( viewIsLeftToRight ) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L270" name="L270"></a> 270                         <strong class="reserved">return</strong> startOffset;
<a id="L271" name="L271"></a> 271                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L272" name="L272"></a> 272                         <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = v.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(endOffset - 1, endOffset);
<a id="L273" name="L273"></a> 273                         <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L274" name="L274"></a> 274                         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>);
<a id="L275" name="L275"></a> 275                         <strong class="reserved">if</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n') <em class="brace">{</em>
<a id="L276" name="L276"></a> 276                             biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L277" name="L277"></a> 277                             <strong class="reserved">return</strong> endOffset-1;
<a id="L278" name="L278"></a> 278                         <em class="brace">}</em>
<a id="L279" name="L279"></a> 279                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L280" name="L280"></a> 280                         <strong class="reserved">return</strong> endOffset;
<a id="L281" name="L281"></a> 281                     <em class="brace">}</em>
<a id="L282" name="L282"></a> 282                 <em class="brace">}</em>
<a id="L283" name="L283"></a> 283                 <strong class="reserved">if</strong>( b==<a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward )
<a id="L284" name="L284"></a> 284                     currentHit = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L216" title="Defined at 216 in src/java/awt/font/TextHitInfo.java.">afterOffset</a>(pos-startOffset);
<a id="L285" name="L285"></a> 285                 <strong class="reserved">else</strong>
<a id="L286" name="L286"></a> 286                     currentHit = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L205" title="Defined at 205 in src/java/awt/font/TextHitInfo.java.">beforeOffset</a>(pos-startOffset);
<a id="L287" name="L287"></a> 287                 nextHit = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/20933.html" title="Multiple defined in 3 places.">getNextRightHit</a>(currentHit);
<a id="L288" name="L288"></a> 288                 <strong class="reserved">if</strong>( nextHit == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289                     <strong class="reserved">return</strong> -1;
<a id="L290" name="L290"></a> 290                 <em class="brace">}</em>
<a id="L291" name="L291"></a> 291                 <strong class="reserved">if</strong>( viewIsLeftToRight != <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>() ) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292                     <em class="comment">// If the layout's base direction is different from</em>
<a id="L293" name="L293"></a> 293                     <em class="comment">// this view's run direction, we need to use the weak</em>
<a id="L294" name="L294"></a> 294                     <em class="comment">// carrat.</em>
<a id="L295" name="L295"></a> 295                     nextHit = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../S/2375.html#L1572" title="Defined at 1572 in src/java/awt/font/TextLayout.java.">getVisualOtherHit</a>(nextHit);
<a id="L296" name="L296"></a> 296                 <em class="brace">}</em>
<a id="L297" name="L297"></a> 297                 pos = nextHit.<a href="../S/2364.html#L127" title="Defined at 127 in src/java/awt/font/TextHitInfo.java.">getInsertionIndex</a>() + startOffset;
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299                 <strong class="reserved">if</strong>(pos == endOffset) <em class="brace">{</em>
<a id="L300" name="L300"></a> 300                     <em class="comment">// A move to the right from an internal position will</em>
<a id="L301" name="L301"></a> 301                     <em class="comment">// only take us to the endOffset in a left to right run.</em>
<a id="L302" name="L302"></a> 302                     <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = v.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(endOffset - 1, endOffset);
<a id="L303" name="L303"></a> 303                     <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L304" name="L304"></a> 304                     <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>);
<a id="L305" name="L305"></a> 305                     <strong class="reserved">if</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n') <em class="brace">{</em>
<a id="L306" name="L306"></a> 306                         <strong class="reserved">return</strong> -1;
<a id="L307" name="L307"></a> 307                     <em class="brace">}</em>
<a id="L308" name="L308"></a> 308                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L309" name="L309"></a> 309                 <em class="brace">}</em>
<a id="L310" name="L310"></a> 310                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L312" name="L312"></a> 312                 <em class="brace">}</em>
<a id="L313" name="L313"></a> 313                 <strong class="reserved">return</strong> pos;
<a id="L314" name="L314"></a> 314             <strong class="reserved">case</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>.WEST:
<a id="L315" name="L315"></a> 315                 viewIsLeftToRight = <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>(doc, startOffset, endOffset);
<a id="L316" name="L316"></a> 316 
<a id="L317" name="L317"></a> 317                 <strong class="reserved">if</strong>(startOffset == doc.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) <em class="brace">{</em>
<a id="L318" name="L318"></a> 318                     <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L319" name="L319"></a> 319                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L320" name="L320"></a> 320                         <strong class="reserved">return</strong> startOffset;
<a id="L321" name="L321"></a> 321                     <em class="brace">}</em>
<a id="L322" name="L322"></a> 322                     <em class="comment">// End case for bidi text where newline is at beginning</em>
<a id="L323" name="L323"></a> 323                     <em class="comment">// of line.</em>
<a id="L324" name="L324"></a> 324                     <strong class="reserved">return</strong> -1;
<a id="L325" name="L325"></a> 325                 <em class="brace">}</em>
<a id="L326" name="L326"></a> 326                 <strong class="reserved">if</strong>(pos == -1) <em class="brace">{</em>
<a id="L327" name="L327"></a> 327                     <em class="comment">// Entering view from the right</em>
<a id="L328" name="L328"></a> 328                     <strong class="reserved">if</strong>( viewIsLeftToRight ) <em class="brace">{</em>
<a id="L329" name="L329"></a> 329                         <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = v.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(endOffset - 1, endOffset);
<a id="L330" name="L330"></a> 330                         <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L331" name="L331"></a> 331                         <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>);
<a id="L332" name="L332"></a> 332                         <strong class="reserved">if</strong> ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n') || <a href="../S/1732.html#L123" title="Defined at 123 in src/java/lang/Character.java.">Character</a>.<a href="../D/26262.html" title="Multiple defined in 2 places.">isSpaceChar</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>)) <em class="brace">{</em>
<a id="L333" name="L333"></a> 333                             biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L334" name="L334"></a> 334                             <strong class="reserved">return</strong> endOffset - 1;
<a id="L335" name="L335"></a> 335                         <em class="brace">}</em>
<a id="L336" name="L336"></a> 336                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L337" name="L337"></a> 337                         <strong class="reserved">return</strong> endOffset;
<a id="L338" name="L338"></a> 338                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L339" name="L339"></a> 339                         biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L340" name="L340"></a> 340                         <strong class="reserved">return</strong> startOffset;
<a id="L341" name="L341"></a> 341                    <em class="brace">}</em>
<a id="L342" name="L342"></a> 342                 <em class="brace">}</em>
<a id="L343" name="L343"></a> 343                 <strong class="reserved">if</strong>( b==<a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward )
<a id="L344" name="L344"></a> 344                     currentHit = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L216" title="Defined at 216 in src/java/awt/font/TextHitInfo.java.">afterOffset</a>(pos-startOffset);
<a id="L345" name="L345"></a> 345                 <strong class="reserved">else</strong>
<a id="L346" name="L346"></a> 346                     currentHit = <a href="../S/2364.html#L88" title="Defined at 88 in src/java/awt/font/TextHitInfo.java.">TextHitInfo</a>.<a href="../S/2364.html#L205" title="Defined at 205 in src/java/awt/font/TextHitInfo.java.">beforeOffset</a>(pos-startOffset);
<a id="L347" name="L347"></a> 347                 nextHit = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/20916.html" title="Multiple defined in 3 places.">getNextLeftHit</a>(currentHit);
<a id="L348" name="L348"></a> 348                 <strong class="reserved">if</strong>( nextHit == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L349" name="L349"></a> 349                     <strong class="reserved">return</strong> -1;
<a id="L350" name="L350"></a> 350                 <em class="brace">}</em>
<a id="L351" name="L351"></a> 351                 <strong class="reserved">if</strong>( viewIsLeftToRight != <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../D/25785.html" title="Multiple defined in 18 places.">isLeftToRight</a>() ) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352                     <em class="comment">// If the layout's base direction is different from</em>
<a id="L353" name="L353"></a> 353                     <em class="comment">// this view's run direction, we need to use the weak</em>
<a id="L354" name="L354"></a> 354                     <em class="comment">// carrat.</em>
<a id="L355" name="L355"></a> 355                     nextHit = <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>.<a href="../S/2375.html#L1572" title="Defined at 1572 in src/java/awt/font/TextLayout.java.">getVisualOtherHit</a>(nextHit);
<a id="L356" name="L356"></a> 356                 <em class="brace">}</em>
<a id="L357" name="L357"></a> 357                 pos = nextHit.<a href="../S/2364.html#L127" title="Defined at 127 in src/java/awt/font/TextHitInfo.java.">getInsertionIndex</a>() + startOffset;
<a id="L358" name="L358"></a> 358 
<a id="L359" name="L359"></a> 359                 <strong class="reserved">if</strong>(pos == endOffset) <em class="brace">{</em>
<a id="L360" name="L360"></a> 360                     <em class="comment">// A move to the left from an internal position will</em>
<a id="L361" name="L361"></a> 361                     <em class="comment">// only take us to the endOffset in a right to left run.</em>
<a id="L362" name="L362"></a> 362                     <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a> = v.<a href="../D/23044.html" title="Multiple defined in 43 places.">getText</a>(endOffset - 1, endOffset);
<a id="L363" name="L363"></a> 363                     <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/11496.html" title="Multiple defined in 19 places.">array</a>[<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>];
<a id="L364" name="L364"></a> 364                     <a href="../S/3326.html#L42" title="Defined at 42 in src/javax/swing/text/SegmentCache.java.">SegmentCache</a>.<a href="../S/3326.html#L73" title="Defined at 73 in src/javax/swing/text/SegmentCache.java.">releaseSharedSegment</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>);
<a id="L365" name="L365"></a> 365                     <strong class="reserved">if</strong>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> == '\n') <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                         <strong class="reserved">return</strong> -1;
<a id="L367" name="L367"></a> 367                     <em class="brace">}</em>
<a id="L368" name="L368"></a> 368                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward;
<a id="L369" name="L369"></a> 369                 <em class="brace">}</em>
<a id="L370" name="L370"></a> 370                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L371" name="L371"></a> 371                     biasRet[0] = <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward;
<a id="L372" name="L372"></a> 372                 <em class="brace">}</em>
<a id="L373" name="L373"></a> 373                 <strong class="reserved">return</strong> pos;
<a id="L374" name="L374"></a> 374             <strong class="reserved">default</strong>:
<a id="L375" name="L375"></a> 375                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Bad direction: " + direction);
<a id="L376" name="L376"></a> 376             <em class="brace">}</em>
<a id="L377" name="L377"></a> 377             <strong class="reserved">return</strong> pos;
<a id="L378" name="L378"></a> 378 
<a id="L379" name="L379"></a> 379         <em class="brace">}</em>
<a id="L380" name="L380"></a> 380     <em class="comment">// --- variables ---------------------------------------------</em>
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382     <a href="../S/2375.html#L239" title="Defined at 239 in src/java/awt/font/TextLayout.java.">TextLayout</a> <a href="../D/26763.html" title="Multiple defined in 14 places.">layout</a>;
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L60">[^]</a><a href="#L236">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
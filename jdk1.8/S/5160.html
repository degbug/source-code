<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L398">[^]</a><a href="#L2064">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L398" title="Defined at 398.">getGrammarBucket</a></li>
<li><a href="#L420" title="Defined at 420.">reset</a></li>
<li><a href="#L481" title="Defined at 481.">getRecognizedFeatures</a></li>
<li><a href="#L500" title="Defined at 500.">setFeature</a></li>
<li><a href="#L509" title="Defined at 509.">getRecognizedProperties</a></li>
<li><a href="#L528" title="Defined at 528.">setProperty</a></li>
<li><a href="#L541" title="Defined at 541.">getFeatureDefault</a></li>
<li><a href="#L559" title="Defined at 559.">getPropertyDefault</a></li>
<li><a href="#L573" title="Defined at 573.">setDocumentHandler</a></li>
<li><a href="#L578" title="Defined at 578.">getDocumentHandler</a></li>
<li><a href="#L588" title="Defined at 588.">setDocumentSource</a></li>
<li><a href="#L593" title="Defined at 593.">getDocumentSource</a></li>
<li><a href="#L619" title="Defined at 619.">startDocument</a></li>
<li><a href="#L654" title="Defined at 654.">xmlDecl</a></li>
<li><a href="#L679" title="Defined at 679.">doctypeDecl</a></li>
<li><a href="#L739" title="Defined at 739.">startElement</a></li>
<li><a href="#L760" title="Defined at 760.">emptyElement</a></li>
<li><a href="#L784" title="Defined at 784.">characters</a></li>
<li><a href="#L860" title="Defined at 860.">ignorableWhitespace</a></li>
<li><a href="#L877" title="Defined at 877.">endElement</a></li>
<li><a href="#L889" title="Defined at 889.">startCDATA</a></li>
<li><a href="#L908" title="Defined at 908.">endCDATA</a></li>
<li><a href="#L924" title="Defined at 924.">endDocument</a></li>
<li><a href="#L941" title="Defined at 941.">comment</a></li>
<li><a href="#L979" title="Defined at 979.">processingInstruction</a></li>
<li><a href="#L1017" title="Defined at 1017.">startGeneralEntity</a></li>
<li><a href="#L1052" title="Defined at 1052.">endGeneralEntity</a></li>
<li><a href="#L1073" title="Defined at 1073.">textDecl</a></li>
<li><a href="#L1082" title="Defined at 1082.">hasGrammar</a></li>
<li><a href="#L1087" title="Defined at 1087.">validate</a></li>
<li><a href="#L1108" title="Defined at 1108.">addDTDDefaultAttrsAndValidate</a></li>
<li><a href="#L1318" title="Defined at 1318.">getExternalEntityRefInAttrValue</a></li>
<li><a href="#L1344" title="Defined at 1344.">validateDTDattribute</a></li>
<li><a href="#L1476" title="Defined at 1476.">invalidStandaloneAttDef</a></li>
<li><a href="#L1505" title="Defined at 1505.">normalizeAttrValue</a></li>
<li><a href="#L1594" title="Defined at 1594.">rootElementSpecified</a></li>
<li><a href="#L1640" title="Defined at 1640.">checkContent</a></li>
<li><a href="#L1714" title="Defined at 1714.">getContentSpecType</a></li>
<li><a href="#L1726" title="Defined at 1726.">charDataInContent</a></li>
<li><a href="#L1749" title="Defined at 1749.">getAttributeTypeName</a></li>
<li><a href="#L1785" title="Defined at 1785.">init</a></li>
<li><a href="#L1812" title="Defined at 1812.">ensureStackCapacity</a></li>
<li><a href="#L1845" title="Defined at 1845.">handleStartElement</a></li>
<li><a href="#L1963" title="Defined at 1963.">startNamespaceScope</a></li>
<li><a href="#L1967" title="Defined at 1967.">handleEndElement</a></li>
<li><a href="#L2044" title="Defined at 2044.">endNamespaceScope</a></li>
<li><a href="#L2060" title="Defined at 2060.">isSpace</a></li>
<li><a href="#L2064" title="Defined at 2064.">characterData</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.dtd;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.Constants;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.RevalidationHandler;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.XMLEntityManager;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.XMLErrorReporter;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dtd.models.ContentModelValidator;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dv.DTDDVFactory;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dv.DatatypeValidator;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.dv.InvalidDatatypeValueException;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.msg.XMLMessageFormatter;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.validation.ValidationManager;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.validation.ValidationState;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.SymbolTable;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XMLChar;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.XMLSymbols;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.Augmentations;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.NamespaceContext;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.QName;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLAttributes;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLDocumentHandler;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLLocator;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLResourceIdentifier;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLString;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XNIException;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.Grammar;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarDescription;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.grammars.XMLGrammarPool;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLComponent;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLComponentManager;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLConfigurationException;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLDocumentFilter;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.parser.XMLDocumentSource;
<a id="L54" name="L54"></a>  54 
<div class="comment">
  The DTD validator. The validator implements a document
  filter: receiving document events from the scanner; validating
  the content and structure; augmenting the InfoSet, if applicable;
  and notifying the parser of the information resulting from the
  validation process.
  <p> Formerly, this component also handled DTD events and grammar construction.
  To facilitate the development of a meaningful DTD grammar caching/preparsing
  framework, this functionality has been moved into the XMLDTDLoader
  class.  Therefore, this class no longer implements the DTDFilter
  or DTDContentModelFilter interfaces.
  </p><p>
  This component requires the following features and properties from the
  component manager that uses it:
  </p><ul><li>http://xml.org/sax/features/namespaces</li><li>http://xml.org/sax/features/validation</li><li>http://apache.org/xml/features/validation/dynamic</li><li>http://apache.org/xml/properties/internal/symbol-table</li><li>http://apache.org/xml/properties/internal/error-reporter</li><li>http://apache.org/xml/properties/internal/grammar-pool</li><li>http://apache.org/xml/properties/internal/datatype-validator-factory</li>
  </ul>
  @xerces.internal
  @author Eric Ye, IBM
  @author Andy Clark, IBM
  @author Jeffrey Rodriguez IBM
  @author Neil Graham, IBM
  @version $Id: XMLDTDValidator.java,v 1.8 2010-11-01 04:39:42 joehw Exp $</div>
<a id="L88" name="L88"></a>  88 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/8981.html" title="Multiple referred from 27 places.">XMLDTDValidator</a>
<a id="L89" name="L89"></a>  89         <strong class="reserved">implements</strong> <a href="../S/5506.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLComponent.java.">XMLComponent</a>, <a href="../S/5501.html#L32" title="Defined at 32 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentFilter.java.">XMLDocumentFilter</a>, <a href="../S/5162.html#L75" title="Defined at 75 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidatorFilter.java.">XMLDTDValidatorFilter</a>, <a href="../S/5034.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/RevalidationHandler.java.">RevalidationHandler</a> <em class="brace">{</em>
<a id="L90" name="L90"></a>  90 
<a id="L91" name="L91"></a>  91     <em class="comment">//</em>
<a id="L92" name="L92"></a>  92     <em class="comment">// Constants</em>
<a id="L93" name="L93"></a>  93     <em class="comment">//</em>
<a id="L94" name="L94"></a>  94 
<div class="comment">
     /** Symbol: "&lt;&lt;datatypes&gt;&gt;". */</div>
<a id="L96" name="L96"></a>  96 
<div class="comment">
     /** Top level scope (-1). */</div>
<a id="L98" name="L98"></a>  98     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TOP_LEVEL_SCOPE = -1;
<a id="L99" name="L99"></a>  99 
<a id="L100" name="L100"></a> 100     <em class="comment">// feature identifiers</em>
<a id="L101" name="L101"></a> 101 
<div class="comment">
     /** Feature identifier: namespaces. */</div>
<a id="L103" name="L103"></a> 103     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> NAMESPACES =
<a id="L104" name="L104"></a> 104         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SAX_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NAMESPACES_FEATURE;
<a id="L105" name="L105"></a> 105 
<div class="comment">
     /** Feature identifier: validation. */</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> VALIDATION =
<a id="L108" name="L108"></a> 108         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SAX_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.VALIDATION_FEATURE;
<a id="L109" name="L109"></a> 109 
<div class="comment">
     /** Feature identifier: dynamic validation. */</div>
<a id="L111" name="L111"></a> 111     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> DYNAMIC_VALIDATION =
<a id="L112" name="L112"></a> 112         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.DYNAMIC_VALIDATION_FEATURE;
<a id="L113" name="L113"></a> 113 
<div class="comment">
     /** Feature identifier: balance syntax trees. */</div>
<a id="L115" name="L115"></a> 115     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> BALANCE_SYNTAX_TREES =
<a id="L116" name="L116"></a> 116         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.BALANCE_SYNTAX_TREES;
<a id="L117" name="L117"></a> 117 
<div class="comment">
     /** Feature identifier: warn on duplicate attdef */</div>
<a id="L119" name="L119"></a> 119     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> WARN_ON_DUPLICATE_ATTDEF =
<a id="L120" name="L120"></a> 120         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.WARN_ON_DUPLICATE_ATTDEF_FEATURE;
<a id="L121" name="L121"></a> 121 
<a id="L122" name="L122"></a> 122         <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> PARSER_SETTINGS =
<a id="L123" name="L123"></a> 123                 <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.PARSER_SETTINGS;
<a id="L124" name="L124"></a> 124 
<a id="L125" name="L125"></a> 125 
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127     <em class="comment">// property identifiers</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
     /** Property identifier: symbol table. */</div>
<a id="L130" name="L130"></a> 130     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> SYMBOL_TABLE =
<a id="L131" name="L131"></a> 131         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SYMBOL_TABLE_PROPERTY;
<a id="L132" name="L132"></a> 132 
<div class="comment">
     /** Property identifier: error reporter. */</div>
<a id="L134" name="L134"></a> 134     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ERROR_REPORTER =
<a id="L135" name="L135"></a> 135         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ERROR_REPORTER_PROPERTY;
<a id="L136" name="L136"></a> 136 
<div class="comment">
     /** Property identifier: grammar pool. */</div>
<a id="L138" name="L138"></a> 138     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> GRAMMAR_POOL =
<a id="L139" name="L139"></a> 139         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XMLGRAMMAR_POOL_PROPERTY;
<a id="L140" name="L140"></a> 140 
<div class="comment">
     /** Property identifier: datatype validator factory. */</div>
<a id="L142" name="L142"></a> 142     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> DATATYPE_VALIDATOR_FACTORY =
<a id="L143" name="L143"></a> 143         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.DATATYPE_VALIDATOR_FACTORY_PROPERTY;
<a id="L144" name="L144"></a> 144 
<a id="L145" name="L145"></a> 145     <em class="comment">// property identifier:  ValidationManager</em>
<a id="L146" name="L146"></a> 146     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> VALIDATION_MANAGER =
<a id="L147" name="L147"></a> 147         <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.VALIDATION_MANAGER_PROPERTY;
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149     <em class="comment">// recognized features and properties</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
     /** Recognized features. */</div>
<a id="L152" name="L152"></a> 152     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] RECOGNIZED_FEATURES = <em class="brace">{</em>
<a id="L153" name="L153"></a> 153         NAMESPACES,
<a id="L154" name="L154"></a> 154         VALIDATION,
<a id="L155" name="L155"></a> 155         DYNAMIC_VALIDATION,
<a id="L156" name="L156"></a> 156         BALANCE_SYNTAX_TREES
<a id="L157" name="L157"></a> 157     <em class="brace">}</em>;
<a id="L158" name="L158"></a> 158 
<div class="comment">
     /** Feature defaults. */</div>
<a id="L160" name="L160"></a> 160     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>[] FEATURE_DEFAULTS = <em class="brace">{</em>
<a id="L161" name="L161"></a> 161         <strong class="reserved">null</strong>,
<a id="L162" name="L162"></a> 162         <strong class="reserved">null</strong>,
<a id="L163" name="L163"></a> 163         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE,
<a id="L164" name="L164"></a> 164         <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE,
<a id="L165" name="L165"></a> 165     <em class="brace">}</em>;
<a id="L166" name="L166"></a> 166 
<div class="comment">
     /** Recognized properties. */</div>
<a id="L168" name="L168"></a> 168     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] RECOGNIZED_PROPERTIES = <em class="brace">{</em>
<a id="L169" name="L169"></a> 169         SYMBOL_TABLE,
<a id="L170" name="L170"></a> 170         ERROR_REPORTER,
<a id="L171" name="L171"></a> 171         GRAMMAR_POOL,
<a id="L172" name="L172"></a> 172         DATATYPE_VALIDATOR_FACTORY,
<a id="L173" name="L173"></a> 173         VALIDATION_MANAGER
<a id="L174" name="L174"></a> 174     <em class="brace">}</em>;
<a id="L175" name="L175"></a> 175 
<div class="comment">
     /** Property defaults. */</div>
<a id="L177" name="L177"></a> 177     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] PROPERTY_DEFAULTS = <em class="brace">{</em>
<a id="L178" name="L178"></a> 178         <strong class="reserved">null</strong>,
<a id="L179" name="L179"></a> 179         <strong class="reserved">null</strong>,
<a id="L180" name="L180"></a> 180         <strong class="reserved">null</strong>,
<a id="L181" name="L181"></a> 181         <strong class="reserved">null</strong>,
<a id="L182" name="L182"></a> 182         <strong class="reserved">null</strong>,
<a id="L183" name="L183"></a> 183     <em class="brace">}</em>;
<a id="L184" name="L184"></a> 184 
<a id="L185" name="L185"></a> 185     <em class="comment">// debugging</em>
<a id="L186" name="L186"></a> 186 
<div class="comment">
     /** Compile to true to debug attributes. */</div>
<a id="L188" name="L188"></a> 188     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_ATTRIBUTES = <strong class="reserved">false</strong>;
<a id="L189" name="L189"></a> 189 
<div class="comment">
     /** Compile to true to debug element children. */</div>
<a id="L191" name="L191"></a> 191     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_ELEMENT_CHILDREN = <strong class="reserved">false</strong>;
<a id="L192" name="L192"></a> 192 
<a id="L193" name="L193"></a> 193     <em class="comment">//</em>
<a id="L194" name="L194"></a> 194     <em class="comment">// Data</em>
<a id="L195" name="L195"></a> 195     <em class="comment">//</em>
<a id="L196" name="L196"></a> 196 
<a id="L197" name="L197"></a> 197     <em class="comment">// updated during reset</em>
<a id="L198" name="L198"></a> 198     <strong class="reserved">protected</strong> <a href="../S/5240.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">ValidationManager</a> fValidationManager = <strong class="reserved">null</strong>;
<a id="L199" name="L199"></a> 199 
<a id="L200" name="L200"></a> 200     <em class="comment">// validation state</em>
<a id="L201" name="L201"></a> 201     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <a href="../S/5239.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationState.java.">ValidationState</a> fValidationState = <strong class="reserved">new</strong> <a href="../S/5239.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationState.java.">ValidationState</a>();
<a id="L202" name="L202"></a> 202 
<a id="L203" name="L203"></a> 203     <em class="comment">// features</em>
<a id="L204" name="L204"></a> 204 
<div class="comment">
     /** Namespaces. */</div>
<a id="L206" name="L206"></a> 206     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fNamespaces;
<a id="L207" name="L207"></a> 207 
<div class="comment">
     /** Validation. */</div>
<a id="L209" name="L209"></a> 209     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fValidation;
<a id="L210" name="L210"></a> 210 
<div class="comment">
     /** Validation against only DTD */</div>
<a id="L212" name="L212"></a> 212     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fDTDValidation;
<a id="L213" name="L213"></a> 213 
<div class="comment">
      Dynamic validation. This state of this feature is only useful when
      the validation feature is set to <code>true</code>.</div>
<a id="L218" name="L218"></a> 218     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fDynamicValidation;
<a id="L219" name="L219"></a> 219 
<div class="comment">
     /** Controls whether the DTD grammar produces balanced syntax trees. */</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fBalanceSyntaxTrees;
<a id="L222" name="L222"></a> 222 
<div class="comment">
     /** warn on duplicate attribute definition, this feature works only when validation is true */</div>
<a id="L224" name="L224"></a> 224     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fWarnDuplicateAttdef;
<a id="L225" name="L225"></a> 225 
<a id="L226" name="L226"></a> 226     <em class="comment">// properties</em>
<a id="L227" name="L227"></a> 227 
<div class="comment">
     /** Symbol table. */</div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">protected</strong> <a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a> fSymbolTable;
<a id="L230" name="L230"></a> 230 
<div class="comment">
     /** Error reporter. */</div>
<a id="L232" name="L232"></a> 232     <strong class="reserved">protected</strong> <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a> fErrorReporter;
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234     <em class="comment">// the grammar pool</em>
<a id="L235" name="L235"></a> 235     <strong class="reserved">protected</strong> <a href="../S/5516.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarPool.java.">XMLGrammarPool</a> fGrammarPool;
<a id="L236" name="L236"></a> 236 
<div class="comment">
     /** Grammar bucket. */</div>
<a id="L238" name="L238"></a> 238     <strong class="reserved">protected</strong> <a href="../S/5137.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammarBucket.java.">DTDGrammarBucket</a> fGrammarBucket;
<a id="L239" name="L239"></a> 239 
<div class="comment">
     /* location of the document as passed in from startDocument call */</div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">protected</strong> <a href="../S/5517.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xni/XMLLocator.java.">XMLLocator</a> fDocLocation;
<a id="L242" name="L242"></a> 242 
<div class="comment">
     /** Namespace support. */</div>
<a id="L244" name="L244"></a> 244     <strong class="reserved">protected</strong> <a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a> fNamespaceContext = <strong class="reserved">null</strong>;
<a id="L245" name="L245"></a> 245 
<div class="comment">
     /** Datatype validator factory. */</div>
<a id="L247" name="L247"></a> 247     <strong class="reserved">protected</strong> <a href="../S/5172.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/impl/dv/DTDDVFactory.java.">DTDDVFactory</a> fDatatypeValidatorFactory;
<a id="L248" name="L248"></a> 248 
<a id="L249" name="L249"></a> 249     <em class="comment">// handlers</em>
<a id="L250" name="L250"></a> 250 
<div class="comment">
     /** Document handler. */</div>
<a id="L252" name="L252"></a> 252     <strong class="reserved">protected</strong> <a href="../S/5518.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/XMLDocumentHandler.java.">XMLDocumentHandler</a> fDocumentHandler;
<a id="L253" name="L253"></a> 253 
<a id="L254" name="L254"></a> 254     <strong class="reserved">protected</strong> <a href="../S/5502.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentSource.java.">XMLDocumentSource</a> fDocumentSource;
<a id="L255" name="L255"></a> 255     <em class="comment">// grammars</em>
<a id="L256" name="L256"></a> 256 
<div class="comment">
     /** DTD Grammar. */</div>
<a id="L258" name="L258"></a> 258     <strong class="reserved">protected</strong> <a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a> fDTDGrammar;
<a id="L259" name="L259"></a> 259 
<a id="L260" name="L260"></a> 260     <em class="comment">// state</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
     /** True if seen DOCTYPE declaration. */</div>
<a id="L263" name="L263"></a> 263     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> fSeenDoctypeDecl = <strong class="reserved">false</strong>;
<a id="L264" name="L264"></a> 264 
<div class="comment">
     /** Perform validation. */</div>
<a id="L266" name="L266"></a> 266     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> fPerformValidation;
<a id="L267" name="L267"></a> 267 
<div class="comment">
     /** Schema type: None, DTD, Schema */</div>
<a id="L269" name="L269"></a> 269     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fSchemaType;
<a id="L270" name="L270"></a> 270 
<a id="L271" name="L271"></a> 271     <em class="comment">// information regarding the current element</em>
<a id="L272" name="L272"></a> 272 
<div class="comment">
     /** Current element name. */</div>
<a id="L274" name="L274"></a> 274     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fCurrentElement = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L275" name="L275"></a> 275 
<div class="comment">
     /** Current element index. */</div>
<a id="L277" name="L277"></a> 277     <strong class="reserved">private</strong> <strong class="reserved">int</strong> fCurrentElementIndex = -1;
<a id="L278" name="L278"></a> 278 
<div class="comment">
     /** Current content spec type. */</div>
<a id="L280" name="L280"></a> 280     <strong class="reserved">private</strong> <strong class="reserved">int</strong> fCurrentContentSpecType = -1;
<a id="L281" name="L281"></a> 281 
<div class="comment">
     /** The root element name. */</div>
<a id="L283" name="L283"></a> 283     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fRootElement = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> fInCDATASection = <strong class="reserved">false</strong>;
<a id="L286" name="L286"></a> 286     <em class="comment">// element stack</em>
<a id="L287" name="L287"></a> 287 
<div class="comment">
     /** Element index stack. */</div>
<a id="L289" name="L289"></a> 289     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] fElementIndexStack = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[8];
<a id="L290" name="L290"></a> 290 
<div class="comment">
     /** Content spec type stack. */</div>
<a id="L292" name="L292"></a> 292     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] fContentSpecTypeStack = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[8];
<a id="L293" name="L293"></a> 293 
<div class="comment">
     /** Element name stack. */</div>
<a id="L295" name="L295"></a> 295     <strong class="reserved">private</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] fElementQNamePartsStack = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[8];
<a id="L296" name="L296"></a> 296 
<a id="L297" name="L297"></a> 297     <em class="comment">// children list and offset stack</em>
<a id="L298" name="L298"></a> 298 
<div class="comment">
      Element children. This data structure is a growing stack that
      holds the children of elements from the root to the current
      element depth. This structure never gets "deeper" than the
      deepest element. Space is re-used once each element is closed.
      <p>
      <strong>Note:</strong> This is much more efficient use of memory
      than creating new arrays for each element depth.
      </p><p>
      <strong>Note:</strong> The use of this data structure is for
      validation "on the way out". If the validation model changes to
      "on the way in", then this data structure is not needed.</p></div>
<a id="L312" name="L312"></a> 312     <strong class="reserved">private</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] fElementChildren = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[32];
<a id="L313" name="L313"></a> 313 
<div class="comment">
     /** Element children count. */</div>
<a id="L315" name="L315"></a> 315     <strong class="reserved">private</strong> <strong class="reserved">int</strong> fElementChildrenLength = 0;
<a id="L316" name="L316"></a> 316 
<div class="comment">
      Element children offset stack. This stack refers to offsets
      into the <code>fElementChildren</code> array.
      @see #fElementChildren</div>
<a id="L322" name="L322"></a> 322     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] fElementChildrenOffsetStack = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[32];
<a id="L323" name="L323"></a> 323 
<div class="comment">
     /** Element depth. */</div>
<a id="L325" name="L325"></a> 325     <strong class="reserved">private</strong> <strong class="reserved">int</strong> fElementDepth = -1;
<a id="L326" name="L326"></a> 326 
<a id="L327" name="L327"></a> 327     <em class="comment">// validation states</em>
<a id="L328" name="L328"></a> 328 
<div class="comment">
     /** True if seen the root element. */</div>
<a id="L330" name="L330"></a> 330     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> fSeenRootElement = <strong class="reserved">false</strong>;
<a id="L331" name="L331"></a> 331 
<div class="comment">
     /** True if inside of element content. */</div>
<a id="L333" name="L333"></a> 333     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> fInElementContent = <strong class="reserved">false</strong>;
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335     <em class="comment">// temporary variables</em>
<a id="L336" name="L336"></a> 336 
<div class="comment">
     /** Temporary element declaration. */</div>
<a id="L338" name="L338"></a> 338     <strong class="reserved">private</strong> <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a> fTempElementDecl = <strong class="reserved">new</strong> <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>();
<a id="L339" name="L339"></a> 339 
<div class="comment">
     /** Temporary atribute declaration. */</div>
<a id="L341" name="L341"></a> 341     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/5157.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLAttributeDecl.java.">XMLAttributeDecl</a> fTempAttDecl = <strong class="reserved">new</strong> <a href="../S/5157.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLAttributeDecl.java.">XMLAttributeDecl</a>();
<a id="L342" name="L342"></a> 342 
<div class="comment">
     /** Temporary entity declaration. */</div>
<a id="L344" name="L344"></a> 344     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/5138.html#L66" title="Defined at 66 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLEntityDecl.java.">XMLEntityDecl</a> fEntityDecl = <strong class="reserved">new</strong> <a href="../S/5138.html#L66" title="Defined at 66 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLEntityDecl.java.">XMLEntityDecl</a>();
<a id="L345" name="L345"></a> 345 
<div class="comment">
     /** Temporary qualified name. */</div>
<a id="L347" name="L347"></a> 347     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fTempQName = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L348" name="L348"></a> 348 
<div class="comment">
     /** Temporary string buffers. */</div>
<a id="L350" name="L350"></a> 350     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> fBuffer = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L351" name="L351"></a> 351 
<a id="L352" name="L352"></a> 352     <em class="comment">// symbols: general</em>
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354     <em class="comment">// attribute validators</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
     /** Datatype validator: ID. */</div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValID;
<a id="L358" name="L358"></a> 358 
<div class="comment">
     /** Datatype validator: IDREF. */</div>
<a id="L360" name="L360"></a> 360     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValIDRef;
<a id="L361" name="L361"></a> 361 
<div class="comment">
     /** Datatype validator: IDREFS. */</div>
<a id="L363" name="L363"></a> 363     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValIDRefs;
<a id="L364" name="L364"></a> 364 
<div class="comment">
     /** Datatype validator: ENTITY. */</div>
<a id="L366" name="L366"></a> 366     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValENTITY;
<a id="L367" name="L367"></a> 367 
<div class="comment">
     /** Datatype validator: ENTITIES. */</div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValENTITIES;
<a id="L370" name="L370"></a> 370 
<div class="comment">
     /** Datatype validator: NMTOKEN. */</div>
<a id="L372" name="L372"></a> 372     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValNMTOKEN;
<a id="L373" name="L373"></a> 373 
<div class="comment">
     /** Datatype validator: NMTOKENS. */</div>
<a id="L375" name="L375"></a> 375     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValNMTOKENS;
<a id="L376" name="L376"></a> 376 
<div class="comment">
     /** Datatype validator: NOTATION. */</div>
<a id="L378" name="L378"></a> 378     <strong class="reserved">protected</strong> <a href="../S/5173.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/impl/dv/DatatypeValidator.java.">DatatypeValidator</a> fValNOTATION;
<a id="L379" name="L379"></a> 379 
<a id="L380" name="L380"></a> 380     <em class="comment">// to check for duplicate ID or ANNOTATION attribute declare in</em>
<a id="L381" name="L381"></a> 381     <em class="comment">// ATTLIST, and misc VCs</em>
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383     <em class="comment">//</em>
<a id="L384" name="L384"></a> 384     <em class="comment">// Constructors</em>
<a id="L385" name="L385"></a> 385     <em class="comment">//</em>
<a id="L386" name="L386"></a> 386 
<div class="comment">
     /** Default constructor. */</div>
<a id="L388" name="L388"></a> 388     <strong class="reserved">public</strong> XMLDTDValidator() <em class="brace">{</em>
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390         <em class="comment">// initialize data</em>
<a id="L391" name="L391"></a> 391         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; fElementQNamePartsStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             fElementQNamePartsStack[i] = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L393" name="L393"></a> 393         <em class="brace">}</em>
<a id="L394" name="L394"></a> 394         fGrammarBucket = <strong class="reserved">new</strong> <a href="../S/5137.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammarBucket.java.">DTDGrammarBucket</a>();
<a id="L395" name="L395"></a> 395 
<a id="L396" name="L396"></a> 396     <em class="brace">}</em> <em class="comment">// &lt;init&gt;()</em>
<a id="L397" name="L397"></a> 397 
<a id="L398" name="L398"></a> 398     <a href="../S/5137.html#L81" title="Defined at 81 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammarBucket.java.">DTDGrammarBucket</a> <a href="../R/16801.html" title="Multiple referred from 3 places.">getGrammarBucket</a>() <em class="brace">{</em>
<a id="L399" name="L399"></a> 399         <strong class="reserved">return</strong> fGrammarBucket;
<a id="L400" name="L400"></a> 400     <em class="brace">}</em> <em class="comment">// getGrammarBucket():  DTDGrammarBucket</em>
<a id="L401" name="L401"></a> 401 
<a id="L402" name="L402"></a> 402     <em class="comment">//</em>
<a id="L403" name="L403"></a> 403     <em class="comment">// XMLComponent methods</em>
<a id="L404" name="L404"></a> 404     <em class="comment">//</em>
<a id="L405" name="L405"></a> 405 
<div class="comment">
      Resets the component. The component can query the component manager
      about any features and properties that affect the operation of the
      component.
      @param componentManager The component manager.
      @throws SAXException Thrown by component on finitialization error.
                           For example, if a feature or property is
                           required for the operation of the component, the
                           component manager may throw a
                           SAXNotRecognizedException or a
                           SAXNotSupportedException.</div>
<a id="L420" name="L420"></a> 420     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>(<a href="../S/5495.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLComponentManager.java.">XMLComponentManager</a> componentManager)
<a id="L421" name="L421"></a> 421     <strong class="reserved">throws</strong> <a href="../S/5503.html#L35" title="Defined at 35 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLConfigurationException.java.">XMLConfigurationException</a> <em class="brace">{</em>
<a id="L422" name="L422"></a> 422 
<a id="L423" name="L423"></a> 423         <em class="comment">// clear grammars</em>
<a id="L424" name="L424"></a> 424         fDTDGrammar = <strong class="reserved">null</strong>;
<a id="L425" name="L425"></a> 425         fSeenDoctypeDecl = <strong class="reserved">false</strong>;
<a id="L426" name="L426"></a> 426         fInCDATASection = <strong class="reserved">false</strong>;
<a id="L427" name="L427"></a> 427         <em class="comment">// initialize state</em>
<a id="L428" name="L428"></a> 428         fSeenRootElement = <strong class="reserved">false</strong>;
<a id="L429" name="L429"></a> 429         fInElementContent = <strong class="reserved">false</strong>;
<a id="L430" name="L430"></a> 430         fCurrentElementIndex = -1;
<a id="L431" name="L431"></a> 431         fCurrentContentSpecType = -1;
<a id="L432" name="L432"></a> 432 
<a id="L433" name="L433"></a> 433         fRootElement.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L434" name="L434"></a> 434 
<a id="L435" name="L435"></a> 435                 fValidationState.<a href="../S/5239.html#L128" title="Defined at 128 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationState.java.">resetIDTables</a>();
<a id="L436" name="L436"></a> 436 
<a id="L437" name="L437"></a> 437                 fGrammarBucket.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L438" name="L438"></a> 438                 fElementDepth = -1;
<a id="L439" name="L439"></a> 439                 fElementChildrenLength = 0;
<a id="L440" name="L440"></a> 440 
<a id="L441" name="L441"></a> 441         <strong class="reserved">boolean</strong> parser_settings = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(PARSER_SETTINGS, <strong class="reserved">true</strong>);
<a id="L442" name="L442"></a> 442 
<a id="L443" name="L443"></a> 443         <strong class="reserved">if</strong> (!parser_settings)<em class="brace">{</em>
<a id="L444" name="L444"></a> 444                 <em class="comment">// parser settings have not been changed</em>
<a id="L445" name="L445"></a> 445                         fValidationManager.<a href="../S/5240.html#L50" title="Defined at 50 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">addValidationState</a>(fValidationState);
<a id="L446" name="L446"></a> 446                 <strong class="reserved">return</strong>;
<a id="L447" name="L447"></a> 447         <em class="brace">}</em>
<a id="L448" name="L448"></a> 448 
<a id="L449" name="L449"></a> 449         <em class="comment">// sax features</em>
<a id="L450" name="L450"></a> 450         fNamespaces = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(NAMESPACES, <strong class="reserved">true</strong>);
<a id="L451" name="L451"></a> 451         fValidation = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(VALIDATION, <strong class="reserved">false</strong>);
<a id="L452" name="L452"></a> 452         fDTDValidation = !(componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_FEATURE_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SCHEMA_VALIDATION_FEATURE, <strong class="reserved">false</strong>));
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454         <em class="comment">// Xerces features</em>
<a id="L455" name="L455"></a> 455         fDynamicValidation = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(DYNAMIC_VALIDATION, <strong class="reserved">false</strong>);
<a id="L456" name="L456"></a> 456         fBalanceSyntaxTrees = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(BALANCE_SYNTAX_TREES, <strong class="reserved">false</strong>);
<a id="L457" name="L457"></a> 457         fWarnDuplicateAttdef = componentManager.<a href="../D/19006.html" title="Multiple defined in 56 places.">getFeature</a>(WARN_ON_DUPLICATE_ATTDEF, <strong class="reserved">false</strong>);
<a id="L458" name="L458"></a> 458 
<a id="L459" name="L459"></a> 459         fSchemaType = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a> (<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.JAXP_PROPERTY_PREFIX
<a id="L460" name="L460"></a> 460             + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SCHEMA_LANGUAGE, <strong class="reserved">null</strong>);
<a id="L461" name="L461"></a> 461 
<a id="L462" name="L462"></a> 462         fValidationManager= (<a href="../S/5240.html#L36" title="Defined at 36 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">ValidationManager</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(VALIDATION_MANAGER);
<a id="L463" name="L463"></a> 463         fValidationManager.<a href="../S/5240.html#L50" title="Defined at 50 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">addValidationState</a>(fValidationState);
<a id="L464" name="L464"></a> 464         fValidationState.<a href="../S/5239.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationState.java.">setUsingNamespaces</a>(fNamespaces);
<a id="L465" name="L465"></a> 465 
<a id="L466" name="L466"></a> 466         <em class="comment">// get needed components</em>
<a id="L467" name="L467"></a> 467         fErrorReporter = (<a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX+<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ERROR_REPORTER_PROPERTY);
<a id="L468" name="L468"></a> 468         fSymbolTable = (<a href="../D/8572.html" title="Multiple defined in 2 places.">SymbolTable</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX+<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.SYMBOL_TABLE_PROPERTY);
<a id="L469" name="L469"></a> 469         fGrammarPool= (<a href="../S/5516.html#L47" title="Defined at 47 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarPool.java.">XMLGrammarPool</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(GRAMMAR_POOL, <strong class="reserved">null</strong>);
<a id="L470" name="L470"></a> 470 
<a id="L471" name="L471"></a> 471         fDatatypeValidatorFactory = (<a href="../S/5172.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/impl/dv/DTDDVFactory.java.">DTDDVFactory</a>)componentManager.<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.XERCES_PROPERTY_PREFIX + <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.DATATYPE_VALIDATOR_FACTORY_PROPERTY);
<a id="L472" name="L472"></a> 472                 <a href="../D/24497.html" title="Multiple defined in 127 places.">init</a>();
<a id="L473" name="L473"></a> 473 
<a id="L474" name="L474"></a> 474     <em class="brace">}</em> <em class="comment">// reset(XMLComponentManager)</em>
<a id="L475" name="L475"></a> 475 
<div class="comment">
      Returns a list of feature identifiers that are recognized by
      this component. This method may return null if no features
      are recognized by this component.</div>
<a id="L481" name="L481"></a> 481     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/18624.html" title="Multiple referred from 11 places.">getRecognizedFeatures</a>() <em class="brace">{</em>
<a id="L482" name="L482"></a> 482         <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[])(RECOGNIZED_FEATURES.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L483" name="L483"></a> 483     <em class="brace">}</em> <em class="comment">// getRecognizedFeatures():String[]</em>
<a id="L484" name="L484"></a> 484 
<div class="comment">
      Sets the state of a feature. This method is called by the component
      manager any time after reset when a feature changes state.
      <p>
      <strong>Note:</strong> Components should silently ignore features
      that do not affect the operation of the component.
      @param featureId The feature identifier.
      @param state     The state of the feature.
      @throws SAXNotRecognizedException The component should not throw
                                        this exception.
      @throws SAXNotSupportedException The component should not throw
                                       this exception.</p></div>
<a id="L500" name="L500"></a> 500     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27391.html" title="Multiple referred from 223 places.">setFeature</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> featureId, <strong class="reserved">boolean</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>)
<a id="L501" name="L501"></a> 501     <strong class="reserved">throws</strong> <a href="../S/5503.html#L35" title="Defined at 35 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLConfigurationException.java.">XMLConfigurationException</a> <em class="brace">{</em>
<a id="L502" name="L502"></a> 502     <em class="brace">}</em> <em class="comment">// setFeature(String,boolean)</em>
<a id="L503" name="L503"></a> 503 
<div class="comment">
      Returns a list of property identifiers that are recognized by
      this component. This method may return null if no properties
      are recognized by this component.</div>
<a id="L509" name="L509"></a> 509     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/18625.html" title="Multiple referred from 11 places.">getRecognizedProperties</a>() <em class="brace">{</em>
<a id="L510" name="L510"></a> 510         <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[])(RECOGNIZED_PROPERTIES.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>());
<a id="L511" name="L511"></a> 511     <em class="brace">}</em> <em class="comment">// getRecognizedProperties():String[]</em>
<a id="L512" name="L512"></a> 512 
<div class="comment">
      Sets the value of a property. This method is called by the component
      manager any time after reset when a property changes value.
      <p>
      <strong>Note:</strong> Components should silently ignore properties
      that do not affect the operation of the component.
      @param propertyId The property identifier.
      @param value      The value of the property.
      @throws SAXNotRecognizedException The component should not throw
                                        this exception.
      @throws SAXNotSupportedException The component should not throw
                                       this exception.</p></div>
<a id="L528" name="L528"></a> 528     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27976.html" title="Multiple referred from 343 places.">setProperty</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> propertyId, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L529" name="L529"></a> 529     <strong class="reserved">throws</strong> <a href="../S/5503.html#L35" title="Defined at 35 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLConfigurationException.java.">XMLConfigurationException</a> <em class="brace">{</em>
<a id="L530" name="L530"></a> 530     <em class="brace">}</em> <em class="comment">// setProperty(String,Object)</em>
<a id="L531" name="L531"></a> 531 
<div class="comment">
      Returns the default state for a feature, or null if this
      component does not want to report a default value for this
      feature.
      @param featureId The feature identifier.
      @since Xerces 2.2.0</div>
<a id="L541" name="L541"></a> 541     <strong class="reserved">public</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a> <a href="../R/16539.html" title="Multiple referred from 7 places.">getFeatureDefault</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> featureId) <em class="brace">{</em>
<a id="L542" name="L542"></a> 542         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; RECOGNIZED_FEATURES.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L543" name="L543"></a> 543             <strong class="reserved">if</strong> (RECOGNIZED_FEATURES[i].<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(featureId)) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544                 <strong class="reserved">return</strong> FEATURE_DEFAULTS[i];
<a id="L545" name="L545"></a> 545             <em class="brace">}</em>
<a id="L546" name="L546"></a> 546         <em class="brace">}</em>
<a id="L547" name="L547"></a> 547         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L548" name="L548"></a> 548     <em class="brace">}</em> <em class="comment">// getFeatureDefault(String):Boolean</em>
<a id="L549" name="L549"></a> 549 
<div class="comment">
      Returns the default state for a property, or null if this
      component does not want to report a default value for this
      property.
      @param propertyId The property identifier.
      @since Xerces 2.2.0</div>
<a id="L559" name="L559"></a> 559     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/18514.html" title="Multiple referred from 9 places.">getPropertyDefault</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> propertyId) <em class="brace">{</em>
<a id="L560" name="L560"></a> 560         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; RECOGNIZED_PROPERTIES.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561             <strong class="reserved">if</strong> (RECOGNIZED_PROPERTIES[i].<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(propertyId)) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562                 <strong class="reserved">return</strong> PROPERTY_DEFAULTS[i];
<a id="L563" name="L563"></a> 563             <em class="brace">}</em>
<a id="L564" name="L564"></a> 564         <em class="brace">}</em>
<a id="L565" name="L565"></a> 565         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L566" name="L566"></a> 566     <em class="brace">}</em> <em class="comment">// getPropertyDefault(String):Object</em>
<a id="L567" name="L567"></a> 567 
<a id="L568" name="L568"></a> 568     <em class="comment">//</em>
<a id="L569" name="L569"></a> 569     <em class="comment">// XMLDocumentSource methods</em>
<a id="L570" name="L570"></a> 570     <em class="comment">//</em>
<a id="L571" name="L571"></a> 571 
<div class="comment">
     /** Sets the document handler to receive information about the document. */</div>
<a id="L573" name="L573"></a> 573     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27268.html" title="Multiple referred from 93 places.">setDocumentHandler</a>(<a href="../S/5518.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/XMLDocumentHandler.java.">XMLDocumentHandler</a> documentHandler) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574         fDocumentHandler = documentHandler;
<a id="L575" name="L575"></a> 575     <em class="brace">}</em> <em class="comment">// setDocumentHandler(XMLDocumentHandler)</em>
<a id="L576" name="L576"></a> 576 
<div class="comment">
     /** Returns the document handler */</div>
<a id="L578" name="L578"></a> 578     <strong class="reserved">public</strong> <a href="../S/5518.html#L34" title="Defined at 34 in src/com/sun/org/apache/xerces/internal/xni/XMLDocumentHandler.java.">XMLDocumentHandler</a> <a href="../R/16221.html" title="Multiple referred from 11 places.">getDocumentHandler</a>() <em class="brace">{</em>
<a id="L579" name="L579"></a> 579         <strong class="reserved">return</strong> fDocumentHandler;
<a id="L580" name="L580"></a> 580     <em class="brace">}</em> <em class="comment">// getDocumentHandler():  XMLDocumentHandler</em>
<a id="L581" name="L581"></a> 581 
<a id="L582" name="L582"></a> 582 
<a id="L583" name="L583"></a> 583     <em class="comment">//</em>
<a id="L584" name="L584"></a> 584     <em class="comment">// XMLDocumentHandler methods</em>
<a id="L585" name="L585"></a> 585     <em class="comment">//</em>
<a id="L586" name="L586"></a> 586 
<div class="comment">
     /** Sets the document source */</div>
<a id="L588" name="L588"></a> 588     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27271.html" title="Multiple referred from 65 places.">setDocumentSource</a>(<a href="../S/5502.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentSource.java.">XMLDocumentSource</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>)<em class="brace">{</em>
<a id="L589" name="L589"></a> 589         fDocumentSource = <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>;
<a id="L590" name="L590"></a> 590     <em class="brace">}</em> <em class="comment">// setDocumentSource</em>
<a id="L591" name="L591"></a> 591 
<div class="comment">
     /** Returns the document source */</div>
<a id="L593" name="L593"></a> 593     <strong class="reserved">public</strong> <a href="../S/5502.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/parser/XMLDocumentSource.java.">XMLDocumentSource</a> <a href="../R/16227.html" title="Multiple referred from 8 places.">getDocumentSource</a> ()<em class="brace">{</em>
<a id="L594" name="L594"></a> 594         <strong class="reserved">return</strong> fDocumentSource;
<a id="L595" name="L595"></a> 595     <em class="brace">}</em> <em class="comment">// getDocumentSource</em>
<a id="L596" name="L596"></a> 596 
<div class="comment">
      The start of the document.
      @param locator The system identifier of the entity if the entity
                      is external, null otherwise.
      @param encoding The auto-detected IANA encoding name of the entity
                      stream. This value will be null in those situations
                      where the entity encoding is not auto-detected (e.g.
                      internal entities or a document entity that is
                      parsed from a java.io.Reader).
      @param namespaceContext
                      The namespace context in effect at the
                      start of this document.
                      This object represents the current context.
                      Implementors of this class are responsible
                      for copying the namespace bindings from the
                      the current context (and its parent contexts)
                      if that information is important.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L619" name="L619"></a> 619     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28800.html" title="Multiple referred from 67 places.">startDocument</a>(<a href="../S/5517.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xni/XMLLocator.java.">XMLLocator</a> locator, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>,
<a id="L620" name="L620"></a> 620                               <a href="../D/5973.html" title="Multiple defined in 2 places.">NamespaceContext</a> namespaceContext, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L621" name="L621"></a> 621     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L622" name="L622"></a> 622 
<a id="L623" name="L623"></a> 623         <em class="comment">// call handlers</em>
<a id="L624" name="L624"></a> 624         <em class="comment">// get initial grammars</em>
<a id="L625" name="L625"></a> 625         <strong class="reserved">if</strong> (fGrammarPool != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L626" name="L626"></a> 626             <a href="../S/5511.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/xni/grammars/Grammar.java.">Grammar</a> [] grammars = fGrammarPool.<a href="../D/31391.html" title="Multiple defined in 11 places.">retrieveInitialGrammarSet</a>(<a href="../S/5514.html#L31" title="Defined at 31 in src/com/sun/org/apache/xerces/internal/xni/grammars/XMLGrammarDescription.java.">XMLGrammarDescription</a>.XML_DTD);
<a id="L627" name="L627"></a> 627             <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = (grammars != <strong class="reserved">null</strong>) ? grammars.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> : 0;
<a id="L628" name="L628"></a> 628             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; ++i) <em class="brace">{</em>
<a id="L629" name="L629"></a> 629                 fGrammarBucket.<a href="../D/30001.html" title="Multiple defined in 7 places.">putGrammar</a>((<a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a>)grammars[i]);
<a id="L630" name="L630"></a> 630             <em class="brace">}</em>
<a id="L631" name="L631"></a> 631         <em class="brace">}</em>
<a id="L632" name="L632"></a> 632         fDocLocation = locator;
<a id="L633" name="L633"></a> 633         fNamespaceContext = namespaceContext;
<a id="L634" name="L634"></a> 634 
<a id="L635" name="L635"></a> 635         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L636" name="L636"></a> 636             fDocumentHandler.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>(locator, <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, namespaceContext, augs);
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<a id="L639" name="L639"></a> 639     <em class="brace">}</em> <em class="comment">// startDocument(XMLLocator,String)</em>
<a id="L640" name="L640"></a> 640 
<div class="comment">
      Notifies of the presence of an XMLDecl line in the document. If
      present, this method will be called immediately following the
      startDocument call.
      @param version    The XML version.
      @param encoding   The IANA encoding name of the document, or null if
                        not specified.
      @param standalone The standalone value, or null if not specified.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L654" name="L654"></a> 654     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/30835.html" title="Multiple referred from 12 places.">xmlDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> standalone, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L655" name="L655"></a> 655     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L656" name="L656"></a> 656 
<a id="L657" name="L657"></a> 657         <em class="comment">// save standalone state</em>
<a id="L658" name="L658"></a> 658         fGrammarBucket.<a href="../D/33994.html" title="Multiple defined in 10 places.">setStandalone</a>(standalone != <strong class="reserved">null</strong> &amp;&amp; standalone.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("yes"));
<a id="L659" name="L659"></a> 659 
<a id="L660" name="L660"></a> 660         <em class="comment">// call handlers</em>
<a id="L661" name="L661"></a> 661         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L662" name="L662"></a> 662             fDocumentHandler.<a href="../D/37296.html" title="Multiple defined in 19 places.">xmlDecl</a>(<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, standalone, augs);
<a id="L663" name="L663"></a> 663         <em class="brace">}</em>
<a id="L664" name="L664"></a> 664 
<a id="L665" name="L665"></a> 665     <em class="brace">}</em> <em class="comment">// xmlDecl(String,String,String)</em>
<a id="L666" name="L666"></a> 666 
<div class="comment">
      Notifies of the presence of the DOCTYPE line in the document.
      @param rootElement The name of the root element.
      @param publicId    The public identifier if an external DTD or null
                         if the external DTD is specified using SYSTEM.
      @param systemId    The system identifier if an external DTD, null
                         otherwise.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L679" name="L679"></a> 679     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13462.html" title="Multiple referred from 14 places.">doctypeDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rootElement, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>,
<a id="L680" name="L680"></a> 680                             <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L681" name="L681"></a> 681     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L682" name="L682"></a> 682 
<a id="L683" name="L683"></a> 683         <em class="comment">// save root element state</em>
<a id="L684" name="L684"></a> 684         fSeenDoctypeDecl = <strong class="reserved">true</strong>;
<a id="L685" name="L685"></a> 685         fRootElement.<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(<strong class="reserved">null</strong>, rootElement, rootElement, <strong class="reserved">null</strong>);
<a id="L686" name="L686"></a> 686         <em class="comment">// find or create grammar:</em>
<a id="L687" name="L687"></a> 687         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> eid = <strong class="reserved">null</strong>;
<a id="L688" name="L688"></a> 688         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L689" name="L689"></a> 689             eid = <a href="../S/5242.html#L88" title="Defined at 88 in src/com/sun/org/apache/xerces/internal/impl/XMLEntityManager.java.">XMLEntityManager</a>.<a href="../D/15858.html" title="Multiple defined in 3 places.">expandSystemId</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, fDocLocation.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>(), <strong class="reserved">false</strong>);
<a id="L690" name="L690"></a> 690         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L691" name="L691"></a> 691         <em class="brace">}</em>
<a id="L692" name="L692"></a> 692         <a href="../D/9884.html" title="Multiple defined in 2 places.">XMLDTDDescription</a> grammarDesc = <strong class="reserved">new</strong> <a href="../D/9884.html" title="Multiple defined in 2 places.">XMLDTDDescription</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, fDocLocation.<a href="../D/18928.html" title="Multiple defined in 10 places.">getExpandedSystemId</a>(), eid, rootElement);
<a id="L693" name="L693"></a> 693         fDTDGrammar = fGrammarBucket.<a href="../D/19350.html" title="Multiple defined in 8 places.">getGrammar</a>(grammarDesc);
<a id="L694" name="L694"></a> 694         <strong class="reserved">if</strong>(fDTDGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695             <em class="comment">// give grammar pool a chance...</em>
<a id="L696" name="L696"></a> 696             <em class="comment">//</em>
<a id="L697" name="L697"></a> 697             <em class="comment">// Do not bother checking the pool if no public or system identifier was provided.</em>
<a id="L698" name="L698"></a> 698             <em class="comment">// Since so many different DTDs have roots in common, using only a root name as the</em>
<a id="L699" name="L699"></a> 699             <em class="comment">// key may cause an unexpected grammar to be retrieved from the grammar pool. This scenario</em>
<a id="L700" name="L700"></a> 700             <em class="comment">// would occur when an ExternalSubsetResolver has been queried and the</em>
<a id="L701" name="L701"></a> 701             <em class="comment">// XMLInputSource returned contains an input stream but no external identifier.</em>
<a id="L702" name="L702"></a> 702             <em class="comment">// This can never happen when the instance document specified a DOCTYPE. -- mrglavas</em>
<a id="L703" name="L703"></a> 703             <strong class="reserved">if</strong> (fGrammarPool != <strong class="reserved">null</strong> &amp;&amp; (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> || <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L704" name="L704"></a> 704                 fDTDGrammar = (<a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a>)fGrammarPool.<a href="../D/31389.html" title="Multiple defined in 11 places.">retrieveGrammar</a>(grammarDesc);
<a id="L705" name="L705"></a> 705             <em class="brace">}</em>
<a id="L706" name="L706"></a> 706         <em class="brace">}</em>
<a id="L707" name="L707"></a> 707         <strong class="reserved">if</strong>(fDTDGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L708" name="L708"></a> 708             <em class="comment">// we'll have to create it...</em>
<a id="L709" name="L709"></a> 709             <strong class="reserved">if</strong> (!fBalanceSyntaxTrees) <em class="brace">{</em>
<a id="L710" name="L710"></a> 710                 fDTDGrammar = <strong class="reserved">new</strong> <a href="../S/5142.html#L106" title="Defined at 106 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">DTDGrammar</a>(fSymbolTable, grammarDesc);
<a id="L711" name="L711"></a> 711             <em class="brace">}</em>
<a id="L712" name="L712"></a> 712             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L713" name="L713"></a> 713                 fDTDGrammar = <strong class="reserved">new</strong> <a href="../S/5139.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/impl/dtd/BalancedDTDGrammar.java.">BalancedDTDGrammar</a>(fSymbolTable, grammarDesc);
<a id="L714" name="L714"></a> 714             <em class="brace">}</em>
<a id="L715" name="L715"></a> 715         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L716" name="L716"></a> 716             <em class="comment">// we've found a cached one;so let's make sure not to read</em>
<a id="L717" name="L717"></a> 717             <em class="comment">// any external subset!</em>
<a id="L718" name="L718"></a> 718             fValidationManager.<a href="../S/5240.html#L71" title="Defined at 71 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">setCachedDTD</a>(<strong class="reserved">true</strong>);
<a id="L719" name="L719"></a> 719         <em class="brace">}</em>
<a id="L720" name="L720"></a> 720         fGrammarBucket.<a href="../S/5137.html#L146" title="Defined at 146 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammarBucket.java.">setActiveGrammar</a>(fDTDGrammar);
<a id="L721" name="L721"></a> 721 
<a id="L722" name="L722"></a> 722         <em class="comment">// call handlers</em>
<a id="L723" name="L723"></a> 723         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L724" name="L724"></a> 724             fDocumentHandler.<a href="../D/15103.html" title="Multiple defined in 21 places.">doctypeDecl</a>(rootElement, <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, augs);
<a id="L725" name="L725"></a> 725         <em class="brace">}</em>
<a id="L726" name="L726"></a> 726 
<a id="L727" name="L727"></a> 727     <em class="brace">}</em> <em class="comment">// doctypeDecl(String,String,String, Augmentations)</em>
<a id="L728" name="L728"></a> 728 
<a id="L729" name="L729"></a> 729 
<div class="comment">
      The start of an element.
      @param element    The name of the element.
      @param attributes The element attributes.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L739" name="L739"></a> 739     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L740" name="L740"></a> 740     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L741" name="L741"></a> 741 
<a id="L742" name="L742"></a> 742         <a href="../D/24039.html" title="Multiple defined in 5 places.">handleStartElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L743" name="L743"></a> 743         <em class="comment">// call handlers</em>
<a id="L744" name="L744"></a> 744         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L745" name="L745"></a> 745             fDocumentHandler.<a href="../D/34781.html" title="Multiple defined in 105 places.">startElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747         <em class="brace">}</em>
<a id="L748" name="L748"></a> 748 
<a id="L749" name="L749"></a> 749     <em class="brace">}</em> <em class="comment">// startElement(QName,XMLAttributes)</em>
<a id="L750" name="L750"></a> 750 
<div class="comment">
      An empty element.
      @param element    The name of the element.
      @param attributes The element attributes.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L760" name="L760"></a> 760     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13687.html" title="Multiple referred from 19 places.">emptyElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L761" name="L761"></a> 761     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L762" name="L762"></a> 762 
<a id="L763" name="L763"></a> 763         <strong class="reserved">boolean</strong> removed = <a href="../D/24039.html" title="Multiple defined in 5 places.">handleStartElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765         <strong class="reserved">if</strong> (fDocumentHandler !=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766             fDocumentHandler.<a href="../D/15350.html" title="Multiple defined in 24 places.">emptyElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L767" name="L767"></a> 767         <em class="brace">}</em>
<a id="L768" name="L768"></a> 768         <strong class="reserved">if</strong> (!removed) <em class="brace">{</em>
<a id="L769" name="L769"></a> 769             <a href="../D/23970.html" title="Multiple defined in 5 places.">handleEndElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, augs, <strong class="reserved">true</strong>);
<a id="L770" name="L770"></a> 770         <em class="brace">}</em>
<a id="L771" name="L771"></a> 771 
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773     <em class="brace">}</em> <em class="comment">// emptyElement(QName,XMLAttributes)</em>
<a id="L774" name="L774"></a> 774 
<div class="comment">
      Character content.
      @param text The content.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L784" name="L784"></a> 784     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L785" name="L785"></a> 785 
<a id="L786" name="L786"></a> 786         <strong class="reserved">boolean</strong> callNextCharacters = <strong class="reserved">true</strong>;
<a id="L787" name="L787"></a> 787 
<a id="L788" name="L788"></a> 788         <em class="comment">// REVISIT: [Q] Is there a more efficient way of doing this?</em>
<a id="L789" name="L789"></a> 789         <em class="comment">//          Perhaps if the scanner told us so we don't have to</em>
<a id="L790" name="L790"></a> 790         <em class="comment">//          look at the characters again. -Ac</em>
<a id="L791" name="L791"></a> 791         <strong class="reserved">boolean</strong> allWhiteSpace = <strong class="reserved">true</strong>;
<a id="L792" name="L792"></a> 792         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>; i&lt; <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L793" name="L793"></a> 793             <strong class="reserved">if</strong> (!<a href="../D/26261.html" title="Multiple defined in 9 places.">isSpace</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>.ch[i])) <em class="brace">{</em>
<a id="L794" name="L794"></a> 794                 allWhiteSpace = <strong class="reserved">false</strong>;
<a id="L795" name="L795"></a> 795                 <strong class="reserved">break</strong>;
<a id="L796" name="L796"></a> 796             <em class="brace">}</em>
<a id="L797" name="L797"></a> 797         <em class="brace">}</em>
<a id="L798" name="L798"></a> 798         <em class="comment">// call the ignoreableWhiteSpace callback</em>
<a id="L799" name="L799"></a> 799         <em class="comment">// never call ignorableWhitespace if we are in cdata section</em>
<a id="L800" name="L800"></a> 800         <strong class="reserved">if</strong> (fInElementContent &amp;&amp; allWhiteSpace &amp;&amp; !fInCDATASection) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801             <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802                 fDocumentHandler.<a href="../D/24316.html" title="Multiple defined in 59 places.">ignorableWhitespace</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, augs);
<a id="L803" name="L803"></a> 803                 callNextCharacters = <strong class="reserved">false</strong>;
<a id="L804" name="L804"></a> 804             <em class="brace">}</em>
<a id="L805" name="L805"></a> 805         <em class="brace">}</em>
<a id="L806" name="L806"></a> 806 
<a id="L807" name="L807"></a> 807         <em class="comment">// validate</em>
<a id="L808" name="L808"></a> 808         <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809             <strong class="reserved">if</strong> (fInElementContent) <em class="brace">{</em>
<a id="L810" name="L810"></a> 810                 <strong class="reserved">if</strong> (fGrammarBucket.<a href="../D/22692.html" title="Multiple defined in 9 places.">getStandalone</a>() &amp;&amp;
<a id="L811" name="L811"></a> 811                     fDTDGrammar.<a href="../S/5142.html#L355" title="Defined at 355 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getElementDeclIsExternal</a>(fCurrentElementIndex)) <em class="brace">{</em>
<a id="L812" name="L812"></a> 812                     <strong class="reserved">if</strong> (allWhiteSpace) <em class="brace">{</em>
<a id="L813" name="L813"></a> 813                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>( <a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L814" name="L814"></a> 814                                                     "MSG_WHITE_SPACE_IN_ELEMENT_CONTENT_WHEN_STANDALONE",
<a id="L815" name="L815"></a> 815                                                     <strong class="reserved">null</strong>, <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L816" name="L816"></a> 816                     <em class="brace">}</em>
<a id="L817" name="L817"></a> 817                 <em class="brace">}</em>
<a id="L818" name="L818"></a> 818                 <strong class="reserved">if</strong> (!allWhiteSpace) <em class="brace">{</em>
<a id="L819" name="L819"></a> 819                     <a href="../S/5160.html#L1726" title="Defined at 1726 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">charDataInContent</a>();
<a id="L820" name="L820"></a> 820                 <em class="brace">}</em>
<a id="L821" name="L821"></a> 821 
<a id="L822" name="L822"></a> 822                 <em class="comment">// For E15.2</em>
<a id="L823" name="L823"></a> 823                 <strong class="reserved">if</strong> (augs != <strong class="reserved">null</strong> &amp;&amp; augs.<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.CHAR_REF_PROBABLE_WS) == <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L825" name="L825"></a> 825                                                "MSG_CONTENT_INVALID_SPECIFIED",
<a id="L826" name="L826"></a> 826                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> fCurrentElement.rawname,
<a id="L827" name="L827"></a> 827                                                    fDTDGrammar.<a href="../S/5142.html#L1513" title="Defined at 1513 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getContentSpecAsString</a>(fElementDepth),
<a id="L828" name="L828"></a> 828                                                    "character reference"<em class="brace">}</em>,
<a id="L829" name="L829"></a> 829                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L830" name="L830"></a> 830                 <em class="brace">}</em>
<a id="L831" name="L831"></a> 831             <em class="brace">}</em>
<a id="L832" name="L832"></a> 832 
<a id="L833" name="L833"></a> 833             <strong class="reserved">if</strong> (fCurrentContentSpecType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L834" name="L834"></a> 834                 <a href="../S/5160.html#L1726" title="Defined at 1726 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">charDataInContent</a>();
<a id="L835" name="L835"></a> 835             <em class="brace">}</em>
<a id="L836" name="L836"></a> 836         <em class="brace">}</em>
<a id="L837" name="L837"></a> 837 
<a id="L838" name="L838"></a> 838         <em class="comment">// call handlers</em>
<a id="L839" name="L839"></a> 839         <strong class="reserved">if</strong> (callNextCharacters &amp;&amp; fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L840" name="L840"></a> 840             fDocumentHandler.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, augs);
<a id="L841" name="L841"></a> 841         <em class="brace">}</em>
<a id="L842" name="L842"></a> 842 
<a id="L843" name="L843"></a> 843     <em class="brace">}</em> <em class="comment">// characters(XMLString)</em>
<a id="L844" name="L844"></a> 844 
<a id="L845" name="L845"></a> 845 
<a id="L846" name="L846"></a> 846 
<div class="comment">
      Ignorable whitespace. For this method to be called, the document
      source must have some way of determining that the text containing
      only whitespace characters should be considered ignorable. For
      example, the validator can determine if a length of whitespace
      characters in the document are ignorable based on the element
      content model.
      @param text The ignorable whitespace.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L860" name="L860"></a> 860     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/20375.html" title="Multiple referred from 42 places.">ignorableWhitespace</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L861" name="L861"></a> 861 
<a id="L862" name="L862"></a> 862         <em class="comment">// call handlers</em>
<a id="L863" name="L863"></a> 863         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L864" name="L864"></a> 864             fDocumentHandler.<a href="../D/24316.html" title="Multiple defined in 59 places.">ignorableWhitespace</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, augs);
<a id="L865" name="L865"></a> 865         <em class="brace">}</em>
<a id="L866" name="L866"></a> 866 
<a id="L867" name="L867"></a> 867     <em class="brace">}</em> <em class="comment">// ignorableWhitespace(XMLString)</em>
<a id="L868" name="L868"></a> 868 
<div class="comment">
      The end of an element.
      @param element The name of the element.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L877" name="L877"></a> 877     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L878" name="L878"></a> 878 
<a id="L879" name="L879"></a> 879         <a href="../D/23970.html" title="Multiple defined in 5 places.">handleEndElement</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>,  augs, <strong class="reserved">false</strong>);
<a id="L880" name="L880"></a> 880 
<a id="L881" name="L881"></a> 881     <em class="brace">}</em> <em class="comment">// endElement(QName)</em>
<a id="L882" name="L882"></a> 882 
<div class="comment">
      The start of a CDATA section.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L889" name="L889"></a> 889     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28793.html" title="Multiple referred from 30 places.">startCDATA</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L890" name="L890"></a> 890 
<a id="L891" name="L891"></a> 891         <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fInElementContent) <em class="brace">{</em>
<a id="L892" name="L892"></a> 892             <a href="../S/5160.html#L1726" title="Defined at 1726 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">charDataInContent</a>();
<a id="L893" name="L893"></a> 893         <em class="brace">}</em>
<a id="L894" name="L894"></a> 894         fInCDATASection = <strong class="reserved">true</strong>;
<a id="L895" name="L895"></a> 895         <em class="comment">// call handlers</em>
<a id="L896" name="L896"></a> 896         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L897" name="L897"></a> 897             fDocumentHandler.<a href="../D/34760.html" title="Multiple defined in 37 places.">startCDATA</a>(augs);
<a id="L898" name="L898"></a> 898         <em class="brace">}</em>
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900     <em class="brace">}</em> <em class="comment">// startCDATA()</em>
<a id="L901" name="L901"></a> 901 
<div class="comment">
      The end of a CDATA section.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L908" name="L908"></a> 908     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13755.html" title="Multiple referred from 33 places.">endCDATA</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L909" name="L909"></a> 909 
<a id="L910" name="L910"></a> 910         fInCDATASection = <strong class="reserved">false</strong>;
<a id="L911" name="L911"></a> 911         <em class="comment">// call handlers</em>
<a id="L912" name="L912"></a> 912         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L913" name="L913"></a> 913             fDocumentHandler.<a href="../D/15437.html" title="Multiple defined in 40 places.">endCDATA</a>(augs);
<a id="L914" name="L914"></a> 914         <em class="brace">}</em>
<a id="L915" name="L915"></a> 915 
<a id="L916" name="L916"></a> 916     <em class="brace">}</em> <em class="comment">// endCDATA()</em>
<a id="L917" name="L917"></a> 917 
<div class="comment">
      The end of the document.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</div>
<a id="L924" name="L924"></a> 924     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13761.html" title="Multiple referred from 58 places.">endDocument</a>(<a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L925" name="L925"></a> 925 
<a id="L926" name="L926"></a> 926         <em class="comment">// call handlers</em>
<a id="L927" name="L927"></a> 927         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928             fDocumentHandler.<a href="../D/15443.html" title="Multiple defined in 65 places.">endDocument</a>(augs);
<a id="L929" name="L929"></a> 929         <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<a id="L931" name="L931"></a> 931     <em class="brace">}</em> <em class="comment">// endDocument()</em>
<a id="L932" name="L932"></a> 932 
<div class="comment">
      A comment.
      @param text The text in the comment.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by application to signal an error.</div>
<a id="L941" name="L941"></a> 941     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11671.html" title="Multiple referred from 126 places.">comment</a>(<a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L942" name="L942"></a> 942         <em class="comment">// fixes E15.1</em>
<a id="L943" name="L943"></a> 943         <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fElementDepth &gt;= 0 &amp;&amp; fDTDGrammar != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L944" name="L944"></a> 944             fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(fCurrentElementIndex, fTempElementDecl);
<a id="L945" name="L945"></a> 945             <strong class="reserved">if</strong> (fTempElementDecl.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L946" name="L946"></a> 946                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L947" name="L947"></a> 947                                                "MSG_CONTENT_INVALID_SPECIFIED",
<a id="L948" name="L948"></a> 948                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> fCurrentElement.rawname,
<a id="L949" name="L949"></a> 949                                                              "EMPTY",
<a id="L950" name="L950"></a> 950                                                              "comment"<em class="brace">}</em>,
<a id="L951" name="L951"></a> 951                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L952" name="L952"></a> 952             <em class="brace">}</em>
<a id="L953" name="L953"></a> 953         <em class="brace">}</em>
<a id="L954" name="L954"></a> 954         <em class="comment">// call handlers</em>
<a id="L955" name="L955"></a> 955         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L956" name="L956"></a> 956             fDocumentHandler.<a href="../D/13011.html" title="Multiple defined in 65 places.">comment</a>(<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>, augs);
<a id="L957" name="L957"></a> 957         <em class="brace">}</em>
<a id="L958" name="L958"></a> 958 
<a id="L959" name="L959"></a> 959     <em class="brace">}</em> <em class="comment">// comment(XMLString)</em>
<a id="L960" name="L960"></a> 960 
<a id="L961" name="L961"></a> 961 
<div class="comment">
      A processing instruction. Processing instructions consist of a
      target name and, optionally, text data. The data is only meaningful
      to the application.
      <p>
      Typically, a processing instruction's data will contain a series
      of pseudo-attributes. These pseudo-attributes follow the form of
      element attributes but are <strong>not</strong> parsed or presented
      to the application as anything other than text. The application is
      responsible for parsing the data.
      @param target The target.
      @param data   The data or null if none specified.
      @param augs   Additional information that may include infoset augmentations
      @throws XNIException Thrown by handler to signal an error.</p></div>
<a id="L979" name="L979"></a> 979     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/25204.html" title="Multiple referred from 66 places.">processingInstruction</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L980" name="L980"></a> 980     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L981" name="L981"></a> 981 
<a id="L982" name="L982"></a> 982         <em class="comment">// fixes E15.1</em>
<a id="L983" name="L983"></a> 983         <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fElementDepth &gt;= 0 &amp;&amp; fDTDGrammar != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L984" name="L984"></a> 984             fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(fCurrentElementIndex, fTempElementDecl);
<a id="L985" name="L985"></a> 985             <strong class="reserved">if</strong> (fTempElementDecl.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L986" name="L986"></a> 986                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L987" name="L987"></a> 987                                                "MSG_CONTENT_INVALID_SPECIFIED",
<a id="L988" name="L988"></a> 988                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> fCurrentElement.rawname,
<a id="L989" name="L989"></a> 989                                                              "EMPTY",
<a id="L990" name="L990"></a> 990                                                              "processing instruction"<em class="brace">}</em>,
<a id="L991" name="L991"></a> 991                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L992" name="L992"></a> 992             <em class="brace">}</em>
<a id="L993" name="L993"></a> 993         <em class="brace">}</em>
<a id="L994" name="L994"></a> 994         <em class="comment">// call handlers</em>
<a id="L995" name="L995"></a> 995         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L996" name="L996"></a> 996             fDocumentHandler.<a href="../D/29876.html" title="Multiple defined in 72 places.">processingInstruction</a>(<a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, augs);
<a id="L997" name="L997"></a> 997         <em class="brace">}</em>
<a id="L998" name="L998"></a> 998     <em class="brace">}</em> <em class="comment">// processingInstruction(String,XMLString)</em>
<a id="L999" name="L999"></a> 999 
<div class="comment">
      This method notifies the start of a general entity.
      <p>
      <strong>Note:</strong> This method is not called for entity references
      appearing as part of attribute values.
      @param name     The name of the general entity.
      @param identifier The resource identifier.
      @param encoding The auto-detected IANA encoding name of the entity
                      stream. This value will be null in those situations
                      where the entity encoding is not auto-detected (e.g.
                      internal entities or a document entity that is
                      parsed from a java.io.Reader).
      @param augs     Additional information that may include infoset augmentations
      @exception XNIException Thrown by handler to signal an error.</p></div>
<a id="L1017" name="L1017"></a>1017     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28820.html" title="Multiple referred from 13 places.">startGeneralEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>,
<a id="L1018" name="L1018"></a>1018                                    <a href="../S/5523.html#L30" title="Defined at 30 in src/com/sun/org/apache/xerces/internal/xni/XMLResourceIdentifier.java.">XMLResourceIdentifier</a> identifier,
<a id="L1019" name="L1019"></a>1019                                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>,
<a id="L1020" name="L1020"></a>1020                                    <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1021" name="L1021"></a>1021         <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fElementDepth &gt;= 0 &amp;&amp; fDTDGrammar != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022             fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(fCurrentElementIndex, fTempElementDecl);
<a id="L1023" name="L1023"></a>1023             <em class="comment">// fixes E15.1</em>
<a id="L1024" name="L1024"></a>1024             <strong class="reserved">if</strong> (fTempElementDecl.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L1025" name="L1025"></a>1025                 fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1026" name="L1026"></a>1026                                            "MSG_CONTENT_INVALID_SPECIFIED",
<a id="L1027" name="L1027"></a>1027                                            <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> fCurrentElement.rawname,
<a id="L1028" name="L1028"></a>1028                                                          "EMPTY", "ENTITY"<em class="brace">}</em>,
<a id="L1029" name="L1029"></a>1029                                            <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1030" name="L1030"></a>1030             <em class="brace">}</em>
<a id="L1031" name="L1031"></a>1031             <strong class="reserved">if</strong> (fGrammarBucket.<a href="../D/22692.html" title="Multiple defined in 9 places.">getStandalone</a>()) <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032                 <a href="../S/5156.html#L113" title="Defined at 113 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDLoader.java.">XMLDTDLoader</a>.<a href="../S/5136.html#L588" title="Defined at 588 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDProcessor.java.">checkStandaloneEntityRef</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, fDTDGrammar, fEntityDecl, fErrorReporter);
<a id="L1033" name="L1033"></a>1033             <em class="brace">}</em>
<a id="L1034" name="L1034"></a>1034         <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036             fDocumentHandler.<a href="../D/34789.html" title="Multiple defined in 19 places.">startGeneralEntity</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, identifier, <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, augs);
<a id="L1037" name="L1037"></a>1037         <em class="brace">}</em>
<a id="L1038" name="L1038"></a>1038     <em class="brace">}</em>
<a id="L1039" name="L1039"></a>1039 
<div class="comment">
      This method notifies the end of a general entity.
      <p>
      <strong>Note:</strong> This method is not called for entity references
      appearing as part of attribute values.
      @param name   The name of the entity.
      @param augs   Additional information that may include infoset augmentations
      @exception XNIException
                        Thrown by handler to signal an error.</p></div>
<a id="L1052" name="L1052"></a>1052     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13772.html" title="Multiple referred from 13 places.">endGeneralEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1053" name="L1053"></a>1053         <em class="comment">// call handlers</em>
<a id="L1054" name="L1054"></a>1054         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1055" name="L1055"></a>1055             fDocumentHandler.<a href="../D/15454.html" title="Multiple defined in 19 places.">endGeneralEntity</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, augs);
<a id="L1056" name="L1056"></a>1056         <em class="brace">}</em>
<a id="L1057" name="L1057"></a>1057     <em class="brace">}</em> <em class="comment">// endEntity(String)</em>
<a id="L1058" name="L1058"></a>1058 
<div class="comment">
      Notifies of the presence of a TextDecl line in an entity. If present,
      this method will be called immediately following the startParameterEntity call.
      <p>
      <strong>Note:</strong> This method is only called for external
      parameter entities referenced in the DTD.
      @param version  The XML version, or null if not specified.
      @param encoding The IANA encoding name of the entity.
      @param augs Additional information that may include infoset
                           augmentations.
      @throws XNIException Thrown by handler to signal an error.</p></div>
<a id="L1073" name="L1073"></a>1073     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29152.html" title="Multiple referred from 20 places.">textDecl</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1074" name="L1074"></a>1074 
<a id="L1075" name="L1075"></a>1075         <em class="comment">// call handlers</em>
<a id="L1076" name="L1076"></a>1076         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1077" name="L1077"></a>1077             fDocumentHandler.<a href="../D/35257.html" title="Multiple defined in 23 places.">textDecl</a>(<a href="../D/36409.html" title="Multiple defined in 4 places.">version</a>, <a href="../S/1437.html#L371" title="Defined at 371 in src/java/io/Console.java.">encoding</a>, augs);
<a id="L1078" name="L1078"></a>1078         <em class="brace">}</em>
<a id="L1079" name="L1079"></a>1079     <em class="brace">}</em>
<a id="L1080" name="L1080"></a>1080 
<a id="L1081" name="L1081"></a>1081 
<a id="L1082" name="L1082"></a>1082     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/20202.html" title="Multiple referred from 2 places.">hasGrammar</a>()<em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083 
<a id="L1084" name="L1084"></a>1084         <strong class="reserved">return</strong> (fDTDGrammar != <strong class="reserved">null</strong>);
<a id="L1085" name="L1085"></a>1085     <em class="brace">}</em>
<a id="L1086" name="L1086"></a>1086 
<a id="L1087" name="L1087"></a>1087     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/30051.html" title="Multiple referred from 135 places.">validate</a>()<em class="brace">{</em>
<a id="L1088" name="L1088"></a>1088         <em class="comment">// Do validation if all of the following are true:</em>
<a id="L1089" name="L1089"></a>1089         <em class="comment">// 1. The JAXP Schema Language property is not XML Schema</em>
<a id="L1090" name="L1090"></a>1090         <em class="comment">//    REVISIT: since only DTD and Schema are supported at this time,</em>
<a id="L1091" name="L1091"></a>1091         <em class="comment">//             such checking is sufficient. but if more schema types</em>
<a id="L1092" name="L1092"></a>1092         <em class="comment">//             are introduced in the future, we'll need to change it</em>
<a id="L1093" name="L1093"></a>1093         <em class="comment">//             to something like</em>
<a id="L1094" name="L1094"></a>1094         <em class="comment">//             (fSchemaType == null || fSchemaType == NS_XML_DTD)</em>
<a id="L1095" name="L1095"></a>1095         <em class="comment">// 2. One of the following is true (validation features)</em>
<a id="L1096" name="L1096"></a>1096         <em class="comment">// 2.1 Dynamic validation is off, and validation is on</em>
<a id="L1097" name="L1097"></a>1097         <em class="comment">// 2.2 Dynamic validation is on, and DOCTYPE was seen</em>
<a id="L1098" name="L1098"></a>1098         <em class="comment">// 3 Xerces schema validation feature is off, or DOCTYPE was seen.</em>
<a id="L1099" name="L1099"></a>1099         <strong class="reserved">return</strong> (fSchemaType != <a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.NS_XMLSCHEMA) &amp;&amp;
<a id="L1100" name="L1100"></a>1100                (!fDynamicValidation &amp;&amp; fValidation ||
<a id="L1101" name="L1101"></a>1101                 fDynamicValidation &amp;&amp; fSeenDoctypeDecl) &amp;&amp;
<a id="L1102" name="L1102"></a>1102                (fDTDValidation || fSeenDoctypeDecl);
<a id="L1103" name="L1103"></a>1103     <em class="brace">}</em>
<a id="L1104" name="L1104"></a>1104 
<a id="L1105" name="L1105"></a>1105             <em class="comment">//REVISIT:we can convert into functions.. adding default attribute values.. and one validating.</em>
<a id="L1106" name="L1106"></a>1106 
<div class="comment">
     /** Add default attributes and validate. */</div>
<a id="L1108" name="L1108"></a>1108     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5160.html#L1917" title="Referred from 1917 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">addDTDDefaultAttrsAndValidate</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>, <strong class="reserved">int</strong> elementIndex,
<a id="L1109" name="L1109"></a>1109                                                <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>)
<a id="L1110" name="L1110"></a>1110     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1111" name="L1111"></a>1111 
<a id="L1112" name="L1112"></a>1112         <em class="comment">// is there anything to do?</em>
<a id="L1113" name="L1113"></a>1113         <strong class="reserved">if</strong> (elementIndex == -1 || fDTDGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114             <strong class="reserved">return</strong>;
<a id="L1115" name="L1115"></a>1115         <em class="brace">}</em>
<a id="L1116" name="L1116"></a>1116 
<a id="L1117" name="L1117"></a>1117         <em class="comment">//</em>
<a id="L1118" name="L1118"></a>1118         <em class="comment">// Check after all specified attrs are scanned</em>
<a id="L1119" name="L1119"></a>1119         <em class="comment">// (1) report error for REQUIRED attrs that are missing (V_TAGc)</em>
<a id="L1120" name="L1120"></a>1120         <em class="comment">// (2) add default attrs (FIXED and NOT_FIXED)</em>
<a id="L1121" name="L1121"></a>1121         <em class="comment">//</em>
<a id="L1122" name="L1122"></a>1122         <strong class="reserved">int</strong> attlistIndex = fDTDGrammar.<a href="../S/5142.html#L1311" title="Defined at 1311 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getFirstAttributeDeclIndex</a>(elementIndex);
<a id="L1123" name="L1123"></a>1123 
<a id="L1124" name="L1124"></a>1124         <strong class="reserved">while</strong> (attlistIndex != -1) <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125 
<a id="L1126" name="L1126"></a>1126             fDTDGrammar.<a href="../D/17071.html" title="Multiple defined in 2 places.">getAttributeDecl</a>(attlistIndex, fTempAttDecl);
<a id="L1127" name="L1127"></a>1127 
<a id="L1128" name="L1128"></a>1128             <strong class="reserved">if</strong> (DEBUG_ATTRIBUTES) <em class="brace">{</em>
<a id="L1129" name="L1129"></a>1129                 <strong class="reserved">if</strong> (fTempAttDecl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130                     <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a> <a href="../D/15296.html" title="Multiple defined in 23 places.">elementDecl</a> = <strong class="reserved">new</strong> <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>();
<a id="L1131" name="L1131"></a>1131                     fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(elementIndex, <a href="../D/15296.html" title="Multiple defined in 23 places.">elementDecl</a>);
<a id="L1132" name="L1132"></a>1132                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("element: "+(<a href="../D/15296.html" title="Multiple defined in 23 places.">elementDecl</a>.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.localpart));
<a id="L1133" name="L1133"></a>1133                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("attlistIndex " + attlistIndex + "\n"+
<a id="L1134" name="L1134"></a>1134                                        "attName : '"+(fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.localpart) + "'\n"
<a id="L1135" name="L1135"></a>1135                                        + "attType : "+fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> + "\n"
<a id="L1136" name="L1136"></a>1136                                        + "attDefaultType : "+fTempAttDecl.simpleType.defaultType + "\n"
<a id="L1137" name="L1137"></a>1137                                        + "attDefaultValue : '"+fTempAttDecl.simpleType.<a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a> + "'\n"
<a id="L1138" name="L1138"></a>1138                                        + <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() +"\n"
<a id="L1139" name="L1139"></a>1139                                       );
<a id="L1140" name="L1140"></a>1140                 <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141             <em class="brace">}</em>
<a id="L1142" name="L1142"></a>1142             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attPrefix = fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a>;
<a id="L1143" name="L1143"></a>1143             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attLocalpart = fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.localpart;
<a id="L1144" name="L1144"></a>1144             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attRawName = fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.rawname;
<a id="L1145" name="L1145"></a>1145             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attType = <a href="../S/5160.html#L1749" title="Defined at 1749 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">getAttributeTypeName</a>(fTempAttDecl);
<a id="L1146" name="L1146"></a>1146             <strong class="reserved">int</strong> attDefaultType =fTempAttDecl.simpleType.defaultType;
<a id="L1147" name="L1147"></a>1147             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attValue = <strong class="reserved">null</strong>;
<a id="L1148" name="L1148"></a>1148 
<a id="L1149" name="L1149"></a>1149             <strong class="reserved">if</strong> (fTempAttDecl.simpleType.<a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1150" name="L1150"></a>1150                 attValue = fTempAttDecl.simpleType.<a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a>;
<a id="L1151" name="L1151"></a>1151             <em class="brace">}</em>
<a id="L1152" name="L1152"></a>1152 
<a id="L1153" name="L1153"></a>1153             <strong class="reserved">boolean</strong> specified = <strong class="reserved">false</strong>;
<a id="L1154" name="L1154"></a>1154             <strong class="reserved">boolean</strong> <a href="../D/31142.html" title="Multiple defined in 5 places.">required</a> = attDefaultType == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.DEFAULT_TYPE_REQUIRED;
<a id="L1155" name="L1155"></a>1155             <strong class="reserved">boolean</strong> <a href="../D/12284.html" title="Multiple defined in 7 places.">cdata</a> = attType == <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fCDATASymbol;
<a id="L1156" name="L1156"></a>1156 
<a id="L1157" name="L1157"></a>1157             <strong class="reserved">if</strong> (!<a href="../D/12284.html" title="Multiple defined in 7 places.">cdata</a> || <a href="../D/31142.html" title="Multiple defined in 5 places.">required</a> || attValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1158" name="L1158"></a>1158                 <strong class="reserved">int</strong> attrCount = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1159" name="L1159"></a>1159                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; attrCount; i++) <em class="brace">{</em>
<a id="L1160" name="L1160"></a>1160                     <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(i) == attRawName) <em class="brace">{</em>
<a id="L1161" name="L1161"></a>1161                         specified = <strong class="reserved">true</strong>;
<a id="L1162" name="L1162"></a>1162                         <strong class="reserved">break</strong>;
<a id="L1163" name="L1163"></a>1163                     <em class="brace">}</em>
<a id="L1164" name="L1164"></a>1164                 <em class="brace">}</em>
<a id="L1165" name="L1165"></a>1165             <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166 
<a id="L1167" name="L1167"></a>1167             <strong class="reserved">if</strong> (!specified) <em class="brace">{</em>
<a id="L1168" name="L1168"></a>1168                 <strong class="reserved">if</strong> (<a href="../D/31142.html" title="Multiple defined in 5 places.">required</a>) <em class="brace">{</em>
<a id="L1169" name="L1169"></a>1169                     <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1170" name="L1170"></a>1170                         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args = <em class="brace">{</em><a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>.localpart, attRawName<em class="brace">}</em>;
<a id="L1171" name="L1171"></a>1171                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1172" name="L1172"></a>1172                                                    "MSG_REQUIRED_ATTRIBUTE_NOT_SPECIFIED", args,
<a id="L1173" name="L1173"></a>1173                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1174" name="L1174"></a>1174                     <em class="brace">}</em>
<a id="L1175" name="L1175"></a>1175                 <em class="brace">}</em>
<a id="L1176" name="L1176"></a>1176                 <strong class="reserved">else</strong> <strong class="reserved">if</strong> (attValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1177" name="L1177"></a>1177                     <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fGrammarBucket.<a href="../D/22692.html" title="Multiple defined in 9 places.">getStandalone</a>()) <em class="brace">{</em>
<a id="L1178" name="L1178"></a>1178                         <strong class="reserved">if</strong> (fDTDGrammar.<a href="../S/5142.html#L372" title="Defined at 372 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getAttributeDeclIsExternal</a>(attlistIndex)) <em class="brace">{</em>
<a id="L1179" name="L1179"></a>1179 
<a id="L1180" name="L1180"></a>1180                             <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args = <em class="brace">{</em> <a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>.localpart, attRawName<em class="brace">}</em>;
<a id="L1181" name="L1181"></a>1181                             fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1182" name="L1182"></a>1182                                                        "MSG_DEFAULTED_ATTRIBUTE_NOT_SPECIFIED", args,
<a id="L1183" name="L1183"></a>1183                                                        <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1184" name="L1184"></a>1184                         <em class="brace">}</em>
<a id="L1185" name="L1185"></a>1185                     <em class="brace">}</em>
<a id="L1186" name="L1186"></a>1186 
<a id="L1187" name="L1187"></a>1187                     <em class="comment">// add namespace information</em>
<a id="L1188" name="L1188"></a>1188                     <strong class="reserved">if</strong> (fNamespaces) <em class="brace">{</em>
<a id="L1189" name="L1189"></a>1189                         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = attRawName.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':');
<a id="L1190" name="L1190"></a>1190                         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> != -1) <em class="brace">{</em>
<a id="L1191" name="L1191"></a>1191                             attPrefix = attRawName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1192" name="L1192"></a>1192                             attPrefix = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(attPrefix);
<a id="L1193" name="L1193"></a>1193                             attLocalpart = attRawName.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> + 1);
<a id="L1194" name="L1194"></a>1194                             attLocalpart = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(attLocalpart);
<a id="L1195" name="L1195"></a>1195                         <em class="brace">}</em>
<a id="L1196" name="L1196"></a>1196                     <em class="brace">}</em>
<a id="L1197" name="L1197"></a>1197 
<a id="L1198" name="L1198"></a>1198                     <em class="comment">// add attribute</em>
<a id="L1199" name="L1199"></a>1199                     fTempQName.<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(attPrefix, attLocalpart, attRawName, fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.uri);
<a id="L1200" name="L1200"></a>1200                     <strong class="reserved">int</strong> newAttr = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/10660.html" title="Multiple defined in 56 places.">addAttribute</a>(fTempQName, attType, attValue);
<a id="L1201" name="L1201"></a>1201                 <em class="brace">}</em>
<a id="L1202" name="L1202"></a>1202             <em class="brace">}</em>
<a id="L1203" name="L1203"></a>1203             <em class="comment">// get next att decl in the Grammar for this element</em>
<a id="L1204" name="L1204"></a>1204             attlistIndex = fDTDGrammar.<a href="../S/5142.html#L1325" title="Defined at 1325 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getNextAttributeDeclIndex</a>(attlistIndex);
<a id="L1205" name="L1205"></a>1205         <em class="brace">}</em>
<a id="L1206" name="L1206"></a>1206 
<a id="L1207" name="L1207"></a>1207         <em class="comment">// now iterate through the expanded attributes for</em>
<a id="L1208" name="L1208"></a>1208         <em class="comment">// 1. if every attribute seen is declared in the DTD</em>
<a id="L1209" name="L1209"></a>1209         <em class="comment">// 2. check if the VC: default_fixed holds</em>
<a id="L1210" name="L1210"></a>1210         <em class="comment">// 3. validate every attribute.</em>
<a id="L1211" name="L1211"></a>1211         <strong class="reserved">int</strong> attrCount = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L1212" name="L1212"></a>1212         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; attrCount; i++) <em class="brace">{</em>
<a id="L1213" name="L1213"></a>1213             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrRawName = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/21788.html" title="Multiple defined in 20 places.">getQName</a>(i);
<a id="L1214" name="L1214"></a>1214             <strong class="reserved">boolean</strong> declared = <strong class="reserved">false</strong>;
<a id="L1215" name="L1215"></a>1215             <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1216" name="L1216"></a>1216                 <strong class="reserved">if</strong> (fGrammarBucket.<a href="../D/22692.html" title="Multiple defined in 9 places.">getStandalone</a>()) <em class="brace">{</em>
<a id="L1217" name="L1217"></a>1217                     <em class="comment">// check VC: Standalone Document Declaration, entities</em>
<a id="L1218" name="L1218"></a>1218                     <em class="comment">// references appear in the document.</em>
<a id="L1219" name="L1219"></a>1219                     <em class="comment">// REVISIT: this can be combined to a single check in</em>
<a id="L1220" name="L1220"></a>1220                     <em class="comment">// startEntity if we add one more argument in</em>
<a id="L1221" name="L1221"></a>1221                     <em class="comment">// startEnity, inAttrValue</em>
<a id="L1222" name="L1222"></a>1222                     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nonNormalizedValue = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/21004.html" title="Multiple defined in 3 places.">getNonNormalizedValue</a>(i);
<a id="L1223" name="L1223"></a>1223                     <strong class="reserved">if</strong> (nonNormalizedValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName = <a href="../S/5160.html#L1318" title="Defined at 1318 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">getExternalEntityRefInAttrValue</a>(nonNormalizedValue);
<a id="L1225" name="L1225"></a>1225                         <strong class="reserved">if</strong> (entityName != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1226" name="L1226"></a>1226                             fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1227" name="L1227"></a>1227                                                        "MSG_REFERENCE_TO_EXTERNALLY_DECLARED_ENTITY_WHEN_STANDALONE",
<a id="L1228" name="L1228"></a>1228                                                        <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>entityName<em class="brace">}</em>,
<a id="L1229" name="L1229"></a>1229                                                        <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1230" name="L1230"></a>1230                         <em class="brace">}</em>
<a id="L1231" name="L1231"></a>1231                     <em class="brace">}</em>
<a id="L1232" name="L1232"></a>1232                 <em class="brace">}</em>
<a id="L1233" name="L1233"></a>1233             <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234             <strong class="reserved">int</strong> attDefIndex = -1;
<a id="L1235" name="L1235"></a>1235             <strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> =
<a id="L1236" name="L1236"></a>1236             fDTDGrammar.<a href="../S/5142.html#L1311" title="Defined at 1311 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getFirstAttributeDeclIndex</a>(elementIndex);
<a id="L1237" name="L1237"></a>1237             <strong class="reserved">while</strong> (<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> != -1) <em class="brace">{</em>
<a id="L1238" name="L1238"></a>1238                 fDTDGrammar.<a href="../D/17071.html" title="Multiple defined in 2 places.">getAttributeDecl</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, fTempAttDecl);
<a id="L1239" name="L1239"></a>1239                 <strong class="reserved">if</strong> (fTempAttDecl.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.rawname == attrRawName) <em class="brace">{</em>
<a id="L1240" name="L1240"></a>1240                     <em class="comment">// found the match att decl,</em>
<a id="L1241" name="L1241"></a>1241                     attDefIndex = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L1242" name="L1242"></a>1242                     declared = <strong class="reserved">true</strong>;
<a id="L1243" name="L1243"></a>1243                     <strong class="reserved">break</strong>;
<a id="L1244" name="L1244"></a>1244                 <em class="brace">}</em>
<a id="L1245" name="L1245"></a>1245                 <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> = fDTDGrammar.<a href="../S/5142.html#L1325" title="Defined at 1325 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getNextAttributeDeclIndex</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>);
<a id="L1246" name="L1246"></a>1246             <em class="brace">}</em>
<a id="L1247" name="L1247"></a>1247             <strong class="reserved">if</strong> (!declared) <em class="brace">{</em>
<a id="L1248" name="L1248"></a>1248                 <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1249" name="L1249"></a>1249                     <em class="comment">// REVISIT - cache the elem/attr tuple so that we only</em>
<a id="L1250" name="L1250"></a>1250                     <em class="comment">// give this error once for each unique occurrence</em>
<a id="L1251" name="L1251"></a>1251                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args = <em class="brace">{</em> <a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>.rawname, attrRawName<em class="brace">}</em>;
<a id="L1252" name="L1252"></a>1252 
<a id="L1253" name="L1253"></a>1253                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1254" name="L1254"></a>1254                                                "MSG_ATTRIBUTE_NOT_DECLARED",
<a id="L1255" name="L1255"></a>1255                                                args,<a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1256" name="L1256"></a>1256                 <em class="brace">}</em>
<a id="L1257" name="L1257"></a>1257                 <strong class="reserved">continue</strong>;
<a id="L1258" name="L1258"></a>1258             <em class="brace">}</em>
<a id="L1259" name="L1259"></a>1259             <em class="comment">// attribute is declared</em>
<a id="L1260" name="L1260"></a>1260 
<a id="L1261" name="L1261"></a>1261             <em class="comment">// fTempAttDecl should have the right value set now, so</em>
<a id="L1262" name="L1262"></a>1262             <em class="comment">// the following is not needed</em>
<a id="L1263" name="L1263"></a>1263             <em class="comment">// fGrammar.getAttributeDecl(attDefIndex,fTempAttDecl);</em>
<a id="L1264" name="L1264"></a>1264 
<a id="L1265" name="L1265"></a>1265             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = <a href="../S/5160.html#L1749" title="Defined at 1749 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">getAttributeTypeName</a>(fTempAttDecl);
<a id="L1266" name="L1266"></a>1266             <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/34196.html" title="Multiple defined in 29 places.">setType</a>(i, <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>);
<a id="L1267" name="L1267"></a>1267             <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/17122.html" title="Multiple defined in 9 places.">getAugmentations</a>(i).<a href="../D/30015.html" title="Multiple defined in 5 places.">putItem</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ATTRIBUTE_DECLARED, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L1268" name="L1268"></a>1268 
<a id="L1269" name="L1269"></a>1269             <strong class="reserved">boolean</strong> changedByNormalization = <strong class="reserved">false</strong>;
<a id="L1270" name="L1270"></a>1270             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> oldValue = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(i);
<a id="L1271" name="L1271"></a>1271             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue = oldValue;
<a id="L1272" name="L1272"></a>1272             <strong class="reserved">if</strong> (<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/26266.html" title="Multiple defined in 20 places.">isSpecified</a>(i) &amp;&amp; <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fCDATASymbol) <em class="brace">{</em>
<a id="L1273" name="L1273"></a>1273                 changedByNormalization = <a href="../S/5160.html#L1505" title="Defined at 1505 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">normalizeAttrValue</a>(<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, i);
<a id="L1274" name="L1274"></a>1274                 attrValue = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(i);
<a id="L1275" name="L1275"></a>1275                 <strong class="reserved">if</strong> (fPerformValidation &amp;&amp; fGrammarBucket.<a href="../D/22692.html" title="Multiple defined in 9 places.">getStandalone</a>()
<a id="L1276" name="L1276"></a>1276                     &amp;&amp; changedByNormalization
<a id="L1277" name="L1277"></a>1277                     &amp;&amp; fDTDGrammar.<a href="../S/5142.html#L372" title="Defined at 372 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getAttributeDeclIsExternal</a>(<a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>)
<a id="L1278" name="L1278"></a>1278                    ) <em class="brace">{</em>
<a id="L1279" name="L1279"></a>1279                     <em class="comment">// check VC: Standalone Document Declaration</em>
<a id="L1280" name="L1280"></a>1280                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1281" name="L1281"></a>1281                                                "MSG_ATTVALUE_CHANGED_DURING_NORMALIZATION_WHEN_STANDALONE",
<a id="L1282" name="L1282"></a>1282                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>attrRawName, oldValue, attrValue<em class="brace">}</em>,
<a id="L1283" name="L1283"></a>1283                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1284" name="L1284"></a>1284                 <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285             <em class="brace">}</em>
<a id="L1286" name="L1286"></a>1286             <strong class="reserved">if</strong> (!fPerformValidation) <em class="brace">{</em>
<a id="L1287" name="L1287"></a>1287                 <strong class="reserved">continue</strong>;
<a id="L1288" name="L1288"></a>1288             <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289             <strong class="reserved">if</strong> (fTempAttDecl.simpleType.defaultType ==
<a id="L1290" name="L1290"></a>1290                 <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.DEFAULT_TYPE_FIXED) <em class="brace">{</em>
<a id="L1291" name="L1291"></a>1291                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a> = fTempAttDecl.simpleType.<a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a>;
<a id="L1292" name="L1292"></a>1292 
<a id="L1293" name="L1293"></a>1293                 <strong class="reserved">if</strong> (!attrValue.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a>)) <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294                     <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] args = <em class="brace">{</em><a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>.localpart,
<a id="L1295" name="L1295"></a>1295                         attrRawName,
<a id="L1296" name="L1296"></a>1296                         attrValue,
<a id="L1297" name="L1297"></a>1297                         <a href="../D/14750.html" title="Multiple defined in 8 places.">defaultValue</a><em class="brace">}</em>;
<a id="L1298" name="L1298"></a>1298                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1299" name="L1299"></a>1299                                                "MSG_FIXED_ATTVALUE_INVALID",
<a id="L1300" name="L1300"></a>1300                                                args, <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1301" name="L1301"></a>1301                 <em class="brace">}</em>
<a id="L1302" name="L1302"></a>1302             <em class="brace">}</em>
<a id="L1303" name="L1303"></a>1303 
<a id="L1304" name="L1304"></a>1304             <strong class="reserved">if</strong> (fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENTITY ||
<a id="L1305" name="L1305"></a>1305                 fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENUMERATION ||
<a id="L1306" name="L1306"></a>1306                 fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ID ||
<a id="L1307" name="L1307"></a>1307                 fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_IDREF ||
<a id="L1308" name="L1308"></a>1308                 fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NMTOKEN ||
<a id="L1309" name="L1309"></a>1309                 fTempAttDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NOTATION
<a id="L1310" name="L1310"></a>1310                ) <em class="brace">{</em>
<a id="L1311" name="L1311"></a>1311                 <a href="../S/5160.html#L1344" title="Defined at 1344 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">validateDTDattribute</a>(<a href="../S/1716.html#L81" title="Defined at 81 in src/java/lang/annotation/IncompleteAnnotationException.java.">elementName</a>, attrValue, fTempAttDecl);
<a id="L1312" name="L1312"></a>1312             <em class="brace">}</em>
<a id="L1313" name="L1313"></a>1313         <em class="brace">}</em> <em class="comment">// for all attributes</em>
<a id="L1314" name="L1314"></a>1314 
<a id="L1315" name="L1315"></a>1315     <em class="brace">}</em> <em class="comment">// addDTDDefaultAttrsAndValidate(int,XMLAttrList)</em>
<a id="L1316" name="L1316"></a>1316 
<div class="comment">
     /** Checks entities in attribute values for standalone VC. */</div>
<a id="L1318" name="L1318"></a>1318     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16513.html" title="Multiple referred from 2 places.">getExternalEntityRefInAttrValue</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> nonNormalizedValue) <em class="brace">{</em>
<a id="L1319" name="L1319"></a>1319         <strong class="reserved">int</strong> valLength = nonNormalizedValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L1320" name="L1320"></a>1320         <strong class="reserved">int</strong> ampIndex = nonNormalizedValue.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('&amp;');
<a id="L1321" name="L1321"></a>1321         <strong class="reserved">while</strong> (ampIndex != -1) <em class="brace">{</em>
<a id="L1322" name="L1322"></a>1322             <strong class="reserved">if</strong> (ampIndex + 1 &lt; valLength &amp;&amp;
<a id="L1323" name="L1323"></a>1323                 nonNormalizedValue.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(ampIndex+1) != '#') <em class="brace">{</em>
<a id="L1324" name="L1324"></a>1324                 <strong class="reserved">int</strong> semicolonIndex = nonNormalizedValue.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(';', ampIndex+1);
<a id="L1325" name="L1325"></a>1325                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName = nonNormalizedValue.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(ampIndex+1, semicolonIndex);
<a id="L1326" name="L1326"></a>1326                 entityName = fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(entityName);
<a id="L1327" name="L1327"></a>1327                 <strong class="reserved">int</strong> entIndex = fDTDGrammar.<a href="../S/5142.html#L1395" title="Defined at 1395 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getEntityDeclIndex</a>(entityName);
<a id="L1328" name="L1328"></a>1328                 <strong class="reserved">if</strong> (entIndex &gt; -1) <em class="brace">{</em>
<a id="L1329" name="L1329"></a>1329                     fDTDGrammar.<a href="../S/5142.html#L1412" title="Defined at 1412 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getEntityDecl</a>(entIndex, fEntityDecl);
<a id="L1330" name="L1330"></a>1330                     <strong class="reserved">if</strong> (fEntityDecl.inExternal ||
<a id="L1331" name="L1331"></a>1331                         (entityName = <a href="../S/5160.html#L1318" title="Defined at 1318 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">getExternalEntityRefInAttrValue</a>(fEntityDecl.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)) != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1332" name="L1332"></a>1332                         <strong class="reserved">return</strong> entityName;
<a id="L1333" name="L1333"></a>1333                     <em class="brace">}</em>
<a id="L1334" name="L1334"></a>1334                 <em class="brace">}</em>
<a id="L1335" name="L1335"></a>1335             <em class="brace">}</em>
<a id="L1336" name="L1336"></a>1336             ampIndex = nonNormalizedValue.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>('&amp;', ampIndex+1);
<a id="L1337" name="L1337"></a>1337         <em class="brace">}</em>
<a id="L1338" name="L1338"></a>1338         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1339" name="L1339"></a>1339     <em class="brace">}</em> <em class="comment">// isExternalEntityRefInAttrValue(String):String</em>
<a id="L1340" name="L1340"></a>1340 
<div class="comment">
      Validate attributes in DTD fashion.</div>
<a id="L1344" name="L1344"></a>1344     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5160.html#L1311" title="Referred from 1311 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">validateDTDattribute</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attValue,
<a id="L1345" name="L1345"></a>1345                                       <a href="../S/5157.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLAttributeDecl.java.">XMLAttributeDecl</a> <a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>)
<a id="L1346" name="L1346"></a>1346     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1347" name="L1347"></a>1347 
<a id="L1348" name="L1348"></a>1348         <strong class="reserved">switch</strong> (<a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1349" name="L1349"></a>1349         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENTITY: <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350                 <em class="comment">// NOTE: Save this information because invalidStandaloneAttDef</em>
<a id="L1351" name="L1351"></a>1351                 <strong class="reserved">boolean</strong> isAlistAttribute = <a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>;
<a id="L1352" name="L1352"></a>1352 
<a id="L1353" name="L1353"></a>1353                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354                     <strong class="reserved">if</strong> (isAlistAttribute) <em class="brace">{</em>
<a id="L1355" name="L1355"></a>1355                         fValENTITIES.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1356" name="L1356"></a>1356                     <em class="brace">}</em>
<a id="L1357" name="L1357"></a>1357                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1358" name="L1358"></a>1358                         fValENTITY.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1359" name="L1359"></a>1359                     <em class="brace">}</em>
<a id="L1360" name="L1360"></a>1360                 <em class="brace">}</em>
<a id="L1361" name="L1361"></a>1361                 <strong class="reserved">catch</strong> (<a href="../S/5225.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/dv/InvalidDatatypeValueException.java.">InvalidDatatypeValueException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1362" name="L1362"></a>1362                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1363" name="L1363"></a>1363                                                <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>(),
<a id="L1364" name="L1364"></a>1364                                                <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/17020.html" title="Multiple defined in 3 places.">getArgs</a>(),
<a id="L1365" name="L1365"></a>1365                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR );
<a id="L1366" name="L1366"></a>1366 
<a id="L1367" name="L1367"></a>1367                 <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368                 <strong class="reserved">break</strong>;
<a id="L1369" name="L1369"></a>1369             <em class="brace">}</em>
<a id="L1370" name="L1370"></a>1370 
<a id="L1371" name="L1371"></a>1371         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NOTATION:
<a id="L1372" name="L1372"></a>1372         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENUMERATION: <em class="brace">{</em>
<a id="L1373" name="L1373"></a>1373                 <strong class="reserved">boolean</strong> found = <strong class="reserved">false</strong>;
<a id="L1374" name="L1374"></a>1374                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> [] enumVals = <a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.simpleType.<a href="../S/1147.html#L5207" title="Defined at 5207 in src/java/util/Collections.java.">enumeration</a>;
<a id="L1375" name="L1375"></a>1375                 <strong class="reserved">if</strong> (enumVals == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1376" name="L1376"></a>1376                     found = <strong class="reserved">false</strong>;
<a id="L1377" name="L1377"></a>1377                 <em class="brace">}</em>
<a id="L1378" name="L1378"></a>1378                 <strong class="reserved">else</strong>
<a id="L1379" name="L1379"></a>1379                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; enumVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380                         <strong class="reserved">if</strong> (attValue == enumVals[i] || attValue.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(enumVals[i])) <em class="brace">{</em>
<a id="L1381" name="L1381"></a>1381                             found = <strong class="reserved">true</strong>;
<a id="L1382" name="L1382"></a>1382                             <strong class="reserved">break</strong>;
<a id="L1383" name="L1383"></a>1383                         <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384                     <em class="brace">}</em>
<a id="L1385" name="L1385"></a>1385 
<a id="L1386" name="L1386"></a>1386                 <strong class="reserved">if</strong> (!found) <em class="brace">{</em>
<a id="L1387" name="L1387"></a>1387                     <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> enumValueString = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L1388" name="L1388"></a>1388                     <strong class="reserved">if</strong> (enumVals != <strong class="reserved">null</strong>)
<a id="L1389" name="L1389"></a>1389                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; enumVals.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1390" name="L1390"></a>1390                             enumValueString.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(enumVals[i]+" ");
<a id="L1391" name="L1391"></a>1391                         <em class="brace">}</em>
<a id="L1392" name="L1392"></a>1392                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1393" name="L1393"></a>1393                                                "MSG_ATTRIBUTE_VALUE_NOT_IN_LIST",
<a id="L1394" name="L1394"></a>1394                                                <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.rawname, attValue, enumValueString<em class="brace">}</em>,
<a id="L1395" name="L1395"></a>1395                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1396" name="L1396"></a>1396                 <em class="brace">}</em>
<a id="L1397" name="L1397"></a>1397                 <strong class="reserved">break</strong>;
<a id="L1398" name="L1398"></a>1398             <em class="brace">}</em>
<a id="L1399" name="L1399"></a>1399 
<a id="L1400" name="L1400"></a>1400         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ID: <em class="brace">{</em>
<a id="L1401" name="L1401"></a>1401                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1402" name="L1402"></a>1402                     fValID.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1403" name="L1403"></a>1403                 <em class="brace">}</em>
<a id="L1404" name="L1404"></a>1404                 <strong class="reserved">catch</strong> (<a href="../S/5225.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/dv/InvalidDatatypeValueException.java.">InvalidDatatypeValueException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1405" name="L1405"></a>1405                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1406" name="L1406"></a>1406                                                <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>(),
<a id="L1407" name="L1407"></a>1407                                                <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/17020.html" title="Multiple defined in 3 places.">getArgs</a>(),
<a id="L1408" name="L1408"></a>1408                                                <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR );
<a id="L1409" name="L1409"></a>1409                 <em class="brace">}</em>
<a id="L1410" name="L1410"></a>1410                 <strong class="reserved">break</strong>;
<a id="L1411" name="L1411"></a>1411             <em class="brace">}</em>
<a id="L1412" name="L1412"></a>1412 
<a id="L1413" name="L1413"></a>1413         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_IDREF: <em class="brace">{</em>
<a id="L1414" name="L1414"></a>1414                 <strong class="reserved">boolean</strong> isAlistAttribute = <a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>;<em class="comment">//Caveat - Save this information because invalidStandaloneAttDef</em>
<a id="L1415" name="L1415"></a>1415 
<a id="L1416" name="L1416"></a>1416                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1417" name="L1417"></a>1417                     <strong class="reserved">if</strong> (isAlistAttribute) <em class="brace">{</em>
<a id="L1418" name="L1418"></a>1418                         fValIDRefs.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1419" name="L1419"></a>1419                     <em class="brace">}</em>
<a id="L1420" name="L1420"></a>1420                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1421" name="L1421"></a>1421                         fValIDRef.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1422" name="L1422"></a>1422                     <em class="brace">}</em>
<a id="L1423" name="L1423"></a>1423                 <em class="brace">}</em>
<a id="L1424" name="L1424"></a>1424                 <strong class="reserved">catch</strong> (<a href="../S/5225.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/dv/InvalidDatatypeValueException.java.">InvalidDatatypeValueException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1425" name="L1425"></a>1425                     <strong class="reserved">if</strong> (isAlistAttribute) <em class="brace">{</em>
<a id="L1426" name="L1426"></a>1426                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1427" name="L1427"></a>1427                                                    "IDREFSInvalid",
<a id="L1428" name="L1428"></a>1428                                                    <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>attValue<em class="brace">}</em>,
<a id="L1429" name="L1429"></a>1429                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR );
<a id="L1430" name="L1430"></a>1430                     <em class="brace">}</em>
<a id="L1431" name="L1431"></a>1431                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1432" name="L1432"></a>1432                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1433" name="L1433"></a>1433                                                    <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/19919.html" title="Multiple defined in 41 places.">getKey</a>(),
<a id="L1434" name="L1434"></a>1434                                                    <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/17020.html" title="Multiple defined in 3 places.">getArgs</a>(),
<a id="L1435" name="L1435"></a>1435                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR );
<a id="L1436" name="L1436"></a>1436                     <em class="brace">}</em>
<a id="L1437" name="L1437"></a>1437 
<a id="L1438" name="L1438"></a>1438                 <em class="brace">}</em>
<a id="L1439" name="L1439"></a>1439                 <strong class="reserved">break</strong>;
<a id="L1440" name="L1440"></a>1440             <em class="brace">}</em>
<a id="L1441" name="L1441"></a>1441 
<a id="L1442" name="L1442"></a>1442         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NMTOKEN: <em class="brace">{</em>
<a id="L1443" name="L1443"></a>1443                 <strong class="reserved">boolean</strong> isAlistAttribute = <a href="../D/11630.html" title="Multiple defined in 23 places.">attributeDecl</a>.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a>;<em class="comment">//Caveat - Save this information because invalidStandaloneAttDef</em>
<a id="L1444" name="L1444"></a>1444                 <em class="comment">//changes fTempAttDef</em>
<a id="L1445" name="L1445"></a>1445                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1446" name="L1446"></a>1446                     <strong class="reserved">if</strong> (isAlistAttribute) <em class="brace">{</em>
<a id="L1447" name="L1447"></a>1447                         fValNMTOKENS.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1448" name="L1448"></a>1448                     <em class="brace">}</em>
<a id="L1449" name="L1449"></a>1449                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450                         fValNMTOKEN.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(attValue, fValidationState);
<a id="L1451" name="L1451"></a>1451                     <em class="brace">}</em>
<a id="L1452" name="L1452"></a>1452                 <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453                 <strong class="reserved">catch</strong> (<a href="../S/5225.html#L72" title="Defined at 72 in src/com/sun/org/apache/xerces/internal/impl/dv/InvalidDatatypeValueException.java.">InvalidDatatypeValueException</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L1454" name="L1454"></a>1454                     <strong class="reserved">if</strong> (isAlistAttribute) <em class="brace">{</em>
<a id="L1455" name="L1455"></a>1455                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1456" name="L1456"></a>1456                                                    "NMTOKENSInvalid",
<a id="L1457" name="L1457"></a>1457                                                    <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> attValue<em class="brace">}</em>,
<a id="L1458" name="L1458"></a>1458                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1459" name="L1459"></a>1459                     <em class="brace">}</em>
<a id="L1460" name="L1460"></a>1460                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1461" name="L1461"></a>1461                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1462" name="L1462"></a>1462                                                    "NMTOKENInvalid",
<a id="L1463" name="L1463"></a>1463                                                    <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> attValue<em class="brace">}</em>,
<a id="L1464" name="L1464"></a>1464                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1465" name="L1465"></a>1465                     <em class="brace">}</em>
<a id="L1466" name="L1466"></a>1466                 <em class="brace">}</em>
<a id="L1467" name="L1467"></a>1467                 <strong class="reserved">break</strong>;
<a id="L1468" name="L1468"></a>1468             <em class="brace">}</em>
<a id="L1469" name="L1469"></a>1469 
<a id="L1470" name="L1470"></a>1470         <em class="brace">}</em> <em class="comment">// switch</em>
<a id="L1471" name="L1471"></a>1471 
<a id="L1472" name="L1472"></a>1472     <em class="brace">}</em> <em class="comment">// validateDTDattribute(QName,String,XMLAttributeDecl)</em>
<a id="L1473" name="L1473"></a>1473 
<a id="L1474" name="L1474"></a>1474 
<div class="comment">
     /** Returns true if invalid standalone attribute definition. */</div>
<a id="L1476" name="L1476"></a>1476     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> invalidStandaloneAttDef(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/11628.html" title="Multiple defined in 2 places.">attribute</a>) <em class="brace">{</em>
<a id="L1477" name="L1477"></a>1477         <em class="comment">// REVISIT: This obviously needs to be fixed! -Ac</em>
<a id="L1478" name="L1478"></a>1478         <strong class="reserved">boolean</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a> = <strong class="reserved">true</strong>;
<div class="comment">
       if (fStandaloneReader == -1) {
          return false;
       }
       // we are normalizing a default att value...  this ok?
       if (element.rawname == -1) {
          return false;
       }
       return getAttDefIsExternal(element, attribute);</div>
<a id="L1489" name="L1489"></a>1489         <strong class="reserved">return</strong> <a href="../D/34848.html" title="Multiple defined in 2 places.">state</a>;
<a id="L1490" name="L1490"></a>1490     <em class="brace">}</em>
<a id="L1491" name="L1491"></a>1491 
<a id="L1492" name="L1492"></a>1492 
<a id="L1493" name="L1493"></a>1493     <em class="comment">//</em>
<a id="L1494" name="L1494"></a>1494     <em class="comment">// Private methods</em>
<a id="L1495" name="L1495"></a>1495     <em class="comment">//</em>
<a id="L1496" name="L1496"></a>1496 
<a id="L1497" name="L1497"></a>1497 
<div class="comment">
      Normalize the attribute value of a non CDATA attributes collapsing
      sequences of space characters (x20)
      @param attributes The list of attributes
      @param index The index of the attribute to normalize</div>
<a id="L1505" name="L1505"></a>1505     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/5160.html#L1273" title="Referred from 1273 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">normalizeAttrValue</a>(<a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L1506" name="L1506"></a>1506         <em class="comment">// vars</em>
<a id="L1507" name="L1507"></a>1507         <strong class="reserved">boolean</strong> leadingSpace = <strong class="reserved">true</strong>;
<a id="L1508" name="L1508"></a>1508         <strong class="reserved">boolean</strong> spaceStart = <strong class="reserved">false</strong>;
<a id="L1509" name="L1509"></a>1509         <strong class="reserved">boolean</strong> readingNonSpace = <strong class="reserved">false</strong>;
<a id="L1510" name="L1510"></a>1510         <strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0;
<a id="L1511" name="L1511"></a>1511         <strong class="reserved">int</strong> eaten = 0;
<a id="L1512" name="L1512"></a>1512         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> attrValue = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/23531.html" title="Multiple defined in 212 places.">getValue</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1513" name="L1513"></a>1513         <strong class="reserved">char</strong>[] attValue = <strong class="reserved">new</strong> <strong class="reserved">char</strong>[attrValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()];
<a id="L1514" name="L1514"></a>1514 
<a id="L1515" name="L1515"></a>1515         fBuffer.<a href="../D/33077.html" title="Multiple defined in 10 places.">setLength</a>(0);
<a id="L1516" name="L1516"></a>1516         attrValue.<a href="../D/17616.html" title="Multiple defined in 22 places.">getChars</a>(0, attrValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>(), attValue, 0);
<a id="L1517" name="L1517"></a>1517         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; attValue.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1518" name="L1518"></a>1518 
<a id="L1519" name="L1519"></a>1519             <strong class="reserved">if</strong> (attValue[i] == ' ') <em class="brace">{</em>
<a id="L1520" name="L1520"></a>1520 
<a id="L1521" name="L1521"></a>1521                 <em class="comment">// now the tricky part</em>
<a id="L1522" name="L1522"></a>1522                 <strong class="reserved">if</strong> (readingNonSpace) <em class="brace">{</em>
<a id="L1523" name="L1523"></a>1523                     spaceStart = <strong class="reserved">true</strong>;
<a id="L1524" name="L1524"></a>1524                     readingNonSpace = <strong class="reserved">false</strong>;
<a id="L1525" name="L1525"></a>1525                 <em class="brace">}</em>
<a id="L1526" name="L1526"></a>1526 
<a id="L1527" name="L1527"></a>1527                 <strong class="reserved">if</strong> (spaceStart &amp;&amp; !leadingSpace) <em class="brace">{</em>
<a id="L1528" name="L1528"></a>1528                     spaceStart = <strong class="reserved">false</strong>;
<a id="L1529" name="L1529"></a>1529                     fBuffer.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(attValue[i]);
<a id="L1530" name="L1530"></a>1530                     <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++;
<a id="L1531" name="L1531"></a>1531                 <em class="brace">}</em>
<a id="L1532" name="L1532"></a>1532                 <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1533" name="L1533"></a>1533                     <strong class="reserved">if</strong> (leadingSpace || !spaceStart) <em class="brace">{</em>
<a id="L1534" name="L1534"></a>1534                         eaten ++;
<div class="comment">
* BUG #3512 ***
                        int entityCount = attributes.getEntityCount(index);
                        for (int j = 0;  j &lt; entityCount; j++) {
                            int offset = attributes.getEntityOffset(index, j);
                            int length = attributes.getEntityLength(index, j);
                            if (offset &lt;= i-eaten+1) {
                                if (offset+length &gt;= i-eaten+1) {
                                    if (length &gt; 0)
                                        length--;
                                }
                            }
                            else {
                                if (offset &gt; 0)
                                    offset--;
                            }
                            attributes.setEntityOffset(index, j, offset);
                            attributes.setEntityLength(index, j, length);
                        }
                         /***/</div>
<a id="L1554" name="L1554"></a>1554                     <em class="brace">}</em>
<a id="L1555" name="L1555"></a>1555                 <em class="brace">}</em>
<a id="L1556" name="L1556"></a>1556 
<a id="L1557" name="L1557"></a>1557             <em class="brace">}</em>
<a id="L1558" name="L1558"></a>1558             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1559" name="L1559"></a>1559                 readingNonSpace = <strong class="reserved">true</strong>;
<a id="L1560" name="L1560"></a>1560                 spaceStart = <strong class="reserved">false</strong>;
<a id="L1561" name="L1561"></a>1561                 leadingSpace = <strong class="reserved">false</strong>;
<a id="L1562" name="L1562"></a>1562                 fBuffer.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(attValue[i]);
<a id="L1563" name="L1563"></a>1563                 <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++;
<a id="L1564" name="L1564"></a>1564             <em class="brace">}</em>
<a id="L1565" name="L1565"></a>1565         <em class="brace">}</em>
<a id="L1566" name="L1566"></a>1566 
<a id="L1567" name="L1567"></a>1567         <em class="comment">// check if the last appended character is a space.</em>
<a id="L1568" name="L1568"></a>1568         <strong class="reserved">if</strong> (<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &gt; 0 &amp;&amp; fBuffer.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>-1) == ' ') <em class="brace">{</em>
<a id="L1569" name="L1569"></a>1569             fBuffer.<a href="../D/33077.html" title="Multiple defined in 10 places.">setLength</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>-1);
<div class="comment">
* BUG #3512 ***
            int entityCount = attributes.getEntityCount(index);
            for (int j=0;  j &lt; entityCount; j++) {
                int offset = attributes.getEntityOffset(index, j);
                int length = attributes.getEntityLength(index, j);
                if (offset &lt; count-1) {
                    if (offset+length == count) {
                        length--;
                    }
                }
                else {
                    offset--;
                }
                attributes.setEntityOffset(index, j, offset);
                attributes.setEntityLength(index, j, length);
            }
             /***/</div>
<a id="L1587" name="L1587"></a>1587         <em class="brace">}</em>
<a id="L1588" name="L1588"></a>1588         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> newValue = fBuffer.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L1589" name="L1589"></a>1589         <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/34263.html" title="Multiple defined in 100 places.">setValue</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, newValue);
<a id="L1590" name="L1590"></a>1590         <strong class="reserved">return</strong> ! attrValue.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(newValue);
<a id="L1591" name="L1591"></a>1591     <em class="brace">}</em>
<a id="L1592" name="L1592"></a>1592 
<div class="comment">
     /** Root element specified. */</div>
<a id="L1594" name="L1594"></a>1594     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/5160.html#L1877" title="Referred from 1877 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">rootElementSpecified</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> rootElement) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1595" name="L1595"></a>1595         <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1596" name="L1596"></a>1596             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> root1 = fRootElement.rawname;
<a id="L1597" name="L1597"></a>1597             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> root2 = rootElement.rawname;
<a id="L1598" name="L1598"></a>1598             <strong class="reserved">if</strong> (root1 == <strong class="reserved">null</strong> || !root1.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(root2)) <em class="brace">{</em>
<a id="L1599" name="L1599"></a>1599                 fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>( <a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1600" name="L1600"></a>1600                                             "RootElementTypeMustMatchDoctypedecl",
<a id="L1601" name="L1601"></a>1601                                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em>root1, root2<em class="brace">}</em>,
<a id="L1602" name="L1602"></a>1602                                             <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1603" name="L1603"></a>1603             <em class="brace">}</em>
<a id="L1604" name="L1604"></a>1604         <em class="brace">}</em>
<a id="L1605" name="L1605"></a>1605     <em class="brace">}</em> <em class="comment">// rootElementSpecified(QName)</em>
<a id="L1606" name="L1606"></a>1606 
<div class="comment">
      Check that the content of an element is valid.
      <p>
      This is the method of primary concern to the validator. This method is called
      upon the scanner reaching the end tag of an element. At that time, the
      element's children must be structurally validated, so it calls this method.
      The index of the element being checked (in the decl pool), is provided as
      well as an array of element name indexes of the children. The validator must
      confirm that this element can have these children in this order.
      </p><p>
      This can also be called to do 'what if' testing of content models just to see
      if they would be valid.
      </p><p>
      Note that the element index is an index into the element decl pool, whereas
      the children indexes are name indexes, i.e. into the string pool.
      </p><p>
      A value of -1 in the children array indicates a PCDATA node. All other
      indexes will be positive and represent child elements. The count can be
      zero, since some elements have the EMPTY content model and that must be
      confirmed.
      @param elementIndex The index within the <code>ElementDeclPool</code> of this
                          element.
      @param childCount The number of entries in the <code>children</code> array.
      @param children The children of this element.
      @return The value -1 if fully valid, else the 0 based index of the child
              that first failed. If the value returned is equal to the number
              of children, then additional content is required to reach a valid
              ending state.
      @exception Exception Thrown on error.</p></div>
<a id="L1640" name="L1640"></a>1640     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../S/5160.html#L1980" title="Referred from 1980 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">checkContent</a>(<strong class="reserved">int</strong> elementIndex,
<a id="L1641" name="L1641"></a>1641                              <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>,
<a id="L1642" name="L1642"></a>1642                              <strong class="reserved">int</strong> childOffset,
<a id="L1643" name="L1643"></a>1643                              <strong class="reserved">int</strong> childCount) <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1644" name="L1644"></a>1644 
<a id="L1645" name="L1645"></a>1645         fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(elementIndex, fTempElementDecl);
<a id="L1646" name="L1646"></a>1646 
<a id="L1647" name="L1647"></a>1647         <em class="comment">// Get the element name index from the element</em>
<a id="L1648" name="L1648"></a>1648         <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> elementType = fCurrentElement.rawname;
<a id="L1649" name="L1649"></a>1649 
<a id="L1650" name="L1650"></a>1650         <em class="comment">// Get out the content spec for this element</em>
<a id="L1651" name="L1651"></a>1651         <strong class="reserved">final</strong> <strong class="reserved">int</strong> contentType = fCurrentContentSpecType;
<a id="L1652" name="L1652"></a>1652 
<a id="L1653" name="L1653"></a>1653 
<a id="L1654" name="L1654"></a>1654         <em class="comment">//</em>
<a id="L1655" name="L1655"></a>1655         <em class="comment">//  Deal with the possible types of content. We try to optimized here</em>
<a id="L1656" name="L1656"></a>1656         <em class="comment">//  by dealing specially with content models that don't require the</em>
<a id="L1657" name="L1657"></a>1657         <em class="comment">//  full DFA treatment.</em>
<a id="L1658" name="L1658"></a>1658         <em class="comment">//</em>
<a id="L1659" name="L1659"></a>1659         <strong class="reserved">if</strong> (contentType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L1660" name="L1660"></a>1660             <em class="comment">//</em>
<a id="L1661" name="L1661"></a>1661             <em class="comment">//  If the child count is greater than zero, then this is</em>
<a id="L1662" name="L1662"></a>1662             <em class="comment">//  an error right off the bat at index 0.</em>
<a id="L1663" name="L1663"></a>1663             <em class="comment">//</em>
<a id="L1664" name="L1664"></a>1664             <strong class="reserved">if</strong> (childCount != 0) <em class="brace">{</em>
<a id="L1665" name="L1665"></a>1665                 <strong class="reserved">return</strong> 0;
<a id="L1666" name="L1666"></a>1666             <em class="brace">}</em>
<a id="L1667" name="L1667"></a>1667         <em class="brace">}</em>
<a id="L1668" name="L1668"></a>1668         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (contentType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_ANY) <em class="brace">{</em>
<a id="L1669" name="L1669"></a>1669             <em class="comment">//</em>
<a id="L1670" name="L1670"></a>1670             <em class="comment">//  This one is open game so we don't pass any judgement on it</em>
<a id="L1671" name="L1671"></a>1671             <em class="comment">//  at all. Its assumed to fine since it can hold anything.</em>
<a id="L1672" name="L1672"></a>1672             <em class="comment">//</em>
<a id="L1673" name="L1673"></a>1673         <em class="brace">}</em>
<a id="L1674" name="L1674"></a>1674         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (contentType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_MIXED ||
<a id="L1675" name="L1675"></a>1675                  contentType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_CHILDREN) <em class="brace">{</em>
<a id="L1676" name="L1676"></a>1676             <em class="comment">// Get the content model for this element, faulting it in if needed</em>
<a id="L1677" name="L1677"></a>1677             <a href="../S/5150.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/models/ContentModelValidator.java.">ContentModelValidator</a> cmElem = <strong class="reserved">null</strong>;
<a id="L1678" name="L1678"></a>1678             cmElem = fTempElementDecl.contentModelValidator;
<a id="L1679" name="L1679"></a>1679             <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = cmElem.<a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>(<a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>, childOffset, childCount);
<a id="L1680" name="L1680"></a>1680             <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L1681" name="L1681"></a>1681         <em class="brace">}</em>
<a id="L1682" name="L1682"></a>1682         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (contentType == -1) <em class="brace">{</em>
<a id="L1683" name="L1683"></a>1683             <em class="comment">//REVISIT</em>
<div class="comment">
**
            reportRecoverableXMLError(XMLMessages.MSG_ELEMENT_NOT_DECLARED,
                                      XMLMessages.VC_ELEMENT_VALID,
                                      elementType);
             /****/</div>
<a id="L1689" name="L1689"></a>1689         <em class="brace">}</em>
<a id="L1690" name="L1690"></a>1690         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (contentType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_SIMPLE) <em class="brace">{</em>
<a id="L1691" name="L1691"></a>1691 
<a id="L1692" name="L1692"></a>1692             <em class="comment">//REVISIT</em>
<a id="L1693" name="L1693"></a>1693             <em class="comment">// this should never be reached in the case of DTD validation.</em>
<a id="L1694" name="L1694"></a>1694 
<a id="L1695" name="L1695"></a>1695         <em class="brace">}</em>
<a id="L1696" name="L1696"></a>1696         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1697" name="L1697"></a>1697             <em class="comment">//REVISIT</em>
<div class="comment">
**
            fErrorReporter.reportError(fErrorReporter.getLocator(),
                                       ImplementationMessages.XERCES_IMPLEMENTATION_DOMAIN,
                                       ImplementationMessages.VAL_CST,
                                       0,
                                       null,
                                       XMLErrorReporter.ERRORTYPE_FATAL_ERROR);
             /****/</div>
<a id="L1706" name="L1706"></a>1706         <em class="brace">}</em>
<a id="L1707" name="L1707"></a>1707 
<a id="L1708" name="L1708"></a>1708         <em class="comment">// We succeeded</em>
<a id="L1709" name="L1709"></a>1709         <strong class="reserved">return</strong> -1;
<a id="L1710" name="L1710"></a>1710 
<a id="L1711" name="L1711"></a>1711     <em class="brace">}</em> <em class="comment">// checkContent(int,int,QName[]):int</em>
<a id="L1712" name="L1712"></a>1712 
<div class="comment">
     /** Returns the content spec type for an element index. */</div>
<a id="L1714" name="L1714"></a>1714     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/15794.html" title="Multiple referred from 3 places.">getContentSpecType</a>(<strong class="reserved">int</strong> elementIndex) <em class="brace">{</em>
<a id="L1715" name="L1715"></a>1715 
<a id="L1716" name="L1716"></a>1716         <strong class="reserved">int</strong> contentSpecType = -1;
<a id="L1717" name="L1717"></a>1717         <strong class="reserved">if</strong> (elementIndex &gt; -1) <em class="brace">{</em>
<a id="L1718" name="L1718"></a>1718             <strong class="reserved">if</strong> (fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(elementIndex,fTempElementDecl)) <em class="brace">{</em>
<a id="L1719" name="L1719"></a>1719                 contentSpecType = fTempElementDecl.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>;
<a id="L1720" name="L1720"></a>1720             <em class="brace">}</em>
<a id="L1721" name="L1721"></a>1721         <em class="brace">}</em>
<a id="L1722" name="L1722"></a>1722         <strong class="reserved">return</strong> contentSpecType;
<a id="L1723" name="L1723"></a>1723     <em class="brace">}</em>
<a id="L1724" name="L1724"></a>1724 
<div class="comment">
     /** Character data in content. */</div>
<a id="L1726" name="L1726"></a>1726     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11041.html" title="Multiple referred from 3 places.">charDataInContent</a>() <em class="brace">{</em>
<a id="L1727" name="L1727"></a>1727 
<a id="L1728" name="L1728"></a>1728         <strong class="reserved">if</strong> (DEBUG_ELEMENT_CHILDREN) <em class="brace">{</em>
<a id="L1729" name="L1729"></a>1729             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("charDataInContent()");
<a id="L1730" name="L1730"></a>1730         <em class="brace">}</em>
<a id="L1731" name="L1731"></a>1731         <strong class="reserved">if</strong> (fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= fElementChildrenLength) <em class="brace">{</em>
<a id="L1732" name="L1732"></a>1732             <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] newarray = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> * 2];
<a id="L1733" name="L1733"></a>1733             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fElementChildren, 0, newarray, 0, fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1734" name="L1734"></a>1734             fElementChildren = newarray;
<a id="L1735" name="L1735"></a>1735         <em class="brace">}</em>
<a id="L1736" name="L1736"></a>1736         <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname = fElementChildren[fElementChildrenLength];
<a id="L1737" name="L1737"></a>1737         <strong class="reserved">if</strong> (qname == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1738" name="L1738"></a>1738             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = fElementChildrenLength; i &lt; fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1739" name="L1739"></a>1739                 fElementChildren[i] = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L1740" name="L1740"></a>1740             <em class="brace">}</em>
<a id="L1741" name="L1741"></a>1741             qname = fElementChildren[fElementChildrenLength];
<a id="L1742" name="L1742"></a>1742         <em class="brace">}</em>
<a id="L1743" name="L1743"></a>1743         qname.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L1744" name="L1744"></a>1744         fElementChildrenLength++;
<a id="L1745" name="L1745"></a>1745 
<a id="L1746" name="L1746"></a>1746     <em class="brace">}</em> <em class="comment">// charDataInCount()</em>
<a id="L1747" name="L1747"></a>1747 
<div class="comment">
     /** convert attribute type from ints to strings */</div>
<a id="L1749" name="L1749"></a>1749     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/15162.html" title="Multiple referred from 2 places.">getAttributeTypeName</a>(<a href="../S/5157.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLAttributeDecl.java.">XMLAttributeDecl</a> attrDecl) <em class="brace">{</em>
<a id="L1750" name="L1750"></a>1750 
<a id="L1751" name="L1751"></a>1751         <strong class="reserved">switch</strong> (attrDecl.simpleType.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L1752" name="L1752"></a>1752         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENTITY: <em class="brace">{</em>
<a id="L1753" name="L1753"></a>1753                 <strong class="reserved">return</strong> attrDecl.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fENTITIESSymbol : <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fENTITYSymbol;
<a id="L1754" name="L1754"></a>1754             <em class="brace">}</em>
<a id="L1755" name="L1755"></a>1755         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ENUMERATION: <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756                 <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L1757" name="L1757"></a>1757                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('(');
<a id="L1758" name="L1758"></a>1758                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;attrDecl.simpleType.<a href="../S/1147.html#L5207" title="Defined at 5207 in src/java/util/Collections.java.">enumeration</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> ; i++) <em class="brace">{</em>
<a id="L1759" name="L1759"></a>1759                     <strong class="reserved">if</strong> (i &gt; 0) <em class="brace">{</em>
<a id="L1760" name="L1760"></a>1760                         <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('|');
<a id="L1761" name="L1761"></a>1761                     <em class="brace">}</em>
<a id="L1762" name="L1762"></a>1762                     <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(attrDecl.simpleType.<a href="../S/1147.html#L5207" title="Defined at 5207 in src/java/util/Collections.java.">enumeration</a>[i]);
<a id="L1763" name="L1763"></a>1763                 <em class="brace">}</em>
<a id="L1764" name="L1764"></a>1764                 <a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(')');
<a id="L1765" name="L1765"></a>1765                 <strong class="reserved">return</strong> fSymbolTable.<a href="../D/11099.html" title="Multiple defined in 6 places.">addSymbol</a>(<a href="../S/1629.html#L386" title="Defined at 386 in src/java/lang/invoke/LambdaFormEditor.java.">buffer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L1766" name="L1766"></a>1766             <em class="brace">}</em>
<a id="L1767" name="L1767"></a>1767         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_ID: <em class="brace">{</em>
<a id="L1768" name="L1768"></a>1768                 <strong class="reserved">return</strong> <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDSymbol;
<a id="L1769" name="L1769"></a>1769             <em class="brace">}</em>
<a id="L1770" name="L1770"></a>1770         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_IDREF: <em class="brace">{</em>
<a id="L1771" name="L1771"></a>1771                 <strong class="reserved">return</strong> attrDecl.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDREFSSymbol : <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDREFSymbol;
<a id="L1772" name="L1772"></a>1772             <em class="brace">}</em>
<a id="L1773" name="L1773"></a>1773         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NMTOKEN: <em class="brace">{</em>
<a id="L1774" name="L1774"></a>1774                 <strong class="reserved">return</strong> attrDecl.simpleType.<a href="../D/26871.html" title="Multiple defined in 42 places.">list</a> ? <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNMTOKENSSymbol : <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNMTOKENSymbol;
<a id="L1775" name="L1775"></a>1775             <em class="brace">}</em>
<a id="L1776" name="L1776"></a>1776         <strong class="reserved">case</strong> <a href="../S/5141.html#L68" title="Defined at 68 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLSimpleType.java.">XMLSimpleType</a>.TYPE_NOTATION: <em class="brace">{</em>
<a id="L1777" name="L1777"></a>1777                 <strong class="reserved">return</strong> <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNOTATIONSymbol;
<a id="L1778" name="L1778"></a>1778             <em class="brace">}</em>
<a id="L1779" name="L1779"></a>1779         <em class="brace">}</em>
<a id="L1780" name="L1780"></a>1780         <strong class="reserved">return</strong> <a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fCDATASymbol;
<a id="L1781" name="L1781"></a>1781 
<a id="L1782" name="L1782"></a>1782     <em class="brace">}</em> <em class="comment">// getAttributeTypeName(XMLAttributeDecl):String</em>
<a id="L1783" name="L1783"></a>1783 
<div class="comment">
     /** initialization */</div>
<a id="L1785" name="L1785"></a>1785     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20537.html" title="Multiple referred from 888 places.">init</a>() <em class="brace">{</em>
<a id="L1786" name="L1786"></a>1786 
<a id="L1787" name="L1787"></a>1787         <em class="comment">// datatype validators</em>
<a id="L1788" name="L1788"></a>1788         <strong class="reserved">if</strong> (fValidation || fDynamicValidation) <em class="brace">{</em>
<a id="L1789" name="L1789"></a>1789             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1790" name="L1790"></a>1790                 <em class="comment">//REVISIT: datatypeRegistry + initialization of datatype</em>
<a id="L1791" name="L1791"></a>1791                 <em class="comment">//         why do we cast to ListDatatypeValidator?</em>
<a id="L1792" name="L1792"></a>1792                 fValID       = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDSymbol);
<a id="L1793" name="L1793"></a>1793                 fValIDRef    = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDREFSymbol);
<a id="L1794" name="L1794"></a>1794                 fValIDRefs   = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fIDREFSSymbol);
<a id="L1795" name="L1795"></a>1795                 fValENTITY   = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fENTITYSymbol);
<a id="L1796" name="L1796"></a>1796                 fValENTITIES = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fENTITIESSymbol);
<a id="L1797" name="L1797"></a>1797                 fValNMTOKEN  = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNMTOKENSymbol);
<a id="L1798" name="L1798"></a>1798                 fValNMTOKENS = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNMTOKENSSymbol);
<a id="L1799" name="L1799"></a>1799                 fValNOTATION = fDatatypeValidatorFactory.<a href="../D/17369.html" title="Multiple defined in 3 places.">getBuiltInDV</a>(<a href="../S/5315.html#L28" title="Defined at 28 in src/com/sun/org/apache/xerces/internal/util/XMLSymbols.java.">XMLSymbols</a>.fNOTATIONSymbol);
<a id="L1800" name="L1800"></a>1800 
<a id="L1801" name="L1801"></a>1801             <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802             <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L1803" name="L1803"></a>1803                 <em class="comment">// should never happen</em>
<a id="L1804" name="L1804"></a>1804                 e.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>(<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err);
<a id="L1805" name="L1805"></a>1805             <em class="brace">}</em>
<a id="L1806" name="L1806"></a>1806 
<a id="L1807" name="L1807"></a>1807         <em class="brace">}</em>
<a id="L1808" name="L1808"></a>1808 
<a id="L1809" name="L1809"></a>1809     <em class="brace">}</em> <em class="comment">// init()</em>
<a id="L1810" name="L1810"></a>1810 
<div class="comment">
     /** ensure element stack capacity */</div>
<a id="L1812" name="L1812"></a>1812     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13943.html" title="Multiple referred from 2 places.">ensureStackCapacity</a> (<strong class="reserved">int</strong> newElementDepth) <em class="brace">{</em>
<a id="L1813" name="L1813"></a>1813         <strong class="reserved">if</strong> (newElementDepth == fElementQNamePartsStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L1814" name="L1814"></a>1814 
<a id="L1815" name="L1815"></a>1815             <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] newStackOfQueue = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[newElementDepth * 2];
<a id="L1816" name="L1816"></a>1816             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(<strong class="reserved">this</strong>.fElementQNamePartsStack, 0, newStackOfQueue, 0, newElementDepth );
<a id="L1817" name="L1817"></a>1817             fElementQNamePartsStack = newStackOfQueue;
<a id="L1818" name="L1818"></a>1818 
<a id="L1819" name="L1819"></a>1819             <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname = fElementQNamePartsStack[newElementDepth];
<a id="L1820" name="L1820"></a>1820             <strong class="reserved">if</strong> (qname == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1821" name="L1821"></a>1821                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = newElementDepth; i &lt; fElementQNamePartsStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1822" name="L1822"></a>1822                     fElementQNamePartsStack[i] = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L1823" name="L1823"></a>1823                 <em class="brace">}</em>
<a id="L1824" name="L1824"></a>1824             <em class="brace">}</em>
<a id="L1825" name="L1825"></a>1825 
<a id="L1826" name="L1826"></a>1826             <strong class="reserved">int</strong>[] newStack = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[newElementDepth * 2];
<a id="L1827" name="L1827"></a>1827             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fElementIndexStack, 0, newStack, 0, newElementDepth);
<a id="L1828" name="L1828"></a>1828             fElementIndexStack = newStack;
<a id="L1829" name="L1829"></a>1829 
<a id="L1830" name="L1830"></a>1830             newStack = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[newElementDepth * 2];
<a id="L1831" name="L1831"></a>1831             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fContentSpecTypeStack, 0, newStack, 0, newElementDepth);
<a id="L1832" name="L1832"></a>1832             fContentSpecTypeStack = newStack;
<a id="L1833" name="L1833"></a>1833 
<a id="L1834" name="L1834"></a>1834         <em class="brace">}</em>
<a id="L1835" name="L1835"></a>1835     <em class="brace">}</em> <em class="comment">// ensureStackCapacity</em>
<a id="L1836" name="L1836"></a>1836 
<a id="L1837" name="L1837"></a>1837 
<a id="L1838" name="L1838"></a>1838     <em class="comment">//</em>
<a id="L1839" name="L1839"></a>1839     <em class="comment">// Protected methods</em>
<a id="L1840" name="L1840"></a>1840     <em class="comment">//</em>
<a id="L1841" name="L1841"></a>1841 
<div class="comment">
 Handle element
      @return true if validator is removed from the pipeline</div>
<a id="L1845" name="L1845"></a>1845     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/20150.html" title="Multiple referred from 8 places.">handleStartElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)
<a id="L1846" name="L1846"></a>1846                         <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1847" name="L1847"></a>1847 
<a id="L1848" name="L1848"></a>1848 
<a id="L1849" name="L1849"></a>1849         <em class="comment">// VC: Root Element Type</em>
<a id="L1850" name="L1850"></a>1850         <em class="comment">// see if the root element's name matches the one in DoctypeDecl</em>
<a id="L1851" name="L1851"></a>1851         <strong class="reserved">if</strong> (!fSeenRootElement) <em class="brace">{</em>
<a id="L1852" name="L1852"></a>1852             <em class="comment">// REVISIT: Here are current assumptions about validation features</em>
<a id="L1853" name="L1853"></a>1853             <em class="comment">//          given that XMLSchema validator is in the pipeline</em>
<a id="L1854" name="L1854"></a>1854             <em class="comment">//</em>
<a id="L1855" name="L1855"></a>1855             <em class="comment">// http://xml.org/sax/features/validation = true</em>
<a id="L1856" name="L1856"></a>1856             <em class="comment">// http://apache.org/xml/features/validation/schema = true</em>
<a id="L1857" name="L1857"></a>1857             <em class="comment">//</em>
<a id="L1858" name="L1858"></a>1858             <em class="comment">// [1] XML instance document only has reference to a DTD</em>
<a id="L1859" name="L1859"></a>1859             <em class="comment">//  Outcome: report validation errors only against dtd.</em>
<a id="L1860" name="L1860"></a>1860             <em class="comment">//</em>
<a id="L1861" name="L1861"></a>1861             <em class="comment">// [2] XML instance document has only XML Schema grammars:</em>
<a id="L1862" name="L1862"></a>1862             <em class="comment">//  Outcome: report validation errors only against schemas (no errors produced from DTD validator)</em>
<a id="L1863" name="L1863"></a>1863             <em class="comment">//</em>
<a id="L1864" name="L1864"></a>1864             <em class="comment">// [3] XML instance document has DTD and XML schemas:</em>
<a id="L1865" name="L1865"></a>1865             <em class="comment">// [a] if schema language is not set outcome - validation errors reported against both grammars: DTD and schemas.</em>
<a id="L1866" name="L1866"></a>1866             <em class="comment">// [b] if schema language is set to XML Schema - do not report validation errors</em>
<a id="L1867" name="L1867"></a>1867             <em class="comment">//</em>
<a id="L1868" name="L1868"></a>1868             <em class="comment">// if dynamic validation is on</em>
<a id="L1869" name="L1869"></a>1869             <em class="comment">//            validate only against grammar we've found (depending on settings</em>
<a id="L1870" name="L1870"></a>1870             <em class="comment">//            for schema feature)</em>
<a id="L1871" name="L1871"></a>1871             <em class="comment">//</em>
<a id="L1872" name="L1872"></a>1872             <em class="comment">//</em>
<a id="L1873" name="L1873"></a>1873             fPerformValidation = <a href="../D/36318.html" title="Multiple defined in 59 places.">validate</a>();
<a id="L1874" name="L1874"></a>1874             fSeenRootElement = <strong class="reserved">true</strong>;
<a id="L1875" name="L1875"></a>1875             fValidationManager.<a href="../D/32604.html" title="Multiple defined in 2 places.">setEntityState</a>(fDTDGrammar);
<a id="L1876" name="L1876"></a>1876             fValidationManager.<a href="../S/5240.html#L63" title="Defined at 63 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationManager.java.">setGrammarFound</a>(fSeenDoctypeDecl);
<a id="L1877" name="L1877"></a>1877             <a href="../S/5160.html#L1594" title="Defined at 1594 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">rootElementSpecified</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1878" name="L1878"></a>1878         <em class="brace">}</em>
<a id="L1879" name="L1879"></a>1879         <strong class="reserved">if</strong> (fDTDGrammar == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1880" name="L1880"></a>1880 
<a id="L1881" name="L1881"></a>1881             <strong class="reserved">if</strong> (!fPerformValidation) <em class="brace">{</em>
<a id="L1882" name="L1882"></a>1882                 fCurrentElementIndex = -1;
<a id="L1883" name="L1883"></a>1883                 fCurrentContentSpecType = -1;
<a id="L1884" name="L1884"></a>1884                 fInElementContent = <strong class="reserved">false</strong>;
<a id="L1885" name="L1885"></a>1885             <em class="brace">}</em>
<a id="L1886" name="L1886"></a>1886             <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1887" name="L1887"></a>1887                 fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1888" name="L1888"></a>1888                                            "MSG_GRAMMAR_NOT_FOUND",
<a id="L1889" name="L1889"></a>1889                                            <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.rawname<em class="brace">}</em>,
<a id="L1890" name="L1890"></a>1890                                            <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1891" name="L1891"></a>1891             <em class="brace">}</em>
<a id="L1892" name="L1892"></a>1892             <em class="comment">// modify pipeline</em>
<a id="L1893" name="L1893"></a>1893             <strong class="reserved">if</strong> (fDocumentSource !=<strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L1894" name="L1894"></a>1894                 fDocumentSource.<a href="../D/32498.html" title="Multiple defined in 21 places.">setDocumentHandler</a>(fDocumentHandler);
<a id="L1895" name="L1895"></a>1895                 <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong>)
<a id="L1896" name="L1896"></a>1896                     fDocumentHandler.<a href="../D/32502.html" title="Multiple defined in 16 places.">setDocumentSource</a>(fDocumentSource);
<a id="L1897" name="L1897"></a>1897                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L1898" name="L1898"></a>1898             <em class="brace">}</em>
<a id="L1899" name="L1899"></a>1899         <em class="brace">}</em>
<a id="L1900" name="L1900"></a>1900         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1901" name="L1901"></a>1901             <em class="comment">//  resolve the element</em>
<a id="L1902" name="L1902"></a>1902             fCurrentElementIndex = fDTDGrammar.<a href="../D/18677.html" title="Multiple defined in 2 places.">getElementDeclIndex</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1903" name="L1903"></a>1903             <em class="comment">//changed here.. new function for getContentSpecType</em>
<a id="L1904" name="L1904"></a>1904             fCurrentContentSpecType = fDTDGrammar.<a href="../D/17969.html" title="Multiple defined in 2 places.">getContentSpecType</a>(fCurrentElementIndex);
<a id="L1905" name="L1905"></a>1905             <strong class="reserved">if</strong> (fCurrentContentSpecType == -1 &amp;&amp; fPerformValidation) <em class="brace">{</em>
<a id="L1906" name="L1906"></a>1906                 fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1907" name="L1907"></a>1907                                            "MSG_ELEMENT_NOT_DECLARED",
<a id="L1908" name="L1908"></a>1908                                            <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.rawname<em class="brace">}</em>,
<a id="L1909" name="L1909"></a>1909                                            <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1910" name="L1910"></a>1910             <em class="brace">}</em>
<a id="L1911" name="L1911"></a>1911 
<a id="L1912" name="L1912"></a>1912             <em class="comment">//  0. insert default attributes</em>
<a id="L1913" name="L1913"></a>1913             <em class="comment">//  1. normalize the attributes</em>
<a id="L1914" name="L1914"></a>1914             <em class="comment">//  2. validate the attrivute list.</em>
<a id="L1915" name="L1915"></a>1915             <em class="comment">// TO DO:</em>
<a id="L1916" name="L1916"></a>1916             <em class="comment">//changed here.. also pass element name,</em>
<a id="L1917" name="L1917"></a>1917             <a href="../S/5160.html#L1108" title="Defined at 1108 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">addDTDDefaultAttrsAndValidate</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, fCurrentElementIndex, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>);
<a id="L1918" name="L1918"></a>1918         <em class="brace">}</em>
<a id="L1919" name="L1919"></a>1919 
<a id="L1920" name="L1920"></a>1920         <em class="comment">// set element content state</em>
<a id="L1921" name="L1921"></a>1921         fInElementContent = fCurrentContentSpecType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_CHILDREN;
<a id="L1922" name="L1922"></a>1922 
<a id="L1923" name="L1923"></a>1923         <em class="comment">// increment the element depth, add this element's</em>
<a id="L1924" name="L1924"></a>1924         <em class="comment">// QName to its enclosing element 's children list</em>
<a id="L1925" name="L1925"></a>1925         fElementDepth++;
<a id="L1926" name="L1926"></a>1926         <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1927" name="L1927"></a>1927             <em class="comment">// push current length onto stack</em>
<a id="L1928" name="L1928"></a>1928             <strong class="reserved">if</strong> (fElementChildrenOffsetStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= fElementDepth) <em class="brace">{</em>
<a id="L1929" name="L1929"></a>1929                 <strong class="reserved">int</strong> newarray[] = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[fElementChildrenOffsetStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> * 2];
<a id="L1930" name="L1930"></a>1930                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fElementChildrenOffsetStack, 0, newarray, 0, fElementChildrenOffsetStack.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1931" name="L1931"></a>1931                 fElementChildrenOffsetStack = newarray;
<a id="L1932" name="L1932"></a>1932             <em class="brace">}</em>
<a id="L1933" name="L1933"></a>1933             fElementChildrenOffsetStack[fElementDepth] = fElementChildrenLength;
<a id="L1934" name="L1934"></a>1934 
<a id="L1935" name="L1935"></a>1935             <em class="comment">// add this element to children</em>
<a id="L1936" name="L1936"></a>1936             <strong class="reserved">if</strong> (fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &lt;= fElementChildrenLength) <em class="brace">{</em>
<a id="L1937" name="L1937"></a>1937                 <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[] newarray = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>[fElementChildrenLength * 2];
<a id="L1938" name="L1938"></a>1938                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(fElementChildren, 0, newarray, 0, fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1939" name="L1939"></a>1939                 fElementChildren = newarray;
<a id="L1940" name="L1940"></a>1940             <em class="brace">}</em>
<a id="L1941" name="L1941"></a>1941             <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> qname = fElementChildren[fElementChildrenLength];
<a id="L1942" name="L1942"></a>1942             <strong class="reserved">if</strong> (qname == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1943" name="L1943"></a>1943                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = fElementChildrenLength; i &lt; fElementChildren.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L1944" name="L1944"></a>1944                     fElementChildren[i] = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L1945" name="L1945"></a>1945                 <em class="brace">}</em>
<a id="L1946" name="L1946"></a>1946                 qname = fElementChildren[fElementChildrenLength];
<a id="L1947" name="L1947"></a>1947             <em class="brace">}</em>
<a id="L1948" name="L1948"></a>1948             qname.<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1949" name="L1949"></a>1949             fElementChildrenLength++;
<a id="L1950" name="L1950"></a>1950         <em class="brace">}</em>
<a id="L1951" name="L1951"></a>1951 
<a id="L1952" name="L1952"></a>1952         <em class="comment">// save current element information</em>
<a id="L1953" name="L1953"></a>1953         fCurrentElement.<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>);
<a id="L1954" name="L1954"></a>1954         <a href="../D/15633.html" title="Multiple defined in 2 places.">ensureStackCapacity</a>(fElementDepth);
<a id="L1955" name="L1955"></a>1955         fElementQNamePartsStack[fElementDepth].<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(fCurrentElement);
<a id="L1956" name="L1956"></a>1956         fElementIndexStack[fElementDepth] = fCurrentElementIndex;
<a id="L1957" name="L1957"></a>1957         fContentSpecTypeStack[fElementDepth] = fCurrentContentSpecType;
<a id="L1958" name="L1958"></a>1958         <a href="../D/34803.html" title="Multiple defined in 3 places.">startNamespaceScope</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, augs);
<a id="L1959" name="L1959"></a>1959         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1960" name="L1960"></a>1960 
<a id="L1961" name="L1961"></a>1961     <em class="brace">}</em> <em class="comment">// handleStartElement(QName,XMLAttributes)</em>
<a id="L1962" name="L1962"></a>1962 
<a id="L1963" name="L1963"></a>1963     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5160.html#L1958" title="Referred from 1958 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">startNamespaceScope</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs)<em class="brace">{</em>
<a id="L1964" name="L1964"></a>1964     <em class="brace">}</em>
<a id="L1965" name="L1965"></a>1965 
<div class="comment">
     /** Handle end element. */</div>
<a id="L1967" name="L1967"></a>1967     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/20086.html" title="Multiple referred from 8 places.">handleEndElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>,  <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs, <strong class="reserved">boolean</strong> <a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>)
<a id="L1968" name="L1968"></a>1968     <strong class="reserved">throws</strong> <a href="../S/5491.html#L37" title="Defined at 37 in src/com/sun/org/apache/xerces/internal/xni/XNIException.java.">XNIException</a> <em class="brace">{</em>
<a id="L1969" name="L1969"></a>1969 
<a id="L1970" name="L1970"></a>1970         <em class="comment">// decrease element depth</em>
<a id="L1971" name="L1971"></a>1971         fElementDepth--;
<a id="L1972" name="L1972"></a>1972 
<a id="L1973" name="L1973"></a>1973         <em class="comment">// validate</em>
<a id="L1974" name="L1974"></a>1974         <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L1975" name="L1975"></a>1975             <strong class="reserved">int</strong> elementIndex = fCurrentElementIndex;
<a id="L1976" name="L1976"></a>1976             <strong class="reserved">if</strong> (elementIndex != -1 &amp;&amp; fCurrentContentSpecType != -1) <em class="brace">{</em>
<a id="L1977" name="L1977"></a>1977                 <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>[] = fElementChildren;
<a id="L1978" name="L1978"></a>1978                 <strong class="reserved">int</strong> childrenOffset = fElementChildrenOffsetStack[fElementDepth + 1] + 1;
<a id="L1979" name="L1979"></a>1979                 <strong class="reserved">int</strong> childrenLength = fElementChildrenLength - childrenOffset;
<a id="L1980" name="L1980"></a>1980                 <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/5160.html#L1640" title="Defined at 1640 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">checkContent</a>(elementIndex,
<a id="L1981" name="L1981"></a>1981                                           <a href="../D/12744.html" title="Multiple defined in 7 places.">children</a>, childrenOffset, childrenLength);
<a id="L1982" name="L1982"></a>1982 
<a id="L1983" name="L1983"></a>1983                 <strong class="reserved">if</strong> (<a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != -1) <em class="brace">{</em>
<a id="L1984" name="L1984"></a>1984                     fDTDGrammar.<a href="../D/18676.html" title="Multiple defined in 2 places.">getElementDecl</a>(elementIndex, fTempElementDecl);
<a id="L1985" name="L1985"></a>1985                     <strong class="reserved">if</strong> (fTempElementDecl.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_EMPTY) <em class="brace">{</em>
<a id="L1986" name="L1986"></a>1986                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1987" name="L1987"></a>1987                                                    "MSG_CONTENT_INVALID",
<a id="L1988" name="L1988"></a>1988                                                    <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.rawname, "EMPTY"<em class="brace">}</em>,
<a id="L1989" name="L1989"></a>1989                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1990" name="L1990"></a>1990                     <em class="brace">}</em>
<a id="L1991" name="L1991"></a>1991                     <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1992" name="L1992"></a>1992                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> messageKey = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> != childrenLength ?
<a id="L1993" name="L1993"></a>1993                                             "MSG_CONTENT_INVALID" : "MSG_CONTENT_INCOMPLETE";
<a id="L1994" name="L1994"></a>1994                         fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>(<a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L1995" name="L1995"></a>1995                                                    messageKey,
<a id="L1996" name="L1996"></a>1996                                                    <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>.rawname,
<a id="L1997" name="L1997"></a>1997                                                        fDTDGrammar.<a href="../S/5142.html#L1513" title="Defined at 1513 in src/com/sun/org/apache/xerces/internal/impl/dtd/DTDGrammar.java.">getContentSpecAsString</a>(elementIndex)<em class="brace">}</em>,
<a id="L1998" name="L1998"></a>1998                                                    <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR);
<a id="L1999" name="L1999"></a>1999                     <em class="brace">}</em>
<a id="L2000" name="L2000"></a>2000                 <em class="brace">}</em>
<a id="L2001" name="L2001"></a>2001             <em class="brace">}</em>
<a id="L2002" name="L2002"></a>2002             fElementChildrenLength = fElementChildrenOffsetStack[fElementDepth + 1] + 1;
<a id="L2003" name="L2003"></a>2003         <em class="brace">}</em>
<a id="L2004" name="L2004"></a>2004 
<a id="L2005" name="L2005"></a>2005         <a href="../D/15460.html" title="Multiple defined in 3 places.">endNamespaceScope</a>(fCurrentElement, augs, <a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>);
<a id="L2006" name="L2006"></a>2006 
<a id="L2007" name="L2007"></a>2007         <em class="comment">// now pop this element off the top of the element stack</em>
<a id="L2008" name="L2008"></a>2008         <strong class="reserved">if</strong> (fElementDepth &lt; -1) <em class="brace">{</em>
<a id="L2009" name="L2009"></a>2009             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>("FWK008 Element stack underflow");
<a id="L2010" name="L2010"></a>2010         <em class="brace">}</em>
<a id="L2011" name="L2011"></a>2011         <strong class="reserved">if</strong> (fElementDepth &lt; 0) <em class="brace">{</em>
<a id="L2012" name="L2012"></a>2012             fCurrentElement.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L2013" name="L2013"></a>2013             fCurrentElementIndex = -1;
<a id="L2014" name="L2014"></a>2014             fCurrentContentSpecType = -1;
<a id="L2015" name="L2015"></a>2015             fInElementContent = <strong class="reserved">false</strong>;
<a id="L2016" name="L2016"></a>2016 
<a id="L2017" name="L2017"></a>2017             <em class="comment">// TO DO : fix this</em>
<a id="L2018" name="L2018"></a>2018             <em class="comment">//</em>
<a id="L2019" name="L2019"></a>2019             <em class="comment">// Check after document is fully parsed</em>
<a id="L2020" name="L2020"></a>2020             <em class="comment">// (1) check that there was an element with a matching id for every</em>
<a id="L2021" name="L2021"></a>2021             <em class="comment">//   IDREF and IDREFS attr (V_IDREF0)</em>
<a id="L2022" name="L2022"></a>2022             <em class="comment">//</em>
<a id="L2023" name="L2023"></a>2023             <strong class="reserved">if</strong> (fPerformValidation) <em class="brace">{</em>
<a id="L2024" name="L2024"></a>2024                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = fValidationState.<a href="../S/5239.html#L92" title="Defined at 92 in src/com/sun/org/apache/xerces/internal/impl/validation/ValidationState.java.">checkIDRefID</a>();
<a id="L2025" name="L2025"></a>2025                 <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2026" name="L2026"></a>2026                     fErrorReporter.<a href="../D/31088.html" title="Multiple defined in 17 places.">reportError</a>( <a href="../S/5027.html#L39" title="Defined at 39 in src/com/sun/org/apache/xerces/internal/impl/msg/XMLMessageFormatter.java.">XMLMessageFormatter</a>.XML_DOMAIN,
<a id="L2027" name="L2027"></a>2027                                                 "MSG_ELEMENT_WITH_ID_REQUIRED",
<a id="L2028" name="L2028"></a>2028                                                 <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[]<em class="brace">{</em><a href="../D/36360.html" title="Multiple defined in 73 places.">value</a><em class="brace">}</em>,
<a id="L2029" name="L2029"></a>2029                                                 <a href="../S/5041.html#L116" title="Defined at 116 in src/com/sun/org/apache/xerces/internal/impl/XMLErrorReporter.java.">XMLErrorReporter</a>.SEVERITY_ERROR );
<a id="L2030" name="L2030"></a>2030                 <em class="brace">}</em>
<a id="L2031" name="L2031"></a>2031             <em class="brace">}</em>
<a id="L2032" name="L2032"></a>2032             <strong class="reserved">return</strong>;
<a id="L2033" name="L2033"></a>2033         <em class="brace">}</em>
<a id="L2034" name="L2034"></a>2034 
<a id="L2035" name="L2035"></a>2035         <em class="comment">// If Namespace enable then localName != rawName</em>
<a id="L2036" name="L2036"></a>2036         fCurrentElement.<a href="../D/34272.html" title="Multiple defined in 29 places.">setValues</a>(fElementQNamePartsStack[fElementDepth]);
<a id="L2037" name="L2037"></a>2037 
<a id="L2038" name="L2038"></a>2038         fCurrentElementIndex = fElementIndexStack[fElementDepth];
<a id="L2039" name="L2039"></a>2039         fCurrentContentSpecType = fContentSpecTypeStack[fElementDepth];
<a id="L2040" name="L2040"></a>2040         fInElementContent = (fCurrentContentSpecType == <a href="../S/5155.html#L69" title="Defined at 69 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLElementDecl.java.">XMLElementDecl</a>.TYPE_CHILDREN);
<a id="L2041" name="L2041"></a>2041 
<a id="L2042" name="L2042"></a>2042     <em class="brace">}</em> <em class="comment">// handleEndElement(QName,boolean)</em>
<a id="L2043" name="L2043"></a>2043 
<a id="L2044" name="L2044"></a>2044     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5160.html#L2005" title="Referred from 2005 in src/com/sun/org/apache/xerces/internal/impl/dtd/XMLDTDValidator.java.">endNamespaceScope</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>,  <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs, <strong class="reserved">boolean</strong> <a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>)<em class="brace">{</em>
<a id="L2045" name="L2045"></a>2045 
<a id="L2046" name="L2046"></a>2046         <em class="comment">// call handlers</em>
<a id="L2047" name="L2047"></a>2047         <strong class="reserved">if</strong> (fDocumentHandler != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>) <em class="brace">{</em>
<a id="L2048" name="L2048"></a>2048             <em class="comment">// NOTE: The binding of the element doesn't actually happen</em>
<a id="L2049" name="L2049"></a>2049             <em class="comment">//       yet because the namespace binder does that. However,</em>
<a id="L2050" name="L2050"></a>2050             <em class="comment">//       if it does it before this point, then the endPrefix-</em>
<a id="L2051" name="L2051"></a>2051             <em class="comment">//       Mapping calls get made too soon! As long as the</em>
<a id="L2052" name="L2052"></a>2052             <em class="comment">//       rawnames match, we know it'll have a good binding,</em>
<a id="L2053" name="L2053"></a>2053             <em class="comment">//       so we can just use the current element. -Ac</em>
<a id="L2054" name="L2054"></a>2054             fDocumentHandler.<a href="../D/15448.html" title="Multiple defined in 90 places.">endElement</a>(fCurrentElement, augs);
<a id="L2055" name="L2055"></a>2055         <em class="brace">}</em>
<a id="L2056" name="L2056"></a>2056     <em class="brace">}</em>
<a id="L2057" name="L2057"></a>2057 
<a id="L2058" name="L2058"></a>2058     <em class="comment">// returns whether a character is space according to the</em>
<a id="L2059" name="L2059"></a>2059     <em class="comment">// version of XML this validator supports.</em>
<a id="L2060" name="L2060"></a>2060     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> <a href="../R/22037.html" title="Multiple referred from 30 places.">isSpace</a>(<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L2061" name="L2061"></a>2061         <strong class="reserved">return</strong> <a href="../D/9870.html" title="Multiple defined in 2 places.">XMLChar</a>.<a href="../D/26261.html" title="Multiple defined in 9 places.">isSpace</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L2062" name="L2062"></a>2062     <em class="brace">}</em> <em class="comment">// isSpace(int):  boolean</em>
<a id="L2063" name="L2063"></a>2063 
<a id="L2064" name="L2064"></a>2064     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/11053.html" title="Multiple referred from 4 places.">characterData</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>, <a href="../S/5490.html#L41" title="Defined at 41 in src/com/sun/org/apache/xerces/internal/xni/Augmentations.java.">Augmentations</a> augs) <em class="brace">{</em>
<a id="L2065" name="L2065"></a>2065         <a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(<strong class="reserved">new</strong> <a href="../D/10017.html" title="Multiple defined in 2 places.">XMLString</a>(<a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/35368.html" title="Multiple defined in 3 places.">toCharArray</a>(), 0, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()), augs);
<a id="L2066" name="L2066"></a>2066         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2067" name="L2067"></a>2067     <em class="brace">}</em>
<a id="L2068" name="L2068"></a>2068 
<a id="L2069" name="L2069"></a>2069 <em class="brace">}</em> <em class="comment">// class XMLDTDValidator</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L398">[^]</a><a href="#L2064">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
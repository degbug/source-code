<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/lib/Extensions.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L88">[^]</a><a href="#L377">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L88" title="Defined at 88.">nodeset</a></li>
<li><a href="#L140" title="Defined at 140.">intersection</a></li>
<li><a href="#L156" title="Defined at 156.">difference</a></li>
<li><a href="#L173" title="Defined at 173.">distinct</a></li>
<li><a href="#L185" title="Defined at 185.">hasSameNodes</a></li>
<li><a href="#L222" title="Defined at 222.">evaluate</a></li>
<li><a href="#L241" title="Defined at 241.">tokenize</a></li>
<li><a href="#L273" title="Defined at 273.">tokenize</a></li>
<li><a href="#L299" title="Defined at 299.">checkEnvironment</a></li>
<li><a href="#L337" title="Defined at 337.">checkEnvironmentUsingWhich</a></li>
<li><a href="#L377" title="Defined at 377.">getDocument</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: Extensions.java,v 1.2.4.1 2005/09/10 18:53:32 jeffsuttor Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.lib;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilder;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilderFactory;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.xml.parsers.ParserConfigurationException;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.extensions.ExpressionContext;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xslt.EnvironmentCheck;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.NodeSet;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XBoolean;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XNumber;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.utils.ObjectFactory;
<a id="L39" name="L39"></a>  39 
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> org.w3c.dom.DocumentFragment;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> org.w3c.dom.Node;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> org.w3c.dom.NodeList;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> org.w3c.dom.Text;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> org.w3c.dom.traversal.NodeIterator;
<a id="L46" name="L46"></a>  46 
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.xml.sax.SAXNotSupportedException;
<a id="L48" name="L48"></a>  48 
<div class="comment">
  This class contains many of the Xalan-supplied extensions.
  It is accessed by specifying a namespace URI as follows:
  <pre>     xmlns:xalan="http://xml.apache.org/xalan"
  </pre>
  @xsl.usage general</div>
<a id="L57" name="L57"></a>  57 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../S/6263.html#L105" title="Referred from 105 in src/com/sun/org/apache/xalan/internal/lib/ExsltCommon.java.">Extensions</a>
<a id="L58" name="L58"></a>  58 <em class="brace">{</em>
<a id="L59" name="L59"></a>  59     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> JDK_DEFAULT_DOM = "com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl";
<div class="comment">
    Constructor Extensions</div>
<a id="L64" name="L64"></a>  64   <strong class="reserved">private</strong> Extensions()<em class="brace">{</em><em class="brace">}</em>  <em class="comment">// Make sure class cannot be instantiated</em>
<a id="L65" name="L65"></a>  65 
<div class="comment">
    This method is an extension that implements as a Xalan extension
    the node-set function also found in xt and saxon.
    If the argument is a Result Tree Fragment, then <code>nodeset</code>
    returns a node-set consisting of a single root node as described in
    section 11.1 of the XSLT 1.0 Recommendation.  If the argument is a
    node-set, <code>nodeset</code> returns a node-set.  If the argument
    is a string, number, or boolean, then <code>nodeset</code> returns
    a node-set consisting of a single root node with a single text node
    child that is the result of calling the XPath string() function on the
    passed parameter.  If the argument is anything else, then a node-set
    is returned consisting of a single root node with a single text node
    child that is the result of calling the java <code>toString()</code>
    method on the passed argument.
    Most of the
    actual work here is done in <code>MethodResolver</code> and
    <code>XRTreeFrag</code>.
    @param myProcessor Context passed by the extension processor
    @param rtf Argument in the stylesheet to the nodeset extension function
    NEEDSDOC ($objectName$) @return</div>
<a id="L88" name="L88"></a>  88   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> <a href="../R/23761.html" title="Multiple referred from 10 places.">nodeset</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myProcessor, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>)
<a id="L89" name="L89"></a>  89   <em class="brace">{</em>
<a id="L90" name="L90"></a>  90 
<a id="L91" name="L91"></a>  91     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> textNodeValue;
<a id="L92" name="L92"></a>  92 
<a id="L93" name="L93"></a>  93     <strong class="reserved">if</strong> (<a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a> <strong class="reserved">instanceof</strong> <a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a>)
<a id="L94" name="L94"></a>  94     <em class="brace">{</em>
<a id="L95" name="L95"></a>  95       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>((<a href="../D/6090.html" title="Multiple defined in 2 places.">NodeIterator</a>) <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>);
<a id="L96" name="L96"></a>  96     <em class="brace">}</em>
<a id="L97" name="L97"></a>  97     <strong class="reserved">else</strong>
<a id="L98" name="L98"></a>  98     <em class="brace">{</em>
<a id="L99" name="L99"></a>  99       <strong class="reserved">if</strong> (<a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a> <strong class="reserved">instanceof</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>)
<a id="L100" name="L100"></a> 100       <em class="brace">{</em>
<a id="L101" name="L101"></a> 101         textNodeValue = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>;
<a id="L102" name="L102"></a> 102       <em class="brace">}</em>
<a id="L103" name="L103"></a> 103       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a> <strong class="reserved">instanceof</strong> <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>)
<a id="L104" name="L104"></a> 104       <em class="brace">{</em>
<a id="L105" name="L105"></a> 105         textNodeValue = <strong class="reserved">new</strong> <a href="../S/4908.html#L30" title="Defined at 30 in src/com/sun/org/apache/xpath/internal/objects/XBoolean.java.">XBoolean</a>(((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>) <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>()).<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>();
<a id="L106" name="L106"></a> 106       <em class="brace">}</em>
<a id="L107" name="L107"></a> 107       <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a> <strong class="reserved">instanceof</strong> <a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>)
<a id="L108" name="L108"></a> 108       <em class="brace">{</em>
<a id="L109" name="L109"></a> 109         textNodeValue = <strong class="reserved">new</strong> <a href="../S/4902.html#L34" title="Defined at 34 in src/com/sun/org/apache/xpath/internal/objects/XNumber.java.">XNumber</a>(((<a href="../D/2585.html" title="Multiple defined in 10 places.">Double</a>) <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>).<a href="../D/15134.html" title="Multiple defined in 16 places.">doubleValue</a>()).<a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>();
<a id="L110" name="L110"></a> 110       <em class="brace">}</em>
<a id="L111" name="L111"></a> 111       <strong class="reserved">else</strong>
<a id="L112" name="L112"></a> 112       <em class="brace">{</em>
<a id="L113" name="L113"></a> 113         textNodeValue = <a href="../D/31476.html" title="Multiple defined in 6 places.">rtf</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L114" name="L114"></a> 114       <em class="brace">}</em>
<a id="L115" name="L115"></a> 115 
<a id="L116" name="L116"></a> 116       <em class="comment">// This no longer will work right since the DTM.</em>
<a id="L117" name="L117"></a> 117       <em class="comment">// Document myDoc = myProcessor.getContextNode().getOwnerDocument();</em>
<a id="L118" name="L118"></a> 118       <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> myDoc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L119" name="L119"></a> 119 
<a id="L120" name="L120"></a> 120         <a href="../D/8891.html" title="Multiple defined in 3 places.">Text</a> textNode = myDoc.<a href="../D/14246.html" title="Multiple defined in 5 places.">createTextNode</a>(textNodeValue);
<a id="L121" name="L121"></a> 121         <a href="../S/157.html#L81" title="Defined at 81 in src/org/w3c/dom/DocumentFragment.java.">DocumentFragment</a> docFrag = myDoc.<a href="../D/13813.html" title="Multiple defined in 8 places.">createDocumentFragment</a>();
<a id="L122" name="L122"></a> 122 
<a id="L123" name="L123"></a> 123         docFrag.<a href="../D/11365.html" title="Multiple defined in 17 places.">appendChild</a>(textNode);
<a id="L124" name="L124"></a> 124 
<a id="L125" name="L125"></a> 125       <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>(docFrag);
<a id="L126" name="L126"></a> 126     <em class="brace">}</em>
<a id="L127" name="L127"></a> 127   <em class="brace">}</em>
<a id="L128" name="L128"></a> 128 
<div class="comment">
    Returns the intersection of two node-sets.
    @param nl1 NodeList for first node-set
    @param nl2 NodeList for second node-set
    @return a NodeList containing the nodes in nl1 that are also in nl2
    Note: The usage of this extension function in the xalan namespace
    is deprecated. Please use the same function in the EXSLT sets extension
    (http://exslt.org/sets).</div>
<a id="L140" name="L140"></a> 140   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/20986.html" title="Multiple referred from 19 places.">intersection</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl1, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl2)
<a id="L141" name="L141"></a> 141   <em class="brace">{</em>
<a id="L142" name="L142"></a> 142     <strong class="reserved">return</strong> <a href="../S/6262.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/lib/ExsltSets.java.">ExsltSets</a>.<a href="../D/24981.html" title="Multiple defined in 5 places.">intersection</a>(nl1, nl2);
<a id="L143" name="L143"></a> 143   <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<div class="comment">
    Returns the difference between two node-sets.
    @param nl1 NodeList for first node-set
    @param nl2 NodeList for second node-set
    @return a NodeList containing the nodes in nl1 that are not in nl2
    Note: The usage of this extension function in the xalan namespace
    is deprecated. Please use the same function in the EXSLT sets extension
    (http://exslt.org/sets).</div>
<a id="L156" name="L156"></a> 156   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/13285.html" title="Multiple referred from 69 places.">difference</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl1, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl2)
<a id="L157" name="L157"></a> 157   <em class="brace">{</em>
<a id="L158" name="L158"></a> 158     <strong class="reserved">return</strong> <a href="../S/6262.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/lib/ExsltSets.java.">ExsltSets</a>.<a href="../D/14900.html" title="Multiple defined in 5 places.">difference</a>(nl1, nl2);
<a id="L159" name="L159"></a> 159   <em class="brace">}</em>
<a id="L160" name="L160"></a> 160 
<div class="comment">
    Returns node-set containing distinct string values.
    @param nl NodeList for node-set
    @return a NodeList with nodes from nl containing distinct string values.
    In other words, if more than one node in nl contains the same string value,
    only include the first such node found.
    Note: The usage of this extension function in the xalan namespace
    is deprecated. Please use the same function in the EXSLT sets extension
    (http://exslt.org/sets).</div>
<a id="L173" name="L173"></a> 173   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/13344.html" title="Multiple referred from 4 places.">distinct</a>(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl)
<a id="L174" name="L174"></a> 174   <em class="brace">{</em>
<a id="L175" name="L175"></a> 175     <strong class="reserved">return</strong> <a href="../S/6262.html#L45" title="Defined at 45 in src/com/sun/org/apache/xalan/internal/lib/ExsltSets.java.">ExsltSets</a>.<a href="../D/14978.html" title="Multiple defined in 10 places.">distinct</a>(nl);
<a id="L176" name="L176"></a> 176   <em class="brace">}</em>
<a id="L177" name="L177"></a> 177 
<div class="comment">
    Returns true if both node-sets contain the same set of nodes.
    @param nl1 NodeList for first node-set
    @param nl2 NodeList for second node-set
    @return true if nl1 and nl2 contain exactly the same set of nodes.</div>
<a id="L185" name="L185"></a> 185   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> hasSameNodes(<a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl1, <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> nl2)
<a id="L186" name="L186"></a> 186   <em class="brace">{</em>
<a id="L187" name="L187"></a> 187 
<a id="L188" name="L188"></a> 188     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> ns1 = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>(nl1);
<a id="L189" name="L189"></a> 189     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> ns2 = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>(nl2);
<a id="L190" name="L190"></a> 190 
<a id="L191" name="L191"></a> 191     <strong class="reserved">if</strong> (ns1.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>() != ns2.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>())
<a id="L192" name="L192"></a> 192       <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L193" name="L193"></a> 193 
<a id="L194" name="L194"></a> 194     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; ns1.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>(); i++)
<a id="L195" name="L195"></a> 195     <em class="brace">{</em>
<a id="L196" name="L196"></a> 196       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> n = ns1.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198       <strong class="reserved">if</strong> (!ns2.<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(n))
<a id="L199" name="L199"></a> 199         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L200" name="L200"></a> 200     <em class="brace">}</em>
<a id="L201" name="L201"></a> 201 
<a id="L202" name="L202"></a> 202     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L203" name="L203"></a> 203   <em class="brace">}</em>
<a id="L204" name="L204"></a> 204 
<div class="comment">
    Returns the result of evaluating the argument as a string containing
    an XPath expression.  Used where the XPath expression is not known until
    run-time.  The expression is evaluated as if the run-time value of the
    argument appeared in place of the evaluate function call at compile time.
    @param myContext an <code>ExpressionContext</code> passed in by the
                     extension mechanism.  This must be an XPathContext.
    @param xpathExpr The XPath expression to be evaluated.
    @return the XObject resulting from evaluating the XPath
    @throws SAXNotSupportedException
    Note: The usage of this extension function in the xalan namespace
    is deprecated. Please use the same function in the EXSLT dynamic extension
    (http://exslt.org/dynamic).</div>
<a id="L222" name="L222"></a> 222   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a> <a href="../R/14049.html" title="Multiple referred from 144 places.">evaluate</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> xpathExpr)
<a id="L223" name="L223"></a> 223          <strong class="reserved">throws</strong> <a href="../S/727.html#L53" title="Defined at 53 in src/org/xml/sax/SAXNotSupportedException.java.">SAXNotSupportedException</a>
<a id="L224" name="L224"></a> 224   <em class="brace">{</em>
<a id="L225" name="L225"></a> 225     <strong class="reserved">return</strong> <a href="../S/6257.html#L63" title="Defined at 63 in src/com/sun/org/apache/xalan/internal/lib/ExsltDynamic.java.">ExsltDynamic</a>.<a href="../D/15746.html" title="Multiple defined in 42 places.">evaluate</a>(myContext, xpathExpr);
<a id="L226" name="L226"></a> 226   <em class="brace">}</em>
<a id="L227" name="L227"></a> 227 
<div class="comment">
    Returns a NodeSet containing one text node for each token in the first argument.
    Delimiters are specified in the second argument.
    Tokens are determined by a call to <code>StringTokenizer</code>.
    If the first argument is an empty string or contains only delimiters, the result
    will be an empty NodeSet.
    Contributed to XalanJ1 by <a href="mailto:benoit.cerrina@writeme.com">Benoit Cerrina</a>.
    @param toTokenize The string to be split into text tokens.
    @param delims The delimiters to use.
    @return a NodeSet as described above.</div>
<a id="L241" name="L241"></a> 241   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/29387.html" title="Multiple referred from 5 places.">tokenize</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> toTokenize, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delims)
<a id="L242" name="L242"></a> 242   <em class="brace">{</em>
<a id="L243" name="L243"></a> 243 
<a id="L244" name="L244"></a> 244     <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> doc = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L245" name="L245"></a> 245 
<a id="L246" name="L246"></a> 246     <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> lTokenizer = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(toTokenize, delims);
<a id="L247" name="L247"></a> 247     <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a> resultSet = <strong class="reserved">new</strong> <a href="../S/4934.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/NodeSet.java.">NodeSet</a>();
<a id="L248" name="L248"></a> 248 
<a id="L249" name="L249"></a> 249     <strong class="reserved">synchronized</strong> (doc)
<a id="L250" name="L250"></a> 250     <em class="brace">{</em>
<a id="L251" name="L251"></a> 251       <strong class="reserved">while</strong> (lTokenizer.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>())
<a id="L252" name="L252"></a> 252       <em class="brace">{</em>
<a id="L253" name="L253"></a> 253         resultSet.<a href="../D/10963.html" title="Multiple defined in 6 places.">addNode</a>(doc.<a href="../D/14246.html" title="Multiple defined in 5 places.">createTextNode</a>(lTokenizer.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>()));
<a id="L254" name="L254"></a> 254       <em class="brace">}</em>
<a id="L255" name="L255"></a> 255     <em class="brace">}</em>
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257     <strong class="reserved">return</strong> resultSet;
<a id="L258" name="L258"></a> 258   <em class="brace">}</em>
<a id="L259" name="L259"></a> 259 
<div class="comment">
    Returns a NodeSet containing one text node for each token in the first argument.
    Delimiters are whitespace.  That is, the delimiters that are used are tab (	),
    linefeed (
), return (), and space ( ).
    Tokens are determined by a call to <code>StringTokenizer</code>.
    If the first argument is an empty string or contains only delimiters, the result
    will be an empty NodeSet.
    Contributed to XalanJ1 by <a href="mailto:benoit.cerrina@writeme.com">Benoit Cerrina</a>.
    @param toTokenize The string to be split into text tokens.
    @return a NodeSet as described above.</div>
<a id="L273" name="L273"></a> 273   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/115.html#L52" title="Defined at 52 in src/org/w3c/dom/NodeList.java.">NodeList</a> <a href="../R/29387.html" title="Multiple referred from 5 places.">tokenize</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> toTokenize)
<a id="L274" name="L274"></a> 274   <em class="brace">{</em>
<a id="L275" name="L275"></a> 275     <strong class="reserved">return</strong> <a href="../D/35549.html" title="Multiple defined in 6 places.">tokenize</a>(toTokenize, " \t\n\r");
<a id="L276" name="L276"></a> 276   <em class="brace">}</em>
<a id="L277" name="L277"></a> 277 
<div class="comment">
    Return a Node of basic debugging information from the
    EnvironmentCheck utility about the Java environment.
    <p>Simply calls the {@link com.sun.org.apache.xalan.internal.xslt.EnvironmentCheck}
    utility to grab info about the Java environment and CLASSPATH,
    etc., and then returns the resulting Node.  Stylesheets can
    then maniuplate this data or simply xsl:copy-of the Node.  Note
    that we first attempt to load the more advanced
    org.apache.env.Which utility by reflection; only if that fails
    to we still use the internal version.  Which is available from
    <a href="http://xml.apache.org/commons/">http://xml.apache.org/commons/</a>.</p>
    <p>We throw a WrappedRuntimeException in the unlikely case
    that reading information from the environment throws us an
    exception. (Is this really the best thing to do?)</p>
    @param myContext an <code>ExpressionContext</code> passed in by the
                     extension mechanism.  This must be an XPathContext.
    @return a Node as described above.</div>
<a id="L299" name="L299"></a> 299   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6267.html#L139" title="Referred from 139 in src/com/sun/org/apache/xalan/internal/xslt/EnvironmentCheck.java.">checkEnvironment</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext)
<a id="L300" name="L300"></a> 300   <em class="brace">{</em>
<a id="L301" name="L301"></a> 301 
<a id="L302" name="L302"></a> 302     <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> factoryDocument = <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304     <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> resultNode = <strong class="reserved">null</strong>;
<a id="L305" name="L305"></a> 305     <strong class="reserved">try</strong>
<a id="L306" name="L306"></a> 306     <em class="brace">{</em>
<a id="L307" name="L307"></a> 307       <em class="comment">// First use reflection to try to load Which, which is a</em>
<a id="L308" name="L308"></a> 308       <em class="comment">//  better version of EnvironmentCheck</em>
<a id="L309" name="L309"></a> 309       resultNode = <a href="../S/6259.html#L337" title="Defined at 337 in src/com/sun/org/apache/xalan/internal/lib/Extensions.java.">checkEnvironmentUsingWhich</a>(myContext, factoryDocument);
<a id="L310" name="L310"></a> 310 
<a id="L311" name="L311"></a> 311       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != resultNode)
<a id="L312" name="L312"></a> 312         <strong class="reserved">return</strong> resultNode;
<a id="L313" name="L313"></a> 313 
<a id="L314" name="L314"></a> 314       <em class="comment">// If reflection failed, fallback to our internal EnvironmentCheck</em>
<a id="L315" name="L315"></a> 315       <a href="../S/6267.html#L97" title="Defined at 97 in src/com/sun/org/apache/xalan/internal/xslt/EnvironmentCheck.java.">EnvironmentCheck</a> envChecker = <strong class="reserved">new</strong> <a href="../S/6267.html#L97" title="Defined at 97 in src/com/sun/org/apache/xalan/internal/xslt/EnvironmentCheck.java.">EnvironmentCheck</a>();
<a id="L316" name="L316"></a> 316       <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> h = envChecker.<a href="../S/6267.html#L220" title="Defined at 220 in src/com/sun/org/apache/xalan/internal/xslt/EnvironmentCheck.java.">getEnvironmentHash</a>();
<a id="L317" name="L317"></a> 317       resultNode = factoryDocument.<a href="../D/13831.html" title="Multiple defined in 10 places.">createElement</a>("checkEnvironmentExtension");
<a id="L318" name="L318"></a> 318       envChecker.<a href="../S/6267.html#L416" title="Defined at 416 in src/com/sun/org/apache/xalan/internal/xslt/EnvironmentCheck.java.">appendEnvironmentReport</a>(resultNode, factoryDocument, h);
<a id="L319" name="L319"></a> 319       envChecker = <strong class="reserved">null</strong>;
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321     <strong class="reserved">catch</strong>(<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e)
<a id="L322" name="L322"></a> 322     <em class="brace">{</em>
<a id="L323" name="L323"></a> 323       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> com.sun.org.apache.xml.internal.utils.<a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>(e);
<a id="L324" name="L324"></a> 324     <em class="brace">}</em>
<a id="L325" name="L325"></a> 325 
<a id="L326" name="L326"></a> 326     <strong class="reserved">return</strong> resultNode;
<a id="L327" name="L327"></a> 327   <em class="brace">}</em>
<a id="L328" name="L328"></a> 328 
<div class="comment">
    Private worker method to attempt to use org.apache.env.Which.
    @param myContext an <code>ExpressionContext</code> passed in by the
                     extension mechanism.  This must be an XPathContext.
    @param factoryDocument providing createElement services, etc.
    @return a Node with environment info; null if any error</div>
<a id="L337" name="L337"></a> 337   <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> <a href="../S/6259.html#L309" title="Referred from 309 in src/com/sun/org/apache/xalan/internal/lib/Extensions.java.">checkEnvironmentUsingWhich</a>(<a href="../S/6255.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/extensions/ExpressionContext.java.">ExpressionContext</a> myContext,
<a id="L338" name="L338"></a> 338         <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> factoryDocument)
<a id="L339" name="L339"></a> 339   <em class="brace">{</em>
<a id="L340" name="L340"></a> 340     <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> WHICH_CLASSNAME = "org.apache.env.Which";
<a id="L341" name="L341"></a> 341     <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> WHICH_METHODNAME = "which";
<a id="L342" name="L342"></a> 342     <strong class="reserved">final</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> WHICH_METHOD_ARGS[] = <em class="brace">{</em> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>.<strong class="reserved">class</strong>,
<a id="L343" name="L343"></a> 343                                         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong>,
<a id="L344" name="L344"></a> 344                                         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<strong class="reserved">class</strong> <em class="brace">}</em>;
<a id="L345" name="L345"></a> 345     <strong class="reserved">try</strong>
<a id="L346" name="L346"></a> 346     <em class="brace">{</em>
<a id="L347" name="L347"></a> 347       <em class="comment">// Use reflection to try to find xml-commons utility 'Which'</em>
<a id="L348" name="L348"></a> 348       <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> <a href="../S/986.html#L2481" title="Defined at 2481 in src/java/util/regex/Pattern.java.">clazz</a> = <a href="../D/6287.html" title="Multiple defined in 3 places.">ObjectFactory</a>.<a href="../D/16218.html" title="Multiple defined in 4 places.">findProviderClass</a>(WHICH_CLASSNAME, <strong class="reserved">true</strong>);
<a id="L349" name="L349"></a> 349       <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == <a href="../S/986.html#L2481" title="Defined at 2481 in src/java/util/regex/Pattern.java.">clazz</a>)
<a id="L350" name="L350"></a> 350         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L351" name="L351"></a> 351 
<a id="L352" name="L352"></a> 352       <em class="comment">// Fully qualify names since this is the only method they're used in</em>
<a id="L353" name="L353"></a> 353       <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.reflect.<a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a> method = <a href="../S/986.html#L2481" title="Defined at 2481 in src/java/util/regex/Pattern.java.">clazz</a>.<a href="../D/20584.html" title="Multiple defined in 21 places.">getMethod</a>(WHICH_METHODNAME, WHICH_METHOD_ARGS);
<a id="L354" name="L354"></a> 354       <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> <a href="../D/31084.html" title="Multiple defined in 4 places.">report</a> = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L355" name="L355"></a> 355 
<a id="L356" name="L356"></a> 356       <em class="comment">// Call the method with our Hashtable, common options, and ignore return value</em>
<a id="L357" name="L357"></a> 357       <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] methodArgs = <em class="brace">{</em> <a href="../D/31084.html" title="Multiple defined in 4 places.">report</a>, "XmlCommons;Xalan;Xerces;Crimson;Ant", "" <em class="brace">}</em>;
<a id="L358" name="L358"></a> 358       <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> returnValue = method.<a href="../D/25050.html" title="Multiple defined in 52 places.">invoke</a>(<strong class="reserved">null</strong>, methodArgs);
<a id="L359" name="L359"></a> 359 
<a id="L360" name="L360"></a> 360       <em class="comment">// Create a parent to hold the report and append hash to it</em>
<a id="L361" name="L361"></a> 361       <a href="../D/6077.html" title="Multiple defined in 24 places.">Node</a> resultNode = factoryDocument.<a href="../D/13831.html" title="Multiple defined in 10 places.">createElement</a>("checkEnvironmentExtension");
<a id="L362" name="L362"></a> 362       com.sun.org.apache.xml.internal.utils.<a href="../S/5832.html#L44" title="Defined at 44 in src/com/sun/org/apache/xml/internal/utils/Hashtree2Node.java.">Hashtree2Node</a>.<a href="../S/5832.html#L66" title="Defined at 66 in src/com/sun/org/apache/xml/internal/utils/Hashtree2Node.java.">appendHashToNode</a>(<a href="../D/31084.html" title="Multiple defined in 4 places.">report</a>, "whichReport",
<a id="L363" name="L363"></a> 363             resultNode, factoryDocument);
<a id="L364" name="L364"></a> 364 
<a id="L365" name="L365"></a> 365       <strong class="reserved">return</strong> resultNode;
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367     <strong class="reserved">catch</strong> (<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> t)
<a id="L368" name="L368"></a> 368     <em class="brace">{</em>
<a id="L369" name="L369"></a> 369       <em class="comment">// Simply return null; no need to report error</em>
<a id="L370" name="L370"></a> 370       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L371" name="L371"></a> 371     <em class="brace">}</em>
<a id="L372" name="L372"></a> 372   <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<div class="comment">
    @return an instance of DOM Document</div>
<a id="L377" name="L377"></a> 377    <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> <a href="../R/16214.html" title="Multiple referred from 348 places.">getDocument</a>()
<a id="L378" name="L378"></a> 378    <em class="brace">{</em>
<a id="L379" name="L379"></a> 379         <strong class="reserved">try</strong>
<a id="L380" name="L380"></a> 380         <em class="brace">{</em>
<a id="L381" name="L381"></a> 381             <strong class="reserved">if</strong> (<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382                 <strong class="reserved">return</strong> <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>().<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>().<a href="../D/27986.html" title="Multiple defined in 3 places.">newDocument</a>();
<a id="L383" name="L383"></a> 383             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L384" name="L384"></a> 384                 <strong class="reserved">return</strong> <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(JDK_DEFAULT_DOM, <strong class="reserved">null</strong>).<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>().<a href="../D/27986.html" title="Multiple defined in 3 places.">newDocument</a>();
<a id="L385" name="L385"></a> 385             <em class="brace">}</em>
<a id="L386" name="L386"></a> 386         <em class="brace">}</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">catch</strong>(<a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a> pce)
<a id="L388" name="L388"></a> 388         <em class="brace">{</em>
<a id="L389" name="L389"></a> 389             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> com.sun.org.apache.xml.internal.utils.<a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>(pce);
<a id="L390" name="L390"></a> 390         <em class="brace">}</em>
<a id="L391" name="L391"></a> 391     <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L88">[^]</a><a href="#L377">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
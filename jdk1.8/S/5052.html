<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xerces/internal/impl/xs/identity/XPathMatcher.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L141">[^]</a><a href="#L455">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L141" title="Defined at 141.">isMatched</a></li>
<li><a href="#L159" title="Defined at 159.">handleContent</a></li>
<li><a href="#L167" title="Defined at 167.">matched</a></li>
<li><a href="#L180" title="Defined at 180.">startDocumentFragment</a></li>
<li><a href="#L208" title="Defined at 208.">startElement</a></li>
<li><a href="#L375" title="Defined at 375.">endElement</a></li>
<li><a href="#L418" title="Defined at 418.">toString</a></li>
<li><a href="#L455" title="Defined at 455.">normalize</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001, 2002,2004,2005 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L20" name="L20"></a>  20 
<a id="L21" name="L21"></a>  21 <strong class="reserved">package</strong> com.sun.org.apache.xerces.internal.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.xs.<a href="../D/24301.html" title="Multiple defined in 8 places.">identity</a>;
<a id="L22" name="L22"></a>  22 
<a id="L23" name="L23"></a>  23 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.Constants;
<a id="L24" name="L24"></a>  24 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.impl.xpath.XPath;
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.util.IntStack;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.QName;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xni.XMLAttributes;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.AttributePSVI;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.ShortList;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.xs.XSTypeDefinition;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> org.xml.sax.SAXException;
<a id="L32" name="L32"></a>  32 
<a id="L33" name="L33"></a>  33 
<div class="comment">
  XPath matcher.
  @xerces.internal
  @author Andy Clark, IBM</div>
<a id="L42" name="L42"></a>  42 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/9137.html" title="Multiple referred from 18 places.">XPathMatcher</a> <em class="brace">{</em>
<a id="L43" name="L43"></a>  43 
<a id="L44" name="L44"></a>  44     <em class="comment">//</em>
<a id="L45" name="L45"></a>  45     <em class="comment">// Constants</em>
<a id="L46" name="L46"></a>  46     <em class="comment">//</em>
<a id="L47" name="L47"></a>  47 
<a id="L48" name="L48"></a>  48     <em class="comment">// debugging</em>
<a id="L49" name="L49"></a>  49 
<div class="comment">
     /** Compile to true to debug everything. */</div>
<a id="L51" name="L51"></a>  51     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_ALL = <strong class="reserved">false</strong>;
<a id="L52" name="L52"></a>  52 
<div class="comment">
     /** Compile to true to debug method callbacks. */</div>
<a id="L54" name="L54"></a>  54     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_METHODS = <strong class="reserved">false</strong> || DEBUG_ALL;
<a id="L55" name="L55"></a>  55 
<div class="comment">
     /** Compile to true to debug important method callbacks. */</div>
<a id="L57" name="L57"></a>  57     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_METHODS2 = <strong class="reserved">false</strong> || DEBUG_METHODS || DEBUG_ALL;
<a id="L58" name="L58"></a>  58 
<div class="comment">
     /** Compile to true to debug the <em>really</em> important methods. */</div>
<a id="L60" name="L60"></a>  60     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_METHODS3 = <strong class="reserved">false</strong> || DEBUG_METHODS || DEBUG_ALL;
<a id="L61" name="L61"></a>  61 
<div class="comment">
     /** Compile to true to debug match. */</div>
<a id="L63" name="L63"></a>  63     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_MATCH = <strong class="reserved">false</strong> || DEBUG_ALL;
<a id="L64" name="L64"></a>  64 
<div class="comment">
     /** Compile to true to debug step index stack. */</div>
<a id="L66" name="L66"></a>  66     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_STACK = <strong class="reserved">false</strong> || DEBUG_ALL;
<a id="L67" name="L67"></a>  67 
<div class="comment">
     /** Don't touch this value unless you add more debug constants. */</div>
<a id="L69" name="L69"></a>  69     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> DEBUG_ANY = DEBUG_METHODS ||
<a id="L70" name="L70"></a>  70                                                DEBUG_METHODS2 ||
<a id="L71" name="L71"></a>  71                                                DEBUG_METHODS3 ||
<a id="L72" name="L72"></a>  72                                                DEBUG_MATCH ||
<a id="L73" name="L73"></a>  73                                                DEBUG_STACK;
<a id="L74" name="L74"></a>  74 
<a id="L75" name="L75"></a>  75     <em class="comment">// constants describing whether a match was made,</em>
<a id="L76" name="L76"></a>  76     <em class="comment">// and if so how.</em>
<a id="L77" name="L77"></a>  77     <em class="comment">// matched any way</em>
<a id="L78" name="L78"></a>  78     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCHED = 1;
<a id="L79" name="L79"></a>  79     <em class="comment">// matched on the attribute axis</em>
<a id="L80" name="L80"></a>  80     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCHED_ATTRIBUTE = 3;
<a id="L81" name="L81"></a>  81     <em class="comment">// matched on the descendant-or-self axixs</em>
<a id="L82" name="L82"></a>  82     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCHED_DESCENDANT = 5;
<a id="L83" name="L83"></a>  83     <em class="comment">// matched some previous (ancestor) node on the descendant-or-self-axis, but not this node</em>
<a id="L84" name="L84"></a>  84     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MATCHED_DESCENDANT_PREVIOUS = 13;
<a id="L85" name="L85"></a>  85 
<a id="L86" name="L86"></a>  86     <em class="comment">//</em>
<a id="L87" name="L87"></a>  87     <em class="comment">// Data</em>
<a id="L88" name="L88"></a>  88     <em class="comment">//</em>
<a id="L89" name="L89"></a>  89 
<div class="comment">
     /** XPath location path. */</div>
<a id="L91" name="L91"></a>  91     <strong class="reserved">private</strong> <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/5189.html" title="Multiple defined in 2 places.">LocationPath</a>[] fLocationPaths;
<a id="L92" name="L92"></a>  92 
<div class="comment">
     /** True if XPath has been matched. */</div>
<a id="L94" name="L94"></a>  94     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] fMatched;
<a id="L95" name="L95"></a>  95 
<div class="comment">
     /** The matching string. */</div>
<a id="L97" name="L97"></a>  97     <strong class="reserved">protected</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> fMatchedString;
<a id="L98" name="L98"></a>  98 
<div class="comment">
     /** Integer stack of step indexes. */</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">private</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>[] fStepIndexes;
<a id="L101" name="L101"></a> 101 
<div class="comment">
     /** Current step. */</div>
<a id="L103" name="L103"></a> 103     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] fCurrentStep;
<a id="L104" name="L104"></a> 104 
<div class="comment">
      No match depth. The value of this field will be zero while
      matching is successful for the given xpath expression.</div>
<a id="L109" name="L109"></a> 109     <strong class="reserved">private</strong> <strong class="reserved">int</strong> [] fNoMatchDepth;
<a id="L110" name="L110"></a> 110 
<a id="L111" name="L111"></a> 111     <strong class="reserved">final</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> fQName = <strong class="reserved">new</strong> <a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a>();
<a id="L112" name="L112"></a> 112 
<a id="L113" name="L113"></a> 113 
<a id="L114" name="L114"></a> 114     <em class="comment">//</em>
<a id="L115" name="L115"></a> 115     <em class="comment">// Constructors</em>
<a id="L116" name="L116"></a> 116     <em class="comment">//</em>
<a id="L117" name="L117"></a> 117 
<div class="comment">
      Constructs an XPath matcher that implements a document fragment
      handler.
      @param xpath   The xpath.</div>
<a id="L124" name="L124"></a> 124     <strong class="reserved">public</strong> XPathMatcher(<a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a> xpath) <em class="brace">{</em>
<a id="L125" name="L125"></a> 125         fLocationPaths = xpath.<a href="../S/5007.html#L85" title="Defined at 85 in src/com/sun/org/apache/xerces/internal/impl/xpath/XPath.java.">getLocationPaths</a>();
<a id="L126" name="L126"></a> 126         fStepIndexes = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>[fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L127" name="L127"></a> 127         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i=0; i&lt;fStepIndexes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) fStepIndexes[i] = <strong class="reserved">new</strong> <a href="../D/4288.html" title="Multiple defined in 2 places.">IntStack</a>();
<a id="L128" name="L128"></a> 128         fCurrentStep = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L129" name="L129"></a> 129         fNoMatchDepth = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L130" name="L130"></a> 130         fMatched = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L131" name="L131"></a> 131     <em class="brace">}</em> <em class="comment">// &lt;init&gt;(XPath)</em>
<a id="L132" name="L132"></a> 132 
<a id="L133" name="L133"></a> 133     <em class="comment">//</em>
<a id="L134" name="L134"></a> 134     <em class="comment">// Public methods</em>
<a id="L135" name="L135"></a> 135     <em class="comment">//</em>
<a id="L136" name="L136"></a> 136 
<div class="comment">
      Returns value of first member of fMatched that
      is nonzero.</div>
<a id="L141" name="L141"></a> 141     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21716.html" title="Multiple referred from 14 places.">isMatched</a>() <em class="brace">{</em>
<a id="L142" name="L142"></a> 142         <em class="comment">// xpath has been matched if any one of the members of the union have matched.</em>
<a id="L143" name="L143"></a> 143         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++)
<a id="L144" name="L144"></a> 144             <strong class="reserved">if</strong> (((fMatched[i] &amp; MATCHED) == MATCHED)
<a id="L145" name="L145"></a> 145                     &amp;&amp; ((fMatched[i] &amp; MATCHED_DESCENDANT_PREVIOUS) != MATCHED_DESCENDANT_PREVIOUS)
<a id="L146" name="L146"></a> 146                     &amp;&amp; ((fNoMatchDepth[i] == 0)
<a id="L147" name="L147"></a> 147                     || ((fMatched[i] &amp; MATCHED_DESCENDANT) == MATCHED_DESCENDANT)))
<a id="L148" name="L148"></a> 148                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L149" name="L149"></a> 149 
<a id="L150" name="L150"></a> 150         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L151" name="L151"></a> 151     <em class="brace">}</em> <em class="comment">// isMatched():int</em>
<a id="L152" name="L152"></a> 152 
<a id="L153" name="L153"></a> 153     <em class="comment">//</em>
<a id="L154" name="L154"></a> 154     <em class="comment">// Protected methods</em>
<a id="L155" name="L155"></a> 155     <em class="comment">//</em>
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157     <em class="comment">// a place-holder method; to be overridden by subclasses</em>
<a id="L158" name="L158"></a> 158     <em class="comment">// that care about matching element content.</em>
<a id="L159" name="L159"></a> 159     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5052.html#L402" title="Referred from 402 in src/com/sun/org/apache/xerces/internal/impl/xs/identity/XPathMatcher.java.">handleContent</a>(<a href="../S/5343.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/XSTypeDefinition.java.">XSTypeDefinition</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">boolean</strong> <a href="../D/28203.html" title="Multiple defined in 2 places.">nillable</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">short</strong> valueType, <a href="../S/5356.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xs/ShortList.java.">ShortList</a> itemValueType) <em class="brace">{</em>
<a id="L160" name="L160"></a> 160     <em class="brace">}</em>
<a id="L161" name="L161"></a> 161 
<div class="comment">
      This method is called when the XPath handler matches the
      XPath expression. Subclasses can override this method to
      provide default handling upon a match.</div>
<a id="L167" name="L167"></a> 167     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/23158.html" title="Multiple referred from 10 places.">matched</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> actualValue, <strong class="reserved">short</strong> valueType, <a href="../S/5356.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xs/ShortList.java.">ShortList</a> itemValueType, <strong class="reserved">boolean</strong> <a href="../D/25940.html" title="Multiple defined in 3 places.">isNil</a>) <em class="brace">{</em>
<a id="L168" name="L168"></a> 168         <strong class="reserved">if</strong> (DEBUG_METHODS3) <em class="brace">{</em>
<a id="L169" name="L169"></a> 169             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+"#matched(\""+actualValue+"\")");
<a id="L170" name="L170"></a> 170         <em class="brace">}</em>
<a id="L171" name="L171"></a> 171     <em class="brace">}</em> <em class="comment">// matched(String content, XSSimpleType val)</em>
<a id="L172" name="L172"></a> 172 
<a id="L173" name="L173"></a> 173     <em class="comment">//</em>
<a id="L174" name="L174"></a> 174     <em class="comment">// ~XMLDocumentFragmentHandler methods</em>
<a id="L175" name="L175"></a> 175     <em class="comment">//</em>
<a id="L176" name="L176"></a> 176 
<div class="comment">
      The start of the document fragment.</div>
<a id="L180" name="L180"></a> 180     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28802.html" title="Multiple referred from 3 places.">startDocumentFragment</a>()<em class="brace">{</em>
<a id="L181" name="L181"></a> 181         <strong class="reserved">if</strong> (DEBUG_METHODS) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+"#startDocumentFragment("+
<a id="L183" name="L183"></a> 183                                ")");
<a id="L184" name="L184"></a> 184         <em class="brace">}</em>
<a id="L185" name="L185"></a> 185 
<a id="L186" name="L186"></a> 186         <em class="comment">// reset state</em>
<a id="L187" name="L187"></a> 187         fMatchedString = <strong class="reserved">null</strong>;
<a id="L188" name="L188"></a> 188         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L189" name="L189"></a> 189             fStepIndexes[i].<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L190" name="L190"></a> 190             fCurrentStep[i] = 0;
<a id="L191" name="L191"></a> 191             fNoMatchDepth[i] = 0;
<a id="L192" name="L192"></a> 192             fMatched[i] = 0;
<a id="L193" name="L193"></a> 193         <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195 
<a id="L196" name="L196"></a> 196     <em class="brace">}</em> <em class="comment">// startDocumentFragment()</em>
<a id="L197" name="L197"></a> 197 
<div class="comment">
      The start of an element. If the document specifies the start element
      by using an empty tag, then the startElement method will immediately
      be followed by the endElement method, with no intervening methods.
      @param element    The name of the element.
      @param attributes The element attributes.
      @throws SAXException Thrown by handler to signal an error.</div>
<a id="L208" name="L208"></a> 208     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28813.html" title="Multiple referred from 116 places.">startElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5520.html#L79" title="Defined at 79 in src/com/sun/org/apache/xerces/internal/xni/XMLAttributes.java.">XMLAttributes</a> <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>)<em class="brace">{</em>
<a id="L209" name="L209"></a> 209         <strong class="reserved">if</strong> (DEBUG_METHODS2) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+"#startElement("+
<a id="L211" name="L211"></a> 211                                "element={"+<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>+"},"+
<a id="L212" name="L212"></a> 212                                "attributes=..."+<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>+
<a id="L213" name="L213"></a> 213                                ")");
<a id="L214" name="L214"></a> 214         <em class="brace">}</em>
<a id="L215" name="L215"></a> 215 
<a id="L216" name="L216"></a> 216         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i &lt; fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L217" name="L217"></a> 217             <em class="comment">// push context</em>
<a id="L218" name="L218"></a> 218             <strong class="reserved">int</strong> startStep = fCurrentStep[i];
<a id="L219" name="L219"></a> 219             fStepIndexes[i].<a href="../D/29933.html" title="Multiple defined in 37 places.">push</a>(startStep);
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221             <em class="comment">// try next xpath, if not matching</em>
<a id="L222" name="L222"></a> 222             <strong class="reserved">if</strong> ((fMatched[i] &amp; MATCHED_DESCENDANT) == MATCHED || fNoMatchDepth[i] &gt; 0) <em class="brace">{</em>
<a id="L223" name="L223"></a> 223                 fNoMatchDepth[i]++;
<a id="L224" name="L224"></a> 224                 <strong class="reserved">continue</strong>;
<a id="L225" name="L225"></a> 225             <em class="brace">}</em>
<a id="L226" name="L226"></a> 226             <strong class="reserved">if</strong>((fMatched[i] &amp; MATCHED_DESCENDANT) == MATCHED_DESCENDANT) <em class="brace">{</em>
<a id="L227" name="L227"></a> 227                 fMatched[i] = MATCHED_DESCENDANT_PREVIOUS;
<a id="L228" name="L228"></a> 228             <em class="brace">}</em>
<a id="L229" name="L229"></a> 229 
<a id="L230" name="L230"></a> 230             <strong class="reserved">if</strong> (DEBUG_STACK) <em class="brace">{</em>
<a id="L231" name="L231"></a> 231                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+": "+fStepIndexes[i]);
<a id="L232" name="L232"></a> 232             <em class="brace">}</em>
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234             <em class="comment">// consume self::node() steps</em>
<a id="L235" name="L235"></a> 235             <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/8383.html" title="Multiple defined in 3 places.">Step</a>[] steps = fLocationPaths[i].steps;
<a id="L236" name="L236"></a> 236             <strong class="reserved">while</strong> (fCurrentStep[i] &lt; steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;
<a id="L237" name="L237"></a> 237                     steps[fCurrentStep[i]].axis.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.SELF) <em class="brace">{</em>
<a id="L238" name="L238"></a> 238                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239                     <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/8383.html" title="Multiple defined in 3 places.">Step</a> <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a> = steps[fCurrentStep[i]];
<a id="L240" name="L240"></a> 240                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [SELF] MATCHED!");
<a id="L241" name="L241"></a> 241                 <em class="brace">}</em>
<a id="L242" name="L242"></a> 242                 fCurrentStep[i]++;
<a id="L243" name="L243"></a> 243             <em class="brace">}</em>
<a id="L244" name="L244"></a> 244             <strong class="reserved">if</strong> (fCurrentStep[i] == steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L246" name="L246"></a> 246                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" XPath MATCHED!");
<a id="L247" name="L247"></a> 247                 <em class="brace">}</em>
<a id="L248" name="L248"></a> 248                 fMatched[i] = MATCHED;
<a id="L249" name="L249"></a> 249                 <strong class="reserved">continue</strong>;
<a id="L250" name="L250"></a> 250             <em class="brace">}</em>
<a id="L251" name="L251"></a> 251 
<a id="L252" name="L252"></a> 252             <em class="comment">// now if the current step is a descendant step, we let the next</em>
<a id="L253" name="L253"></a> 253             <em class="comment">// step do its thing; if it fails, we reset ourselves</em>
<a id="L254" name="L254"></a> 254             <em class="comment">// to look at this step for next time we're called.</em>
<a id="L255" name="L255"></a> 255             <em class="comment">// so first consume all descendants:</em>
<a id="L256" name="L256"></a> 256             <strong class="reserved">int</strong> descendantStep = fCurrentStep[i];
<a id="L257" name="L257"></a> 257             <strong class="reserved">while</strong>(fCurrentStep[i] &lt; steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp; steps[fCurrentStep[i]].axis.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.DESCENDANT) <em class="brace">{</em>
<a id="L258" name="L258"></a> 258                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                     <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/8383.html" title="Multiple defined in 3 places.">Step</a> <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a> = steps[fCurrentStep[i]];
<a id="L260" name="L260"></a> 260                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [DESCENDANT] MATCHED!");
<a id="L261" name="L261"></a> 261                 <em class="brace">}</em>
<a id="L262" name="L262"></a> 262                 fCurrentStep[i]++;
<a id="L263" name="L263"></a> 263             <em class="brace">}</em>
<a id="L264" name="L264"></a> 264             <strong class="reserved">boolean</strong> sawDescendant = fCurrentStep[i] &gt; descendantStep;
<a id="L265" name="L265"></a> 265             <strong class="reserved">if</strong> (fCurrentStep[i] == steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L266" name="L266"></a> 266                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L267" name="L267"></a> 267                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" XPath DIDN'T MATCH!");
<a id="L268" name="L268"></a> 268                 <em class="brace">}</em>
<a id="L269" name="L269"></a> 269                 fNoMatchDepth[i]++;
<a id="L270" name="L270"></a> 270                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L271" name="L271"></a> 271                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [CHILD] after NO MATCH");
<a id="L272" name="L272"></a> 272                 <em class="brace">}</em>
<a id="L273" name="L273"></a> 273                 <strong class="reserved">continue</strong>;
<a id="L274" name="L274"></a> 274             <em class="brace">}</em>
<a id="L275" name="L275"></a> 275 
<a id="L276" name="L276"></a> 276             <em class="comment">// match child::... step, if haven't consumed any self::node()</em>
<a id="L277" name="L277"></a> 277             <strong class="reserved">if</strong> ((fCurrentStep[i] == startStep || fCurrentStep[i] &gt; descendantStep) &amp;&amp;
<a id="L278" name="L278"></a> 278                 steps[fCurrentStep[i]].axis.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.CHILD) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279                 <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/8383.html" title="Multiple defined in 3 places.">Step</a> <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a> = steps[fCurrentStep[i]];
<a id="L280" name="L280"></a> 280                 <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/6106.html" title="Multiple defined in 4 places.">NodeTest</a> nodeTest = <a href="../D/34874.html" title="Multiple defined in 3 places.">step</a>.nodeTest;
<a id="L281" name="L281"></a> 281                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L282" name="L282"></a> 282                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [CHILD] before");
<a id="L283" name="L283"></a> 283                 <em class="brace">}</em>
<a id="L284" name="L284"></a> 284                 <strong class="reserved">if</strong> (nodeTest.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/6106.html" title="Multiple defined in 4 places.">NodeTest</a>.QNAME) <em class="brace">{</em>
<a id="L285" name="L285"></a> 285                     <strong class="reserved">if</strong> (!nodeTest.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>)) <em class="brace">{</em>
<a id="L286" name="L286"></a> 286                         <strong class="reserved">if</strong>(fCurrentStep[i] &gt; descendantStep) <em class="brace">{</em>
<a id="L287" name="L287"></a> 287                             fCurrentStep[i] = descendantStep;
<a id="L288" name="L288"></a> 288                             <strong class="reserved">continue</strong>;
<a id="L289" name="L289"></a> 289                         <em class="brace">}</em>
<a id="L290" name="L290"></a> 290                         fNoMatchDepth[i]++;
<a id="L291" name="L291"></a> 291                         <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292                             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [CHILD] after NO MATCH");
<a id="L293" name="L293"></a> 293                         <em class="brace">}</em>
<a id="L294" name="L294"></a> 294                         <strong class="reserved">continue</strong>;
<a id="L295" name="L295"></a> 295                     <em class="brace">}</em>
<a id="L296" name="L296"></a> 296                 <em class="brace">}</em>
<a id="L297" name="L297"></a> 297                 fCurrentStep[i]++;
<a id="L298" name="L298"></a> 298                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [CHILD] after MATCHED!");
<a id="L300" name="L300"></a> 300                 <em class="brace">}</em>
<a id="L301" name="L301"></a> 301             <em class="brace">}</em>
<a id="L302" name="L302"></a> 302             <strong class="reserved">if</strong> (fCurrentStep[i] == steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                 <strong class="reserved">if</strong>(sawDescendant) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304                     fCurrentStep[i] = descendantStep;
<a id="L305" name="L305"></a> 305                     fMatched[i] = MATCHED_DESCENDANT;
<a id="L306" name="L306"></a> 306                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L307" name="L307"></a> 307                     fMatched[i] = MATCHED;
<a id="L308" name="L308"></a> 308                 <em class="brace">}</em>
<a id="L309" name="L309"></a> 309                 <strong class="reserved">continue</strong>;
<a id="L310" name="L310"></a> 310             <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<a id="L312" name="L312"></a> 312             <em class="comment">// match attribute::... step</em>
<a id="L313" name="L313"></a> 313             <strong class="reserved">if</strong> (fCurrentStep[i] &lt; steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &amp;&amp;
<a id="L314" name="L314"></a> 314                 steps[fCurrentStep[i]].axis.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/639.html" title="Multiple defined in 2 places.">Axis</a>.ATTRIBUTE) <em class="brace">{</em>
<a id="L315" name="L315"></a> 315                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L316" name="L316"></a> 316                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [ATTRIBUTE] before");
<a id="L317" name="L317"></a> 317                 <em class="brace">}</em>
<a id="L318" name="L318"></a> 318                 <strong class="reserved">int</strong> attrCount = <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L319" name="L319"></a> 319                 <strong class="reserved">if</strong> (attrCount &gt; 0) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320                     <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/6106.html" title="Multiple defined in 4 places.">NodeTest</a> nodeTest = steps[fCurrentStep[i]].nodeTest;
<a id="L321" name="L321"></a> 321 
<a id="L322" name="L322"></a> 322                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> aIndex = 0; aIndex &lt; attrCount; aIndex++) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323                         <a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(aIndex, fQName);
<a id="L324" name="L324"></a> 324                         <strong class="reserved">if</strong> (nodeTest.<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> != <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/6106.html" title="Multiple defined in 4 places.">NodeTest</a>.QNAME ||
<a id="L325" name="L325"></a> 325                             nodeTest.<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(fQName)) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                             fCurrentStep[i]++;
<a id="L327" name="L327"></a> 327                             <strong class="reserved">if</strong> (fCurrentStep[i] == steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328                                 fMatched[i] = MATCHED_ATTRIBUTE;
<a id="L329" name="L329"></a> 329                                 <strong class="reserved">int</strong> j=0;
<a id="L330" name="L330"></a> 330                                 <strong class="reserved">for</strong>(; j&lt;i &amp;&amp; ((fMatched[j] &amp; MATCHED) != MATCHED); j++);
<a id="L331" name="L331"></a> 331                                 <strong class="reserved">if</strong>(j==i) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                                     <a href="../S/5376.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/AttributePSVI.java.">AttributePSVI</a> attrPSVI = (<a href="../S/5376.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/AttributePSVI.java.">AttributePSVI</a>)<a href="../S/1947.html#L156" title="Defined at 156 in src/java/nio/file/FileTreeWalker.java.">attributes</a>.<a href="../D/17122.html" title="Multiple defined in 9 places.">getAugmentations</a>(aIndex).<a href="../D/19851.html" title="Multiple defined in 13 places.">getItem</a>(<a href="../D/1829.html" title="Multiple defined in 9 places.">Constants</a>.ATTRIBUTE_PSVI);
<a id="L333" name="L333"></a> 333                                     fMatchedString = attrPSVI.<a href="../D/16808.html" title="Multiple defined in 5 places.">getActualNormalizedValue</a>();
<a id="L334" name="L334"></a> 334                                     <a href="../D/27561.html" title="Multiple defined in 2 places.">matched</a>(fMatchedString, attrPSVI.<a href="../D/16809.html" title="Multiple defined in 5 places.">getActualNormalizedValueType</a>(), attrPSVI.<a href="../D/19860.html" title="Multiple defined in 11 places.">getItemValueTypes</a>(), <strong class="reserved">false</strong>);
<a id="L335" name="L335"></a> 335                                 <em class="brace">}</em>
<a id="L336" name="L336"></a> 336                             <em class="brace">}</em>
<a id="L337" name="L337"></a> 337                             <strong class="reserved">break</strong>;
<a id="L338" name="L338"></a> 338                         <em class="brace">}</em>
<a id="L339" name="L339"></a> 339                     <em class="brace">}</em>
<a id="L340" name="L340"></a> 340                 <em class="brace">}</em>
<a id="L341" name="L341"></a> 341                 <strong class="reserved">if</strong> ((fMatched[i] &amp; MATCHED) != MATCHED) <em class="brace">{</em>
<a id="L342" name="L342"></a> 342                     <strong class="reserved">if</strong>(fCurrentStep[i] &gt; descendantStep) <em class="brace">{</em>
<a id="L343" name="L343"></a> 343                         fCurrentStep[i] = descendantStep;
<a id="L344" name="L344"></a> 344                         <strong class="reserved">continue</strong>;
<a id="L345" name="L345"></a> 345                     <em class="brace">}</em>
<a id="L346" name="L346"></a> 346                     fNoMatchDepth[i]++;
<a id="L347" name="L347"></a> 347                     <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L348" name="L348"></a> 348                         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [ATTRIBUTE] after");
<a id="L349" name="L349"></a> 349                     <em class="brace">}</em>
<a id="L350" name="L350"></a> 350                     <strong class="reserved">continue</strong>;
<a id="L351" name="L351"></a> 351                 <em class="brace">}</em>
<a id="L352" name="L352"></a> 352                 <strong class="reserved">if</strong> (DEBUG_MATCH) <em class="brace">{</em>
<a id="L353" name="L353"></a> 353                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+" [ATTRIBUTE] after MATCHED!");
<a id="L354" name="L354"></a> 354                 <em class="brace">}</em>
<a id="L355" name="L355"></a> 355             <em class="brace">}</em>
<a id="L356" name="L356"></a> 356         <em class="brace">}</em>
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358     <em class="brace">}</em>
<a id="L359" name="L359"></a> 359     <em class="comment">// startElement(QName,XMLAttrList,int)</em>
<a id="L360" name="L360"></a> 360 
<div class="comment">
        @param element
               name of the element.
        @param type
               content type of this element. IOW, the XML schema type
               of the <tt>value</tt>. Note that this may not be the type declared
               in the element declaration, but it is "the actual type". For example,
               if the XML is &lt;foo xsi:type="xs:string"&gt;aaa&lt;/foo&gt;, this
               parameter will be "xs:string".
        @param nillable - nillable
               true if the element declaration is nillable.
        @param value - actual value
               the typed value of the content of this element.</div>
<a id="L375" name="L375"></a> 375     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13766.html" title="Multiple referred from 95 places.">endElement</a>(<a href="../D/6976.html" title="Multiple defined in 5 places.">QName</a> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, <a href="../S/5343.html#L26" title="Defined at 26 in src/com/sun/org/apache/xerces/internal/xs/XSTypeDefinition.java.">XSTypeDefinition</a> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <strong class="reserved">boolean</strong> <a href="../D/28203.html" title="Multiple defined in 2 places.">nillable</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">short</strong> valueType, <a href="../S/5356.html#L29" title="Defined at 29 in src/com/sun/org/apache/xerces/internal/xs/ShortList.java.">ShortList</a> itemValueType) <em class="brace">{</em>
<a id="L376" name="L376"></a> 376         <strong class="reserved">if</strong> (DEBUG_METHODS2) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+"#endElement("+
<a id="L378" name="L378"></a> 378                                "element={"+<a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>+"},"+
<a id="L379" name="L379"></a> 379                                ")");
<a id="L380" name="L380"></a> 380         <em class="brace">}</em>
<a id="L381" name="L381"></a> 381         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i = 0; i&lt;fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382             <em class="comment">// go back a step</em>
<a id="L383" name="L383"></a> 383             fCurrentStep[i] = fStepIndexes[i].<a href="../D/29416.html" title="Multiple defined in 30 places.">pop</a>();
<a id="L384" name="L384"></a> 384 
<a id="L385" name="L385"></a> 385             <em class="comment">// don't do anything, if not matching</em>
<a id="L386" name="L386"></a> 386             <strong class="reserved">if</strong> (fNoMatchDepth[i] &gt; 0) <em class="brace">{</em>
<a id="L387" name="L387"></a> 387                 fNoMatchDepth[i]--;
<a id="L388" name="L388"></a> 388             <em class="brace">}</em>
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390             <em class="comment">// signal match, if appropriate</em>
<a id="L391" name="L391"></a> 391             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L392" name="L392"></a> 392                 <strong class="reserved">int</strong> j=0;
<a id="L393" name="L393"></a> 393                 <strong class="reserved">for</strong>(; j&lt;i &amp;&amp; ((fMatched[j] &amp; MATCHED) != MATCHED); j++);
<a id="L394" name="L394"></a> 394                 <strong class="reserved">if</strong> ((j&lt;i) || (fMatched[j] == 0) ||
<a id="L395" name="L395"></a> 395                         ((fMatched[j] &amp; MATCHED_ATTRIBUTE) == MATCHED_ATTRIBUTE)) <em class="brace">{</em>
<a id="L396" name="L396"></a> 396                     <strong class="reserved">continue</strong>;
<a id="L397" name="L397"></a> 397                 <em class="brace">}</em>
<a id="L398" name="L398"></a> 398                 <em class="comment">// only certain kinds of matchers actually</em>
<a id="L399" name="L399"></a> 399                 <em class="comment">// match element content.  This permits</em>
<a id="L400" name="L400"></a> 400                 <em class="comment">// them a way to override this to do nothing</em>
<a id="L401" name="L401"></a> 401                 <em class="comment">// and hopefully save a few operations.</em>
<a id="L402" name="L402"></a> 402                 <a href="../D/23960.html" title="Multiple defined in 2 places.">handleContent</a>(<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>, <a href="../D/28203.html" title="Multiple defined in 2 places.">nillable</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, valueType, itemValueType);
<a id="L403" name="L403"></a> 403                 fMatched[i] = 0;
<a id="L404" name="L404"></a> 404             <em class="brace">}</em>
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406             <strong class="reserved">if</strong> (DEBUG_STACK) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()+": "+fStepIndexes[i]);
<a id="L408" name="L408"></a> 408             <em class="brace">}</em>
<a id="L409" name="L409"></a> 409         <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411     <em class="brace">}</em> <em class="comment">// endElement(QName)</em>
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413     <em class="comment">//</em>
<a id="L414" name="L414"></a> 414     <em class="comment">// Object methods</em>
<a id="L415" name="L415"></a> 415     <em class="comment">//</em>
<a id="L416" name="L416"></a> 416 
<div class="comment">
     /** Returns a string representation of this object. */</div>
<a id="L418" name="L418"></a> 418     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<div class="comment">
*
        return fLocationPath.toString();
         /***/</div>
<a id="L422" name="L422"></a> 422         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L423" name="L423"></a> 423         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s = <strong class="reserved">super</strong>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L424" name="L424"></a> 424         <strong class="reserved">int</strong> index2 = s.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>('.');
<a id="L425" name="L425"></a> 425         <strong class="reserved">if</strong> (index2 != -1) <em class="brace">{</em>
<a id="L426" name="L426"></a> 426             s = s.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(index2 + 1);
<a id="L427" name="L427"></a> 427         <em class="brace">}</em>
<a id="L428" name="L428"></a> 428         <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(s);
<a id="L429" name="L429"></a> 429         <strong class="reserved">for</strong>(<strong class="reserved">int</strong> i =0;i&lt;fLocationPaths.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L430" name="L430"></a> 430             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('[');
<a id="L431" name="L431"></a> 431             <a href="../D/10071.html" title="Multiple defined in 5 places.">XPath</a>.<a href="../D/8383.html" title="Multiple defined in 3 places.">Step</a>[] steps = fLocationPaths[i].steps;
<a id="L432" name="L432"></a> 432             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; j++) <em class="brace">{</em>
<a id="L433" name="L433"></a> 433                 <strong class="reserved">if</strong> (j == fCurrentStep[i]) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434                     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('^');
<a id="L435" name="L435"></a> 435                 <em class="brace">}</em>
<a id="L436" name="L436"></a> 436                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(steps[j].<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L437" name="L437"></a> 437                 <strong class="reserved">if</strong> (j &lt; steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> - 1) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438                     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('/');
<a id="L439" name="L439"></a> 439                 <em class="brace">}</em>
<a id="L440" name="L440"></a> 440             <em class="brace">}</em>
<a id="L441" name="L441"></a> 441             <strong class="reserved">if</strong> (fCurrentStep[i] == steps.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>) <em class="brace">{</em>
<a id="L442" name="L442"></a> 442                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>('^');
<a id="L443" name="L443"></a> 443             <em class="brace">}</em>
<a id="L444" name="L444"></a> 444             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(']');
<a id="L445" name="L445"></a> 445             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(',');
<a id="L446" name="L446"></a> 446         <em class="brace">}</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">return</strong> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L448" name="L448"></a> 448     <em class="brace">}</em> <em class="comment">// toString():String</em>
<a id="L449" name="L449"></a> 449 
<a id="L450" name="L450"></a> 450     <em class="comment">//</em>
<a id="L451" name="L451"></a> 451     <em class="comment">// Private methods</em>
<a id="L452" name="L452"></a> 452     <em class="comment">//</em>
<a id="L453" name="L453"></a> 453 
<div class="comment">
     /** Normalizes text. */</div>
<a id="L455" name="L455"></a> 455     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/23781.html" title="Multiple referred from 143 places.">normalize</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> s) <em class="brace">{</em>
<a id="L456" name="L456"></a> 456         <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = <strong class="reserved">new</strong> <a href="../S/1583.html#L97" title="Defined at 97 in src/java/lang/StringBuffer.java.">StringBuffer</a>();
<a id="L457" name="L457"></a> 457         <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = s.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>();
<a id="L458" name="L458"></a> 458         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459             <strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = s.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(i);
<a id="L460" name="L460"></a> 460             <strong class="reserved">switch</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>) <em class="brace">{</em>
<a id="L461" name="L461"></a> 461                 <strong class="reserved">case</strong> '\n': <em class="brace">{</em>
<a id="L462" name="L462"></a> 462                     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>("\\n");
<a id="L463" name="L463"></a> 463                     <strong class="reserved">break</strong>;
<a id="L464" name="L464"></a> 464                 <em class="brace">}</em>
<a id="L465" name="L465"></a> 465                 <strong class="reserved">default</strong>: <em class="brace">{</em>
<a id="L466" name="L466"></a> 466                     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L467" name="L467"></a> 467                 <em class="brace">}</em>
<a id="L468" name="L468"></a> 468             <em class="brace">}</em>
<a id="L469" name="L469"></a> 469         <em class="brace">}</em>
<a id="L470" name="L470"></a> 470         <strong class="reserved">return</strong> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L471" name="L471"></a> 471     <em class="brace">}</em> <em class="comment">// normalize(String):String</em>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473     <em class="comment">//</em>
<a id="L474" name="L474"></a> 474     <em class="comment">// MAIN</em>
<a id="L475" name="L475"></a> 475     <em class="comment">//</em>
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477     <em class="comment">// NOTE: The main of this class is here for debugging purposes.</em>
<a id="L478" name="L478"></a> 478     <em class="comment">//       However, javac (JDK 1.1.8) has an internal compiler</em>
<a id="L479" name="L479"></a> 479     <em class="comment">//       error when compiling. Jikes has no problem, though.</em>
<a id="L480" name="L480"></a> 480     <em class="comment">//</em>
<a id="L481" name="L481"></a> 481     <em class="comment">//       If you want to use this main, use Jikes to compile but</em>
<a id="L482" name="L482"></a> 482     <em class="comment">//       *never* check in this code to CVS without commenting it</em>
<a id="L483" name="L483"></a> 483     <em class="comment">//       out. -Ac</em>
<a id="L484" name="L484"></a> 484 
<div class="comment">
     /** Main program. */</div>
<div class="comment">
*
    public static void main(String[] argv) throws XNIException {
        if (DEBUG_ANY) {
            for (int i = 0; i &lt; argv.length; i++) {
                final String expr = argv[i];
                final XPath xpath = new XPath(expr, symbols, null);
                final XPathMatcher matcher = new XPathMatcher(xpath, true);
                com.sun.org.apache.xerces.internal.parsers.SAXParser parser =
                    new com.sun.org.apache.xerces.internal.parsers.SAXParser(symbols) {
                    public void startDocument() throws XNIException {
                        matcher.startDocumentFragment(symbols, null);
                    }
                    public void startElement(QName element, XMLAttrList attributes, int handle) throws XNIException {
                        matcher.startElement(element, attributes, handle);
                    }
                    public void characters(char[] ch, int offset, int length) throws XNIException {
                        matcher.characters(ch, offset, length);
                    }
                    public void endElement(QName element) throws XNIException {
                        matcher.endElement(element);
                    }
                    public void endDocument() throws XNIException {
                        matcher.endDocumentFragment();
                    }
                };
                System.out.println("#### argv["+i+"]: \""+expr+"\" -&gt; \""+xpath.toString()+'"');
                final String uri = argv[++i];
                System.out.println("#### argv["+i+"]: "+uri);
                parser.parse(uri);
            }
        }
    } // main(String[])
     /***/</div>
<a id="L521" name="L521"></a> 521 
<a id="L522" name="L522"></a> 522 <em class="brace">}</em> <em class="comment">// class XPathMatcher</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L141">[^]</a><a href="#L455">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
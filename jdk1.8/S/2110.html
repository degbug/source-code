<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/KeyboardFocusManager.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L162">[^]</a><a href="#L3143">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L162" title="Defined at 162.">initIDs</a></li>
<li><a href="#L215" title="Defined at 215.">getCurrentKeyboardFocusManager</a></li>
<li><a href="#L220" title="Defined at 220.">getCurrentKeyboardFocusManager</a></li>
<li><a href="#L248" title="Defined at 248.">setCurrentKeyboardFocusManager</a></li>
<li><a href="#L406" title="Defined at 406.">setCurrentSequencedEvent</a></li>
<li><a href="#L413" title="Defined at 413.">getCurrentSequencedEvent</a></li>
<li><a href="#L419" title="Defined at 419.">initFocusTraversalKeysSet</a></li>
<li><a href="#L445" title="Defined at 445.">initPeer</a></li>
<li><a href="#L465" title="Defined at 465.">getFocusOwner</a></li>
<li><a href="#L498" title="Defined at 498.">getGlobalFocusOwner</a></li>
<li><a href="#L533" title="Defined at 533.">setGlobalFocusOwner</a></li>
<li><a href="#L595" title="Defined at 595.">clearFocusOwner</a></li>
<li><a href="#L625" title="Defined at 625.">clearGlobalFocusOwner</a></li>
<li><a href="#L637" title="Defined at 637.">_clearGlobalFocusOwner</a></li>
<li><a href="#L642" title="Defined at 642.">clearGlobalFocusOwnerPriv</a></li>
<li><a href="#L651" title="Defined at 651.">getNativeFocusOwner</a></li>
<li><a href="#L655" title="Defined at 655.">setNativeFocusOwner</a></li>
<li><a href="#L663" title="Defined at 663.">getNativeFocusedWindow</a></li>
<li><a href="#L681" title="Defined at 681.">getPermanentFocusOwner</a></li>
<li><a href="#L711" title="Defined at 711.">getGlobalPermanentFocusOwner</a></li>
<li><a href="#L749" title="Defined at 749.">setGlobalPermanentFocusOwner</a></li>
<li><a href="#L795" title="Defined at 795.">getFocusedWindow</a></li>
<li><a href="#L820" title="Defined at 820.">getGlobalFocusedWindow</a></li>
<li><a href="#L852" title="Defined at 852.">setGlobalFocusedWindow</a></li>
<li><a href="#L896" title="Defined at 896.">getActiveWindow</a></li>
<li><a href="#L924" title="Defined at 924.">getGlobalActiveWindow</a></li>
<li><a href="#L957" title="Defined at 957.">setGlobalActiveWindow</a></li>
<li><a href="#L993" title="Defined at 993.">getDefaultFocusTraversalPolicy</a></li>
<li><a href="#L1013" title="Defined at 1013.">setDefaultFocusTraversalPolicy</a></li>
<li><a href="#L1119" title="Defined at 1119.">setDefaultFocusTraversalKeys</a></li>
<li><a href="#L1190" title="Defined at 1190.">getDefaultFocusTraversalKeys</a></li>
<li><a href="#L1215" title="Defined at 1215.">getCurrentFocusCycleRoot</a></li>
<li><a href="#L1245" title="Defined at 1245.">getGlobalCurrentFocusCycleRoot</a></li>
<li><a href="#L1277" title="Defined at 1277.">setGlobalCurrentFocusCycleRoot</a></li>
<li><a href="#L1293" title="Defined at 1293.">setGlobalCurrentFocusCycleRootPriv</a></li>
<li><a href="#L1333" title="Defined at 1333.">addPropertyChangeListener</a></li>
<li><a href="#L1356" title="Defined at 1356.">removePropertyChangeListener</a></li>
<li><a href="#L1380" title="Defined at 1380.">getPropertyChangeListeners</a></li>
<li><a href="#L1419" title="Defined at 1419.">addPropertyChangeListener</a></li>
<li><a href="#L1445" title="Defined at 1445.">removePropertyChangeListener</a></li>
<li><a href="#L1469" title="Defined at 1469.">getPropertyChangeListeners</a></li>
<li><a href="#L1485" title="Defined at 1485.">firePropertyChange</a></li>
<li><a href="#L1514" title="Defined at 1514.">addVetoableChangeListener</a></li>
<li><a href="#L1538" title="Defined at 1538.">removeVetoableChangeListener</a></li>
<li><a href="#L1562" title="Defined at 1562.">getVetoableChangeListeners</a></li>
<li><a href="#L1587" title="Defined at 1587.">addVetoableChangeListener</a></li>
<li><a href="#L1614" title="Defined at 1614.">removeVetoableChangeListener</a></li>
<li><a href="#L1639" title="Defined at 1639.">getVetoableChangeListeners</a></li>
<li><a href="#L1662" title="Defined at 1662.">fireVetoableChange</a></li>
<li><a href="#L1699" title="Defined at 1699.">addKeyEventDispatcher</a></li>
<li><a href="#L1730" title="Defined at 1730.">removeKeyEventDispatcher</a></li>
<li><a href="#L1754" title="Defined at 1754.">getKeyEventDispatchers</a></li>
<li><a href="#L1787" title="Defined at 1787.">addKeyEventPostProcessor</a></li>
<li><a href="#L1820" title="Defined at 1820.">removeKeyEventPostProcessor</a></li>
<li><a href="#L1845" title="Defined at 1845.">getKeyEventPostProcessors</a></li>
<li><a href="#L1854" title="Defined at 1854.">setMostRecentFocusOwner</a></li>
<li><a href="#L1863" title="Defined at 1863.">setMostRecentFocusOwner</a></li>
<li><a href="#L1875" title="Defined at 1875.">clearMostRecentFocusOwner</a></li>
<li><a href="#L1909" title="Defined at 1909.">getMostRecentFocusOwner</a></li>
<li><a href="#L1934" title="Defined at 1934.">dispatchEvent</a></li>
<li><a href="#L1952" title="Defined at 1952.">redispatchEvent</a></li>
<li><a href="#L1973" title="Defined at 1973.">dispatchKeyEvent</a></li>
<li><a href="#L1987" title="Defined at 1987.">postProcessKeyEvent</a></li>
<li><a href="#L2002" title="Defined at 2002.">processKeyEvent</a></li>
<li><a href="#L2025" title="Defined at 2025.">enqueueKeyEvents</a></li>
<li><a href="#L2044" title="Defined at 2044.">dequeueKeyEvents</a></li>
<li><a href="#L2058" title="Defined at 2058.">discardKeyEvents</a></li>
<li><a href="#L2068" title="Defined at 2068.">focusNextComponent</a></li>
<li><a href="#L2078" title="Defined at 2078.">focusPreviousComponent</a></li>
<li><a href="#L2091" title="Defined at 2091.">upFocusCycle</a></li>
<li><a href="#L2103" title="Defined at 2103.">downFocusCycle</a></li>
<li><a href="#L2108" title="Defined at 2108.">focusNextComponent</a></li>
<li><a href="#L2118" title="Defined at 2118.">focusPreviousComponent</a></li>
<li><a href="#L2134" title="Defined at 2134.">upFocusCycle</a></li>
<li><a href="#L2150" title="Defined at 2150.">downFocusCycle</a></li>
<li><a href="#L2160" title="Defined at 2160.">dumpRequests</a></li>
<li><a href="#L2180" title="Defined at 2180.">toString</a></li>
<li><a href="#L2210" title="Defined at 2210.">addLightweightRequest</a></li>
<li><a href="#L2235" title="Defined at 2235.">getFirstLightweightRequest</a></li>
<li><a href="#L2241" title="Defined at 2241.">toString</a></li>
<li><a href="#L2282" title="Defined at 2282.">processSynchronousLightweightTransfer</a></li>
<li><a href="#L2533" title="Defined at 2533.">markClearGlobalFocusOwner</a></li>
<li><a href="#L2564" title="Defined at 2564.">getCurrentWaitingRequest</a></li>
<li><a href="#L2580" title="Defined at 2580.">isAutoFocusTransferEnabled</a></li>
<li><a href="#L2588" title="Defined at 2588.">isAutoFocusTransferEnabledFor</a></li>
<li><a href="#L2598" title="Defined at 2598.">dispatchAndCatchException</a></li>
<li><a href="#L2616" title="Defined at 2616.">handleException</a></li>
<li><a href="#L2620" title="Defined at 2620.">processCurrentLightweightRequests</a></li>
<li><a href="#L2717" title="Defined at 2717.">retargetUnexpectedFocusEvent</a></li>
<li><a href="#L2740" title="Defined at 2740.">retargetFocusGained</a></li>
<li><a href="#L2832" title="Defined at 2832.">retargetFocusLost</a></li>
<li><a href="#L2904" title="Defined at 2904.">retargetFocusEvent</a></li>
<li><a href="#L2969" title="Defined at 2969.">clearMarkers</a></li>
<li><a href="#L2972" title="Defined at 2972.">removeFirstRequest</a></li>
<li><a href="#L3000" title="Defined at 3000.">removeLastFocusRequest</a></li>
<li><a href="#L3023" title="Defined at 3023.">focusedWindowChanged</a></li>
<li><a href="#L3038" title="Defined at 3038.">isTemporary</a></li>
<li><a href="#L3053" title="Defined at 3053.">getHeavyweight</a></li>
<li><a href="#L3065" title="Defined at 3065.">isProxyActiveImpl</a></li>
<li><a href="#L3092" title="Defined at 3092.">isProxyActive</a></li>
<li><a href="#L3100" title="Defined at 3100.">getLastHWRequest</a></li>
<li><a href="#L3108" title="Defined at 3108.">getFirstHWRequest</a></li>
<li><a href="#L3116" title="Defined at 3116.">checkReplaceKFMPermission</a></li>
<li><a href="#L3143" title="Defined at 3143.">checkKFMSecurity</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.awt.event.FocusEvent;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.event.InputEvent;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.event.KeyEvent;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.event.WindowEvent;
<a id="L31" name="L31"></a>  31 
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.awt.peer.KeyboardFocusManagerPeer;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.awt.peer.LightweightPeer;
<a id="L34" name="L34"></a>  34 
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.beans.PropertyChangeListener;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.beans.PropertyChangeSupport;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.beans.PropertyVetoException;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.beans.VetoableChangeListener;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.beans.VetoableChangeSupport;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.lang.ref.WeakReference;
<a id="L42" name="L42"></a>  42 
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.lang.reflect.Field;
<a id="L44" name="L44"></a>  44 
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> java.security.PrivilegedAction;
<a id="L47" name="L47"></a>  47 
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> java.util.Collections;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> java.util.HashSet;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> java.util.LinkedList;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> java.util.Set;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> java.util.StringTokenizer;
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> java.util.WeakHashMap;
<a id="L55" name="L55"></a>  55 
<a id="L56" name="L56"></a>  56 <strong class="reserved">import</strong> sun.util.logging.PlatformLogger;
<a id="L57" name="L57"></a>  57 
<a id="L58" name="L58"></a>  58 <strong class="reserved">import</strong> sun.awt.AppContext;
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> sun.awt.SunToolkit;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> sun.awt.CausedFocusEvent;
<a id="L61" name="L61"></a>  61 <strong class="reserved">import</strong> sun.awt.KeyboardFocusManagerPeerProvider;
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> sun.awt.AWTAccessor;
<a id="L63" name="L63"></a>  63 
<div class="comment">
  The KeyboardFocusManager is responsible for managing the active and focused
  Windows, and the current focus owner. The focus owner is defined as the
  Component in an application that will typically receive all KeyEvents
  generated by the user. The focused Window is the Window that is, or
  contains, the focus owner. Only a Frame or a Dialog can be the active
  Window. The native windowing system may denote the active Window or its
  children with special decorations, such as a highlighted title bar. The
  active Window is always either the focused Window, or the first Frame or
  Dialog that is an owner of the focused Window.
  <p>
  The KeyboardFocusManager is both a centralized location for client code to
  query for the focus owner and initiate focus changes, and an event
  dispatcher for all FocusEvents, WindowEvents related to focus, and
  KeyEvents.
  </p><p>
  Some browsers partition applets in different code bases into separate
  contexts, and establish walls between these contexts. In such a scenario,
  there will be one KeyboardFocusManager per context. Other browsers place all
  applets into the same context, implying that there will be only a single,
  global KeyboardFocusManager for all applets. This behavior is
  implementation-dependent. Consult your browser's documentation for more
  information. No matter how many contexts there may be, however, there can
  never be more than one focus owner, focused Window, or active Window, per
  ClassLoader.
  </p><p>
  Please see
  <a href="https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html">
  How to Use the Focus Subsystem</a>,
  a section in <em>The Java Tutorial</em>, and the
  <a href="../../java/awt/doc-files/FocusSpec.html">Focus Specification</a>
  for more information.
  @author David Mendenhall
  @see Window
  @see Frame
  @see Dialog
  @see java.awt.event.FocusEvent
  @see java.awt.event.WindowEvent
  @see java.awt.event.KeyEvent
  @since 1.4</p></div>
<a id="L107" name="L107"></a> 107 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/4406.html" title="Multiple referred from 205 places.">KeyboardFocusManager</a>
<a id="L108" name="L108"></a> 108     <strong class="reserved">implements</strong> <a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a>, <a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a>
<a id="L109" name="L109"></a> 109 <em class="brace">{</em>
<a id="L110" name="L110"></a> 110 
<a id="L111" name="L111"></a> 111     <em class="comment">// Shared focus engine logger</em>
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> PlatformLogger focusLog = PlatformLogger.<a href="../D/20268.html" title="Multiple defined in 6 places.">getLogger</a>("java.awt.focus.KeyboardFocusManager");
<a id="L113" name="L113"></a> 113 
<a id="L114" name="L114"></a> 114     <strong class="reserved">static</strong> <em class="brace">{</em>
<div class="comment">
         /* ensure that the necessary native libraries are loaded */</div>
<a id="L116" name="L116"></a> 116         <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../D/26950.html" title="Multiple defined in 3 places.">loadLibraries</a>();
<a id="L117" name="L117"></a> 117         <strong class="reserved">if</strong> (!<a href="../S/2120.html#L56" title="Defined at 56 in src/java/awt/GraphicsEnvironment.java.">GraphicsEnvironment</a>.<a href="../D/25646.html" title="Multiple defined in 2 places.">isHeadless</a>()) <em class="brace">{</em>
<a id="L118" name="L118"></a> 118             <a href="../D/24550.html" title="Multiple defined in 53 places.">initIDs</a>();
<a id="L119" name="L119"></a> 119         <em class="brace">}</em>
<a id="L120" name="L120"></a> 120         AWTAccessor.setKeyboardFocusManagerAccessor(
<a id="L121" name="L121"></a> 121             <strong class="reserved">new</strong> AWTAccessor.KeyboardFocusManagerAccessor() <em class="brace">{</em>
<a id="L122" name="L122"></a> 122                 <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/2110.html#L2386" title="Defined at 2386 in src/java/awt/KeyboardFocusManager.java.">shouldNativelyFocusHeavyweight</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight,
<a id="L123" name="L123"></a> 123                                                    <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant,
<a id="L124" name="L124"></a> 124                                                    <strong class="reserved">boolean</strong> temporary,
<a id="L125" name="L125"></a> 125                                                    <strong class="reserved">boolean</strong> focusedWindowChangeAllowed,
<a id="L126" name="L126"></a> 126                                                    <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>,
<a id="L127" name="L127"></a> 127                                                    CausedFocusEvent.Cause cause)
<a id="L128" name="L128"></a> 128                 <em class="brace">{</em>
<a id="L129" name="L129"></a> 129                     <strong class="reserved">return</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2386" title="Defined at 2386 in src/java/awt/KeyboardFocusManager.java.">shouldNativelyFocusHeavyweight</a>(
<a id="L130" name="L130"></a> 130                         heavyweight, descendant, temporary, focusedWindowChangeAllowed, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, cause);
<a id="L131" name="L131"></a> 131                 <em class="brace">}</em>
<a id="L132" name="L132"></a> 132                 <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/2110.html#L2282" title="Defined at 2282 in src/java/awt/KeyboardFocusManager.java.">processSynchronousLightweightTransfer</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight,
<a id="L133" name="L133"></a> 133                                                               <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant,
<a id="L134" name="L134"></a> 134                                                               <strong class="reserved">boolean</strong> temporary,
<a id="L135" name="L135"></a> 135                                                               <strong class="reserved">boolean</strong> focusedWindowChangeAllowed,
<a id="L136" name="L136"></a> 136                                                               <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>)
<a id="L137" name="L137"></a> 137                 <em class="brace">{</em>
<a id="L138" name="L138"></a> 138                     <strong class="reserved">return</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2282" title="Defined at 2282 in src/java/awt/KeyboardFocusManager.java.">processSynchronousLightweightTransfer</a>(
<a id="L139" name="L139"></a> 139                         heavyweight, descendant, temporary, focusedWindowChangeAllowed, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L140" name="L140"></a> 140                 <em class="brace">}</em>
<a id="L141" name="L141"></a> 141                 <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2110.html#L3000" title="Defined at 3000 in src/java/awt/KeyboardFocusManager.java.">removeLastFocusRequest</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight) <em class="brace">{</em>
<a id="L142" name="L142"></a> 142                     <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L3000" title="Defined at 3000 in src/java/awt/KeyboardFocusManager.java.">removeLastFocusRequest</a>(heavyweight);
<a id="L143" name="L143"></a> 143                 <em class="brace">}</em>
<a id="L144" name="L144"></a> 144                 <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> window, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>) <em class="brace">{</em>
<a id="L145" name="L145"></a> 145                     <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>(window, <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>);
<a id="L146" name="L146"></a> 146                 <em class="brace">}</em>
<a id="L147" name="L147"></a> 147                 <strong class="reserved">public</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(AppContext <a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>) <em class="brace">{</em>
<a id="L148" name="L148"></a> 148                     <strong class="reserved">return</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(<a href="../D/14411.html" title="Multiple defined in 6 places.">ctx</a>);
<a id="L149" name="L149"></a> 149                 <em class="brace">}</em>
<a id="L150" name="L150"></a> 150                 <strong class="reserved">public</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> <a href="../D/18104.html" title="Multiple defined in 2 places.">getCurrentFocusCycleRoot</a>() <em class="brace">{</em>
<a id="L151" name="L151"></a> 151                     <strong class="reserved">return</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.currentFocusCycleRoot;
<a id="L152" name="L152"></a> 152                 <em class="brace">}</em>
<a id="L153" name="L153"></a> 153             <em class="brace">}</em>
<a id="L154" name="L154"></a> 154         );
<a id="L155" name="L155"></a> 155     <em class="brace">}</em>
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157     <strong class="reserved">transient</strong> <a href="../S/2207.html#L34" title="Defined at 34 in src/java/awt/peer/KeyboardFocusManagerPeer.java.">KeyboardFocusManagerPeer</a> peer;
<a id="L158" name="L158"></a> 158 
<div class="comment">
      Initialize JNI field and method IDs</div>
<a id="L162" name="L162"></a> 162     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">native</strong> <strong class="reserved">void</strong> <a href="../R/20590.html" title="Multiple referred from 52 places.">initIDs</a>();
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> PlatformLogger <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a> = PlatformLogger.<a href="../D/20268.html" title="Multiple defined in 6 places.">getLogger</a>("java.awt.KeyboardFocusManager");
<a id="L165" name="L165"></a> 165 
<div class="comment">
      The identifier for the Forward focus traversal keys.
      @see #setDefaultFocusTraversalKeys
      @see #getDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys</div>
<a id="L174" name="L174"></a> 174     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FORWARD_TRAVERSAL_KEYS = 0;
<a id="L175" name="L175"></a> 175 
<div class="comment">
      The identifier for the Backward focus traversal keys.
      @see #setDefaultFocusTraversalKeys
      @see #getDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys</div>
<a id="L184" name="L184"></a> 184     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BACKWARD_TRAVERSAL_KEYS = 1;
<a id="L185" name="L185"></a> 185 
<div class="comment">
      The identifier for the Up Cycle focus traversal keys.
      @see #setDefaultFocusTraversalKeys
      @see #getDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys</div>
<a id="L194" name="L194"></a> 194     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UP_CYCLE_TRAVERSAL_KEYS = 2;
<a id="L195" name="L195"></a> 195 
<div class="comment">
      The identifier for the Down Cycle focus traversal keys.
      @see #setDefaultFocusTraversalKeys
      @see #getDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys</div>
<a id="L204" name="L204"></a> 204     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOWN_CYCLE_TRAVERSAL_KEYS = 3;
<a id="L205" name="L205"></a> 205 
<a id="L206" name="L206"></a> 206     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TRAVERSAL_KEY_LENGTH = DOWN_CYCLE_TRAVERSAL_KEYS + 1;
<a id="L207" name="L207"></a> 207 
<div class="comment">
      Returns the current KeyboardFocusManager instance for the calling
      thread's context.
      @return this thread's context's KeyboardFocusManager
      @see #setCurrentKeyboardFocusManager</div>
<a id="L215" name="L215"></a> 215     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> <a href="../R/15893.html" title="Multiple referred from 84 places.">getCurrentKeyboardFocusManager</a>() <em class="brace">{</em>
<a id="L216" name="L216"></a> 216         <strong class="reserved">return</strong> <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(AppContext.getAppContext());
<a id="L217" name="L217"></a> 217     <em class="brace">}</em>
<a id="L218" name="L218"></a> 218 
<a id="L219" name="L219"></a> 219     <strong class="reserved">synchronized</strong> <strong class="reserved">static</strong> <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>
<a id="L220" name="L220"></a> 220         <a href="../R/15893.html" title="Multiple referred from 84 places.">getCurrentKeyboardFocusManager</a>(AppContext appcontext)
<a id="L221" name="L221"></a> 221     <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager = (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>)
<a id="L223" name="L223"></a> 223             appcontext.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>);
<a id="L224" name="L224"></a> 224         <strong class="reserved">if</strong> (manager == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L225" name="L225"></a> 225             manager = <strong class="reserved">new</strong> <a href="../S/2359.html#L65" title="Defined at 65 in src/java/awt/DefaultKeyboardFocusManager.java.">DefaultKeyboardFocusManager</a>();
<a id="L226" name="L226"></a> 226             appcontext.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>, manager);
<a id="L227" name="L227"></a> 227         <em class="brace">}</em>
<a id="L228" name="L228"></a> 228         <strong class="reserved">return</strong> manager;
<a id="L229" name="L229"></a> 229     <em class="brace">}</em>
<a id="L230" name="L230"></a> 230 
<div class="comment">
      Sets the current KeyboardFocusManager instance for the calling thread's
      context. If null is specified, then the current KeyboardFocusManager
      is replaced with a new instance of DefaultKeyboardFocusManager.
      <p>
      If a SecurityManager is installed, the calling thread must be granted
      the AWTPermission "replaceKeyboardFocusManager" in order to replace the
      the current KeyboardFocusManager. If this permission is not granted,
      this method will throw a SecurityException, and the current
      KeyboardFocusManager will be unchanged.
      @param newManager the new KeyboardFocusManager for this thread's context
      @see #getCurrentKeyboardFocusManager
      @see DefaultKeyboardFocusManager
      @throws SecurityException if the calling thread does not have permission
              to replace the current KeyboardFocusManager</p></div>
<a id="L248" name="L248"></a> 248     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../S/3174.html#L116" title="Referred from 116 in src/javax/swing/FocusManager.java.">setCurrentKeyboardFocusManager</a>(
<a id="L249" name="L249"></a> 249         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> newManager) <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L250" name="L250"></a> 250     <em class="brace">{</em>
<a id="L251" name="L251"></a> 251         <a href="../S/2110.html#L3116" title="Defined at 3116 in src/java/awt/KeyboardFocusManager.java.">checkReplaceKFMPermission</a>();
<a id="L252" name="L252"></a> 252 
<a id="L253" name="L253"></a> 253         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> oldManager = <strong class="reserved">null</strong>;
<a id="L254" name="L254"></a> 254 
<a id="L255" name="L255"></a> 255         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L256" name="L256"></a> 256             AppContext appcontext = AppContext.getAppContext();
<a id="L257" name="L257"></a> 257 
<a id="L258" name="L258"></a> 258             <strong class="reserved">if</strong> (newManager != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                 oldManager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(appcontext);
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261                 appcontext.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>, newManager);
<a id="L262" name="L262"></a> 262             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L263" name="L263"></a> 263                 oldManager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(appcontext);
<a id="L264" name="L264"></a> 264                 appcontext.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>);
<a id="L265" name="L265"></a> 265             <em class="brace">}</em>
<a id="L266" name="L266"></a> 266         <em class="brace">}</em>
<a id="L267" name="L267"></a> 267 
<a id="L268" name="L268"></a> 268         <strong class="reserved">if</strong> (oldManager != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L269" name="L269"></a> 269             oldManager.<a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("managingFocus",
<a id="L270" name="L270"></a> 270                                           <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE,
<a id="L271" name="L271"></a> 271                                           <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE);
<a id="L272" name="L272"></a> 272         <em class="brace">}</em>
<a id="L273" name="L273"></a> 273         <strong class="reserved">if</strong> (newManager != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L274" name="L274"></a> 274             newManager.<a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("managingFocus",
<a id="L275" name="L275"></a> 275                                           <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.FALSE,
<a id="L276" name="L276"></a> 276                                           <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.TRUE);
<a id="L277" name="L277"></a> 277         <em class="brace">}</em>
<a id="L278" name="L278"></a> 278     <em class="brace">}</em>
<a id="L279" name="L279"></a> 279 
<div class="comment">
      The Component in an application that will typically receive all
      KeyEvents generated by the user.</div>
<a id="L284" name="L284"></a> 284     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner;
<a id="L285" name="L285"></a> 285 
<div class="comment">
      The Component in an application that will regain focus when an
      outstanding temporary focus transfer has completed, or the focus owner,
      if no outstanding temporary transfer exists.</div>
<a id="L291" name="L291"></a> 291     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> permanentFocusOwner;
<a id="L292" name="L292"></a> 292 
<div class="comment">
      The Window which is, or contains, the focus owner.</div>
<a id="L296" name="L296"></a> 296     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> focusedWindow;
<a id="L297" name="L297"></a> 297 
<div class="comment">
      Only a Frame or a Dialog can be the active Window. The native windowing
      system may denote the active Window with a special decoration, such as a
      highlighted title bar. The active Window is always either the focused
      Window, or the first Frame or Dialog which is an owner of the focused
      Window.</div>
<a id="L305" name="L305"></a> 305     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> activeWindow;
<a id="L306" name="L306"></a> 306 
<div class="comment">
      The default FocusTraversalPolicy for all Windows that have no policy of
      their own set. If those Windows have focus-cycle-root children that have
      no keyboard-traversal policy of their own, then those children will also
      inherit this policy (as will, recursively, their focus-cycle-root
      children).</div>
<a id="L314" name="L314"></a> 314     <strong class="reserved">private</strong> <a href="../S/2389.html#L70" title="Defined at 70 in src/java/awt/FocusTraversalPolicy.java.">FocusTraversalPolicy</a> defaultPolicy =
<a id="L315" name="L315"></a> 315         <strong class="reserved">new</strong> <a href="../S/2114.html#L70" title="Defined at 70 in src/java/awt/DefaultFocusTraversalPolicy.java.">DefaultFocusTraversalPolicy</a>();
<a id="L316" name="L316"></a> 316 
<div class="comment">
      The bound property names of each focus traversal key.</div>
<a id="L320" name="L320"></a> 320     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] defaultFocusTraversalKeyPropertyNames = <em class="brace">{</em>
<a id="L321" name="L321"></a> 321         "forwardDefaultFocusTraversalKeys",
<a id="L322" name="L322"></a> 322         "backwardDefaultFocusTraversalKeys",
<a id="L323" name="L323"></a> 323         "upCycleDefaultFocusTraversalKeys",
<a id="L324" name="L324"></a> 324         "downCycleDefaultFocusTraversalKeys"
<a id="L325" name="L325"></a> 325     <em class="brace">}</em>;
<a id="L326" name="L326"></a> 326 
<div class="comment">
      The default strokes for initializing the default focus traversal keys.</div>
<a id="L330" name="L330"></a> 330     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>[][] defaultFocusTraversalKeyStrokes = <em class="brace">{</em>
<a id="L331" name="L331"></a> 331         <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.VK_TAB, 0, <strong class="reserved">false</strong>),
<a id="L333" name="L333"></a> 333             <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.VK_TAB, <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.CTRL_DOWN_MASK | <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.CTRL_MASK, <strong class="reserved">false</strong>),
<a id="L334" name="L334"></a> 334         <em class="brace">}</em>,
<a id="L335" name="L335"></a> 335         <em class="brace">{</em>
<a id="L336" name="L336"></a> 336             <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.VK_TAB, <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.SHIFT_DOWN_MASK | <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.SHIFT_MASK, <strong class="reserved">false</strong>),
<a id="L337" name="L337"></a> 337             <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.VK_TAB,
<a id="L338" name="L338"></a> 338                                          <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.SHIFT_DOWN_MASK | <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.SHIFT_MASK | <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.CTRL_DOWN_MASK | <a href="../S/2412.html#L59" title="Defined at 59 in src/java/awt/event/InputEvent.java.">InputEvent</a>.CTRL_MASK,
<a id="L339" name="L339"></a> 339                                          <strong class="reserved">false</strong>),
<a id="L340" name="L340"></a> 340         <em class="brace">}</em>,
<a id="L341" name="L341"></a> 341         <em class="brace">{</em><em class="brace">}</em>,
<a id="L342" name="L342"></a> 342         <em class="brace">{</em><em class="brace">}</em>,
<a id="L343" name="L343"></a> 343       <em class="brace">}</em>;
<div class="comment">
      The default focus traversal keys. Each array of traversal keys will be
      in effect on all Windows that have no such array of their own explicitly
      set. Each array will also be inherited, recursively, by any child
      Component of those Windows that has no such array of its own explicitly
      set.</div>
<a id="L351" name="L351"></a> 351     <strong class="reserved">private</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt;[] defaultFocusTraversalKeys = <strong class="reserved">new</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>[4];
<a id="L352" name="L352"></a> 352 
<div class="comment">
      The current focus cycle root. If the focus owner is itself a focus cycle
      root, then it may be ambiguous as to which Components represent the next
      and previous Components to focus during normal focus traversal. In that
      case, the current focus cycle root is used to differentiate among the
      possibilities.</div>
<a id="L360" name="L360"></a> 360     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> currentFocusCycleRoot;
<a id="L361" name="L361"></a> 361 
<div class="comment">
      A description of any VetoableChangeListeners which have been registered.</div>
<a id="L365" name="L365"></a> 365     <strong class="reserved">private</strong> <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a> vetoableSupport;
<a id="L366" name="L366"></a> 366 
<div class="comment">
      A description of any PropertyChangeListeners which have been registered.</div>
<a id="L370" name="L370"></a> 370     <strong class="reserved">private</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a> changeSupport;
<a id="L371" name="L371"></a> 371 
<div class="comment">
      This KeyboardFocusManager's KeyEventDispatcher chain. The List does not
      include this KeyboardFocusManager unless it was explicitly re-registered
      via a call to <code>addKeyEventDispatcher</code>. If no other
      KeyEventDispatchers are registered, this field may be null or refer to
      a List of length 0.</div>
<a id="L379" name="L379"></a> 379     <strong class="reserved">private</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a>&gt; keyEventDispatchers;
<a id="L380" name="L380"></a> 380 
<div class="comment">
      This KeyboardFocusManager's KeyEventPostProcessor chain. The List does
      not include this KeyboardFocusManager unless it was explicitly
      re-registered via a call to <code>addKeyEventPostProcessor</code>.
      If no other KeyEventPostProcessors are registered, this field may be
      null or refer to a List of length 0.</div>
<a id="L388" name="L388"></a> 388     <strong class="reserved">private</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a>&gt; keyEventPostProcessors;
<a id="L389" name="L389"></a> 389 
<div class="comment">
      Maps Windows to those Windows' most recent focus owners.</div>
<a id="L393" name="L393"></a> 393     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>, <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt;&gt; mostRecentFocusOwners = <strong class="reserved">new</strong> <a href="../S/934.html#L136" title="Defined at 136 in src/java/util/WeakHashMap.java.">WeakHashMap</a>&lt;&gt;();
<a id="L394" name="L394"></a> 394 
<div class="comment">
      We cache the permission used to verify that the calling thread is
      permitted to access the global focus state.</div>
<a id="L399" name="L399"></a> 399     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2088.html#L198" title="Defined at 198 in src/java/awt/AWTPermission.java.">AWTPermission</a> replaceKeyboardFocusManagerPermission;
<a id="L400" name="L400"></a> 400 
<div class="comment">
      SequencedEvent which is currently dispatched in AppContext.</div>
<a id="L404" name="L404"></a> 404     <strong class="reserved">transient</strong> <a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a> currentSequencedEvent = <strong class="reserved">null</strong>;
<a id="L405" name="L405"></a> 405 
<a id="L406" name="L406"></a> 406     <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/27138.html" title="Multiple referred from 2 places.">setCurrentSequencedEvent</a>(<a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a> <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407         <strong class="reserved">synchronized</strong> (<a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L408" name="L408"></a> 408             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<a href="../D/14417.html" title="Multiple defined in 10 places.">current</a> == <strong class="reserved">null</strong> || currentSequencedEvent == <strong class="reserved">null</strong>);
<a id="L409" name="L409"></a> 409             currentSequencedEvent = <a href="../D/14417.html" title="Multiple defined in 10 places.">current</a>;
<a id="L410" name="L410"></a> 410         <em class="brace">}</em>
<a id="L411" name="L411"></a> 411     <em class="brace">}</em>
<a id="L412" name="L412"></a> 412 
<a id="L413" name="L413"></a> 413     <strong class="reserved">final</strong> <a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a> <a href="../R/15902.html" title="Multiple referred from 3 places.">getCurrentSequencedEvent</a>() <em class="brace">{</em>
<a id="L414" name="L414"></a> 414         <strong class="reserved">synchronized</strong> (<a href="../S/2097.html#L44" title="Defined at 44 in src/java/awt/SequencedEvent.java.">SequencedEvent</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">return</strong> currentSequencedEvent;
<a id="L416" name="L416"></a> 416         <em class="brace">}</em>
<a id="L417" name="L417"></a> 417     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<a id="L419" name="L419"></a> 419     <strong class="reserved">static</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; <a href="../R/20577.html" title="Multiple referred from 2 places.">initFocusTraversalKeysSet</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; targetSet) <em class="brace">{</em>
<a id="L420" name="L420"></a> 420         <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a> tokens = <strong class="reserved">new</strong> <a href="../S/939.html#L103" title="Defined at 103 in src/java/util/StringTokenizer.java.">StringTokenizer</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, ",");
<a id="L421" name="L421"></a> 421         <strong class="reserved">while</strong> (tokens.<a href="../D/24131.html" title="Multiple defined in 2 places.">hasMoreTokens</a>()) <em class="brace">{</em>
<a id="L422" name="L422"></a> 422             targetSet.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>.<a href="../D/16691.html" title="Multiple defined in 5 places.">getAWTKeyStroke</a>(tokens.<a href="../D/28195.html" title="Multiple defined in 10 places.">nextToken</a>()));
<a id="L423" name="L423"></a> 423         <em class="brace">}</em>
<a id="L424" name="L424"></a> 424         <strong class="reserved">return</strong> (targetSet.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>())
<a id="L425" name="L425"></a> 425             ? <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.EMPTY_SET
<a id="L426" name="L426"></a> 426             : <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1117" title="Defined at 1117 in src/java/util/Collections.java.">unmodifiableSet</a>(targetSet);
<a id="L427" name="L427"></a> 427     <em class="brace">}</em>
<a id="L428" name="L428"></a> 428 
<div class="comment">
      Initializes a KeyboardFocusManager.</div>
<a id="L432" name="L432"></a> 432     <strong class="reserved">public</strong> KeyboardFocusManager() <em class="brace">{</em>
<a id="L433" name="L433"></a> 433         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; TRAVERSAL_KEY_LENGTH; i++) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434             <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; work_set = <strong class="reserved">new</strong> <a href="../S/1136.html#L89" title="Defined at 89 in src/java/util/HashSet.java.">HashSet</a>&lt;&gt;();
<a id="L435" name="L435"></a> 435             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j = 0; j &lt; defaultFocusTraversalKeyStrokes[i].<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; j++) <em class="brace">{</em>
<a id="L436" name="L436"></a> 436                 work_set.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(defaultFocusTraversalKeyStrokes[i][j]);
<a id="L437" name="L437"></a> 437             <em class="brace">}</em>
<a id="L438" name="L438"></a> 438             defaultFocusTraversalKeys[i] = (work_set.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>())
<a id="L439" name="L439"></a> 439                 ? <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.EMPTY_SET
<a id="L440" name="L440"></a> 440                 : <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1117" title="Defined at 1117 in src/java/util/Collections.java.">unmodifiableSet</a>(work_set);
<a id="L441" name="L441"></a> 441         <em class="brace">}</em>
<a id="L442" name="L442"></a> 442         <a href="../S/2110.html#L445" title="Defined at 445 in src/java/awt/KeyboardFocusManager.java.">initPeer</a>();
<a id="L443" name="L443"></a> 443     <em class="brace">}</em>
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2110.html#L442" title="Referred from 442 in src/java/awt/KeyboardFocusManager.java.">initPeer</a>() <em class="brace">{</em>
<a id="L446" name="L446"></a> 446         <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a> tk = <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>();
<a id="L447" name="L447"></a> 447         KeyboardFocusManagerPeerProvider peerProvider = (KeyboardFocusManagerPeerProvider)tk;
<a id="L448" name="L448"></a> 448         peer = peerProvider.getKeyboardFocusManagerPeer();
<a id="L449" name="L449"></a> 449     <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<div class="comment">
      Returns the focus owner, if the focus owner is in the same context as
      the calling thread. The focus owner is defined as the Component in an
      application that will typically receive all KeyEvents generated by the
      user. KeyEvents which map to the focus owner's focus traversal keys will
      not be delivered if focus traversal keys are enabled for the focus
      owner. In addition, KeyEventDispatchers may retarget or consume
      KeyEvents before they reach the focus owner.
      @return the focus owner, or null if the focus owner is not a member of
              the calling thread's context
      @see #getGlobalFocusOwner
      @see #setGlobalFocusOwner</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">public</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/16665.html" title="Multiple referred from 34 places.">getFocusOwner</a>() <em class="brace">{</em>
<a id="L466" name="L466"></a> 466         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L467" name="L467"></a> 467             <strong class="reserved">if</strong> (focusOwner == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L468" name="L468"></a> 468                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L469" name="L469"></a> 469             <em class="brace">}</em>
<a id="L470" name="L470"></a> 470 
<a id="L471" name="L471"></a> 471             <strong class="reserved">return</strong> (focusOwner.appContext == AppContext.getAppContext())
<a id="L472" name="L472"></a> 472                 ? focusOwner
<a id="L473" name="L473"></a> 473                 : <strong class="reserved">null</strong>;
<a id="L474" name="L474"></a> 474         <em class="brace">}</em>
<a id="L475" name="L475"></a> 475     <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
      Returns the focus owner, even if the calling thread is in a different
      context than the focus owner. The focus owner is defined as the
      Component in an application that will typically receive all KeyEvents
      generated by the user. KeyEvents which map to the focus owner's focus
      traversal keys will not be delivered if focus traversal keys are enabled
      for the focus owner. In addition, KeyEventDispatchers may retarget or
      consume KeyEvents before they reach the focus owner.
      <p>
      This method will throw a SecurityException if this KeyboardFocusManager
      is not the current KeyboardFocusManager for the calling thread's
      context.
      @return the focus owner
      @see #getFocusOwner
      @see #setGlobalFocusOwner
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission</p></div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">protected</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/16786.html" title="Multiple referred from 14 places.">getGlobalFocusOwner</a>() <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> <em class="brace">{</em>
<a id="L499" name="L499"></a> 499         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L501" name="L501"></a> 501             <strong class="reserved">return</strong> focusOwner;
<a id="L502" name="L502"></a> 502         <em class="brace">}</em>
<a id="L503" name="L503"></a> 503     <em class="brace">}</em>
<a id="L504" name="L504"></a> 504 
<div class="comment">
      Sets the focus owner. The operation will be cancelled if the Component
      is not focusable. The focus owner is defined as the Component in an
      application that will typically receive all KeyEvents generated by the
      user. KeyEvents which map to the focus owner's focus traversal keys will
      not be delivered if focus traversal keys are enabled for the focus
      owner. In addition, KeyEventDispatchers may retarget or consume
      KeyEvents before they reach the focus owner.
      <p>
      This method does not actually set the focus to the specified Component.
      It merely stores the value to be subsequently returned by
      <code>getFocusOwner()</code>. Use <code>Component.requestFocus()</code>
      or <code>Component.requestFocusInWindow()</code> to change the focus
      owner, subject to platform limitations.
      @param focusOwner the focus owner
      @see #getFocusOwner
      @see #getGlobalFocusOwner
      @see Component#requestFocus()
      @see Component#requestFocusInWindow()
      @see Component#isFocusable
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission
      @beaninfo
            bound: true</p></div>
<a id="L533" name="L533"></a> 533     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27472.html" title="Multiple referred from 4 places.">setGlobalFocusOwner</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner)
<a id="L534" name="L534"></a> 534         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L535" name="L535"></a> 535     <em class="brace">{</em>
<a id="L536" name="L536"></a> 536         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> oldFocusOwner = <strong class="reserved">null</strong>;
<a id="L537" name="L537"></a> 537         <strong class="reserved">boolean</strong> shouldFire = <strong class="reserved">false</strong>;
<a id="L538" name="L538"></a> 538 
<a id="L539" name="L539"></a> 539         <strong class="reserved">if</strong> (focusOwner == <strong class="reserved">null</strong> || focusOwner.<a href="../D/25590.html" title="Multiple defined in 2 places.">isFocusable</a>()) <em class="brace">{</em>
<a id="L540" name="L540"></a> 540             <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L541" name="L541"></a> 541                 <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L542" name="L542"></a> 542 
<a id="L543" name="L543"></a> 543                 oldFocusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L544" name="L544"></a> 544 
<a id="L545" name="L545"></a> 545                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L546" name="L546"></a> 546                     <a href="../D/16391.html" title="Multiple defined in 7 places.">fireVetoableChange</a>("focusOwner", oldFocusOwner,
<a id="L547" name="L547"></a> 547                                        focusOwner);
<a id="L548" name="L548"></a> 548                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1821.html#L35" title="Defined at 35 in src/java/beans/PropertyVetoException.java.">PropertyVetoException</a> e) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549                     <em class="comment">// rejected</em>
<a id="L550" name="L550"></a> 550                     <strong class="reserved">return</strong>;
<a id="L551" name="L551"></a> 551                 <em class="brace">}</em>
<a id="L552" name="L552"></a> 552 
<a id="L553" name="L553"></a> 553                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.focusOwner = focusOwner;
<a id="L554" name="L554"></a> 554 
<a id="L555" name="L555"></a> 555                 <strong class="reserved">if</strong> (focusOwner != <strong class="reserved">null</strong> &amp;&amp;
<a id="L556" name="L556"></a> 556                     (<a href="../D/18104.html" title="Multiple defined in 2 places.">getCurrentFocusCycleRoot</a>() == <strong class="reserved">null</strong> ||
<a id="L557" name="L557"></a> 557                      !focusOwner.<a href="../D/25582.html" title="Multiple defined in 5 places.">isFocusCycleRoot</a>(<a href="../D/18104.html" title="Multiple defined in 2 places.">getCurrentFocusCycleRoot</a>())))
<a id="L558" name="L558"></a> 558                 <em class="brace">{</em>
<a id="L559" name="L559"></a> 559                     <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> rootAncestor =
<a id="L560" name="L560"></a> 560                         focusOwner.<a href="../D/19161.html" title="Multiple defined in 3 places.">getFocusCycleRootAncestor</a>();
<a id="L561" name="L561"></a> 561                     <strong class="reserved">if</strong> (rootAncestor == <strong class="reserved">null</strong> &amp;&amp; (focusOwner <strong class="reserved">instanceof</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>))
<a id="L562" name="L562"></a> 562                     <em class="brace">{</em>
<a id="L563" name="L563"></a> 563                         rootAncestor = (<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>)focusOwner;
<a id="L564" name="L564"></a> 564                     <em class="brace">}</em>
<a id="L565" name="L565"></a> 565                     <strong class="reserved">if</strong> (rootAncestor != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566                         <a href="../S/2110.html#L1293" title="Defined at 1293 in src/java/awt/KeyboardFocusManager.java.">setGlobalCurrentFocusCycleRootPriv</a>(rootAncestor);
<a id="L567" name="L567"></a> 567                     <em class="brace">}</em>
<a id="L568" name="L568"></a> 568                 <em class="brace">}</em>
<a id="L569" name="L569"></a> 569 
<a id="L570" name="L570"></a> 570                 shouldFire = <strong class="reserved">true</strong>;
<a id="L571" name="L571"></a> 571             <em class="brace">}</em>
<a id="L572" name="L572"></a> 572         <em class="brace">}</em>
<a id="L573" name="L573"></a> 573 
<a id="L574" name="L574"></a> 574         <strong class="reserved">if</strong> (shouldFire) <em class="brace">{</em>
<a id="L575" name="L575"></a> 575             <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("focusOwner", oldFocusOwner, focusOwner);
<a id="L576" name="L576"></a> 576         <em class="brace">}</em>
<a id="L577" name="L577"></a> 577     <em class="brace">}</em>
<a id="L578" name="L578"></a> 578 
<div class="comment">
      Clears the focus owner at both the Java and native levels if the
      focus owner exists and resides in the same context as the calling thread,
      otherwise the method returns silently.
      <p>
      The focus owner component will receive a permanent FOCUS_LOST event.
      After this operation completes, the native windowing system will discard
      all user-generated KeyEvents until the user selects a new Component to
      receive focus, or a Component is given focus explicitly via a call to
      <code>requestFocus()</code>. This operation does not change the focused or
      active Windows.
      @see Component#requestFocus()
      @see java.awt.event.FocusEvent#FOCUS_LOST
      @since 1.8</p></div>
<a id="L595" name="L595"></a> 595     <strong class="reserved">public</strong> <strong class="reserved">void</strong> clearFocusOwner() <em class="brace">{</em>
<a id="L596" name="L596"></a> 596         <strong class="reserved">if</strong> (<a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L597" name="L597"></a> 597             <a href="../D/12843.html" title="Multiple defined in 3 places.">clearGlobalFocusOwner</a>();
<a id="L598" name="L598"></a> 598         <em class="brace">}</em>
<a id="L599" name="L599"></a> 599     <em class="brace">}</em>
<a id="L600" name="L600"></a> 600 
<div class="comment">
      Clears the global focus owner at both the Java and native levels. If
      there exists a focus owner, that Component will receive a permanent
      FOCUS_LOST event. After this operation completes, the native windowing
      system will discard all user-generated KeyEvents until the user selects
      a new Component to receive focus, or a Component is given focus
      explicitly via a call to <code>requestFocus()</code>. This operation
      does not change the focused or active Windows.
      <p>
      If a SecurityManager is installed, the calling thread must be granted
      the "replaceKeyboardFocusManager" AWTPermission. If this permission is
      not granted, this method will throw a SecurityException, and the current
      focus owner will not be cleared.
      </p><p>
      This method is intended to be used only by KeyboardFocusManager set as
      current KeyboardFocusManager for the calling thread's context. It is not
      for general client use.
      @see KeyboardFocusManager#clearFocusOwner
      @see Component#requestFocus()
      @see java.awt.event.FocusEvent#FOCUS_LOST
      @throws SecurityException if the calling thread does not have
              "replaceKeyboardFocusManager" permission</p></div>
<a id="L625" name="L625"></a> 625     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11517.html" title="Multiple referred from 4 places.">clearGlobalFocusOwner</a>()
<a id="L626" name="L626"></a> 626         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L627" name="L627"></a> 627     <em class="brace">{</em>
<a id="L628" name="L628"></a> 628         <a href="../S/2110.html#L3116" title="Defined at 3116 in src/java/awt/KeyboardFocusManager.java.">checkReplaceKFMPermission</a>();
<a id="L629" name="L629"></a> 629         <strong class="reserved">if</strong> (!<a href="../S/2120.html#L56" title="Defined at 56 in src/java/awt/GraphicsEnvironment.java.">GraphicsEnvironment</a>.<a href="../D/25646.html" title="Multiple defined in 2 places.">isHeadless</a>()) <em class="brace">{</em>
<a id="L630" name="L630"></a> 630             <em class="comment">// Toolkit must be fully initialized, otherwise</em>
<a id="L631" name="L631"></a> 631             <em class="comment">// _clearGlobalFocusOwner will crash or throw an exception</em>
<a id="L632" name="L632"></a> 632             <a href="../S/2437.html#L113" title="Defined at 113 in src/java/awt/Toolkit.java.">Toolkit</a>.<a href="../S/2437.html#L852" title="Defined at 852 in src/java/awt/Toolkit.java.">getDefaultToolkit</a>();
<a id="L633" name="L633"></a> 633 
<a id="L634" name="L634"></a> 634             <a href="../S/2110.html#L637" title="Defined at 637 in src/java/awt/KeyboardFocusManager.java.">_clearGlobalFocusOwner</a>();
<a id="L635" name="L635"></a> 635         <em class="brace">}</em>
<a id="L636" name="L636"></a> 636     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/2110.html#L634" title="Referred from 634 in src/java/awt/KeyboardFocusManager.java.">_clearGlobalFocusOwner</a>() <em class="brace">{</em>
<a id="L638" name="L638"></a> 638         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> activeWindow = <a href="../S/2110.html#L2533" title="Defined at 2533 in src/java/awt/KeyboardFocusManager.java.">markClearGlobalFocusOwner</a>();
<a id="L639" name="L639"></a> 639         peer.<a href="../D/12843.html" title="Multiple defined in 3 places.">clearGlobalFocusOwner</a>(activeWindow);
<a id="L640" name="L640"></a> 640     <em class="brace">}</em>
<a id="L641" name="L641"></a> 641 
<a id="L642" name="L642"></a> 642     <strong class="reserved">void</strong> <a href="../R/11518.html" title="Multiple referred from 7 places.">clearGlobalFocusOwnerPriv</a>() <em class="brace">{</em>
<a id="L643" name="L643"></a> 643         <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(<strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;() <em class="brace">{</em>
<a id="L644" name="L644"></a> 644             <strong class="reserved">public</strong> <a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L645" name="L645"></a> 645                 <a href="../D/12843.html" title="Multiple defined in 3 places.">clearGlobalFocusOwner</a>();
<a id="L646" name="L646"></a> 646                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L647" name="L647"></a> 647             <em class="brace">}</em>
<a id="L648" name="L648"></a> 648         <em class="brace">}</em>);
<a id="L649" name="L649"></a> 649     <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<a id="L651" name="L651"></a> 651     <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/17871.html" title="Multiple referred from 2 places.">getNativeFocusOwner</a>() <em class="brace">{</em>
<a id="L652" name="L652"></a> 652         <strong class="reserved">return</strong> peer.<a href="../S/2207.html#L69" title="Defined at 69 in src/java/awt/peer/KeyboardFocusManagerPeer.java.">getCurrentFocusOwner</a>();
<a id="L653" name="L653"></a> 653     <em class="brace">}</em>
<a id="L654" name="L654"></a> 654 
<a id="L655" name="L655"></a> 655     <strong class="reserved">void</strong> <a href="../R/27805.html" title="Multiple referred from 2 places.">setNativeFocusOwner</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L656" name="L656"></a> 656         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("Calling peer {0} setCurrentFocusOwner for {1}",
<a id="L658" name="L658"></a> 658                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(peer), <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(comp));
<a id="L659" name="L659"></a> 659         <em class="brace">}</em>
<a id="L660" name="L660"></a> 660         peer.<a href="../S/2207.html#L60" title="Defined at 60 in src/java/awt/peer/KeyboardFocusManagerPeer.java.">setCurrentFocusOwner</a>(comp);
<a id="L661" name="L661"></a> 661     <em class="brace">}</em>
<a id="L662" name="L662"></a> 662 
<a id="L663" name="L663"></a> 663     <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../R/17872.html" title="Multiple referred from 2 places.">getNativeFocusedWindow</a>() <em class="brace">{</em>
<a id="L664" name="L664"></a> 664         <strong class="reserved">return</strong> peer.<a href="../S/2207.html#L51" title="Defined at 51 in src/java/awt/peer/KeyboardFocusManagerPeer.java.">getCurrentFocusedWindow</a>();
<a id="L665" name="L665"></a> 665     <em class="brace">}</em>
<a id="L666" name="L666"></a> 666 
<div class="comment">
      Returns the permanent focus owner, if the permanent focus owner is in
      the same context as the calling thread. The permanent focus owner is
      defined as the last Component in an application to receive a permanent
      FOCUS_GAINED event. The focus owner and permanent focus owner are
      equivalent unless a temporary focus change is currently in effect. In
      such a situation, the permanent focus owner will again be the focus
      owner when the temporary focus change ends.
      @return the permanent focus owner, or null if the permanent focus owner
              is not a member of the calling thread's context
      @see #getGlobalPermanentFocusOwner
      @see #setGlobalPermanentFocusOwner</div>
<a id="L681" name="L681"></a> 681     <strong class="reserved">public</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/18332.html" title="Multiple referred from 5 places.">getPermanentFocusOwner</a>() <em class="brace">{</em>
<a id="L682" name="L682"></a> 682         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L683" name="L683"></a> 683             <strong class="reserved">if</strong> (permanentFocusOwner == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L684" name="L684"></a> 684                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L685" name="L685"></a> 685             <em class="brace">}</em>
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687             <strong class="reserved">return</strong> (permanentFocusOwner.appContext ==
<a id="L688" name="L688"></a> 688                     AppContext.getAppContext())
<a id="L689" name="L689"></a> 689                 ? permanentFocusOwner
<a id="L690" name="L690"></a> 690                 : <strong class="reserved">null</strong>;
<a id="L691" name="L691"></a> 691         <em class="brace">}</em>
<a id="L692" name="L692"></a> 692     <em class="brace">}</em>
<a id="L693" name="L693"></a> 693 
<div class="comment">
      Returns the permanent focus owner, even if the calling thread is in a
      different context than the permanent focus owner. The permanent focus
      owner is defined as the last Component in an application to receive a
      permanent FOCUS_GAINED event. The focus owner and permanent focus owner
      are equivalent unless a temporary focus change is currently in effect.
      In such a situation, the permanent focus owner will again be the focus
      owner when the temporary focus change ends.
      @return the permanent focus owner
      @see #getPermanentFocusOwner
      @see #setGlobalPermanentFocusOwner
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission</div>
<a id="L711" name="L711"></a> 711     <strong class="reserved">protected</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/16791.html" title="Multiple referred from 2 places.">getGlobalPermanentFocusOwner</a>()
<a id="L712" name="L712"></a> 712         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L713" name="L713"></a> 713     <em class="brace">{</em>
<a id="L714" name="L714"></a> 714         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L715" name="L715"></a> 715             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L716" name="L716"></a> 716             <strong class="reserved">return</strong> permanentFocusOwner;
<a id="L717" name="L717"></a> 717         <em class="brace">}</em>
<a id="L718" name="L718"></a> 718     <em class="brace">}</em>
<a id="L719" name="L719"></a> 719 
<div class="comment">
      Sets the permanent focus owner. The operation will be cancelled if the
      Component is not focusable. The permanent focus owner is defined as the
      last Component in an application to receive a permanent FOCUS_GAINED
      event. The focus owner and permanent focus owner are equivalent unless
      a temporary focus change is currently in effect. In such a situation,
      the permanent focus owner will again be the focus owner when the
      temporary focus change ends.
      <p>
      This method does not actually set the focus to the specified Component.
      It merely stores the value to be subsequently returned by
      <code>getPermanentFocusOwner()</code>. Use
      <code>Component.requestFocus()</code> or
      <code>Component.requestFocusInWindow()</code> to change the focus owner,
      subject to platform limitations.
      @param permanentFocusOwner the permanent focus owner
      @see #getPermanentFocusOwner
      @see #getGlobalPermanentFocusOwner
      @see Component#requestFocus()
      @see Component#requestFocusInWindow()
      @see Component#isFocusable
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission
      @beaninfo
            bound: true</p></div>
<a id="L749" name="L749"></a> 749     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27474.html" title="Multiple referred from 4 places.">setGlobalPermanentFocusOwner</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> permanentFocusOwner)
<a id="L750" name="L750"></a> 750         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L751" name="L751"></a> 751     <em class="brace">{</em>
<a id="L752" name="L752"></a> 752         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> oldPermanentFocusOwner = <strong class="reserved">null</strong>;
<a id="L753" name="L753"></a> 753         <strong class="reserved">boolean</strong> shouldFire = <strong class="reserved">false</strong>;
<a id="L754" name="L754"></a> 754 
<a id="L755" name="L755"></a> 755         <strong class="reserved">if</strong> (permanentFocusOwner == <strong class="reserved">null</strong> || permanentFocusOwner.<a href="../D/25590.html" title="Multiple defined in 2 places.">isFocusable</a>()) <em class="brace">{</em>
<a id="L756" name="L756"></a> 756             <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L757" name="L757"></a> 757                 <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L758" name="L758"></a> 758 
<a id="L759" name="L759"></a> 759                 oldPermanentFocusOwner = <a href="../D/21477.html" title="Multiple defined in 2 places.">getPermanentFocusOwner</a>();
<a id="L760" name="L760"></a> 760 
<a id="L761" name="L761"></a> 761                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L762" name="L762"></a> 762                     <a href="../D/16391.html" title="Multiple defined in 7 places.">fireVetoableChange</a>("permanentFocusOwner",
<a id="L763" name="L763"></a> 763                                        oldPermanentFocusOwner,
<a id="L764" name="L764"></a> 764                                        permanentFocusOwner);
<a id="L765" name="L765"></a> 765                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1821.html#L35" title="Defined at 35 in src/java/beans/PropertyVetoException.java.">PropertyVetoException</a> e) <em class="brace">{</em>
<a id="L766" name="L766"></a> 766                     <em class="comment">// rejected</em>
<a id="L767" name="L767"></a> 767                     <strong class="reserved">return</strong>;
<a id="L768" name="L768"></a> 768                 <em class="brace">}</em>
<a id="L769" name="L769"></a> 769 
<a id="L770" name="L770"></a> 770                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.permanentFocusOwner = permanentFocusOwner;
<a id="L771" name="L771"></a> 771 
<a id="L772" name="L772"></a> 772                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.
<a id="L773" name="L773"></a> 773                     <a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>(permanentFocusOwner);
<a id="L774" name="L774"></a> 774 
<a id="L775" name="L775"></a> 775                 shouldFire = <strong class="reserved">true</strong>;
<a id="L776" name="L776"></a> 776             <em class="brace">}</em>
<a id="L777" name="L777"></a> 777         <em class="brace">}</em>
<a id="L778" name="L778"></a> 778 
<a id="L779" name="L779"></a> 779         <strong class="reserved">if</strong> (shouldFire) <em class="brace">{</em>
<a id="L780" name="L780"></a> 780             <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("permanentFocusOwner", oldPermanentFocusOwner,
<a id="L781" name="L781"></a> 781                                permanentFocusOwner);
<a id="L782" name="L782"></a> 782         <em class="brace">}</em>
<a id="L783" name="L783"></a> 783     <em class="brace">}</em>
<a id="L784" name="L784"></a> 784 
<div class="comment">
      Returns the focused Window, if the focused Window is in the same context
      as the calling thread. The focused Window is the Window that is or
      contains the focus owner.
      @return the focused Window, or null if the focused Window is not a
              member of the calling thread's context
      @see #getGlobalFocusedWindow
      @see #setGlobalFocusedWindow</div>
<a id="L795" name="L795"></a> 795     <strong class="reserved">public</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../R/16674.html" title="Multiple referred from 5 places.">getFocusedWindow</a>() <em class="brace">{</em>
<a id="L796" name="L796"></a> 796         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L797" name="L797"></a> 797             <strong class="reserved">if</strong> (focusedWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L798" name="L798"></a> 798                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L799" name="L799"></a> 799             <em class="brace">}</em>
<a id="L800" name="L800"></a> 800 
<a id="L801" name="L801"></a> 801             <strong class="reserved">return</strong> (focusedWindow.appContext == AppContext.getAppContext())
<a id="L802" name="L802"></a> 802                 ? focusedWindow
<a id="L803" name="L803"></a> 803                 : <strong class="reserved">null</strong>;
<a id="L804" name="L804"></a> 804         <em class="brace">}</em>
<a id="L805" name="L805"></a> 805     <em class="brace">}</em>
<a id="L806" name="L806"></a> 806 
<div class="comment">
      Returns the focused Window, even if the calling thread is in a different
      context than the focused Window. The focused Window is the Window that
      is or contains the focus owner.
      @return the focused Window
      @see #getFocusedWindow
      @see #setGlobalFocusedWindow
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission</div>
<a id="L820" name="L820"></a> 820     <strong class="reserved">protected</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../R/16787.html" title="Multiple referred from 7 places.">getGlobalFocusedWindow</a>() <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> <em class="brace">{</em>
<a id="L821" name="L821"></a> 821         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L822" name="L822"></a> 822             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L823" name="L823"></a> 823             <strong class="reserved">return</strong> focusedWindow;
<a id="L824" name="L824"></a> 824         <em class="brace">}</em>
<a id="L825" name="L825"></a> 825     <em class="brace">}</em>
<a id="L826" name="L826"></a> 826 
<div class="comment">
      Sets the focused Window. The focused Window is the Window that is or
      contains the focus owner. The operation will be cancelled if the
      specified Window to focus is not a focusable Window.
      <p>
      This method does not actually change the focused Window as far as the
      native windowing system is concerned. It merely stores the value to be
      subsequently returned by <code>getFocusedWindow()</code>. Use
      <code>Component.requestFocus()</code> or
      <code>Component.requestFocusInWindow()</code> to change the focused
      Window, subject to platform limitations.
      @param focusedWindow the focused Window
      @see #getFocusedWindow
      @see #getGlobalFocusedWindow
      @see Component#requestFocus()
      @see Component#requestFocusInWindow()
      @see Window#isFocusableWindow
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission
      @beaninfo
            bound: true</p></div>
<a id="L852" name="L852"></a> 852     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27473.html" title="Multiple referred from 3 places.">setGlobalFocusedWindow</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> focusedWindow)
<a id="L853" name="L853"></a> 853         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L854" name="L854"></a> 854     <em class="brace">{</em>
<a id="L855" name="L855"></a> 855         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> oldFocusedWindow = <strong class="reserved">null</strong>;
<a id="L856" name="L856"></a> 856         <strong class="reserved">boolean</strong> shouldFire = <strong class="reserved">false</strong>;
<a id="L857" name="L857"></a> 857 
<a id="L858" name="L858"></a> 858         <strong class="reserved">if</strong> (focusedWindow == <strong class="reserved">null</strong> || focusedWindow.<a href="../S/2106.html#L2493" title="Defined at 2493 in src/java/awt/Window.java.">isFocusableWindow</a>()) <em class="brace">{</em>
<a id="L859" name="L859"></a> 859             <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L860" name="L860"></a> 860                 <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L861" name="L861"></a> 861 
<a id="L862" name="L862"></a> 862                 oldFocusedWindow = <a href="../D/19175.html" title="Multiple defined in 2 places.">getFocusedWindow</a>();
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L865" name="L865"></a> 865                     <a href="../D/16391.html" title="Multiple defined in 7 places.">fireVetoableChange</a>("focusedWindow", oldFocusedWindow,
<a id="L866" name="L866"></a> 866                                        focusedWindow);
<a id="L867" name="L867"></a> 867                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1821.html#L35" title="Defined at 35 in src/java/beans/PropertyVetoException.java.">PropertyVetoException</a> e) <em class="brace">{</em>
<a id="L868" name="L868"></a> 868                     <em class="comment">// rejected</em>
<a id="L869" name="L869"></a> 869                     <strong class="reserved">return</strong>;
<a id="L870" name="L870"></a> 870                 <em class="brace">}</em>
<a id="L871" name="L871"></a> 871 
<a id="L872" name="L872"></a> 872                 <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.focusedWindow = focusedWindow;
<a id="L873" name="L873"></a> 873                 shouldFire = <strong class="reserved">true</strong>;
<a id="L874" name="L874"></a> 874             <em class="brace">}</em>
<a id="L875" name="L875"></a> 875         <em class="brace">}</em>
<a id="L876" name="L876"></a> 876 
<a id="L877" name="L877"></a> 877         <strong class="reserved">if</strong> (shouldFire) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("focusedWindow", oldFocusedWindow,
<a id="L879" name="L879"></a> 879                                focusedWindow);
<a id="L880" name="L880"></a> 880         <em class="brace">}</em>
<a id="L881" name="L881"></a> 881     <em class="brace">}</em>
<a id="L882" name="L882"></a> 882 
<div class="comment">
      Returns the active Window, if the active Window is in the same context
      as the calling thread. Only a Frame or a Dialog can be the active
      Window. The native windowing system may denote the active Window or its
      children with special decorations, such as a highlighted title bar.
      The active Window is always either the focused Window, or the first
      Frame or Dialog that is an owner of the focused Window.
      @return the active Window, or null if the active Window is not a member
              of the calling thread's context
      @see #getGlobalActiveWindow
      @see #setGlobalActiveWindow</div>
<a id="L896" name="L896"></a> 896     <strong class="reserved">public</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../R/14964.html" title="Multiple referred from 3 places.">getActiveWindow</a>() <em class="brace">{</em>
<a id="L897" name="L897"></a> 897         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L898" name="L898"></a> 898             <strong class="reserved">if</strong> (activeWindow == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L899" name="L899"></a> 899                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L900" name="L900"></a> 900             <em class="brace">}</em>
<a id="L901" name="L901"></a> 901 
<a id="L902" name="L902"></a> 902             <strong class="reserved">return</strong> (activeWindow.appContext == AppContext.getAppContext())
<a id="L903" name="L903"></a> 903                 ? activeWindow
<a id="L904" name="L904"></a> 904                 : <strong class="reserved">null</strong>;
<a id="L905" name="L905"></a> 905         <em class="brace">}</em>
<a id="L906" name="L906"></a> 906     <em class="brace">}</em>
<a id="L907" name="L907"></a> 907 
<div class="comment">
      Returns the active Window, even if the calling thread is in a different
      context than the active Window. Only a Frame or a Dialog can be the
      active Window. The native windowing system may denote the active Window
      or its children with special decorations, such as a highlighted title
      bar. The active Window is always either the focused Window, or the first
      Frame or Dialog that is an owner of the focused Window.
      @return the active Window
      @see #getActiveWindow
      @see #setGlobalActiveWindow
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission</div>
<a id="L924" name="L924"></a> 924     <strong class="reserved">protected</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../R/16779.html" title="Multiple referred from 9 places.">getGlobalActiveWindow</a>() <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> <em class="brace">{</em>
<a id="L925" name="L925"></a> 925         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L926" name="L926"></a> 926             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L927" name="L927"></a> 927             <strong class="reserved">return</strong> activeWindow;
<a id="L928" name="L928"></a> 928         <em class="brace">}</em>
<a id="L929" name="L929"></a> 929     <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<div class="comment">
      Sets the active Window. Only a Frame or a Dialog can be the active
      Window. The native windowing system may denote the active Window or its
      children with special decorations, such as a highlighted title bar. The
      active Window is always either the focused Window, or the first Frame or
      Dialog that is an owner of the focused Window.
      <p>
      This method does not actually change the active Window as far as the
      native windowing system is concerned. It merely stores the value to be
      subsequently returned by <code>getActiveWindow()</code>. Use
      <code>Component.requestFocus()</code> or
      <code>Component.requestFocusInWindow()</code>to change the active
      Window, subject to platform limitations.
      @param activeWindow the active Window
      @see #getActiveWindow
      @see #getGlobalActiveWindow
      @see Component#requestFocus()
      @see Component#requestFocusInWindow()
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission
      @beaninfo
            bound: true</p></div>
<a id="L957" name="L957"></a> 957     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27469.html" title="Multiple referred from 3 places.">setGlobalActiveWindow</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> activeWindow)
<a id="L958" name="L958"></a> 958         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L959" name="L959"></a> 959     <em class="brace">{</em>
<a id="L960" name="L960"></a> 960         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> oldActiveWindow;
<a id="L961" name="L961"></a> 961         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L962" name="L962"></a> 962             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L963" name="L963"></a> 963 
<a id="L964" name="L964"></a> 964             oldActiveWindow = <a href="../D/16801.html" title="Multiple defined in 2 places.">getActiveWindow</a>();
<a id="L965" name="L965"></a> 965             <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L966" name="L966"></a> 966                 focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("Setting global active window to " + activeWindow + ", old active " + oldActiveWindow);
<a id="L967" name="L967"></a> 967             <em class="brace">}</em>
<a id="L968" name="L968"></a> 968 
<a id="L969" name="L969"></a> 969             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L970" name="L970"></a> 970                 <a href="../D/16391.html" title="Multiple defined in 7 places.">fireVetoableChange</a>("activeWindow", oldActiveWindow,
<a id="L971" name="L971"></a> 971                                    activeWindow);
<a id="L972" name="L972"></a> 972             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1821.html#L35" title="Defined at 35 in src/java/beans/PropertyVetoException.java.">PropertyVetoException</a> e) <em class="brace">{</em>
<a id="L973" name="L973"></a> 973                 <em class="comment">// rejected</em>
<a id="L974" name="L974"></a> 974                 <strong class="reserved">return</strong>;
<a id="L975" name="L975"></a> 975             <em class="brace">}</em>
<a id="L976" name="L976"></a> 976 
<a id="L977" name="L977"></a> 977             <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.activeWindow = activeWindow;
<a id="L978" name="L978"></a> 978         <em class="brace">}</em>
<a id="L979" name="L979"></a> 979 
<a id="L980" name="L980"></a> 980         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("activeWindow", oldActiveWindow, activeWindow);
<a id="L981" name="L981"></a> 981     <em class="brace">}</em>
<a id="L982" name="L982"></a> 982 
<div class="comment">
      Returns the default FocusTraversalPolicy. Top-level components
      use this value on their creation to initialize their own focus traversal
      policy by explicit call to Container.setFocusTraversalPolicy.
      @return the default FocusTraversalPolicy. null will never be returned.
      @see #setDefaultFocusTraversalPolicy
      @see Container#setFocusTraversalPolicy
      @see Container#getFocusTraversalPolicy</div>
<a id="L993" name="L993"></a> 993     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/2389.html#L70" title="Defined at 70 in src/java/awt/FocusTraversalPolicy.java.">FocusTraversalPolicy</a> <a href="../R/16029.html" title="Multiple referred from 2 places.">getDefaultFocusTraversalPolicy</a>() <em class="brace">{</em>
<a id="L994" name="L994"></a> 994         <strong class="reserved">return</strong> defaultPolicy;
<a id="L995" name="L995"></a> 995     <em class="brace">}</em>
<a id="L996" name="L996"></a> 996 
<div class="comment">
      Sets the default FocusTraversalPolicy. Top-level components
      use this value on their creation to initialize their own focus traversal
      policy by explicit call to Container.setFocusTraversalPolicy.
      Note: this call doesn't affect already created components as they have
      their policy initialized. Only new components will use this policy as
      their default policy.
      @param defaultPolicy the new, default FocusTraversalPolicy
      @see #getDefaultFocusTraversalPolicy
      @see Container#setFocusTraversalPolicy
      @see Container#getFocusTraversalPolicy
      @throws IllegalArgumentException if defaultPolicy is null
      @beaninfo
            bound: true</div>
<a id="L1013" name="L1013"></a>1013     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27193.html" title="Multiple referred from 5 places.">setDefaultFocusTraversalPolicy</a>(<a href="../S/2389.html#L70" title="Defined at 70 in src/java/awt/FocusTraversalPolicy.java.">FocusTraversalPolicy</a>
<a id="L1014" name="L1014"></a>1014                                                defaultPolicy) <em class="brace">{</em>
<a id="L1015" name="L1015"></a>1015         <strong class="reserved">if</strong> (defaultPolicy == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("default focus traversal policy cannot be null");
<a id="L1017" name="L1017"></a>1017         <em class="brace">}</em>
<a id="L1018" name="L1018"></a>1018 
<a id="L1019" name="L1019"></a>1019         <a href="../S/2389.html#L70" title="Defined at 70 in src/java/awt/FocusTraversalPolicy.java.">FocusTraversalPolicy</a> oldPolicy;
<a id="L1020" name="L1020"></a>1020 
<a id="L1021" name="L1021"></a>1021         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1022" name="L1022"></a>1022             oldPolicy = <strong class="reserved">this</strong>.defaultPolicy;
<a id="L1023" name="L1023"></a>1023             <strong class="reserved">this</strong>.defaultPolicy = defaultPolicy;
<a id="L1024" name="L1024"></a>1024         <em class="brace">}</em>
<a id="L1025" name="L1025"></a>1025 
<a id="L1026" name="L1026"></a>1026         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("defaultFocusTraversalPolicy", oldPolicy,
<a id="L1027" name="L1027"></a>1027                            defaultPolicy);
<a id="L1028" name="L1028"></a>1028     <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029 
<div class="comment">
      Sets the default focus traversal keys for a given traversal operation.
      This traversal key <code>Set</code> will be in effect on all
      <code>Window</code>s that have no such <code>Set</code> of
      their own explicitly defined. This <code>Set</code> will also be
      inherited, recursively, by any child <code>Component</code> of
      those <code>Windows</code> that has
      no such <code>Set</code> of its own explicitly defined.
      <p>
      The default values for the default focus traversal keys are
      implementation-dependent. Sun recommends that all implementations for a
      particular native platform use the same default values. The
      recommendations for Windows and Unix are listed below. These
      recommendations are used in the Sun AWT implementations.
      </p><table border="1" summary="Recommended default values for focus traversal keys">
      <tbody><tr>
         <th>Identifier</th>
         <th>Meaning</th>
         <th>Default</th>
      </tr>
      <tr>
         <td><code>KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS</code></td>
         <td>Normal forward keyboard traversal</td>
         <td><code>TAB</code> on <code>KEY_PRESSED</code>,
             <code>CTRL-TAB</code> on <code>KEY_PRESSED</code></td>
      </tr>
      <tr>
         <td><code>KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS</code></td>
         <td>Normal reverse keyboard traversal</td>
         <td><code>SHIFT-TAB</code> on <code>KEY_PRESSED</code>,
             <code>CTRL-SHIFT-TAB</code> on <code>KEY_PRESSED</code></td>
      </tr>
      <tr>
         <td><code>KeyboardFocusManager.UP_CYCLE_TRAVERSAL_KEYS</code></td>
         <td>Go up one focus traversal cycle</td>
         <td>none</td>
      </tr>
      <tr>
         <td><code>KeyboardFocusManager.DOWN_CYCLE_TRAVERSAL_KEYS</code></td>
         <td>Go down one focus traversal cycle</td>
         <td>none</td>
      </tr>
      </tbody></table>
      To disable a traversal key, use an empty <code>Set</code>;
      <code>Collections.EMPTY_SET</code> is recommended.
      <p>
      Using the <code>AWTKeyStroke</code> API, client code can
      specify on which of two
      specific <code>KeyEvent</code>s, <code>KEY_PRESSED</code> or
      <code>KEY_RELEASED</code>, the focus traversal operation will
      occur. Regardless of which <code>KeyEvent</code> is specified,
      however, all <code>KeyEvent</code>s related to the focus
      traversal key, including the associated <code>KEY_TYPED</code>
      event, will be consumed, and will not be dispatched
      to any <code>Component</code>. It is a runtime error to
      specify a <code>KEY_TYPED</code> event as
      mapping to a focus traversal operation, or to map the same event to
      multiple default focus traversal operations.
      </p><p>
      This method may throw a <code>ClassCastException</code> if any <code>Object</code>
      in <code>keystrokes</code> is not an <code>AWTKeyStroke</code>.
      @param id one of
             <code>KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS</code>,
             <code>KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS</code>,
             <code>KeyboardFocusManager.UP_CYCLE_TRAVERSAL_KEYS</code>, or
             <code>KeyboardFocusManager.DOWN_CYCLE_TRAVERSAL_KEYS</code>
      @param keystrokes the Set of <code>AWTKeyStroke</code>s for the
             specified operation
      @see #getDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys
      @throws IllegalArgumentException if id is not one of
              <code>KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS</code>,
              <code>KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS</code>,
              <code>KeyboardFocusManager.UP_CYCLE_TRAVERSAL_KEYS</code>, or
              <code>KeyboardFocusManager.DOWN_CYCLE_TRAVERSAL_KEYS</code>,
              or if keystrokes is <code>null</code>,
              or if keystrokes contains <code>null</code>,
              or if any keystroke
              represents a <code>KEY_TYPED</code> event,
              or if any keystroke already maps
              to another default focus traversal operation
      @beaninfo
            bound: true</p></div>
<a id="L1118" name="L1118"></a>1118     <strong class="reserved">public</strong> <strong class="reserved">void</strong>
<a id="L1119" name="L1119"></a>1119         <a href="../S/2737.html#L105" title="Referred from 105 in src/javax/swing/DelegatingDefaultFocusManager.java.">setDefaultFocusTraversalKeys</a>(<strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>,
<a id="L1120" name="L1120"></a>1120                                      <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;? <strong class="reserved">extends</strong> <a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; keystrokes)
<a id="L1121" name="L1121"></a>1121     <em class="brace">{</em>
<a id="L1122" name="L1122"></a>1122         <strong class="reserved">if</strong> (<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> &lt; 0 || <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> &gt;= TRAVERSAL_KEY_LENGTH) <em class="brace">{</em>
<a id="L1123" name="L1123"></a>1123             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid focus traversal key identifier");
<a id="L1124" name="L1124"></a>1124         <em class="brace">}</em>
<a id="L1125" name="L1125"></a>1125         <strong class="reserved">if</strong> (keystrokes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1126" name="L1126"></a>1126             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("cannot set null Set of default focus traversal keys");
<a id="L1127" name="L1127"></a>1127         <em class="brace">}</em>
<a id="L1128" name="L1128"></a>1128 
<a id="L1129" name="L1129"></a>1129         <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; oldKeys;
<a id="L1130" name="L1130"></a>1130 
<a id="L1131" name="L1131"></a>1131         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1132" name="L1132"></a>1132             <strong class="reserved">for</strong> (<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a> keystroke : keystrokes) <em class="brace">{</em>
<a id="L1133" name="L1133"></a>1133 
<a id="L1134" name="L1134"></a>1134                 <strong class="reserved">if</strong> (keystroke == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1135" name="L1135"></a>1135                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("cannot set null focus traversal key");
<a id="L1136" name="L1136"></a>1136                 <em class="brace">}</em>
<a id="L1137" name="L1137"></a>1137 
<a id="L1138" name="L1138"></a>1138                 <strong class="reserved">if</strong> (keystroke.<a href="../D/19920.html" title="Multiple defined in 2 places.">getKeyChar</a>() != <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.CHAR_UNDEFINED) <em class="brace">{</em>
<a id="L1139" name="L1139"></a>1139                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("focus traversal keys cannot map to KEY_TYPED events");
<a id="L1140" name="L1140"></a>1140                 <em class="brace">}</em>
<a id="L1141" name="L1141"></a>1141 
<a id="L1142" name="L1142"></a>1142                 <em class="comment">// Check to see if key already maps to another traversal</em>
<a id="L1143" name="L1143"></a>1143                 <em class="comment">// operation</em>
<a id="L1144" name="L1144"></a>1144                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; TRAVERSAL_KEY_LENGTH; i++) <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145                     <strong class="reserved">if</strong> (i == <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146                         <strong class="reserved">continue</strong>;
<a id="L1147" name="L1147"></a>1147                     <em class="brace">}</em>
<a id="L1148" name="L1148"></a>1148 
<a id="L1149" name="L1149"></a>1149                     <strong class="reserved">if</strong> (defaultFocusTraversalKeys[i].<a href="../D/13313.html" title="Multiple defined in 245 places.">contains</a>(keystroke)) <em class="brace">{</em>
<a id="L1150" name="L1150"></a>1150                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("focus traversal keys must be unique for a Component");
<a id="L1151" name="L1151"></a>1151                     <em class="brace">}</em>
<a id="L1152" name="L1152"></a>1152                 <em class="brace">}</em>
<a id="L1153" name="L1153"></a>1153             <em class="brace">}</em>
<a id="L1154" name="L1154"></a>1154 
<a id="L1155" name="L1155"></a>1155             oldKeys = defaultFocusTraversalKeys[<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>];
<a id="L1156" name="L1156"></a>1156             defaultFocusTraversalKeys[<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>] =
<a id="L1157" name="L1157"></a>1157                 <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L1117" title="Defined at 1117 in src/java/util/Collections.java.">unmodifiableSet</a>(<strong class="reserved">new</strong> <a href="../S/1136.html#L89" title="Defined at 89 in src/java/util/HashSet.java.">HashSet</a>&lt;&gt;(keystrokes));
<a id="L1158" name="L1158"></a>1158         <em class="brace">}</em>
<a id="L1159" name="L1159"></a>1159 
<a id="L1160" name="L1160"></a>1160         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>(defaultFocusTraversalKeyPropertyNames[<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>],
<a id="L1161" name="L1161"></a>1161                            oldKeys, keystrokes);
<a id="L1162" name="L1162"></a>1162     <em class="brace">}</em>
<a id="L1163" name="L1163"></a>1163 
<div class="comment">
      Returns a Set of default focus traversal keys for a given traversal
      operation. This traversal key Set will be in effect on all Windows that
      have no such Set of their own explicitly defined. This Set will also be
      inherited, recursively, by any child Component of those Windows that has
      no such Set of its own explicitly defined. (See
      <code>setDefaultFocusTraversalKeys</code> for a full description of each
      operation.)
      @param id one of KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,
             KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS,
             KeyboardFocusManager.UP_CYCLE_TRAVERSAL_KEYS, or
             KeyboardFocusManager.DOWN_CYCLE_TRAVERSAL_KEYS
      @return the <code>Set</code> of <code>AWTKeyStroke</code>s
              for the specified operation; the <code>Set</code>
              will be unmodifiable, and may be empty; <code>null</code>
              will never be returned
      @see #setDefaultFocusTraversalKeys
      @see Component#setFocusTraversalKeys
      @see Component#getFocusTraversalKeys
      @throws IllegalArgumentException if id is not one of
              KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,
              KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS,
              KeyboardFocusManager.UP_CYCLE_TRAVERSAL_KEYS, or
              KeyboardFocusManager.DOWN_CYCLE_TRAVERSAL_KEYS</div>
<a id="L1190" name="L1190"></a>1190     <strong class="reserved">public</strong> <a href="../S/1160.html#L85" title="Defined at 85 in src/java/util/Set.java.">Set</a>&lt;<a href="../S/2439.html#L67" title="Defined at 67 in src/java/awt/AWTKeyStroke.java.">AWTKeyStroke</a>&gt; <a href="../R/16028.html" title="Multiple referred from 4 places.">getDefaultFocusTraversalKeys</a>(<strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L1191" name="L1191"></a>1191         <strong class="reserved">if</strong> (<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> &lt; 0 || <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> &gt;= TRAVERSAL_KEY_LENGTH) <em class="brace">{</em>
<a id="L1192" name="L1192"></a>1192             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("invalid focus traversal key identifier");
<a id="L1193" name="L1193"></a>1193         <em class="brace">}</em>
<a id="L1194" name="L1194"></a>1194 
<a id="L1195" name="L1195"></a>1195         <em class="comment">// Okay to return Set directly because it is an unmodifiable view</em>
<a id="L1196" name="L1196"></a>1196         <strong class="reserved">return</strong> defaultFocusTraversalKeys[<a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>];
<a id="L1197" name="L1197"></a>1197     <em class="brace">}</em>
<a id="L1198" name="L1198"></a>1198 
<div class="comment">
      Returns the current focus cycle root, if the current focus cycle root is
      in the same context as the calling thread. If the focus owner is itself
      a focus cycle root, then it may be ambiguous as to which Components
      represent the next and previous Components to focus during normal focus
      traversal. In that case, the current focus cycle root is used to
      differentiate among the possibilities.
      <p>
      This method is intended to be used only by KeyboardFocusManagers and
      focus implementations. It is not for general client use.
      @return the current focus cycle root, or null if the current focus cycle
              root is not a member of the calling thread's context
      @see #getGlobalCurrentFocusCycleRoot
      @see #setGlobalCurrentFocusCycleRoot</p></div>
<a id="L1215" name="L1215"></a>1215     <strong class="reserved">public</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> <a href="../R/15888.html" title="Multiple referred from 7 places.">getCurrentFocusCycleRoot</a>() <em class="brace">{</em>
<a id="L1216" name="L1216"></a>1216         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1217" name="L1217"></a>1217             <strong class="reserved">if</strong> (currentFocusCycleRoot == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1219" name="L1219"></a>1219             <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220 
<a id="L1221" name="L1221"></a>1221             <strong class="reserved">return</strong> (currentFocusCycleRoot.appContext ==
<a id="L1222" name="L1222"></a>1222                     AppContext.getAppContext())
<a id="L1223" name="L1223"></a>1223                 ? currentFocusCycleRoot
<a id="L1224" name="L1224"></a>1224                 : <strong class="reserved">null</strong>;
<a id="L1225" name="L1225"></a>1225         <em class="brace">}</em>
<a id="L1226" name="L1226"></a>1226     <em class="brace">}</em>
<a id="L1227" name="L1227"></a>1227 
<div class="comment">
      Returns the current focus cycle root, even if the calling thread is in a
      different context than the current focus cycle root. If the focus owner
      is itself a focus cycle root, then it may be ambiguous as to which
      Components represent the next and previous Components to focus during
      normal focus traversal. In that case, the current focus cycle root is
      used to differentiate among the possibilities.
      @return the current focus cycle root, or null if the current focus cycle
              root is not a member of the calling thread's context
      @see #getCurrentFocusCycleRoot
      @see #setGlobalCurrentFocusCycleRoot
      @throws SecurityException if this KeyboardFocusManager is not the
              current KeyboardFocusManager for the calling thread's context
              and if the calling thread does not have "replaceKeyboardFocusManager"
              permission</div>
<a id="L1245" name="L1245"></a>1245     <strong class="reserved">protected</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> getGlobalCurrentFocusCycleRoot()
<a id="L1246" name="L1246"></a>1246         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L1247" name="L1247"></a>1247     <em class="brace">{</em>
<a id="L1248" name="L1248"></a>1248         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1249" name="L1249"></a>1249             <a href="../S/2110.html#L3143" title="Defined at 3143 in src/java/awt/KeyboardFocusManager.java.">checkKFMSecurity</a>();
<a id="L1250" name="L1250"></a>1250             <strong class="reserved">return</strong> currentFocusCycleRoot;
<a id="L1251" name="L1251"></a>1251         <em class="brace">}</em>
<a id="L1252" name="L1252"></a>1252     <em class="brace">}</em>
<a id="L1253" name="L1253"></a>1253 
<div class="comment">
      Sets the current focus cycle root. If the focus owner is itself a focus
      cycle root, then it may be ambiguous as to which Components represent
      the next and previous Components to focus during normal focus traversal.
      In that case, the current focus cycle root is used to differentiate
      among the possibilities.
      <p>
      If a SecurityManager is installed, the calling thread must be granted
      the "replaceKeyboardFocusManager" AWTPermission. If this permission is
      not granted, this method will throw a SecurityException, and the current
      focus cycle root will not be changed.
      </p><p>
      This method is intended to be used only by KeyboardFocusManagers and
      focus implementations. It is not for general client use.
      @param newFocusCycleRoot the new focus cycle root
      @see #getCurrentFocusCycleRoot
      @see #getGlobalCurrentFocusCycleRoot
      @throws SecurityException if the calling thread does not have
              "replaceKeyboardFocusManager" permission
      @beaninfo
            bound: true</p></div>
<a id="L1277" name="L1277"></a>1277     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27470.html" title="Multiple referred from 2 places.">setGlobalCurrentFocusCycleRoot</a>(<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> newFocusCycleRoot)
<a id="L1278" name="L1278"></a>1278         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L1279" name="L1279"></a>1279     <em class="brace">{</em>
<a id="L1280" name="L1280"></a>1280         <a href="../S/2110.html#L3116" title="Defined at 3116 in src/java/awt/KeyboardFocusManager.java.">checkReplaceKFMPermission</a>();
<a id="L1281" name="L1281"></a>1281 
<a id="L1282" name="L1282"></a>1282         <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> oldFocusCycleRoot;
<a id="L1283" name="L1283"></a>1283 
<a id="L1284" name="L1284"></a>1284         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1285" name="L1285"></a>1285             oldFocusCycleRoot  = <a href="../D/18104.html" title="Multiple defined in 2 places.">getCurrentFocusCycleRoot</a>();
<a id="L1286" name="L1286"></a>1286             currentFocusCycleRoot = newFocusCycleRoot;
<a id="L1287" name="L1287"></a>1287         <em class="brace">}</em>
<a id="L1288" name="L1288"></a>1288 
<a id="L1289" name="L1289"></a>1289         <a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>("currentFocusCycleRoot", oldFocusCycleRoot,
<a id="L1290" name="L1290"></a>1290                            newFocusCycleRoot);
<a id="L1291" name="L1291"></a>1291     <em class="brace">}</em>
<a id="L1292" name="L1292"></a>1292 
<a id="L1293" name="L1293"></a>1293     <strong class="reserved">void</strong> <a href="../R/27471.html" title="Multiple referred from 6 places.">setGlobalCurrentFocusCycleRootPriv</a>(<strong class="reserved">final</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> newFocusCycleRoot) <em class="brace">{</em>
<a id="L1294" name="L1294"></a>1294         <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(<strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;() <em class="brace">{</em>
<a id="L1295" name="L1295"></a>1295             <strong class="reserved">public</strong> <a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L1296" name="L1296"></a>1296                 <a href="../D/32802.html" title="Multiple defined in 2 places.">setGlobalCurrentFocusCycleRoot</a>(newFocusCycleRoot);
<a id="L1297" name="L1297"></a>1297                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1298" name="L1298"></a>1298             <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299         <em class="brace">}</em>);
<a id="L1300" name="L1300"></a>1300     <em class="brace">}</em>
<a id="L1301" name="L1301"></a>1301 
<div class="comment">
      Adds a PropertyChangeListener to the listener list. The listener is
      registered for all bound properties of this class, including the
      following:
      <ul><li>whether the KeyboardFocusManager is currently managing focus
             for this application or applet's browser context
             ("managingFocus")</li><li>the focus owner ("focusOwner")</li><li>the permanent focus owner ("permanentFocusOwner")</li><li>the focused Window ("focusedWindow")</li><li>the active Window ("activeWindow")</li><li>the default focus traversal policy
             ("defaultFocusTraversalPolicy")</li><li>the Set of default FORWARD_TRAVERSAL_KEYS
             ("forwardDefaultFocusTraversalKeys")</li><li>the Set of default BACKWARD_TRAVERSAL_KEYS
             ("backwardDefaultFocusTraversalKeys")</li><li>the Set of default UP_CYCLE_TRAVERSAL_KEYS
             ("upCycleDefaultFocusTraversalKeys")</li><li>the Set of default DOWN_CYCLE_TRAVERSAL_KEYS
             ("downCycleDefaultFocusTraversalKeys")</li><li>the current focus cycle root ("currentFocusCycleRoot")</li>
      </ul>
      If listener is null, no exception is thrown and no action is performed.
      @param listener the PropertyChangeListener to be added
      @see #removePropertyChangeListener
      @see #getPropertyChangeListeners
      @see #addPropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)</div>
<a id="L1333" name="L1333"></a>1333     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9914.html" title="Multiple referred from 169 places.">addPropertyChangeListener</a>(<a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener) <em class="brace">{</em>
<a id="L1334" name="L1334"></a>1334         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1335" name="L1335"></a>1335             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1336" name="L1336"></a>1336                 <strong class="reserved">if</strong> (changeSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1337" name="L1337"></a>1337                     changeSupport = <strong class="reserved">new</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1338" name="L1338"></a>1338                 <em class="brace">}</em>
<a id="L1339" name="L1339"></a>1339                 changeSupport.<a href="../D/11015.html" title="Multiple defined in 48 places.">addPropertyChangeListener</a>(listener);
<a id="L1340" name="L1340"></a>1340             <em class="brace">}</em>
<a id="L1341" name="L1341"></a>1341         <em class="brace">}</em>
<a id="L1342" name="L1342"></a>1342     <em class="brace">}</em>
<a id="L1343" name="L1343"></a>1343 
<div class="comment">
      Removes a PropertyChangeListener from the listener list. This method
      should be used to remove the PropertyChangeListeners that were
      registered for all bound properties of this class.
      <p>
      If listener is null, no exception is thrown and no action is performed.
      @param listener the PropertyChangeListener to be removed
      @see #addPropertyChangeListener
      @see #getPropertyChangeListeners
      @see #removePropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)</p></div>
<a id="L1356" name="L1356"></a>1356     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26051.html" title="Multiple referred from 157 places.">removePropertyChangeListener</a>(<a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener) <em class="brace">{</em>
<a id="L1357" name="L1357"></a>1357         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1358" name="L1358"></a>1358             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1359" name="L1359"></a>1359                 <strong class="reserved">if</strong> (changeSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1360" name="L1360"></a>1360                     changeSupport.<a href="../D/30926.html" title="Multiple defined in 44 places.">removePropertyChangeListener</a>(listener);
<a id="L1361" name="L1361"></a>1361                 <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362             <em class="brace">}</em>
<a id="L1363" name="L1363"></a>1363         <em class="brace">}</em>
<a id="L1364" name="L1364"></a>1364     <em class="brace">}</em>
<a id="L1365" name="L1365"></a>1365 
<div class="comment">
      Returns an array of all the property change listeners
      registered on this keyboard focus manager.
      @return all of this keyboard focus manager's
              <code>PropertyChangeListener</code>s
              or an empty array if no property change
              listeners are currently registered
      @see #addPropertyChangeListener
      @see #removePropertyChangeListener
      @see #getPropertyChangeListeners(java.lang.String)
      @since 1.4</div>
<a id="L1380" name="L1380"></a>1380     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a>[] <a href="../R/18511.html" title="Multiple referred from 20 places.">getPropertyChangeListeners</a>() <em class="brace">{</em>
<a id="L1381" name="L1381"></a>1381         <strong class="reserved">if</strong> (changeSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382             changeSupport = <strong class="reserved">new</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1383" name="L1383"></a>1383         <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384         <strong class="reserved">return</strong> changeSupport.<a href="../D/21724.html" title="Multiple defined in 19 places.">getPropertyChangeListeners</a>();
<a id="L1385" name="L1385"></a>1385     <em class="brace">}</em>
<a id="L1386" name="L1386"></a>1386 
<div class="comment">
      Adds a PropertyChangeListener to the listener list for a specific
      property. The specified property may be user-defined, or one of the
      following:
      <ul><li>whether the KeyboardFocusManager is currently managing focus
             for this application or applet's browser context
             ("managingFocus")</li><li>the focus owner ("focusOwner")</li><li>the permanent focus owner ("permanentFocusOwner")</li><li>the focused Window ("focusedWindow")</li><li>the active Window ("activeWindow")</li><li>the default focus traversal policy
             ("defaultFocusTraversalPolicy")</li><li>the Set of default FORWARD_TRAVERSAL_KEYS
             ("forwardDefaultFocusTraversalKeys")</li><li>the Set of default BACKWARD_TRAVERSAL_KEYS
             ("backwardDefaultFocusTraversalKeys")</li><li>the Set of default UP_CYCLE_TRAVERSAL_KEYS
             ("upCycleDefaultFocusTraversalKeys")</li><li>the Set of default DOWN_CYCLE_TRAVERSAL_KEYS
             ("downCycleDefaultFocusTraversalKeys")</li><li>the current focus cycle root ("currentFocusCycleRoot")</li>
      </ul>
      If listener is null, no exception is thrown and no action is performed.
      @param propertyName one of the property names listed above
      @param listener the PropertyChangeListener to be added
      @see #addPropertyChangeListener(java.beans.PropertyChangeListener)
      @see #removePropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)
      @see #getPropertyChangeListeners(java.lang.String)</div>
<a id="L1419" name="L1419"></a>1419     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9914.html" title="Multiple referred from 169 places.">addPropertyChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1420" name="L1420"></a>1420                                           <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener) <em class="brace">{</em>
<a id="L1421" name="L1421"></a>1421         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1422" name="L1422"></a>1422             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423                 <strong class="reserved">if</strong> (changeSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1424" name="L1424"></a>1424                     changeSupport = <strong class="reserved">new</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1425" name="L1425"></a>1425                 <em class="brace">}</em>
<a id="L1426" name="L1426"></a>1426                 changeSupport.<a href="../D/11015.html" title="Multiple defined in 48 places.">addPropertyChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1427" name="L1427"></a>1427                                                         listener);
<a id="L1428" name="L1428"></a>1428             <em class="brace">}</em>
<a id="L1429" name="L1429"></a>1429         <em class="brace">}</em>
<a id="L1430" name="L1430"></a>1430     <em class="brace">}</em>
<a id="L1431" name="L1431"></a>1431 
<div class="comment">
      Removes a PropertyChangeListener from the listener list for a specific
      property. This method should be used to remove PropertyChangeListeners
      that were registered for a specific bound property.
      <p>
      If listener is null, no exception is thrown and no action is performed.
      @param propertyName a valid property name
      @param listener the PropertyChangeListener to be removed
      @see #addPropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)
      @see #getPropertyChangeListeners(java.lang.String)
      @see #removePropertyChangeListener(java.beans.PropertyChangeListener)</p></div>
<a id="L1445" name="L1445"></a>1445     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26051.html" title="Multiple referred from 157 places.">removePropertyChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1446" name="L1446"></a>1446                                              <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a> listener) <em class="brace">{</em>
<a id="L1447" name="L1447"></a>1447         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1448" name="L1448"></a>1448             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1449" name="L1449"></a>1449                 <strong class="reserved">if</strong> (changeSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1450" name="L1450"></a>1450                     changeSupport.<a href="../D/30926.html" title="Multiple defined in 44 places.">removePropertyChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1451" name="L1451"></a>1451                                                                listener);
<a id="L1452" name="L1452"></a>1452                 <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453             <em class="brace">}</em>
<a id="L1454" name="L1454"></a>1454         <em class="brace">}</em>
<a id="L1455" name="L1455"></a>1455     <em class="brace">}</em>
<a id="L1456" name="L1456"></a>1456 
<div class="comment">
      Returns an array of all the <code>PropertyChangeListener</code>s
      associated with the named property.
      @return all of the <code>PropertyChangeListener</code>s associated with
              the named property or an empty array if no such listeners have
              been added.
      @see #addPropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)
      @see #removePropertyChangeListener(java.lang.String,java.beans.PropertyChangeListener)
      @since 1.4</div>
<a id="L1469" name="L1469"></a>1469     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1801.html#L34" title="Defined at 34 in src/java/beans/PropertyChangeListener.java.">PropertyChangeListener</a>[] <a href="../R/18511.html" title="Multiple referred from 20 places.">getPropertyChangeListeners</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>) <em class="brace">{</em>
<a id="L1470" name="L1470"></a>1470         <strong class="reserved">if</strong> (changeSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1471" name="L1471"></a>1471             changeSupport = <strong class="reserved">new</strong> <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1472" name="L1472"></a>1472         <em class="brace">}</em>
<a id="L1473" name="L1473"></a>1473         <strong class="reserved">return</strong> changeSupport.<a href="../D/21724.html" title="Multiple defined in 19 places.">getPropertyChangeListeners</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>);
<a id="L1474" name="L1474"></a>1474     <em class="brace">}</em>
<a id="L1475" name="L1475"></a>1475 
<div class="comment">
      Fires a PropertyChangeEvent in response to a change in a bound property.
      The event will be delivered to all registered PropertyChangeListeners.
      No event will be delivered if oldValue and newValue are the same.
      @param propertyName the name of the property that has changed
      @param oldValue the property's previous value
      @param newValue the property's new value</div>
<a id="L1485" name="L1485"></a>1485     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14596.html" title="Multiple referred from 503 places.">firePropertyChange</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue,
<a id="L1486" name="L1486"></a>1486                                       <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue)
<a id="L1487" name="L1487"></a>1487     <em class="brace">{</em>
<a id="L1488" name="L1488"></a>1488         <strong class="reserved">if</strong> (oldValue == newValue) <em class="brace">{</em>
<a id="L1489" name="L1489"></a>1489             <strong class="reserved">return</strong>;
<a id="L1490" name="L1490"></a>1490         <em class="brace">}</em>
<a id="L1491" name="L1491"></a>1491         <a href="../S/1808.html#L81" title="Defined at 81 in src/java/beans/PropertyChangeSupport.java.">PropertyChangeSupport</a> changeSupport = <strong class="reserved">this</strong>.changeSupport;
<a id="L1492" name="L1492"></a>1492         <strong class="reserved">if</strong> (changeSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1493" name="L1493"></a>1493             changeSupport.<a href="../D/16359.html" title="Multiple defined in 54 places.">firePropertyChange</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, oldValue, newValue);
<a id="L1494" name="L1494"></a>1494         <em class="brace">}</em>
<a id="L1495" name="L1495"></a>1495     <em class="brace">}</em>
<a id="L1496" name="L1496"></a>1496 
<div class="comment">
      Adds a VetoableChangeListener to the listener list. The listener is
      registered for all vetoable properties of this class, including the
      following:
      <ul><li>the focus owner ("focusOwner")</li><li>the permanent focus owner ("permanentFocusOwner")</li><li>the focused Window ("focusedWindow")</li><li>the active Window ("activeWindow")</li>
      </ul>
      If listener is null, no exception is thrown and no action is performed.
      @param listener the VetoableChangeListener to be added
      @see #removeVetoableChangeListener
      @see #getVetoableChangeListeners
      @see #addVetoableChangeListener(java.lang.String,java.beans.VetoableChangeListener)</div>
<a id="L1514" name="L1514"></a>1514     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10035.html" title="Multiple referred from 10 places.">addVetoableChangeListener</a>(<a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a> listener) <em class="brace">{</em>
<a id="L1515" name="L1515"></a>1515         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1516" name="L1516"></a>1516             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1517" name="L1517"></a>1517                 <strong class="reserved">if</strong> (vetoableSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1518" name="L1518"></a>1518                     vetoableSupport =
<a id="L1519" name="L1519"></a>1519                         <strong class="reserved">new</strong> <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1520" name="L1520"></a>1520                 <em class="brace">}</em>
<a id="L1521" name="L1521"></a>1521                 vetoableSupport.<a href="../D/11166.html" title="Multiple defined in 9 places.">addVetoableChangeListener</a>(listener);
<a id="L1522" name="L1522"></a>1522             <em class="brace">}</em>
<a id="L1523" name="L1523"></a>1523         <em class="brace">}</em>
<a id="L1524" name="L1524"></a>1524     <em class="brace">}</em>
<a id="L1525" name="L1525"></a>1525 
<div class="comment">
      Removes a VetoableChangeListener from the listener list. This method
      should be used to remove the VetoableChangeListeners that were
      registered for all vetoable properties of this class.
      <p>
      If listener is null, no exception is thrown and no action is performed.
      @param listener the VetoableChangeListener to be removed
      @see #addVetoableChangeListener
      @see #getVetoableChangeListeners
      @see #removeVetoableChangeListener(java.lang.String,java.beans.VetoableChangeListener)</p></div>
<a id="L1538" name="L1538"></a>1538     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26099.html" title="Multiple referred from 8 places.">removeVetoableChangeListener</a>(<a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a> listener) <em class="brace">{</em>
<a id="L1539" name="L1539"></a>1539         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1540" name="L1540"></a>1540             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1541" name="L1541"></a>1541                 <strong class="reserved">if</strong> (vetoableSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1542" name="L1542"></a>1542                     vetoableSupport.<a href="../D/30991.html" title="Multiple defined in 9 places.">removeVetoableChangeListener</a>(listener);
<a id="L1543" name="L1543"></a>1543                 <em class="brace">}</em>
<a id="L1544" name="L1544"></a>1544             <em class="brace">}</em>
<a id="L1545" name="L1545"></a>1545         <em class="brace">}</em>
<a id="L1546" name="L1546"></a>1546     <em class="brace">}</em>
<a id="L1547" name="L1547"></a>1547 
<div class="comment">
      Returns an array of all the vetoable change listeners
      registered on this keyboard focus manager.
      @return all of this keyboard focus manager's
              <code>VetoableChangeListener</code>s
              or an empty array if no vetoable change
              listeners are currently registered
      @see #addVetoableChangeListener
      @see #removeVetoableChangeListener
      @see #getVetoableChangeListeners(java.lang.String)
      @since 1.4</div>
<a id="L1562" name="L1562"></a>1562     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a>[] <a href="../R/19800.html" title="Multiple referred from 5 places.">getVetoableChangeListeners</a>() <em class="brace">{</em>
<a id="L1563" name="L1563"></a>1563         <strong class="reserved">if</strong> (vetoableSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1564" name="L1564"></a>1564             vetoableSupport = <strong class="reserved">new</strong> <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1565" name="L1565"></a>1565         <em class="brace">}</em>
<a id="L1566" name="L1566"></a>1566         <strong class="reserved">return</strong> vetoableSupport.<a href="../D/23595.html" title="Multiple defined in 5 places.">getVetoableChangeListeners</a>();
<a id="L1567" name="L1567"></a>1567     <em class="brace">}</em>
<a id="L1568" name="L1568"></a>1568 
<div class="comment">
      Adds a VetoableChangeListener to the listener list for a specific
      property. The specified property may be user-defined, or one of the
      following:
      <ul><li>the focus owner ("focusOwner")</li><li>the permanent focus owner ("permanentFocusOwner")</li><li>the focused Window ("focusedWindow")</li><li>the active Window ("activeWindow")</li>
      </ul>
      If listener is null, no exception is thrown and no action is performed.
      @param propertyName one of the property names listed above
      @param listener the VetoableChangeListener to be added
      @see #addVetoableChangeListener(java.beans.VetoableChangeListener)
      @see #removeVetoableChangeListener
      @see #getVetoableChangeListeners</div>
<a id="L1587" name="L1587"></a>1587     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10035.html" title="Multiple referred from 10 places.">addVetoableChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1588" name="L1588"></a>1588                                           <a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a> listener) <em class="brace">{</em>
<a id="L1589" name="L1589"></a>1589         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1590" name="L1590"></a>1590             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591                 <strong class="reserved">if</strong> (vetoableSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1592" name="L1592"></a>1592                     vetoableSupport =
<a id="L1593" name="L1593"></a>1593                         <strong class="reserved">new</strong> <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1594" name="L1594"></a>1594                 <em class="brace">}</em>
<a id="L1595" name="L1595"></a>1595                 vetoableSupport.<a href="../D/11166.html" title="Multiple defined in 9 places.">addVetoableChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1596" name="L1596"></a>1596                                                           listener);
<a id="L1597" name="L1597"></a>1597             <em class="brace">}</em>
<a id="L1598" name="L1598"></a>1598         <em class="brace">}</em>
<a id="L1599" name="L1599"></a>1599     <em class="brace">}</em>
<a id="L1600" name="L1600"></a>1600 
<div class="comment">
      Removes a VetoableChangeListener from the listener list for a specific
      property. This method should be used to remove VetoableChangeListeners
      that were registered for a specific bound property.
      <p>
      If listener is null, no exception is thrown and no action is performed.
      @param propertyName a valid property name
      @param listener the VetoableChangeListener to be removed
      @see #addVetoableChangeListener
      @see #getVetoableChangeListeners
      @see #removeVetoableChangeListener(java.beans.VetoableChangeListener)</p></div>
<a id="L1614" name="L1614"></a>1614     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26099.html" title="Multiple referred from 8 places.">removeVetoableChangeListener</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1615" name="L1615"></a>1615                                              <a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a> listener) <em class="brace">{</em>
<a id="L1616" name="L1616"></a>1616         <strong class="reserved">if</strong> (listener != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1617" name="L1617"></a>1617             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1618" name="L1618"></a>1618                 <strong class="reserved">if</strong> (vetoableSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1619" name="L1619"></a>1619                     vetoableSupport.<a href="../D/30991.html" title="Multiple defined in 9 places.">removeVetoableChangeListener</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>,
<a id="L1620" name="L1620"></a>1620                                                                  listener);
<a id="L1621" name="L1621"></a>1621                 <em class="brace">}</em>
<a id="L1622" name="L1622"></a>1622             <em class="brace">}</em>
<a id="L1623" name="L1623"></a>1623         <em class="brace">}</em>
<a id="L1624" name="L1624"></a>1624     <em class="brace">}</em>
<a id="L1625" name="L1625"></a>1625 
<div class="comment">
      Returns an array of all the <code>VetoableChangeListener</code>s
      associated with the named property.
      @return all of the <code>VetoableChangeListener</code>s associated with
              the named property or an empty array if no such listeners have
              been added.
      @see #addVetoableChangeListener(java.lang.String,java.beans.VetoableChangeListener)
      @see #removeVetoableChangeListener(java.lang.String,java.beans.VetoableChangeListener)
      @see #getVetoableChangeListeners
      @since 1.4</div>
<a id="L1639" name="L1639"></a>1639     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/1803.html#L33" title="Defined at 33 in src/java/beans/VetoableChangeListener.java.">VetoableChangeListener</a>[] <a href="../R/19800.html" title="Multiple referred from 5 places.">getVetoableChangeListeners</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>) <em class="brace">{</em>
<a id="L1640" name="L1640"></a>1640         <strong class="reserved">if</strong> (vetoableSupport == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1641" name="L1641"></a>1641             vetoableSupport = <strong class="reserved">new</strong> <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a>(<strong class="reserved">this</strong>);
<a id="L1642" name="L1642"></a>1642         <em class="brace">}</em>
<a id="L1643" name="L1643"></a>1643         <strong class="reserved">return</strong> vetoableSupport.<a href="../D/23595.html" title="Multiple defined in 5 places.">getVetoableChangeListeners</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>);
<a id="L1644" name="L1644"></a>1644     <em class="brace">}</em>
<a id="L1645" name="L1645"></a>1645 
<div class="comment">
      Fires a PropertyChangeEvent in response to a change in a vetoable
      property. The event will be delivered to all registered
      VetoableChangeListeners. If a VetoableChangeListener throws a
      PropertyVetoException, a new event is fired reverting all
      VetoableChangeListeners to the old value and the exception is then
      rethrown. No event will be delivered if oldValue and newValue are the
      same.
      @param propertyName the name of the property that has changed
      @param oldValue the property's previous value
      @param newValue the property's new value
      @throws java.beans.PropertyVetoException if a
              <code>VetoableChangeListener</code> threw
              <code>PropertyVetoException</code></div>
<a id="L1662" name="L1662"></a>1662     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14626.html" title="Multiple referred from 17 places.">fireVetoableChange</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> oldValue,
<a id="L1663" name="L1663"></a>1663                                       <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> newValue)
<a id="L1664" name="L1664"></a>1664         <strong class="reserved">throws</strong> <a href="../S/1821.html#L35" title="Defined at 35 in src/java/beans/PropertyVetoException.java.">PropertyVetoException</a>
<a id="L1665" name="L1665"></a>1665     <em class="brace">{</em>
<a id="L1666" name="L1666"></a>1666         <strong class="reserved">if</strong> (oldValue == newValue) <em class="brace">{</em>
<a id="L1667" name="L1667"></a>1667             <strong class="reserved">return</strong>;
<a id="L1668" name="L1668"></a>1668         <em class="brace">}</em>
<a id="L1669" name="L1669"></a>1669         <a href="../S/1793.html#L81" title="Defined at 81 in src/java/beans/VetoableChangeSupport.java.">VetoableChangeSupport</a> vetoableSupport =
<a id="L1670" name="L1670"></a>1670             <strong class="reserved">this</strong>.vetoableSupport;
<a id="L1671" name="L1671"></a>1671         <strong class="reserved">if</strong> (vetoableSupport != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1672" name="L1672"></a>1672             vetoableSupport.<a href="../D/16391.html" title="Multiple defined in 7 places.">fireVetoableChange</a>(<a href="../S/6298.html#L1524" title="Defined at 1524 in src/com/sun/jmx/mbeanserver/DefaultMXBeanMappingFactory.java.">propertyName</a>, oldValue,
<a id="L1673" name="L1673"></a>1673                                                newValue);
<a id="L1674" name="L1674"></a>1674         <em class="brace">}</em>
<a id="L1675" name="L1675"></a>1675     <em class="brace">}</em>
<a id="L1676" name="L1676"></a>1676 
<div class="comment">
      Adds a KeyEventDispatcher to this KeyboardFocusManager's dispatcher
      chain. This KeyboardFocusManager will request that each
      KeyEventDispatcher dispatch KeyEvents generated by the user before
      finally dispatching the KeyEvent itself. KeyEventDispatchers will be
      notified in the order in which they were added. Notifications will halt
      as soon as one KeyEventDispatcher returns <code>true</code> from its
      <code>dispatchKeyEvent</code> method. There is no limit to the total
      number of KeyEventDispatchers which can be added, nor to the number of
      times which a particular KeyEventDispatcher instance can be added.
      <p>
      If a null dispatcher is specified, no action is taken and no exception
      is thrown.
      </p><p>
      In a multithreaded application, <a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a> behaves
      the same as other AWT listeners.  See
      <a href="doc-files/AWTThreadIssues.html#ListenersThreads">AWT Threading Issues</a> for more details.
      @param dispatcher the KeyEventDispatcher to add to the dispatcher chain
      @see #removeKeyEventDispatcher</p></div>
<a id="L1699" name="L1699"></a>1699     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2737.html#L145" title="Referred from 145 in src/javax/swing/DelegatingDefaultFocusManager.java.">addKeyEventDispatcher</a>(<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a> dispatcher) <em class="brace">{</em>
<a id="L1700" name="L1700"></a>1700         <strong class="reserved">if</strong> (dispatcher != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1701" name="L1701"></a>1701             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1702" name="L1702"></a>1702                 <strong class="reserved">if</strong> (keyEventDispatchers == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1703" name="L1703"></a>1703                     keyEventDispatchers = <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;&gt;();
<a id="L1704" name="L1704"></a>1704                 <em class="brace">}</em>
<a id="L1705" name="L1705"></a>1705                 keyEventDispatchers.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(dispatcher);
<a id="L1706" name="L1706"></a>1706             <em class="brace">}</em>
<a id="L1707" name="L1707"></a>1707         <em class="brace">}</em>
<a id="L1708" name="L1708"></a>1708     <em class="brace">}</em>
<a id="L1709" name="L1709"></a>1709 
<div class="comment">
      Removes a KeyEventDispatcher which was previously added to this
      KeyboardFocusManager's dispatcher chain. This KeyboardFocusManager
      cannot itself be removed, unless it was explicitly re-registered via a
      call to <code>addKeyEventDispatcher</code>.
      <p>
      If a null dispatcher is specified, if the specified dispatcher is not
      in the dispatcher chain, or if this KeyboardFocusManager is specified
      without having been explicitly re-registered, no action is taken and no
      exception is thrown.
      </p><p>
      In a multithreaded application, <a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a> behaves
      the same as other AWT listeners.  See
      <a href="doc-files/AWTThreadIssues.html#ListenersThreads">AWT Threading Issues</a> for more details.
      @param dispatcher the KeyEventDispatcher to remove from the dispatcher
             chain
      @see #addKeyEventDispatcher</p></div>
<a id="L1730" name="L1730"></a>1730     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/2737.html#L148" title="Referred from 148 in src/javax/swing/DelegatingDefaultFocusManager.java.">removeKeyEventDispatcher</a>(<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a> dispatcher) <em class="brace">{</em>
<a id="L1731" name="L1731"></a>1731         <strong class="reserved">if</strong> (dispatcher != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1732" name="L1732"></a>1732             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1733" name="L1733"></a>1733                 <strong class="reserved">if</strong> (keyEventDispatchers != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1734" name="L1734"></a>1734                     keyEventDispatchers.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(dispatcher);
<a id="L1735" name="L1735"></a>1735                 <em class="brace">}</em>
<a id="L1736" name="L1736"></a>1736             <em class="brace">}</em>
<a id="L1737" name="L1737"></a>1737         <em class="brace">}</em>
<a id="L1738" name="L1738"></a>1738     <em class="brace">}</em>
<a id="L1739" name="L1739"></a>1739 
<div class="comment">
      Returns this KeyboardFocusManager's KeyEventDispatcher chain as a List.
      The List will not include this KeyboardFocusManager unless it was
      explicitly re-registered via a call to
      <code>addKeyEventDispatcher</code>. If no other KeyEventDispatchers are
      registered, implementations are free to return null or a List of length
      0. Client code should not assume one behavior over another, nor should
      it assume that the behavior, once established, will not change.
      @return a possibly null or empty List of KeyEventDispatchers
      @see #addKeyEventDispatcher
      @see #removeKeyEventDispatcher</div>
<a id="L1753" name="L1753"></a>1753     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/2083.html#L55" title="Defined at 55 in src/java/awt/KeyEventDispatcher.java.">KeyEventDispatcher</a>&gt;
<a id="L1754" name="L1754"></a>1754         <a href="../S/2359.html#L1062" title="Referred from 1062 in src/java/awt/DefaultKeyboardFocusManager.java.">getKeyEventDispatchers</a>()
<a id="L1755" name="L1755"></a>1755     <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756         <strong class="reserved">return</strong> (keyEventDispatchers != <strong class="reserved">null</strong>)
<a id="L1757" name="L1757"></a>1757             ? (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>)keyEventDispatchers.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>()
<a id="L1758" name="L1758"></a>1758             : <strong class="reserved">null</strong>;
<a id="L1759" name="L1759"></a>1759     <em class="brace">}</em>
<a id="L1760" name="L1760"></a>1760 
<div class="comment">
      Adds a KeyEventPostProcessor to this KeyboardFocusManager's post-
      processor chain. After a KeyEvent has been dispatched to and handled by
      its target, KeyboardFocusManager will request that each
      KeyEventPostProcessor perform any necessary post-processing as part
      of the KeyEvent's final resolution. KeyEventPostProcessors
      will be notified in the order in which they were added; the current
      KeyboardFocusManager will be notified last. Notifications will halt
      as soon as one KeyEventPostProcessor returns <code>true</code> from its
      <code>postProcessKeyEvent</code> method. There is no limit to the the
      total number of KeyEventPostProcessors that can be added, nor to the
      number of times that a particular KeyEventPostProcessor instance can be
      added.
      <p>
      If a null post-processor is specified, no action is taken and no
      exception is thrown.
      </p><p>
      In a multithreaded application, <a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a> behaves
      the same as other AWT listeners.  See
      <a href="doc-files/AWTThreadIssues.html#ListenersThreads">AWT Threading Issues</a> for more details.
      @param processor the KeyEventPostProcessor to add to the post-processor
             chain
      @see #removeKeyEventPostProcessor</p></div>
<a id="L1787" name="L1787"></a>1787     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9816.html" title="Multiple referred from 2 places.">addKeyEventPostProcessor</a>(<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a> processor) <em class="brace">{</em>
<a id="L1788" name="L1788"></a>1788         <strong class="reserved">if</strong> (processor != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1789" name="L1789"></a>1789             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1790" name="L1790"></a>1790                 <strong class="reserved">if</strong> (keyEventPostProcessors == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1791" name="L1791"></a>1791                     keyEventPostProcessors = <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;&gt;();
<a id="L1792" name="L1792"></a>1792                 <em class="brace">}</em>
<a id="L1793" name="L1793"></a>1793                 keyEventPostProcessors.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(processor);
<a id="L1794" name="L1794"></a>1794             <em class="brace">}</em>
<a id="L1795" name="L1795"></a>1795         <em class="brace">}</em>
<a id="L1796" name="L1796"></a>1796     <em class="brace">}</em>
<a id="L1797" name="L1797"></a>1797 
<a id="L1798" name="L1798"></a>1798 
<div class="comment">
      Removes a previously added KeyEventPostProcessor from this
      KeyboardFocusManager's post-processor chain. This KeyboardFocusManager
      cannot itself be entirely removed from the chain. Only additional
      references added via <code>addKeyEventPostProcessor</code> can be
      removed.
      <p>
      If a null post-processor is specified, if the specified post-processor
      is not in the post-processor chain, or if this KeyboardFocusManager is
      specified without having been explicitly added, no action is taken and
      no exception is thrown.
      </p><p>
      In a multithreaded application, <a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a> behaves
      the same as other AWT listeners.  See
      <a href="doc-files/AWTThreadIssues.html#ListenersThreads">AWT Threading Issues</a> for more details.
      @param processor the KeyEventPostProcessor to remove from the post-
             processor chain
      @see #addKeyEventPostProcessor</p></div>
<a id="L1820" name="L1820"></a>1820     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6763.html#L1941" title="Referred from 1941 in src/com/sun/java/swing/plaf/windows/WindowsLookAndFeel.java.">removeKeyEventPostProcessor</a>(<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a> processor) <em class="brace">{</em>
<a id="L1821" name="L1821"></a>1821         <strong class="reserved">if</strong> (processor != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1822" name="L1822"></a>1822             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1823" name="L1823"></a>1823                 <strong class="reserved">if</strong> (keyEventPostProcessors != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1824" name="L1824"></a>1824                     keyEventPostProcessors.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(processor);
<a id="L1825" name="L1825"></a>1825                 <em class="brace">}</em>
<a id="L1826" name="L1826"></a>1826             <em class="brace">}</em>
<a id="L1827" name="L1827"></a>1827         <em class="brace">}</em>
<a id="L1828" name="L1828"></a>1828     <em class="brace">}</em>
<a id="L1829" name="L1829"></a>1829 
<a id="L1830" name="L1830"></a>1830 
<div class="comment">
      Returns this KeyboardFocusManager's KeyEventPostProcessor chain as a
      List. The List will not include this KeyboardFocusManager unless it was
      explicitly added via a call to <code>addKeyEventPostProcessor</code>. If
      no KeyEventPostProcessors are registered, implementations are free to
      return null or a List of length 0. Client code should not assume one
      behavior over another, nor should it assume that the behavior, once
      established, will not change.
      @return a possibly null or empty List of KeyEventPostProcessors
      @see #addKeyEventPostProcessor
      @see #removeKeyEventPostProcessor</div>
<a id="L1844" name="L1844"></a>1844     <strong class="reserved">protected</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/2306.html#L58" title="Defined at 58 in src/java/awt/KeyEventPostProcessor.java.">KeyEventPostProcessor</a>&gt;
<a id="L1845" name="L1845"></a>1845         <a href="../S/2359.html#L811" title="Referred from 811 in src/java/awt/DefaultKeyboardFocusManager.java.">getKeyEventPostProcessors</a>()
<a id="L1846" name="L1846"></a>1846     <em class="brace">{</em>
<a id="L1847" name="L1847"></a>1847         <strong class="reserved">return</strong> (keyEventPostProcessors != <strong class="reserved">null</strong>)
<a id="L1848" name="L1848"></a>1848             ? (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>)keyEventPostProcessors.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>()
<a id="L1849" name="L1849"></a>1849             : <strong class="reserved">null</strong>;
<a id="L1850" name="L1850"></a>1850     <em class="brace">}</em>
<a id="L1851" name="L1851"></a>1851 
<a id="L1852" name="L1852"></a>1852 
<a id="L1853" name="L1853"></a>1853 
<a id="L1854" name="L1854"></a>1854     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/27783.html" title="Multiple referred from 9 places.">setMostRecentFocusOwner</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>) <em class="brace">{</em>
<a id="L1855" name="L1855"></a>1855         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> window = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L1856" name="L1856"></a>1856         <strong class="reserved">while</strong> (window != <strong class="reserved">null</strong> &amp;&amp; !(window <strong class="reserved">instanceof</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)) <em class="brace">{</em>
<a id="L1857" name="L1857"></a>1857             window = window.<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>;
<a id="L1858" name="L1858"></a>1858         <em class="brace">}</em>
<a id="L1859" name="L1859"></a>1859         <strong class="reserved">if</strong> (window != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1860" name="L1860"></a>1860             <a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>((<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)window, <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>);
<a id="L1861" name="L1861"></a>1861         <em class="brace">}</em>
<a id="L1862" name="L1862"></a>1862     <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863     <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/27783.html" title="Multiple referred from 9 places.">setMostRecentFocusOwner</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> window,
<a id="L1864" name="L1864"></a>1864                                                      <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>) <em class="brace">{</em>
<a id="L1865" name="L1865"></a>1865         <em class="comment">// ATTN: component has a strong reference to window via chain</em>
<a id="L1866" name="L1866"></a>1866         <em class="comment">// of Component.parent fields.  Since WeakHasMap refers to its</em>
<a id="L1867" name="L1867"></a>1867         <em class="comment">// values strongly, we need to break the strong link from the</em>
<a id="L1868" name="L1868"></a>1868         <em class="comment">// value (component) back to its key (window).</em>
<a id="L1869" name="L1869"></a>1869         <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt; weakValue = <strong class="reserved">null</strong>;
<a id="L1870" name="L1870"></a>1870         <strong class="reserved">if</strong> (<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1871" name="L1871"></a>1871             weakValue = <strong class="reserved">new</strong> <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;&gt;(<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>);
<a id="L1872" name="L1872"></a>1872         <em class="brace">}</em>
<a id="L1873" name="L1873"></a>1873         mostRecentFocusOwners.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(window, weakValue);
<a id="L1874" name="L1874"></a>1874     <em class="brace">}</em>
<a id="L1875" name="L1875"></a>1875     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11524.html" title="Multiple referred from 4 places.">clearMostRecentFocusOwner</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L1876" name="L1876"></a>1876         <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> window;
<a id="L1877" name="L1877"></a>1877 
<a id="L1878" name="L1878"></a>1878         <strong class="reserved">if</strong> (comp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1879" name="L1879"></a>1879             <strong class="reserved">return</strong>;
<a id="L1880" name="L1880"></a>1880         <em class="brace">}</em>
<a id="L1881" name="L1881"></a>1881 
<a id="L1882" name="L1882"></a>1882         <strong class="reserved">synchronized</strong> (comp.<a href="../D/23295.html" title="Multiple defined in 3 places.">getTreeLock</a>()) <em class="brace">{</em>
<a id="L1883" name="L1883"></a>1883             window = comp.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L1884" name="L1884"></a>1884             <strong class="reserved">while</strong> (window != <strong class="reserved">null</strong> &amp;&amp; !(window <strong class="reserved">instanceof</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)) <em class="brace">{</em>
<a id="L1885" name="L1885"></a>1885                 window = window.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L1886" name="L1886"></a>1886             <em class="brace">}</em>
<a id="L1887" name="L1887"></a>1887         <em class="brace">}</em>
<a id="L1888" name="L1888"></a>1888 
<a id="L1889" name="L1889"></a>1889         <strong class="reserved">synchronized</strong> (<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<strong class="reserved">class</strong>) <em class="brace">{</em>
<a id="L1890" name="L1890"></a>1890             <strong class="reserved">if</strong> ((window != <strong class="reserved">null</strong>)
<a id="L1891" name="L1891"></a>1891                 &amp;&amp; (<a href="../D/20738.html" title="Multiple defined in 3 places.">getMostRecentFocusOwner</a>((<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)window) == comp))
<a id="L1892" name="L1892"></a>1892             <em class="brace">{</em>
<a id="L1893" name="L1893"></a>1893                 <a href="../D/33292.html" title="Multiple defined in 2 places.">setMostRecentFocusOwner</a>((<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)window, <strong class="reserved">null</strong>);
<a id="L1894" name="L1894"></a>1894             <em class="brace">}</em>
<a id="L1895" name="L1895"></a>1895             <em class="comment">// Also clear temporary lost component stored in Window</em>
<a id="L1896" name="L1896"></a>1896             <strong class="reserved">if</strong> (window != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1897" name="L1897"></a>1897                 <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> realWindow = (<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>)window;
<a id="L1898" name="L1898"></a>1898                 <strong class="reserved">if</strong> (realWindow.<a href="../S/2106.html#L3377" title="Defined at 3377 in src/java/awt/Window.java.">getTemporaryLostComponent</a>() == comp) <em class="brace">{</em>
<a id="L1899" name="L1899"></a>1899                     realWindow.<a href="../S/2106.html#L3380" title="Defined at 3380 in src/java/awt/Window.java.">setTemporaryLostComponent</a>(<strong class="reserved">null</strong>);
<a id="L1900" name="L1900"></a>1900                 <em class="brace">}</em>
<a id="L1901" name="L1901"></a>1901             <em class="brace">}</em>
<a id="L1902" name="L1902"></a>1902         <em class="brace">}</em>
<a id="L1903" name="L1903"></a>1903     <em class="brace">}</em>
<a id="L1904" name="L1904"></a>1904 
<div class="comment">
      Please be careful changing this method! It is called from
      javax.swing.JComponent.runInputVerifier() using reflection.</div>
<a id="L1909" name="L1909"></a>1909     <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/17798.html" title="Multiple referred from 12 places.">getMostRecentFocusOwner</a>(<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> window) <em class="brace">{</em>
<a id="L1910" name="L1910"></a>1910         <a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>&lt;<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>&gt; weakValue =
<a id="L1911" name="L1911"></a>1911             (<a href="../S/1569.html#L48" title="Defined at 48 in src/java/lang/ref/WeakReference.java.">WeakReference</a>)mostRecentFocusOwners.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(window);
<a id="L1912" name="L1912"></a>1912         <strong class="reserved">return</strong> weakValue == <strong class="reserved">null</strong> ? <strong class="reserved">null</strong> : (<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>)weakValue.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>();
<a id="L1913" name="L1913"></a>1913     <em class="brace">}</em>
<a id="L1914" name="L1914"></a>1914 
<div class="comment">
      This method is called by the AWT event dispatcher requesting that the
      current KeyboardFocusManager dispatch the specified event on its behalf.
      It is expected that all KeyboardFocusManagers will dispatch all
      FocusEvents, all WindowEvents related to focus, and all KeyEvents.
      These events should be dispatched based on the KeyboardFocusManager's
      notion of the focus owner and the focused and active Windows, sometimes
      overriding the source of the specified AWTEvent. Dispatching must be
      done using <code>redispatchEvent</code> to prevent the AWT event
      dispatcher from recursively requesting that the KeyboardFocusManager
      dispatch the event again. If this method returns <code>false</code>,
      then the AWT event dispatcher will attempt to dispatch the event itself.
      @param e the AWTEvent to be dispatched
      @return <code>true</code> if this method dispatched the event;
              <code>false</code> otherwise
      @see #redispatchEvent
      @see #dispatchKeyEvent</div>
<a id="L1934" name="L1934"></a>1934     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/13320.html" title="Multiple referred from 46 places.">dispatchEvent</a>(<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> e);
<a id="L1935" name="L1935"></a>1935 
<div class="comment">
      Redispatches an AWTEvent in such a way that the AWT event dispatcher
      will not recursively request that the KeyboardFocusManager, or any
      installed KeyEventDispatchers, dispatch the event again. Client
      implementations of <code>dispatchEvent</code> and client-defined
      KeyEventDispatchers must call <code>redispatchEvent(target, e)</code>
      instead of <code>target.dispatchEvent(e)</code> to dispatch an event.
      <p>
      This method is intended to be used only by KeyboardFocusManagers and
      KeyEventDispatchers. It is not for general client use.
      @param target the Component to which the event should be dispatched
      @param e the event to dispatch
      @see #dispatchEvent
      @see KeyEventDispatcher</p></div>
<a id="L1952" name="L1952"></a>1952     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/25692.html" title="Multiple referred from 3 places.">redispatchEvent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>, <a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> e) <em class="brace">{</em>
<a id="L1953" name="L1953"></a>1953         e.focusManagerIsDispatching = <strong class="reserved">true</strong>;
<a id="L1954" name="L1954"></a>1954         <a href="../D/35216.html" title="Multiple defined in 4 places.">target</a>.<a href="../D/14951.html" title="Multiple defined in 14 places.">dispatchEvent</a>(e);
<a id="L1955" name="L1955"></a>1955         e.focusManagerIsDispatching = <strong class="reserved">false</strong>;
<a id="L1956" name="L1956"></a>1956     <em class="brace">}</em>
<a id="L1957" name="L1957"></a>1957 
<div class="comment">
      Typically this method will be called by <code>dispatchEvent</code> if no
      other KeyEventDispatcher in the dispatcher chain dispatched the
      KeyEvent, or if no other KeyEventDispatchers are registered. If an
      implementation of this method returns <code>false</code>,
      <code>dispatchEvent</code> may try to dispatch the KeyEvent itself, or
      may simply return <code>false</code>. If <code>true</code> is returned,
      <code>dispatchEvent</code> should return <code>true</code> as well.
      @param e the KeyEvent which the current KeyboardFocusManager has
             requested that this KeyEventDispatcher dispatch
      @return <code>true</code> if the KeyEvent was dispatched;
              <code>false</code> otherwise
      @see #dispatchEvent</div>
<a id="L1973" name="L1973"></a>1973     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/13324.html" title="Multiple referred from 3 places.">dispatchKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e);
<a id="L1974" name="L1974"></a>1974 
<div class="comment">
      This method will be called by <code>dispatchKeyEvent</code>.
      By default, this method will handle any unconsumed KeyEvents that
      map to an AWT <code>MenuShortcut</code> by consuming the event
      and activating the shortcut.
      @param e the KeyEvent to post-process
      @return <code>true</code> to indicate that no other
              KeyEventPostProcessor will be notified of the KeyEvent.
      @see #dispatchKeyEvent
      @see MenuShortcut</div>
<a id="L1987" name="L1987"></a>1987     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">boolean</strong> <a href="../R/24863.html" title="Multiple referred from 6 places.">postProcessKeyEvent</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e);
<a id="L1988" name="L1988"></a>1988 
<div class="comment">
      This method initiates a focus traversal operation if and only if the
      KeyEvent represents a focus traversal key for the specified
      focusedComponent. It is expected that focusedComponent is the current
      focus owner, although this need not be the case. If it is not,
      focus traversal will nevertheless proceed as if focusedComponent
      were the current focus owner.
      @param focusedComponent the Component that will be the basis for a focus
             traversal operation if the specified event represents a focus
             traversal key for the Component
      @param e the event that may represent a focus traversal key</div>
<a id="L2002" name="L2002"></a>2002     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/25155.html" title="Multiple referred from 16 places.">processKeyEvent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusedComponent,
<a id="L2003" name="L2003"></a>2003                                          <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e);
<a id="L2004" name="L2004"></a>2004 
<div class="comment">
      Called by the AWT to notify the KeyboardFocusManager that it should
      delay dispatching of KeyEvents until the specified Component becomes
      the focus owner. If client code requests a focus change, and the AWT
      determines that this request might be granted by the native windowing
      system, then the AWT will call this method. It is the responsibility of
      the KeyboardFocusManager to delay dispatching of KeyEvents with
      timestamps later than the specified time stamp until the specified
      Component receives a FOCUS_GAINED event, or the AWT cancels the delay
      request by invoking <code>dequeueKeyEvents</code> or
      <code>discardKeyEvents</code>.
      @param after timestamp of current event, or the current, system time if
             the current event has no timestamp, or the AWT cannot determine
             which event is currently being handled
      @param untilFocused Component which should receive a FOCUS_GAINED event
             before any pending KeyEvents
      @see #dequeueKeyEvents
      @see #discardKeyEvents</div>
<a id="L2025" name="L2025"></a>2025     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/13894.html" title="Multiple referred from 6 places.">enqueueKeyEvents</a>(<strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>,
<a id="L2026" name="L2026"></a>2026                                              <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused);
<a id="L2027" name="L2027"></a>2027 
<div class="comment">
      Called by the AWT to notify the KeyboardFocusManager that it should
      cancel delayed dispatching of KeyEvents. All KeyEvents which were
      enqueued because of a call to <code>enqueueKeyEvents</code> with the
      same timestamp and Component should be released for normal dispatching
      to the current focus owner. If the given timestamp is less than zero,
      the outstanding enqueue request for the given Component with the <b>
      oldest</b> timestamp (if any) should be cancelled.
      @param after the timestamp specified in the call to
             <code>enqueueKeyEvents</code>, or any value &lt; 0
      @param untilFocused the Component specified in the call to
             <code>enqueueKeyEvents</code>
      @see #enqueueKeyEvents
      @see #discardKeyEvents</div>
<a id="L2044" name="L2044"></a>2044     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/13229.html" title="Multiple referred from 9 places.">dequeueKeyEvents</a>(<strong class="reserved">long</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>,
<a id="L2045" name="L2045"></a>2045                                              <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> untilFocused);
<a id="L2046" name="L2046"></a>2046 
<div class="comment">
      Called by the AWT to notify the KeyboardFocusManager that it should
      cancel delayed dispatching of KeyEvents. All KeyEvents which were
      enqueued because of one or more calls to <code>enqueueKeyEvents</code>
      with the same Component should be discarded.
      @param comp the Component specified in one or more calls to
             <code>enqueueKeyEvents</code>
      @see #enqueueKeyEvents
      @see #dequeueKeyEvents</div>
<a id="L2058" name="L2058"></a>2058     <strong class="reserved">protected</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../S/2177.html#L7042" title="Referred from 7042 in src/java/awt/Component.java.">discardKeyEvents</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp);
<a id="L2059" name="L2059"></a>2059 
<div class="comment">
      Focuses the Component after aComponent, typically based on a
      FocusTraversalPolicy.
      @param aComponent the Component that is the basis for the focus
             traversal operation
      @see FocusTraversalPolicy</div>
<a id="L2068" name="L2068"></a>2068     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/14717.html" title="Multiple referred from 5 places.">focusNextComponent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent);
<a id="L2069" name="L2069"></a>2069 
<div class="comment">
      Focuses the Component before aComponent, typically based on a
      FocusTraversalPolicy.
      @param aComponent the Component that is the basis for the focus
             traversal operation
      @see FocusTraversalPolicy</div>
<a id="L2078" name="L2078"></a>2078     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/14718.html" title="Multiple referred from 5 places.">focusPreviousComponent</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent);
<a id="L2079" name="L2079"></a>2079 
<div class="comment">
      Moves the focus up one focus traversal cycle. Typically, the focus owner
      is set to aComponent's focus cycle root, and the current focus cycle
      root is set to the new focus owner's focus cycle root. If, however,
      aComponent's focus cycle root is a Window, then typically the focus
      owner is set to the Window's default Component to focus, and the current
      focus cycle root is unchanged.
      @param aComponent the Component that is the basis for the focus
             traversal operation</div>
<a id="L2091" name="L2091"></a>2091     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/29798.html" title="Multiple referred from 3 places.">upFocusCycle</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> aComponent);
<a id="L2092" name="L2092"></a>2092 
<div class="comment">
      Moves the focus down one focus traversal cycle. Typically, if
      aContainer is a focus cycle root, then the focus owner is set to
      aContainer's default Component to focus, and the current focus cycle
      root is set to aContainer. If aContainer is not a focus cycle root, then
      no focus traversal operation occurs.
      @param aContainer the Container that is the basis for the focus
             traversal operation</div>
<a id="L2103" name="L2103"></a>2103     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/13495.html" title="Multiple referred from 3 places.">downFocusCycle</a>(<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a> aContainer);
<a id="L2104" name="L2104"></a>2104 
<div class="comment">
      Focuses the Component after the current focus owner.</div>
<a id="L2108" name="L2108"></a>2108     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/14717.html" title="Multiple referred from 5 places.">focusNextComponent</a>() <em class="brace">{</em>
<a id="L2109" name="L2109"></a>2109         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L2110" name="L2110"></a>2110         <strong class="reserved">if</strong> (focusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2111" name="L2111"></a>2111             <a href="../D/16496.html" title="Multiple defined in 4 places.">focusNextComponent</a>(focusOwner);
<a id="L2112" name="L2112"></a>2112         <em class="brace">}</em>
<a id="L2113" name="L2113"></a>2113     <em class="brace">}</em>
<a id="L2114" name="L2114"></a>2114 
<div class="comment">
      Focuses the Component before the current focus owner.</div>
<a id="L2118" name="L2118"></a>2118     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/14718.html" title="Multiple referred from 5 places.">focusPreviousComponent</a>() <em class="brace">{</em>
<a id="L2119" name="L2119"></a>2119         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L2120" name="L2120"></a>2120         <strong class="reserved">if</strong> (focusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2121" name="L2121"></a>2121             <a href="../D/16497.html" title="Multiple defined in 4 places.">focusPreviousComponent</a>(focusOwner);
<a id="L2122" name="L2122"></a>2122         <em class="brace">}</em>
<a id="L2123" name="L2123"></a>2123     <em class="brace">}</em>
<a id="L2124" name="L2124"></a>2124 
<div class="comment">
      Moves the focus up one focus traversal cycle from the current focus
      owner. Typically, the new focus owner is set to the current focus
      owner's focus cycle root, and the current focus cycle root is set to the
      new focus owner's focus cycle root. If, however, the current focus
      owner's focus cycle root is a Window, then typically the focus owner is
      set to the focus cycle root's default Component to focus, and the
      current focus cycle root is unchanged.</div>
<a id="L2134" name="L2134"></a>2134     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29798.html" title="Multiple referred from 3 places.">upFocusCycle</a>() <em class="brace">{</em>
<a id="L2135" name="L2135"></a>2135         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L2136" name="L2136"></a>2136         <strong class="reserved">if</strong> (focusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2137" name="L2137"></a>2137             <a href="../D/36026.html" title="Multiple defined in 4 places.">upFocusCycle</a>(focusOwner);
<a id="L2138" name="L2138"></a>2138         <em class="brace">}</em>
<a id="L2139" name="L2139"></a>2139     <em class="brace">}</em>
<a id="L2140" name="L2140"></a>2140 
<div class="comment">
      Moves the focus down one focus traversal cycle from the current focus
      owner, if and only if the current focus owner is a Container that is a
      focus cycle root. Typically, the focus owner is set to the current focus
      owner's default Component to focus, and the current focus cycle root is
      set to the current focus owner. If the current focus owner is not a
      Container that is a focus cycle root, then no focus traversal operation
      occurs.</div>
<a id="L2150" name="L2150"></a>2150     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/13495.html" title="Multiple referred from 3 places.">downFocusCycle</a>() <em class="brace">{</em>
<a id="L2151" name="L2151"></a>2151         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> focusOwner = <a href="../D/19165.html" title="Multiple defined in 4 places.">getFocusOwner</a>();
<a id="L2152" name="L2152"></a>2152         <strong class="reserved">if</strong> (focusOwner <strong class="reserved">instanceof</strong> <a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>) <em class="brace">{</em>
<a id="L2153" name="L2153"></a>2153             <a href="../D/15138.html" title="Multiple defined in 4 places.">downFocusCycle</a>((<a href="../D/1840.html" title="Multiple defined in 2 places.">Container</a>)focusOwner);
<a id="L2154" name="L2154"></a>2154         <em class="brace">}</em>
<a id="L2155" name="L2155"></a>2155     <em class="brace">}</em>
<a id="L2156" name="L2156"></a>2156 
<div class="comment">
      Dumps the list of focus requests to stderr</div>
<a id="L2160" name="L2160"></a>2160     <strong class="reserved">void</strong> dumpRequests() <em class="brace">{</em>
<a id="L2161" name="L2161"></a>2161         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("&gt;&gt;&gt; Requests dump, time: " + <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L353" title="Defined at 353 in src/java/lang/System.java.">currentTimeMillis</a>());
<a id="L2162" name="L2162"></a>2162         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2163" name="L2163"></a>2163             <strong class="reserved">for</strong> (<a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> req : heavyweightRequests) <em class="brace">{</em>
<a id="L2164" name="L2164"></a>2164                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("&gt;&gt;&gt; Req: " + req);
<a id="L2165" name="L2165"></a>2165             <em class="brace">}</em>
<a id="L2166" name="L2166"></a>2166         <em class="brace">}</em>
<a id="L2167" name="L2167"></a>2167         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("");
<a id="L2168" name="L2168"></a>2168     <em class="brace">}</em>
<a id="L2169" name="L2169"></a>2169 
<a id="L2170" name="L2170"></a>2170     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/4577.html" title="Multiple referred from 13 places.">LightweightFocusRequest</a> <em class="brace">{</em>
<a id="L2171" name="L2171"></a>2171         <strong class="reserved">final</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L2172" name="L2172"></a>2172         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> temporary;
<a id="L2173" name="L2173"></a>2173         <strong class="reserved">final</strong> CausedFocusEvent.Cause cause;
<a id="L2174" name="L2174"></a>2174 
<a id="L2175" name="L2175"></a>2175         LightweightFocusRequest(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, <strong class="reserved">boolean</strong> temporary, CausedFocusEvent.Cause cause) <em class="brace">{</em>
<a id="L2176" name="L2176"></a>2176             <strong class="reserved">this</strong>.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> = <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L2177" name="L2177"></a>2177             <strong class="reserved">this</strong>.temporary = temporary;
<a id="L2178" name="L2178"></a>2178             <strong class="reserved">this</strong>.cause = cause;
<a id="L2179" name="L2179"></a>2179         <em class="brace">}</em>
<a id="L2180" name="L2180"></a>2180         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L2181" name="L2181"></a>2181             <strong class="reserved">return</strong> "LightweightFocusRequest[component=" + <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a> +
<a id="L2182" name="L2182"></a>2182                 ",temporary=" + temporary + ", cause=" + cause + "]";
<a id="L2183" name="L2183"></a>2183         <em class="brace">}</em>
<a id="L2184" name="L2184"></a>2184     <em class="brace">}</em>
<a id="L2185" name="L2185"></a>2185 
<a id="L2186" name="L2186"></a>2186     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/3417.html" title="Multiple referred from 25 places.">HeavyweightFocusRequest</a> <em class="brace">{</em>
<a id="L2187" name="L2187"></a>2187         <strong class="reserved">final</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight;
<a id="L2188" name="L2188"></a>2188         <strong class="reserved">final</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt; lightweightRequests;
<a id="L2189" name="L2189"></a>2189 
<a id="L2190" name="L2190"></a>2190         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> CLEAR_GLOBAL_FOCUS_OWNER =
<a id="L2191" name="L2191"></a>2191             <strong class="reserved">new</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>();
<a id="L2192" name="L2192"></a>2192 
<a id="L2193" name="L2193"></a>2193         <strong class="reserved">private</strong> HeavyweightFocusRequest() <em class="brace">{</em>
<a id="L2194" name="L2194"></a>2194             heavyweight = <strong class="reserved">null</strong>;
<a id="L2195" name="L2195"></a>2195             lightweightRequests = <strong class="reserved">null</strong>;
<a id="L2196" name="L2196"></a>2196         <em class="brace">}</em>
<a id="L2197" name="L2197"></a>2197 
<a id="L2198" name="L2198"></a>2198         HeavyweightFocusRequest(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant,
<a id="L2199" name="L2199"></a>2199                                 <strong class="reserved">boolean</strong> temporary, CausedFocusEvent.Cause cause) <em class="brace">{</em>
<a id="L2200" name="L2200"></a>2200             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L2201" name="L2201"></a>2201                 <strong class="reserved">if</strong> (heavyweight == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2202" name="L2202"></a>2202                     <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (heavyweight != null) failed");
<a id="L2203" name="L2203"></a>2203                 <em class="brace">}</em>
<a id="L2204" name="L2204"></a>2204             <em class="brace">}</em>
<a id="L2205" name="L2205"></a>2205 
<a id="L2206" name="L2206"></a>2206             <strong class="reserved">this</strong>.heavyweight = heavyweight;
<a id="L2207" name="L2207"></a>2207             <strong class="reserved">this</strong>.lightweightRequests = <strong class="reserved">new</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt;();
<a id="L2208" name="L2208"></a>2208             <a href="../S/2110.html#L2210" title="Defined at 2210 in src/java/awt/KeyboardFocusManager.java.">addLightweightRequest</a>(descendant, temporary, cause);
<a id="L2209" name="L2209"></a>2209         <em class="brace">}</em>
<a id="L2210" name="L2210"></a>2210         <strong class="reserved">boolean</strong> <a href="../R/9821.html" title="Multiple referred from 2 places.">addLightweightRequest</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant,
<a id="L2211" name="L2211"></a>2211                                       <strong class="reserved">boolean</strong> temporary, CausedFocusEvent.Cause cause) <em class="brace">{</em>
<a id="L2212" name="L2212"></a>2212             <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L2213" name="L2213"></a>2213                 <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER) <em class="brace">{</em>
<a id="L2214" name="L2214"></a>2214                     <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (this != HeavyweightFocusRequest.CLEAR_GLOBAL_FOCUS_OWNER) failed");
<a id="L2215" name="L2215"></a>2215                 <em class="brace">}</em>
<a id="L2216" name="L2216"></a>2216                 <strong class="reserved">if</strong> (descendant == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2217" name="L2217"></a>2217                     <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (descendant != null) failed");
<a id="L2218" name="L2218"></a>2218                 <em class="brace">}</em>
<a id="L2219" name="L2219"></a>2219             <em class="brace">}</em>
<a id="L2220" name="L2220"></a>2220 
<a id="L2221" name="L2221"></a>2221             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> lastDescendant = ((lightweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)
<a id="L2222" name="L2222"></a>2222                 ? lightweightRequests.<a href="../D/19990.html" title="Multiple defined in 23 places.">getLast</a>().<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>
<a id="L2223" name="L2223"></a>2223                 : <strong class="reserved">null</strong>);
<a id="L2224" name="L2224"></a>2224 
<a id="L2225" name="L2225"></a>2225             <strong class="reserved">if</strong> (descendant != lastDescendant) <em class="brace">{</em>
<a id="L2226" name="L2226"></a>2226                 <em class="comment">// Not a duplicate request</em>
<a id="L2227" name="L2227"></a>2227                 lightweightRequests.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>
<a id="L2228" name="L2228"></a>2228                     (<strong class="reserved">new</strong> <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>(descendant, temporary, cause));
<a id="L2229" name="L2229"></a>2229                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2230" name="L2230"></a>2230             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2231" name="L2231"></a>2231                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2232" name="L2232"></a>2232             <em class="brace">}</em>
<a id="L2233" name="L2233"></a>2233         <em class="brace">}</em>
<a id="L2234" name="L2234"></a>2234 
<a id="L2235" name="L2235"></a>2235         <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> <a href="../R/16620.html" title="Multiple referred from 2 places.">getFirstLightweightRequest</a>() <em class="brace">{</em>
<a id="L2236" name="L2236"></a>2236             <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == CLEAR_GLOBAL_FOCUS_OWNER) <em class="brace">{</em>
<a id="L2237" name="L2237"></a>2237                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2238" name="L2238"></a>2238             <em class="brace">}</em>
<a id="L2239" name="L2239"></a>2239             <strong class="reserved">return</strong> lightweightRequests.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L2240" name="L2240"></a>2240         <em class="brace">}</em>
<a id="L2241" name="L2241"></a>2241         <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L2242" name="L2242"></a>2242             <strong class="reserved">boolean</strong> <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">true</strong>;
<a id="L2243" name="L2243"></a>2243             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> = "HeavyweightFocusRequest[heavweight=" + heavyweight +
<a id="L2244" name="L2244"></a>2244                 ",lightweightRequests=";
<a id="L2245" name="L2245"></a>2245             <strong class="reserved">if</strong> (lightweightRequests == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2246" name="L2246"></a>2246                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += <strong class="reserved">null</strong>;
<a id="L2247" name="L2247"></a>2247             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2248" name="L2248"></a>2248                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += "[";
<a id="L2249" name="L2249"></a>2249 
<a id="L2250" name="L2250"></a>2250                 <strong class="reserved">for</strong> (<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> lwRequest : lightweightRequests) <em class="brace">{</em>
<a id="L2251" name="L2251"></a>2251                     <strong class="reserved">if</strong> (<a href="../D/16393.html" title="Multiple defined in 45 places.">first</a>) <em class="brace">{</em>
<a id="L2252" name="L2252"></a>2252                         <a href="../D/16393.html" title="Multiple defined in 45 places.">first</a> = <strong class="reserved">false</strong>;
<a id="L2253" name="L2253"></a>2253                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2254" name="L2254"></a>2254                         <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += ",";
<a id="L2255" name="L2255"></a>2255                     <em class="brace">}</em>
<a id="L2256" name="L2256"></a>2256                     <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += lwRequest;
<a id="L2257" name="L2257"></a>2257                 <em class="brace">}</em>
<a id="L2258" name="L2258"></a>2258                 <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += "]";
<a id="L2259" name="L2259"></a>2259             <em class="brace">}</em>
<a id="L2260" name="L2260"></a>2260             <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a> += "]";
<a id="L2261" name="L2261"></a>2261             <strong class="reserved">return</strong> <a href="../D/34924.html" title="Multiple defined in 10 places.">str</a>;
<a id="L2262" name="L2262"></a>2262         <em class="brace">}</em>
<a id="L2263" name="L2263"></a>2263     <em class="brace">}</em>
<a id="L2264" name="L2264"></a>2264 
<div class="comment">
      heavyweightRequests is used as a monitor for synchronized changes of
      currentLightweightRequests, clearingCurrentLightweightRequests and
      newFocusOwner.</div>
<a id="L2270" name="L2270"></a>2270     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>&gt; heavyweightRequests =
<a id="L2271" name="L2271"></a>2271         <strong class="reserved">new</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>&gt;();
<a id="L2272" name="L2272"></a>2272     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt; currentLightweightRequests;
<a id="L2273" name="L2273"></a>2273     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> clearingCurrentLightweightRequests;
<a id="L2274" name="L2274"></a>2274     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> allowSyncFocusRequests = <strong class="reserved">true</strong>;
<a id="L2275" name="L2275"></a>2275     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> newFocusOwner = <strong class="reserved">null</strong>;
<a id="L2276" name="L2276"></a>2276     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">volatile</strong> <strong class="reserved">boolean</strong> disableRestoreFocus;
<a id="L2277" name="L2277"></a>2277 
<a id="L2278" name="L2278"></a>2278     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SNFH_FAILURE = 0;
<a id="L2279" name="L2279"></a>2279     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SNFH_SUCCESS_HANDLED = 1;
<a id="L2280" name="L2280"></a>2280     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SNFH_SUCCESS_PROCEED = 2;
<a id="L2281" name="L2281"></a>2281 
<a id="L2282" name="L2282"></a>2282     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/25189.html" title="Multiple referred from 2 places.">processSynchronousLightweightTransfer</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant,
<a id="L2283" name="L2283"></a>2283                                                   <strong class="reserved">boolean</strong> temporary, <strong class="reserved">boolean</strong> focusedWindowChangeAllowed,
<a id="L2284" name="L2284"></a>2284                                                   <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>)
<a id="L2285" name="L2285"></a>2285     <em class="brace">{</em>
<a id="L2286" name="L2286"></a>2286         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> parentWindow = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(heavyweight);
<a id="L2287" name="L2287"></a>2287         <strong class="reserved">if</strong> (parentWindow == <strong class="reserved">null</strong> || !parentWindow.syncLWRequests) <em class="brace">{</em>
<a id="L2288" name="L2288"></a>2288             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L2289" name="L2289"></a>2289         <em class="brace">}</em>
<a id="L2290" name="L2290"></a>2290         <strong class="reserved">if</strong> (descendant == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2291" name="L2291"></a>2291             <em class="comment">// Focus transfers from a lightweight child back to the</em>
<a id="L2292" name="L2292"></a>2292             <em class="comment">// heavyweight Container should be treated like lightweight</em>
<a id="L2293" name="L2293"></a>2293             <em class="comment">// focus transfers.</em>
<a id="L2294" name="L2294"></a>2294             descendant = heavyweight;
<a id="L2295" name="L2295"></a>2295         <em class="brace">}</em>
<a id="L2296" name="L2296"></a>2296 
<a id="L2297" name="L2297"></a>2297         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(SunToolkit.targetToAppContext(descendant));
<a id="L2298" name="L2298"></a>2298 
<a id="L2299" name="L2299"></a>2299         <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> currentFocusOwnerEvent = <strong class="reserved">null</strong>;
<a id="L2300" name="L2300"></a>2300         <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> newFocusOwnerEvent = <strong class="reserved">null</strong>;
<a id="L2301" name="L2301"></a>2301         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2302" name="L2302"></a>2302 
<a id="L2303" name="L2303"></a>2303         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2304" name="L2304"></a>2304             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3100" title="Defined at 3100 in src/java/awt/KeyboardFocusManager.java.">getLastHWRequest</a>();
<a id="L2305" name="L2305"></a>2305             <strong class="reserved">if</strong> (hwFocusRequest == <strong class="reserved">null</strong> &amp;&amp;
<a id="L2306" name="L2306"></a>2306                 heavyweight == manager.<a href="../S/2110.html#L651" title="Defined at 651 in src/java/awt/KeyboardFocusManager.java.">getNativeFocusOwner</a>() &amp;&amp;
<a id="L2307" name="L2307"></a>2307                 allowSyncFocusRequests)
<a id="L2308" name="L2308"></a>2308             <em class="brace">{</em>
<a id="L2309" name="L2309"></a>2309 
<a id="L2310" name="L2310"></a>2310                 <strong class="reserved">if</strong> (descendant == currentFocusOwner) <em class="brace">{</em>
<a id="L2311" name="L2311"></a>2311                     <em class="comment">// Redundant request.</em>
<a id="L2312" name="L2312"></a>2312                     <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L2313" name="L2313"></a>2313                 <em class="brace">}</em>
<a id="L2314" name="L2314"></a>2314 
<a id="L2315" name="L2315"></a>2315                 <em class="comment">// 'heavyweight' owns the native focus and there are no pending</em>
<a id="L2316" name="L2316"></a>2316                 <em class="comment">// requests. 'heavyweight' must be a Container and</em>
<a id="L2317" name="L2317"></a>2317                 <em class="comment">// 'descendant' must not be the focus owner. Otherwise,</em>
<a id="L2318" name="L2318"></a>2318                 <em class="comment">// we would never have gotten this far.</em>
<a id="L2319" name="L2319"></a>2319                 manager.<a href="../D/15583.html" title="Multiple defined in 2 places.">enqueueKeyEvents</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, descendant);
<a id="L2320" name="L2320"></a>2320 
<a id="L2321" name="L2321"></a>2321                 hwFocusRequest =
<a id="L2322" name="L2322"></a>2322                     <strong class="reserved">new</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>(heavyweight, descendant,
<a id="L2323" name="L2323"></a>2323                                                 temporary, CausedFocusEvent.Cause.<a href="../D/9240.html" title="Multiple defined in 3 places.">UNKNOWN</a>);
<a id="L2324" name="L2324"></a>2324                 heavyweightRequests.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(hwFocusRequest);
<a id="L2325" name="L2325"></a>2325 
<a id="L2326" name="L2326"></a>2326                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2327" name="L2327"></a>2327                     currentFocusOwnerEvent =
<a id="L2328" name="L2328"></a>2328                         <strong class="reserved">new</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>(currentFocusOwner,
<a id="L2329" name="L2329"></a>2329                                        <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2330" name="L2330"></a>2330                                        temporary, descendant);
<a id="L2331" name="L2331"></a>2331                 <em class="brace">}</em>
<a id="L2332" name="L2332"></a>2332                 newFocusOwnerEvent =
<a id="L2333" name="L2333"></a>2333                     <strong class="reserved">new</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>(descendant, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED,
<a id="L2334" name="L2334"></a>2334                                    temporary, currentFocusOwner);
<a id="L2335" name="L2335"></a>2335             <em class="brace">}</em>
<a id="L2336" name="L2336"></a>2336         <em class="brace">}</em>
<a id="L2337" name="L2337"></a>2337         <strong class="reserved">boolean</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">false</strong>;
<a id="L2338" name="L2338"></a>2338         <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> clearing = clearingCurrentLightweightRequests;
<a id="L2339" name="L2339"></a>2339 
<a id="L2340" name="L2340"></a>2340         <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> caughtEx = <strong class="reserved">null</strong>;
<a id="L2341" name="L2341"></a>2341         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2342" name="L2342"></a>2342             clearingCurrentLightweightRequests = <strong class="reserved">false</strong>;
<a id="L2343" name="L2343"></a>2343             <strong class="reserved">synchronized</strong>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a>.LOCK) <em class="brace">{</em>
<a id="L2344" name="L2344"></a>2344 
<a id="L2345" name="L2345"></a>2345                 <strong class="reserved">if</strong> (currentFocusOwnerEvent != <strong class="reserved">null</strong> &amp;&amp; currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2346" name="L2346"></a>2346                     ((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) currentFocusOwnerEvent).isPosted = <strong class="reserved">true</strong>;
<a id="L2347" name="L2347"></a>2347                     caughtEx = <a href="../S/2110.html#L2598" title="Defined at 2598 in src/java/awt/KeyboardFocusManager.java.">dispatchAndCatchException</a>(caughtEx, currentFocusOwner, currentFocusOwnerEvent);
<a id="L2348" name="L2348"></a>2348                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">true</strong>;
<a id="L2349" name="L2349"></a>2349                 <em class="brace">}</em>
<a id="L2350" name="L2350"></a>2350 
<a id="L2351" name="L2351"></a>2351                 <strong class="reserved">if</strong> (newFocusOwnerEvent != <strong class="reserved">null</strong> &amp;&amp; descendant != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2352" name="L2352"></a>2352                     ((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) newFocusOwnerEvent).isPosted = <strong class="reserved">true</strong>;
<a id="L2353" name="L2353"></a>2353                     caughtEx = <a href="../S/2110.html#L2598" title="Defined at 2598 in src/java/awt/KeyboardFocusManager.java.">dispatchAndCatchException</a>(caughtEx, descendant, newFocusOwnerEvent);
<a id="L2354" name="L2354"></a>2354                     <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">true</strong>;
<a id="L2355" name="L2355"></a>2355                 <em class="brace">}</em>
<a id="L2356" name="L2356"></a>2356             <em class="brace">}</em>
<a id="L2357" name="L2357"></a>2357         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2358" name="L2358"></a>2358             clearingCurrentLightweightRequests = clearing;
<a id="L2359" name="L2359"></a>2359         <em class="brace">}</em>
<a id="L2360" name="L2360"></a>2360         <strong class="reserved">if</strong> (caughtEx <strong class="reserved">instanceof</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>) <em class="brace">{</em>
<a id="L2361" name="L2361"></a>2361             <strong class="reserved">throw</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>)caughtEx;
<a id="L2362" name="L2362"></a>2362         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (caughtEx <strong class="reserved">instanceof</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>) <em class="brace">{</em>
<a id="L2363" name="L2363"></a>2363             <strong class="reserved">throw</strong> (<a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>)caughtEx;
<a id="L2364" name="L2364"></a>2364         <em class="brace">}</em>
<a id="L2365" name="L2365"></a>2365         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L2366" name="L2366"></a>2366     <em class="brace">}</em>
<a id="L2367" name="L2367"></a>2367 
<div class="comment">
      Indicates whether the native implementation should proceed with a
      pending, native focus request. Before changing the focus at the native
      level, the AWT implementation should always call this function for
      permission. This function will reject the request if a duplicate request
      preceded it, or if the specified heavyweight Component already owns the
      focus and no native focus changes are pending. Otherwise, the request
      will be approved and the focus request list will be updated so that,
      if necessary, the proper descendant will be focused when the
      corresponding FOCUS_GAINED event on the heavyweight is received.
      An implementation must ensure that calls to this method and native
      focus changes are atomic. If this is not guaranteed, then the ordering
      of the focus request list may be incorrect, leading to errors in the
      type-ahead mechanism. Typically this is accomplished by only calling
      this function from the native event pumping thread, or by holding a
      global, native lock during invocation.</div>
<a id="L2386" name="L2386"></a>2386     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/28534.html" title="Multiple referred from 2 places.">shouldNativelyFocusHeavyweight</a>
<a id="L2387" name="L2387"></a>2387         (<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> descendant, <strong class="reserved">boolean</strong> temporary,
<a id="L2388" name="L2388"></a>2388          <strong class="reserved">boolean</strong> focusedWindowChangeAllowed, <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, CausedFocusEvent.Cause cause)
<a id="L2389" name="L2389"></a>2389     <em class="brace">{</em>
<a id="L2390" name="L2390"></a>2390         <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L2391" name="L2391"></a>2391             <strong class="reserved">if</strong> (heavyweight == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2392" name="L2392"></a>2392                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (heavyweight != null) failed");
<a id="L2393" name="L2393"></a>2393             <em class="brace">}</em>
<a id="L2394" name="L2394"></a>2394             <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> == 0) <em class="brace">{</em>
<a id="L2395" name="L2395"></a>2395                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (time != 0) failed");
<a id="L2396" name="L2396"></a>2396             <em class="brace">}</em>
<a id="L2397" name="L2397"></a>2397         <em class="brace">}</em>
<a id="L2398" name="L2398"></a>2398 
<a id="L2399" name="L2399"></a>2399         <strong class="reserved">if</strong> (descendant == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2400" name="L2400"></a>2400             <em class="comment">// Focus transfers from a lightweight child back to the</em>
<a id="L2401" name="L2401"></a>2401             <em class="comment">// heavyweight Container should be treated like lightweight</em>
<a id="L2402" name="L2402"></a>2402             <em class="comment">// focus transfers.</em>
<a id="L2403" name="L2403"></a>2403             descendant = heavyweight;
<a id="L2404" name="L2404"></a>2404         <em class="brace">}</em>
<a id="L2405" name="L2405"></a>2405 
<a id="L2406" name="L2406"></a>2406         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager =
<a id="L2407" name="L2407"></a>2407             <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>(SunToolkit.targetToAppContext(descendant));
<a id="L2408" name="L2408"></a>2408         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> thisManager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L2409" name="L2409"></a>2409         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = thisManager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2410" name="L2410"></a>2410         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> nativeFocusOwner = thisManager.<a href="../S/2110.html#L651" title="Defined at 651 in src/java/awt/KeyboardFocusManager.java.">getNativeFocusOwner</a>();
<a id="L2411" name="L2411"></a>2411         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> nativeFocusedWindow = thisManager.<a href="../S/2110.html#L663" title="Defined at 663 in src/java/awt/KeyboardFocusManager.java.">getNativeFocusedWindow</a>();
<a id="L2412" name="L2412"></a>2412         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L2413" name="L2413"></a>2413             focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("SNFH for {0} in {1}",
<a id="L2414" name="L2414"></a>2414                        <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(descendant), <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(heavyweight));
<a id="L2415" name="L2415"></a>2415         <em class="brace">}</em>
<a id="L2416" name="L2416"></a>2416         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L2417" name="L2417"></a>2417             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("0. Current focus owner {0}",
<a id="L2418" name="L2418"></a>2418                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(currentFocusOwner));
<a id="L2419" name="L2419"></a>2419             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("0. Native focus owner {0}",
<a id="L2420" name="L2420"></a>2420                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(nativeFocusOwner));
<a id="L2421" name="L2421"></a>2421             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("0. Native focused window {0}",
<a id="L2422" name="L2422"></a>2422                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(nativeFocusedWindow));
<a id="L2423" name="L2423"></a>2423         <em class="brace">}</em>
<a id="L2424" name="L2424"></a>2424         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2425" name="L2425"></a>2425             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3100" title="Defined at 3100 in src/java/awt/KeyboardFocusManager.java.">getLastHWRequest</a>();
<a id="L2426" name="L2426"></a>2426             <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L2427" name="L2427"></a>2427                 focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("Request {0}", <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(hwFocusRequest));
<a id="L2428" name="L2428"></a>2428             <em class="brace">}</em>
<a id="L2429" name="L2429"></a>2429             <strong class="reserved">if</strong> (hwFocusRequest == <strong class="reserved">null</strong> &amp;&amp;
<a id="L2430" name="L2430"></a>2430                 heavyweight == nativeFocusOwner &amp;&amp;
<a id="L2431" name="L2431"></a>2431                 heavyweight.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>() == nativeFocusedWindow)
<a id="L2432" name="L2432"></a>2432             <em class="brace">{</em>
<a id="L2433" name="L2433"></a>2433                 <strong class="reserved">if</strong> (descendant == currentFocusOwner) <em class="brace">{</em>
<a id="L2434" name="L2434"></a>2434                     <em class="comment">// Redundant request.</em>
<a id="L2435" name="L2435"></a>2435                     <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST))
<a id="L2436" name="L2436"></a>2436                         focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("1. SNFH_FAILURE for {0}",
<a id="L2437" name="L2437"></a>2437                                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(descendant));
<a id="L2438" name="L2438"></a>2438                     <strong class="reserved">return</strong> SNFH_FAILURE;
<a id="L2439" name="L2439"></a>2439                 <em class="brace">}</em>
<a id="L2440" name="L2440"></a>2440 
<a id="L2441" name="L2441"></a>2441                 <em class="comment">// 'heavyweight' owns the native focus and there are no pending</em>
<a id="L2442" name="L2442"></a>2442                 <em class="comment">// requests. 'heavyweight' must be a Container and</em>
<a id="L2443" name="L2443"></a>2443                 <em class="comment">// 'descendant' must not be the focus owner. Otherwise,</em>
<a id="L2444" name="L2444"></a>2444                 <em class="comment">// we would never have gotten this far.</em>
<a id="L2445" name="L2445"></a>2445                 manager.<a href="../D/15583.html" title="Multiple defined in 2 places.">enqueueKeyEvents</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, descendant);
<a id="L2446" name="L2446"></a>2446 
<a id="L2447" name="L2447"></a>2447                 hwFocusRequest =
<a id="L2448" name="L2448"></a>2448                     <strong class="reserved">new</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>(heavyweight, descendant,
<a id="L2449" name="L2449"></a>2449                                                 temporary, cause);
<a id="L2450" name="L2450"></a>2450                 heavyweightRequests.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(hwFocusRequest);
<a id="L2451" name="L2451"></a>2451 
<a id="L2452" name="L2452"></a>2452                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2453" name="L2453"></a>2453                     <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> currentFocusOwnerEvent =
<a id="L2454" name="L2454"></a>2454                         <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner,
<a id="L2455" name="L2455"></a>2455                                        <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2456" name="L2456"></a>2456                                        temporary, descendant, cause);
<a id="L2457" name="L2457"></a>2457                     <em class="comment">// Fix 5028014. Rolled out.</em>
<a id="L2458" name="L2458"></a>2458                     <em class="comment">// SunToolkit.postPriorityEvent(currentFocusOwnerEvent);</em>
<a id="L2459" name="L2459"></a>2459                     SunToolkit.<a href="../D/29484.html" title="Multiple defined in 6 places.">postEvent</a>(currentFocusOwner.appContext,
<a id="L2460" name="L2460"></a>2460                                          currentFocusOwnerEvent);
<a id="L2461" name="L2461"></a>2461                 <em class="brace">}</em>
<a id="L2462" name="L2462"></a>2462                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> newFocusOwnerEvent =
<a id="L2463" name="L2463"></a>2463                     <strong class="reserved">new</strong> CausedFocusEvent(descendant, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED,
<a id="L2464" name="L2464"></a>2464                                    temporary, currentFocusOwner, cause);
<a id="L2465" name="L2465"></a>2465                 <em class="comment">// Fix 5028014. Rolled out.</em>
<a id="L2466" name="L2466"></a>2466                 <em class="comment">// SunToolkit.postPriorityEvent(newFocusOwnerEvent);</em>
<a id="L2467" name="L2467"></a>2467                 SunToolkit.<a href="../D/29484.html" title="Multiple defined in 6 places.">postEvent</a>(descendant.appContext, newFocusOwnerEvent);
<a id="L2468" name="L2468"></a>2468 
<a id="L2469" name="L2469"></a>2469                 <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST))
<a id="L2470" name="L2470"></a>2470                     focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("2. SNFH_HANDLED for {0}", <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(descendant));
<a id="L2471" name="L2471"></a>2471                 <strong class="reserved">return</strong> SNFH_SUCCESS_HANDLED;
<a id="L2472" name="L2472"></a>2472             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2473" name="L2473"></a>2473                        hwFocusRequest.heavyweight == heavyweight) <em class="brace">{</em>
<a id="L2474" name="L2474"></a>2474                 <em class="comment">// 'heavyweight' doesn't have the native focus right now, but</em>
<a id="L2475" name="L2475"></a>2475                 <em class="comment">// if all pending requests were completed, it would. Add</em>
<a id="L2476" name="L2476"></a>2476                 <em class="comment">// descendant to the heavyweight's list of pending</em>
<a id="L2477" name="L2477"></a>2477                 <em class="comment">// lightweight focus transfers.</em>
<a id="L2478" name="L2478"></a>2478                 <strong class="reserved">if</strong> (hwFocusRequest.<a href="../S/2110.html#L2210" title="Defined at 2210 in src/java/awt/KeyboardFocusManager.java.">addLightweightRequest</a>(descendant,
<a id="L2479" name="L2479"></a>2479                                                          temporary, cause)) <em class="brace">{</em>
<a id="L2480" name="L2480"></a>2480                     manager.<a href="../D/15583.html" title="Multiple defined in 2 places.">enqueueKeyEvents</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, descendant);
<a id="L2481" name="L2481"></a>2481                 <em class="brace">}</em>
<a id="L2482" name="L2482"></a>2482 
<a id="L2483" name="L2483"></a>2483                 <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L2484" name="L2484"></a>2484                     focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("3. SNFH_HANDLED for lightweight" +
<a id="L2485" name="L2485"></a>2485                                     descendant + " in " + heavyweight);
<a id="L2486" name="L2486"></a>2486                 <em class="brace">}</em>
<a id="L2487" name="L2487"></a>2487                 <strong class="reserved">return</strong> SNFH_SUCCESS_HANDLED;
<a id="L2488" name="L2488"></a>2488             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2489" name="L2489"></a>2489                 <strong class="reserved">if</strong> (!focusedWindowChangeAllowed) <em class="brace">{</em>
<a id="L2490" name="L2490"></a>2490                     <em class="comment">// For purposes of computing oldFocusedWindow, we should look at</em>
<a id="L2491" name="L2491"></a>2491                     <em class="comment">// the second to last HeavyweightFocusRequest on the queue iff the</em>
<a id="L2492" name="L2492"></a>2492                     <em class="comment">// last HeavyweightFocusRequest is CLEAR_GLOBAL_FOCUS_OWNER. If</em>
<a id="L2493" name="L2493"></a>2493                     <em class="comment">// there is no second to last HeavyweightFocusRequest, null is an</em>
<a id="L2494" name="L2494"></a>2494                     <em class="comment">// acceptable value.</em>
<a id="L2495" name="L2495"></a>2495                     <strong class="reserved">if</strong> (hwFocusRequest ==
<a id="L2496" name="L2496"></a>2496                         <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER)
<a id="L2497" name="L2497"></a>2497                     <em class="brace">{</em>
<a id="L2498" name="L2498"></a>2498                         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L2499" name="L2499"></a>2499                         hwFocusRequest = (<a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>)((<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt;= 2)
<a id="L2500" name="L2500"></a>2500                             ? heavyweightRequests.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 2)
<a id="L2501" name="L2501"></a>2501                             : <strong class="reserved">null</strong>);
<a id="L2502" name="L2502"></a>2502                     <em class="brace">}</em>
<a id="L2503" name="L2503"></a>2503                     <strong class="reserved">if</strong> (<a href="../S/2110.html#L3023" title="Defined at 3023 in src/java/awt/KeyboardFocusManager.java.">focusedWindowChanged</a>(heavyweight,
<a id="L2504" name="L2504"></a>2504                                              (hwFocusRequest != <strong class="reserved">null</strong>)
<a id="L2505" name="L2505"></a>2505                                              ? hwFocusRequest.heavyweight
<a id="L2506" name="L2506"></a>2506                                              : nativeFocusedWindow)) <em class="brace">{</em>
<a id="L2507" name="L2507"></a>2507                         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L2508" name="L2508"></a>2508                             focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("4. SNFH_FAILURE for " + descendant);
<a id="L2509" name="L2509"></a>2509                         <em class="brace">}</em>
<a id="L2510" name="L2510"></a>2510                         <strong class="reserved">return</strong> SNFH_FAILURE;
<a id="L2511" name="L2511"></a>2511                     <em class="brace">}</em>
<a id="L2512" name="L2512"></a>2512                 <em class="brace">}</em>
<a id="L2513" name="L2513"></a>2513 
<a id="L2514" name="L2514"></a>2514                 manager.<a href="../D/15583.html" title="Multiple defined in 2 places.">enqueueKeyEvents</a>(<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>, descendant);
<a id="L2515" name="L2515"></a>2515                 heavyweightRequests.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>
<a id="L2516" name="L2516"></a>2516                     (<strong class="reserved">new</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>(heavyweight, descendant,
<a id="L2517" name="L2517"></a>2517                                                  temporary, cause));
<a id="L2518" name="L2518"></a>2518                 <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINEST)) <em class="brace">{</em>
<a id="L2519" name="L2519"></a>2519                     focusLog.<a href="../D/16278.html" title="Multiple defined in 5 places.">finest</a>("5. SNFH_PROCEED for " + descendant);
<a id="L2520" name="L2520"></a>2520                 <em class="brace">}</em>
<a id="L2521" name="L2521"></a>2521                 <strong class="reserved">return</strong> SNFH_SUCCESS_PROCEED;
<a id="L2522" name="L2522"></a>2522             <em class="brace">}</em>
<a id="L2523" name="L2523"></a>2523         <em class="brace">}</em>
<a id="L2524" name="L2524"></a>2524     <em class="brace">}</em>
<a id="L2525" name="L2525"></a>2525 
<div class="comment">
      Returns the Window which will be active after processing this request,
      or null if this is a duplicate request. The active Window is useful
      because some native platforms do not support setting the native focus
      owner to null. On these platforms, the obvious choice is to set the
      focus owner to the focus proxy of the active Window.</div>
<a id="L2533" name="L2533"></a>2533     <strong class="reserved">static</strong> <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> <a href="../S/2110.html#L638" title="Referred from 638 in src/java/awt/KeyboardFocusManager.java.">markClearGlobalFocusOwner</a>() <em class="brace">{</em>
<a id="L2534" name="L2534"></a>2534         <em class="comment">// need to call this out of synchronized block to avoid possible deadlock</em>
<a id="L2535" name="L2535"></a>2535         <em class="comment">// see 6454631.</em>
<a id="L2536" name="L2536"></a>2536         <strong class="reserved">final</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> nativeFocusedWindow =
<a id="L2537" name="L2537"></a>2537                 <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>().<a href="../S/2110.html#L663" title="Defined at 663 in src/java/awt/KeyboardFocusManager.java.">getNativeFocusedWindow</a>();
<a id="L2538" name="L2538"></a>2538 
<a id="L2539" name="L2539"></a>2539         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2540" name="L2540"></a>2540             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3100" title="Defined at 3100 in src/java/awt/KeyboardFocusManager.java.">getLastHWRequest</a>();
<a id="L2541" name="L2541"></a>2541             <strong class="reserved">if</strong> (hwFocusRequest ==
<a id="L2542" name="L2542"></a>2542                 <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER)
<a id="L2543" name="L2543"></a>2543             <em class="brace">{</em>
<a id="L2544" name="L2544"></a>2544                 <em class="comment">// duplicate request</em>
<a id="L2545" name="L2545"></a>2545                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2546" name="L2546"></a>2546             <em class="brace">}</em>
<a id="L2547" name="L2547"></a>2547 
<a id="L2548" name="L2548"></a>2548             heavyweightRequests.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>
<a id="L2549" name="L2549"></a>2549                 (<a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER);
<a id="L2550" name="L2550"></a>2550 
<a id="L2551" name="L2551"></a>2551             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> activeWindow = ((hwFocusRequest != <strong class="reserved">null</strong>)
<a id="L2552" name="L2552"></a>2552                 ? SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(hwFocusRequest.heavyweight)
<a id="L2553" name="L2553"></a>2553                 : nativeFocusedWindow);
<a id="L2554" name="L2554"></a>2554             <strong class="reserved">while</strong> (activeWindow != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2555" name="L2555"></a>2555                    !((activeWindow <strong class="reserved">instanceof</strong> <a href="../S/2118.html#L135" title="Defined at 135 in src/java/awt/Frame.java.">Frame</a>) ||
<a id="L2556" name="L2556"></a>2556                      (activeWindow <strong class="reserved">instanceof</strong> <a href="../S/2212.html#L97" title="Defined at 97 in src/java/awt/Dialog.java.">Dialog</a>)))
<a id="L2557" name="L2557"></a>2557             <em class="brace">{</em>
<a id="L2558" name="L2558"></a>2558                 activeWindow = activeWindow.<a href="../D/21410.html" title="Multiple defined in 2 places.">getParent_NoClientCode</a>();
<a id="L2559" name="L2559"></a>2559             <em class="brace">}</em>
<a id="L2560" name="L2560"></a>2560 
<a id="L2561" name="L2561"></a>2561             <strong class="reserved">return</strong> (<a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a>) activeWindow;
<a id="L2562" name="L2562"></a>2562         <em class="brace">}</em>
<a id="L2563" name="L2563"></a>2563     <em class="brace">}</em>
<a id="L2564" name="L2564"></a>2564     <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> getCurrentWaitingRequest(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L2565" name="L2565"></a>2565         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2566" name="L2566"></a>2566             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3108" title="Defined at 3108 in src/java/awt/KeyboardFocusManager.java.">getFirstHWRequest</a>();
<a id="L2567" name="L2567"></a>2567             <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2568" name="L2568"></a>2568                 <strong class="reserved">if</strong> (hwFocusRequest.heavyweight == <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L2569" name="L2569"></a>2569                     <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> lwFocusRequest =
<a id="L2570" name="L2570"></a>2570                         hwFocusRequest.lightweightRequests.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L2571" name="L2571"></a>2571                     <strong class="reserved">if</strong> (lwFocusRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2572" name="L2572"></a>2572                         <strong class="reserved">return</strong> lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L2573" name="L2573"></a>2573                     <em class="brace">}</em>
<a id="L2574" name="L2574"></a>2574                 <em class="brace">}</em>
<a id="L2575" name="L2575"></a>2575             <em class="brace">}</em>
<a id="L2576" name="L2576"></a>2576         <em class="brace">}</em>
<a id="L2577" name="L2577"></a>2577         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2578" name="L2578"></a>2578     <em class="brace">}</em>
<a id="L2579" name="L2579"></a>2579 
<a id="L2580" name="L2580"></a>2580     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21192.html" title="Multiple referred from 7 places.">isAutoFocusTransferEnabled</a>() <em class="brace">{</em>
<a id="L2581" name="L2581"></a>2581         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2582" name="L2582"></a>2582             <strong class="reserved">return</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0)
<a id="L2583" name="L2583"></a>2583                     &amp;&amp; !disableRestoreFocus
<a id="L2584" name="L2584"></a>2584                     &amp;&amp; (<strong class="reserved">null</strong> == currentLightweightRequests);
<a id="L2585" name="L2585"></a>2585         <em class="brace">}</em>
<a id="L2586" name="L2586"></a>2586     <em class="brace">}</em>
<a id="L2587" name="L2587"></a>2587 
<a id="L2588" name="L2588"></a>2588     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21193.html" title="Multiple referred from 2 places.">isAutoFocusTransferEnabledFor</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L2589" name="L2589"></a>2589         <strong class="reserved">return</strong> <a href="../S/2110.html#L2580" title="Defined at 2580 in src/java/awt/KeyboardFocusManager.java.">isAutoFocusTransferEnabled</a>() &amp;&amp; comp.<a href="../S/2177.html#L8061" title="Defined at 8061 in src/java/awt/Component.java.">isAutoFocusTransferOnDisposal</a>();
<a id="L2590" name="L2590"></a>2590     <em class="brace">}</em>
<a id="L2591" name="L2591"></a>2591 
<div class="comment">
      Used to process exceptions in dispatching focus event (in focusLost/focusGained callbacks).
      @param ex previously caught exception that may be processed right here, or null
      @param comp the component to dispatch the event to
      @param event the event to dispatch to the component</div>
<a id="L2598" name="L2598"></a>2598     <strong class="reserved">static</strong> <strong class="reserved">private</strong> <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../R/13316.html" title="Multiple referred from 4 places.">dispatchAndCatchException</a>(<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> event) <em class="brace">{</em>
<a id="L2599" name="L2599"></a>2599         <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> retEx = <strong class="reserved">null</strong>;
<a id="L2600" name="L2600"></a>2600         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2601" name="L2601"></a>2601             comp.<a href="../D/14951.html" title="Multiple defined in 14 places.">dispatchEvent</a>(event);
<a id="L2602" name="L2602"></a>2602         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> re) <em class="brace">{</em>
<a id="L2603" name="L2603"></a>2603             retEx = re;
<a id="L2604" name="L2604"></a>2604         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a> er) <em class="brace">{</em>
<a id="L2605" name="L2605"></a>2605             retEx = er;
<a id="L2606" name="L2606"></a>2606         <em class="brace">}</em>
<a id="L2607" name="L2607"></a>2607         <strong class="reserved">if</strong> (retEx != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2608" name="L2608"></a>2608             <strong class="reserved">if</strong> (<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2609" name="L2609"></a>2609                 <a href="../D/23978.html" title="Multiple defined in 4 places.">handleException</a>(<a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>);
<a id="L2610" name="L2610"></a>2610             <em class="brace">}</em>
<a id="L2611" name="L2611"></a>2611             <strong class="reserved">return</strong> retEx;
<a id="L2612" name="L2612"></a>2612         <em class="brace">}</em>
<a id="L2613" name="L2613"></a>2613         <strong class="reserved">return</strong> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>;
<a id="L2614" name="L2614"></a>2614     <em class="brace">}</em>
<a id="L2615" name="L2615"></a>2615 
<a id="L2616" name="L2616"></a>2616     <strong class="reserved">static</strong> <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20094.html" title="Multiple referred from 10 places.">handleException</a>(<a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>) <em class="brace">{</em>
<a id="L2617" name="L2617"></a>2617         <a href="../S/5015.html#L111" title="Defined at 111 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/RegexParser.java.">ex</a>.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>();
<a id="L2618" name="L2618"></a>2618     <em class="brace">}</em>
<a id="L2619" name="L2619"></a>2619 
<a id="L2620" name="L2620"></a>2620     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/25119.html" title="Multiple referred from 2 places.">processCurrentLightweightRequests</a>() <em class="brace">{</em>
<a id="L2621" name="L2621"></a>2621         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L2622" name="L2622"></a>2622         <a href="../S/848.html#L83" title="Defined at 83 in src/java/util/LinkedList.java.">LinkedList</a>&lt;<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt; localLightweightRequests = <strong class="reserved">null</strong>;
<a id="L2623" name="L2623"></a>2623 
<a id="L2624" name="L2624"></a>2624         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> globalFocusOwner = manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2625" name="L2625"></a>2625         <strong class="reserved">if</strong> ((globalFocusOwner != <strong class="reserved">null</strong>) &amp;&amp;
<a id="L2626" name="L2626"></a>2626             (globalFocusOwner.appContext != AppContext.getAppContext()))
<a id="L2627" name="L2627"></a>2627         <em class="brace">{</em>
<a id="L2628" name="L2628"></a>2628             <em class="comment">// The current app context differs from the app context of a focus</em>
<a id="L2629" name="L2629"></a>2629             <em class="comment">// owner (and all pending lightweight requests), so we do nothing</em>
<a id="L2630" name="L2630"></a>2630             <em class="comment">// now and wait for a next event.</em>
<a id="L2631" name="L2631"></a>2631             <strong class="reserved">return</strong>;
<a id="L2632" name="L2632"></a>2632         <em class="brace">}</em>
<a id="L2633" name="L2633"></a>2633 
<a id="L2634" name="L2634"></a>2634         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<a id="L2635" name="L2635"></a>2635             <strong class="reserved">if</strong> (currentLightweightRequests != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2636" name="L2636"></a>2636                 clearingCurrentLightweightRequests = <strong class="reserved">true</strong>;
<a id="L2637" name="L2637"></a>2637                 disableRestoreFocus = <strong class="reserved">true</strong>;
<a id="L2638" name="L2638"></a>2638                 localLightweightRequests = currentLightweightRequests;
<a id="L2639" name="L2639"></a>2639                 allowSyncFocusRequests = (localLightweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &lt; 2);
<a id="L2640" name="L2640"></a>2640                 currentLightweightRequests = <strong class="reserved">null</strong>;
<a id="L2641" name="L2641"></a>2641             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2642" name="L2642"></a>2642                 <em class="comment">// do nothing</em>
<a id="L2643" name="L2643"></a>2643                 <strong class="reserved">return</strong>;
<a id="L2644" name="L2644"></a>2644             <em class="brace">}</em>
<a id="L2645" name="L2645"></a>2645         <em class="brace">}</em>
<a id="L2646" name="L2646"></a>2646 
<a id="L2647" name="L2647"></a>2647         <a href="../S/1726.html#L114" title="Defined at 114 in src/java/lang/Throwable.java.">Throwable</a> caughtEx = <strong class="reserved">null</strong>;
<a id="L2648" name="L2648"></a>2648         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2649" name="L2649"></a>2649             <strong class="reserved">if</strong> (localLightweightRequests != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2650" name="L2650"></a>2650                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> lastFocusOwner = <strong class="reserved">null</strong>;
<a id="L2651" name="L2651"></a>2651                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = <strong class="reserved">null</strong>;
<a id="L2652" name="L2652"></a>2652 
<a id="L2653" name="L2653"></a>2653                 <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt; <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a> = localLightweightRequests.<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>(); <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); ) <em class="brace">{</em>
<a id="L2654" name="L2654"></a>2654 
<a id="L2655" name="L2655"></a>2655                     currentFocusOwner = manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2656" name="L2656"></a>2656                     <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> lwFocusRequest =
<a id="L2657" name="L2657"></a>2657                         <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L2658" name="L2658"></a>2658 
<div class="comment">
                      WARNING: This is based on DKFM's logic solely!
                      We allow to trigger restoreFocus() in the dispatching process
                      only if we have the last request to dispatch. If the last request
                      fails, focus will be restored to either the component of the last
                      previously succedded request, or to to the focus owner that was
                      before this clearing process.</div>
<a id="L2668" name="L2668"></a>2668                     <strong class="reserved">if</strong> (!<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L2669" name="L2669"></a>2669                         disableRestoreFocus = <strong class="reserved">false</strong>;
<a id="L2670" name="L2670"></a>2670                     <em class="brace">}</em>
<a id="L2671" name="L2671"></a>2671 
<a id="L2672" name="L2672"></a>2672                     <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> currentFocusOwnerEvent = <strong class="reserved">null</strong>;
<div class="comment">
                      We're not dispatching FOCUS_LOST while the current focus owner is null.
                      But regardless of whether it's null or not, we're clearing ALL the local
                      lw requests.</div>
<a id="L2678" name="L2678"></a>2678                     <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2679" name="L2679"></a>2679                         currentFocusOwnerEvent = <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner,
<a id="L2680" name="L2680"></a>2680                                        <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2681" name="L2681"></a>2681                                        lwFocusRequest.temporary,
<a id="L2682" name="L2682"></a>2682                                        lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, lwFocusRequest.cause);
<a id="L2683" name="L2683"></a>2683                     <em class="brace">}</em>
<a id="L2684" name="L2684"></a>2684                     <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> newFocusOwnerEvent =
<a id="L2685" name="L2685"></a>2685                         <strong class="reserved">new</strong> CausedFocusEvent(lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>,
<a id="L2686" name="L2686"></a>2686                                        <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED,
<a id="L2687" name="L2687"></a>2687                                        lwFocusRequest.temporary,
<a id="L2688" name="L2688"></a>2688                                        currentFocusOwner == <strong class="reserved">null</strong> ? lastFocusOwner : currentFocusOwner,
<a id="L2689" name="L2689"></a>2689                                        lwFocusRequest.cause);
<a id="L2690" name="L2690"></a>2690 
<a id="L2691" name="L2691"></a>2691                     <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2692" name="L2692"></a>2692                         ((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) currentFocusOwnerEvent).isPosted = <strong class="reserved">true</strong>;
<a id="L2693" name="L2693"></a>2693                         caughtEx = <a href="../S/2110.html#L2598" title="Defined at 2598 in src/java/awt/KeyboardFocusManager.java.">dispatchAndCatchException</a>(caughtEx, currentFocusOwner, currentFocusOwnerEvent);
<a id="L2694" name="L2694"></a>2694                     <em class="brace">}</em>
<a id="L2695" name="L2695"></a>2695 
<a id="L2696" name="L2696"></a>2696                     ((<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a>) newFocusOwnerEvent).isPosted = <strong class="reserved">true</strong>;
<a id="L2697" name="L2697"></a>2697                     caughtEx = <a href="../S/2110.html#L2598" title="Defined at 2598 in src/java/awt/KeyboardFocusManager.java.">dispatchAndCatchException</a>(caughtEx, lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, newFocusOwnerEvent);
<a id="L2698" name="L2698"></a>2698 
<a id="L2699" name="L2699"></a>2699                     <strong class="reserved">if</strong> (manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>() == lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>) <em class="brace">{</em>
<a id="L2700" name="L2700"></a>2700                         lastFocusOwner = lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L2701" name="L2701"></a>2701                     <em class="brace">}</em>
<a id="L2702" name="L2702"></a>2702                 <em class="brace">}</em>
<a id="L2703" name="L2703"></a>2703             <em class="brace">}</em>
<a id="L2704" name="L2704"></a>2704         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L2705" name="L2705"></a>2705             clearingCurrentLightweightRequests = <strong class="reserved">false</strong>;
<a id="L2706" name="L2706"></a>2706             disableRestoreFocus = <strong class="reserved">false</strong>;
<a id="L2707" name="L2707"></a>2707             localLightweightRequests = <strong class="reserved">null</strong>;
<a id="L2708" name="L2708"></a>2708             allowSyncFocusRequests = <strong class="reserved">true</strong>;
<a id="L2709" name="L2709"></a>2709         <em class="brace">}</em>
<a id="L2710" name="L2710"></a>2710         <strong class="reserved">if</strong> (caughtEx <strong class="reserved">instanceof</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>) <em class="brace">{</em>
<a id="L2711" name="L2711"></a>2711             <strong class="reserved">throw</strong> (<a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>)caughtEx;
<a id="L2712" name="L2712"></a>2712         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (caughtEx <strong class="reserved">instanceof</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>) <em class="brace">{</em>
<a id="L2713" name="L2713"></a>2713             <strong class="reserved">throw</strong> (<a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>)caughtEx;
<a id="L2714" name="L2714"></a>2714         <em class="brace">}</em>
<a id="L2715" name="L2715"></a>2715     <em class="brace">}</em>
<a id="L2716" name="L2716"></a>2716 
<a id="L2717" name="L2717"></a>2717     <strong class="reserved">static</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> <a href="../R/26453.html" title="Multiple referred from 3 places.">retargetUnexpectedFocusEvent</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe) <em class="brace">{</em>
<a id="L2718" name="L2718"></a>2718         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2719" name="L2719"></a>2719             <em class="comment">// Any other case represents a failure condition which we did</em>
<a id="L2720" name="L2720"></a>2720             <em class="comment">// not expect. We need to clearFocusRequestList() and patch up</em>
<a id="L2721" name="L2721"></a>2721             <em class="comment">// the event as best as possible.</em>
<a id="L2722" name="L2722"></a>2722 
<a id="L2723" name="L2723"></a>2723             <strong class="reserved">if</strong> (<a href="../S/2110.html#L2972" title="Defined at 2972 in src/java/awt/KeyboardFocusManager.java.">removeFirstRequest</a>()) <em class="brace">{</em>
<a id="L2724" name="L2724"></a>2724                 <strong class="reserved">return</strong> (<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)<a href="../S/2110.html#L2904" title="Defined at 2904 in src/java/awt/KeyboardFocusManager.java.">retargetFocusEvent</a>(fe);
<a id="L2725" name="L2725"></a>2725             <em class="brace">}</em>
<a id="L2726" name="L2726"></a>2726 
<a id="L2727" name="L2727"></a>2727             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = fe.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L2728" name="L2728"></a>2728             <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> opposite = fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>();
<a id="L2729" name="L2729"></a>2729             <strong class="reserved">boolean</strong> temporary = <strong class="reserved">false</strong>;
<a id="L2730" name="L2730"></a>2730             <strong class="reserved">if</strong> (fe.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST &amp;&amp;
<a id="L2731" name="L2731"></a>2731                 (opposite == <strong class="reserved">null</strong> || <a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>(opposite, <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>)))
<a id="L2732" name="L2732"></a>2732             <em class="brace">{</em>
<a id="L2733" name="L2733"></a>2733                 temporary = <strong class="reserved">true</strong>;
<a id="L2734" name="L2734"></a>2734             <em class="brace">}</em>
<a id="L2735" name="L2735"></a>2735             <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>, fe.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>(), temporary, opposite,
<a id="L2736" name="L2736"></a>2736                                         CausedFocusEvent.Cause.NATIVE_SYSTEM);
<a id="L2737" name="L2737"></a>2737         <em class="brace">}</em>
<a id="L2738" name="L2738"></a>2738     <em class="brace">}</em>
<a id="L2739" name="L2739"></a>2739 
<a id="L2740" name="L2740"></a>2740     <strong class="reserved">static</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> <a href="../S/2110.html#L2950" title="Referred from 2950 in src/java/awt/KeyboardFocusManager.java.">retargetFocusGained</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe) <em class="brace">{</em>
<a id="L2741" name="L2741"></a>2741         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> (fe.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED);
<a id="L2742" name="L2742"></a>2742 
<a id="L2743" name="L2743"></a>2743         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>().
<a id="L2744" name="L2744"></a>2744             <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2745" name="L2745"></a>2745         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = fe.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>();
<a id="L2746" name="L2746"></a>2746         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> opposite = fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>();
<a id="L2747" name="L2747"></a>2747         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> nativeSource = <a href="../S/2110.html#L3053" title="Defined at 3053 in src/java/awt/KeyboardFocusManager.java.">getHeavyweight</a>(<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>);
<a id="L2748" name="L2748"></a>2748 
<a id="L2749" name="L2749"></a>2749         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2750" name="L2750"></a>2750             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3108" title="Defined at 3108 in src/java/awt/KeyboardFocusManager.java.">getFirstHWRequest</a>();
<a id="L2751" name="L2751"></a>2751 
<a id="L2752" name="L2752"></a>2752             <strong class="reserved">if</strong> (hwFocusRequest == <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER)
<a id="L2753" name="L2753"></a>2753             <em class="brace">{</em>
<a id="L2754" name="L2754"></a>2754                 <strong class="reserved">return</strong> <a href="../S/2110.html#L2717" title="Defined at 2717 in src/java/awt/KeyboardFocusManager.java.">retargetUnexpectedFocusEvent</a>(fe);
<a id="L2755" name="L2755"></a>2755             <em class="brace">}</em>
<a id="L2756" name="L2756"></a>2756 
<a id="L2757" name="L2757"></a>2757             <strong class="reserved">if</strong> (<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> != <strong class="reserved">null</strong> &amp;&amp; nativeSource == <strong class="reserved">null</strong> &amp;&amp; hwFocusRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2758" name="L2758"></a>2758                 <em class="comment">// if source w/o peer and</em>
<a id="L2759" name="L2759"></a>2759                 <em class="comment">// if source is equal to first lightweight</em>
<a id="L2760" name="L2760"></a>2760                 <em class="comment">// then we should correct source and nativeSource</em>
<a id="L2761" name="L2761"></a>2761                 <strong class="reserved">if</strong> (<a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> == hwFocusRequest.<a href="../S/2110.html#L2235" title="Defined at 2235 in src/java/awt/KeyboardFocusManager.java.">getFirstLightweightRequest</a>().<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>)
<a id="L2762" name="L2762"></a>2762                 <em class="brace">{</em>
<a id="L2763" name="L2763"></a>2763                     <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> = hwFocusRequest.heavyweight;
<a id="L2764" name="L2764"></a>2764                     nativeSource = <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>; <em class="comment">// source is heavuweight itself</em>
<a id="L2765" name="L2765"></a>2765                 <em class="brace">}</em>
<a id="L2766" name="L2766"></a>2766             <em class="brace">}</em>
<a id="L2767" name="L2767"></a>2767             <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2768" name="L2768"></a>2768                 nativeSource == hwFocusRequest.heavyweight)
<a id="L2769" name="L2769"></a>2769             <em class="brace">{</em>
<a id="L2770" name="L2770"></a>2770                 <em class="comment">// Focus change as a result of a known call to requestFocus(),</em>
<a id="L2771" name="L2771"></a>2771                 <em class="comment">// or known click on a peer focusable heavyweight Component.</em>
<a id="L2772" name="L2772"></a>2772 
<a id="L2773" name="L2773"></a>2773                 heavyweightRequests.<a href="../D/30795.html" title="Multiple defined in 5 places.">removeFirst</a>();
<a id="L2774" name="L2774"></a>2774 
<a id="L2775" name="L2775"></a>2775                 <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> lwFocusRequest =
<a id="L2776" name="L2776"></a>2776                     hwFocusRequest.lightweightRequests.<a href="../D/30795.html" title="Multiple defined in 5 places.">removeFirst</a>();
<a id="L2777" name="L2777"></a>2777 
<a id="L2778" name="L2778"></a>2778                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> newSource = lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>;
<a id="L2779" name="L2779"></a>2779                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<div class="comment">
                      Since we receive FOCUS_GAINED when current focus
                      owner is not null, correcponding FOCUS_LOST is supposed
                      to be lost.  And so,  we keep new focus owner
                      to determine synthetic FOCUS_LOST event which will be
                      generated by KeyboardFocusManager for this FOCUS_GAINED.
                      This code based on knowledge of
                      DefaultKeyboardFocusManager's implementation and might
                      be not applicable for another KeyboardFocusManager.</div>
<a id="L2791" name="L2791"></a>2791                     newFocusOwner = newSource;
<a id="L2792" name="L2792"></a>2792                 <em class="brace">}</em>
<a id="L2793" name="L2793"></a>2793 
<a id="L2794" name="L2794"></a>2794                 <strong class="reserved">boolean</strong> temporary = (opposite == <strong class="reserved">null</strong> ||
<a id="L2795" name="L2795"></a>2795                                      <a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>(newSource, opposite))
<a id="L2796" name="L2796"></a>2796                         ? <strong class="reserved">false</strong>
<a id="L2797" name="L2797"></a>2797                         : lwFocusRequest.temporary;
<a id="L2798" name="L2798"></a>2798 
<a id="L2799" name="L2799"></a>2799                 <strong class="reserved">if</strong> (hwFocusRequest.lightweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L2800" name="L2800"></a>2800                     currentLightweightRequests =
<a id="L2801" name="L2801"></a>2801                         hwFocusRequest.lightweightRequests;
<a id="L2802" name="L2802"></a>2802                     <a href="../S/2178.html#L97" title="Defined at 97 in src/java/awt/EventQueue.java.">EventQueue</a>.<a href="../D/25068.html" title="Multiple defined in 2 places.">invokeLater</a>(<strong class="reserved">new</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a>() <em class="brace">{</em>
<a id="L2803" name="L2803"></a>2803                             <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L2804" name="L2804"></a>2804                                 <a href="../S/2110.html#L2620" title="Defined at 2620 in src/java/awt/KeyboardFocusManager.java.">processCurrentLightweightRequests</a>();
<a id="L2805" name="L2805"></a>2805                             <em class="brace">}</em>
<a id="L2806" name="L2806"></a>2806                         <em class="brace">}</em>);
<a id="L2807" name="L2807"></a>2807                 <em class="brace">}</em>
<a id="L2808" name="L2808"></a>2808 
<a id="L2809" name="L2809"></a>2809                 <em class="comment">// 'opposite' will be fixed by</em>
<a id="L2810" name="L2810"></a>2810                 <em class="comment">// DefaultKeyboardFocusManager.realOppositeComponent</em>
<a id="L2811" name="L2811"></a>2811                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(newSource,
<a id="L2812" name="L2812"></a>2812                                       <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED, temporary,
<a id="L2813" name="L2813"></a>2813                                       opposite, lwFocusRequest.cause);
<a id="L2814" name="L2814"></a>2814             <em class="brace">}</em>
<a id="L2815" name="L2815"></a>2815 
<a id="L2816" name="L2816"></a>2816             <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>
<a id="L2817" name="L2817"></a>2817                 &amp;&amp; currentFocusOwner.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>() == <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a>
<a id="L2818" name="L2818"></a>2818                 &amp;&amp; (hwFocusRequest == <strong class="reserved">null</strong> || <a href="../S/2041.html#L132" title="Defined at 132 in src/java/nio/channels/Pipe.java.">source</a> != hwFocusRequest.heavyweight))
<a id="L2819" name="L2819"></a>2819             <em class="brace">{</em>
<a id="L2820" name="L2820"></a>2820                 <em class="comment">// Special case for FOCUS_GAINED in top-levels</em>
<a id="L2821" name="L2821"></a>2821                 <em class="comment">// If it arrives as the result of activation we should skip it</em>
<a id="L2822" name="L2822"></a>2822                 <em class="comment">// This event will not have appropriate request record and</em>
<a id="L2823" name="L2823"></a>2823                 <em class="comment">// on arrival there will be already some focus owner set.</em>
<a id="L2824" name="L2824"></a>2824                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED, <strong class="reserved">false</strong>,
<a id="L2825" name="L2825"></a>2825                                             <strong class="reserved">null</strong>, CausedFocusEvent.Cause.ACTIVATION);
<a id="L2826" name="L2826"></a>2826             <em class="brace">}</em>
<a id="L2827" name="L2827"></a>2827 
<a id="L2828" name="L2828"></a>2828             <strong class="reserved">return</strong> <a href="../S/2110.html#L2717" title="Defined at 2717 in src/java/awt/KeyboardFocusManager.java.">retargetUnexpectedFocusEvent</a>(fe);
<a id="L2829" name="L2829"></a>2829         <em class="brace">}</em> <em class="comment">// end synchronized(heavyweightRequests)</em>
<a id="L2830" name="L2830"></a>2830     <em class="brace">}</em>
<a id="L2831" name="L2831"></a>2831 
<a id="L2832" name="L2832"></a>2832     <strong class="reserved">static</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> <a href="../S/2110.html#L2954" title="Referred from 2954 in src/java/awt/KeyboardFocusManager.java.">retargetFocusLost</a>(<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe) <em class="brace">{</em>
<a id="L2833" name="L2833"></a>2833         <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a> (fe.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST);
<a id="L2834" name="L2834"></a>2834 
<a id="L2835" name="L2835"></a>2835         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> currentFocusOwner = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>().
<a id="L2836" name="L2836"></a>2836             <a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>();
<a id="L2837" name="L2837"></a>2837         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> opposite = fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>();
<a id="L2838" name="L2838"></a>2838         <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> nativeOpposite = <a href="../S/2110.html#L3053" title="Defined at 3053 in src/java/awt/KeyboardFocusManager.java.">getHeavyweight</a>(opposite);
<a id="L2839" name="L2839"></a>2839 
<a id="L2840" name="L2840"></a>2840         <strong class="reserved">synchronized</strong> (heavyweightRequests) <em class="brace">{</em>
<a id="L2841" name="L2841"></a>2841             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3108" title="Defined at 3108 in src/java/awt/KeyboardFocusManager.java.">getFirstHWRequest</a>();
<a id="L2842" name="L2842"></a>2842 
<a id="L2843" name="L2843"></a>2843             <strong class="reserved">if</strong> (hwFocusRequest == <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a>.CLEAR_GLOBAL_FOCUS_OWNER)
<a id="L2844" name="L2844"></a>2844             <em class="brace">{</em>
<a id="L2845" name="L2845"></a>2845                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2846" name="L2846"></a>2846                     <em class="comment">// Call to KeyboardFocusManager.clearGlobalFocusOwner()</em>
<a id="L2847" name="L2847"></a>2847                     heavyweightRequests.<a href="../D/30795.html" title="Multiple defined in 5 places.">removeFirst</a>();
<a id="L2848" name="L2848"></a>2848                     <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner,
<a id="L2849" name="L2849"></a>2849                                                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST, <strong class="reserved">false</strong>, <strong class="reserved">null</strong>,
<a id="L2850" name="L2850"></a>2850                                                 CausedFocusEvent.Cause.CLEAR_GLOBAL_FOCUS_OWNER);
<a id="L2851" name="L2851"></a>2851                 <em class="brace">}</em>
<a id="L2852" name="L2852"></a>2852 
<a id="L2853" name="L2853"></a>2853                 <em class="comment">// Otherwise, fall through to failure case below</em>
<a id="L2854" name="L2854"></a>2854 
<a id="L2855" name="L2855"></a>2855             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (opposite == <strong class="reserved">null</strong>)
<a id="L2856" name="L2856"></a>2856             <em class="brace">{</em>
<a id="L2857" name="L2857"></a>2857                 <em class="comment">// Focus leaving application</em>
<a id="L2858" name="L2858"></a>2858                 <strong class="reserved">if</strong> (currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2859" name="L2859"></a>2859                     <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner,
<a id="L2860" name="L2860"></a>2860                                                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2861" name="L2861"></a>2861                                                 <strong class="reserved">true</strong>, <strong class="reserved">null</strong>, CausedFocusEvent.Cause.ACTIVATION);
<a id="L2862" name="L2862"></a>2862                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2863" name="L2863"></a>2863                     <strong class="reserved">return</strong> fe;
<a id="L2864" name="L2864"></a>2864                 <em class="brace">}</em>
<a id="L2865" name="L2865"></a>2865             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2866" name="L2866"></a>2866                        (nativeOpposite == hwFocusRequest.heavyweight ||
<a id="L2867" name="L2867"></a>2867                         nativeOpposite == <strong class="reserved">null</strong> &amp;&amp;
<a id="L2868" name="L2868"></a>2868                         opposite == hwFocusRequest.<a href="../S/2110.html#L2235" title="Defined at 2235 in src/java/awt/KeyboardFocusManager.java.">getFirstLightweightRequest</a>().<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>))
<a id="L2869" name="L2869"></a>2869             <em class="brace">{</em>
<a id="L2870" name="L2870"></a>2870                 <strong class="reserved">if</strong> (currentFocusOwner == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2871" name="L2871"></a>2871                     <strong class="reserved">return</strong> fe;
<a id="L2872" name="L2872"></a>2872                 <em class="brace">}</em>
<a id="L2873" name="L2873"></a>2873                 <em class="comment">// Focus change as a result of a known call to requestFocus(),</em>
<a id="L2874" name="L2874"></a>2874                 <em class="comment">// or click on a peer focusable heavyweight Component.</em>
<a id="L2875" name="L2875"></a>2875                 <em class="comment">// If a focus transfer is made across top-levels, then the</em>
<a id="L2876" name="L2876"></a>2876                 <em class="comment">// FOCUS_LOST event is always temporary, and the FOCUS_GAINED</em>
<a id="L2877" name="L2877"></a>2877                 <em class="comment">// event is always permanent. Otherwise, the stored temporary</em>
<a id="L2878" name="L2878"></a>2878                 <em class="comment">// value is honored.</em>
<a id="L2879" name="L2879"></a>2879 
<a id="L2880" name="L2880"></a>2880                 <a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a> lwFocusRequest =
<a id="L2881" name="L2881"></a>2881                     hwFocusRequest.lightweightRequests.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>();
<a id="L2882" name="L2882"></a>2882 
<a id="L2883" name="L2883"></a>2883                 <strong class="reserved">boolean</strong> temporary = <a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>(opposite, currentFocusOwner)
<a id="L2884" name="L2884"></a>2884                     ? <strong class="reserved">true</strong>
<a id="L2885" name="L2885"></a>2885                     : lwFocusRequest.temporary;
<a id="L2886" name="L2886"></a>2886 
<a id="L2887" name="L2887"></a>2887                 <strong class="reserved">return</strong> <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2888" name="L2888"></a>2888                                             temporary, lwFocusRequest.<a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>, lwFocusRequest.cause);
<a id="L2889" name="L2889"></a>2889             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/2110.html#L3023" title="Defined at 3023 in src/java/awt/KeyboardFocusManager.java.">focusedWindowChanged</a>(opposite, currentFocusOwner)) <em class="brace">{</em>
<a id="L2890" name="L2890"></a>2890                 <em class="comment">// If top-level changed there might be no focus request in a list</em>
<a id="L2891" name="L2891"></a>2891                 <em class="comment">// But we know the opposite, we now it is temporary - dispatch the event.</em>
<a id="L2892" name="L2892"></a>2892                 <strong class="reserved">if</strong> (!fe.<a href="../D/26344.html" title="Multiple defined in 2 places.">isTemporary</a>() &amp;&amp; currentFocusOwner != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2893" name="L2893"></a>2893                     <em class="comment">// Create copy of the event with only difference in temporary parameter.</em>
<a id="L2894" name="L2894"></a>2894                     fe = <strong class="reserved">new</strong> CausedFocusEvent(currentFocusOwner, <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST,
<a id="L2895" name="L2895"></a>2895                                               <strong class="reserved">true</strong>, opposite, CausedFocusEvent.Cause.ACTIVATION);
<a id="L2896" name="L2896"></a>2896                 <em class="brace">}</em>
<a id="L2897" name="L2897"></a>2897                 <strong class="reserved">return</strong> fe;
<a id="L2898" name="L2898"></a>2898             <em class="brace">}</em>
<a id="L2899" name="L2899"></a>2899 
<a id="L2900" name="L2900"></a>2900             <strong class="reserved">return</strong> <a href="../S/2110.html#L2717" title="Defined at 2717 in src/java/awt/KeyboardFocusManager.java.">retargetUnexpectedFocusEvent</a>(fe);
<a id="L2901" name="L2901"></a>2901         <em class="brace">}</em>  <em class="comment">// end synchronized(heavyweightRequests)</em>
<a id="L2902" name="L2902"></a>2902     <em class="brace">}</em>
<a id="L2903" name="L2903"></a>2903 
<a id="L2904" name="L2904"></a>2904     <strong class="reserved">static</strong> <a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> <a href="../R/26448.html" title="Multiple referred from 2 places.">retargetFocusEvent</a>(<a href="../S/2213.html#L80" title="Defined at 80 in src/java/awt/AWTEvent.java.">AWTEvent</a> event) <em class="brace">{</em>
<a id="L2905" name="L2905"></a>2905         <strong class="reserved">if</strong> (clearingCurrentLightweightRequests) <em class="brace">{</em>
<a id="L2906" name="L2906"></a>2906             <strong class="reserved">return</strong> event;
<a id="L2907" name="L2907"></a>2907         <em class="brace">}</em>
<a id="L2908" name="L2908"></a>2908 
<a id="L2909" name="L2909"></a>2909         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager = <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L2910" name="L2910"></a>2910         <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER)) <em class="brace">{</em>
<a id="L2911" name="L2911"></a>2911             <strong class="reserved">if</strong> (event <strong class="reserved">instanceof</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> || event <strong class="reserved">instanceof</strong> <a href="../S/2398.html#L59" title="Defined at 59 in src/java/awt/event/WindowEvent.java.">WindowEvent</a>) <em class="brace">{</em>
<a id="L2912" name="L2912"></a>2912                 focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("&gt;&gt;&gt; {0}", <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(event));
<a id="L2913" name="L2913"></a>2913             <em class="brace">}</em>
<a id="L2914" name="L2914"></a>2914             <strong class="reserved">if</strong> (focusLog.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINER) &amp;&amp; event <strong class="reserved">instanceof</strong> <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>) <em class="brace">{</em>
<a id="L2915" name="L2915"></a>2915                 focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("    focus owner is {0}",
<a id="L2916" name="L2916"></a>2916                                <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>()));
<a id="L2917" name="L2917"></a>2917                 focusLog.<a href="../D/16276.html" title="Multiple defined in 5 places.">finer</a>("&gt;&gt;&gt; {0}", <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(event));
<a id="L2918" name="L2918"></a>2918             <em class="brace">}</em>
<a id="L2919" name="L2919"></a>2919         <em class="brace">}</em>
<a id="L2920" name="L2920"></a>2920 
<a id="L2921" name="L2921"></a>2921         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<div class="comment">
              This code handles FOCUS_LOST event which is generated by
              DefaultKeyboardFocusManager for FOCUS_GAINED.
              This code based on knowledge of DefaultKeyboardFocusManager's
              implementation and might be not applicable for another
              KeyboardFocusManager.
              Fix for 4472032</div>
<a id="L2932" name="L2932"></a>2932             <strong class="reserved">if</strong> (newFocusOwner != <strong class="reserved">null</strong> &amp;&amp;
<a id="L2933" name="L2933"></a>2933                 event.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() == <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST)
<a id="L2934" name="L2934"></a>2934             <em class="brace">{</em>
<a id="L2935" name="L2935"></a>2935                 <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a> fe = (<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)event;
<a id="L2936" name="L2936"></a>2936 
<a id="L2937" name="L2937"></a>2937                 <strong class="reserved">if</strong> (manager.<a href="../S/2110.html#L498" title="Defined at 498 in src/java/awt/KeyboardFocusManager.java.">getGlobalFocusOwner</a>() == fe.<a href="../D/17859.html" title="Multiple defined in 28 places.">getComponent</a>() &amp;&amp;
<a id="L2938" name="L2938"></a>2938                     fe.<a href="../S/2416.html#L216" title="Defined at 216 in src/java/awt/event/FocusEvent.java.">getOppositeComponent</a>() == newFocusOwner)
<a id="L2939" name="L2939"></a>2939                 <em class="brace">{</em>
<a id="L2940" name="L2940"></a>2940                     newFocusOwner = <strong class="reserved">null</strong>;
<a id="L2941" name="L2941"></a>2941                     <strong class="reserved">return</strong> event;
<a id="L2942" name="L2942"></a>2942                 <em class="brace">}</em>
<a id="L2943" name="L2943"></a>2943             <em class="brace">}</em>
<a id="L2944" name="L2944"></a>2944         <em class="brace">}</em>
<a id="L2945" name="L2945"></a>2945 
<a id="L2946" name="L2946"></a>2946         <a href="../S/2110.html#L2620" title="Defined at 2620 in src/java/awt/KeyboardFocusManager.java.">processCurrentLightweightRequests</a>();
<a id="L2947" name="L2947"></a>2947 
<a id="L2948" name="L2948"></a>2948         <strong class="reserved">switch</strong> (event.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>()) <em class="brace">{</em>
<a id="L2949" name="L2949"></a>2949             <strong class="reserved">case</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_GAINED: <em class="brace">{</em>
<a id="L2950" name="L2950"></a>2950                 event = <a href="../S/2110.html#L2740" title="Defined at 2740 in src/java/awt/KeyboardFocusManager.java.">retargetFocusGained</a>((<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)event);
<a id="L2951" name="L2951"></a>2951                 <strong class="reserved">break</strong>;
<a id="L2952" name="L2952"></a>2952             <em class="brace">}</em>
<a id="L2953" name="L2953"></a>2953             <strong class="reserved">case</strong> <a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>.FOCUS_LOST: <em class="brace">{</em>
<a id="L2954" name="L2954"></a>2954                 event = <a href="../S/2110.html#L2832" title="Defined at 2832 in src/java/awt/KeyboardFocusManager.java.">retargetFocusLost</a>((<a href="../S/2416.html#L66" title="Defined at 66 in src/java/awt/event/FocusEvent.java.">FocusEvent</a>)event);
<a id="L2955" name="L2955"></a>2955                 <strong class="reserved">break</strong>;
<a id="L2956" name="L2956"></a>2956             <em class="brace">}</em>
<a id="L2957" name="L2957"></a>2957             <strong class="reserved">default</strong>:
<div class="comment">
                 /* do nothing */</div>
<a id="L2959" name="L2959"></a>2959         <em class="brace">}</em>
<a id="L2960" name="L2960"></a>2960         <strong class="reserved">return</strong> event;
<a id="L2961" name="L2961"></a>2961     <em class="brace">}</em>
<a id="L2962" name="L2962"></a>2962 
<div class="comment">
      Clears markers queue
      This method is not intended to be overridden by KFM's.
      Only DefaultKeyboardFocusManager can implement it.
      @since 1.5</div>
<a id="L2969" name="L2969"></a>2969     <strong class="reserved">void</strong> <a href="../R/11523.html" title="Multiple referred from 2 places.">clearMarkers</a>() <em class="brace">{</em>
<a id="L2970" name="L2970"></a>2970     <em class="brace">}</em>
<a id="L2971" name="L2971"></a>2971 
<a id="L2972" name="L2972"></a>2972     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/2110.html#L2723" title="Referred from 2723 in src/java/awt/KeyboardFocusManager.java.">removeFirstRequest</a>() <em class="brace">{</em>
<a id="L2973" name="L2973"></a>2973         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager =
<a id="L2974" name="L2974"></a>2974             <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L2975" name="L2975"></a>2975 
<a id="L2976" name="L2976"></a>2976         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<a id="L2977" name="L2977"></a>2977             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3108" title="Defined at 3108 in src/java/awt/KeyboardFocusManager.java.">getFirstHWRequest</a>();
<a id="L2978" name="L2978"></a>2978 
<a id="L2979" name="L2979"></a>2979             <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2980" name="L2980"></a>2980                 heavyweightRequests.<a href="../D/30795.html" title="Multiple defined in 5 places.">removeFirst</a>();
<a id="L2981" name="L2981"></a>2981                 <strong class="reserved">if</strong> (hwFocusRequest.lightweightRequests != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2982" name="L2982"></a>2982                     <strong class="reserved">for</strong> (<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../S/2110.html#L2170" title="Defined at 2170 in src/java/awt/KeyboardFocusManager.java.">LightweightFocusRequest</a>&gt; lwIter = hwFocusRequest.lightweightRequests.
<a id="L2983" name="L2983"></a>2983                              <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>();
<a id="L2984" name="L2984"></a>2984                          lwIter.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>(); )
<a id="L2985" name="L2985"></a>2985                     <em class="brace">{</em>
<a id="L2986" name="L2986"></a>2986                         manager.<a href="../D/14836.html" title="Multiple defined in 2 places.">dequeueKeyEvents</a>
<a id="L2987" name="L2987"></a>2987                             (-1, lwIter.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>().
<a id="L2988" name="L2988"></a>2988                              <a href="../S/6658.html#L277" title="Defined at 277 in src/com/sun/java/swing/plaf/motif/MotifBorders.java.">component</a>);
<a id="L2989" name="L2989"></a>2989                     <em class="brace">}</em>
<a id="L2990" name="L2990"></a>2990                 <em class="brace">}</em>
<a id="L2991" name="L2991"></a>2991             <em class="brace">}</em>
<a id="L2992" name="L2992"></a>2992             <em class="comment">// Fix for 4799136 - clear type-ahead markers if requests queue is empty</em>
<a id="L2993" name="L2993"></a>2993             <em class="comment">// We do it here because this method is called only when problems happen</em>
<a id="L2994" name="L2994"></a>2994             <strong class="reserved">if</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L2995" name="L2995"></a>2995                 manager.<a href="../D/12852.html" title="Multiple defined in 2 places.">clearMarkers</a>();
<a id="L2996" name="L2996"></a>2996             <em class="brace">}</em>
<a id="L2997" name="L2997"></a>2997             <strong class="reserved">return</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0);
<a id="L2998" name="L2998"></a>2998         <em class="brace">}</em>
<a id="L2999" name="L2999"></a>2999     <em class="brace">}</em>
<a id="L3000" name="L3000"></a>3000     <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/25999.html" title="Multiple referred from 2 places.">removeLastFocusRequest</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> heavyweight) <em class="brace">{</em>
<a id="L3001" name="L3001"></a>3001         <strong class="reserved">if</strong> (<a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/25833.html" title="Multiple defined in 6 places.">isLoggable</a>(PlatformLogger.<a href="../S/1180.html#L66" title="Defined at 66 in src/java/util/logging/Level.java.">Level</a>.FINE)) <em class="brace">{</em>
<a id="L3002" name="L3002"></a>3002             <strong class="reserved">if</strong> (heavyweight == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3003" name="L3003"></a>3003                 <a href="../D/27040.html" title="Multiple defined in 16 places.">log</a>.<a href="../D/16274.html" title="Multiple defined in 5 places.">fine</a>("Assertion (heavyweight != null) failed");
<a id="L3004" name="L3004"></a>3004             <em class="brace">}</em>
<a id="L3005" name="L3005"></a>3005         <em class="brace">}</em>
<a id="L3006" name="L3006"></a>3006 
<a id="L3007" name="L3007"></a>3007         <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a> manager =
<a id="L3008" name="L3008"></a>3008             <a href="../S/2110.html#L107" title="Defined at 107 in src/java/awt/KeyboardFocusManager.java.">KeyboardFocusManager</a>.<a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>();
<a id="L3009" name="L3009"></a>3009         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<a id="L3010" name="L3010"></a>3010             <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> hwFocusRequest = <a href="../S/2110.html#L3100" title="Defined at 3100 in src/java/awt/KeyboardFocusManager.java.">getLastHWRequest</a>();
<a id="L3011" name="L3011"></a>3011             <strong class="reserved">if</strong> (hwFocusRequest != <strong class="reserved">null</strong> &amp;&amp;
<a id="L3012" name="L3012"></a>3012                 hwFocusRequest.heavyweight == heavyweight) <em class="brace">{</em>
<a id="L3013" name="L3013"></a>3013                 heavyweightRequests.<a href="../D/30847.html" title="Multiple defined in 5 places.">removeLast</a>();
<a id="L3014" name="L3014"></a>3014             <em class="brace">}</em>
<a id="L3015" name="L3015"></a>3015             <em class="comment">// Fix for 4799136 - clear type-ahead markers if requests queue is empty</em>
<a id="L3016" name="L3016"></a>3016             <em class="comment">// We do it here because this method is called only when problems happen</em>
<a id="L3017" name="L3017"></a>3017             <strong class="reserved">if</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L3018" name="L3018"></a>3018                 manager.<a href="../D/12852.html" title="Multiple defined in 2 places.">clearMarkers</a>();
<a id="L3019" name="L3019"></a>3019             <em class="brace">}</em>
<a id="L3020" name="L3020"></a>3020         <em class="brace">}</em>
<a id="L3021" name="L3021"></a>3021     <em class="brace">}</em>
<a id="L3022" name="L3022"></a>3022 
<a id="L3023" name="L3023"></a>3023     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/14722.html" title="Multiple referred from 2 places.">focusedWindowChanged</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>) <em class="brace">{</em>
<a id="L3024" name="L3024"></a>3024         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> wto = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>);
<a id="L3025" name="L3025"></a>3025         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> wfrom = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(<a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>);
<a id="L3026" name="L3026"></a>3026         <strong class="reserved">if</strong> (wto == <strong class="reserved">null</strong> &amp;&amp; wfrom == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3027" name="L3027"></a>3027             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3028" name="L3028"></a>3028         <em class="brace">}</em>
<a id="L3029" name="L3029"></a>3029         <strong class="reserved">if</strong> (wto == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3030" name="L3030"></a>3030             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3031" name="L3031"></a>3031         <em class="brace">}</em>
<a id="L3032" name="L3032"></a>3032         <strong class="reserved">if</strong> (wfrom == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3033" name="L3033"></a>3033             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3034" name="L3034"></a>3034         <em class="brace">}</em>
<a id="L3035" name="L3035"></a>3035         <strong class="reserved">return</strong> (wto != wfrom);
<a id="L3036" name="L3036"></a>3036     <em class="brace">}</em>
<a id="L3037" name="L3037"></a>3037 
<a id="L3038" name="L3038"></a>3038     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/22099.html" title="Multiple referred from 14 places.">isTemporary</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>, <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>) <em class="brace">{</em>
<a id="L3039" name="L3039"></a>3039         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> wto = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(<a href="../D/35341.html" title="Multiple defined in 2 places.">to</a>);
<a id="L3040" name="L3040"></a>3040         <a href="../S/2106.html#L148" title="Defined at 148 in src/java/awt/Window.java.">Window</a> wfrom = SunToolkit.<a href="../S/2177.html#L8996" title="Defined at 8996 in src/java/awt/Component.java.">getContainingWindow</a>(<a href="../D/16586.html" title="Multiple defined in 37 places.">from</a>);
<a id="L3041" name="L3041"></a>3041         <strong class="reserved">if</strong> (wto == <strong class="reserved">null</strong> &amp;&amp; wfrom == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3042" name="L3042"></a>3042             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3043" name="L3043"></a>3043         <em class="brace">}</em>
<a id="L3044" name="L3044"></a>3044         <strong class="reserved">if</strong> (wto == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3045" name="L3045"></a>3045             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L3046" name="L3046"></a>3046         <em class="brace">}</em>
<a id="L3047" name="L3047"></a>3047         <strong class="reserved">if</strong> (wfrom == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3048" name="L3048"></a>3048             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3049" name="L3049"></a>3049         <em class="brace">}</em>
<a id="L3050" name="L3050"></a>3050         <strong class="reserved">return</strong> (wto != wfrom);
<a id="L3051" name="L3051"></a>3051     <em class="brace">}</em>
<a id="L3052" name="L3052"></a>3052 
<a id="L3053" name="L3053"></a>3053     <strong class="reserved">static</strong> <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../R/16873.html" title="Multiple referred from 3 places.">getHeavyweight</a>(<a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> comp) <em class="brace">{</em>
<a id="L3054" name="L3054"></a>3054         <strong class="reserved">if</strong> (comp == <strong class="reserved">null</strong> || comp.<a href="../D/21465.html" title="Multiple defined in 3 places.">getPeer</a>() == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3055" name="L3055"></a>3055             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L3056" name="L3056"></a>3056         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (comp.<a href="../D/21465.html" title="Multiple defined in 3 places.">getPeer</a>() <strong class="reserved">instanceof</strong> <a href="../S/2206.html#L42" title="Defined at 42 in src/java/awt/peer/LightweightPeer.java.">LightweightPeer</a>) <em class="brace">{</em>
<a id="L3057" name="L3057"></a>3057             <strong class="reserved">return</strong> comp.<a href="../D/20835.html" title="Multiple defined in 2 places.">getNativeContainer</a>();
<a id="L3058" name="L3058"></a>3058         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3059" name="L3059"></a>3059             <strong class="reserved">return</strong> comp;
<a id="L3060" name="L3060"></a>3060         <em class="brace">}</em>
<a id="L3061" name="L3061"></a>3061     <em class="brace">}</em>
<a id="L3062" name="L3062"></a>3062 
<a id="L3063" name="L3063"></a>3063     <strong class="reserved">static</strong> <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> proxyActive;
<a id="L3064" name="L3064"></a>3064     <em class="comment">// Accessor to private field isProxyActive of KeyEvent</em>
<a id="L3065" name="L3065"></a>3065     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../S/2110.html#L3094" title="Referred from 3094 in src/java/awt/KeyboardFocusManager.java.">isProxyActiveImpl</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L3066" name="L3066"></a>3066         <strong class="reserved">if</strong> (proxyActive == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3067" name="L3067"></a>3067             proxyActive =  <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(<strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a>&gt;() <em class="brace">{</em>
<a id="L3068" name="L3068"></a>3068                     <strong class="reserved">public</strong> <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L3069" name="L3069"></a>3069                         <a href="../D/3142.html" title="Multiple defined in 10 places.">Field</a> field = <strong class="reserved">null</strong>;
<a id="L3070" name="L3070"></a>3070                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L3071" name="L3071"></a>3071                             field = <a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a>.<strong class="reserved">class</strong>.<a href="../S/1722.html#L2065" title="Defined at 2065 in src/java/lang/Class.java.">getDeclaredField</a>("isProxyActive");
<a id="L3072" name="L3072"></a>3072                             <strong class="reserved">if</strong> (field != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3073" name="L3073"></a>3073                                 field.<a href="../D/31850.html" title="Multiple defined in 2 places.">setAccessible</a>(<strong class="reserved">true</strong>);
<a id="L3074" name="L3074"></a>3074                             <em class="brace">}</em>
<a id="L3075" name="L3075"></a>3075                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1573.html#L34" title="Defined at 34 in src/java/lang/NoSuchFieldException.java.">NoSuchFieldException</a> nsf) <em class="brace">{</em>
<a id="L3076" name="L3076"></a>3076                             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<strong class="reserved">false</strong>);
<a id="L3077" name="L3077"></a>3077                         <em class="brace">}</em>
<a id="L3078" name="L3078"></a>3078                         <strong class="reserved">return</strong> field;
<a id="L3079" name="L3079"></a>3079                     <em class="brace">}</em>
<a id="L3080" name="L3080"></a>3080                 <em class="brace">}</em>);
<a id="L3081" name="L3081"></a>3081         <em class="brace">}</em>
<a id="L3082" name="L3082"></a>3082 
<a id="L3083" name="L3083"></a>3083         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L3084" name="L3084"></a>3084             <strong class="reserved">return</strong> proxyActive.<a href="../D/17286.html" title="Multiple defined in 18 places.">getBoolean</a>(e);
<a id="L3085" name="L3085"></a>3085         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a> iae) <em class="brace">{</em>
<a id="L3086" name="L3086"></a>3086             <a href="../S/1616.html#L490" title="Defined at 490 in src/java/lang/invoke/MethodType.java.">assert</a>(<strong class="reserved">false</strong>);
<a id="L3087" name="L3087"></a>3087         <em class="brace">}</em>
<a id="L3088" name="L3088"></a>3088         <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3089" name="L3089"></a>3089     <em class="brace">}</em>
<a id="L3090" name="L3090"></a>3090 
<a id="L3091" name="L3091"></a>3091     <em class="comment">// Returns the value of this KeyEvent's field isProxyActive</em>
<a id="L3092" name="L3092"></a>3092     <strong class="reserved">static</strong> <strong class="reserved">boolean</strong> <a href="../R/21914.html" title="Multiple referred from 4 places.">isProxyActive</a>(<a href="../S/2425.html#L152" title="Defined at 152 in src/java/awt/event/KeyEvent.java.">KeyEvent</a> e) <em class="brace">{</em>
<a id="L3093" name="L3093"></a>3093         <strong class="reserved">if</strong> (!<a href="../S/2120.html#L56" title="Defined at 56 in src/java/awt/GraphicsEnvironment.java.">GraphicsEnvironment</a>.<a href="../D/25646.html" title="Multiple defined in 2 places.">isHeadless</a>()) <em class="brace">{</em>
<a id="L3094" name="L3094"></a>3094             <strong class="reserved">return</strong> <a href="../S/2110.html#L3065" title="Defined at 3065 in src/java/awt/KeyboardFocusManager.java.">isProxyActiveImpl</a>(e);
<a id="L3095" name="L3095"></a>3095         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L3096" name="L3096"></a>3096             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L3097" name="L3097"></a>3097         <em class="brace">}</em>
<a id="L3098" name="L3098"></a>3098     <em class="brace">}</em>
<a id="L3099" name="L3099"></a>3099 
<a id="L3100" name="L3100"></a>3100     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> <a href="../R/17278.html" title="Multiple referred from 4 places.">getLastHWRequest</a>() <em class="brace">{</em>
<a id="L3101" name="L3101"></a>3101         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<a id="L3102" name="L3102"></a>3102             <strong class="reserved">return</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)
<a id="L3103" name="L3103"></a>3103                 ? heavyweightRequests.<a href="../D/19990.html" title="Multiple defined in 23 places.">getLast</a>()
<a id="L3104" name="L3104"></a>3104                 : <strong class="reserved">null</strong>;
<a id="L3105" name="L3105"></a>3105         <em class="brace">}</em>
<a id="L3106" name="L3106"></a>3106     <em class="brace">}</em>
<a id="L3107" name="L3107"></a>3107 
<a id="L3108" name="L3108"></a>3108     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/2110.html#L2186" title="Defined at 2186 in src/java/awt/KeyboardFocusManager.java.">HeavyweightFocusRequest</a> <a href="../R/16617.html" title="Multiple referred from 4 places.">getFirstHWRequest</a>() <em class="brace">{</em>
<a id="L3109" name="L3109"></a>3109         <strong class="reserved">synchronized</strong>(heavyweightRequests) <em class="brace">{</em>
<a id="L3110" name="L3110"></a>3110             <strong class="reserved">return</strong> (heavyweightRequests.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0)
<a id="L3111" name="L3111"></a>3111                 ? heavyweightRequests.<a href="../D/19082.html" title="Multiple defined in 8 places.">getFirst</a>()
<a id="L3112" name="L3112"></a>3112                 : <strong class="reserved">null</strong>;
<a id="L3113" name="L3113"></a>3113         <em class="brace">}</em>
<a id="L3114" name="L3114"></a>3114     <em class="brace">}</em>
<a id="L3115" name="L3115"></a>3115 
<a id="L3116" name="L3116"></a>3116     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">void</strong> <a href="../R/11326.html" title="Multiple referred from 4 places.">checkReplaceKFMPermission</a>()
<a id="L3117" name="L3117"></a>3117         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L3118" name="L3118"></a>3118     <em class="brace">{</em>
<a id="L3119" name="L3119"></a>3119         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L3120" name="L3120"></a>3120         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3121" name="L3121"></a>3121             <strong class="reserved">if</strong> (replaceKeyboardFocusManagerPermission == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L3122" name="L3122"></a>3122                 replaceKeyboardFocusManagerPermission =
<a id="L3123" name="L3123"></a>3123                     <strong class="reserved">new</strong> <a href="../S/2088.html#L198" title="Defined at 198 in src/java/awt/AWTPermission.java.">AWTPermission</a>("replaceKeyboardFocusManager");
<a id="L3124" name="L3124"></a>3124             <em class="brace">}</em>
<a id="L3125" name="L3125"></a>3125             security.
<a id="L3126" name="L3126"></a>3126                 <a href="../D/12594.html" title="Multiple defined in 22 places.">checkPermission</a>(replaceKeyboardFocusManagerPermission);
<a id="L3127" name="L3127"></a>3127         <em class="brace">}</em>
<a id="L3128" name="L3128"></a>3128     <em class="brace">}</em>
<a id="L3129" name="L3129"></a>3129 
<a id="L3130" name="L3130"></a>3130     <em class="comment">// Checks if this KeyboardFocusManager instance is the current KFM,</em>
<a id="L3131" name="L3131"></a>3131     <em class="comment">// or otherwise checks if the calling thread has "replaceKeyboardFocusManager"</em>
<a id="L3132" name="L3132"></a>3132     <em class="comment">// permission. Here's the reasoning to do so:</em>
<a id="L3133" name="L3133"></a>3133     <em class="comment">//</em>
<a id="L3134" name="L3134"></a>3134     <em class="comment">// A system KFM instance (which is the current KFM by default) may have no</em>
<a id="L3135" name="L3135"></a>3135     <em class="comment">// "replaceKFM" permission when a client code is on the call stack beneath,</em>
<a id="L3136" name="L3136"></a>3136     <em class="comment">// but still it should be able to execute the methods protected by this check</em>
<a id="L3137" name="L3137"></a>3137     <em class="comment">// due to the system KFM is trusted (and so it does like "privileged").</em>
<a id="L3138" name="L3138"></a>3138     <em class="comment">//</em>
<a id="L3139" name="L3139"></a>3139     <em class="comment">// If this KFM instance is not the current KFM but the client code has all</em>
<a id="L3140" name="L3140"></a>3140     <em class="comment">// permissions we can't throw SecurityException because it would contradict</em>
<a id="L3141" name="L3141"></a>3141     <em class="comment">// the security concepts. In this case the trusted client code is responsible</em>
<a id="L3142" name="L3142"></a>3142     <em class="comment">// for calling the secured methods from KFM instance which is not current.</em>
<a id="L3143" name="L3143"></a>3143     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11216.html" title="Multiple referred from 9 places.">checkKFMSecurity</a>()
<a id="L3144" name="L3144"></a>3144         <strong class="reserved">throws</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>
<a id="L3145" name="L3145"></a>3145     <em class="brace">{</em>
<a id="L3146" name="L3146"></a>3146         <strong class="reserved">if</strong> (<strong class="reserved">this</strong> != <a href="../D/18109.html" title="Multiple defined in 2 places.">getCurrentKeyboardFocusManager</a>()) <em class="brace">{</em>
<a id="L3147" name="L3147"></a>3147             <a href="../S/2110.html#L3116" title="Defined at 3116 in src/java/awt/KeyboardFocusManager.java.">checkReplaceKFMPermission</a>();
<a id="L3148" name="L3148"></a>3148         <em class="brace">}</em>
<a id="L3149" name="L3149"></a>3149     <em class="brace">}</em>
<a id="L3150" name="L3150"></a>3150 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L162">[^]</a><a href="#L3143">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/javax/swing/text/AsyncBoxView.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L75">[^]</a><a href="#L1422">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L75" title="Defined at 75.">getMajorAxis</a></li>
<li><a href="#L84" title="Defined at 84.">getMinorAxis</a></li>
<li><a href="#L91" title="Defined at 91.">getTopInset</a></li>
<li><a href="#L100" title="Defined at 100.">setTopInset</a></li>
<li><a href="#L107" title="Defined at 107.">getBottomInset</a></li>
<li><a href="#L116" title="Defined at 116.">setBottomInset</a></li>
<li><a href="#L123" title="Defined at 123.">getLeftInset</a></li>
<li><a href="#L132" title="Defined at 132.">setLeftInset</a></li>
<li><a href="#L139" title="Defined at 139.">getRightInset</a></li>
<li><a href="#L148" title="Defined at 148.">setRightInset</a></li>
<li><a href="#L159" title="Defined at 159.">getInsetSpan</a></li>
<li><a href="#L178" title="Defined at 178.">setEstimatedMajorSpan</a></li>
<li><a href="#L187" title="Defined at 187.">getEstimatedMajorSpan</a></li>
<li><a href="#L198" title="Defined at 198.">getChildState</a></li>
<li><a href="#L210" title="Defined at 210.">getLayoutQueue</a></li>
<li><a href="#L219" title="Defined at 219.">createChildState</a></li>
<li><a href="#L241" title="Defined at 241.">majorRequirementChange</a></li>
<li><a href="#L258" title="Defined at 258.">minorRequirementChange</a></li>
<li><a href="#L266" title="Defined at 266.">flushRequirementChanges</a></li>
<li><a href="#L357" title="Defined at 357.">replace</a></li>
<li><a href="#L403" title="Defined at 403.">loadChildren</a></li>
<li><a href="#L424" title="Defined at 424.">getViewIndexAtPosition</a></li>
<li><a href="#L445" title="Defined at 445.">updateLayout</a></li>
<li><a href="#L475" title="Defined at 475.">setParent</a></li>
<li><a href="#L495" title="Defined at 495.">preferenceChanged</a></li>
<li><a href="#L531" title="Defined at 531.">setSize</a></li>
<li><a href="#L543" title="Defined at 543.">getSpanOnAxis</a></li>
<li><a href="#L561" title="Defined at 561.">setSpanOnAxis</a></li>
<li><a href="#L609" title="Defined at 609.">paint</a></li>
<li><a href="#L627" title="Defined at 627.">getPreferredSpan</a></li>
<li><a href="#L652" title="Defined at 652.">getMinimumSpan</a></li>
<li><a href="#L680" title="Defined at 680.">getMaximumSpan</a></li>
<li><a href="#L696" title="Defined at 696.">getViewCount</a></li>
<li><a href="#L709" title="Defined at 709.">getView</a></li>
<li><a href="#L728" title="Defined at 728.">getChildAllocation</a></li>
<li><a href="#L744" title="Defined at 744.">getViewIndex</a></li>
<li><a href="#L763" title="Defined at 763.">modelToView</a></li>
<li><a href="#L799" title="Defined at 799.">viewToModel</a></li>
<li><a href="#L853" title="Defined at 853.">getNextVisualPositionFrom</a></li>
<li><a href="#L950" title="Defined at 950.">childChanged</a></li>
<li><a href="#L962" title="Defined at 962.">paintChildren</a></li>
<li><a href="#L991" title="Defined at 991.">getChildAllocation</a></li>
<li><a href="#L1023" title="Defined at 1023.">getViewIndexAtPoint</a></li>
<li><a href="#L1035" title="Defined at 1035.">getChildAllocation</a></li>
<li><a href="#L1061" title="Defined at 1061.">setAllocation</a></li>
<li><a href="#L1080" title="Defined at 1080.">getViewIndexAtVisualOffset</a></li>
<li><a href="#L1120" title="Defined at 1120.">updateChildOffsets</a></li>
<li><a href="#L1145" title="Defined at 1145.">updateChildOffsetsToIndex</a></li>
<li><a href="#L1156" title="Defined at 1156.">intersectsClip</a></li>
<li><a href="#L1217" title="Defined at 1217.">getChildView</a></li>
<li><a href="#L1242" title="Defined at 1242.">run</a></li>
<li><a href="#L1273" title="Defined at 1273.">updateChild</a></li>
<li><a href="#L1326" title="Defined at 1326.">getMinorSpan</a></li>
<li><a href="#L1337" title="Defined at 1337.">getMinorOffset</a></li>
<li><a href="#L1349" title="Defined at 1349.">getMajorSpan</a></li>
<li><a href="#L1356" title="Defined at 1356.">getMajorOffset</a></li>
<li><a href="#L1365" title="Defined at 1365.">setMajorOffset</a></li>
<li><a href="#L1376" title="Defined at 1376.">preferenceChanged</a></li>
<li><a href="#L1398" title="Defined at 1398.">isLayoutValid</a></li>
<li><a href="#L1422" title="Defined at 1422.">run</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1999, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../D/26637.html" title="Multiple defined in 6 places.">javax</a>.swing.<a href="../D/35255.html" title="Multiple defined in 4 places.">text</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.*;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.List;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.*;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> javax.swing.SwingUtilities;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> javax.swing.event.DocumentEvent;
<a id="L32" name="L32"></a>  32 
<div class="comment">
  A box that does layout asynchronously.  This
  is useful to keep the GUI event thread moving by
  not doing any layout on it.  The layout is done
  on a granularity of operations on the child views.
  After each child view is accessed for some part
  of layout (a potentially time consuming operation)
  the remaining tasks can be abandoned or a new higher
  priority task (i.e. to service a synchronous request
  or a visible area) can be taken on.
  <p>
  While the child view is being accessed
  a read lock is acquired on the associated document
  so that the model is stable while being accessed.
  @author  Timothy Prinzing
  @since   1.3</p></div>
<a id="L51" name="L51"></a>  51 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/481.html" title="Multiple referred from 5 places.">AsyncBoxView</a> <strong class="reserved">extends</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <em class="brace">{</em>
<a id="L52" name="L52"></a>  52 
<div class="comment">
      Construct a box view that does asynchronous layout.
      @param elem the element of the model to represent
      @param axis the axis to tile along.  This can be
       either X_AXIS or Y_AXIS.</div>
<a id="L60" name="L60"></a>  60     <strong class="reserved">public</strong> AsyncBoxView(<a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem, <strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L61" name="L61"></a>  61         <strong class="reserved">super</strong>(elem);
<a id="L62" name="L62"></a>  62         stats = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>&lt;<a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a>&gt;();
<a id="L63" name="L63"></a>  63         <strong class="reserved">this</strong>.axis = axis;
<a id="L64" name="L64"></a>  64         locator = <strong class="reserved">new</strong> <a href="../S/3344.html#L933" title="Defined at 933 in src/javax/swing/text/AsyncBoxView.java.">ChildLocator</a>();
<a id="L65" name="L65"></a>  65         flushTask = <strong class="reserved">new</strong> <a href="../S/3344.html#L1420" title="Defined at 1420 in src/javax/swing/text/AsyncBoxView.java.">FlushTask</a>();
<a id="L66" name="L66"></a>  66         minorSpan = <a href="../S/1596.html#L43" title="Defined at 43 in src/java/lang/Short.java.">Short</a>.MAX_VALUE;
<a id="L67" name="L67"></a>  67         estimatedMajorSpan = <strong class="reserved">false</strong>;
<a id="L68" name="L68"></a>  68     <em class="brace">}</em>
<a id="L69" name="L69"></a>  69 
<div class="comment">
      Fetch the major axis (the axis the children
      are tiled along).  This will have a value of
      either X_AXIS or Y_AXIS.</div>
<a id="L75" name="L75"></a>  75     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17530.html" title="Multiple referred from 2 places.">getMajorAxis</a>() <em class="brace">{</em>
<a id="L76" name="L76"></a>  76         <strong class="reserved">return</strong> axis;
<a id="L77" name="L77"></a>  77     <em class="brace">}</em>
<a id="L78" name="L78"></a>  78 
<div class="comment">
      Fetch the minor axis (the axis orthogonal
      to the tiled axis).  This will have a value of
      either X_AXIS or Y_AXIS.</div>
<a id="L84" name="L84"></a>  84     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17747.html" title="Multiple referred from 3 places.">getMinorAxis</a>() <em class="brace">{</em>
<a id="L85" name="L85"></a>  85         <strong class="reserved">return</strong> (axis == X_AXIS) ? Y_AXIS : X_AXIS;
<a id="L86" name="L86"></a>  86     <em class="brace">}</em>
<a id="L87" name="L87"></a>  87 
<div class="comment">
      Get the top part of the margin around the view.</div>
<a id="L91" name="L91"></a>  91     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/19542.html" title="Multiple referred from 17 places.">getTopInset</a>() <em class="brace">{</em>
<a id="L92" name="L92"></a>  92         <strong class="reserved">return</strong> topInset;
<a id="L93" name="L93"></a>  93     <em class="brace">}</em>
<a id="L94" name="L94"></a>  94 
<div class="comment">
      Set the top part of the margin around the view.
      @param i the value of the inset</div>
<a id="L100" name="L100"></a> 100     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setTopInset(<strong class="reserved">float</strong> i) <em class="brace">{</em>
<a id="L101" name="L101"></a> 101         topInset = i;
<a id="L102" name="L102"></a> 102     <em class="brace">}</em>
<a id="L103" name="L103"></a> 103 
<div class="comment">
      Get the bottom part of the margin around the view.</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/15313.html" title="Multiple referred from 14 places.">getBottomInset</a>() <em class="brace">{</em>
<a id="L108" name="L108"></a> 108         <strong class="reserved">return</strong> bottomInset;
<a id="L109" name="L109"></a> 109     <em class="brace">}</em>
<a id="L110" name="L110"></a> 110 
<div class="comment">
      Set the bottom part of the margin around the view.
      @param i the value of the inset</div>
<a id="L116" name="L116"></a> 116     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setBottomInset(<strong class="reserved">float</strong> i) <em class="brace">{</em>
<a id="L117" name="L117"></a> 117         bottomInset = i;
<a id="L118" name="L118"></a> 118     <em class="brace">}</em>
<a id="L119" name="L119"></a> 119 
<div class="comment">
      Get the left part of the margin around the view.</div>
<a id="L123" name="L123"></a> 123     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17330.html" title="Multiple referred from 23 places.">getLeftInset</a>() <em class="brace">{</em>
<a id="L124" name="L124"></a> 124         <strong class="reserved">return</strong> leftInset;
<a id="L125" name="L125"></a> 125     <em class="brace">}</em>
<a id="L126" name="L126"></a> 126 
<div class="comment">
      Set the left part of the margin around the view.
      @param i the value of the inset</div>
<a id="L132" name="L132"></a> 132     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setLeftInset(<strong class="reserved">float</strong> i) <em class="brace">{</em>
<a id="L133" name="L133"></a> 133         leftInset = i;
<a id="L134" name="L134"></a> 134     <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<div class="comment">
      Get the right part of the margin around the view.</div>
<a id="L139" name="L139"></a> 139     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/18743.html" title="Multiple referred from 15 places.">getRightInset</a>() <em class="brace">{</em>
<a id="L140" name="L140"></a> 140         <strong class="reserved">return</strong> rightInset;
<a id="L141" name="L141"></a> 141     <em class="brace">}</em>
<a id="L142" name="L142"></a> 142 
<div class="comment">
      Set the right part of the margin around the view.
      @param i the value of the inset</div>
<a id="L148" name="L148"></a> 148     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setRightInset(<strong class="reserved">float</strong> i) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149         rightInset = i;
<a id="L150" name="L150"></a> 150     <em class="brace">}</em>
<a id="L151" name="L151"></a> 151 
<div class="comment">
      Fetch the span along an axis that is taken up by the insets.
      @param axis the axis to determine the total insets along,
       either X_AXIS or Y_AXIS.
      @since 1.4</div>
<a id="L159" name="L159"></a> 159     <strong class="reserved">protected</strong> <strong class="reserved">float</strong> <a href="../R/17107.html" title="Multiple referred from 2 places.">getInsetSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">float</strong> margin = (axis == X_AXIS) ?
<a id="L161" name="L161"></a> 161             <a href="../D/20069.html" title="Multiple defined in 3 places.">getLeftInset</a>() + <a href="../D/22102.html" title="Multiple defined in 2 places.">getRightInset</a>() : <a href="../D/23206.html" title="Multiple defined in 2 places.">getTopInset</a>() + <a href="../D/17326.html" title="Multiple defined in 3 places.">getBottomInset</a>();
<a id="L162" name="L162"></a> 162         <strong class="reserved">return</strong> margin;
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164 
<div class="comment">
      Set the estimatedMajorSpan property that determines if the
      major span should be treated as being estimated.  If this
      property is true, the value of setSize along the major axis
      will change the requirements along the major axis and incremental
      changes will be ignored until all of the children have been updated
      (which will cause the property to automatically be set to false).
      If the property is false the value of the majorSpan will be
      considered to be accurate and incremental changes will be
      added into the total as they are calculated.
      @since 1.4</div>
<a id="L178" name="L178"></a> 178     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27355.html" title="Multiple referred from 3 places.">setEstimatedMajorSpan</a>(<strong class="reserved">boolean</strong> isEstimated) <em class="brace">{</em>
<a id="L179" name="L179"></a> 179         estimatedMajorSpan = isEstimated;
<a id="L180" name="L180"></a> 180     <em class="brace">}</em>
<a id="L181" name="L181"></a> 181 
<div class="comment">
      Is the major span currently estimated?
      @since 1.4</div>
<a id="L187" name="L187"></a> 187     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> getEstimatedMajorSpan() <em class="brace">{</em>
<a id="L188" name="L188"></a> 188         <strong class="reserved">return</strong> estimatedMajorSpan;
<a id="L189" name="L189"></a> 189     <em class="brace">}</em>
<a id="L190" name="L190"></a> 190 
<div class="comment">
      Fetch the object representing the layout state of
      of the child at the given index.
      @param index the child index.  This should be a
        value &gt;= 0 and &lt; getViewCount().</div>
<a id="L198" name="L198"></a> 198     <strong class="reserved">protected</strong> <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> <a href="../R/15551.html" title="Multiple referred from 18 places.">getChildState</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">synchronized</strong>(stats) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <strong class="reserved">if</strong> ((<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt;= 0) &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; stats.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())) <em class="brace">{</em>
<a id="L201" name="L201"></a> 201                 <strong class="reserved">return</strong> stats.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L202" name="L202"></a> 202             <em class="brace">}</em>
<a id="L203" name="L203"></a> 203             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L204" name="L204"></a> 204         <em class="brace">}</em>
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206 
<div class="comment">
      Fetch the queue to use for layout.</div>
<a id="L210" name="L210"></a> 210     <strong class="reserved">protected</strong> <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a> <a href="../R/17306.html" title="Multiple referred from 4 places.">getLayoutQueue</a>() <em class="brace">{</em>
<a id="L211" name="L211"></a> 211         <strong class="reserved">return</strong> <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a>.<a href="../S/3342.html#L54" title="Defined at 54 in src/javax/swing/text/LayoutQueue.java.">getDefaultQueue</a>();
<a id="L212" name="L212"></a> 212     <em class="brace">}</em>
<a id="L213" name="L213"></a> 213 
<div class="comment">
      New ChildState records are created through
      this method to allow subclasses the extend
      the ChildState records to do/hold more</div>
<a id="L219" name="L219"></a> 219     <strong class="reserved">protected</strong> <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> <a href="../S/3344.html#L374" title="Referred from 374 in src/javax/swing/text/AsyncBoxView.java.">createChildState</a>(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L220" name="L220"></a> 220         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a>(v);
<a id="L221" name="L221"></a> 221     <em class="brace">}</em>
<a id="L222" name="L222"></a> 222 
<div class="comment">
      Requirements changed along the major axis.
      This is called by the thread doing layout for
      the given ChildState object when it has completed
      fetching the child views new preferences.
      Typically this would be the layout thread, but
      might be the event thread if it is trying to update
      something immediately (such as to perform a
      model/view translation).
      <p>
      This is implemented to mark the major axis as having
      changed so that a future check to see if the requirements
      need to be published to the parent view will consider
      the major axis.  If the span along the major axis is
      not estimated, it is updated by the given delta to reflect
      the incremental change.  The delta is ignored if the
      major span is estimated.</p></div>
<a id="L241" name="L241"></a> 241     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/22811.html" title="Multiple referred from 2 places.">majorRequirementChange</a>(<a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs, <strong class="reserved">float</strong> delta) <em class="brace">{</em>
<a id="L242" name="L242"></a> 242         <strong class="reserved">if</strong> (estimatedMajorSpan == <strong class="reserved">false</strong>) <em class="brace">{</em>
<a id="L243" name="L243"></a> 243             majorSpan += delta;
<a id="L244" name="L244"></a> 244         <em class="brace">}</em>
<a id="L245" name="L245"></a> 245         majorChanged = <strong class="reserved">true</strong>;
<a id="L246" name="L246"></a> 246     <em class="brace">}</em>
<a id="L247" name="L247"></a> 247 
<div class="comment">
      Requirements changed along the minor axis.
      This is called by the thread doing layout for
      the given ChildState object when it has completed
      fetching the child views new preferences.
      Typically this would be the layout thread, but
      might be the GUI thread if it is trying to update
      something immediately (such as to perform a
      model/view translation).</div>
<a id="L258" name="L258"></a> 258     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/3344.html#L1286" title="Referred from 1286 in src/javax/swing/text/AsyncBoxView.java.">minorRequirementChange</a>(<a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs) <em class="brace">{</em>
<a id="L259" name="L259"></a> 259         minorChanged = <strong class="reserved">true</strong>;
<a id="L260" name="L260"></a> 260     <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<div class="comment">
      Publish the changes in preferences upward to the parent
      view.  This is normally called by the layout thread.</div>
<a id="L266" name="L266"></a> 266     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/14708.html" title="Multiple referred from 2 places.">flushRequirementChanges</a>() <em class="brace">{</em>
<a id="L267" name="L267"></a> 267         <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a> doc = (<a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>) <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L268" name="L268"></a> 268         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L269" name="L269"></a> 269             doc.<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>();
<a id="L270" name="L270"></a> 270 
<a id="L271" name="L271"></a> 271             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <strong class="reserved">null</strong>;
<a id="L272" name="L272"></a> 272             <strong class="reserved">boolean</strong> horizontal = <strong class="reserved">false</strong>;
<a id="L273" name="L273"></a> 273             <strong class="reserved">boolean</strong> vertical = <strong class="reserved">false</strong>;
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275             <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L276" name="L276"></a> 276                 <em class="comment">// perform tasks that iterate over the children while</em>
<a id="L277" name="L277"></a> 277                 <em class="comment">// preventing the collection from changing.</em>
<a id="L278" name="L278"></a> 278                 <strong class="reserved">synchronized</strong>(stats) <em class="brace">{</em>
<a id="L279" name="L279"></a> 279                     <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L280" name="L280"></a> 280                     <strong class="reserved">if</strong> ((n &gt; 0) &amp;&amp; (minorChanged || estimatedMajorSpan)) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281                         <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a> q = <a href="../S/3344.html#L210" title="Defined at 210 in src/javax/swing/text/AsyncBoxView.java.">getLayoutQueue</a>();
<a id="L282" name="L282"></a> 282                         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(0);
<a id="L283" name="L283"></a> 283                         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> pref = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(0);
<a id="L284" name="L284"></a> 284                         <strong class="reserved">float</strong> span = 0f;
<a id="L285" name="L285"></a> 285                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 1; i &lt; n; i++) <em class="brace">{</em>
<a id="L286" name="L286"></a> 286                             <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L287" name="L287"></a> 287                             <strong class="reserved">if</strong> (minorChanged) <em class="brace">{</em>
<a id="L288" name="L288"></a> 288                                 <strong class="reserved">if</strong> (cs.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> &gt; <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>.<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>) <em class="brace">{</em>
<a id="L289" name="L289"></a> 289                                     <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = cs;
<a id="L290" name="L290"></a> 290                                 <em class="brace">}</em>
<a id="L291" name="L291"></a> 291                                 <strong class="reserved">if</strong> (cs.pref &gt; pref.pref) <em class="brace">{</em>
<a id="L292" name="L292"></a> 292                                     pref = cs;
<a id="L293" name="L293"></a> 293                                 <em class="brace">}</em>
<a id="L294" name="L294"></a> 294                             <em class="brace">}</em>
<a id="L295" name="L295"></a> 295                             <strong class="reserved">if</strong> (estimatedMajorSpan) <em class="brace">{</em>
<a id="L296" name="L296"></a> 296                                 span += cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L297" name="L297"></a> 297                             <em class="brace">}</em>
<a id="L298" name="L298"></a> 298                         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300                         <strong class="reserved">if</strong> (minorChanged) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301                             minRequest = <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>;
<a id="L302" name="L302"></a> 302                             prefRequest = pref;
<a id="L303" name="L303"></a> 303                         <em class="brace">}</em>
<a id="L304" name="L304"></a> 304                         <strong class="reserved">if</strong> (estimatedMajorSpan) <em class="brace">{</em>
<a id="L305" name="L305"></a> 305                             majorSpan = span;
<a id="L306" name="L306"></a> 306                             estimatedMajorSpan = <strong class="reserved">false</strong>;
<a id="L307" name="L307"></a> 307                             majorChanged = <strong class="reserved">true</strong>;
<a id="L308" name="L308"></a> 308                         <em class="brace">}</em>
<a id="L309" name="L309"></a> 309                     <em class="brace">}</em>
<a id="L310" name="L310"></a> 310                 <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<a id="L312" name="L312"></a> 312                 <em class="comment">// message preferenceChanged</em>
<a id="L313" name="L313"></a> 313                 <strong class="reserved">if</strong> (majorChanged || minorChanged) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314                     <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> = <a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L315" name="L315"></a> 315                     <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L316" name="L316"></a> 316                         <strong class="reserved">if</strong> (axis == X_AXIS) <em class="brace">{</em>
<a id="L317" name="L317"></a> 317                             horizontal = majorChanged;
<a id="L318" name="L318"></a> 318                             vertical = minorChanged;
<a id="L319" name="L319"></a> 319                         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L320" name="L320"></a> 320                             vertical = majorChanged;
<a id="L321" name="L321"></a> 321                             horizontal = minorChanged;
<a id="L322" name="L322"></a> 322                         <em class="brace">}</em>
<a id="L323" name="L323"></a> 323                     <em class="brace">}</em>
<a id="L324" name="L324"></a> 324                     majorChanged = <strong class="reserved">false</strong>;
<a id="L325" name="L325"></a> 325                     minorChanged = <strong class="reserved">false</strong>;
<a id="L326" name="L326"></a> 326                 <em class="brace">}</em>
<a id="L327" name="L327"></a> 327             <em class="brace">}</em>
<a id="L328" name="L328"></a> 328 
<a id="L329" name="L329"></a> 329             <em class="comment">// propagate a preferenceChanged, using the</em>
<a id="L330" name="L330"></a> 330             <em class="comment">// layout thread.</em>
<a id="L331" name="L331"></a> 331             <strong class="reserved">if</strong> (<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332                 <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>.<a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">this</strong>, horizontal, vertical);
<a id="L333" name="L333"></a> 333 
<a id="L334" name="L334"></a> 334                 <em class="comment">// probably want to change this to be more exact.</em>
<a id="L335" name="L335"></a> 335                 <a href="../S/2177.html#L186" title="Defined at 186 in src/java/awt/Component.java.">Component</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../D/17946.html" title="Multiple defined in 9 places.">getContainer</a>();
<a id="L336" name="L336"></a> 336                 <strong class="reserved">if</strong> (<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337                     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31014.html" title="Multiple defined in 22 places.">repaint</a>();
<a id="L338" name="L338"></a> 338                 <em class="brace">}</em>
<a id="L339" name="L339"></a> 339             <em class="brace">}</em>
<a id="L340" name="L340"></a> 340         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L341" name="L341"></a> 341             doc.<a href="../S/3268.html#L1413" title="Defined at 1413 in src/javax/swing/text/AbstractDocument.java.">readUnlock</a>();
<a id="L342" name="L342"></a> 342         <em class="brace">}</em>
<a id="L343" name="L343"></a> 343     <em class="brace">}</em>
<a id="L344" name="L344"></a> 344 
<div class="comment">
      Calls the superclass to update the child views, and
      updates the status records for the children.  This
      is expected to be called while a write lock is held
      on the model so that interaction with the layout
      thread will not happen (i.e. the layout thread
      acquires a read lock before doing anything).
      @param offset the starting offset into the child views &gt;= 0
      @param length the number of existing views to replace &gt;= 0
      @param views the child views to insert</div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26140.html" title="Multiple referred from 310 places.">replace</a>(<strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>, <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>[] views) <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <strong class="reserved">synchronized</strong>(stats) <em class="brace">{</em>
<a id="L359" name="L359"></a> 359             <em class="comment">// remove the replaced state records</em>
<a id="L360" name="L360"></a> 360             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L361" name="L361"></a> 361                 <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = stats.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L362" name="L362"></a> 362                 <strong class="reserved">float</strong> csSpan = cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L363" name="L363"></a> 363 
<a id="L364" name="L364"></a> 364                 cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/33509.html" title="Multiple defined in 44 places.">setParent</a>(<strong class="reserved">null</strong>);
<a id="L365" name="L365"></a> 365                 <strong class="reserved">if</strong> (csSpan != 0) <em class="brace">{</em>
<a id="L366" name="L366"></a> 366                     <a href="../S/3344.html#L241" title="Defined at 241 in src/javax/swing/text/AsyncBoxView.java.">majorRequirementChange</a>(cs, -csSpan);
<a id="L367" name="L367"></a> 367                 <em class="brace">}</em>
<a id="L368" name="L368"></a> 368             <em class="brace">}</em>
<a id="L369" name="L369"></a> 369 
<a id="L370" name="L370"></a> 370             <em class="comment">// insert the state records for the new children</em>
<a id="L371" name="L371"></a> 371             <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a> q = <a href="../S/3344.html#L210" title="Defined at 210 in src/javax/swing/text/AsyncBoxView.java.">getLayoutQueue</a>();
<a id="L372" name="L372"></a> 372             <strong class="reserved">if</strong> (views != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L373" name="L373"></a> 373                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; views.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; i++) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374                     <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> s = <a href="../S/3344.html#L219" title="Defined at 219 in src/javax/swing/text/AsyncBoxView.java.">createChildState</a>(views[i]);
<a id="L375" name="L375"></a> 375                     stats.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> + i, s);
<a id="L376" name="L376"></a> 376                     q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(s);
<a id="L377" name="L377"></a> 377                 <em class="brace">}</em>
<a id="L378" name="L378"></a> 378             <em class="brace">}</em>
<a id="L379" name="L379"></a> 379 
<a id="L380" name="L380"></a> 380             <em class="comment">// notify that the size changed</em>
<a id="L381" name="L381"></a> 381             q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(flushTask);
<a id="L382" name="L382"></a> 382         <em class="brace">}</em>
<a id="L383" name="L383"></a> 383     <em class="brace">}</em>
<a id="L384" name="L384"></a> 384 
<div class="comment">
      Loads all of the children to initialize the view.
      This is called by the {@link #setParent setParent}
      method.  Subclasses can reimplement this to initialize
      their child views in a different manner.  The default
      implementation creates a child view for each
      child element.
      <p>
      Normally a write-lock is held on the Document while
      the children are being changed, which keeps the rendering
      and layout threads safe.  The exception to this is when
      the view is initialized to represent an existing element
      (via this method), so it is synchronized to exclude
      preferenceChanged while we are initializing.
      @param f the view factory
      @see #setParent</p></div>
<a id="L403" name="L403"></a> 403     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/22554.html" title="Multiple referred from 11 places.">loadChildren</a>(<a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f) <em class="brace">{</em>
<a id="L404" name="L404"></a> 404         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> e = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L405" name="L405"></a> 405         <strong class="reserved">int</strong> n = e.<a href="../D/18674.html" title="Multiple defined in 5 places.">getElementCount</a>();
<a id="L406" name="L406"></a> 406         <strong class="reserved">if</strong> (n &gt; 0) <em class="brace">{</em>
<a id="L407" name="L407"></a> 407             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>[] added = <strong class="reserved">new</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a>[n];
<a id="L408" name="L408"></a> 408             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L409" name="L409"></a> 409                 added[i] = f.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(e.<a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>(i));
<a id="L410" name="L410"></a> 410             <em class="brace">}</em>
<a id="L411" name="L411"></a> 411             <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>(0, 0, added);
<a id="L412" name="L412"></a> 412         <em class="brace">}</em>
<a id="L413" name="L413"></a> 413     <em class="brace">}</em>
<a id="L414" name="L414"></a> 414 
<div class="comment">
      Fetches the child view index representing the given position in
      the model.  This is implemented to fetch the view in the case
      where there is a child view for each child element.
      @param pos the position &gt;= 0
      @return  index of the view representing the given position, or
        -1 if no view represents that position</div>
<a id="L424" name="L424"></a> 424     <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/19809.html" title="Multiple referred from 10 places.">getViewIndexAtPosition</a>(<strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b) <em class="brace">{</em>
<a id="L425" name="L425"></a> 425         <strong class="reserved">boolean</strong> isBackward = (b == <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Backward);
<a id="L426" name="L426"></a> 426         pos = (isBackward) ? <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(0, pos - 1) : pos;
<a id="L427" name="L427"></a> 427         <a href="../D/2794.html" title="Multiple defined in 8 places.">Element</a> elem = <a href="../D/18665.html" title="Multiple defined in 28 places.">getElement</a>();
<a id="L428" name="L428"></a> 428         <strong class="reserved">return</strong> elem.<a href="../D/18685.html" title="Multiple defined in 4 places.">getElementIndex</a>(pos);
<a id="L429" name="L429"></a> 429     <em class="brace">}</em>
<a id="L430" name="L430"></a> 430 
<div class="comment">
      Update the layout in response to receiving notification of
      change from the model.  This is implemented to note the
      change on the ChildLocator so that offsets of the children
      will be correctly computed.
      @param ec changes to the element this view is responsible
       for (may be null if there were no changes).
      @param e the change information from the associated document
      @param a the current allocation of the view
      @see #insertUpdate
      @see #removeUpdate
      @see #changedUpdate</div>
<a id="L445" name="L445"></a> 445     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/29900.html" title="Multiple referred from 3 places.">updateLayout</a>(<a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a>.<a href="../S/3381.html#L143" title="Defined at 143 in src/javax/swing/event/DocumentEvent.java.">ElementChange</a> ec,
<a id="L446" name="L446"></a> 446                                     <a href="../D/2552.html" title="Multiple defined in 2 places.">DocumentEvent</a> e, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">if</strong> (ec != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L448" name="L448"></a> 448             <em class="comment">// the newly inserted children don't have a valid</em>
<a id="L449" name="L449"></a> 449             <em class="comment">// offset so the child locator needs to be messaged</em>
<a id="L450" name="L450"></a> 450             <em class="comment">// that the child prior to the new children has</em>
<a id="L451" name="L451"></a> 451             <em class="comment">// changed size.</em>
<a id="L452" name="L452"></a> 452             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(ec.<a href="../D/19664.html" title="Multiple defined in 76 places.">getIndex</a>() - 1, 0);
<a id="L453" name="L453"></a> 453             <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L454" name="L454"></a> 454             locator.<a href="../S/3344.html#L950" title="Defined at 950 in src/javax/swing/text/AsyncBoxView.java.">childChanged</a>(cs);
<a id="L455" name="L455"></a> 455         <em class="brace">}</em>
<a id="L456" name="L456"></a> 456     <em class="brace">}</em>
<a id="L457" name="L457"></a> 457 
<a id="L458" name="L458"></a> 458     <em class="comment">// --- View methods ------------------------------------</em>
<a id="L459" name="L459"></a> 459 
<div class="comment">
      Sets the parent of the view.
      This is reimplemented to provide the superclass
      behavior as well as calling the <code>loadChildren</code>
      method if this view does not already have children.
      The children should not be loaded in the
      constructor because the act of setting the parent
      may cause them to try to search up the hierarchy
      (to get the hosting Container for example).
      If this view has children (the view is being moved
      from one place in the view hierarchy to another),
      the <code>loadChildren</code> method will not be called.
      @param parent the parent of the view, null if none</div>
<a id="L475" name="L475"></a> 475     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27912.html" title="Multiple referred from 145 places.">setParent</a>(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>) <em class="brace">{</em>
<a id="L476" name="L476"></a> 476         <strong class="reserved">super</strong>.<a href="../D/33509.html" title="Multiple defined in 44 places.">setParent</a>(<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a>);
<a id="L477" name="L477"></a> 477         <strong class="reserved">if</strong> ((<a href="../D/29067.html" title="Multiple defined in 4 places.">parent</a> != <strong class="reserved">null</strong>) &amp;&amp; (<a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>() == 0)) <em class="brace">{</em>
<a id="L478" name="L478"></a> 478             <a href="../S/3243.html#L36" title="Defined at 36 in src/javax/swing/text/ViewFactory.java.">ViewFactory</a> f = <a href="../D/23602.html" title="Multiple defined in 10 places.">getViewFactory</a>();
<a id="L479" name="L479"></a> 479             <a href="../D/26900.html" title="Multiple defined in 14 places.">loadChildren</a>(f);
<a id="L480" name="L480"></a> 480         <em class="brace">}</em>
<a id="L481" name="L481"></a> 481     <em class="brace">}</em>
<a id="L482" name="L482"></a> 482 
<div class="comment">
      Child views can call this on the parent to indicate that
      the preference has changed and should be reconsidered
      for layout.  This is reimplemented to queue new work
      on the layout thread.  This method gets messaged from
      multiple threads via the children.
      @param child the child view
      @param width true if the width preference has changed
      @param height true if the height preference has changed
      @see javax.swing.JComponent#revalidate</div>
<a id="L495" name="L495"></a> 495     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24913.html" title="Multiple referred from 34 places.">preferenceChanged</a>(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> child, <strong class="reserved">boolean</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">boolean</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496         <strong class="reserved">if</strong> (child == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L497" name="L497"></a> 497             <a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>().<a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<strong class="reserved">this</strong>, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L498" name="L498"></a> 498         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             <strong class="reserved">if</strong> (changing != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L500" name="L500"></a> 500                 <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = changing.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L501" name="L501"></a> 501                 <strong class="reserved">if</strong> (cv == child) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502                     <em class="comment">// size was being changed on the child, no need to</em>
<a id="L503" name="L503"></a> 503                     <em class="comment">// queue work for it.</em>
<a id="L504" name="L504"></a> 504                     changing.<a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L505" name="L505"></a> 505                     <strong class="reserved">return</strong>;
<a id="L506" name="L506"></a> 506                 <em class="brace">}</em>
<a id="L507" name="L507"></a> 507             <em class="brace">}</em>
<a id="L508" name="L508"></a> 508             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/23603.html" title="Multiple defined in 6 places.">getViewIndex</a>(child.<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>(),
<a id="L509" name="L509"></a> 509                                      <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L510" name="L510"></a> 510             <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L511" name="L511"></a> 511             cs.<a href="../D/29542.html" title="Multiple defined in 7 places.">preferenceChanged</a>(<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L512" name="L512"></a> 512             <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a> q = <a href="../S/3344.html#L210" title="Defined at 210 in src/javax/swing/text/AsyncBoxView.java.">getLayoutQueue</a>();
<a id="L513" name="L513"></a> 513             q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(cs);
<a id="L514" name="L514"></a> 514             q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(flushTask);
<a id="L515" name="L515"></a> 515         <em class="brace">}</em>
<a id="L516" name="L516"></a> 516     <em class="brace">}</em>
<a id="L517" name="L517"></a> 517 
<div class="comment">
      Sets the size of the view.  This should cause
      layout of the view if the view caches any layout
      information.
      <p>
      Since the major axis is updated asynchronously and should be
      the sum of the tiled children the call is ignored for the major
      axis.  Since the minor axis is flexible, work is queued to resize
      the children if the minor span changes.
      @param width the width &gt;= 0
      @param height the height &gt;= 0</p></div>
<a id="L531" name="L531"></a> 531     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28186.html" title="Multiple referred from 157 places.">setSize</a>(<strong class="reserved">float</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">float</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L532" name="L532"></a> 532         <a href="../D/33980.html" title="Multiple defined in 2 places.">setSpanOnAxis</a>(X_AXIS, <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>);
<a id="L533" name="L533"></a> 533         <a href="../D/33980.html" title="Multiple defined in 2 places.">setSpanOnAxis</a>(Y_AXIS, <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L534" name="L534"></a> 534     <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<div class="comment">
      Retrieves the size of the view along an axis.
      @param axis may be either <code>View.X_AXIS</code> or
               <code>View.Y_AXIS</code>
      @return the current span of the view along the given axis, &gt;= 0</div>
<a id="L543" name="L543"></a> 543     <strong class="reserved">float</strong> getSpanOnAxis(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544         <strong class="reserved">if</strong> (axis == <a href="../S/3344.html#L75" title="Defined at 75 in src/javax/swing/text/AsyncBoxView.java.">getMajorAxis</a>()) <em class="brace">{</em>
<a id="L545" name="L545"></a> 545             <strong class="reserved">return</strong> majorSpan;
<a id="L546" name="L546"></a> 546         <em class="brace">}</em>
<a id="L547" name="L547"></a> 547         <strong class="reserved">return</strong> minorSpan;
<a id="L548" name="L548"></a> 548     <em class="brace">}</em>
<a id="L549" name="L549"></a> 549 
<div class="comment">
      Sets the size of the view along an axis.  Since the major
      axis is updated asynchronously and should be the sum of the
      tiled children the call is ignored for the major axis.  Since
      the minor axis is flexible, work is queued to resize the
      children if the minor span changes.
      @param axis may be either <code>View.X_AXIS</code> or
               <code>View.Y_AXIS</code>
      @param span the span to layout to &gt;= 0</div>
<a id="L561" name="L561"></a> 561     <strong class="reserved">void</strong> <a href="../R/28211.html" title="Multiple referred from 4 places.">setSpanOnAxis</a>(<strong class="reserved">int</strong> axis, <strong class="reserved">float</strong> span) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562         <strong class="reserved">float</strong> margin = <a href="../S/3344.html#L159" title="Defined at 159 in src/javax/swing/text/AsyncBoxView.java.">getInsetSpan</a>(axis);
<a id="L563" name="L563"></a> 563         <strong class="reserved">if</strong> (axis == <a href="../S/3344.html#L84" title="Defined at 84 in src/javax/swing/text/AsyncBoxView.java.">getMinorAxis</a>()) <em class="brace">{</em>
<a id="L564" name="L564"></a> 564             <strong class="reserved">float</strong> targetSpan = span - margin;
<a id="L565" name="L565"></a> 565             <strong class="reserved">if</strong> (targetSpan != minorSpan) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566                 minorSpan = targetSpan;
<a id="L567" name="L567"></a> 567 
<a id="L568" name="L568"></a> 568                 <em class="comment">// mark all of the ChildState instances as needing to</em>
<a id="L569" name="L569"></a> 569                 <em class="comment">// resize the child, and queue up work to fix them.</em>
<a id="L570" name="L570"></a> 570                 <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L571" name="L571"></a> 571                 <strong class="reserved">if</strong> (n != 0) <em class="brace">{</em>
<a id="L572" name="L572"></a> 572                     <a href="../S/3342.html#L37" title="Defined at 37 in src/javax/swing/text/LayoutQueue.java.">LayoutQueue</a> q = <a href="../S/3344.html#L210" title="Defined at 210 in src/javax/swing/text/AsyncBoxView.java.">getLayoutQueue</a>();
<a id="L573" name="L573"></a> 573                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574                         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L575" name="L575"></a> 575                         cs.childSizeValid = <strong class="reserved">false</strong>;
<a id="L576" name="L576"></a> 576                         q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(cs);
<a id="L577" name="L577"></a> 577                     <em class="brace">}</em>
<a id="L578" name="L578"></a> 578                     q.<a href="../S/3342.html#L81" title="Defined at 81 in src/javax/swing/text/LayoutQueue.java.">addTask</a>(flushTask);
<a id="L579" name="L579"></a> 579                 <em class="brace">}</em>
<a id="L580" name="L580"></a> 580             <em class="brace">}</em>
<a id="L581" name="L581"></a> 581         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L582" name="L582"></a> 582             <em class="comment">// along the major axis the value is ignored</em>
<a id="L583" name="L583"></a> 583             <em class="comment">// unless the estimatedMajorSpan property is</em>
<a id="L584" name="L584"></a> 584             <em class="comment">// true.</em>
<a id="L585" name="L585"></a> 585             <strong class="reserved">if</strong> (estimatedMajorSpan) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586                 majorSpan = span - margin;
<a id="L587" name="L587"></a> 587             <em class="brace">}</em>
<a id="L588" name="L588"></a> 588         <em class="brace">}</em>
<a id="L589" name="L589"></a> 589     <em class="brace">}</em>
<a id="L590" name="L590"></a> 590 
<div class="comment">
      Render the view using the given allocation and
      rendering surface.
      <p>
      This is implemented to determine whether or not the
      desired region to be rendered (i.e. the unclipped
      area) is up to date or not.  If up-to-date the children
      are rendered.  If not up-to-date, a task to build
      the desired area is placed on the layout queue as
      a high priority task.  This keeps by event thread
      moving by rendering if ready, and postponing until
      a later time if not ready (since paint requests
      can be rescheduled).
      @param g the rendering surface to use
      @param alloc the allocated region to render into
      @see View#paint</p></div>
<a id="L609" name="L609"></a> 609     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24094.html" title="Multiple referred from 414 places.">paint</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> alloc) <em class="brace">{</em>
<a id="L610" name="L610"></a> 610         <strong class="reserved">synchronized</strong> (locator) <em class="brace">{</em>
<a id="L611" name="L611"></a> 611             locator.<a href="../S/3344.html#L1061" title="Defined at 1061 in src/javax/swing/text/AsyncBoxView.java.">setAllocation</a>(alloc);
<a id="L612" name="L612"></a> 612             locator.<a href="../D/28760.html" title="Multiple defined in 3 places.">paintChildren</a>(g);
<a id="L613" name="L613"></a> 613         <em class="brace">}</em>
<a id="L614" name="L614"></a> 614     <em class="brace">}</em>
<a id="L615" name="L615"></a> 615 
<div class="comment">
      Determines the preferred span for this view along an
      axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return   the span the view would like to be rendered into &gt;= 0.
                Typically the view is told to render into the span
                that is returned, although there is no guarantee.
                The parent may choose to resize or break the view.
      @exception IllegalArgumentException for an invalid axis type</div>
<a id="L627" name="L627"></a> 627     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/18413.html" title="Multiple referred from 96 places.">getPreferredSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L628" name="L628"></a> 628         <strong class="reserved">float</strong> margin = <a href="../S/3344.html#L159" title="Defined at 159 in src/javax/swing/text/AsyncBoxView.java.">getInsetSpan</a>(axis);
<a id="L629" name="L629"></a> 629         <strong class="reserved">if</strong> (axis == <strong class="reserved">this</strong>.axis) <em class="brace">{</em>
<a id="L630" name="L630"></a> 630             <strong class="reserved">return</strong> majorSpan + margin;
<a id="L631" name="L631"></a> 631         <em class="brace">}</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">if</strong> (prefRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> child = prefRequest.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L634" name="L634"></a> 634             <strong class="reserved">return</strong> child.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis) + margin;
<a id="L635" name="L635"></a> 635         <em class="brace">}</em>
<a id="L636" name="L636"></a> 636 
<a id="L637" name="L637"></a> 637         <em class="comment">// nothing is known about the children yet</em>
<a id="L638" name="L638"></a> 638         <strong class="reserved">return</strong> margin + 30;
<a id="L639" name="L639"></a> 639     <em class="brace">}</em>
<a id="L640" name="L640"></a> 640 
<div class="comment">
      Determines the minimum span for this view along an
      axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return  the span the view would like to be rendered into &gt;= 0.
                Typically the view is told to render into the span
                that is returned, although there is no guarantee.
                The parent may choose to resize or break the view.
      @exception IllegalArgumentException for an invalid axis type</div>
<a id="L652" name="L652"></a> 652     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17741.html" title="Multiple referred from 44 places.">getMinimumSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L653" name="L653"></a> 653         <strong class="reserved">if</strong> (axis == <strong class="reserved">this</strong>.axis) <em class="brace">{</em>
<a id="L654" name="L654"></a> 654             <strong class="reserved">return</strong> <a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis);
<a id="L655" name="L655"></a> 655         <em class="brace">}</em>
<a id="L656" name="L656"></a> 656         <strong class="reserved">if</strong> (minRequest != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> child = minRequest.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L658" name="L658"></a> 658             <strong class="reserved">return</strong> child.<a href="../D/20667.html" title="Multiple defined in 20 places.">getMinimumSpan</a>(axis);
<a id="L659" name="L659"></a> 659         <em class="brace">}</em>
<a id="L660" name="L660"></a> 660 
<a id="L661" name="L661"></a> 661         <em class="comment">// nothing is known about the children yet</em>
<a id="L662" name="L662"></a> 662         <strong class="reserved">if</strong> (axis == X_AXIS) <em class="brace">{</em>
<a id="L663" name="L663"></a> 663             <strong class="reserved">return</strong> <a href="../D/20069.html" title="Multiple defined in 3 places.">getLeftInset</a>() + <a href="../D/22102.html" title="Multiple defined in 2 places.">getRightInset</a>() + 5;
<a id="L664" name="L664"></a> 664         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L665" name="L665"></a> 665             <strong class="reserved">return</strong> <a href="../D/23206.html" title="Multiple defined in 2 places.">getTopInset</a>() + <a href="../D/17326.html" title="Multiple defined in 3 places.">getBottomInset</a>() + 5;
<a id="L666" name="L666"></a> 666         <em class="brace">}</em>
<a id="L667" name="L667"></a> 667     <em class="brace">}</em>
<a id="L668" name="L668"></a> 668 
<div class="comment">
      Determines the maximum span for this view along an
      axis.
      @param axis may be either View.X_AXIS or View.Y_AXIS
      @return   the span the view would like to be rendered into &gt;= 0.
                Typically the view is told to render into the span
                that is returned, although there is no guarantee.
                The parent may choose to resize or break the view.
      @exception IllegalArgumentException for an invalid axis type</div>
<a id="L680" name="L680"></a> 680     <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17622.html" title="Multiple referred from 43 places.">getMaximumSpan</a>(<strong class="reserved">int</strong> axis) <em class="brace">{</em>
<a id="L681" name="L681"></a> 681         <strong class="reserved">if</strong> (axis == <strong class="reserved">this</strong>.axis) <em class="brace">{</em>
<a id="L682" name="L682"></a> 682             <strong class="reserved">return</strong> <a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis);
<a id="L683" name="L683"></a> 683         <em class="brace">}</em>
<a id="L684" name="L684"></a> 684         <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.MAX_VALUE;
<a id="L685" name="L685"></a> 685     <em class="brace">}</em>
<a id="L686" name="L686"></a> 686 
<a id="L687" name="L687"></a> 687 
<div class="comment">
      Returns the number of views in this view.  Since
      the default is to not be a composite view this
      returns 0.
      @return the number of views &gt;= 0
      @see View#getViewCount</div>
<a id="L696" name="L696"></a> 696     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19805.html" title="Multiple referred from 108 places.">getViewCount</a>() <em class="brace">{</em>
<a id="L697" name="L697"></a> 697         <strong class="reserved">synchronized</strong>(stats) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698             <strong class="reserved">return</strong> stats.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L699" name="L699"></a> 699         <em class="brace">}</em>
<a id="L700" name="L700"></a> 700     <em class="brace">}</em>
<a id="L701" name="L701"></a> 701 
<div class="comment">
      Gets the nth child view.  Since there are no
      children by default, this returns null.
      @param n the number of the view to get, &gt;= 0 &amp;&amp; &lt; getViewCount()
      @return the view</div>
<a id="L709" name="L709"></a> 709     <strong class="reserved">public</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/19801.html" title="Multiple referred from 186 places.">getView</a>(<strong class="reserved">int</strong> n) <em class="brace">{</em>
<a id="L710" name="L710"></a> 710         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(n);
<a id="L711" name="L711"></a> 711         <strong class="reserved">if</strong> (cs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L712" name="L712"></a> 712             <strong class="reserved">return</strong> cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L713" name="L713"></a> 713         <em class="brace">}</em>
<a id="L714" name="L714"></a> 714         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L715" name="L715"></a> 715     <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<div class="comment">
      Fetches the allocation for the given child view.
      This enables finding out where various views
      are located, without assuming the views store
      their location.  This returns null since the
      default is to not have any child views.
      @param index the index of the child, &gt;= 0 &amp;&amp; &lt; getViewCount()
      @param a  the allocation to this view.
      @return the allocation to the child</div>
<a id="L728" name="L728"></a> 728     <strong class="reserved">public</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/15537.html" title="Multiple referred from 23 places.">getChildAllocation</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L729" name="L729"></a> 729         <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> ca = locator.<a href="../D/17628.html" title="Multiple defined in 7 places.">getChildAllocation</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L730" name="L730"></a> 730         <strong class="reserved">return</strong> ca;
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<div class="comment">
      Returns the child view index representing the given position in
      the model.  By default a view has no children so this is implemented
      to return -1 to indicate there is no valid child index for any
      position.
      @param pos the position &gt;= 0
      @return  index of the view representing the given position, or
        -1 if no view represents that position
      @since 1.3</div>
<a id="L744" name="L744"></a> 744     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19807.html" title="Multiple referred from 22 places.">getViewIndex</a>(<strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b) <em class="brace">{</em>
<a id="L745" name="L745"></a> 745         <strong class="reserved">return</strong> <a href="../D/23605.html" title="Multiple defined in 8 places.">getViewIndexAtPosition</a>(pos, b);
<a id="L746" name="L746"></a> 746     <em class="brace">}</em>
<a id="L747" name="L747"></a> 747 
<div class="comment">
      Provides a mapping from the document model coordinate space
      to the coordinate space of the view mapped to it.
      @param pos the position to convert &gt;= 0
      @param a the allocated region to render into
      @param b the bias toward the previous character or the
       next character represented by the offset, in case the
       position is a boundary of two views.
      @return the bounding box of the given position is returned
      @exception BadLocationException  if the given position does
        not represent a valid location in the associated document
      @exception IllegalArgumentException for an invalid bias argument
      @see View#viewToModel</div>
<a id="L763" name="L763"></a> 763     <strong class="reserved">public</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/23332.html" title="Multiple referred from 109 places.">modelToView</a>(<strong class="reserved">int</strong> pos, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b) <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/23603.html" title="Multiple defined in 6 places.">getViewIndex</a>(pos, b);
<a id="L765" name="L765"></a> 765         <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> ca = locator.<a href="../D/17628.html" title="Multiple defined in 7 places.">getChildAllocation</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L766" name="L766"></a> 766 
<a id="L767" name="L767"></a> 767         <em class="comment">// forward to the child view, and make sure we don't</em>
<a id="L768" name="L768"></a> 768         <em class="comment">// interact with the layout thread by synchronizing</em>
<a id="L769" name="L769"></a> 769         <em class="comment">// on the child state.</em>
<a id="L770" name="L770"></a> 770         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L771" name="L771"></a> 771         <strong class="reserved">synchronized</strong> (cs) <em class="brace">{</em>
<a id="L772" name="L772"></a> 772             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> cv = cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L773" name="L773"></a> 773             <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> v = cv.<a href="../D/27746.html" title="Multiple defined in 34 places.">modelToView</a>(pos, ca, b);
<a id="L774" name="L774"></a> 774             <strong class="reserved">return</strong> v;
<a id="L775" name="L775"></a> 775         <em class="brace">}</em>
<a id="L776" name="L776"></a> 776     <em class="brace">}</em>
<a id="L777" name="L777"></a> 777 
<div class="comment">
      Provides a mapping from the view coordinate space to the logical
      coordinate space of the model.  The biasReturn argument will be
      filled in to indicate that the point given is closer to the next
      character in the model or the previous character in the model.
      <p>
      This is expected to be called by the GUI thread, holding a
      read-lock on the associated model.  It is implemented to
      locate the child view and determine it's allocation with a
      lock on the ChildLocator object, and to call viewToModel
      on the child view with a lock on the ChildState object
      to avoid interaction with the layout thread.
      @param x the X coordinate &gt;= 0
      @param y the Y coordinate &gt;= 0
      @param a the allocated region to render into
      @return the location within the model that best represents the
       given point in the view &gt;= 0.  The biasReturn argument will be
      filled in to indicate that the point given is closer to the next
      character in the model or the previous character in the model.</p></div>
<a id="L799" name="L799"></a> 799     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/30138.html" title="Multiple referred from 99 places.">viewToModel</a>(<strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> y, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasReturn) <em class="brace">{</em>
<a id="L800" name="L800"></a> 800         <strong class="reserved">int</strong> pos;    <em class="comment">// return position</em>
<a id="L801" name="L801"></a> 801         <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;  <em class="comment">// child index to forward to</em>
<a id="L802" name="L802"></a> 802         <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> ca;   <em class="comment">// child allocation</em>
<a id="L803" name="L803"></a> 803 
<a id="L804" name="L804"></a> 804         <em class="comment">// locate the child view and it's allocation so that</em>
<a id="L805" name="L805"></a> 805         <em class="comment">// we can forward to it.  Make sure the layout thread</em>
<a id="L806" name="L806"></a> 806         <em class="comment">// doesn't change anything by trying to flush changes</em>
<a id="L807" name="L807"></a> 807         <em class="comment">// to the parent while the GUI thread is trying to</em>
<a id="L808" name="L808"></a> 808         <em class="comment">// find the child and it's allocation.</em>
<a id="L809" name="L809"></a> 809         <strong class="reserved">synchronized</strong> (locator) <em class="brace">{</em>
<a id="L810" name="L810"></a> 810             <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = locator.<a href="../S/3344.html#L1023" title="Defined at 1023 in src/javax/swing/text/AsyncBoxView.java.">getViewIndexAtPoint</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L811" name="L811"></a> 811             ca = locator.<a href="../D/17628.html" title="Multiple defined in 7 places.">getChildAllocation</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L812" name="L812"></a> 812         <em class="brace">}</em>
<a id="L813" name="L813"></a> 813 
<a id="L814" name="L814"></a> 814         <em class="comment">// forward to the child view, and make sure we don't</em>
<a id="L815" name="L815"></a> 815         <em class="comment">// interact with the layout thread by synchronizing</em>
<a id="L816" name="L816"></a> 816         <em class="comment">// on the child state.</em>
<a id="L817" name="L817"></a> 817         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L818" name="L818"></a> 818         <strong class="reserved">synchronized</strong> (cs) <em class="brace">{</em>
<a id="L819" name="L819"></a> 819             <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L820" name="L820"></a> 820             pos = v.<a href="../D/36416.html" title="Multiple defined in 28 places.">viewToModel</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, ca, biasReturn);
<a id="L821" name="L821"></a> 821         <em class="brace">}</em>
<a id="L822" name="L822"></a> 822         <strong class="reserved">return</strong> pos;
<a id="L823" name="L823"></a> 823     <em class="brace">}</em>
<a id="L824" name="L824"></a> 824 
<div class="comment">
      Provides a way to determine the next visually represented model
      location that one might place a caret.  Some views may not be visible,
      they might not be in the same order found in the model, or they just
      might not allow access to some of the locations in the model.
      This method enables specifying a position to convert
      within the range of &gt;=0.  If the value is -1, a position
      will be calculated automatically.  If the value &lt; -1,
      the <code>BadLocationException</code> will be thrown.
      @param pos the position to convert
      @param a the allocated region to render into
      @param direction the direction from the current position that can
       be thought of as the arrow keys typically found on a keyboard;
       this may be one of the following:
       <ul style="list-style-type:none">
       <li><code>SwingConstants.WEST</code></li><li><code>SwingConstants.EAST</code></li><li><code>SwingConstants.NORTH</code></li><li><code>SwingConstants.SOUTH</code></li>
       </ul>
      @param biasRet an array contain the bias that was checked
      @return the location within the model that best represents the next
       location visual position
      @exception BadLocationException the given position is not a valid
                                      position within the document
      @exception IllegalArgumentException if <code>direction</code> is invalid</div>
<a id="L853" name="L853"></a> 853     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17962.html" title="Multiple referred from 24 places.">getNextVisualPositionFrom</a>(<strong class="reserved">int</strong> pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a> b, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>,
<a id="L854" name="L854"></a> 854                                          <strong class="reserved">int</strong> direction,
<a id="L855" name="L855"></a> 855                                          <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>[] biasRet)
<a id="L856" name="L856"></a> 856                                                   <strong class="reserved">throws</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a> <em class="brace">{</em>
<a id="L857" name="L857"></a> 857         <strong class="reserved">if</strong> (pos &lt; -1) <em class="brace">{</em>
<a id="L858" name="L858"></a> 858             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/3359.html#L43" title="Defined at 43 in src/javax/swing/text/BadLocationException.java.">BadLocationException</a>("invalid position", pos);
<a id="L859" name="L859"></a> 859         <em class="brace">}</em>
<a id="L860" name="L860"></a> 860         <strong class="reserved">return</strong> <a href="../S/3270.html#L52" title="Defined at 52 in src/javax/swing/text/Utilities.java.">Utilities</a>.<a href="../D/20952.html" title="Multiple defined in 14 places.">getNextVisualPositionFrom</a>(
<a id="L861" name="L861"></a> 861                             <strong class="reserved">this</strong>, pos, b, <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>, direction, biasRet);
<a id="L862" name="L862"></a> 862     <em class="brace">}</em>
<a id="L863" name="L863"></a> 863 
<a id="L864" name="L864"></a> 864     <em class="comment">// --- variables -----------------------------------------</em>
<a id="L865" name="L865"></a> 865 
<div class="comment">
      The major axis against which the children are
      tiled.</div>
<a id="L870" name="L870"></a> 870     <strong class="reserved">int</strong> axis;
<a id="L871" name="L871"></a> 871 
<div class="comment">
      The children and their layout statistics.</div>
<a id="L875" name="L875"></a> 875     <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a>&gt; stats;
<a id="L876" name="L876"></a> 876 
<div class="comment">
      Current span along the major axis.  This
      is also the value returned by getMinimumSize,
      getPreferredSize, and getMaximumSize along
      the major axis.</div>
<a id="L883" name="L883"></a> 883     <strong class="reserved">float</strong> majorSpan;
<a id="L884" name="L884"></a> 884 
<div class="comment">
      Is the span along the major axis estimated?</div>
<a id="L888" name="L888"></a> 888     <strong class="reserved">boolean</strong> estimatedMajorSpan;
<a id="L889" name="L889"></a> 889 
<div class="comment">
      Current span along the minor axis.  This
      is what layout was done against (i.e. things
      are flexible in this direction).</div>
<a id="L895" name="L895"></a> 895     <strong class="reserved">float</strong> minorSpan;
<a id="L896" name="L896"></a> 896 
<div class="comment">
      Object that manages the offsets of the
      children.  All locking for management of
      child locations is on this object.</div>
<a id="L902" name="L902"></a> 902     <strong class="reserved">protected</strong> <a href="../S/3344.html#L933" title="Defined at 933 in src/javax/swing/text/AsyncBoxView.java.">ChildLocator</a> locator;
<a id="L903" name="L903"></a> 903 
<a id="L904" name="L904"></a> 904     <strong class="reserved">float</strong> topInset;
<a id="L905" name="L905"></a> 905     <strong class="reserved">float</strong> bottomInset;
<a id="L906" name="L906"></a> 906     <strong class="reserved">float</strong> leftInset;
<a id="L907" name="L907"></a> 907     <strong class="reserved">float</strong> rightInset;
<a id="L908" name="L908"></a> 908 
<a id="L909" name="L909"></a> 909     <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> minRequest;
<a id="L910" name="L910"></a> 910     <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> prefRequest;
<a id="L911" name="L911"></a> 911     <strong class="reserved">boolean</strong> majorChanged;
<a id="L912" name="L912"></a> 912     <strong class="reserved">boolean</strong> minorChanged;
<a id="L913" name="L913"></a> 913     <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> flushTask;
<a id="L914" name="L914"></a> 914 
<div class="comment">
      Child that is actively changing size.  This often
      causes a preferenceChanged, so this is a cache to
      possibly speed up the marking the state.  It also
      helps flag an opportunity to avoid adding to flush
      task to the layout queue.</div>
<a id="L922" name="L922"></a> 922     <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> changing;
<a id="L923" name="L923"></a> 923 
<div class="comment">
      A class to manage the effective position of the
      child views in a localized area while changes are
      being made around the localized area.  The AsyncBoxView
      may be continuously changing, but the visible area
      needs to remain fairly stable until the layout thread
      decides to publish an update to the parent.
      @since 1.3</div>
<a id="L933" name="L933"></a> 933     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1332.html" title="Multiple referred from 2 places.">ChildLocator</a> <em class="brace">{</em>
<a id="L934" name="L934"></a> 934 
<div class="comment">
          construct a child locator.</div>
<a id="L938" name="L938"></a> 938         <strong class="reserved">public</strong> ChildLocator() <em class="brace">{</em>
<a id="L939" name="L939"></a> 939             lastAlloc = <strong class="reserved">new</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>();
<a id="L940" name="L940"></a> 940             childAlloc = <strong class="reserved">new</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>();
<a id="L941" name="L941"></a> 941         <em class="brace">}</em>
<a id="L942" name="L942"></a> 942 
<div class="comment">
          Notification that a child changed.  This can effect
          whether or not new offset calculations are needed.
          This is called by a ChildState object that has
          changed it's major span.  This can therefore be
          called by multiple threads.</div>
<a id="L950" name="L950"></a> 950         <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/11424.html" title="Multiple referred from 2 places.">childChanged</a>(<a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs) <em class="brace">{</em>
<a id="L951" name="L951"></a> 951             <strong class="reserved">if</strong> (lastValidOffset == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L952" name="L952"></a> 952                 lastValidOffset = cs;
<a id="L953" name="L953"></a> 953             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &lt;
<a id="L954" name="L954"></a> 954                        lastValidOffset.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()) <em class="brace">{</em>
<a id="L955" name="L955"></a> 955                 lastValidOffset = cs;
<a id="L956" name="L956"></a> 956             <em class="brace">}</em>
<a id="L957" name="L957"></a> 957         <em class="brace">}</em>
<a id="L958" name="L958"></a> 958 
<div class="comment">
          Paint the children that intersect the clip area.</div>
<a id="L962" name="L962"></a> 962         <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24194.html" title="Multiple referred from 5 places.">paintChildren</a>(<a href="../S/2313.html#L104" title="Defined at 104 in src/java/awt/Graphics.java.">Graphics</a> g) <em class="brace">{</em>
<a id="L963" name="L963"></a> 963             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a> = g.<a href="../D/17730.html" title="Multiple defined in 3 places.">getClipBounds</a>();
<a id="L964" name="L964"></a> 964             <strong class="reserved">float</strong> targetOffset = (axis == X_AXIS) ?
<a id="L965" name="L965"></a> 965                 <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> - lastAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> : <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>.y - lastAlloc.y;
<a id="L966" name="L966"></a> 966             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/3344.html#L1080" title="Defined at 1080 in src/javax/swing/text/AsyncBoxView.java.">getViewIndexAtVisualOffset</a>(targetOffset);
<a id="L967" name="L967"></a> 967             <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L968" name="L968"></a> 968             <strong class="reserved">float</strong> offs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>).<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>();
<a id="L969" name="L969"></a> 969             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>; i &lt; n; i++) <em class="brace">{</em>
<a id="L970" name="L970"></a> 970                 <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L971" name="L971"></a> 971                 cs.<a href="../S/3344.html#L1365" title="Defined at 1365 in src/javax/swing/text/AsyncBoxView.java.">setMajorOffset</a>(offs);
<a id="L972" name="L972"></a> 972                 <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> ca = <a href="../D/17628.html" title="Multiple defined in 7 places.">getChildAllocation</a>(i);
<a id="L973" name="L973"></a> 973                 <strong class="reserved">if</strong> (<a href="../S/3344.html#L1156" title="Defined at 1156 in src/javax/swing/text/AsyncBoxView.java.">intersectsClip</a>(ca, <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>)) <em class="brace">{</em>
<a id="L974" name="L974"></a> 974                     <strong class="reserved">synchronized</strong> (cs) <em class="brace">{</em>
<a id="L975" name="L975"></a> 975                         <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v = cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>();
<a id="L976" name="L976"></a> 976                         v.<a href="../D/28657.html" title="Multiple defined in 228 places.">paint</a>(g, ca);
<a id="L977" name="L977"></a> 977                     <em class="brace">}</em>
<a id="L978" name="L978"></a> 978                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L979" name="L979"></a> 979                     <em class="comment">// done painting intersection</em>
<a id="L980" name="L980"></a> 980                     <strong class="reserved">break</strong>;
<a id="L981" name="L981"></a> 981                 <em class="brace">}</em>
<a id="L982" name="L982"></a> 982                 offs += cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L983" name="L983"></a> 983             <em class="brace">}</em>
<a id="L984" name="L984"></a> 984         <em class="brace">}</em>
<a id="L985" name="L985"></a> 985 
<div class="comment">
          Fetch the allocation to use for a child view.
          This will update the offsets for all children
          not yet updated before the given index.</div>
<a id="L991" name="L991"></a> 991         <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/15537.html" title="Multiple referred from 23 places.">getChildAllocation</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L992" name="L992"></a> 992             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L993" name="L993"></a> 993                 <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L994" name="L994"></a> 994             <em class="brace">}</em>
<a id="L995" name="L995"></a> 995             <a href="../S/3344.html#L1061" title="Defined at 1061 in src/javax/swing/text/AsyncBoxView.java.">setAllocation</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L996" name="L996"></a> 996             <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L997" name="L997"></a> 997             <strong class="reserved">if</strong> (lastValidOffset == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L998" name="L998"></a> 998                 lastValidOffset = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(0);
<a id="L999" name="L999"></a> 999             <em class="brace">}</em>
<a id="L1000" name="L1000"></a>1000             <strong class="reserved">if</strong> (cs.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>() &gt;
<a id="L1001" name="L1001"></a>1001                 lastValidOffset.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>()) <em class="brace">{</em>
<a id="L1002" name="L1002"></a>1002                 <em class="comment">// offsets need to be updated</em>
<a id="L1003" name="L1003"></a>1003                 <a href="../S/3344.html#L1145" title="Defined at 1145 in src/javax/swing/text/AsyncBoxView.java.">updateChildOffsetsToIndex</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1004" name="L1004"></a>1004             <em class="brace">}</em>
<a id="L1005" name="L1005"></a>1005             <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> ca = <a href="../D/17628.html" title="Multiple defined in 7 places.">getChildAllocation</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1006" name="L1006"></a>1006             <strong class="reserved">return</strong> ca;
<a id="L1007" name="L1007"></a>1007         <em class="brace">}</em>
<a id="L1008" name="L1008"></a>1008 
<div class="comment">
          Fetches the child view index at the given point.
          This is called by the various View methods that
          need to calculate which child to forward a message
          to.  This should be called by a block synchronized
          on this object, and would typically be followed
          with one or more calls to getChildAllocation that
          should also be in the synchronized block.
          @param x the X coordinate &gt;= 0
          @param y the Y coordinate &gt;= 0
          @param a the allocation to the View
          @return the nearest child index</div>
<a id="L1023" name="L1023"></a>1023         <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../S/3344.html#L810" title="Referred from 810 in src/javax/swing/text/AsyncBoxView.java.">getViewIndexAtPoint</a>(<strong class="reserved">float</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">float</strong> y, <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L1024" name="L1024"></a>1024             <a href="../S/3344.html#L1061" title="Defined at 1061 in src/javax/swing/text/AsyncBoxView.java.">setAllocation</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L1025" name="L1025"></a>1025             <strong class="reserved">float</strong> targetOffset = (axis == X_AXIS) ? <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> - lastAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> : y - lastAlloc.y;
<a id="L1026" name="L1026"></a>1026             <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/3344.html#L1080" title="Defined at 1080 in src/javax/swing/text/AsyncBoxView.java.">getViewIndexAtVisualOffset</a>(targetOffset);
<a id="L1027" name="L1027"></a>1027             <strong class="reserved">return</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1028" name="L1028"></a>1028         <em class="brace">}</em>
<a id="L1029" name="L1029"></a>1029 
<div class="comment">
          Fetch the allocation to use for a child view.
          <em>This does not update the offsets in the ChildState
          records.</em></div>
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">protected</strong> <a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../R/15537.html" title="Multiple referred from 23 places.">getChildAllocation</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036             <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L1037" name="L1037"></a>1037             <strong class="reserved">if</strong> (! cs.<a href="../D/25777.html" title="Multiple defined in 2 places.">isLayoutValid</a>()) <em class="brace">{</em>
<a id="L1038" name="L1038"></a>1038                 cs.<a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>();
<a id="L1039" name="L1039"></a>1039             <em class="brace">}</em>
<a id="L1040" name="L1040"></a>1040             <strong class="reserved">if</strong> (axis == X_AXIS) <em class="brace">{</em>
<a id="L1041" name="L1041"></a>1041                 childAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = lastAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> + (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>();
<a id="L1042" name="L1042"></a>1042                 childAlloc.y = lastAlloc.y + (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1337" title="Defined at 1337 in src/javax/swing/text/AsyncBoxView.java.">getMinorOffset</a>();
<a id="L1043" name="L1043"></a>1043                 childAlloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L1044" name="L1044"></a>1044                 childAlloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> = (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1326" title="Defined at 1326 in src/javax/swing/text/AsyncBoxView.java.">getMinorSpan</a>();
<a id="L1045" name="L1045"></a>1045             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1046" name="L1046"></a>1046                 childAlloc.y = lastAlloc.y + (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>();
<a id="L1047" name="L1047"></a>1047                 childAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = lastAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> + (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1337" title="Defined at 1337 in src/javax/swing/text/AsyncBoxView.java.">getMinorOffset</a>();
<a id="L1048" name="L1048"></a>1048                 childAlloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> = (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L1049" name="L1049"></a>1049                 childAlloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> = (<strong class="reserved">int</strong>) cs.<a href="../S/3344.html#L1326" title="Defined at 1326 in src/javax/swing/text/AsyncBoxView.java.">getMinorSpan</a>();
<a id="L1050" name="L1050"></a>1050             <em class="brace">}</em>
<a id="L1051" name="L1051"></a>1051             childAlloc.<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> += (<strong class="reserved">int</strong>)<a href="../D/20069.html" title="Multiple defined in 3 places.">getLeftInset</a>();
<a id="L1052" name="L1052"></a>1052             childAlloc.y += (<strong class="reserved">int</strong>)<a href="../D/22102.html" title="Multiple defined in 2 places.">getRightInset</a>();
<a id="L1053" name="L1053"></a>1053             <strong class="reserved">return</strong> childAlloc;
<a id="L1054" name="L1054"></a>1054         <em class="brace">}</em>
<a id="L1055" name="L1055"></a>1055 
<div class="comment">
          Copy the currently allocated shape into the Rectangle
          used to store the current allocation.  This would be
          a floating point rectangle in a Java2D-specific implementation.</div>
<a id="L1061" name="L1061"></a>1061         <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/26885.html" title="Multiple referred from 3 places.">setAllocation</a>(<a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>) <em class="brace">{</em>
<a id="L1062" name="L1062"></a>1062             <strong class="reserved">if</strong> (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> <strong class="reserved">instanceof</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) <em class="brace">{</em>
<a id="L1063" name="L1063"></a>1063                 lastAlloc.<a href="../D/32047.html" title="Multiple defined in 22 places.">setBounds</a>((<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>);
<a id="L1064" name="L1064"></a>1064             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065                 lastAlloc.<a href="../D/32047.html" title="Multiple defined in 22 places.">setBounds</a>(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>());
<a id="L1066" name="L1066"></a>1066             <em class="brace">}</em>
<a id="L1067" name="L1067"></a>1067             <a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(lastAlloc.<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, lastAlloc.<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>);
<a id="L1068" name="L1068"></a>1068         <em class="brace">}</em>
<a id="L1069" name="L1069"></a>1069 
<div class="comment">
          Locate the view responsible for an offset into the box
          along the major axis.  Make sure that offsets are set
          on the ChildState objects up to the given target span
          past the desired offset.
          @return   index of the view representing the given visual
            location (targetOffset), or -1 if no view represents
            that location</div>
<a id="L1080" name="L1080"></a>1080         <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/19810.html" title="Multiple referred from 2 places.">getViewIndexAtVisualOffset</a>(<strong class="reserved">float</strong> targetOffset) <em class="brace">{</em>
<a id="L1081" name="L1081"></a>1081             <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L1082" name="L1082"></a>1082             <strong class="reserved">if</strong> (n &gt; 0) <em class="brace">{</em>
<a id="L1083" name="L1083"></a>1083                 <strong class="reserved">boolean</strong> lastValid = (lastValidOffset != <strong class="reserved">null</strong>);
<a id="L1084" name="L1084"></a>1084 
<a id="L1085" name="L1085"></a>1085                 <strong class="reserved">if</strong> (lastValidOffset == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1086" name="L1086"></a>1086                     lastValidOffset = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(0);
<a id="L1087" name="L1087"></a>1087                 <em class="brace">}</em>
<a id="L1088" name="L1088"></a>1088                 <strong class="reserved">if</strong> (targetOffset &gt; majorSpan) <em class="brace">{</em>
<a id="L1089" name="L1089"></a>1089                     <em class="comment">// should only get here on the first time display.</em>
<a id="L1090" name="L1090"></a>1090                     <strong class="reserved">if</strong> (!lastValid) <em class="brace">{</em>
<a id="L1091" name="L1091"></a>1091                         <strong class="reserved">return</strong> 0;
<a id="L1092" name="L1092"></a>1092                     <em class="brace">}</em>
<a id="L1093" name="L1093"></a>1093                     <strong class="reserved">int</strong> pos = lastValidOffset.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1094" name="L1094"></a>1094                     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/23603.html" title="Multiple defined in 6 places.">getViewIndex</a>(pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1095" name="L1095"></a>1095                     <strong class="reserved">return</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L1096" name="L1096"></a>1096                 <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (targetOffset &gt; lastValidOffset.<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>()) <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097                     <em class="comment">// roll offset calculations forward</em>
<a id="L1098" name="L1098"></a>1098                     <strong class="reserved">return</strong> <a href="../S/3344.html#L1120" title="Defined at 1120 in src/javax/swing/text/AsyncBoxView.java.">updateChildOffsets</a>(targetOffset);
<a id="L1099" name="L1099"></a>1099                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1100" name="L1100"></a>1100                     <em class="comment">// no changes prior to the needed offset</em>
<a id="L1101" name="L1101"></a>1101                     <em class="comment">// this should be a binary search</em>
<a id="L1102" name="L1102"></a>1102                     <strong class="reserved">float</strong> offs = 0f;
<a id="L1103" name="L1103"></a>1103                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; n; i++) <em class="brace">{</em>
<a id="L1104" name="L1104"></a>1104                         <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L1105" name="L1105"></a>1105                         <strong class="reserved">float</strong> nextOffs = offs + cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L1106" name="L1106"></a>1106                         <strong class="reserved">if</strong> (targetOffset &lt; nextOffs) <em class="brace">{</em>
<a id="L1107" name="L1107"></a>1107                             <strong class="reserved">return</strong> i;
<a id="L1108" name="L1108"></a>1108                         <em class="brace">}</em>
<a id="L1109" name="L1109"></a>1109                         offs = nextOffs;
<a id="L1110" name="L1110"></a>1110                     <em class="brace">}</em>
<a id="L1111" name="L1111"></a>1111                 <em class="brace">}</em>
<a id="L1112" name="L1112"></a>1112             <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113             <strong class="reserved">return</strong> n - 1;
<a id="L1114" name="L1114"></a>1114         <em class="brace">}</em>
<a id="L1115" name="L1115"></a>1115 
<div class="comment">
          Move the location of the last offset calculation forward
          to the desired offset.</div>
<a id="L1120" name="L1120"></a>1120         <strong class="reserved">int</strong> <a href="../S/3344.html#L1098" title="Referred from 1098 in src/javax/swing/text/AsyncBoxView.java.">updateChildOffsets</a>(<strong class="reserved">float</strong> targetOffset) <em class="brace">{</em>
<a id="L1121" name="L1121"></a>1121             <strong class="reserved">int</strong> n = <a href="../D/23601.html" title="Multiple defined in 5 places.">getViewCount</a>();
<a id="L1122" name="L1122"></a>1122             <strong class="reserved">int</strong> targetIndex = n - 1;
<a id="L1123" name="L1123"></a>1123             <strong class="reserved">int</strong> pos = lastValidOffset.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1124" name="L1124"></a>1124             <strong class="reserved">int</strong> startIndex = <a href="../D/23603.html" title="Multiple defined in 6 places.">getViewIndex</a>(pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1125" name="L1125"></a>1125             <strong class="reserved">float</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = lastValidOffset.<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>();
<a id="L1126" name="L1126"></a>1126             <strong class="reserved">float</strong> lastOffset = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L1127" name="L1127"></a>1127             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = startIndex; i &lt; n; i++) <em class="brace">{</em>
<a id="L1128" name="L1128"></a>1128                 <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L1129" name="L1129"></a>1129                 cs.<a href="../S/3344.html#L1365" title="Defined at 1365 in src/javax/swing/text/AsyncBoxView.java.">setMajorOffset</a>(lastOffset);
<a id="L1130" name="L1130"></a>1130                 lastOffset += cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L1131" name="L1131"></a>1131                 <strong class="reserved">if</strong> (targetOffset &lt; lastOffset) <em class="brace">{</em>
<a id="L1132" name="L1132"></a>1132                     targetIndex = i;
<a id="L1133" name="L1133"></a>1133                     lastValidOffset = cs;
<a id="L1134" name="L1134"></a>1134                     <strong class="reserved">break</strong>;
<a id="L1135" name="L1135"></a>1135                 <em class="brace">}</em>
<a id="L1136" name="L1136"></a>1136             <em class="brace">}</em>
<a id="L1137" name="L1137"></a>1137 
<a id="L1138" name="L1138"></a>1138             <strong class="reserved">return</strong> targetIndex;
<a id="L1139" name="L1139"></a>1139         <em class="brace">}</em>
<a id="L1140" name="L1140"></a>1140 
<div class="comment">
          Move the location of the last offset calculation forward
          to the desired index.</div>
<a id="L1145" name="L1145"></a>1145         <strong class="reserved">void</strong> <a href="../S/3344.html#L1003" title="Referred from 1003 in src/javax/swing/text/AsyncBoxView.java.">updateChildOffsetsToIndex</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) <em class="brace">{</em>
<a id="L1146" name="L1146"></a>1146             <strong class="reserved">int</strong> pos = lastValidOffset.<a href="../S/3344.html#L1217" title="Defined at 1217 in src/javax/swing/text/AsyncBoxView.java.">getChildView</a>().<a href="../D/22718.html" title="Multiple defined in 18 places.">getStartOffset</a>();
<a id="L1147" name="L1147"></a>1147             <strong class="reserved">int</strong> startIndex = <a href="../D/23603.html" title="Multiple defined in 6 places.">getViewIndex</a>(pos, <a href="../S/3329.html#L49" title="Defined at 49 in src/javax/swing/text/Position.java.">Position</a>.<a href="../S/3329.html#L66" title="Defined at 66 in src/javax/swing/text/Position.java.">Bias</a>.Forward);
<a id="L1148" name="L1148"></a>1148             <strong class="reserved">float</strong> lastOffset = lastValidOffset.<a href="../S/3344.html#L1356" title="Defined at 1356 in src/javax/swing/text/AsyncBoxView.java.">getMajorOffset</a>();
<a id="L1149" name="L1149"></a>1149             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = startIndex; i &lt;= <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>; i++) <em class="brace">{</em>
<a id="L1150" name="L1150"></a>1150                 <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> cs = <a href="../S/3344.html#L198" title="Defined at 198 in src/javax/swing/text/AsyncBoxView.java.">getChildState</a>(i);
<a id="L1151" name="L1151"></a>1151                 cs.<a href="../S/3344.html#L1365" title="Defined at 1365 in src/javax/swing/text/AsyncBoxView.java.">setMajorOffset</a>(lastOffset);
<a id="L1152" name="L1152"></a>1152                 lastOffset += cs.<a href="../S/3344.html#L1349" title="Defined at 1349 in src/javax/swing/text/AsyncBoxView.java.">getMajorSpan</a>();
<a id="L1153" name="L1153"></a>1153             <em class="brace">}</em>
<a id="L1154" name="L1154"></a>1154         <em class="brace">}</em>
<a id="L1155" name="L1155"></a>1155 
<a id="L1156" name="L1156"></a>1156         <strong class="reserved">boolean</strong> <a href="../S/3344.html#L973" title="Referred from 973 in src/javax/swing/text/AsyncBoxView.java.">intersectsClip</a>(<a href="../S/2445.html#L78" title="Defined at 78 in src/java/awt/Shape.java.">Shape</a> childAlloc, <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> <a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>) <em class="brace">{</em>
<a id="L1157" name="L1157"></a>1157             <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> cs = (childAlloc <strong class="reserved">instanceof</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) ?
<a id="L1158" name="L1158"></a>1158                 (<a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a>) childAlloc : childAlloc.<a href="../D/17335.html" title="Multiple defined in 41 places.">getBounds</a>();
<a id="L1159" name="L1159"></a>1159             <strong class="reserved">if</strong> (cs.<a href="../D/24982.html" title="Multiple defined in 23 places.">intersects</a>(<a href="../D/12883.html" title="Multiple defined in 2 places.">clip</a>)) <em class="brace">{</em>
<a id="L1160" name="L1160"></a>1160                 <em class="comment">// Make sure that lastAlloc also contains childAlloc,</em>
<a id="L1161" name="L1161"></a>1161                 <em class="comment">// this will be false if haven't yet flushed changes.</em>
<a id="L1162" name="L1162"></a>1162                 <strong class="reserved">return</strong> lastAlloc.<a href="../D/24982.html" title="Multiple defined in 23 places.">intersects</a>(cs);
<a id="L1163" name="L1163"></a>1163             <em class="brace">}</em>
<a id="L1164" name="L1164"></a>1164             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1165" name="L1165"></a>1165         <em class="brace">}</em>
<a id="L1166" name="L1166"></a>1166 
<div class="comment">
          The location of the last offset calculation
          that is valid.</div>
<a id="L1171" name="L1171"></a>1171         <strong class="reserved">protected</strong> <a href="../S/3344.html#L1198" title="Defined at 1198 in src/javax/swing/text/AsyncBoxView.java.">ChildState</a> lastValidOffset;
<a id="L1172" name="L1172"></a>1172 
<div class="comment">
          The last seen allocation (for repainting when changes
          are flushed upward).</div>
<a id="L1177" name="L1177"></a>1177         <strong class="reserved">protected</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> lastAlloc;
<a id="L1178" name="L1178"></a>1178 
<div class="comment">
          A shape to use for the child allocation to avoid
          creating a lot of garbage.</div>
<a id="L1183" name="L1183"></a>1183         <strong class="reserved">protected</strong> <a href="../S/2314.html#L119" title="Defined at 119 in src/java/awt/Rectangle.java.">Rectangle</a> childAlloc;
<a id="L1184" name="L1184"></a>1184     <em class="brace">}</em>
<a id="L1185" name="L1185"></a>1185 
<div class="comment">
      A record representing the layout state of a
      child view.  It is runnable as a task on another
      thread.  All access to the child view that is
      based upon a read-lock on the model should synchronize
      on this object (i.e. The layout thread and the GUI
      thread can both have a read lock on the model at the
      same time and are not protected from each other).
      Access to a child view hierarchy is serialized via
      synchronization on the ChildState instance.
      @since 1.3</div>
<a id="L1198" name="L1198"></a>1198     <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1335.html" title="Multiple referred from 29 places.">ChildState</a> <strong class="reserved">implements</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <em class="brace">{</em>
<a id="L1199" name="L1199"></a>1199 
<div class="comment">
          Construct a child status.  This needs to start
          out as fairly large so we don't falsely begin with
          the idea that all of the children are visible.
          @since 1.4</div>
<a id="L1206" name="L1206"></a>1206         <strong class="reserved">public</strong> ChildState(<a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> v) <em class="brace">{</em>
<a id="L1207" name="L1207"></a>1207             child = v;
<a id="L1208" name="L1208"></a>1208             minorValid = <strong class="reserved">false</strong>;
<a id="L1209" name="L1209"></a>1209             majorValid = <strong class="reserved">false</strong>;
<a id="L1210" name="L1210"></a>1210             childSizeValid = <strong class="reserved">false</strong>;
<a id="L1211" name="L1211"></a>1211             child.<a href="../D/33509.html" title="Multiple defined in 44 places.">setParent</a>(<a href="../S/3344.html#L51" title="Defined at 51 in src/javax/swing/text/AsyncBoxView.java.">AsyncBoxView</a>.<strong class="reserved">this</strong>);
<a id="L1212" name="L1212"></a>1212         <em class="brace">}</em>
<a id="L1213" name="L1213"></a>1213 
<div class="comment">
          Fetch the child view this record represents</div>
<a id="L1217" name="L1217"></a>1217         <strong class="reserved">public</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> <a href="../R/15555.html" title="Multiple referred from 15 places.">getChildView</a>() <em class="brace">{</em>
<a id="L1218" name="L1218"></a>1218             <strong class="reserved">return</strong> child;
<a id="L1219" name="L1219"></a>1219         <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220 
<div class="comment">
          Update the child state.  This should be
          called by the thread that desires to spend
          time updating the child state (intended to
          be the layout thread).
          <p>
          This acquires a read lock on the associated
          document for the duration of the update to
          ensure the model is not changed while it is
          operating.  The first thing to do would be
          to see if any work actually needs to be done.
          The following could have conceivably happened
          while the state was waiting to be updated:
          </p><ol>
          <li>The child may have been removed from the
          view hierarchy.
          </li><li>The child may have been updated by a
          higher priority operation (i.e. the child
          may have become visible).
          </li></ol></div>
<a id="L1242" name="L1242"></a>1242         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a> () <em class="brace">{</em>
<a id="L1243" name="L1243"></a>1243             <a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a> doc = (<a href="../S/3268.html#L99" title="Defined at 99 in src/javax/swing/text/AbstractDocument.java.">AbstractDocument</a>) <a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>();
<a id="L1244" name="L1244"></a>1244             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1245" name="L1245"></a>1245                 doc.<a href="../D/30215.html" title="Multiple defined in 5 places.">readLock</a>();
<a id="L1246" name="L1246"></a>1246                 <strong class="reserved">if</strong> (minorValid &amp;&amp; majorValid &amp;&amp; childSizeValid) <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247                     <em class="comment">// nothing to do</em>
<a id="L1248" name="L1248"></a>1248                     <strong class="reserved">return</strong>;
<a id="L1249" name="L1249"></a>1249                 <em class="brace">}</em>
<a id="L1250" name="L1250"></a>1250                 <strong class="reserved">if</strong> (child.<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>() == <a href="../S/3344.html#L51" title="Defined at 51 in src/javax/swing/text/AsyncBoxView.java.">AsyncBoxView</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1251" name="L1251"></a>1251                     <em class="comment">// this may overwrite anothers threads cached</em>
<a id="L1252" name="L1252"></a>1252                     <em class="comment">// value for actively changing... but that just</em>
<a id="L1253" name="L1253"></a>1253                     <em class="comment">// means it won't use the cache if there is an</em>
<a id="L1254" name="L1254"></a>1254                     <em class="comment">// overwrite.</em>
<a id="L1255" name="L1255"></a>1255                     <strong class="reserved">synchronized</strong>(<a href="../S/3344.html#L51" title="Defined at 51 in src/javax/swing/text/AsyncBoxView.java.">AsyncBoxView</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1256" name="L1256"></a>1256                         changing = <strong class="reserved">this</strong>;
<a id="L1257" name="L1257"></a>1257                     <em class="brace">}</em>
<a id="L1258" name="L1258"></a>1258                     <a href="../S/3344.html#L1273" title="Defined at 1273 in src/javax/swing/text/AsyncBoxView.java.">updateChild</a>();
<a id="L1259" name="L1259"></a>1259                     <strong class="reserved">synchronized</strong>(<a href="../S/3344.html#L51" title="Defined at 51 in src/javax/swing/text/AsyncBoxView.java.">AsyncBoxView</a>.<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1260" name="L1260"></a>1260                         changing = <strong class="reserved">null</strong>;
<a id="L1261" name="L1261"></a>1261                     <em class="brace">}</em>
<a id="L1262" name="L1262"></a>1262 
<a id="L1263" name="L1263"></a>1263                     <em class="comment">// setting the child size on the minor axis</em>
<a id="L1264" name="L1264"></a>1264                     <em class="comment">// may have caused it to change it's preference</em>
<a id="L1265" name="L1265"></a>1265                     <em class="comment">// along the major axis.</em>
<a id="L1266" name="L1266"></a>1266                     <a href="../S/3344.html#L1273" title="Defined at 1273 in src/javax/swing/text/AsyncBoxView.java.">updateChild</a>();
<a id="L1267" name="L1267"></a>1267                 <em class="brace">}</em>
<a id="L1268" name="L1268"></a>1268             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L1269" name="L1269"></a>1269                 doc.<a href="../S/3268.html#L1413" title="Defined at 1413 in src/javax/swing/text/AbstractDocument.java.">readUnlock</a>();
<a id="L1270" name="L1270"></a>1270             <em class="brace">}</em>
<a id="L1271" name="L1271"></a>1271         <em class="brace">}</em>
<a id="L1272" name="L1272"></a>1272 
<a id="L1273" name="L1273"></a>1273         <strong class="reserved">void</strong> <a href="../R/29827.html" title="Multiple referred from 2 places.">updateChild</a>() <em class="brace">{</em>
<a id="L1274" name="L1274"></a>1274             <strong class="reserved">boolean</strong> minorUpdated = <strong class="reserved">false</strong>;
<a id="L1275" name="L1275"></a>1275             <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1276" name="L1276"></a>1276                 <strong class="reserved">if</strong> (! minorValid) <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277                     <strong class="reserved">int</strong> minorAxis = <a href="../S/3344.html#L84" title="Defined at 84 in src/javax/swing/text/AsyncBoxView.java.">getMinorAxis</a>();
<a id="L1278" name="L1278"></a>1278                     <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a> = child.<a href="../D/20667.html" title="Multiple defined in 20 places.">getMinimumSpan</a>(minorAxis);
<a id="L1279" name="L1279"></a>1279                     pref = child.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(minorAxis);
<a id="L1280" name="L1280"></a>1280                     <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> = child.<a href="../D/20504.html" title="Multiple defined in 19 places.">getMaximumSpan</a>(minorAxis);
<a id="L1281" name="L1281"></a>1281                     minorValid = <strong class="reserved">true</strong>;
<a id="L1282" name="L1282"></a>1282                     minorUpdated = <strong class="reserved">true</strong>;
<a id="L1283" name="L1283"></a>1283                 <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284             <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285             <strong class="reserved">if</strong> (minorUpdated) <em class="brace">{</em>
<a id="L1286" name="L1286"></a>1286                 <a href="../S/3344.html#L258" title="Defined at 258 in src/javax/swing/text/AsyncBoxView.java.">minorRequirementChange</a>(<strong class="reserved">this</strong>);
<a id="L1287" name="L1287"></a>1287             <em class="brace">}</em>
<a id="L1288" name="L1288"></a>1288 
<a id="L1289" name="L1289"></a>1289             <strong class="reserved">boolean</strong> majorUpdated = <strong class="reserved">false</strong>;
<a id="L1290" name="L1290"></a>1290             <strong class="reserved">float</strong> delta = 0.0f;
<a id="L1291" name="L1291"></a>1291             <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1292" name="L1292"></a>1292                 <strong class="reserved">if</strong> (! majorValid) <em class="brace">{</em>
<a id="L1293" name="L1293"></a>1293                     <strong class="reserved">float</strong> old = span;
<a id="L1294" name="L1294"></a>1294                     span = child.<a href="../D/21585.html" title="Multiple defined in 27 places.">getPreferredSpan</a>(axis);
<a id="L1295" name="L1295"></a>1295                     delta = span - old;
<a id="L1296" name="L1296"></a>1296                     majorValid = <strong class="reserved">true</strong>;
<a id="L1297" name="L1297"></a>1297                     majorUpdated = <strong class="reserved">true</strong>;
<a id="L1298" name="L1298"></a>1298                 <em class="brace">}</em>
<a id="L1299" name="L1299"></a>1299             <em class="brace">}</em>
<a id="L1300" name="L1300"></a>1300             <strong class="reserved">if</strong> (majorUpdated) <em class="brace">{</em>
<a id="L1301" name="L1301"></a>1301                 <a href="../S/3344.html#L241" title="Defined at 241 in src/javax/swing/text/AsyncBoxView.java.">majorRequirementChange</a>(<strong class="reserved">this</strong>, delta);
<a id="L1302" name="L1302"></a>1302                 locator.<a href="../S/3344.html#L950" title="Defined at 950 in src/javax/swing/text/AsyncBoxView.java.">childChanged</a>(<strong class="reserved">this</strong>);
<a id="L1303" name="L1303"></a>1303             <em class="brace">}</em>
<a id="L1304" name="L1304"></a>1304 
<a id="L1305" name="L1305"></a>1305             <strong class="reserved">synchronized</strong>(<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L1306" name="L1306"></a>1306                 <strong class="reserved">if</strong> (! childSizeValid) <em class="brace">{</em>
<a id="L1307" name="L1307"></a>1307                     <strong class="reserved">float</strong> w;
<a id="L1308" name="L1308"></a>1308                     <strong class="reserved">float</strong> h;
<a id="L1309" name="L1309"></a>1309                     <strong class="reserved">if</strong> (axis == X_AXIS) <em class="brace">{</em>
<a id="L1310" name="L1310"></a>1310                         w = span;
<a id="L1311" name="L1311"></a>1311                         h = <a href="../S/3344.html#L1326" title="Defined at 1326 in src/javax/swing/text/AsyncBoxView.java.">getMinorSpan</a>();
<a id="L1312" name="L1312"></a>1312                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1313" name="L1313"></a>1313                         w = <a href="../S/3344.html#L1326" title="Defined at 1326 in src/javax/swing/text/AsyncBoxView.java.">getMinorSpan</a>();
<a id="L1314" name="L1314"></a>1314                         h = span;
<a id="L1315" name="L1315"></a>1315                     <em class="brace">}</em>
<a id="L1316" name="L1316"></a>1316                     childSizeValid = <strong class="reserved">true</strong>;
<a id="L1317" name="L1317"></a>1317                     child.<a href="../D/33924.html" title="Multiple defined in 54 places.">setSize</a>(w, h);
<a id="L1318" name="L1318"></a>1318                 <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319             <em class="brace">}</em>
<a id="L1320" name="L1320"></a>1320 
<a id="L1321" name="L1321"></a>1321         <em class="brace">}</em>
<a id="L1322" name="L1322"></a>1322 
<div class="comment">
          What is the span along the minor axis.</div>
<a id="L1326" name="L1326"></a>1326         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17749.html" title="Multiple referred from 4 places.">getMinorSpan</a>() <em class="brace">{</em>
<a id="L1327" name="L1327"></a>1327             <strong class="reserved">if</strong> (<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> &lt; minorSpan) <em class="brace">{</em>
<a id="L1328" name="L1328"></a>1328                 <strong class="reserved">return</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L1329" name="L1329"></a>1329             <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330             <em class="comment">// make it the target width, or as small as it can get.</em>
<a id="L1331" name="L1331"></a>1331             <strong class="reserved">return</strong> <a href="../S/1768.html#L105" title="Defined at 105 in src/java/lang/Math.java.">Math</a>.<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>(<a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>, minorSpan);
<a id="L1332" name="L1332"></a>1332         <em class="brace">}</em>
<a id="L1333" name="L1333"></a>1333 
<div class="comment">
          What is the offset along the minor axis</div>
<a id="L1337" name="L1337"></a>1337         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17748.html" title="Multiple referred from 2 places.">getMinorOffset</a>() <em class="brace">{</em>
<a id="L1338" name="L1338"></a>1338             <strong class="reserved">if</strong> (<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> &lt; minorSpan) <em class="brace">{</em>
<a id="L1339" name="L1339"></a>1339                 <em class="comment">// can't make the child this wide, align it</em>
<a id="L1340" name="L1340"></a>1340                 <strong class="reserved">float</strong> <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a> = child.<a href="../D/16863.html" title="Multiple defined in 22 places.">getAlignment</a>(<a href="../S/3344.html#L84" title="Defined at 84 in src/javax/swing/text/AsyncBoxView.java.">getMinorAxis</a>());
<a id="L1341" name="L1341"></a>1341                 <strong class="reserved">return</strong> ((minorSpan - <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) * <a href="../D/11271.html" title="Multiple defined in 4 places.">align</a>);
<a id="L1342" name="L1342"></a>1342             <em class="brace">}</em>
<a id="L1343" name="L1343"></a>1343             <strong class="reserved">return</strong> 0f;
<a id="L1344" name="L1344"></a>1344         <em class="brace">}</em>
<a id="L1345" name="L1345"></a>1345 
<div class="comment">
          What is the span along the major axis.</div>
<a id="L1349" name="L1349"></a>1349         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17532.html" title="Multiple referred from 8 places.">getMajorSpan</a>() <em class="brace">{</em>
<a id="L1350" name="L1350"></a>1350             <strong class="reserved">return</strong> span;
<a id="L1351" name="L1351"></a>1351         <em class="brace">}</em>
<a id="L1352" name="L1352"></a>1352 
<div class="comment">
          Get the offset along the major axis</div>
<a id="L1356" name="L1356"></a>1356         <strong class="reserved">public</strong> <strong class="reserved">float</strong> <a href="../R/17531.html" title="Multiple referred from 6 places.">getMajorOffset</a>() <em class="brace">{</em>
<a id="L1357" name="L1357"></a>1357             <strong class="reserved">return</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1358" name="L1358"></a>1358         <em class="brace">}</em>
<a id="L1359" name="L1359"></a>1359 
<div class="comment">
          This method should only be called by the ChildLocator,
          it is simply a convenient place to hold the cached
          location.</div>
<a id="L1365" name="L1365"></a>1365         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27712.html" title="Multiple referred from 3 places.">setMajorOffset</a>(<strong class="reserved">float</strong> offs) <em class="brace">{</em>
<a id="L1366" name="L1366"></a>1366             <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = offs;
<a id="L1367" name="L1367"></a>1367         <em class="brace">}</em>
<a id="L1368" name="L1368"></a>1368 
<div class="comment">
          Mark preferences changed for this child.
          @param width true if the width preference has changed
          @param height true if the height preference has changed
          @see javax.swing.JComponent#revalidate</div>
<a id="L1376" name="L1376"></a>1376         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/24913.html" title="Multiple referred from 34 places.">preferenceChanged</a>(<strong class="reserved">boolean</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">boolean</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L1377" name="L1377"></a>1377             <strong class="reserved">if</strong> (axis == X_AXIS) <em class="brace">{</em>
<a id="L1378" name="L1378"></a>1378                 <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>) <em class="brace">{</em>
<a id="L1379" name="L1379"></a>1379                     majorValid = <strong class="reserved">false</strong>;
<a id="L1380" name="L1380"></a>1380                 <em class="brace">}</em>
<a id="L1381" name="L1381"></a>1381                 <strong class="reserved">if</strong> (<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382                     minorValid = <strong class="reserved">false</strong>;
<a id="L1383" name="L1383"></a>1383                 <em class="brace">}</em>
<a id="L1384" name="L1384"></a>1384             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1385" name="L1385"></a>1385                 <strong class="reserved">if</strong> (<a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>) <em class="brace">{</em>
<a id="L1386" name="L1386"></a>1386                     minorValid = <strong class="reserved">false</strong>;
<a id="L1387" name="L1387"></a>1387                 <em class="brace">}</em>
<a id="L1388" name="L1388"></a>1388                 <strong class="reserved">if</strong> (<a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L1389" name="L1389"></a>1389                     majorValid = <strong class="reserved">false</strong>;
<a id="L1390" name="L1390"></a>1390                 <em class="brace">}</em>
<a id="L1391" name="L1391"></a>1391             <em class="brace">}</em>
<a id="L1392" name="L1392"></a>1392             childSizeValid = <strong class="reserved">false</strong>;
<a id="L1393" name="L1393"></a>1393         <em class="brace">}</em>
<a id="L1394" name="L1394"></a>1394 
<div class="comment">
          Has the child view been laid out.</div>
<a id="L1398" name="L1398"></a>1398         <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21642.html" title="Multiple referred from 4 places.">isLayoutValid</a>() <em class="brace">{</em>
<a id="L1399" name="L1399"></a>1399             <strong class="reserved">return</strong> (minorValid &amp;&amp; majorValid &amp;&amp; childSizeValid);
<a id="L1400" name="L1400"></a>1400         <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401 
<a id="L1402" name="L1402"></a>1402         <em class="comment">// minor axis</em>
<a id="L1403" name="L1403"></a>1403         <strong class="reserved">private</strong> <strong class="reserved">float</strong> <a href="../D/27697.html" title="Multiple defined in 28 places.">min</a>;
<a id="L1404" name="L1404"></a>1404         <strong class="reserved">private</strong> <strong class="reserved">float</strong> pref;
<a id="L1405" name="L1405"></a>1405         <strong class="reserved">private</strong> <strong class="reserved">float</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>;
<a id="L1406" name="L1406"></a>1406         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> minorValid;
<a id="L1407" name="L1407"></a>1407 
<a id="L1408" name="L1408"></a>1408         <em class="comment">// major axis</em>
<a id="L1409" name="L1409"></a>1409         <strong class="reserved">private</strong> <strong class="reserved">float</strong> span;
<a id="L1410" name="L1410"></a>1410         <strong class="reserved">private</strong> <strong class="reserved">float</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L1411" name="L1411"></a>1411         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> majorValid;
<a id="L1412" name="L1412"></a>1412 
<a id="L1413" name="L1413"></a>1413         <strong class="reserved">private</strong> <a href="../S/3338.html#L191" title="Defined at 191 in src/javax/swing/text/View.java.">View</a> child;
<a id="L1414" name="L1414"></a>1414         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> childSizeValid;
<a id="L1415" name="L1415"></a>1415     <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416 
<div class="comment">
      Task to flush requirement changes upward</div>
<a id="L1420" name="L1420"></a>1420     <strong class="reserved">class</strong> <a href="../S/3344.html#L65" title="Referred from 65 in src/javax/swing/text/AsyncBoxView.java.">FlushTask</a> <strong class="reserved">implements</strong> <a href="../S/1758.html#L56" title="Defined at 56 in src/java/lang/Runnable.java.">Runnable</a> <em class="brace">{</em>
<a id="L1421" name="L1421"></a>1421 
<a id="L1422" name="L1422"></a>1422         <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26539.html" title="Multiple referred from 715 places.">run</a>() <em class="brace">{</em>
<a id="L1423" name="L1423"></a>1423             <a href="../D/16487.html" title="Multiple defined in 2 places.">flushRequirementChanges</a>();
<a id="L1424" name="L1424"></a>1424         <em class="brace">}</em>
<a id="L1425" name="L1425"></a>1425 
<a id="L1426" name="L1426"></a>1426     <em class="brace">}</em>
<a id="L1427" name="L1427"></a>1427 
<a id="L1428" name="L1428"></a>1428 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L75">[^]</a><a href="#L1422">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
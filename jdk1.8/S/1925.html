<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/nio/file/FileSystems.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L93">[^]</a><a href="#L379">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L93" title="Defined at 93.">defaultFileSystem</a></li>
<li><a href="#L107" title="Defined at 107.">getDefaultProvider</a></li>
<li><a href="#L175" title="Defined at 175.">getDefault</a></li>
<li><a href="#L217" title="Defined at 217.">getFileSystem</a></li>
<li><a href="#L273" title="Defined at 273.">newFileSystem</a></li>
<li><a href="#L318" title="Defined at 318.">newFileSystem</a></li>
<li><a href="#L379" title="Defined at 379.">newFileSystem</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.nio.<a href="../D/16022.html" title="Multiple defined in 3 places.">file</a>;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.nio.file.spi.FileSystemProvider;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.net.URI;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.io.IOException;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.security.PrivilegedAction;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.*;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.lang.reflect.Constructor;
<a id="L35" name="L35"></a>  35 
<div class="comment">
  Factory methods for file systems. This class defines the {@link #getDefault
  getDefault} method to get the default file system and factory methods to
  construct other types of file systems.
  <p> The first invocation of any of the methods defined by this class causes
  the default {@link FileSystemProvider provider} to be loaded. The default
  provider, identified by the URI scheme "file", creates the {@link FileSystem}
  that provides access to the file systems accessible to the Java virtual
  machine. If the process of loading or initializing the default provider fails
  then an unspecified error is thrown.
  </p><p> The first invocation of the {@link FileSystemProvider#installedProviders
  installedProviders} method, by way of invoking any of the {@code
  newFileSystem} methods defined by this class, locates and loads all
  installed file system providers. Installed providers are loaded using the
  service-provider loading facility defined by the {@link ServiceLoader} class.
  Installed providers are loaded using the system class loader. If the
  system class loader cannot be found then the extension class loader is used;
  if there is no extension class loader then the bootstrap class loader is used.
  Providers are typically installed by placing them in a JAR file on the
  application class path or in the extension directory, the JAR file contains a
  provider-configuration file named <code>java.nio.file.spi.FileSystemProvider</code>
  in the resource directory <code>META-INF/services</code>, and the file lists one or
  more fully-qualified names of concrete subclass of {@link FileSystemProvider}
  that have a zero argument constructor.
  The ordering that installed providers are located is implementation specific.
  If a provider is instantiated and its {@link FileSystemProvider#getScheme()
  getScheme} returns the same URI scheme of a provider that was previously
  instantiated then the most recently instantiated duplicate is discarded. URI
  schemes are compared without regard to case. During construction a provider
  may safely access files associated with the default provider but care needs
  to be taken to avoid circular loading of other installed providers. If
  circular loading of installed providers is detected then an unspecified error
  is thrown.
  </p><p> This class also defines factory methods that allow a {@link ClassLoader}
  to be specified when locating a provider. As with installed providers, the
  provider classes are identified by placing the provider configuration file
  in the resource directory <code>META-INF/services</code>.
  </p><p> If a thread initiates the loading of the installed file system providers
  and another thread invokes a method that also attempts to load the providers
  then the method will block until the loading completes.
  @since 1.7</p></div>
<a id="L83" name="L83"></a>  83 
<a id="L84" name="L84"></a>  84 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/2953.html" title="Multiple referred from 7 places.">FileSystems</a> <em class="brace">{</em>
<a id="L85" name="L85"></a>  85     <strong class="reserved">private</strong> FileSystems() <em class="brace">{</em>
<a id="L86" name="L86"></a>  86     <em class="brace">}</em>
<a id="L87" name="L87"></a>  87 
<a id="L88" name="L88"></a>  88     <em class="comment">// lazy initialization of default file system</em>
<a id="L89" name="L89"></a>  89     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../S/1925.html#L176" title="Referred from 176 in src/java/nio/file/FileSystems.java.">DefaultFileSystemHolder</a> <em class="brace">{</em>
<a id="L90" name="L90"></a>  90         <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../S/1925.html#L93" title="Defined at 93 in src/java/nio/file/FileSystems.java.">defaultFileSystem</a> = <a href="../S/1925.html#L93" title="Defined at 93 in src/java/nio/file/FileSystems.java.">defaultFileSystem</a>();
<a id="L91" name="L91"></a>  91 
<a id="L92" name="L92"></a>  92         <em class="comment">// returns default file system</em>
<a id="L93" name="L93"></a>  93         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/13151.html" title="Multiple referred from 2 places.">defaultFileSystem</a>() <em class="brace">{</em>
<a id="L94" name="L94"></a>  94             <em class="comment">// load default provider</em>
<a id="L95" name="L95"></a>  95             <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a> = <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>
<a id="L96" name="L96"></a>  96                 .<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(<strong class="reserved">new</strong> <a href="../S/1321.html#L42" title="Defined at 42 in src/java/security/PrivilegedAction.java.">PrivilegedAction</a>&lt;<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>&gt;() <em class="brace">{</em>
<a id="L97" name="L97"></a>  97                     <strong class="reserved">public</strong> <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <em class="brace">{</em>
<a id="L98" name="L98"></a>  98                         <strong class="reserved">return</strong> <a href="../S/1925.html#L107" title="Defined at 107 in src/java/nio/file/FileSystems.java.">getDefaultProvider</a>();
<a id="L99" name="L99"></a>  99                     <em class="brace">}</em>
<a id="L100" name="L100"></a> 100                 <em class="brace">}</em>);
<a id="L101" name="L101"></a> 101 
<a id="L102" name="L102"></a> 102             <em class="comment">// return file system</em>
<a id="L103" name="L103"></a> 103             <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/19064.html" title="Multiple defined in 4 places.">getFileSystem</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>("file:///"));
<a id="L104" name="L104"></a> 104         <em class="brace">}</em>
<a id="L105" name="L105"></a> 105 
<a id="L106" name="L106"></a> 106         <em class="comment">// returns default provider</em>
<a id="L107" name="L107"></a> 107         <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../S/1925.html#L98" title="Referred from 98 in src/java/nio/file/FileSystems.java.">getDefaultProvider</a>() <em class="brace">{</em>
<a id="L108" name="L108"></a> 108             <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a> = sun.nio.fs.DefaultFileSystemProvider.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>();
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110             <em class="comment">// if the property java.nio.file.spi.DefaultFileSystemProvider is</em>
<a id="L111" name="L111"></a> 111             <em class="comment">// set then its value is the name of the default provider (or a list)</em>
<a id="L112" name="L112"></a> 112             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> propValue = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>
<a id="L113" name="L113"></a> 113                 .<a href="../D/21720.html" title="Multiple defined in 77 places.">getProperty</a>("java.nio.file.spi.DefaultFileSystemProvider");
<a id="L114" name="L114"></a> 114             <strong class="reserved">if</strong> (propValue != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L115" name="L115"></a> 115                 <strong class="reserved">for</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> cn: propValue.<a href="../D/34718.html" title="Multiple defined in 12 places.">split</a>(",")) <em class="brace">{</em>
<a id="L116" name="L116"></a> 116                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L117" name="L117"></a> 117                         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>
<a id="L118" name="L118"></a> 118                             .<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(cn, <strong class="reserved">true</strong>, <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a>.<a href="../D/22895.html" title="Multiple defined in 7 places.">getSystemClassLoader</a>());
<a id="L119" name="L119"></a> 119                         <a href="../D/1833.html" title="Multiple defined in 2 places.">Constructor</a>&lt;?&gt; ctor = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>
<a id="L120" name="L120"></a> 120                             .<a href="../S/1722.html#L2175" title="Defined at 2175 in src/java/lang/Class.java.">getDeclaredConstructor</a>(<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<strong class="reserved">class</strong>);
<a id="L121" name="L121"></a> 121                         <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a> = (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>)ctor.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>(<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>);
<a id="L122" name="L122"></a> 122 
<a id="L123" name="L123"></a> 123                         <em class="comment">// must be "file"</em>
<a id="L124" name="L124"></a> 124                         <strong class="reserved">if</strong> (!<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("file"))
<a id="L125" name="L125"></a> 125                             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>("Default provider must use scheme 'file'");
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>) <em class="brace">{</em>
<a id="L128" name="L128"></a> 128                         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1772.html#L49" title="Defined at 49 in src/java/lang/Error.java.">Error</a>(<a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>);
<a id="L129" name="L129"></a> 129                     <em class="brace">}</em>
<a id="L130" name="L130"></a> 130                 <em class="brace">}</em>
<a id="L131" name="L131"></a> 131             <em class="brace">}</em>
<a id="L132" name="L132"></a> 132             <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>;
<a id="L133" name="L133"></a> 133         <em class="brace">}</em>
<a id="L134" name="L134"></a> 134     <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<div class="comment">
      Returns the default <code>FileSystem</code>. The default file system creates
      objects that provide access to the file systems accessible to the Java
      virtual machine. The <em>working directory</em> of the file system is
      the current user directory, named by the system property <code>user.dir</code>.
      This allows for interoperability with the {@link java.io.File java.io.File}
      class.
      <p> The first invocation of any of the methods defined by this class
      locates the default {@link FileSystemProvider provider} object. Where the
      system property <code>java.nio.file.spi.DefaultFileSystemProvider</code> is
      not defined then the default provider is a system-default provider that
      is invoked to create the default file system.
      </p><p> If the system property <code>java.nio.file.spi.DefaultFileSystemProvider</code>
      is defined then it is taken to be a list of one or more fully-qualified
      names of concrete provider classes identified by the URI scheme
      <code>"file"</code>. Where the property is a list of more than one name then
      the names are separated by a comma. Each class is loaded, using the system
      class loader, and instantiated by invoking a one argument constructor
      whose formal parameter type is <code>FileSystemProvider</code>. The providers
      are loaded and instantiated in the order they are listed in the property.
      If this process fails or a provider's scheme is not equal to <code>"file"</code>
      then an unspecified error is thrown. URI schemes are normally compared
      without regard to case but for the default provider, the scheme is
      required to be <code>"file"</code>. The first provider class is instantiated
      by invoking it with a reference to the system-default provider.
      The second provider class is instantiated by invoking it with a reference
      to the first provider instance. The third provider class is instantiated
      by invoking it with a reference to the second instance, and so on. The
      last provider to be instantiated becomes the default provider; its {@code
      getFileSystem} method is invoked with the URI <code>"file:///"</code> to
      get a reference to the default file system.
      </p><p> Subsequent invocations of this method return the file system that was
      returned by the first invocation.
      @return  the default file system</p></div>
<a id="L175" name="L175"></a> 175     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/16003.html" title="Multiple referred from 142 places.">getDefault</a>() <em class="brace">{</em>
<a id="L176" name="L176"></a> 176         <strong class="reserved">return</strong> <a href="../S/1925.html#L89" title="Defined at 89 in src/java/nio/file/FileSystems.java.">DefaultFileSystemHolder</a>.<a href="../S/1925.html#L93" title="Defined at 93 in src/java/nio/file/FileSystems.java.">defaultFileSystem</a>;
<a id="L177" name="L177"></a> 177     <em class="brace">}</em>
<a id="L178" name="L178"></a> 178 
<div class="comment">
      Returns a reference to an existing <code>FileSystem</code>.
      <p> This method iterates over the {@link FileSystemProvider#installedProviders()
      installed} providers to locate the provider that is identified by the URI
      {@link URI#getScheme scheme} of the given URI. URI schemes are compared
      without regard to case. The exact form of the URI is highly provider
      dependent. If found, the provider's {@link FileSystemProvider#getFileSystem
      getFileSystem} method is invoked to obtain a reference to the {@code
      FileSystem}.
      </p><p> Once a file system created by this provider is {@link FileSystem#close
      closed} it is provider-dependent if this method returns a reference to
      the closed file system or throws {@link FileSystemNotFoundException}.
      If the provider allows a new file system to be created with the same URI
      as a file system it previously created then this method throws the
      exception if invoked after the file system is closed (and before a new
      instance is created by the {@link #newFileSystem newFileSystem} method).
      </p><p> If a security manager is installed then a provider implementation
      may require to check a permission before returning a reference to an
      existing file system. In the case of the {@link FileSystems#getDefault
      default} file system, no permission check is required.
      @param   uri  the URI to locate the file system
      @return  the reference to the file system
      @throws  IllegalArgumentException
               if the pre-conditions for the <code>uri</code> parameter are not met
      @throws  FileSystemNotFoundException
               if the file system, identified by the URI, does not exist
      @throws  ProviderNotFoundException
               if a provider supporting the URI scheme is not installed
      @throws  SecurityException
               if a security manager is installed and it denies an unspecified
               permission</p></div>
<a id="L217" name="L217"></a> 217     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/16585.html" title="Multiple referred from 9 places.">getFileSystem</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> uri) <em class="brace">{</em>
<a id="L218" name="L218"></a> 218         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> scheme = uri.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>();
<a id="L219" name="L219"></a> 219         <strong class="reserved">for</strong> (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>: <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<a href="../S/1920.html#L153" title="Defined at 153 in src/java/nio/file/spi/FileSystemProvider.java.">installedProviders</a>()) <em class="brace">{</em>
<a id="L220" name="L220"></a> 220             <strong class="reserved">if</strong> (scheme.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>(<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>())) <em class="brace">{</em>
<a id="L221" name="L221"></a> 221                 <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/19064.html" title="Multiple defined in 4 places.">getFileSystem</a>(uri);
<a id="L222" name="L222"></a> 222             <em class="brace">}</em>
<a id="L223" name="L223"></a> 223         <em class="brace">}</em>
<a id="L224" name="L224"></a> 224         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1935.html#L32" title="Defined at 32 in src/java/nio/file/ProviderNotFoundException.java.">ProviderNotFoundException</a>("Provider \"" + scheme + "\" not found");
<a id="L225" name="L225"></a> 225     <em class="brace">}</em>
<a id="L226" name="L226"></a> 226 
<div class="comment">
      Constructs a new file system that is identified by a {@link URI}
      <p> This method iterates over the {@link FileSystemProvider#installedProviders()
      installed} providers to locate the provider that is identified by the URI
      {@link URI#getScheme scheme} of the given URI. URI schemes are compared
      without regard to case. The exact form of the URI is highly provider
      dependent. If found, the provider's {@link FileSystemProvider#newFileSystem(URI,Map)
      newFileSystem(URI,Map)} method is invoked to construct the new file system.
      </p><p> Once a file system is {@link FileSystem#close closed} it is
      provider-dependent if the provider allows a new file system to be created
      with the same URI as a file system it previously created.
      </p><p> <b>Usage Example:</b>
      Suppose there is a provider identified by the scheme <code>"memory"</code>
      installed:
      </p><pre>        Map&lt;String,String&gt; env = new HashMap&lt;&gt;();
        env.put("capacity", "16G");
        env.put("blockSize", "4k");
        FileSystem fs = FileSystems.newFileSystem(URI.create("memory:///?name=logfs"), env);
      </pre>
      @param   uri
               the URI identifying the file system
      @param   env
               a map of provider specific properties to configure the file system;
               may be empty
      @return  a new file system
      @throws  IllegalArgumentException
               if the pre-conditions for the <code>uri</code> parameter are not met,
               or the <code>env</code> parameter does not contain properties required
               by the provider, or a property value is invalid
      @throws  FileSystemAlreadyExistsException
               if the file system has already been created
      @throws  ProviderNotFoundException
               if a provider supporting the URI scheme is not installed
      @throws  IOException
               if an I/O error occurs creating the file system
      @throws  SecurityException
               if a security manager is installed and it denies an unspecified
               permission required by the file system provider implementation</div>
<a id="L273" name="L273"></a> 273     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/23557.html" title="Multiple referred from 5 places.">newFileSystem</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> uri, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>)
<a id="L274" name="L274"></a> 274         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L275" name="L275"></a> 275     <em class="brace">{</em>
<a id="L276" name="L276"></a> 276         <strong class="reserved">return</strong> <a href="../D/28004.html" title="Multiple defined in 5 places.">newFileSystem</a>(uri, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <strong class="reserved">null</strong>);
<a id="L277" name="L277"></a> 277     <em class="brace">}</em>
<a id="L278" name="L278"></a> 278 
<div class="comment">
      Constructs a new file system that is identified by a {@link URI}
      <p> This method first attempts to locate an installed provider in exactly
      the same manner as the {@link #newFileSystem(URI,Map) newFileSystem(URI,Map)}
      method. If none of the installed providers support the URI scheme then an
      attempt is made to locate the provider using the given class loader. If a
      provider supporting the URI scheme is located then its {@link
      FileSystemProvider#newFileSystem(URI,Map) newFileSystem(URI,Map)} is
      invoked to construct the new file system.
      @param   uri
               the URI identifying the file system
      @param   env
               a map of provider specific properties to configure the file system;
               may be empty
      @param   loader
               the class loader to locate the provider or <code>null</code> to only
               attempt to locate an installed provider
      @return  a new file system
      @throws  IllegalArgumentException
               if the pre-conditions for the <code>uri</code> parameter are not met,
               or the <code>env</code> parameter does not contain properties required
               by the provider, or a property value is invalid
      @throws  FileSystemAlreadyExistsException
               if the URI scheme identifies an installed provider and the file
               system has already been created
      @throws  ProviderNotFoundException
               if a provider supporting the URI scheme is not found
      @throws  ServiceConfigurationError
               when an error occurs while loading a service provider
      @throws  IOException
               an I/O error occurs creating the file system
      @throws  SecurityException
               if a security manager is installed and it denies an unspecified
               permission required by the file system provider implementation</p></div>
<a id="L318" name="L318"></a> 318     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/23557.html" title="Multiple referred from 5 places.">newFileSystem</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a> uri, <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>, <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> loader)
<a id="L319" name="L319"></a> 319         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L320" name="L320"></a> 320     <em class="brace">{</em>
<a id="L321" name="L321"></a> 321         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> scheme = uri.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>();
<a id="L322" name="L322"></a> 322 
<a id="L323" name="L323"></a> 323         <em class="comment">// check installed providers</em>
<a id="L324" name="L324"></a> 324         <strong class="reserved">for</strong> (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>: <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<a href="../S/1920.html#L153" title="Defined at 153 in src/java/nio/file/spi/FileSystemProvider.java.">installedProviders</a>()) <em class="brace">{</em>
<a id="L325" name="L325"></a> 325             <strong class="reserved">if</strong> (scheme.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>(<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>())) <em class="brace">{</em>
<a id="L326" name="L326"></a> 326                 <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/28004.html" title="Multiple defined in 5 places.">newFileSystem</a>(uri, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L327" name="L327"></a> 327             <em class="brace">}</em>
<a id="L328" name="L328"></a> 328         <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330         <em class="comment">// if not found, use service-provider loading facility</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">if</strong> (loader != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             <a href="../S/1190.html#L185" title="Defined at 185 in src/java/util/ServiceLoader.java.">ServiceLoader</a>&lt;<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>&gt; sl = <a href="../S/1190.html#L185" title="Defined at 185 in src/java/util/ServiceLoader.java.">ServiceLoader</a>
<a id="L333" name="L333"></a> 333                 .<a href="../D/26888.html" title="Multiple defined in 27 places.">load</a>(<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<strong class="reserved">class</strong>, loader);
<a id="L334" name="L334"></a> 334             <strong class="reserved">for</strong> (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>: sl) <em class="brace">{</em>
<a id="L335" name="L335"></a> 335                 <strong class="reserved">if</strong> (scheme.<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>(<a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/22272.html" title="Multiple defined in 7 places.">getScheme</a>())) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336                     <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/28004.html" title="Multiple defined in 5 places.">newFileSystem</a>(uri, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L337" name="L337"></a> 337                 <em class="brace">}</em>
<a id="L338" name="L338"></a> 338             <em class="brace">}</em>
<a id="L339" name="L339"></a> 339         <em class="brace">}</em>
<a id="L340" name="L340"></a> 340 
<a id="L341" name="L341"></a> 341         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1935.html#L32" title="Defined at 32 in src/java/nio/file/ProviderNotFoundException.java.">ProviderNotFoundException</a>("Provider \"" + scheme + "\" not found");
<a id="L342" name="L342"></a> 342     <em class="brace">}</em>
<a id="L343" name="L343"></a> 343 
<div class="comment">
      Constructs a new <code>FileSystem</code> to access the contents of a file as a
      file system.
      <p> This method makes use of specialized providers that create pseudo file
      systems where the contents of one or more files is treated as a file
      system.
      </p><p> This method iterates over the {@link FileSystemProvider#installedProviders()
      installed} providers. It invokes, in turn, each provider's {@link
      FileSystemProvider#newFileSystem(Path,Map) newFileSystem(Path,Map)} method
      with an empty map. If a provider returns a file system then the iteration
      terminates and the file system is returned. If none of the installed
      providers return a <code>FileSystem</code> then an attempt is made to locate
      the provider using the given class loader. If a provider returns a file
      system then the lookup terminates and the file system is returned.
      @param   path
               the path to the file
      @param   loader
               the class loader to locate the provider or <code>null</code> to only
               attempt to locate an installed provider
      @return  a new file system
      @throws  ProviderNotFoundException
               if a provider supporting this file type cannot be located
      @throws  ServiceConfigurationError
               when an error occurs while loading a service provider
      @throws  IOException
               if an I/O error occurs
      @throws  SecurityException
               if a security manager is installed and it denies an unspecified
               permission</p></div>
<a id="L379" name="L379"></a> 379     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <a href="../D/3214.html" title="Multiple defined in 2 places.">FileSystem</a> <a href="../R/23557.html" title="Multiple referred from 5 places.">newFileSystem</a>(<a href="../S/1949.html#L98" title="Defined at 98 in src/java/nio/file/Path.java.">Path</a> path,
<a id="L380" name="L380"></a> 380                                            <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> loader)
<a id="L381" name="L381"></a> 381         <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L382" name="L382"></a> 382     <em class="brace">{</em>
<a id="L383" name="L383"></a> 383         <strong class="reserved">if</strong> (path == <strong class="reserved">null</strong>)
<a id="L384" name="L384"></a> 384             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1559.html#L53" title="Defined at 53 in src/java/lang/NullPointerException.java.">NullPointerException</a>();
<a id="L385" name="L385"></a> 385         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>,?&gt; <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a> = <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L4519" title="Defined at 4519 in src/java/util/Collections.java.">emptyMap</a>();
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387         <em class="comment">// check installed providers</em>
<a id="L388" name="L388"></a> 388         <strong class="reserved">for</strong> (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>: <a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<a href="../S/1920.html#L153" title="Defined at 153 in src/java/nio/file/spi/FileSystemProvider.java.">installedProviders</a>()) <em class="brace">{</em>
<a id="L389" name="L389"></a> 389             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L390" name="L390"></a> 390                 <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/28004.html" title="Multiple defined in 5 places.">newFileSystem</a>(path, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L391" name="L391"></a> 391             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a> uoe) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392             <em class="brace">}</em>
<a id="L393" name="L393"></a> 393         <em class="brace">}</em>
<a id="L394" name="L394"></a> 394 
<a id="L395" name="L395"></a> 395         <em class="comment">// if not found, use service-provider loading facility</em>
<a id="L396" name="L396"></a> 396         <strong class="reserved">if</strong> (loader != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397             <a href="../S/1190.html#L185" title="Defined at 185 in src/java/util/ServiceLoader.java.">ServiceLoader</a>&lt;<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>&gt; sl = <a href="../S/1190.html#L185" title="Defined at 185 in src/java/util/ServiceLoader.java.">ServiceLoader</a>
<a id="L398" name="L398"></a> 398                 .<a href="../D/26888.html" title="Multiple defined in 27 places.">load</a>(<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a>.<strong class="reserved">class</strong>, loader);
<a id="L399" name="L399"></a> 399             <strong class="reserved">for</strong> (<a href="../S/1920.html#L77" title="Defined at 77 in src/java/nio/file/spi/FileSystemProvider.java.">FileSystemProvider</a> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>: sl) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L401" name="L401"></a> 401                     <strong class="reserved">return</strong> <a href="../D/29909.html" title="Multiple defined in 12 places.">provider</a>.<a href="../D/28004.html" title="Multiple defined in 5 places.">newFileSystem</a>(path, <a href="../D/15665.html" title="Multiple defined in 2 places.">env</a>);
<a id="L402" name="L402"></a> 402                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a> uoe) <em class="brace">{</em>
<a id="L403" name="L403"></a> 403                 <em class="brace">}</em>
<a id="L404" name="L404"></a> 404             <em class="brace">}</em>
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1935.html#L32" title="Defined at 32 in src/java/nio/file/ProviderNotFoundException.java.">ProviderNotFoundException</a>("Provider not found");
<a id="L408" name="L408"></a> 408     <em class="brace">}</em>
<a id="L409" name="L409"></a> 409 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L93">[^]</a><a href="#L379">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
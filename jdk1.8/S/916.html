<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/SimpleTimeZone.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L361">[^]</a><a href="#L1669">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L361" title="Defined at 361.">setStartYear</a></li>
<li><a href="#L385" title="Defined at 385.">setStartRule</a></li>
<li><a href="#L412" title="Defined at 412.">setStartRule</a></li>
<li><a href="#L435" title="Defined at 435.">setStartRule</a></li>
<li><a href="#L465" title="Defined at 465.">setEndRule</a></li>
<li><a href="#L493" title="Defined at 493.">setEndRule</a></li>
<li><a href="#L518" title="Defined at 518.">setEndRule</a></li>
<li><a href="#L538" title="Defined at 538.">getOffset</a></li>
<li><a href="#L545" title="Defined at 545.">getOffsets</a></li>
<li><a href="#L604" title="Defined at 604.">getOffset</a></li>
<li><a href="#L672" title="Defined at 672.">getOffset</a></li>
<li><a href="#L724" title="Defined at 724.">getStart</a></li>
<li><a href="#L733" title="Defined at 733.">getEnd</a></li>
<li><a href="#L745" title="Defined at 745.">getTransition</a></li>
<li><a href="#L781" title="Defined at 781.">getRawOffset</a></li>
<li><a href="#L793" title="Defined at 793.">setRawOffset</a></li>
<li><a href="#L807" title="Defined at 807.">setDSTSavings</a></li>
<li><a href="#L827" title="Defined at 827.">getDSTSavings</a></li>
<li><a href="#L836" title="Defined at 836.">useDaylightTime</a></li>
<li><a href="#L851" title="Defined at 851.">observesDaylightTime</a></li>
<li><a href="#L860" title="Defined at 860.">inDaylightTime</a></li>
<li><a href="#L869" title="Defined at 869.">clone</a></li>
<li><a href="#L878" title="Defined at 878.">hashCode</a></li>
<li><a href="#L891" title="Defined at 891.">equals</a></li>
<li><a href="#L913" title="Defined at 913.">hasSameRules</a></li>
<li><a href="#L945" title="Defined at 945.">toString</a></li>
<li><a href="#L1281" title="Defined at 1281.">invalidateCache</a></li>
<li><a href="#L1349" title="Defined at 1349.">decodeRules</a></li>
<li><a href="#L1379" title="Defined at 1379.">decodeStartRule</a></li>
<li><a href="#L1426" title="Defined at 1426.">decodeEndRule</a></li>
<li><a href="#L1477" title="Defined at 1477.">makeRulesCompatible</a></li>
<li><a href="#L1570" title="Defined at 1570.">packRules</a></li>
<li><a href="#L1589" title="Defined at 1589.">unpackRules</a></li>
<li><a href="#L1607" title="Defined at 1607.">packTimes</a></li>
<li><a href="#L1618" title="Defined at 1618.">unpackTimes</a></li>
<li><a href="#L1639" title="Defined at 1639.">writeObject</a></li>
<li><a href="#L1669" title="Defined at 1669.">readObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1996, 2011, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<div class="comment">
  (C) Copyright Taligent, Inc. 1996 - All Rights Reserved
  (C) Copyright IBM Corp. 1996 - All Rights Reserved
    The original version of this source code and documentation is copyrighted
  and owned by Taligent, Inc., a wholly-owned subsidiary of IBM. These
  materials are provided under terms of a License Agreement between Taligent
  and Sun. This technology is protected by multiple US and International
  patents. This notice and attribution to Taligent may not be removed.
    Taligent is a registered trademark of Taligent, Inc.</div>
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> java.io.ObjectOutputStream;
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> java.io.IOException;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> sun.util.calendar.CalendarSystem;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> sun.util.calendar.CalendarUtils;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> sun.util.calendar.BaseCalendar;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> sun.util.calendar.Gregorian;
<a id="L48" name="L48"></a>  48 
<div class="comment">
  <code>SimpleTimeZone</code> is a concrete subclass of <code>TimeZone</code>
  that represents a time zone for use with a Gregorian calendar.
  The class holds an offset from GMT, called <em>raw offset</em>, and start
  and end rules for a daylight saving time schedule.  Since it only holds
  single values for each, it cannot handle historical changes in the offset
  from GMT and the daylight saving schedule, except that the {@link
  #setStartYear setStartYear} method can specify the year when the daylight
  saving time schedule starts in effect.
  <p>
  To construct a <code>SimpleTimeZone</code> with a daylight saving time
  schedule, the schedule can be described with a set of rules,
  <em>start-rule</em> and <em>end-rule</em>. A day when daylight saving time
  starts or ends is specified by a combination of <em>month</em>,
  <em>day-of-month</em>, and <em>day-of-week</em> values. The <em>month</em>
  value is represented by a Calendar {@link Calendar#MONTH MONTH} field
  value, such as {@link Calendar#MARCH}. The <em>day-of-week</em> value is
  represented by a Calendar {@link Calendar#DAY_OF_WEEK DAY_OF_WEEK} value,
  such as {@link Calendar#SUNDAY SUNDAY}. The meanings of value combinations
  are as follows.
  </p><ul><li><b>Exact day of month</b><br>
  To specify an exact day of month, set the <em>month</em> and
  <em>day-of-month</em> to an exact value, and <em>day-of-week</em> to zero. For
  example, to specify March 1, set the <em>month</em> to {@link Calendar#MARCH
  MARCH}, <em>day-of-month</em> to 1, and <em>day-of-week</em> to 0.</li><li><b>Day of week on or after day of month</b><br>
  To specify a day of week on or after an exact day of month, set the
  <em>month</em> to an exact month value, <em>day-of-month</em> to the day on
  or after which the rule is applied, and <em>day-of-week</em> to a negative {@link
  Calendar#DAY_OF_WEEK DAY_OF_WEEK} field value. For example, to specify the
  second Sunday of April, set <em>month</em> to {@link Calendar#APRIL APRIL},
  <em>day-of-month</em> to 8, and <em>day-of-week</em> to <code>-</code>{@link
  Calendar#SUNDAY SUNDAY}.</li><li><b>Day of week on or before day of month</b><br>
  To specify a day of the week on or before an exact day of the month, set
  <em>day-of-month</em> and <em>day-of-week</em> to a negative value. For
  example, to specify the last Wednesday on or before the 21st of March, set
  <em>month</em> to {@link Calendar#MARCH MARCH}, <em>day-of-month</em> is -21
  and <em>day-of-week</em> is <code>-</code>{@link Calendar#WEDNESDAY WEDNESDAY}. </li><li><b>Last day-of-week of month</b><br>
  To specify, the last day-of-week of the month, set <em>day-of-week</em> to a
  {@link Calendar#DAY_OF_WEEK DAY_OF_WEEK} value and <em>day-of-month</em> to
  -1. For example, to specify the last Sunday of October, set <em>month</em>
  to {@link Calendar#OCTOBER OCTOBER}, <em>day-of-week</em> to {@link
  Calendar#SUNDAY SUNDAY} and <em>day-of-month</em> to -1.  </li>
  </ul>
  The time of the day at which daylight saving time starts or ends is
  specified by a millisecond value within the day. There are three kinds of
  <em>mode</em>s to specify the time: {@link #WALL_TIME}, {@link
  #STANDARD_TIME} and {@link #UTC_TIME}. For example, if daylight
  saving time ends
  at 2:00 am in the wall clock time, it can be specified by 7200000
  milliseconds in the {@link #WALL_TIME} mode. In this case, the wall clock time
  for an <em>end-rule</em> means the same thing as the daylight time.
  <p>
  The following are examples of parameters for constructing time zone objects.
  </p><pre><code>
       // Base GMT offset: -8:00
       // DST starts:      at 2:00am in standard time
       //                  on the first Sunday in April
       // DST ends:        at 2:00am in daylight time
       //                  on the last Sunday in October
       // Save:            1 hour
       SimpleTimeZone(-28800000,
                      "America/Los_Angeles",
                      Calendar.APRIL, 1, -Calendar.SUNDAY,
                      7200000,
                      Calendar.OCTOBER, -1, Calendar.SUNDAY,
                      7200000,
                      3600000)
       // Base GMT offset: +1:00
       // DST starts:      at 1:00am in UTC time
       //                  on the last Sunday in March
       // DST ends:        at 1:00am in UTC time
       //                  on the last Sunday in October
       // Save:            1 hour
       SimpleTimeZone(3600000,
                      "Europe/Paris",
                      Calendar.MARCH, -1, Calendar.SUNDAY,
                      3600000, SimpleTimeZone.UTC_TIME,
                      Calendar.OCTOBER, -1, Calendar.SUNDAY,
                      3600000, SimpleTimeZone.UTC_TIME,
                      3600000)
  </code></pre>
  These parameter rules are also applicable to the set rule methods, such as
  <code>setStartRule</code>.
  @since 1.1
  @see      Calendar
  @see      GregorianCalendar
  @see      TimeZone
  @author   David Goldsmith, Mark Davis, Chen-Lieh Huang, Alan Liu</div>
<a id="L149" name="L149"></a> 149 
<a id="L150" name="L150"></a> 150 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/7265.html" title="Multiple referred from 9 places.">SimpleTimeZone</a> <strong class="reserved">extends</strong> <a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> <em class="brace">{</em>
<div class="comment">
      Constructs a SimpleTimeZone with the given base time zone offset from GMT
      and time zone ID with no daylight saving time schedule.
      @param rawOffset  The base time zone offset in milliseconds to GMT.
      @param ID         The time zone name that is given to this instance.</div>
<a id="L158" name="L158"></a> 158     <strong class="reserved">public</strong> SimpleTimeZone(<strong class="reserved">int</strong> rawOffset, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ID)
<a id="L159" name="L159"></a> 159     <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">this</strong>.rawOffset = rawOffset;
<a id="L161" name="L161"></a> 161         <a href="../D/32871.html" title="Multiple defined in 2 places.">setID</a> (ID);
<a id="L162" name="L162"></a> 162         dstSavings = millisPerHour; <em class="comment">// In case user sets rules later</em>
<a id="L163" name="L163"></a> 163     <em class="brace">}</em>
<a id="L164" name="L164"></a> 164 
<div class="comment">
      Constructs a SimpleTimeZone with the given base time zone offset from
      GMT, time zone ID, and rules for starting and ending the daylight
      time.
      Both <code>startTime</code> and <code>endTime</code> are specified to be
      represented in the wall clock time. The amount of daylight saving is
      assumed to be 3600000 milliseconds (i.e., one hour). This constructor is
      equivalent to:
      <pre><code>
          SimpleTimeZone(rawOffset,
                         ID,
                         startMonth,
                         startDay,
                         startDayOfWeek,
                         startTime,
                         SimpleTimeZone.{@link #WALL_TIME},
                         endMonth,
                         endDay,
                         endDayOfWeek,
                         endTime,
                         SimpleTimeZone.{@link #WALL_TIME},
                         3600000)
      </code></pre>
      @param rawOffset       The given base time zone offset from GMT.
      @param ID              The time zone ID which is given to this object.
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field value (0-based. e.g., 0
                             for January).
      @param startDay        The day of the month on which the daylight saving time starts.
                             See the class description for the special cases of this parameter.
      @param startDayOfWeek  The daylight saving time starting day-of-week.
                             See the class description for the special cases of this parameter.
      @param startTime       The daylight saving time starting time in local wall clock
                             time (in milliseconds within the day), which is local
                             standard time in this case.
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
                             See the class description for the special cases of this parameter.
      @param endDayOfWeek    The daylight saving time ending day-of-week.
                             See the class description for the special cases of this parameter.
      @param endTime         The daylight saving ending time in local wall clock time,
                             (in milliseconds within the day) which is local daylight
                             time in this case.
      @exception IllegalArgumentException if the month, day, dayOfWeek, or time
      parameters are out of range for the start or end rule</div>
<a id="L214" name="L214"></a> 214     <strong class="reserved">public</strong> SimpleTimeZone(<strong class="reserved">int</strong> rawOffset, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ID,
<a id="L215" name="L215"></a> 215                           <strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startDayOfWeek, <strong class="reserved">int</strong> startTime,
<a id="L216" name="L216"></a> 216                           <strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endDayOfWeek, <strong class="reserved">int</strong> endTime)
<a id="L217" name="L217"></a> 217     <em class="brace">{</em>
<a id="L218" name="L218"></a> 218         <strong class="reserved">this</strong>(rawOffset, ID,
<a id="L219" name="L219"></a> 219              startMonth, startDay, startDayOfWeek, startTime, WALL_TIME,
<a id="L220" name="L220"></a> 220              endMonth, endDay, endDayOfWeek, endTime, WALL_TIME,
<a id="L221" name="L221"></a> 221              millisPerHour);
<a id="L222" name="L222"></a> 222     <em class="brace">}</em>
<a id="L223" name="L223"></a> 223 
<div class="comment">
      Constructs a SimpleTimeZone with the given base time zone offset from
      GMT, time zone ID, and rules for starting and ending the daylight
      time.
      Both <code>startTime</code> and <code>endTime</code> are assumed to be
      represented in the wall clock time. This constructor is equivalent to:
      <pre><code>
          SimpleTimeZone(rawOffset,
                         ID,
                         startMonth,
                         startDay,
                         startDayOfWeek,
                         startTime,
                         SimpleTimeZone.{@link #WALL_TIME},
                         endMonth,
                         endDay,
                         endDayOfWeek,
                         endTime,
                         SimpleTimeZone.{@link #WALL_TIME},
                         dstSavings)
      </code></pre>
      @param rawOffset       The given base time zone offset from GMT.
      @param ID              The time zone ID which is given to this object.
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 0 for January).
      @param startDay        The day of the month on which the daylight saving time starts.
                             See the class description for the special cases of this parameter.
      @param startDayOfWeek  The daylight saving time starting day-of-week.
                             See the class description for the special cases of this parameter.
      @param startTime       The daylight saving time starting time in local wall clock
                             time, which is local standard time in this case.
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
                             See the class description for the special cases of this parameter.
      @param endDayOfWeek    The daylight saving time ending day-of-week.
                             See the class description for the special cases of this parameter.
      @param endTime         The daylight saving ending time in local wall clock time,
                             which is local daylight time in this case.
      @param dstSavings      The amount of time in milliseconds saved during
                             daylight saving time.
      @exception IllegalArgumentException if the month, day, dayOfWeek, or time
      parameters are out of range for the start or end rule
      @since 1.2</div>
<a id="L272" name="L272"></a> 272     <strong class="reserved">public</strong> SimpleTimeZone(<strong class="reserved">int</strong> rawOffset, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ID,
<a id="L273" name="L273"></a> 273                           <strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startDayOfWeek, <strong class="reserved">int</strong> startTime,
<a id="L274" name="L274"></a> 274                           <strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endDayOfWeek, <strong class="reserved">int</strong> endTime,
<a id="L275" name="L275"></a> 275                           <strong class="reserved">int</strong> dstSavings)
<a id="L276" name="L276"></a> 276     <em class="brace">{</em>
<a id="L277" name="L277"></a> 277         <strong class="reserved">this</strong>(rawOffset, ID,
<a id="L278" name="L278"></a> 278              startMonth, startDay, startDayOfWeek, startTime, WALL_TIME,
<a id="L279" name="L279"></a> 279              endMonth, endDay, endDayOfWeek, endTime, WALL_TIME,
<a id="L280" name="L280"></a> 280              dstSavings);
<a id="L281" name="L281"></a> 281     <em class="brace">}</em>
<a id="L282" name="L282"></a> 282 
<div class="comment">
      Constructs a SimpleTimeZone with the given base time zone offset from
      GMT, time zone ID, and rules for starting and ending the daylight
      time.
      This constructor takes the full set of the start and end rules
      parameters, including modes of <code>startTime</code> and
      <code>endTime</code>. The mode specifies either {@link #WALL_TIME wall
      time} or {@link #STANDARD_TIME standard time} or {@link #UTC_TIME UTC
      time}.
      @param rawOffset       The given base time zone offset from GMT.
      @param ID              The time zone ID which is given to this object.
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 0 for January).
      @param startDay        The day of the month on which the daylight saving time starts.
                             See the class description for the special cases of this parameter.
      @param startDayOfWeek  The daylight saving time starting day-of-week.
                             See the class description for the special cases of this parameter.
      @param startTime       The daylight saving time starting time in the time mode
                             specified by <code>startTimeMode</code>.
      @param startTimeMode   The mode of the start time specified by startTime.
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
                             See the class description for the special cases of this parameter.
      @param endDayOfWeek    The daylight saving time ending day-of-week.
                             See the class description for the special cases of this parameter.
      @param endTime         The daylight saving ending time in time time mode
                             specified by <code>endTimeMode</code>.
      @param endTimeMode     The mode of the end time specified by endTime
      @param dstSavings      The amount of time in milliseconds saved during
                             daylight saving time.
      @exception IllegalArgumentException if the month, day, dayOfWeek, time more, or
      time parameters are out of range for the start or end rule, or if a time mode
      value is invalid.
      @see #WALL_TIME
      @see #STANDARD_TIME
      @see #UTC_TIME
      @since 1.4</div>
<a id="L328" name="L328"></a> 328     <strong class="reserved">public</strong> SimpleTimeZone(<strong class="reserved">int</strong> rawOffset, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ID,
<a id="L329" name="L329"></a> 329                           <strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startDayOfWeek,
<a id="L330" name="L330"></a> 330                           <strong class="reserved">int</strong> startTime, <strong class="reserved">int</strong> startTimeMode,
<a id="L331" name="L331"></a> 331                           <strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endDayOfWeek,
<a id="L332" name="L332"></a> 332                           <strong class="reserved">int</strong> endTime, <strong class="reserved">int</strong> endTimeMode,
<a id="L333" name="L333"></a> 333                           <strong class="reserved">int</strong> dstSavings) <em class="brace">{</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335         <a href="../D/32871.html" title="Multiple defined in 2 places.">setID</a>(ID);
<a id="L336" name="L336"></a> 336         <strong class="reserved">this</strong>.rawOffset      = rawOffset;
<a id="L337" name="L337"></a> 337         <strong class="reserved">this</strong>.startMonth     = startMonth;
<a id="L338" name="L338"></a> 338         <strong class="reserved">this</strong>.startDay       = startDay;
<a id="L339" name="L339"></a> 339         <strong class="reserved">this</strong>.startDayOfWeek = startDayOfWeek;
<a id="L340" name="L340"></a> 340         <strong class="reserved">this</strong>.startTime      = startTime;
<a id="L341" name="L341"></a> 341         <strong class="reserved">this</strong>.startTimeMode  = startTimeMode;
<a id="L342" name="L342"></a> 342         <strong class="reserved">this</strong>.endMonth       = endMonth;
<a id="L343" name="L343"></a> 343         <strong class="reserved">this</strong>.endDay         = endDay;
<a id="L344" name="L344"></a> 344         <strong class="reserved">this</strong>.endDayOfWeek   = endDayOfWeek;
<a id="L345" name="L345"></a> 345         <strong class="reserved">this</strong>.endTime        = endTime;
<a id="L346" name="L346"></a> 346         <strong class="reserved">this</strong>.endTimeMode    = endTimeMode;
<a id="L347" name="L347"></a> 347         <strong class="reserved">this</strong>.dstSavings     = dstSavings;
<a id="L348" name="L348"></a> 348 
<a id="L349" name="L349"></a> 349         <em class="comment">// this.useDaylight is set by decodeRules</em>
<a id="L350" name="L350"></a> 350         <a href="../S/916.html#L1349" title="Defined at 1349 in src/java/util/SimpleTimeZone.java.">decodeRules</a>();
<a id="L351" name="L351"></a> 351         <strong class="reserved">if</strong> (dstSavings &lt;= 0) <em class="brace">{</em>
<a id="L352" name="L352"></a> 352             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal daylight saving value: " + dstSavings);
<a id="L353" name="L353"></a> 353         <em class="brace">}</em>
<a id="L354" name="L354"></a> 354     <em class="brace">}</em>
<a id="L355" name="L355"></a> 355 
<div class="comment">
      Sets the daylight saving time starting year.
      @param year  The daylight saving starting year.</div>
<a id="L361" name="L361"></a> 361     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setStartYear(<strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>)
<a id="L362" name="L362"></a> 362     <em class="brace">{</em>
<a id="L363" name="L363"></a> 363         startYear = <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>;
<a id="L364" name="L364"></a> 364         <a href="../S/916.html#L1281" title="Defined at 1281 in src/java/util/SimpleTimeZone.java.">invalidateCache</a>();
<a id="L365" name="L365"></a> 365     <em class="brace">}</em>
<a id="L366" name="L366"></a> 366 
<div class="comment">
      Sets the daylight saving time start rule. For example, if daylight saving
      time starts on the first Sunday in April at 2 am in local wall clock
      time, you can set the start rule by calling:
      <pre><code>setStartRule(Calendar.APRIL, 1, Calendar.SUNDAY, 2*60*60*1000);</code></pre>
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 0 for January).
      @param startDay        The day of the month on which the daylight saving time starts.
                             See the class description for the special cases of this parameter.
      @param startDayOfWeek  The daylight saving time starting day-of-week.
                             See the class description for the special cases of this parameter.
      @param startTime       The daylight saving time starting time in local wall clock
                             time, which is local standard time in this case.
      @exception IllegalArgumentException if the <code>startMonth</code>, <code>startDay</code>,
      <code>startDayOfWeek</code>, or <code>startTime</code> parameters are out of range</div>
<a id="L385" name="L385"></a> 385     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28223.html" title="Multiple referred from 3 places.">setStartRule</a>(<strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startDayOfWeek, <strong class="reserved">int</strong> startTime)
<a id="L386" name="L386"></a> 386     <em class="brace">{</em>
<a id="L387" name="L387"></a> 387         <strong class="reserved">this</strong>.startMonth = startMonth;
<a id="L388" name="L388"></a> 388         <strong class="reserved">this</strong>.startDay = startDay;
<a id="L389" name="L389"></a> 389         <strong class="reserved">this</strong>.startDayOfWeek = startDayOfWeek;
<a id="L390" name="L390"></a> 390         <strong class="reserved">this</strong>.startTime = startTime;
<a id="L391" name="L391"></a> 391         startTimeMode = WALL_TIME;
<a id="L392" name="L392"></a> 392         <a href="../S/916.html#L1379" title="Defined at 1379 in src/java/util/SimpleTimeZone.java.">decodeStartRule</a>();
<a id="L393" name="L393"></a> 393         <a href="../S/916.html#L1281" title="Defined at 1281 in src/java/util/SimpleTimeZone.java.">invalidateCache</a>();
<a id="L394" name="L394"></a> 394     <em class="brace">}</em>
<a id="L395" name="L395"></a> 395 
<div class="comment">
      Sets the daylight saving time start rule to a fixed date within a month.
      This method is equivalent to:
      <pre><code>setStartRule(startMonth, startDay, 0, startTime)</code></pre>
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 0 for January).
      @param startDay        The day of the month on which the daylight saving time starts.
      @param startTime       The daylight saving time starting time in local wall clock
                             time, which is local standard time in this case.
                             See the class description for the special cases of this parameter.
      @exception IllegalArgumentException if the <code>startMonth</code>,
      <code>startDayOfMonth</code>, or <code>startTime</code> parameters are out of range
      @since 1.2</div>
<a id="L412" name="L412"></a> 412     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28223.html" title="Multiple referred from 3 places.">setStartRule</a>(<strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startTime) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413         <a href="../D/34003.html" title="Multiple defined in 3 places.">setStartRule</a>(startMonth, startDay, 0, startTime);
<a id="L414" name="L414"></a> 414     <em class="brace">}</em>
<a id="L415" name="L415"></a> 415 
<div class="comment">
      Sets the daylight saving time start rule to a weekday before or after the given date within
      a month, e.g., the first Monday on or after the 8th.
      @param startMonth      The daylight saving time starting month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 0 for January).
      @param startDay        The day of the month on which the daylight saving time starts.
      @param startDayOfWeek  The daylight saving time starting day-of-week.
      @param startTime       The daylight saving time starting time in local wall clock
                             time, which is local standard time in this case.
      @param after           If true, this rule selects the first <code>dayOfWeek</code> on or
                             <em>after</em> <code>dayOfMonth</code>.  If false, this rule
                             selects the last <code>dayOfWeek</code> on or <em>before</em>
                             <code>dayOfMonth</code>.
      @exception IllegalArgumentException if the <code>startMonth</code>, <code>startDay</code>,
      <code>startDayOfWeek</code>, or <code>startTime</code> parameters are out of range
      @since 1.2</div>
<a id="L435" name="L435"></a> 435     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28223.html" title="Multiple referred from 3 places.">setStartRule</a>(<strong class="reserved">int</strong> startMonth, <strong class="reserved">int</strong> startDay, <strong class="reserved">int</strong> startDayOfWeek,
<a id="L436" name="L436"></a> 436                              <strong class="reserved">int</strong> startTime, <strong class="reserved">boolean</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>)
<a id="L437" name="L437"></a> 437     <em class="brace">{</em>
<a id="L438" name="L438"></a> 438         <em class="comment">// TODO: this method doesn't check the initial values of dayOfMonth or dayOfWeek.</em>
<a id="L439" name="L439"></a> 439         <strong class="reserved">if</strong> (<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440             <a href="../D/34003.html" title="Multiple defined in 3 places.">setStartRule</a>(startMonth, startDay, -startDayOfWeek, startTime);
<a id="L441" name="L441"></a> 441         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L442" name="L442"></a> 442             <a href="../D/34003.html" title="Multiple defined in 3 places.">setStartRule</a>(startMonth, -startDay, -startDayOfWeek, startTime);
<a id="L443" name="L443"></a> 443         <em class="brace">}</em>
<a id="L444" name="L444"></a> 444     <em class="brace">}</em>
<a id="L445" name="L445"></a> 445 
<div class="comment">
      Sets the daylight saving time end rule. For example, if daylight saving time
      ends on the last Sunday in October at 2 am in wall clock time,
      you can set the end rule by calling:
      <code>setEndRule(Calendar.OCTOBER, -1, Calendar.SUNDAY, 2*60*60*1000);</code>
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
                             See the class description for the special cases of this parameter.
      @param endDayOfWeek    The daylight saving time ending day-of-week.
                             See the class description for the special cases of this parameter.
      @param endTime         The daylight saving ending time in local wall clock time,
                             (in milliseconds within the day) which is local daylight
                             time in this case.
      @exception IllegalArgumentException if the <code>endMonth</code>, <code>endDay</code>,
      <code>endDayOfWeek</code>, or <code>endTime</code> parameters are out of range</div>
<a id="L465" name="L465"></a> 465     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27330.html" title="Multiple referred from 3 places.">setEndRule</a>(<strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endDayOfWeek,
<a id="L466" name="L466"></a> 466                            <strong class="reserved">int</strong> endTime)
<a id="L467" name="L467"></a> 467     <em class="brace">{</em>
<a id="L468" name="L468"></a> 468         <strong class="reserved">this</strong>.endMonth = endMonth;
<a id="L469" name="L469"></a> 469         <strong class="reserved">this</strong>.endDay = endDay;
<a id="L470" name="L470"></a> 470         <strong class="reserved">this</strong>.endDayOfWeek = endDayOfWeek;
<a id="L471" name="L471"></a> 471         <strong class="reserved">this</strong>.endTime = endTime;
<a id="L472" name="L472"></a> 472         <strong class="reserved">this</strong>.endTimeMode = WALL_TIME;
<a id="L473" name="L473"></a> 473         <a href="../S/916.html#L1426" title="Defined at 1426 in src/java/util/SimpleTimeZone.java.">decodeEndRule</a>();
<a id="L474" name="L474"></a> 474         <a href="../S/916.html#L1281" title="Defined at 1281 in src/java/util/SimpleTimeZone.java.">invalidateCache</a>();
<a id="L475" name="L475"></a> 475     <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
      Sets the daylight saving time end rule to a fixed date within a month.
      This method is equivalent to:
      <pre><code>setEndRule(endMonth, endDay, 0, endTime)</code></pre>
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
      @param endTime         The daylight saving ending time in local wall clock time,
                             (in milliseconds within the day) which is local daylight
                             time in this case.
      @exception IllegalArgumentException the <code>endMonth</code>, <code>endDay</code>,
      or <code>endTime</code> parameters are out of range
      @since 1.2</div>
<a id="L493" name="L493"></a> 493     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27330.html" title="Multiple referred from 3 places.">setEndRule</a>(<strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endTime)
<a id="L494" name="L494"></a> 494     <em class="brace">{</em>
<a id="L495" name="L495"></a> 495         <a href="../D/32592.html" title="Multiple defined in 3 places.">setEndRule</a>(endMonth, endDay, 0, endTime);
<a id="L496" name="L496"></a> 496     <em class="brace">}</em>
<a id="L497" name="L497"></a> 497 
<div class="comment">
      Sets the daylight saving time end rule to a weekday before or after the given date within
      a month, e.g., the first Monday on or after the 8th.
      @param endMonth        The daylight saving time ending month. Month is
                             a {@link Calendar#MONTH MONTH} field
                             value (0-based. e.g., 9 for October).
      @param endDay          The day of the month on which the daylight saving time ends.
      @param endDayOfWeek    The daylight saving time ending day-of-week.
      @param endTime         The daylight saving ending time in local wall clock time,
                             (in milliseconds within the day) which is local daylight
                             time in this case.
      @param after           If true, this rule selects the first <code>endDayOfWeek</code> on
                             or <em>after</em> <code>endDay</code>.  If false, this rule
                             selects the last <code>endDayOfWeek</code> on or before
                             <code>endDay</code> of the month.
      @exception IllegalArgumentException the <code>endMonth</code>, <code>endDay</code>,
      <code>endDayOfWeek</code>, or <code>endTime</code> parameters are out of range
      @since 1.2</div>
<a id="L518" name="L518"></a> 518     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27330.html" title="Multiple referred from 3 places.">setEndRule</a>(<strong class="reserved">int</strong> endMonth, <strong class="reserved">int</strong> endDay, <strong class="reserved">int</strong> endDayOfWeek, <strong class="reserved">int</strong> endTime, <strong class="reserved">boolean</strong> <a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>)
<a id="L519" name="L519"></a> 519     <em class="brace">{</em>
<a id="L520" name="L520"></a> 520         <strong class="reserved">if</strong> (<a href="../D/11257.html" title="Multiple defined in 3 places.">after</a>) <em class="brace">{</em>
<a id="L521" name="L521"></a> 521             <a href="../D/32592.html" title="Multiple defined in 3 places.">setEndRule</a>(endMonth, endDay, -endDayOfWeek, endTime);
<a id="L522" name="L522"></a> 522         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L523" name="L523"></a> 523             <a href="../D/32592.html" title="Multiple defined in 3 places.">setEndRule</a>(endMonth, -endDay, -endDayOfWeek, endTime);
<a id="L524" name="L524"></a> 524         <em class="brace">}</em>
<a id="L525" name="L525"></a> 525     <em class="brace">}</em>
<a id="L526" name="L526"></a> 526 
<div class="comment">
      Returns the offset of this time zone from UTC at the given
      time. If daylight saving time is in effect at the given time,
      the offset value is adjusted with the amount of daylight
      saving.
      @param date the time at which the time zone offset is found
      @return the amount of time in milliseconds to add to UTC to get
      local time.
      @since 1.4</div>
<a id="L538" name="L538"></a> 538     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18115.html" title="Multiple referred from 163 places.">getOffset</a>(<strong class="reserved">long</strong> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>) <em class="brace">{</em>
<a id="L539" name="L539"></a> 539         <strong class="reserved">return</strong> <a href="../D/21181.html" title="Multiple defined in 4 places.">getOffsets</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">null</strong>);
<a id="L540" name="L540"></a> 540     <em class="brace">}</em>
<a id="L541" name="L541"></a> 541 
<div class="comment">
      @see TimeZone#getOffsets</div>
<a id="L545" name="L545"></a> 545     <strong class="reserved">int</strong> <a href="../R/18119.html" title="Multiple referred from 6 places.">getOffsets</a>(<strong class="reserved">long</strong> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>, <strong class="reserved">int</strong>[] offsets) <em class="brace">{</em>
<a id="L546" name="L546"></a> 546         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = rawOffset;
<a id="L547" name="L547"></a> 547 
<a id="L548" name="L548"></a> 548       computeOffset:
<a id="L549" name="L549"></a> 549         <strong class="reserved">if</strong> (useDaylight) <em class="brace">{</em>
<a id="L550" name="L550"></a> 550             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551                 <strong class="reserved">if</strong> (cacheStart != 0) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552                     <strong class="reserved">if</strong> (<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> &gt;= cacheStart &amp;&amp; <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> &lt; cacheEnd) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553                         <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> += dstSavings;
<a id="L554" name="L554"></a> 554                         <strong class="reserved">break</strong> computeOffset;
<a id="L555" name="L555"></a> 555                     <em class="brace">}</em>
<a id="L556" name="L556"></a> 556                 <em class="brace">}</em>
<a id="L557" name="L557"></a> 557             <em class="brace">}</em>
<a id="L558" name="L558"></a> 558             BaseCalendar cal = <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> &gt;= <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.DEFAULT_GREGORIAN_CUTOVER ?
<a id="L559" name="L559"></a> 559                 gcal : (BaseCalendar) CalendarSystem.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>("julian");
<a id="L560" name="L560"></a> 560             BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L561" name="L561"></a> 561             <em class="comment">// Get the year in local time</em>
<a id="L562" name="L562"></a> 562             cal.<a href="../D/17459.html" title="Multiple defined in 3 places.">getCalendarDate</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a> + rawOffset, cdate);
<a id="L563" name="L563"></a> 563             <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> = cdate.getNormalizedYear();
<a id="L564" name="L564"></a> 564             <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> &gt;= startYear) <em class="brace">{</em>
<a id="L565" name="L565"></a> 565                 <em class="comment">// Clear time elements for the transition calculations</em>
<a id="L566" name="L566"></a> 566                 cdate.<a href="../D/34140.html" title="Multiple defined in 2 places.">setTimeOfDay</a>(0, 0, 0, 0);
<a id="L567" name="L567"></a> 567                 <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = <a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(cal, cdate, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>);
<a id="L568" name="L568"></a> 568             <em class="brace">}</em>
<a id="L569" name="L569"></a> 569         <em class="brace">}</em>
<a id="L570" name="L570"></a> 570 
<a id="L571" name="L571"></a> 571         <strong class="reserved">if</strong> (offsets != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L572" name="L572"></a> 572             offsets[0] = rawOffset;
<a id="L573" name="L573"></a> 573             offsets[1] = <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> - rawOffset;
<a id="L574" name="L574"></a> 574         <em class="brace">}</em>
<a id="L575" name="L575"></a> 575         <strong class="reserved">return</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L576" name="L576"></a> 576     <em class="brace">}</em>
<a id="L577" name="L577"></a> 577 
<div class="comment">
      Returns the difference in milliseconds between local time and
      UTC, taking into account both the raw offset and the effect of
      daylight saving, for the specified date and time.  This method
      assumes that the start and end month are distinct.  It also
      uses a default <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a> object as its
      underlying calendar, such as for determining leap years.  Do
      not use the result of this method with a calendar other than a
      default <code>GregorianCalendar</code>.
      <p><em>Note:  In general, clients should use
      <code>Calendar.get(ZONE_OFFSET) + Calendar.get(DST_OFFSET)</code>
      instead of calling this method.</em>
      @param era       The era of the given date.
      @param year      The year in the given date.
      @param month     The month in the given date. Month is 0-based. e.g.,
                       0 for January.
      @param day       The day-in-month of the given date.
      @param dayOfWeek The day-of-week of the given date.
      @param millis    The milliseconds in day in <em>standard</em> local time.
      @return          The milliseconds to add to UTC to get local time.
      @exception       IllegalArgumentException the <code>era</code>,
                       <code>month</code>, <code>day</code>, <code>dayOfWeek</code>,
                       or <code>millis</code> parameters are out of range</p></div>
<a id="L604" name="L604"></a> 604     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18115.html" title="Multiple referred from 163 places.">getOffset</a>(<strong class="reserved">int</strong> era, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, <strong class="reserved">int</strong> month, <strong class="reserved">int</strong> day, <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>,
<a id="L605" name="L605"></a> 605                          <strong class="reserved">int</strong> <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a>)
<a id="L606" name="L606"></a> 606     <em class="brace">{</em>
<a id="L607" name="L607"></a> 607         <strong class="reserved">if</strong> (era != <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.AD &amp;&amp; era != <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.BC) <em class="brace">{</em>
<a id="L608" name="L608"></a> 608             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal era " + era);
<a id="L609" name="L609"></a> 609         <em class="brace">}</em>
<a id="L610" name="L610"></a> 610 
<a id="L611" name="L611"></a> 611         <strong class="reserved">int</strong> y = <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>;
<a id="L612" name="L612"></a> 612         <strong class="reserved">if</strong> (era == <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.BC) <em class="brace">{</em>
<a id="L613" name="L613"></a> 613             <em class="comment">// adjust y with the GregorianCalendar-style year numbering.</em>
<a id="L614" name="L614"></a> 614             y = 1 - y;
<a id="L615" name="L615"></a> 615         <em class="brace">}</em>
<a id="L616" name="L616"></a> 616 
<a id="L617" name="L617"></a> 617         <em class="comment">// If the year isn't representable with the 64-bit long</em>
<a id="L618" name="L618"></a> 618         <em class="comment">// integer in milliseconds, convert the year to an</em>
<a id="L619" name="L619"></a> 619         <em class="comment">// equivalent year. This is required to pass some JCK test cases</em>
<a id="L620" name="L620"></a> 620         <em class="comment">// which are actually useless though because the specified years</em>
<a id="L621" name="L621"></a> 621         <em class="comment">// can't be supported by the Java time system.</em>
<a id="L622" name="L622"></a> 622         <strong class="reserved">if</strong> (y &gt;= 292278994) <em class="brace">{</em>
<a id="L623" name="L623"></a> 623             y = 2800 + y % 2800;
<a id="L624" name="L624"></a> 624         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (y &lt;= -292269054) <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <em class="comment">// y %= 28 also produces an equivalent year, but positive</em>
<a id="L626" name="L626"></a> 626             <em class="comment">// year numbers would be convenient to use the UNIX cal</em>
<a id="L627" name="L627"></a> 627             <em class="comment">// command.</em>
<a id="L628" name="L628"></a> 628             y = (<strong class="reserved">int</strong>) CalendarUtils.<a href="../D/27733.html" title="Multiple defined in 4 places.">mod</a>((<strong class="reserved">long</strong>) y, 28);
<a id="L629" name="L629"></a> 629         <em class="brace">}</em>
<a id="L630" name="L630"></a> 630 
<a id="L631" name="L631"></a> 631         <em class="comment">// convert year to its 1-based month value</em>
<a id="L632" name="L632"></a> 632         <strong class="reserved">int</strong> m = month + 1;
<a id="L633" name="L633"></a> 633 
<a id="L634" name="L634"></a> 634         <em class="comment">// First, calculate time as a Gregorian date.</em>
<a id="L635" name="L635"></a> 635         BaseCalendar cal = gcal;
<a id="L636" name="L636"></a> 636         BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L637" name="L637"></a> 637         cdate.<a href="../D/32357.html" title="Multiple defined in 16 places.">setDate</a>(y, m, day);
<a id="L638" name="L638"></a> 638         <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = cal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>(cdate); <em class="comment">// normalize cdate</em>
<a id="L639" name="L639"></a> 639         <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> += <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> - rawOffset; <em class="comment">// UTC time</em>
<a id="L640" name="L640"></a> 640 
<a id="L641" name="L641"></a> 641         <em class="comment">// If the time value represents a time before the default</em>
<a id="L642" name="L642"></a> 642         <em class="comment">// Gregorian cutover, recalculate time using the Julian</em>
<a id="L643" name="L643"></a> 643         <em class="comment">// calendar system. For the Julian calendar system, the</em>
<a id="L644" name="L644"></a> 644         <em class="comment">// normalized year numbering is ..., -2 (BCE 2), -1 (BCE 1),</em>
<a id="L645" name="L645"></a> 645         <em class="comment">// 1, 2 ... which is different from the GregorianCalendar</em>
<a id="L646" name="L646"></a> 646         <em class="comment">// style year numbering (..., -1, 0 (BCE 1), 1, 2, ...).</em>
<a id="L647" name="L647"></a> 647         <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt; <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.DEFAULT_GREGORIAN_CUTOVER) <em class="brace">{</em>
<a id="L648" name="L648"></a> 648             cal = (BaseCalendar) CalendarSystem.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>("julian");
<a id="L649" name="L649"></a> 649             cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.newCalendarDate(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a>.NO_TIMEZONE);
<a id="L650" name="L650"></a> 650             cdate.setNormalizedDate(y, m, day);
<a id="L651" name="L651"></a> 651             <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = cal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>(cdate) + <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> - rawOffset;
<a id="L652" name="L652"></a> 652         <em class="brace">}</em>
<a id="L653" name="L653"></a> 653 
<a id="L654" name="L654"></a> 654         <strong class="reserved">if</strong> ((cdate.getNormalizedYear() != y)
<a id="L655" name="L655"></a> 655             || (cdate.<a href="../D/20729.html" title="Multiple defined in 11 places.">getMonth</a>() != m)
<a id="L656" name="L656"></a> 656             || (cdate.<a href="../D/18223.html" title="Multiple defined in 5 places.">getDayOfMonth</a>() != day)
<a id="L657" name="L657"></a> 657             <em class="comment">// The validation should be cdate.getDayOfWeek() ==</em>
<a id="L658" name="L658"></a> 658             <em class="comment">// dayOfWeek. However, we don't check dayOfWeek for</em>
<a id="L659" name="L659"></a> 659             <em class="comment">// compatibility.</em>
<a id="L660" name="L660"></a> 660             || (<a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> &lt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SUNDAY || <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a> &gt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SATURDAY)
<a id="L661" name="L661"></a> 661             || (<a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> &lt; 0 || <a href="../D/27696.html" title="Multiple defined in 5 places.">millis</a> &gt;= (24*60*60*1000))) <em class="brace">{</em>
<a id="L662" name="L662"></a> 662             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>();
<a id="L663" name="L663"></a> 663         <em class="brace">}</em>
<a id="L664" name="L664"></a> 664 
<a id="L665" name="L665"></a> 665         <strong class="reserved">if</strong> (!useDaylight || <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> &lt; startYear || era != <a href="../S/1130.html#L330" title="Defined at 330 in src/java/util/GregorianCalendar.java.">GregorianCalendar</a>.CE) <em class="brace">{</em>
<a id="L666" name="L666"></a> 666             <strong class="reserved">return</strong> rawOffset;
<a id="L667" name="L667"></a> 667         <em class="brace">}</em>
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669         <strong class="reserved">return</strong> <a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(cal, cdate, y, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L670" name="L670"></a> 670     <em class="brace">}</em>
<a id="L671" name="L671"></a> 671 
<a id="L672" name="L672"></a> 672     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/18115.html" title="Multiple referred from 163 places.">getOffset</a>(BaseCalendar cal, BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, <strong class="reserved">long</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>) <em class="brace">{</em>
<a id="L673" name="L673"></a> 673         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L674" name="L674"></a> 674             <strong class="reserved">if</strong> (cacheStart != 0) <em class="brace">{</em>
<a id="L675" name="L675"></a> 675                 <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt;= cacheStart &amp;&amp; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt; cacheEnd) <em class="brace">{</em>
<a id="L676" name="L676"></a> 676                     <strong class="reserved">return</strong> rawOffset + dstSavings;
<a id="L677" name="L677"></a> 677                 <em class="brace">}</em>
<a id="L678" name="L678"></a> 678                 <strong class="reserved">if</strong> (<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> == cacheYear) <em class="brace">{</em>
<a id="L679" name="L679"></a> 679                     <strong class="reserved">return</strong> rawOffset;
<a id="L680" name="L680"></a> 680                 <em class="brace">}</em>
<a id="L681" name="L681"></a> 681             <em class="brace">}</em>
<a id="L682" name="L682"></a> 682         <em class="brace">}</em>
<a id="L683" name="L683"></a> 683 
<a id="L684" name="L684"></a> 684         <strong class="reserved">long</strong> <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/22714.html" title="Multiple defined in 6 places.">getStart</a>(cal, cdate, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>);
<a id="L685" name="L685"></a> 685         <strong class="reserved">long</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/18764.html" title="Multiple defined in 5 places.">getEnd</a>(cal, cdate, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>);
<a id="L686" name="L686"></a> 686         <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> = rawOffset;
<a id="L687" name="L687"></a> 687         <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L688" name="L688"></a> 688             <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &amp;&amp; <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L689" name="L689"></a> 689                 <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> += dstSavings;
<a id="L690" name="L690"></a> 690             <em class="brace">}</em>
<a id="L691" name="L691"></a> 691             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L692" name="L692"></a> 692                 cacheYear = <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>;
<a id="L693" name="L693"></a> 693                 cacheStart = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L694" name="L694"></a> 694                 cacheEnd = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L695" name="L695"></a> 695             <em class="brace">}</em>
<a id="L696" name="L696"></a> 696         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L697" name="L697"></a> 697             <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698                 <em class="comment">// TODO: support Gregorian cutover. The previous year</em>
<a id="L699" name="L699"></a> 699                 <em class="comment">// may be in the other calendar system.</em>
<a id="L700" name="L700"></a> 700                 <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> = <a href="../D/22714.html" title="Multiple defined in 6 places.">getStart</a>(cal, cdate, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> - 1);
<a id="L701" name="L701"></a> 701                 <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) <em class="brace">{</em>
<a id="L702" name="L702"></a> 702                     <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> += dstSavings;
<a id="L703" name="L703"></a> 703                 <em class="brace">}</em>
<a id="L704" name="L704"></a> 704             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &gt;= <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>) <em class="brace">{</em>
<a id="L705" name="L705"></a> 705                 <em class="comment">// TODO: support Gregorian cutover. The next year</em>
<a id="L706" name="L706"></a> 706                 <em class="comment">// may be in the other calendar system.</em>
<a id="L707" name="L707"></a> 707                 <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = <a href="../D/18764.html" title="Multiple defined in 5 places.">getEnd</a>(cal, cdate, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a> + 1);
<a id="L708" name="L708"></a> 708                 <strong class="reserved">if</strong> (<a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> &lt; <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L709" name="L709"></a> 709                     <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a> += dstSavings;
<a id="L710" name="L710"></a> 710                 <em class="brace">}</em>
<a id="L711" name="L711"></a> 711             <em class="brace">}</em>
<a id="L712" name="L712"></a> 712             <strong class="reserved">if</strong> (<a href="../D/34747.html" title="Multiple defined in 52 places.">start</a> &lt;= <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713                 <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L714" name="L714"></a> 714                     <em class="comment">// The start and end transitions are in multiple years.</em>
<a id="L715" name="L715"></a> 715                     cacheYear = (<strong class="reserved">long</strong>) startYear - 1;
<a id="L716" name="L716"></a> 716                     cacheStart = <a href="../D/34747.html" title="Multiple defined in 52 places.">start</a>;
<a id="L717" name="L717"></a> 717                     cacheEnd = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a>;
<a id="L718" name="L718"></a> 718                 <em class="brace">}</em>
<a id="L719" name="L719"></a> 719             <em class="brace">}</em>
<a id="L720" name="L720"></a> 720         <em class="brace">}</em>
<a id="L721" name="L721"></a> 721         <strong class="reserved">return</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>;
<a id="L722" name="L722"></a> 722     <em class="brace">}</em>
<a id="L723" name="L723"></a> 723 
<a id="L724" name="L724"></a> 724     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/19168.html" title="Multiple referred from 42 places.">getStart</a>(BaseCalendar cal, BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>) <em class="brace">{</em>
<a id="L725" name="L725"></a> 725         <strong class="reserved">int</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = startTime;
<a id="L726" name="L726"></a> 726         <strong class="reserved">if</strong> (startTimeMode != UTC_TIME) <em class="brace">{</em>
<a id="L727" name="L727"></a> 727             <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> -= rawOffset;
<a id="L728" name="L728"></a> 728         <em class="brace">}</em>
<a id="L729" name="L729"></a> 729         <strong class="reserved">return</strong> <a href="../D/23255.html" title="Multiple defined in 2 places.">getTransition</a>(cal, cdate, startMode, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, startMonth, startDay,
<a id="L730" name="L730"></a> 730                              startDayOfWeek, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<a id="L733" name="L733"></a> 733     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/16363.html" title="Multiple referred from 35 places.">getEnd</a>(BaseCalendar cal, BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>) <em class="brace">{</em>
<a id="L734" name="L734"></a> 734         <strong class="reserved">int</strong> <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> = endTime;
<a id="L735" name="L735"></a> 735         <strong class="reserved">if</strong> (endTimeMode != UTC_TIME) <em class="brace">{</em>
<a id="L736" name="L736"></a> 736             <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> -= rawOffset;
<a id="L737" name="L737"></a> 737         <em class="brace">}</em>
<a id="L738" name="L738"></a> 738         <strong class="reserved">if</strong> (endTimeMode == WALL_TIME) <em class="brace">{</em>
<a id="L739" name="L739"></a> 739             <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a> -= dstSavings;
<a id="L740" name="L740"></a> 740         <em class="brace">}</em>
<a id="L741" name="L741"></a> 741         <strong class="reserved">return</strong> <a href="../D/23255.html" title="Multiple defined in 2 places.">getTransition</a>(cal, cdate, endMode, <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, endMonth, endDay,
<a id="L742" name="L742"></a> 742                                         endDayOfWeek, <a href="../D/35330.html" title="Multiple defined in 2 places.">time</a>);
<a id="L743" name="L743"></a> 743     <em class="brace">}</em>
<a id="L744" name="L744"></a> 744 
<a id="L745" name="L745"></a> 745     <strong class="reserved">private</strong> <strong class="reserved">long</strong> <a href="../R/19575.html" title="Multiple referred from 10 places.">getTransition</a>(BaseCalendar cal, BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> cdate,
<a id="L746" name="L746"></a> 746                                <strong class="reserved">int</strong> mode, <strong class="reserved">int</strong> <a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>, <strong class="reserved">int</strong> month, <strong class="reserved">int</strong> dayOfMonth,
<a id="L747" name="L747"></a> 747                                <strong class="reserved">int</strong> <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>, <strong class="reserved">int</strong> timeOfDay) <em class="brace">{</em>
<a id="L748" name="L748"></a> 748         cdate.setNormalizedYear(<a href="../D/37306.html" title="Multiple defined in 2 places.">year</a>);
<a id="L749" name="L749"></a> 749         cdate.<a href="../D/33289.html" title="Multiple defined in 4 places.">setMonth</a>(month + 1);
<a id="L750" name="L750"></a> 750         <strong class="reserved">switch</strong> (mode) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751         <strong class="reserved">case</strong> DOM_MODE:
<a id="L752" name="L752"></a> 752             cdate.setDayOfMonth(dayOfMonth);
<a id="L753" name="L753"></a> 753             <strong class="reserved">break</strong>;
<a id="L754" name="L754"></a> 754 
<a id="L755" name="L755"></a> 755         <strong class="reserved">case</strong> DOW_IN_MONTH_MODE:
<a id="L756" name="L756"></a> 756             cdate.setDayOfMonth(1);
<a id="L757" name="L757"></a> 757             <strong class="reserved">if</strong> (dayOfMonth &lt; 0) <em class="brace">{</em>
<a id="L758" name="L758"></a> 758                 cdate.setDayOfMonth(cal.<a href="../S/1502.html#L702" title="Defined at 702 in src/java/time/chrono/HijrahChronology.java.">getMonthLength</a>(cdate));
<a id="L759" name="L759"></a> 759             <em class="brace">}</em>
<a id="L760" name="L760"></a> 760             cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.getNthDayOfWeek(dayOfMonth, <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>, cdate);
<a id="L761" name="L761"></a> 761             <strong class="reserved">break</strong>;
<a id="L762" name="L762"></a> 762 
<a id="L763" name="L763"></a> 763         <strong class="reserved">case</strong> DOW_GE_DOM_MODE:
<a id="L764" name="L764"></a> 764             cdate.setDayOfMonth(dayOfMonth);
<a id="L765" name="L765"></a> 765             cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.getNthDayOfWeek(1, <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>, cdate);
<a id="L766" name="L766"></a> 766             <strong class="reserved">break</strong>;
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768         <strong class="reserved">case</strong> DOW_LE_DOM_MODE:
<a id="L769" name="L769"></a> 769             cdate.setDayOfMonth(dayOfMonth);
<a id="L770" name="L770"></a> 770             cdate = (BaseCalendar.<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a>) cal.getNthDayOfWeek(-1, <a href="../S/1470.html#L428" title="Defined at 428 in src/java/time/temporal/WeekFields.java.">dayOfWeek</a>, cdate);
<a id="L771" name="L771"></a> 771             <strong class="reserved">break</strong>;
<a id="L772" name="L772"></a> 772         <em class="brace">}</em>
<a id="L773" name="L773"></a> 773         <strong class="reserved">return</strong> cal.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>(cdate) + timeOfDay;
<a id="L774" name="L774"></a> 774     <em class="brace">}</em>
<a id="L775" name="L775"></a> 775 
<div class="comment">
      Gets the GMT offset for this time zone.
      @return the GMT offset value in milliseconds
      @see #setRawOffset</div>
<a id="L781" name="L781"></a> 781     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18599.html" title="Multiple referred from 10 places.">getRawOffset</a>()
<a id="L782" name="L782"></a> 782     <em class="brace">{</em>
<a id="L783" name="L783"></a> 783         <em class="comment">// The given date will be taken into account while</em>
<a id="L784" name="L784"></a> 784         <em class="comment">// we have the historical time zone data in place.</em>
<a id="L785" name="L785"></a> 785         <strong class="reserved">return</strong> rawOffset;
<a id="L786" name="L786"></a> 786     <em class="brace">}</em>
<a id="L787" name="L787"></a> 787 
<div class="comment">
      Sets the base time zone offset to GMT.
      This is the offset to add to UTC to get local time.
      @see #getRawOffset</div>
<a id="L793" name="L793"></a> 793     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setRawOffset(<strong class="reserved">int</strong> offsetMillis)
<a id="L794" name="L794"></a> 794     <em class="brace">{</em>
<a id="L795" name="L795"></a> 795         <strong class="reserved">this</strong>.rawOffset = offsetMillis;
<a id="L796" name="L796"></a> 796     <em class="brace">}</em>
<a id="L797" name="L797"></a> 797 
<div class="comment">
      Sets the amount of time in milliseconds that the clock is advanced
      during daylight saving time.
      @param millisSavedDuringDST the number of milliseconds the time is
      advanced with respect to standard time when the daylight saving time rules
      are in effect. A positive number, typically one hour (3600000).
      @see #getDSTSavings
      @since 1.2</div>
<a id="L807" name="L807"></a> 807     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setDSTSavings(<strong class="reserved">int</strong> millisSavedDuringDST) <em class="brace">{</em>
<a id="L808" name="L808"></a> 808         <strong class="reserved">if</strong> (millisSavedDuringDST &lt;= 0) <em class="brace">{</em>
<a id="L809" name="L809"></a> 809             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Illegal daylight saving value: "
<a id="L810" name="L810"></a> 810                                                + millisSavedDuringDST);
<a id="L811" name="L811"></a> 811         <em class="brace">}</em>
<a id="L812" name="L812"></a> 812         dstSavings = millisSavedDuringDST;
<a id="L813" name="L813"></a> 813     <em class="brace">}</em>
<a id="L814" name="L814"></a> 814 
<div class="comment">
      Returns the amount of time in milliseconds that the clock is
      advanced during daylight saving time.
      @return the number of milliseconds the time is advanced with
      respect to standard time when the daylight saving rules are in
      effect, or 0 (zero) if this time zone doesn't observe daylight
      saving time.
      @see #setDSTSavings
      @since 1.2</div>
<a id="L827" name="L827"></a> 827     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15926.html" title="Multiple referred from 4 places.">getDSTSavings</a>() <em class="brace">{</em>
<a id="L828" name="L828"></a> 828         <strong class="reserved">return</strong> useDaylight ? dstSavings : 0;
<a id="L829" name="L829"></a> 829     <em class="brace">}</em>
<a id="L830" name="L830"></a> 830 
<div class="comment">
      Queries if this time zone uses daylight saving time.
      @return true if this time zone uses daylight saving time;
      false otherwise.</div>
<a id="L836" name="L836"></a> 836     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/30005.html" title="Multiple referred from 4 places.">useDaylightTime</a>()
<a id="L837" name="L837"></a> 837     <em class="brace">{</em>
<a id="L838" name="L838"></a> 838         <strong class="reserved">return</strong> useDaylight;
<a id="L839" name="L839"></a> 839     <em class="brace">}</em>
<a id="L840" name="L840"></a> 840 
<div class="comment">
      Returns <code>true</code> if this <code>SimpleTimeZone</code> observes
      Daylight Saving Time. This method is equivalent to {@link
      #useDaylightTime()}.
      @return <code>true</code> if this <code>SimpleTimeZone</code> observes
      Daylight Saving Time; <code>false</code> otherwise.
      @since 1.7</div>
<a id="L850" name="L850"></a> 850     @<a href="../S/1740.html#L51" title="Defined at 51 in src/java/lang/Override.java.">Override</a>
<a id="L851" name="L851"></a> 851     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> observesDaylightTime() <em class="brace">{</em>
<a id="L852" name="L852"></a> 852         <strong class="reserved">return</strong> <a href="../D/36265.html" title="Multiple defined in 2 places.">useDaylightTime</a>();
<a id="L853" name="L853"></a> 853     <em class="brace">}</em>
<a id="L854" name="L854"></a> 854 
<div class="comment">
      Queries if the given date is in daylight saving time.
      @return true if daylight saving time is in effective at the
      given date; false otherwise.</div>
<a id="L860" name="L860"></a> 860     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20450.html" title="Multiple referred from 3 places.">inDaylightTime</a>(<a href="../D/2208.html" title="Multiple defined in 2 places.">Date</a> <a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>)
<a id="L861" name="L861"></a> 861     <em class="brace">{</em>
<a id="L862" name="L862"></a> 862         <strong class="reserved">return</strong> (<a href="../D/21176.html" title="Multiple defined in 43 places.">getOffset</a>(<a href="../D/14462.html" title="Multiple defined in 21 places.">date</a>.<a href="../D/23142.html" title="Multiple defined in 14 places.">getTime</a>()) != rawOffset);
<a id="L863" name="L863"></a> 863     <em class="brace">}</em>
<a id="L864" name="L864"></a> 864 
<div class="comment">
      Returns a clone of this <code>SimpleTimeZone</code> instance.
      @return a clone of this instance.</div>
<a id="L869" name="L869"></a> 869     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>()
<a id="L870" name="L870"></a> 870     <em class="brace">{</em>
<a id="L871" name="L871"></a> 871         <strong class="reserved">return</strong> <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L872" name="L872"></a> 872     <em class="brace">}</em>
<a id="L873" name="L873"></a> 873 
<div class="comment">
      Generates the hash code for the SimpleDateFormat object.
      @return the hash code for this object</div>
<a id="L878" name="L878"></a> 878     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>()
<a id="L879" name="L879"></a> 879     <em class="brace">{</em>
<a id="L880" name="L880"></a> 880         <strong class="reserved">return</strong> startMonth ^ startDay ^ startDayOfWeek ^ startTime ^
<a id="L881" name="L881"></a> 881             endMonth ^ endDay ^ endDayOfWeek ^ endTime ^ rawOffset;
<a id="L882" name="L882"></a> 882     <em class="brace">}</em>
<a id="L883" name="L883"></a> 883 
<div class="comment">
      Compares the equality of two <code>SimpleTimeZone</code> objects.
      @param obj  The <code>SimpleTimeZone</code> object to be compared with.
      @return     True if the given <code>obj</code> is the same as this
                  <code>SimpleTimeZone</code> object; false otherwise.</div>
<a id="L891" name="L891"></a> 891     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj)
<a id="L892" name="L892"></a> 892     <em class="brace">{</em>
<a id="L893" name="L893"></a> 893         <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == obj) <em class="brace">{</em>
<a id="L894" name="L894"></a> 894             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L895" name="L895"></a> 895         <em class="brace">}</em>
<a id="L896" name="L896"></a> 896         <strong class="reserved">if</strong> (!(obj <strong class="reserved">instanceof</strong> <a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a>)) <em class="brace">{</em>
<a id="L897" name="L897"></a> 897             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L898" name="L898"></a> 898         <em class="brace">}</em>
<a id="L899" name="L899"></a> 899 
<a id="L900" name="L900"></a> 900         <a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a> that = (<a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a>) obj;
<a id="L901" name="L901"></a> 901 
<a id="L902" name="L902"></a> 902         <strong class="reserved">return</strong> <a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>().<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(that.<a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>()) &amp;&amp;
<a id="L903" name="L903"></a> 903             <a href="../D/24183.html" title="Multiple defined in 2 places.">hasSameRules</a>(that);
<a id="L904" name="L904"></a> 904     <em class="brace">}</em>
<a id="L905" name="L905"></a> 905 
<div class="comment">
      Returns <code>true</code> if this zone has the same rules and offset as another zone.
      @param other the TimeZone object to be compared with
      @return <code>true</code> if the given zone is a SimpleTimeZone and has the
      same rules and offset as this one
      @since 1.2</div>
<a id="L913" name="L913"></a> 913     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20269.html" title="Multiple referred from 3 places.">hasSameRules</a>(<a href="../S/935.html#L133" title="Defined at 133 in src/java/util/TimeZone.java.">TimeZone</a> other) <em class="brace">{</em>
<a id="L914" name="L914"></a> 914         <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == other) <em class="brace">{</em>
<a id="L915" name="L915"></a> 915             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L916" name="L916"></a> 916         <em class="brace">}</em>
<a id="L917" name="L917"></a> 917         <strong class="reserved">if</strong> (!(other <strong class="reserved">instanceof</strong> <a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a>)) <em class="brace">{</em>
<a id="L918" name="L918"></a> 918             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L919" name="L919"></a> 919         <em class="brace">}</em>
<a id="L920" name="L920"></a> 920         <a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a> that = (<a href="../S/916.html#L150" title="Defined at 150 in src/java/util/SimpleTimeZone.java.">SimpleTimeZone</a>) other;
<a id="L921" name="L921"></a> 921         <strong class="reserved">return</strong> rawOffset == that.rawOffset &amp;&amp;
<a id="L922" name="L922"></a> 922             useDaylight == that.useDaylight &amp;&amp;
<a id="L923" name="L923"></a> 923             (!useDaylight
<a id="L924" name="L924"></a> 924              <em class="comment">// Only check rules if using DST</em>
<a id="L925" name="L925"></a> 925              || (dstSavings == that.dstSavings &amp;&amp;
<a id="L926" name="L926"></a> 926                  startMode == that.startMode &amp;&amp;
<a id="L927" name="L927"></a> 927                  startMonth == that.startMonth &amp;&amp;
<a id="L928" name="L928"></a> 928                  startDay == that.startDay &amp;&amp;
<a id="L929" name="L929"></a> 929                  startDayOfWeek == that.startDayOfWeek &amp;&amp;
<a id="L930" name="L930"></a> 930                  startTime == that.startTime &amp;&amp;
<a id="L931" name="L931"></a> 931                  startTimeMode == that.startTimeMode &amp;&amp;
<a id="L932" name="L932"></a> 932                  endMode == that.endMode &amp;&amp;
<a id="L933" name="L933"></a> 933                  endMonth == that.endMonth &amp;&amp;
<a id="L934" name="L934"></a> 934                  endDay == that.endDay &amp;&amp;
<a id="L935" name="L935"></a> 935                  endDayOfWeek == that.endDayOfWeek &amp;&amp;
<a id="L936" name="L936"></a> 936                  endTime == that.endTime &amp;&amp;
<a id="L937" name="L937"></a> 937                  endTimeMode == that.endTimeMode &amp;&amp;
<a id="L938" name="L938"></a> 938                  startYear == that.startYear));
<a id="L939" name="L939"></a> 939     <em class="brace">}</em>
<a id="L940" name="L940"></a> 940 
<div class="comment">
      Returns a string representation of this time zone.
      @return a string representation of this time zone.</div>
<a id="L945" name="L945"></a> 945     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L946" name="L946"></a> 946         <strong class="reserved">return</strong> <a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>() +
<a id="L947" name="L947"></a> 947             "[id=" + <a href="../D/19513.html" title="Multiple defined in 26 places.">getID</a>() +
<a id="L948" name="L948"></a> 948             ",offset=" + rawOffset +
<a id="L949" name="L949"></a> 949             ",dstSavings=" + dstSavings +
<a id="L950" name="L950"></a> 950             ",useDaylight=" + useDaylight +
<a id="L951" name="L951"></a> 951             ",startYear=" + startYear +
<a id="L952" name="L952"></a> 952             ",startMode=" + startMode +
<a id="L953" name="L953"></a> 953             ",startMonth=" + startMonth +
<a id="L954" name="L954"></a> 954             ",startDay=" + startDay +
<a id="L955" name="L955"></a> 955             ",startDayOfWeek=" + startDayOfWeek +
<a id="L956" name="L956"></a> 956             ",startTime=" + startTime +
<a id="L957" name="L957"></a> 957             ",startTimeMode=" + startTimeMode +
<a id="L958" name="L958"></a> 958             ",endMode=" + endMode +
<a id="L959" name="L959"></a> 959             ",endMonth=" + endMonth +
<a id="L960" name="L960"></a> 960             ",endDay=" + endDay +
<a id="L961" name="L961"></a> 961             ",endDayOfWeek=" + endDayOfWeek +
<a id="L962" name="L962"></a> 962             ",endTime=" + endTime +
<a id="L963" name="L963"></a> 963             ",endTimeMode=" + endTimeMode + ']';
<a id="L964" name="L964"></a> 964     <em class="brace">}</em>
<a id="L965" name="L965"></a> 965 
<a id="L966" name="L966"></a> 966     <em class="comment">// =======================privates===============================</em>
<a id="L967" name="L967"></a> 967 
<div class="comment">
      The month in which daylight saving time starts.  This value must be
      between <code>Calendar.JANUARY</code> and
      <code>Calendar.DECEMBER</code> inclusive.  This value must not equal
      <code>endMonth</code>.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L976" name="L976"></a> 976     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startMonth;
<a id="L977" name="L977"></a> 977 
<div class="comment">
      This field has two possible interpretations:
      <dl>
      <dt><code>startMode == DOW_IN_MONTH</code></dt>
      <dd>
      <code>startDay</code> indicates the day of the month of
      <code>startMonth</code> on which daylight
      saving time starts, from 1 to 28, 30, or 31, depending on the
      <code>startMonth</code>.
      </dd>
      <dt><code>startMode != DOW_IN_MONTH</code></dt>
      <dd>
      <code>startDay</code> indicates which <code>startDayOfWeek</code> in the
      month <code>startMonth</code> daylight
      saving time starts on.  For example, a value of +1 and a
      <code>startDayOfWeek</code> of <code>Calendar.SUNDAY</code> indicates the
      first Sunday of <code>startMonth</code>.  Likewise, +2 would indicate the
      second Sunday, and -1 the last Sunday.  A value of 0 is illegal.
      </dd>
      </dl>
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1001" name="L1001"></a>1001     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startDay;
<a id="L1002" name="L1002"></a>1002 
<div class="comment">
      The day of the week on which daylight saving time starts.  This value
      must be between <code>Calendar.SUNDAY</code> and
      <code>Calendar.SATURDAY</code> inclusive.
      <p>If <code>useDaylight</code> is false or
      <code>startMode == DAY_OF_MONTH</code>, this value is ignored.
      @serial</p></div>
<a id="L1011" name="L1011"></a>1011     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startDayOfWeek;
<a id="L1012" name="L1012"></a>1012 
<div class="comment">
      The time in milliseconds after midnight at which daylight saving
      time starts.  This value is expressed as wall time, standard time,
      or UTC time, depending on the setting of <code>startTimeMode</code>.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1020" name="L1020"></a>1020     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startTime;
<a id="L1021" name="L1021"></a>1021 
<div class="comment">
      The format of startTime, either WALL_TIME, STANDARD_TIME, or UTC_TIME.
      @serial
      @since 1.3</div>
<a id="L1027" name="L1027"></a>1027     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startTimeMode;
<a id="L1028" name="L1028"></a>1028 
<div class="comment">
      The month in which daylight saving time ends.  This value must be
      between <code>Calendar.JANUARY</code> and
      <code>Calendar.UNDECIMBER</code>.  This value must not equal
      <code>startMonth</code>.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1037" name="L1037"></a>1037     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endMonth;
<a id="L1038" name="L1038"></a>1038 
<div class="comment">
      This field has two possible interpretations:
      <dl>
      <dt><code>endMode == DOW_IN_MONTH</code></dt>
      <dd>
      <code>endDay</code> indicates the day of the month of
      <code>endMonth</code> on which daylight
      saving time ends, from 1 to 28, 30, or 31, depending on the
      <code>endMonth</code>.
      </dd>
      <dt><code>endMode != DOW_IN_MONTH</code></dt>
      <dd>
      <code>endDay</code> indicates which <code>endDayOfWeek</code> in th
      month <code>endMonth</code> daylight
      saving time ends on.  For example, a value of +1 and a
      <code>endDayOfWeek</code> of <code>Calendar.SUNDAY</code> indicates the
      first Sunday of <code>endMonth</code>.  Likewise, +2 would indicate the
      second Sunday, and -1 the last Sunday.  A value of 0 is illegal.
      </dd>
      </dl>
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1062" name="L1062"></a>1062     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endDay;
<a id="L1063" name="L1063"></a>1063 
<div class="comment">
      The day of the week on which daylight saving time ends.  This value
      must be between <code>Calendar.SUNDAY</code> and
      <code>Calendar.SATURDAY</code> inclusive.
      <p>If <code>useDaylight</code> is false or
      <code>endMode == DAY_OF_MONTH</code>, this value is ignored.
      @serial</p></div>
<a id="L1072" name="L1072"></a>1072     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endDayOfWeek;
<a id="L1073" name="L1073"></a>1073 
<div class="comment">
      The time in milliseconds after midnight at which daylight saving
      time ends.  This value is expressed as wall time, standard time,
      or UTC time, depending on the setting of <code>endTimeMode</code>.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1081" name="L1081"></a>1081     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endTime;
<a id="L1082" name="L1082"></a>1082 
<div class="comment">
      The format of endTime, either <code>WALL_TIME</code>,
      <code>STANDARD_TIME</code>, or <code>UTC_TIME</code>.
      @serial
      @since 1.3</div>
<a id="L1089" name="L1089"></a>1089     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endTimeMode;
<a id="L1090" name="L1090"></a>1090 
<div class="comment">
      The year in which daylight saving time is first observed.  This is an {@link GregorianCalendar#AD AD}
      value.  If this value is less than 1 then daylight saving time is observed
      for all <code>AD</code> years.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial</p></div>
<a id="L1098" name="L1098"></a>1098     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startYear;
<a id="L1099" name="L1099"></a>1099 
<div class="comment">
      The offset in milliseconds between this zone and GMT.  Negative offsets
      are to the west of Greenwich.  To obtain local <em>standard</em> time,
      add the offset to GMT time.  To obtain local wall time it may also be
      necessary to add <code>dstSavings</code>.
      @serial</div>
<a id="L1107" name="L1107"></a>1107     <strong class="reserved">private</strong> <strong class="reserved">int</strong> rawOffset;
<a id="L1108" name="L1108"></a>1108 
<div class="comment">
      A boolean value which is true if and only if this zone uses daylight
      saving time.  If this value is false, several other fields are ignored.
      @serial</div>
<a id="L1114" name="L1114"></a>1114     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> useDaylight=<strong class="reserved">false</strong>; <em class="comment">// indicate if this time zone uses DST</em>
<a id="L1115" name="L1115"></a>1115 
<a id="L1116" name="L1116"></a>1116     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> millisPerHour = 60*60*1000;
<a id="L1117" name="L1117"></a>1117     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> millisPerDay  = 24*millisPerHour;
<a id="L1118" name="L1118"></a>1118 
<div class="comment">
      This field was serialized in JDK 1.1, so we have to keep it that way
      to maintain serialization compatibility. However, there's no need to
      recreate the array each time we create a new time zone.
      @serial An array of bytes containing the values {31, 28, 31, 30, 31, 30,
      31, 31, 30, 31, 30, 31}.  This is ignored as of the Java 2 platform v1.2, however, it must
      be streamed out for compatibility with JDK 1.1.</div>
<a id="L1127" name="L1127"></a>1127     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">byte</strong> <a href="../D/27762.html" title="Multiple defined in 4 places.">monthLength</a>[] = staticMonthLength;
<a id="L1128" name="L1128"></a>1128     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong> staticMonthLength[] = <em class="brace">{</em>31,28,31,30,31,30,31,31,30,31,30,31<em class="brace">}</em>;
<a id="L1129" name="L1129"></a>1129     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">byte</strong> staticLeapMonthLength[] = <em class="brace">{</em>31,29,31,30,31,30,31,31,30,31,30,31<em class="brace">}</em>;
<a id="L1130" name="L1130"></a>1130 
<div class="comment">
      Variables specifying the mode of the start rule.  Takes the following
      values:
      <dl>
      <dt><code>DOM_MODE</code></dt>
      <dd>
      Exact day of week; e.g., March 1.
      </dd>
      <dt><code>DOW_IN_MONTH_MODE</code></dt>
      <dd>
      Day of week in month; e.g., last Sunday in March.
      </dd>
      <dt><code>DOW_GE_DOM_MODE</code></dt>
      <dd>
      Day of week after day of month; e.g., Sunday on or after March 15.
      </dd>
      <dt><code>DOW_LE_DOM_MODE</code></dt>
      <dd>
      Day of week before day of month; e.g., Sunday on or before March 15.
      </dd>
      </dl>
      The setting of this field affects the interpretation of the
      <code>startDay</code> field.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial
      @since 1.1.4</p></div>
<a id="L1158" name="L1158"></a>1158     <strong class="reserved">private</strong> <strong class="reserved">int</strong> startMode;
<a id="L1159" name="L1159"></a>1159 
<div class="comment">
      Variables specifying the mode of the end rule.  Takes the following
      values:
      <dl>
      <dt><code>DOM_MODE</code></dt>
      <dd>
      Exact day of week; e.g., March 1.
      </dd>
      <dt><code>DOW_IN_MONTH_MODE</code></dt>
      <dd>
      Day of week in month; e.g., last Sunday in March.
      </dd>
      <dt><code>DOW_GE_DOM_MODE</code></dt>
      <dd>
      Day of week after day of month; e.g., Sunday on or after March 15.
      </dd>
      <dt><code>DOW_LE_DOM_MODE</code></dt>
      <dd>
      Day of week before day of month; e.g., Sunday on or before March 15.
      </dd>
      </dl>
      The setting of this field affects the interpretation of the
      <code>endDay</code> field.
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial
      @since 1.1.4</p></div>
<a id="L1187" name="L1187"></a>1187     <strong class="reserved">private</strong> <strong class="reserved">int</strong> endMode;
<a id="L1188" name="L1188"></a>1188 
<div class="comment">
      A positive value indicating the amount of time saved during DST in
      milliseconds.
      Typically one hour (3600000); sometimes 30 minutes (1800000).
      <p>If <code>useDaylight</code> is false, this value is ignored.
      @serial
      @since 1.1.4</p></div>
<a id="L1197" name="L1197"></a>1197     <strong class="reserved">private</strong> <strong class="reserved">int</strong> dstSavings;
<a id="L1198" name="L1198"></a>1198 
<a id="L1199" name="L1199"></a>1199     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> Gregorian gcal = CalendarSystem.getGregorianCalendar();
<a id="L1200" name="L1200"></a>1200 
<div class="comment">
      Cache values representing a single period of daylight saving
      time. When the cache values are valid, cacheStart is the start
      time (inclusive) of daylight saving time and cacheEnd is the
      end time (exclusive).
      cacheYear has a year value if both cacheStart and cacheEnd are
      in the same year. cacheYear is set to startYear - 1 if
      cacheStart and cacheEnd are in different years. cacheStart is 0
      if the cache values are void. cacheYear is a long to support
      Integer.MIN_VALUE - 1 (JCK requirement).</div>
<a id="L1213" name="L1213"></a>1213     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">long</strong> cacheYear;
<a id="L1214" name="L1214"></a>1214     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">long</strong> cacheStart;
<a id="L1215" name="L1215"></a>1215     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">long</strong> cacheEnd;
<a id="L1216" name="L1216"></a>1216 
<div class="comment">
      Constants specifying values of startMode and endMode.</div>
<a id="L1220" name="L1220"></a>1220     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOM_MODE          = 1; <em class="comment">// Exact day of month, "Mar 1"</em>
<a id="L1221" name="L1221"></a>1221     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOW_IN_MONTH_MODE = 2; <em class="comment">// Day of week in month, "lastSun"</em>
<a id="L1222" name="L1222"></a>1222     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOW_GE_DOM_MODE   = 3; <em class="comment">// Day of week after day of month, "Sun&gt;=15"</em>
<a id="L1223" name="L1223"></a>1223     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOW_LE_DOM_MODE   = 4; <em class="comment">// Day of week before day of month, "Sun&lt;=21"</em>
<a id="L1224" name="L1224"></a>1224 
<div class="comment">
      Constant for a mode of start or end time specified as wall clock
      time.  Wall clock time is standard time for the onset rule, and
      daylight time for the end rule.
      @since 1.4</div>
<a id="L1231" name="L1231"></a>1231     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> WALL_TIME = 0; <em class="comment">// Zero for backward compatibility</em>
<a id="L1232" name="L1232"></a>1232 
<div class="comment">
      Constant for a mode of start or end time specified as standard time.
      @since 1.4</div>
<a id="L1237" name="L1237"></a>1237     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STANDARD_TIME = 1;
<a id="L1238" name="L1238"></a>1238 
<div class="comment">
      Constant for a mode of start or end time specified as UTC. European
      Union rules are specified as UTC time, for example.
      @since 1.4</div>
<a id="L1244" name="L1244"></a>1244     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UTC_TIME = 2;
<a id="L1245" name="L1245"></a>1245 
<a id="L1246" name="L1246"></a>1246     <em class="comment">// Proclaim compatibility with 1.1</em>
<a id="L1247" name="L1247"></a>1247     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -403250971215465050L;
<a id="L1248" name="L1248"></a>1248 
<a id="L1249" name="L1249"></a>1249     <em class="comment">// the internal serial version which says which version was written</em>
<a id="L1250" name="L1250"></a>1250     <em class="comment">// - 0 (default) for version up to JDK 1.1.3</em>
<a id="L1251" name="L1251"></a>1251     <em class="comment">// - 1 for version from JDK 1.1.4, which includes 3 new fields</em>
<a id="L1252" name="L1252"></a>1252     <em class="comment">// - 2 for JDK 1.3, which includes 2 new fields</em>
<a id="L1253" name="L1253"></a>1253     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> currentSerialVersion = 2;
<a id="L1254" name="L1254"></a>1254 
<div class="comment">
      The version of the serialized data on the stream.  Possible values:
      <dl>
      <dt><b>0</b> or not present on stream</dt>
      <dd>
      JDK 1.1.3 or earlier.
      </dd>
      <dt><b>1</b></dt>
      <dd>
      JDK 1.1.4 or later.  Includes three new fields: <code>startMode</code>,
      <code>endMode</code>, and <code>dstSavings</code>.
      </dd>
      <dt><b>2</b></dt>
      <dd>
      JDK 1.3 or later.  Includes two new fields: <code>startTimeMode</code>
      and <code>endTimeMode</code>.
      </dd>
      </dl>
      When streaming out this class, the most recent format
      and the highest allowable <code>serialVersionOnStream</code>
      is written.
      @serial
      @since 1.1.4</div>
<a id="L1279" name="L1279"></a>1279     <strong class="reserved">private</strong> <strong class="reserved">int</strong> serialVersionOnStream = currentSerialVersion;
<a id="L1280" name="L1280"></a>1280 
<a id="L1281" name="L1281"></a>1281     <strong class="reserved">synchronized</strong> <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/21030.html" title="Multiple referred from 3 places.">invalidateCache</a>() <em class="brace">{</em>
<a id="L1282" name="L1282"></a>1282         cacheYear = startYear - 1;
<a id="L1283" name="L1283"></a>1283         cacheStart = cacheEnd = 0;
<a id="L1284" name="L1284"></a>1284     <em class="brace">}</em>
<a id="L1285" name="L1285"></a>1285 
<a id="L1286" name="L1286"></a>1286     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L1287" name="L1287"></a>1287     <em class="comment">// Rule representation</em>
<a id="L1288" name="L1288"></a>1288     <em class="comment">//</em>
<a id="L1289" name="L1289"></a>1289     <em class="comment">// We represent the following flavors of rules:</em>
<a id="L1290" name="L1290"></a>1290     <em class="comment">//       5        the fifth of the month</em>
<a id="L1291" name="L1291"></a>1291     <em class="comment">//       lastSun  the last Sunday in the month</em>
<a id="L1292" name="L1292"></a>1292     <em class="comment">//       lastMon  the last Monday in the month</em>
<a id="L1293" name="L1293"></a>1293     <em class="comment">//       Sun&gt;=8   first Sunday on or after the eighth</em>
<a id="L1294" name="L1294"></a>1294     <em class="comment">//       Sun&lt;=25  last Sunday on or before the 25th</em>
<a id="L1295" name="L1295"></a>1295     <em class="comment">// This is further complicated by the fact that we need to remain</em>
<a id="L1296" name="L1296"></a>1296     <em class="comment">// backward compatible with the 1.1 FCS.  Finally, we need to minimize</em>
<a id="L1297" name="L1297"></a>1297     <em class="comment">// API changes.  In order to satisfy these requirements, we support</em>
<a id="L1298" name="L1298"></a>1298     <em class="comment">// three representation systems, and we translate between them.</em>
<a id="L1299" name="L1299"></a>1299     <em class="comment">//</em>
<a id="L1300" name="L1300"></a>1300     <em class="comment">// INTERNAL REPRESENTATION</em>
<a id="L1301" name="L1301"></a>1301     <em class="comment">// This is the format SimpleTimeZone objects take after construction or</em>
<a id="L1302" name="L1302"></a>1302     <em class="comment">// streaming in is complete.  Rules are represented directly, using an</em>
<a id="L1303" name="L1303"></a>1303     <em class="comment">// unencoded format.  We will discuss the start rule only below; the end</em>
<a id="L1304" name="L1304"></a>1304     <em class="comment">// rule is analogous.</em>
<a id="L1305" name="L1305"></a>1305     <em class="comment">//   startMode      Takes on enumerated values DAY_OF_MONTH,</em>
<a id="L1306" name="L1306"></a>1306     <em class="comment">//                  DOW_IN_MONTH, DOW_AFTER_DOM, or DOW_BEFORE_DOM.</em>
<a id="L1307" name="L1307"></a>1307     <em class="comment">//   startDay       The day of the month, or for DOW_IN_MONTH mode, a</em>
<a id="L1308" name="L1308"></a>1308     <em class="comment">//                  value indicating which DOW, such as +1 for first,</em>
<a id="L1309" name="L1309"></a>1309     <em class="comment">//                  +2 for second, -1 for last, etc.</em>
<a id="L1310" name="L1310"></a>1310     <em class="comment">//   startDayOfWeek The day of the week.  Ignored for DAY_OF_MONTH.</em>
<a id="L1311" name="L1311"></a>1311     <em class="comment">//</em>
<a id="L1312" name="L1312"></a>1312     <em class="comment">// ENCODED REPRESENTATION</em>
<a id="L1313" name="L1313"></a>1313     <em class="comment">// This is the format accepted by the constructor and by setStartRule()</em>
<a id="L1314" name="L1314"></a>1314     <em class="comment">// and setEndRule().  It uses various combinations of positive, negative,</em>
<a id="L1315" name="L1315"></a>1315     <em class="comment">// and zero values to encode the different rules.  This representation</em>
<a id="L1316" name="L1316"></a>1316     <em class="comment">// allows us to specify all the different rule flavors without altering</em>
<a id="L1317" name="L1317"></a>1317     <em class="comment">// the API.</em>
<a id="L1318" name="L1318"></a>1318     <em class="comment">//   MODE              startMonth    startDay    startDayOfWeek</em>
<a id="L1319" name="L1319"></a>1319     <em class="comment">//   DOW_IN_MONTH_MODE &gt;=0           !=0         &gt;0</em>
<a id="L1320" name="L1320"></a>1320     <em class="comment">//   DOM_MODE          &gt;=0           &gt;0          ==0</em>
<a id="L1321" name="L1321"></a>1321     <em class="comment">//   DOW_GE_DOM_MODE   &gt;=0           &gt;0          &lt;0</em>
<a id="L1322" name="L1322"></a>1322     <em class="comment">//   DOW_LE_DOM_MODE   &gt;=0           &lt;0          &lt;0</em>
<a id="L1323" name="L1323"></a>1323     <em class="comment">//   (no DST)          don't care    ==0         don't care</em>
<a id="L1324" name="L1324"></a>1324     <em class="comment">//</em>
<a id="L1325" name="L1325"></a>1325     <em class="comment">// STREAMED REPRESENTATION</em>
<a id="L1326" name="L1326"></a>1326     <em class="comment">// We must retain binary compatibility with the 1.1 FCS.  The 1.1 code only</em>
<a id="L1327" name="L1327"></a>1327     <em class="comment">// handles DOW_IN_MONTH_MODE and non-DST mode, the latter indicated by the</em>
<a id="L1328" name="L1328"></a>1328     <em class="comment">// flag useDaylight.  When we stream an object out, we translate into an</em>
<a id="L1329" name="L1329"></a>1329     <em class="comment">// approximate DOW_IN_MONTH_MODE representation so the object can be parsed</em>
<a id="L1330" name="L1330"></a>1330     <em class="comment">// and used by 1.1 code.  Following that, we write out the full</em>
<a id="L1331" name="L1331"></a>1331     <em class="comment">// representation separately so that contemporary code can recognize and</em>
<a id="L1332" name="L1332"></a>1332     <em class="comment">// parse it.  The full representation is written in a "packed" format,</em>
<a id="L1333" name="L1333"></a>1333     <em class="comment">// consisting of a version number, a length, and an array of bytes.  Future</em>
<a id="L1334" name="L1334"></a>1334     <em class="comment">// versions of this class may specify different versions.  If they wish to</em>
<a id="L1335" name="L1335"></a>1335     <em class="comment">// include additional data, they should do so by storing them after the</em>
<a id="L1336" name="L1336"></a>1336     <em class="comment">// packed representation below.</em>
<a id="L1337" name="L1337"></a>1337     <em class="comment">//----------------------------------------------------------------------</em>
<a id="L1338" name="L1338"></a>1338 
<div class="comment">
      Given a set of encoded rules in startDay and startDayOfMonth, decode
      them and set the startMode appropriately.  Do the same for endDay and
      endDayOfMonth.  Upon entry, the day of week variables may be zero or
      negative, in order to indicate special modes.  The day of month
      variables may also be negative.  Upon exit, the mode variables will be
      set, and the day of week and day of month variables will be positive.
      This method also recognizes a startDay or endDay of zero as indicating
      no DST.</div>
<a id="L1349" name="L1349"></a>1349     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/916.html#L350" title="Referred from 350 in src/java/util/SimpleTimeZone.java.">decodeRules</a>()
<a id="L1350" name="L1350"></a>1350     <em class="brace">{</em>
<a id="L1351" name="L1351"></a>1351         <a href="../S/916.html#L1379" title="Defined at 1379 in src/java/util/SimpleTimeZone.java.">decodeStartRule</a>();
<a id="L1352" name="L1352"></a>1352         <a href="../S/916.html#L1426" title="Defined at 1426 in src/java/util/SimpleTimeZone.java.">decodeEndRule</a>();
<a id="L1353" name="L1353"></a>1353     <em class="brace">}</em>
<a id="L1354" name="L1354"></a>1354 
<div class="comment">
      Decode the start rule and validate the parameters.  The parameters are
      expected to be in encoded form, which represents the various rule modes
      by negating or zeroing certain values.  Representation formats are:
      <p>
      </p><pre>                 DOW_IN_MONTH  DOM    DOW&gt;=DOM  DOW&lt;=DOM  no DST
                 ------------  -----  --------  --------  ----------
      month       0..11        same    same      same     don't care
      day        -5..5         1..31   1..31    -1..-31   0
      dayOfWeek   1..7         0      -1..-7    -1..-7    don't care
      time        0..ONEDAY    same    same      same     don't care
      </pre>
      The range for month does not include UNDECIMBER since this class is
      really specific to GregorianCalendar, which does not use that month.
      The range for time includes ONEDAY (vs. ending at ONEDAY-1) because the
      end rule is an exclusive limit point.  That is, the range of times that
      are in DST include those &gt;= the start and &lt; the end.  For this reason,
      it should be possible to specify an end of ONEDAY in order to include the
      entire day.  Although this is equivalent to time 0 of the following day,
      it's not always possible to specify that, for example, on December 31.
      While arguably the start range should still be 0..ONEDAY-1, we keep
      the start and end ranges the same for consistency.</div>
<a id="L1379" name="L1379"></a>1379     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13110.html" title="Multiple referred from 2 places.">decodeStartRule</a>() <em class="brace">{</em>
<a id="L1380" name="L1380"></a>1380         useDaylight = (startDay != 0) &amp;&amp; (endDay != 0);
<a id="L1381" name="L1381"></a>1381         <strong class="reserved">if</strong> (startDay != 0) <em class="brace">{</em>
<a id="L1382" name="L1382"></a>1382             <strong class="reserved">if</strong> (startMonth &lt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.JANUARY || startMonth &gt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.DECEMBER) <em class="brace">{</em>
<a id="L1383" name="L1383"></a>1383                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1384" name="L1384"></a>1384                         "Illegal start month " + startMonth);
<a id="L1385" name="L1385"></a>1385             <em class="brace">}</em>
<a id="L1386" name="L1386"></a>1386             <strong class="reserved">if</strong> (startTime &lt; 0 || startTime &gt; millisPerDay) <em class="brace">{</em>
<a id="L1387" name="L1387"></a>1387                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1388" name="L1388"></a>1388                         "Illegal start time " + startTime);
<a id="L1389" name="L1389"></a>1389             <em class="brace">}</em>
<a id="L1390" name="L1390"></a>1390             <strong class="reserved">if</strong> (startDayOfWeek == 0) <em class="brace">{</em>
<a id="L1391" name="L1391"></a>1391                 startMode = DOM_MODE;
<a id="L1392" name="L1392"></a>1392             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1393" name="L1393"></a>1393                 <strong class="reserved">if</strong> (startDayOfWeek &gt; 0) <em class="brace">{</em>
<a id="L1394" name="L1394"></a>1394                     startMode = DOW_IN_MONTH_MODE;
<a id="L1395" name="L1395"></a>1395                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1396" name="L1396"></a>1396                     startDayOfWeek = -startDayOfWeek;
<a id="L1397" name="L1397"></a>1397                     <strong class="reserved">if</strong> (startDay &gt; 0) <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398                         startMode = DOW_GE_DOM_MODE;
<a id="L1399" name="L1399"></a>1399                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1400" name="L1400"></a>1400                         startDay = -startDay;
<a id="L1401" name="L1401"></a>1401                         startMode = DOW_LE_DOM_MODE;
<a id="L1402" name="L1402"></a>1402                     <em class="brace">}</em>
<a id="L1403" name="L1403"></a>1403                 <em class="brace">}</em>
<a id="L1404" name="L1404"></a>1404                 <strong class="reserved">if</strong> (startDayOfWeek &gt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SATURDAY) <em class="brace">{</em>
<a id="L1405" name="L1405"></a>1405                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1406" name="L1406"></a>1406                            "Illegal start day of week " + startDayOfWeek);
<a id="L1407" name="L1407"></a>1407                 <em class="brace">}</em>
<a id="L1408" name="L1408"></a>1408             <em class="brace">}</em>
<a id="L1409" name="L1409"></a>1409             <strong class="reserved">if</strong> (startMode == DOW_IN_MONTH_MODE) <em class="brace">{</em>
<a id="L1410" name="L1410"></a>1410                 <strong class="reserved">if</strong> (startDay &lt; -5 || startDay &gt; 5) <em class="brace">{</em>
<a id="L1411" name="L1411"></a>1411                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1412" name="L1412"></a>1412                             "Illegal start day of week in month " + startDay);
<a id="L1413" name="L1413"></a>1413                 <em class="brace">}</em>
<a id="L1414" name="L1414"></a>1414             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (startDay &lt; 1 || startDay &gt; staticMonthLength[startMonth]) <em class="brace">{</em>
<a id="L1415" name="L1415"></a>1415                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1416" name="L1416"></a>1416                         "Illegal start day " + startDay);
<a id="L1417" name="L1417"></a>1417             <em class="brace">}</em>
<a id="L1418" name="L1418"></a>1418         <em class="brace">}</em>
<a id="L1419" name="L1419"></a>1419     <em class="brace">}</em>
<a id="L1420" name="L1420"></a>1420 
<div class="comment">
      Decode the end rule and validate the parameters.  This method is exactly
      analogous to decodeStartRule().
      @see decodeStartRule</div>
<a id="L1426" name="L1426"></a>1426     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/12957.html" title="Multiple referred from 2 places.">decodeEndRule</a>() <em class="brace">{</em>
<a id="L1427" name="L1427"></a>1427         useDaylight = (startDay != 0) &amp;&amp; (endDay != 0);
<a id="L1428" name="L1428"></a>1428         <strong class="reserved">if</strong> (endDay != 0) <em class="brace">{</em>
<a id="L1429" name="L1429"></a>1429             <strong class="reserved">if</strong> (endMonth &lt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.JANUARY || endMonth &gt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.DECEMBER) <em class="brace">{</em>
<a id="L1430" name="L1430"></a>1430                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1431" name="L1431"></a>1431                         "Illegal end month " + endMonth);
<a id="L1432" name="L1432"></a>1432             <em class="brace">}</em>
<a id="L1433" name="L1433"></a>1433             <strong class="reserved">if</strong> (endTime &lt; 0 || endTime &gt; millisPerDay) <em class="brace">{</em>
<a id="L1434" name="L1434"></a>1434                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1435" name="L1435"></a>1435                         "Illegal end time " + endTime);
<a id="L1436" name="L1436"></a>1436             <em class="brace">}</em>
<a id="L1437" name="L1437"></a>1437             <strong class="reserved">if</strong> (endDayOfWeek == 0) <em class="brace">{</em>
<a id="L1438" name="L1438"></a>1438                 endMode = DOM_MODE;
<a id="L1439" name="L1439"></a>1439             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1440" name="L1440"></a>1440                 <strong class="reserved">if</strong> (endDayOfWeek &gt; 0) <em class="brace">{</em>
<a id="L1441" name="L1441"></a>1441                     endMode = DOW_IN_MONTH_MODE;
<a id="L1442" name="L1442"></a>1442                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1443" name="L1443"></a>1443                     endDayOfWeek = -endDayOfWeek;
<a id="L1444" name="L1444"></a>1444                     <strong class="reserved">if</strong> (endDay &gt; 0) <em class="brace">{</em>
<a id="L1445" name="L1445"></a>1445                         endMode = DOW_GE_DOM_MODE;
<a id="L1446" name="L1446"></a>1446                     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1447" name="L1447"></a>1447                         endDay = -endDay;
<a id="L1448" name="L1448"></a>1448                         endMode = DOW_LE_DOM_MODE;
<a id="L1449" name="L1449"></a>1449                     <em class="brace">}</em>
<a id="L1450" name="L1450"></a>1450                 <em class="brace">}</em>
<a id="L1451" name="L1451"></a>1451                 <strong class="reserved">if</strong> (endDayOfWeek &gt; <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SATURDAY) <em class="brace">{</em>
<a id="L1452" name="L1452"></a>1452                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1453" name="L1453"></a>1453                            "Illegal end day of week " + endDayOfWeek);
<a id="L1454" name="L1454"></a>1454                 <em class="brace">}</em>
<a id="L1455" name="L1455"></a>1455             <em class="brace">}</em>
<a id="L1456" name="L1456"></a>1456             <strong class="reserved">if</strong> (endMode == DOW_IN_MONTH_MODE) <em class="brace">{</em>
<a id="L1457" name="L1457"></a>1457                 <strong class="reserved">if</strong> (endDay &lt; -5 || endDay &gt; 5) <em class="brace">{</em>
<a id="L1458" name="L1458"></a>1458                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1459" name="L1459"></a>1459                             "Illegal end day of week in month " + endDay);
<a id="L1460" name="L1460"></a>1460                 <em class="brace">}</em>
<a id="L1461" name="L1461"></a>1461             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (endDay &lt; 1 || endDay &gt; staticMonthLength[endMonth]) <em class="brace">{</em>
<a id="L1462" name="L1462"></a>1462                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L1463" name="L1463"></a>1463                         "Illegal end day " + endDay);
<a id="L1464" name="L1464"></a>1464             <em class="brace">}</em>
<a id="L1465" name="L1465"></a>1465         <em class="brace">}</em>
<a id="L1466" name="L1466"></a>1466     <em class="brace">}</em>
<a id="L1467" name="L1467"></a>1467 
<div class="comment">
      Make rules compatible to 1.1 FCS code.  Since 1.1 FCS code only understands
      day-of-week-in-month rules, we must modify other modes of rules to their
      approximate equivalent in 1.1 FCS terms.  This method is used when streaming
      out objects of this class.  After it is called, the rules will be modified,
      with a possible loss of information.  startMode and endMode will NOT be
      altered, even though semantically they should be set to DOW_IN_MONTH_MODE,
      since the rule modification is only intended to be temporary.</div>
<a id="L1477" name="L1477"></a>1477     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/916.html#L1647" title="Referred from 1647 in src/java/util/SimpleTimeZone.java.">makeRulesCompatible</a>()
<a id="L1478" name="L1478"></a>1478     <em class="brace">{</em>
<a id="L1479" name="L1479"></a>1479         <strong class="reserved">switch</strong> (startMode) <em class="brace">{</em>
<a id="L1480" name="L1480"></a>1480         <strong class="reserved">case</strong> DOM_MODE:
<a id="L1481" name="L1481"></a>1481             startDay = 1 + (startDay / 7);
<a id="L1482" name="L1482"></a>1482             startDayOfWeek = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SUNDAY;
<a id="L1483" name="L1483"></a>1483             <strong class="reserved">break</strong>;
<a id="L1484" name="L1484"></a>1484 
<a id="L1485" name="L1485"></a>1485         <strong class="reserved">case</strong> DOW_GE_DOM_MODE:
<a id="L1486" name="L1486"></a>1486             <em class="comment">// A day-of-month of 1 is equivalent to DOW_IN_MONTH_MODE</em>
<a id="L1487" name="L1487"></a>1487             <em class="comment">// that is, Sun&gt;=1 == firstSun.</em>
<a id="L1488" name="L1488"></a>1488             <strong class="reserved">if</strong> (startDay != 1) <em class="brace">{</em>
<a id="L1489" name="L1489"></a>1489                 startDay = 1 + (startDay / 7);
<a id="L1490" name="L1490"></a>1490             <em class="brace">}</em>
<a id="L1491" name="L1491"></a>1491             <strong class="reserved">break</strong>;
<a id="L1492" name="L1492"></a>1492 
<a id="L1493" name="L1493"></a>1493         <strong class="reserved">case</strong> DOW_LE_DOM_MODE:
<a id="L1494" name="L1494"></a>1494             <strong class="reserved">if</strong> (startDay &gt;= 30) <em class="brace">{</em>
<a id="L1495" name="L1495"></a>1495                 startDay = -1;
<a id="L1496" name="L1496"></a>1496             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1497" name="L1497"></a>1497                 startDay = 1 + (startDay / 7);
<a id="L1498" name="L1498"></a>1498             <em class="brace">}</em>
<a id="L1499" name="L1499"></a>1499             <strong class="reserved">break</strong>;
<a id="L1500" name="L1500"></a>1500         <em class="brace">}</em>
<a id="L1501" name="L1501"></a>1501 
<a id="L1502" name="L1502"></a>1502         <strong class="reserved">switch</strong> (endMode) <em class="brace">{</em>
<a id="L1503" name="L1503"></a>1503         <strong class="reserved">case</strong> DOM_MODE:
<a id="L1504" name="L1504"></a>1504             endDay = 1 + (endDay / 7);
<a id="L1505" name="L1505"></a>1505             endDayOfWeek = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SUNDAY;
<a id="L1506" name="L1506"></a>1506             <strong class="reserved">break</strong>;
<a id="L1507" name="L1507"></a>1507 
<a id="L1508" name="L1508"></a>1508         <strong class="reserved">case</strong> DOW_GE_DOM_MODE:
<a id="L1509" name="L1509"></a>1509             <em class="comment">// A day-of-month of 1 is equivalent to DOW_IN_MONTH_MODE</em>
<a id="L1510" name="L1510"></a>1510             <em class="comment">// that is, Sun&gt;=1 == firstSun.</em>
<a id="L1511" name="L1511"></a>1511             <strong class="reserved">if</strong> (endDay != 1) <em class="brace">{</em>
<a id="L1512" name="L1512"></a>1512                 endDay = 1 + (endDay / 7);
<a id="L1513" name="L1513"></a>1513             <em class="brace">}</em>
<a id="L1514" name="L1514"></a>1514             <strong class="reserved">break</strong>;
<a id="L1515" name="L1515"></a>1515 
<a id="L1516" name="L1516"></a>1516         <strong class="reserved">case</strong> DOW_LE_DOM_MODE:
<a id="L1517" name="L1517"></a>1517             <strong class="reserved">if</strong> (endDay &gt;= 30) <em class="brace">{</em>
<a id="L1518" name="L1518"></a>1518                 endDay = -1;
<a id="L1519" name="L1519"></a>1519             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1520" name="L1520"></a>1520                 endDay = 1 + (endDay / 7);
<a id="L1521" name="L1521"></a>1521             <em class="brace">}</em>
<a id="L1522" name="L1522"></a>1522             <strong class="reserved">break</strong>;
<a id="L1523" name="L1523"></a>1523         <em class="brace">}</em>
<a id="L1524" name="L1524"></a>1524 
<div class="comment">
          Adjust the start and end times to wall time.  This works perfectly
          well unless it pushes into the next or previous day.  If that
          happens, we attempt to adjust the day rule somewhat crudely.  The day
          rules have been forced into DOW_IN_MONTH mode already, so we change
          the day of week to move forward or back by a day.  It's possible to
          make a more refined adjustment of the original rules first, but in
          most cases this extra effort will go to waste once we adjust the day
          rules anyway.</div>
<a id="L1535" name="L1535"></a>1535         <strong class="reserved">switch</strong> (startTimeMode) <em class="brace">{</em>
<a id="L1536" name="L1536"></a>1536         <strong class="reserved">case</strong> UTC_TIME:
<a id="L1537" name="L1537"></a>1537             startTime += rawOffset;
<a id="L1538" name="L1538"></a>1538             <strong class="reserved">break</strong>;
<a id="L1539" name="L1539"></a>1539         <em class="brace">}</em>
<a id="L1540" name="L1540"></a>1540         <strong class="reserved">while</strong> (startTime &lt; 0) <em class="brace">{</em>
<a id="L1541" name="L1541"></a>1541             startTime += millisPerDay;
<a id="L1542" name="L1542"></a>1542             startDayOfWeek = 1 + ((startDayOfWeek+5) % 7); <em class="comment">// Back 1 day</em>
<a id="L1543" name="L1543"></a>1543         <em class="brace">}</em>
<a id="L1544" name="L1544"></a>1544         <strong class="reserved">while</strong> (startTime &gt;= millisPerDay) <em class="brace">{</em>
<a id="L1545" name="L1545"></a>1545             startTime -= millisPerDay;
<a id="L1546" name="L1546"></a>1546             startDayOfWeek = 1 + (startDayOfWeek % 7); <em class="comment">// Forward 1 day</em>
<a id="L1547" name="L1547"></a>1547         <em class="brace">}</em>
<a id="L1548" name="L1548"></a>1548 
<a id="L1549" name="L1549"></a>1549         <strong class="reserved">switch</strong> (endTimeMode) <em class="brace">{</em>
<a id="L1550" name="L1550"></a>1550         <strong class="reserved">case</strong> UTC_TIME:
<a id="L1551" name="L1551"></a>1551             endTime += rawOffset + dstSavings;
<a id="L1552" name="L1552"></a>1552             <strong class="reserved">break</strong>;
<a id="L1553" name="L1553"></a>1553         <strong class="reserved">case</strong> STANDARD_TIME:
<a id="L1554" name="L1554"></a>1554             endTime += dstSavings;
<a id="L1555" name="L1555"></a>1555         <em class="brace">}</em>
<a id="L1556" name="L1556"></a>1556         <strong class="reserved">while</strong> (endTime &lt; 0) <em class="brace">{</em>
<a id="L1557" name="L1557"></a>1557             endTime += millisPerDay;
<a id="L1558" name="L1558"></a>1558             endDayOfWeek = 1 + ((endDayOfWeek+5) % 7); <em class="comment">// Back 1 day</em>
<a id="L1559" name="L1559"></a>1559         <em class="brace">}</em>
<a id="L1560" name="L1560"></a>1560         <strong class="reserved">while</strong> (endTime &gt;= millisPerDay) <em class="brace">{</em>
<a id="L1561" name="L1561"></a>1561             endTime -= millisPerDay;
<a id="L1562" name="L1562"></a>1562             endDayOfWeek = 1 + (endDayOfWeek % 7); <em class="comment">// Forward 1 day</em>
<a id="L1563" name="L1563"></a>1563         <em class="brace">}</em>
<a id="L1564" name="L1564"></a>1564     <em class="brace">}</em>
<a id="L1565" name="L1565"></a>1565 
<div class="comment">
      Pack the start and end rules into an array of bytes.  Only pack
      data which is not preserved by makeRulesCompatible.</div>
<a id="L1570" name="L1570"></a>1570     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] <a href="../S/916.html#L1643" title="Referred from 1643 in src/java/util/SimpleTimeZone.java.">packRules</a>()
<a id="L1571" name="L1571"></a>1571     <em class="brace">{</em>
<a id="L1572" name="L1572"></a>1572         <strong class="reserved">byte</strong>[] rules = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[6];
<a id="L1573" name="L1573"></a>1573         rules[0] = (<strong class="reserved">byte</strong>)startDay;
<a id="L1574" name="L1574"></a>1574         rules[1] = (<strong class="reserved">byte</strong>)startDayOfWeek;
<a id="L1575" name="L1575"></a>1575         rules[2] = (<strong class="reserved">byte</strong>)endDay;
<a id="L1576" name="L1576"></a>1576         rules[3] = (<strong class="reserved">byte</strong>)endDayOfWeek;
<a id="L1577" name="L1577"></a>1577 
<a id="L1578" name="L1578"></a>1578         <em class="comment">// As of serial version 2, include time modes</em>
<a id="L1579" name="L1579"></a>1579         rules[4] = (<strong class="reserved">byte</strong>)startTimeMode;
<a id="L1580" name="L1580"></a>1580         rules[5] = (<strong class="reserved">byte</strong>)endTimeMode;
<a id="L1581" name="L1581"></a>1581 
<a id="L1582" name="L1582"></a>1582         <strong class="reserved">return</strong> rules;
<a id="L1583" name="L1583"></a>1583     <em class="brace">}</em>
<a id="L1584" name="L1584"></a>1584 
<div class="comment">
      Given an array of bytes produced by packRules, interpret them
      as the start and end rules.</div>
<a id="L1589" name="L1589"></a>1589     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29739.html" title="Multiple referred from 2 places.">unpackRules</a>(<strong class="reserved">byte</strong>[] rules)
<a id="L1590" name="L1590"></a>1590     <em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591         startDay       = rules[0];
<a id="L1592" name="L1592"></a>1592         startDayOfWeek = rules[1];
<a id="L1593" name="L1593"></a>1593         endDay         = rules[2];
<a id="L1594" name="L1594"></a>1594         endDayOfWeek   = rules[3];
<a id="L1595" name="L1595"></a>1595 
<a id="L1596" name="L1596"></a>1596         <em class="comment">// As of serial version 2, include time modes</em>
<a id="L1597" name="L1597"></a>1597         <strong class="reserved">if</strong> (rules.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> &gt;= 6) <em class="brace">{</em>
<a id="L1598" name="L1598"></a>1598             startTimeMode = rules[4];
<a id="L1599" name="L1599"></a>1599             endTimeMode   = rules[5];
<a id="L1600" name="L1600"></a>1600         <em class="brace">}</em>
<a id="L1601" name="L1601"></a>1601     <em class="brace">}</em>
<a id="L1602" name="L1602"></a>1602 
<div class="comment">
      Pack the start and end times into an array of bytes.  This is required
      as of serial version 2.</div>
<a id="L1607" name="L1607"></a>1607     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] <a href="../S/916.html#L1644" title="Referred from 1644 in src/java/util/SimpleTimeZone.java.">packTimes</a>() <em class="brace">{</em>
<a id="L1608" name="L1608"></a>1608         <strong class="reserved">int</strong>[] <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a> = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[2];
<a id="L1609" name="L1609"></a>1609         <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>[0] = startTime;
<a id="L1610" name="L1610"></a>1610         <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>[1] = endTime;
<a id="L1611" name="L1611"></a>1611         <strong class="reserved">return</strong> <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>;
<a id="L1612" name="L1612"></a>1612     <em class="brace">}</em>
<a id="L1613" name="L1613"></a>1613 
<div class="comment">
      Unpack the start and end times from an array of bytes.  This is required
      as of serial version 2.</div>
<a id="L1618" name="L1618"></a>1618     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/29740.html" title="Multiple referred from 2 places.">unpackTimes</a>(<strong class="reserved">int</strong>[] <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>) <em class="brace">{</em>
<a id="L1619" name="L1619"></a>1619         startTime = <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>[0];
<a id="L1620" name="L1620"></a>1620         endTime = <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>[1];
<a id="L1621" name="L1621"></a>1621     <em class="brace">}</em>
<a id="L1622" name="L1622"></a>1622 
<div class="comment">
      Save the state of this object to a stream (i.e., serialize it).
      @serialData We write out two formats, a JDK 1.1 compatible format, using
      <code>DOW_IN_MONTH_MODE</code> rules, in the required section, followed
      by the full rules, in packed format, in the optional section.  The
      optional section will be ignored by JDK 1.1 code upon stream in.
      <p> Contents of the optional section: The length of a byte array is
      emitted (int); this is 4 as of this release. The byte array of the given
      length is emitted. The contents of the byte array are the true values of
      the fields <code>startDay</code>, <code>startDayOfWeek</code>,
      <code>endDay</code>, and <code>endDayOfWeek</code>.  The values of these
      fields in the required section are approximate values suited to the rule
      mode <code>DOW_IN_MONTH_MODE</code>, which is the only mode recognized by
      JDK 1.1.</p></div>
<a id="L1639" name="L1639"></a>1639     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L1640" name="L1640"></a>1640          <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>
<a id="L1641" name="L1641"></a>1641     <em class="brace">{</em>
<a id="L1642" name="L1642"></a>1642         <em class="comment">// Construct a binary rule</em>
<a id="L1643" name="L1643"></a>1643         <strong class="reserved">byte</strong>[] rules = <a href="../S/916.html#L1570" title="Defined at 1570 in src/java/util/SimpleTimeZone.java.">packRules</a>();
<a id="L1644" name="L1644"></a>1644         <strong class="reserved">int</strong>[] <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a> = <a href="../S/916.html#L1607" title="Defined at 1607 in src/java/util/SimpleTimeZone.java.">packTimes</a>();
<a id="L1645" name="L1645"></a>1645 
<a id="L1646" name="L1646"></a>1646         <em class="comment">// Convert to 1.1 FCS rules.  This step may cause us to lose information.</em>
<a id="L1647" name="L1647"></a>1647         <a href="../S/916.html#L1477" title="Defined at 1477 in src/java/util/SimpleTimeZone.java.">makeRulesCompatible</a>();
<a id="L1648" name="L1648"></a>1648 
<a id="L1649" name="L1649"></a>1649         <em class="comment">// Write out the 1.1 FCS rules</em>
<a id="L1650" name="L1650"></a>1650         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14752.html" title="Multiple defined in 6 places.">defaultWriteObject</a>();
<a id="L1651" name="L1651"></a>1651 
<a id="L1652" name="L1652"></a>1652         <em class="comment">// Write out the binary rules in the optional data area of the stream.</em>
<a id="L1653" name="L1653"></a>1653         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/37085.html" title="Multiple defined in 12 places.">writeInt</a>(rules.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L1654" name="L1654"></a>1654         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/36968.html" title="Multiple defined in 508 places.">write</a>(rules);
<a id="L1655" name="L1655"></a>1655         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/37124.html" title="Multiple defined in 263 places.">writeObject</a>(<a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>);
<a id="L1656" name="L1656"></a>1656 
<a id="L1657" name="L1657"></a>1657         <em class="comment">// Recover the original rules.  This recovers the information lost</em>
<a id="L1658" name="L1658"></a>1658         <em class="comment">// by makeRulesCompatible.</em>
<a id="L1659" name="L1659"></a>1659         <a href="../S/916.html#L1589" title="Defined at 1589 in src/java/util/SimpleTimeZone.java.">unpackRules</a>(rules);
<a id="L1660" name="L1660"></a>1660         <a href="../S/916.html#L1618" title="Defined at 1618 in src/java/util/SimpleTimeZone.java.">unpackTimes</a>(<a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>);
<a id="L1661" name="L1661"></a>1661     <em class="brace">}</em>
<a id="L1662" name="L1662"></a>1662 
<div class="comment">
      Reconstitute this object from a stream (i.e., deserialize it).
      We handle both JDK 1.1
      binary formats and full formats with a packed byte array.</div>
<a id="L1669" name="L1669"></a>1669     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>)
<a id="L1670" name="L1670"></a>1670          <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a>
<a id="L1671" name="L1671"></a>1671     <em class="brace">{</em>
<a id="L1672" name="L1672"></a>1672         <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/14746.html" title="Multiple defined in 2 places.">defaultReadObject</a>();
<a id="L1673" name="L1673"></a>1673 
<a id="L1674" name="L1674"></a>1674         <strong class="reserved">if</strong> (serialVersionOnStream &lt; 1) <em class="brace">{</em>
<a id="L1675" name="L1675"></a>1675             <em class="comment">// Fix a bug in the 1.1 SimpleTimeZone code -- namely,</em>
<a id="L1676" name="L1676"></a>1676             <em class="comment">// startDayOfWeek and endDayOfWeek were usually uninitialized.  We can't do</em>
<a id="L1677" name="L1677"></a>1677             <em class="comment">// too much, so we assume SUNDAY, which actually works most of the time.</em>
<a id="L1678" name="L1678"></a>1678             <strong class="reserved">if</strong> (startDayOfWeek == 0) <em class="brace">{</em>
<a id="L1679" name="L1679"></a>1679                 startDayOfWeek = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SUNDAY;
<a id="L1680" name="L1680"></a>1680             <em class="brace">}</em>
<a id="L1681" name="L1681"></a>1681             <strong class="reserved">if</strong> (endDayOfWeek == 0) <em class="brace">{</em>
<a id="L1682" name="L1682"></a>1682                 endDayOfWeek = <a href="../S/866.html#L313" title="Defined at 313 in src/java/util/Calendar.java.">Calendar</a>.SUNDAY;
<a id="L1683" name="L1683"></a>1683             <em class="brace">}</em>
<a id="L1684" name="L1684"></a>1684 
<a id="L1685" name="L1685"></a>1685             <em class="comment">// The variables dstSavings, startMode, and endMode are post-1.1, so they</em>
<a id="L1686" name="L1686"></a>1686             <em class="comment">// won't be present if we're reading from a 1.1 stream.  Fix them up.</em>
<a id="L1687" name="L1687"></a>1687             startMode = endMode = DOW_IN_MONTH_MODE;
<a id="L1688" name="L1688"></a>1688             dstSavings = millisPerHour;
<a id="L1689" name="L1689"></a>1689         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1690" name="L1690"></a>1690             <em class="comment">// For 1.1.4, in addition to the 3 new instance variables, we also</em>
<a id="L1691" name="L1691"></a>1691             <em class="comment">// store the actual rules (which have not be made compatible with 1.1)</em>
<a id="L1692" name="L1692"></a>1692             <em class="comment">// in the optional area.  Read them in here and parse them.</em>
<a id="L1693" name="L1693"></a>1693             <strong class="reserved">int</strong> <a href="../D/26813.html" title="Multiple defined in 43 places.">length</a> = <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/30206.html" title="Multiple defined in 10 places.">readInt</a>();
<a id="L1694" name="L1694"></a>1694             <strong class="reserved">byte</strong>[] rules = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>];
<a id="L1695" name="L1695"></a>1695             <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/30189.html" title="Multiple defined in 33 places.">readFully</a>(rules);
<a id="L1696" name="L1696"></a>1696             <a href="../S/916.html#L1589" title="Defined at 1589 in src/java/util/SimpleTimeZone.java.">unpackRules</a>(rules);
<a id="L1697" name="L1697"></a>1697         <em class="brace">}</em>
<a id="L1698" name="L1698"></a>1698 
<a id="L1699" name="L1699"></a>1699         <strong class="reserved">if</strong> (serialVersionOnStream &gt;= 2) <em class="brace">{</em>
<a id="L1700" name="L1700"></a>1700             <strong class="reserved">int</strong>[] <a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a> = (<strong class="reserved">int</strong>[]) <a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>.<a href="../D/30232.html" title="Multiple defined in 322 places.">readObject</a>();
<a id="L1701" name="L1701"></a>1701             <a href="../S/916.html#L1618" title="Defined at 1618 in src/java/util/SimpleTimeZone.java.">unpackTimes</a>(<a href="../S/3547.html#L517" title="Defined at 517 in src/javax/management/Query.java.">times</a>);
<a id="L1702" name="L1702"></a>1702         <em class="brace">}</em>
<a id="L1703" name="L1703"></a>1703 
<a id="L1704" name="L1704"></a>1704         serialVersionOnStream = currentSerialVersion;
<a id="L1705" name="L1705"></a>1705     <em class="brace">}</em>
<a id="L1706" name="L1706"></a>1706 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L361">[^]</a><a href="#L1669">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
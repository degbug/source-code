<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/util/stream/StreamOpFlag.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L247">[^]</a><a href="#L750">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L247" title="Defined at 247.">DISTINCT</a></li>
<li><a href="#L248" title="Defined at 248.">set</a></li>
<li><a href="#L248" title="Defined at 248.">setAndClear</a></li>
<li><a href="#L248" title="Defined at 248.">set</a></li>
<li><a href="#L268" title="Defined at 268.">SORTED</a></li>
<li><a href="#L269" title="Defined at 269.">set</a></li>
<li><a href="#L269" title="Defined at 269.">set</a></li>
<li><a href="#L269" title="Defined at 269.">setAndClear</a></li>
<li><a href="#L281" title="Defined at 281.">ORDERED</a></li>
<li><a href="#L282" title="Defined at 282.">setAndClear</a></li>
<li><a href="#L282" title="Defined at 282.">set</a></li>
<li><a href="#L282" title="Defined at 282.">clear</a></li>
<li><a href="#L282" title="Defined at 282.">set</a></li>
<li><a href="#L283" title="Defined at 283.">clear</a></li>
<li><a href="#L296" title="Defined at 296.">SIZED</a></li>
<li><a href="#L297" title="Defined at 297.">set</a></li>
<li><a href="#L297" title="Defined at 297.">set</a></li>
<li><a href="#L297" title="Defined at 297.">clear</a></li>
<li><a href="#L327" title="Defined at 327.">SHORT_CIRCUIT</a></li>
<li><a href="#L328" title="Defined at 328.">set</a></li>
<li><a href="#L328" title="Defined at 328.">set</a></li>
<li><a href="#L383" title="Defined at 383.">set</a></li>
<li><a href="#L394" title="Defined at 394.">mask</a></li>
<li><a href="#L399" title="Defined at 399.">set</a></li>
<li><a href="#L403" title="Defined at 403.">clear</a></li>
<li><a href="#L407" title="Defined at 407.">setAndClear</a></li>
<li><a href="#L411" title="Defined at 411.">build</a></li>
<li><a href="#L460" title="Defined at 460.">set</a></li>
<li><a href="#L469" title="Defined at 469.">clear</a></li>
<li><a href="#L478" title="Defined at 478.">isStreamFlag</a></li>
<li><a href="#L490" title="Defined at 490.">isKnown</a></li>
<li><a href="#L501" title="Defined at 501.">isCleared</a></li>
<li><a href="#L511" title="Defined at 511.">isPreserved</a></li>
<li><a href="#L521" title="Defined at 521.">canSet</a></li>
<li><a href="#L550" title="Defined at 550.">createMask</a></li>
<li><a href="#L563" title="Defined at 563.">createFlagMask</a></li>
<li><a href="#L632" title="Defined at 632.">getMask</a></li>
<li><a href="#L686" title="Defined at 686.">combineOpFlags</a></li>
<li><a href="#L703" title="Defined at 703.">toStreamFlags</a></li>
<li><a href="#L715" title="Defined at 715.">toCharacteristics</a></li>
<li><a href="#L732" title="Defined at 732.">fromCharacteristics</a></li>
<li><a href="#L750" title="Defined at 750.">fromCharacteristics</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../D/34926.html" title="Multiple defined in 21 places.">stream</a>;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> java.util.EnumMap;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Map;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Spliterator;
<a id="L30" name="L30"></a>  30 
<div class="comment">
  Flags corresponding to characteristics of streams and operations. Flags are
  utilized by the stream framework to control, specialize or optimize
  computation.
  <p>
  Stream flags may be used to describe characteristics of several different
  entities associated with streams: stream sources, intermediate operations,
  and terminal operations.  Not all stream flags are meaningful for all
  entities; the following table summarizes which flags are meaningful in what
  contexts:
  </p><div>
  <table>
    <caption>Type Characteristics</caption>
    <thead class="tableSubHeadingColor">
      <tr>
        <th colspan="2">&nbsp;</th>
        <th><code>DISTINCT</code></th>
        <th><code>SORTED</code></th>
        <th><code>ORDERED</code></th>
        <th><code>SIZED</code></th>
        <th><code>SHORT_CIRCUIT</code></th>
      </tr>
    </thead>
    <tbody>
       <tr>
         <th colspan="2" class="tableSubHeadingColor">Stream source</th>
         <td>Y</td>
         <td>Y</td>
         <td>Y</td>
         <td>Y</td>
         <td>N</td>
       </tr>
       <tr>
         <th colspan="2" class="tableSubHeadingColor">Intermediate operation</th>
         <td>PCI</td>
         <td>PCI</td>
         <td>PCI</td>
         <td>PC</td>
         <td>PI</td>
       </tr>
       <tr>
         <th colspan="2" class="tableSubHeadingColor">Terminal operation</th>
         <td>N</td>
         <td>N</td>
         <td>PC</td>
         <td>N</td>
         <td>PI</td>
       </tr>
    </tbody>
    <tfoot>
        <tr>
          <th class="tableSubHeadingColor" colspan="2">Legend</th>
          <th colspan="6" rowspan="7">&nbsp;</th>
        </tr>
        <tr>
          <th class="tableSubHeadingColor">Flag</th>
          <th class="tableSubHeadingColor">Meaning</th>
          <th colspan="6"></th>
        </tr>
        <tr><td>Y</td><td>Allowed</td></tr>
        <tr><td>N</td><td>Invalid</td></tr>
        <tr><td>P</td><td>Preserves</td></tr>
        <tr><td>C</td><td>Clears</td></tr>
        <tr><td>I</td><td>Injects</td></tr>
    </tfoot>
  </table>
  </div>
  <p>In the above table, "PCI" means "may preserve, clear, or inject"; "PC"
  means "may preserve or clear", "PI" means "may preserve or inject", and "N"
  means "not valid".
  </p><p>Stream flags are represented by unioned bit sets, so that a single word
  may describe all the characteristics of a given stream entity, and that, for
  example, the flags for a stream source can be efficiently combined with the
  flags for later operations on that stream.
  </p><p>The bit masks {@link #STREAM_MASK}, {@link #OP_MASK}, and
  {@link #TERMINAL_OP_MASK} can be ANDed with a bit set of stream flags to
  produce a mask containing only the valid flags for that entity type.
  </p><p>When describing a stream source, one only need describe what
  characteristics that stream has; when describing a stream operation, one need
  describe whether the operation preserves, injects, or clears that
  characteristic.  Accordingly, two bits are used for each flag, so as to allow
  representing not only the presence of of a characteristic, but how an
  operation modifies that characteristic.  There are two common forms in which
  flag bits are combined into an <code>int</code> bit set.  <em>Stream flags</em>
  are a unioned bit set constructed by ORing the enum characteristic values of
  {@link #set()} (or, more commonly, ORing the corresponding static named
  constants prefixed with <code>IS_</code>).  <em>Operation flags</em> are a unioned
  bit set constructed by ORing the enum characteristic values of {@link #set()}
  or {@link #clear()} (to inject, or clear, respectively, the corresponding
  flag), or more commonly ORing the corresponding named constants prefixed with
  <code>IS_</code> or <code>NOT_</code>.  Flags that are not marked with <code>IS_</code> or
  <code>NOT_</code> are implicitly treated as preserved.  Care must be taken when
  combining bitsets that the correct combining operations are applied in the
  correct order.
  </p><p>
  With the exception of <a href="#L327" title="Defined at 327.">SHORT_CIRCUIT</a>, stream characteristics can be
  derived from the equivalent {@link java.util.Spliterator} characteristics:
  {@link java.util.Spliterator#DISTINCT}, {@link java.util.Spliterator#SORTED},
  {@link java.util.Spliterator#ORDERED}, and
  {@link java.util.Spliterator#SIZED}.  A spliterator characteristics bit set
  can be converted to stream flags using the method
  {@link #fromCharacteristics(java.util.Spliterator)} and converted back using
  {@link #toCharacteristics(int)}.  (The bit set
  {@link #SPLITERATOR_CHARACTERISTICS_MASK} is used to AND with a bit set to
  produce a valid spliterator characteristics bit set that can be converted to
  stream flags.)
  </p><p>
  The source of a stream encapsulates a spliterator. The characteristics of
  that source spliterator when transformed to stream flags will be a proper
  subset of stream flags of that stream.
  For example:
  </p><pre> {@code
      Spliterator s = ...;
      Stream stream = Streams.stream(s);
      flagsFromSplitr = fromCharacteristics(s.characteristics());
      assert(flagsFromSplitr &amp; stream.getStreamFlags() == flagsFromSplitr);
  }</pre>
  <p>
  An intermediate operation, performed on an input stream to create a new
  output stream, may preserve, clear or inject stream or operation
  characteristics.  Similarly, a terminal operation, performed on an input
  stream to produce an output result may preserve, clear or inject stream or
  operation characteristics.  Preservation means that if that characteristic
  is present on the input, then it is also present on the output.  Clearing
  means that the characteristic is not present on the output regardless of the
  input.  Injection means that the characteristic is present on the output
  regardless of the input.  If a characteristic is not cleared or injected then
  it is implicitly preserved.
  </p><p>
  A pipeline consists of a stream source encapsulating a spliterator, one or
  more intermediate operations, and finally a terminal operation that produces
  a result.  At each stage of the pipeline, a combined stream and operation
  flags can be calculated, using {@link #combineOpFlags(int, int)}.  Such flags
  ensure that preservation, clearing and injecting information is retained at
  each stage.
  The combined stream and operation flags for the source stage of the pipeline
  is calculated as follows:
  </p><pre> {@code
      int flagsForSourceStage = combineOpFlags(sourceFlags, INITIAL_OPS_VALUE);
  }</pre>
  The combined stream and operation flags of each subsequent intermediate
  operation stage in the pipeline is calculated as follows:
  <pre> {@code
      int flagsForThisStage = combineOpFlags(flagsForPreviousStage, thisOpFlags);
  }</pre>
  Finally the flags output from the last intermediate operation of the pipeline
  are combined with the operation flags of the terminal operation to produce
  the flags output from the pipeline.
  <p>Those flags can then be used to apply optimizations. For example, if
  <code>SIZED.isKnown(flags)</code> returns true then the stream size remains
  constant throughout the pipeline, this information can be utilized to
  pre-allocate data structures and combined with
  {@link java.util.Spliterator#SUBSIZED} that information can be utilized to
  perform concurrent in-place updates into a shared array.
  For specific details see the {@link AbstractPipeline} constructors.
  @since 1.8</p></div>
<a id="L204" name="L204"></a> 204 <strong class="reserved">enum</strong> <a href="../R/7628.html" title="Multiple referred from 102 places.">StreamOpFlag</a> <em class="brace">{</em>
<a id="L205" name="L205"></a> 205 
<div class="comment">
      Each characteristic takes up 2 bits in a bit set to accommodate
      preserving, clearing and setting/injecting information.
      This applies to stream flags, intermediate/terminal operation flags, and
      combined stream and operation flags. Even though the former only requires
      1 bit of information per characteristic, is it more efficient when
      combining flags to align set and inject bits.
      Characteristics belong to certain types, see the Type enum. Bit masks for
      the types are constructed as per the following table:
                             DISTINCT  SORTED  ORDERED  SIZED  SHORT_CIRCUIT
               SPLITERATOR      01       01       01      01        00
                    STREAM      01       01       01      01        00
                        OP      11       11       11      10        01
               TERMINAL_OP      00       00       10      00        01
      UPSTREAM_TERMINAL_OP      00       00       10      00        00
      01 = set/inject
      10 = clear
      11 = preserve
      Construction of the columns is performed using a simple builder for
      non-zero values.</div>
<a id="L232" name="L232"></a> 232 
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234     <em class="comment">// The following flags correspond to characteristics on Spliterator</em>
<a id="L235" name="L235"></a> 235     <em class="comment">// and the values MUST be equal.</em>
<a id="L236" name="L236"></a> 236     <em class="comment">//</em>
<a id="L237" name="L237"></a> 237 
<div class="comment">
      Characteristic value signifying that, for each pair of
      encountered elements in a stream <code>x, y</code>, <code>!x.equals(y)</code>.
      <p>
      A stream may have this value or an intermediate operation can preserve,
      clear or inject this value.</p></div>
<a id="L245" name="L245"></a> 245     <em class="comment">// 0, 0x00000001</em>
<a id="L246" name="L246"></a> 246     <em class="comment">// Matches Spliterator.DISTINCT</em>
<a id="L247" name="L247"></a> 247     <a href="../R/1862.html" title="Multiple referred from 43 places.">DISTINCT</a>(0,
<a id="L248" name="L248"></a> 248              <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.SPLITERATOR).<a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM).setAndClear(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP)),
<a id="L249" name="L249"></a> 249 
<div class="comment">
      Characteristic value signifying that encounter order follows a natural
      sort order of comparable elements.
      <p>
      A stream can have this value or an intermediate operation can preserve,
      clear or inject this value.
      </p><p>
      Note: The {@link java.util.Spliterator#SORTED} characteristic can define
      a sort order with an associated non-null comparator.  Augmenting flag
      state with addition properties such that those properties can be passed
      to operations requires some disruptive changes for a singular use-case.
      Furthermore, comparing comparators for equality beyond that of identity
      is likely to be unreliable.  Therefore the <code>SORTED</code> characteristic
      for a defined non-natural sort order is not mapped internally to the
      <code>SORTED</code> flag.</p></div>
<a id="L266" name="L266"></a> 266     <em class="comment">// 1, 0x00000004</em>
<a id="L267" name="L267"></a> 267     <em class="comment">// Matches Spliterator.SORTED</em>
<a id="L268" name="L268"></a> 268     <a href="../R/6863.html" title="Multiple referred from 39 places.">SORTED</a>(1,
<a id="L269" name="L269"></a> 269            <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.SPLITERATOR).<a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM).setAndClear(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP)),
<a id="L270" name="L270"></a> 270 
<div class="comment">
      Characteristic value signifying that an encounter order is
      defined for stream elements.
      <p>
      A stream can have this value, an intermediate operation can preserve,
      clear or inject this value, or a terminal operation can preserve or clear
      this value.</p></div>
<a id="L279" name="L279"></a> 279     <em class="comment">// 2, 0x00000010</em>
<a id="L280" name="L280"></a> 280     <em class="comment">// Matches Spliterator.ORDERED</em>
<a id="L281" name="L281"></a> 281     <a href="../R/5704.html" title="Multiple referred from 79 places.">ORDERED</a>(2,
<a id="L282" name="L282"></a> 282             <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.SPLITERATOR).<a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM).setAndClear(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP).<a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.TERMINAL_OP)
<a id="L283" name="L283"></a> 283                     .<a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.UPSTREAM_TERMINAL_OP)),
<a id="L284" name="L284"></a> 284 
<div class="comment">
      Characteristic value signifying that size of the stream
      is of a known finite size that is equal to the known finite
      size of the source spliterator input to the first stream
      in the pipeline.
      <p>
      A stream can have this value or an intermediate operation can preserve or
      clear this value.</p></div>
<a id="L294" name="L294"></a> 294     <em class="comment">// 3, 0x00000040</em>
<a id="L295" name="L295"></a> 295     <em class="comment">// Matches Spliterator.SIZED</em>
<a id="L296" name="L296"></a> 296     <a href="../R/6841.html" title="Multiple referred from 73 places.">SIZED</a>(3,
<a id="L297" name="L297"></a> 297           <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.SPLITERATOR).<a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM).<a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP)),
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299     <em class="comment">// The following Spliterator characteristics are not currently used but a</em>
<a id="L300" name="L300"></a> 300     <em class="comment">// gap in the bit set is deliberately retained to enable corresponding</em>
<a id="L301" name="L301"></a> 301     <em class="comment">// stream flags if//when required without modification to other flag values.</em>
<a id="L302" name="L302"></a> 302     <em class="comment">//</em>
<a id="L303" name="L303"></a> 303     <em class="comment">// 4, 0x00000100 NONNULL(4, ...</em>
<a id="L304" name="L304"></a> 304     <em class="comment">// 5, 0x00000400 IMMUTABLE(5, ...</em>
<a id="L305" name="L305"></a> 305     <em class="comment">// 6, 0x00001000 CONCURRENT(6, ...</em>
<a id="L306" name="L306"></a> 306     <em class="comment">// 7, 0x00004000 SUBSIZED(7, ...</em>
<a id="L307" name="L307"></a> 307 
<a id="L308" name="L308"></a> 308     <em class="comment">// The following 4 flags are currently undefined and a free for any further</em>
<a id="L309" name="L309"></a> 309     <em class="comment">// spliterator characteristics.</em>
<a id="L310" name="L310"></a> 310     <em class="comment">//</em>
<a id="L311" name="L311"></a> 311     <em class="comment">//  8, 0x00010000</em>
<a id="L312" name="L312"></a> 312     <em class="comment">//  9, 0x00040000</em>
<a id="L313" name="L313"></a> 313     <em class="comment">// 10, 0x00100000</em>
<a id="L314" name="L314"></a> 314     <em class="comment">// 11, 0x00400000</em>
<a id="L315" name="L315"></a> 315 
<a id="L316" name="L316"></a> 316     <em class="comment">// The following flags are specific to streams and operations</em>
<a id="L317" name="L317"></a> 317     <em class="comment">//</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
      Characteristic value signifying that an operation may short-circuit the
      stream.
      <p>
      An intermediate operation can preserve or inject this value,
      or a terminal operation can preserve or inject this value.</p></div>
<a id="L326" name="L326"></a> 326     <em class="comment">// 12, 0x01000000</em>
<a id="L327" name="L327"></a> 327     <a href="../R/6836.html" title="Multiple referred from 4 places.">SHORT_CIRCUIT</a>(12,
<a id="L328" name="L328"></a> 328                   <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP).<a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.TERMINAL_OP));
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330     <em class="comment">// The following 2 flags are currently undefined and a free for any further</em>
<a id="L331" name="L331"></a> 331     <em class="comment">// stream flags if/when required</em>
<a id="L332" name="L332"></a> 332     <em class="comment">//</em>
<a id="L333" name="L333"></a> 333     <em class="comment">// 13, 0x04000000</em>
<a id="L334" name="L334"></a> 334     <em class="comment">// 14, 0x10000000</em>
<a id="L335" name="L335"></a> 335     <em class="comment">// 15, 0x40000000</em>
<a id="L336" name="L336"></a> 336 
<div class="comment">
      Type of a flag</div>
<a id="L340" name="L340"></a> 340     <strong class="reserved">enum</strong> <a href="../R/8343.html" title="Multiple referred from 1423 places.">Type</a> <em class="brace">{</em>
<div class="comment">
          The flag is associated with spliterator characteristics.</div>
<a id="L344" name="L344"></a> 344         SPLITERATOR,
<a id="L345" name="L345"></a> 345 
<div class="comment">
          The flag is associated with stream flags.</div>
<a id="L349" name="L349"></a> 349         STREAM,
<a id="L350" name="L350"></a> 350 
<div class="comment">
          The flag is associated with intermediate operation flags.</div>
<a id="L354" name="L354"></a> 354         OP,
<a id="L355" name="L355"></a> 355 
<div class="comment">
          The flag is associated with terminal operation flags.</div>
<a id="L359" name="L359"></a> 359         TERMINAL_OP,
<a id="L360" name="L360"></a> 360 
<div class="comment">
          The flag is associated with terminal operation flags that are
          propagated upstream across the last stateful operation boundary</div>
<a id="L365" name="L365"></a> 365         UPSTREAM_TERMINAL_OP
<a id="L366" name="L366"></a> 366     <em class="brace">}</em>
<a id="L367" name="L367"></a> 367 
<div class="comment">
      The bit pattern for setting/injecting a flag.</div>
<a id="L371" name="L371"></a> 371     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SET_BITS = 0b01;
<a id="L372" name="L372"></a> 372 
<div class="comment">
      The bit pattern for clearing a flag.</div>
<a id="L376" name="L376"></a> 376     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CLEAR_BITS = 0b10;
<a id="L377" name="L377"></a> 377 
<div class="comment">
      The bit pattern for preserving a flag.</div>
<a id="L381" name="L381"></a> 381     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> PRESERVE_BITS = 0b11;
<a id="L382" name="L382"></a> 382 
<a id="L383" name="L383"></a> 383     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L384" name="L384"></a> 384         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a>(<strong class="reserved">new</strong> <a href="../S/858.html#L79" title="Defined at 79 in src/java/util/EnumMap.java.">EnumMap</a>&lt;&gt;(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.<strong class="reserved">class</strong>)).<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(t);
<a id="L385" name="L385"></a> 385     <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<a id="L387" name="L387"></a> 387     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/4949.html" title="Multiple referred from 7 places.">MaskBuilder</a> <em class="brace">{</em>
<a id="L388" name="L388"></a> 388         <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L389" name="L389"></a> 389 
<a id="L390" name="L390"></a> 390         MaskBuilder(<a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>) <em class="brace">{</em>
<a id="L391" name="L391"></a> 391             <strong class="reserved">this</strong>.<a href="../D/27441.html" title="Multiple defined in 12 places.">map</a> = <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L392" name="L392"></a> 392         <em class="brace">}</em>
<a id="L393" name="L393"></a> 393 
<a id="L394" name="L394"></a> 394         <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> <a href="../R/23113.html" title="Multiple referred from 581 places.">mask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> i) <em class="brace">{</em>
<a id="L395" name="L395"></a> 395             <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(t, i);
<a id="L396" name="L396"></a> 396             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L397" name="L397"></a> 397         <em class="brace">}</em>
<a id="L398" name="L398"></a> 398 
<a id="L399" name="L399"></a> 399         <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L400" name="L400"></a> 400             <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>(t, SET_BITS);
<a id="L401" name="L401"></a> 401         <em class="brace">}</em>
<a id="L402" name="L402"></a> 402 
<a id="L403" name="L403"></a> 403         <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L404" name="L404"></a> 404             <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>(t, CLEAR_BITS);
<a id="L405" name="L405"></a> 405         <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407         <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> setAndClear(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L408" name="L408"></a> 408             <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>(t, PRESERVE_BITS);
<a id="L409" name="L409"></a> 409         <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411         <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; <a href="../R/10684.html" title="Multiple referred from 11 places.">build</a>() <em class="brace">{</em>
<a id="L412" name="L412"></a> 412             <strong class="reserved">for</strong> (<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t : <a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L413" name="L413"></a> 413                 <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>.<a href="../D/30006.html" title="Multiple defined in 13 places.">putIfAbsent</a>(t, 0b00);
<a id="L414" name="L414"></a> 414             <em class="brace">}</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">return</strong> <a href="../D/27441.html" title="Multiple defined in 12 places.">map</a>;
<a id="L416" name="L416"></a> 416         <em class="brace">}</em>
<a id="L417" name="L417"></a> 417     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<div class="comment">
      The mask table for a flag, this is used to determine if a flag
      corresponds to a certain flag type and for creating mask constants.</div>
<a id="L423" name="L423"></a> 423     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>, <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>&gt; maskTable;
<a id="L424" name="L424"></a> 424 
<div class="comment">
      The bit position in the bit mask.</div>
<a id="L428" name="L428"></a> 428     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> bitPosition;
<a id="L429" name="L429"></a> 429 
<div class="comment">
      The set 2 bit set offset at the bit position.</div>
<a id="L433" name="L433"></a> 433     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L434" name="L434"></a> 434 
<div class="comment">
      The clear 2 bit set offset at the bit position.</div>
<a id="L438" name="L438"></a> 438     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L439" name="L439"></a> 439 
<div class="comment">
      The preserve 2 bit set offset at the bit position.</div>
<a id="L443" name="L443"></a> 443     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> preserve;
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445     <strong class="reserved">private</strong> StreamOpFlag(<strong class="reserved">int</strong> <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>, <a href="../S/915.html#L387" title="Defined at 387 in src/java/util/stream/StreamOpFlag.java.">MaskBuilder</a> maskBuilder) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446         <strong class="reserved">this</strong>.maskTable = maskBuilder.<a href="../D/11931.html" title="Multiple defined in 27 places.">build</a>();
<a id="L447" name="L447"></a> 447         <em class="comment">// Two bits per flag</em>
<a id="L448" name="L448"></a> 448         <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a> *= 2;
<a id="L449" name="L449"></a> 449         <strong class="reserved">this</strong>.bitPosition = <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L450" name="L450"></a> 450         <strong class="reserved">this</strong>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a> = SET_BITS &lt;&lt; <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L451" name="L451"></a> 451         <strong class="reserved">this</strong>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a> = CLEAR_BITS &lt;&lt; <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L452" name="L452"></a> 452         <strong class="reserved">this</strong>.preserve = PRESERVE_BITS &lt;&lt; <a href="../D/29463.html" title="Multiple defined in 19 places.">position</a>;
<a id="L453" name="L453"></a> 453     <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<div class="comment">
      Gets the bitmap associated with setting this characteristic.
      @return the bitmap for setting this characteristic</div>
<a id="L460" name="L460"></a> 460     <strong class="reserved">int</strong> <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>() <em class="brace">{</em>
<a id="L461" name="L461"></a> 461         <strong class="reserved">return</strong> <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
      Gets the bitmap associated with clearing this characteristic.
      @return the bitmap for clearing this characteristic</div>
<a id="L469" name="L469"></a> 469     <strong class="reserved">int</strong> <a href="../R/11497.html" title="Multiple referred from 522 places.">clear</a>() <em class="brace">{</em>
<a id="L470" name="L470"></a> 470         <strong class="reserved">return</strong> <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<div class="comment">
      Determines if this flag is a stream-based flag.
      @return true if a stream-based flag, otherwise false.</div>
<a id="L478" name="L478"></a> 478     <strong class="reserved">boolean</strong> isStreamFlag() <em class="brace">{</em>
<a id="L479" name="L479"></a> 479         <strong class="reserved">return</strong> maskTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM) &gt; 0;
<a id="L480" name="L480"></a> 480     <em class="brace">}</em>
<a id="L481" name="L481"></a> 481 
<div class="comment">
      Checks if this flag is set on stream flags, injected on operation flags,
      and injected on combined stream and operation flags.
      @param flags the stream flags, operation flags, or combined stream and
             operation flags
      @return true if this flag is known, otherwise false.</div>
<a id="L490" name="L490"></a> 490     <strong class="reserved">boolean</strong> <a href="../R/21632.html" title="Multiple referred from 32 places.">isKnown</a>(<strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) <em class="brace">{</em>
<a id="L491" name="L491"></a> 491         <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; preserve) == <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L492" name="L492"></a> 492     <em class="brace">}</em>
<a id="L493" name="L493"></a> 493 
<div class="comment">
      Checks if this flag is cleared on operation flags or combined stream and
      operation flags.
      @param flags the operation flags or combined stream and operations flags.
      @return true if this flag is preserved, otherwise false.</div>
<a id="L501" name="L501"></a> 501     <strong class="reserved">boolean</strong> isCleared(<strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502         <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; preserve) == <a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L503" name="L503"></a> 503     <em class="brace">}</em>
<a id="L504" name="L504"></a> 504 
<div class="comment">
      Checks if this flag is preserved on combined stream and operation flags.
      @param flags the combined stream and operations flags.
      @return true if this flag is preserved, otherwise false.</div>
<a id="L511" name="L511"></a> 511     <strong class="reserved">boolean</strong> <a href="../S/909.html#L601" title="Referred from 601 in src/java/util/stream/SliceOps.java.">isPreserved</a>(<strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512         <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; preserve) == preserve;
<a id="L513" name="L513"></a> 513     <em class="brace">}</em>
<a id="L514" name="L514"></a> 514 
<div class="comment">
      Determines if this flag can be set for a flag type.
      @param t the flag type.
      @return true if this flag can be set for the flag type, otherwise false.</div>
<a id="L521" name="L521"></a> 521     <strong class="reserved">boolean</strong> canSet(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522         <strong class="reserved">return</strong> (maskTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(t) &amp; SET_BITS) &gt; 0;
<a id="L523" name="L523"></a> 523     <em class="brace">}</em>
<a id="L524" name="L524"></a> 524 
<div class="comment">
      The bit mask for spliterator characteristics</div>
<a id="L528" name="L528"></a> 528     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SPLITERATOR_CHARACTERISTICS_MASK = <a href="../S/915.html#L550" title="Defined at 550 in src/java/util/stream/StreamOpFlag.java.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.SPLITERATOR);
<a id="L529" name="L529"></a> 529 
<div class="comment">
      The bit mask for source stream flags.</div>
<a id="L533" name="L533"></a> 533     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> STREAM_MASK = <a href="../S/915.html#L550" title="Defined at 550 in src/java/util/stream/StreamOpFlag.java.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.STREAM);
<a id="L534" name="L534"></a> 534 
<div class="comment">
      The bit mask for intermediate operation flags.</div>
<a id="L538" name="L538"></a> 538     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> OP_MASK = <a href="../S/915.html#L550" title="Defined at 550 in src/java/util/stream/StreamOpFlag.java.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.OP);
<a id="L539" name="L539"></a> 539 
<div class="comment">
      The bit mask for terminal operation flags.</div>
<a id="L543" name="L543"></a> 543     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> TERMINAL_OP_MASK = <a href="../S/915.html#L550" title="Defined at 550 in src/java/util/stream/StreamOpFlag.java.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.TERMINAL_OP);
<a id="L544" name="L544"></a> 544 
<div class="comment">
      The bit mask for upstream terminal operation flags.</div>
<a id="L548" name="L548"></a> 548     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> UPSTREAM_TERMINAL_OP_MASK = <a href="../S/915.html#L550" title="Defined at 550 in src/java/util/stream/StreamOpFlag.java.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a>.UPSTREAM_TERMINAL_OP);
<a id="L549" name="L549"></a> 549 
<a id="L550" name="L550"></a> 550     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/12553.html" title="Multiple referred from 5 places.">createMask</a>(<a href="../D/9178.html" title="Multiple defined in 19 places.">Type</a> t) <em class="brace">{</em>
<a id="L551" name="L551"></a> 551         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = 0;
<a id="L552" name="L552"></a> 552         <strong class="reserved">for</strong> (<a href="../S/915.html#L204" title="Defined at 204 in src/java/util/stream/StreamOpFlag.java.">StreamOpFlag</a> flag : <a href="../S/915.html#L204" title="Defined at 204 in src/java/util/stream/StreamOpFlag.java.">StreamOpFlag</a>.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= flag.maskTable.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(t) &lt;&lt; flag.bitPosition;
<a id="L554" name="L554"></a> 554         <em class="brace">}</em>
<a id="L555" name="L555"></a> 555         <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L556" name="L556"></a> 556     <em class="brace">}</em>
<a id="L557" name="L557"></a> 557 
<div class="comment">
      Complete flag mask.</div>
<a id="L561" name="L561"></a> 561     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FLAG_MASK = <a href="../S/915.html#L563" title="Defined at 563 in src/java/util/stream/StreamOpFlag.java.">createFlagMask</a>();
<a id="L562" name="L562"></a> 562 
<a id="L563" name="L563"></a> 563     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/915.html#L561" title="Referred from 561 in src/java/util/stream/StreamOpFlag.java.">createFlagMask</a>() <em class="brace">{</em>
<a id="L564" name="L564"></a> 564         <strong class="reserved">int</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> = 0;
<a id="L565" name="L565"></a> 565         <strong class="reserved">for</strong> (<a href="../S/915.html#L204" title="Defined at 204 in src/java/util/stream/StreamOpFlag.java.">StreamOpFlag</a> flag : <a href="../S/915.html#L204" title="Defined at 204 in src/java/util/stream/StreamOpFlag.java.">StreamOpFlag</a>.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566             <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a> |= flag.preserve;
<a id="L567" name="L567"></a> 567         <em class="brace">}</em>
<a id="L568" name="L568"></a> 568         <strong class="reserved">return</strong> <a href="../S/915.html#L394" title="Defined at 394 in src/java/util/stream/StreamOpFlag.java.">mask</a>;
<a id="L569" name="L569"></a> 569     <em class="brace">}</em>
<a id="L570" name="L570"></a> 570 
<div class="comment">
      Flag mask for stream flags that are set.</div>
<a id="L574" name="L574"></a> 574     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FLAG_MASK_IS = STREAM_MASK;
<a id="L575" name="L575"></a> 575 
<div class="comment">
      Flag mask for stream flags that are cleared.</div>
<a id="L579" name="L579"></a> 579     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FLAG_MASK_NOT = STREAM_MASK &lt;&lt; 1;
<a id="L580" name="L580"></a> 580 
<div class="comment">
      The initial value to be combined with the stream flags of the first
      stream in the pipeline.</div>
<a id="L585" name="L585"></a> 585     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> INITIAL_OPS_VALUE = FLAG_MASK_IS | FLAG_MASK_NOT;
<a id="L586" name="L586"></a> 586 
<div class="comment">
      The bit value to set or inject <a href="#L247" title="Defined at 247.">DISTINCT</a>.</div>
<a id="L590" name="L590"></a> 590     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> IS_DISTINCT = <a href="../D/2027.html" title="Multiple defined in 2 places.">DISTINCT</a>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L591" name="L591"></a> 591 
<div class="comment">
      The bit value to clear <a href="#L247" title="Defined at 247.">DISTINCT</a>.</div>
<a id="L595" name="L595"></a> 595     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOT_DISTINCT = <a href="../D/2027.html" title="Multiple defined in 2 places.">DISTINCT</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L596" name="L596"></a> 596 
<div class="comment">
      The bit value to set or inject <a href="#L268" title="Defined at 268.">SORTED</a>.</div>
<a id="L600" name="L600"></a> 600     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> IS_SORTED = <a href="../S/915.html#L268" title="Defined at 268 in src/java/util/stream/StreamOpFlag.java.">SORTED</a>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L601" name="L601"></a> 601 
<div class="comment">
      The bit value to clear <a href="#L268" title="Defined at 268.">SORTED</a>.</div>
<a id="L605" name="L605"></a> 605     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOT_SORTED = <a href="../S/915.html#L268" title="Defined at 268 in src/java/util/stream/StreamOpFlag.java.">SORTED</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L606" name="L606"></a> 606 
<div class="comment">
      The bit value to set or inject <a href="#L281" title="Defined at 281.">ORDERED</a>.</div>
<a id="L610" name="L610"></a> 610     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> IS_ORDERED = <a href="../S/915.html#L281" title="Defined at 281 in src/java/util/stream/StreamOpFlag.java.">ORDERED</a>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L611" name="L611"></a> 611 
<div class="comment">
      The bit value to clear <a href="#L281" title="Defined at 281.">ORDERED</a>.</div>
<a id="L615" name="L615"></a> 615     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOT_ORDERED = <a href="../S/915.html#L281" title="Defined at 281 in src/java/util/stream/StreamOpFlag.java.">ORDERED</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L616" name="L616"></a> 616 
<div class="comment">
      The bit value to set <a href="#L296" title="Defined at 296.">SIZED</a>.</div>
<a id="L620" name="L620"></a> 620     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> IS_SIZED = <a href="../S/915.html#L296" title="Defined at 296 in src/java/util/stream/StreamOpFlag.java.">SIZED</a>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L621" name="L621"></a> 621 
<div class="comment">
      The bit value to clear <a href="#L296" title="Defined at 296.">SIZED</a>.</div>
<a id="L625" name="L625"></a> 625     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOT_SIZED = <a href="../S/915.html#L296" title="Defined at 296 in src/java/util/stream/StreamOpFlag.java.">SIZED</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>;
<a id="L626" name="L626"></a> 626 
<div class="comment">
      The bit value to inject <a href="#L327" title="Defined at 327.">SHORT_CIRCUIT</a>.</div>
<a id="L630" name="L630"></a> 630     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> IS_SHORT_CIRCUIT = <a href="../S/915.html#L327" title="Defined at 327 in src/java/util/stream/StreamOpFlag.java.">SHORT_CIRCUIT</a>.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>;
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/17558.html" title="Multiple referred from 32 places.">getMask</a>(<strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) <em class="brace">{</em>
<a id="L633" name="L633"></a> 633         <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> == 0)
<a id="L634" name="L634"></a> 634                ? FLAG_MASK
<a id="L635" name="L635"></a> 635                : ~(<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> | ((FLAG_MASK_IS &amp; <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) &lt;&lt; 1) | ((FLAG_MASK_NOT &amp; <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>) &gt;&gt; 1));
<a id="L636" name="L636"></a> 636     <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<div class="comment">
      Combines stream or operation flags with previously combined stream and
      operation flags to produce updated combined stream and operation flags.
      <p>
      A flag set on stream flags or injected on operation flags,
      and injected combined stream and operation flags,
      will be injected on the updated combined stream and operation flags.
      </p><p>
      A flag set on stream flags or injected on operation flags,
      and cleared on the combined stream and operation flags,
      will be cleared on the updated combined stream and operation flags.
      </p><p>
      A flag set on the stream flags or injected on operation flags,
      and preserved on the combined stream and operation flags,
      will be injected on the updated combined stream and operation flags.
      </p><p>
      A flag not set on the stream flags or cleared/preserved on operation
      flags, and injected on the combined stream and operation flags,
      will be injected on the updated combined stream and operation flags.
      </p><p>
      A flag not set on the stream flags or cleared/preserved on operation
      flags, and cleared on the combined stream and operation flags,
      will be cleared on the updated combined stream and operation flags.
      </p><p>
      A flag not set on the stream flags,
      and preserved on the combined stream and operation flags
      will be preserved on the updated combined stream and operation flags.
      </p><p>
      A flag cleared on operation flags,
      and preserved on the combined stream and operation flags
      will be cleared on the updated combined stream and operation flags.
      </p><p>
      A flag preserved on operation flags,
      and preserved on the combined stream and operation flags
      will be preserved on the updated combined stream and operation flags.
      @param newStreamOrOpFlags the stream or operation flags.
      @param prevCombOpFlags previously combined stream and operation flags.
             The value {#link INITIAL_OPS_VALUE} must be used as the seed value.
      @return the updated combined stream and operation flags.</p></div>
<a id="L686" name="L686"></a> 686     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/11668.html" title="Multiple referred from 3 places.">combineOpFlags</a>(<strong class="reserved">int</strong> newStreamOrOpFlags, <strong class="reserved">int</strong> prevCombOpFlags) <em class="brace">{</em>
<a id="L687" name="L687"></a> 687         <em class="comment">// 0x01 or 0x10 nibbles are transformed to 0x11</em>
<a id="L688" name="L688"></a> 688         <em class="comment">// 0x00 nibbles remain unchanged</em>
<a id="L689" name="L689"></a> 689         <em class="comment">// Then all the bits are flipped</em>
<a id="L690" name="L690"></a> 690         <em class="comment">// Then the result is logically or'ed with the operation flags.</em>
<a id="L691" name="L691"></a> 691         <strong class="reserved">return</strong> (prevCombOpFlags &amp; <a href="../S/915.html#L204" title="Defined at 204 in src/java/util/stream/StreamOpFlag.java.">StreamOpFlag</a>.<a href="../D/20394.html" title="Multiple defined in 14 places.">getMask</a>(newStreamOrOpFlags)) | newStreamOrOpFlags;
<a id="L692" name="L692"></a> 692     <em class="brace">}</em>
<a id="L693" name="L693"></a> 693 
<div class="comment">
      Converts combined stream and operation flags to stream flags.
      <p>Each flag injected on the combined stream and operation flags will be
      set on the stream flags.
      @param combOpFlags the combined stream and operation flags.
      @return the stream flags.</p></div>
<a id="L703" name="L703"></a> 703     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/29336.html" title="Multiple referred from 2 places.">toStreamFlags</a>(<strong class="reserved">int</strong> combOpFlags) <em class="brace">{</em>
<a id="L704" name="L704"></a> 704         <em class="comment">// By flipping the nibbles 0x11 become 0x00 and 0x01 become 0x10</em>
<a id="L705" name="L705"></a> 705         <em class="comment">// Shift left 1 to restore set flags and mask off anything other than the set flags</em>
<a id="L706" name="L706"></a> 706         <strong class="reserved">return</strong> ((~combOpFlags) &gt;&gt; 1) &amp; FLAG_MASK_IS &amp; combOpFlags;
<a id="L707" name="L707"></a> 707     <em class="brace">}</em>
<a id="L708" name="L708"></a> 708 
<div class="comment">
      Converts stream flags to a spliterator characteristic bit set.
      @param streamFlags the stream flags.
      @return the spliterator characteristic bit set.</div>
<a id="L715" name="L715"></a> 715     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../S/893.html#L240" title="Referred from 240 in src/java/util/stream/StreamSpliterators.java.">toCharacteristics</a>(<strong class="reserved">int</strong> streamFlags) <em class="brace">{</em>
<a id="L716" name="L716"></a> 716         <strong class="reserved">return</strong> streamFlags &amp; SPLITERATOR_CHARACTERISTICS_MASK;
<a id="L717" name="L717"></a> 717     <em class="brace">}</em>
<a id="L718" name="L718"></a> 718 
<div class="comment">
      Converts a spliterator characteristic bit set to stream flags.
      @implSpec
      If the spliterator is naturally <code>SORTED</code> (the associated
      <code>Comparator</code> is <code>null</code>) then the characteristic is converted
      to the <a href="#L268" title="Defined at 268.">SORTED</a> flag, otherwise the characteristic is not
      converted.
      @param spliterator the spliterator from which to obtain characteristic
             bit set.
      @return the stream flags.</div>
<a id="L732" name="L732"></a> 732     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/14802.html" title="Multiple referred from 8 places.">fromCharacteristics</a>(<a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>&lt;?&gt; <a href="../D/34729.html" title="Multiple defined in 111 places.">spliterator</a>) <em class="brace">{</em>
<a id="L733" name="L733"></a> 733         <strong class="reserved">int</strong> <a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a> = <a href="../D/34729.html" title="Multiple defined in 111 places.">spliterator</a>.<a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a>();
<a id="L734" name="L734"></a> 734         <strong class="reserved">if</strong> ((<a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a> &amp; <a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../S/915.html#L268" title="Defined at 268 in src/java/util/stream/StreamOpFlag.java.">SORTED</a>) != 0 &amp;&amp; <a href="../D/34729.html" title="Multiple defined in 111 places.">spliterator</a>.<a href="../D/17847.html" title="Multiple defined in 26 places.">getComparator</a>() != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L735" name="L735"></a> 735             <em class="comment">// Do not propagate the SORTED characteristic if it does not correspond</em>
<a id="L736" name="L736"></a> 736             <em class="comment">// to a natural sort order</em>
<a id="L737" name="L737"></a> 737             <strong class="reserved">return</strong> <a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a> &amp; SPLITERATOR_CHARACTERISTICS_MASK &amp; ~<a href="../S/1151.html#L296" title="Defined at 296 in src/java/util/Spliterator.java.">Spliterator</a>.<a href="../S/915.html#L268" title="Defined at 268 in src/java/util/stream/StreamOpFlag.java.">SORTED</a>;
<a id="L738" name="L738"></a> 738         <em class="brace">}</em>
<a id="L739" name="L739"></a> 739         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L740" name="L740"></a> 740             <strong class="reserved">return</strong> <a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a> &amp; SPLITERATOR_CHARACTERISTICS_MASK;
<a id="L741" name="L741"></a> 741         <em class="brace">}</em>
<a id="L742" name="L742"></a> 742     <em class="brace">}</em>
<a id="L743" name="L743"></a> 743 
<div class="comment">
      Converts a spliterator characteristic bit set to stream flags.
      @param characteristics the spliterator characteristic bit set.
      @return the stream flags.</div>
<a id="L750" name="L750"></a> 750     <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/14802.html" title="Multiple referred from 8 places.">fromCharacteristics</a>(<strong class="reserved">int</strong> <a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a>) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751         <strong class="reserved">return</strong> <a href="../D/12338.html" title="Multiple defined in 75 places.">characteristics</a> &amp; SPLITERATOR_CHARACTERISTICS_MASK;
<a id="L752" name="L752"></a> 752     <em class="brace">}</em>
<a id="L753" name="L753"></a> 753 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L247">[^]</a><a href="#L750">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
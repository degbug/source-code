<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/serializer/CharInfo.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L370">[^]</a><a href="#L739">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L370" title="Defined at 370.">defineEntity</a></li>
<li><a href="#L402" title="Defined at 402.">getOutputStringForChar</a></li>
<li><a href="#L419" title="Defined at 419.">isSpecialAttrChar</a></li>
<li><a href="#L442" title="Defined at 442.">isSpecialTextChar</a></li>
<li><a href="#L462" title="Defined at 462.">isTextASCIIClean</a></li>
<li><a href="#L479" title="Defined at 479.">getCharInfoInternal</a></li>
<li><a href="#L513" title="Defined at 513.">getCharInfo</a></li>
<li><a href="#L545" title="Defined at 545.">arrayIndex</a></li>
<li><a href="#L554" title="Defined at 554.">bit</a></li>
<li><a href="#L563" title="Defined at 563.">createEmptySetOfIntegers</a></li>
<li><a href="#L577" title="Defined at 577.">set</a></li>
<li><a href="#L600" title="Defined at 600.">get</a></li>
<li><a href="#L620" title="Defined at 620.">extraEntity</a></li>
<li><a href="#L645" title="Defined at 645.">setASCIIdirty</a></li>
<li><a href="#L660" title="Defined at 660.">setASCIIclean</a></li>
<li><a href="#L669" title="Defined at 669.">defineChar2StringMapping</a></li>
<li><a href="#L715" title="Defined at 715.">setChar</a></li>
<li><a href="#L727" title="Defined at 727.">hashCode</a></li>
<li><a href="#L739" title="Defined at 739.">equals</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 1999-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: CharInfo.java,v 1.2.4.1 2005/09/15 08:15:14 suresh_emailid Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.serializer;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.utils.SecuritySupport;
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.serializer.utils.MsgKey;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.serializer.utils.SystemIDResolver;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.serializer.utils.Utils;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.serializer.utils.WrappedRuntimeException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.io.BufferedReader;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.io.InputStream;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.io.InputStreamReader;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.io.UnsupportedEncodingException;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.net.URL;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.util.Locale;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.util.PropertyResourceBundle;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.util.ResourceBundle;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> javax.xml.transform.TransformerException;
<a id="L41" name="L41"></a>  41 
<div class="comment">
  This class provides services that tell if a character should have
  special treatement, such as entity reference substitution or normalization
  of a newline character.  It also provides character to entity reference
  lookup.
  DEVELOPERS: See Known Issue in the constructor.
  @xsl.usage internal</div>
<a id="L52" name="L52"></a>  52 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/1260.html" title="Multiple referred from 17 places.">CharInfo</a>
<a id="L53" name="L53"></a>  53 <em class="brace">{</em>
<div class="comment">
     /** Given a character, lookup a String to output (e.g. a decorated entity reference). */</div>
<a id="L55" name="L55"></a>  55     <strong class="reserved">private</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a> m_charToString = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>();
<a id="L56" name="L56"></a>  56 
<div class="comment">
      The name of the HTML entities file.
      If specified, the file will be resource loaded with the default class loader.</div>
<a id="L61" name="L61"></a>  61     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> HTML_ENTITIES_RESOURCE =
<a id="L62" name="L62"></a>  62                 "com.sun.org.apache.xml.internal.serializer.HTMLEntities";
<a id="L63" name="L63"></a>  63 
<div class="comment">
      The name of the XML entities file.
      If specified, the file will be resource loaded with the default class loader.</div>
<a id="L68" name="L68"></a>  68     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> XML_ENTITIES_RESOURCE =
<a id="L69" name="L69"></a>  69                 "com.sun.org.apache.xml.internal.serializer.XMLEntities";
<a id="L70" name="L70"></a>  70 
<div class="comment">
     /** The horizontal tab character, which the parser should always normalize. */</div>
<a id="L72" name="L72"></a>  72     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> S_HORIZONAL_TAB = 0x09;
<a id="L73" name="L73"></a>  73 
<div class="comment">
     /** The linefeed character, which the parser should always normalize. */</div>
<a id="L75" name="L75"></a>  75     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> S_LINEFEED = 0x0A;
<a id="L76" name="L76"></a>  76 
<div class="comment">
     /** The carriage return character, which the parser should always normalize. */</div>
<a id="L78" name="L78"></a>  78     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">char</strong> S_CARRIAGERETURN = 0x0D;
<a id="L79" name="L79"></a>  79 
<div class="comment">
 This flag is an optimization for HTML entities. It false if entities
      other than quot (34), amp (38), lt (60) and gt (62) are defined
      in the range 0 to 127.
      @xsl.usage internal</div>
<a id="L85" name="L85"></a>  85     <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> onlyQuotAmpLtGt;
<a id="L86" name="L86"></a>  86 
<div class="comment">
     /** Copy the first 0,1 ... ASCII_MAX values into an array */</div>
<a id="L88" name="L88"></a>  88     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ASCII_MAX = 128;
<a id="L89" name="L89"></a>  89 
<div class="comment">
 Array of values is faster access than a set of bits
      to quickly check ASCII characters in attribute values.</div>
<a id="L93" name="L93"></a>  93     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong>[] isSpecialAttrASCII = <strong class="reserved">new</strong> <strong class="reserved">boolean</strong>[ASCII_MAX];
<a id="L94" name="L94"></a>  94 
<div class="comment">
 Array of values is faster access than a set of bits
      to quickly check ASCII characters in text nodes.</div>
<a id="L98" name="L98"></a>  98     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong>[] isSpecialTextASCII = <strong class="reserved">new</strong> <strong class="reserved">boolean</strong>[ASCII_MAX];
<a id="L99" name="L99"></a>  99 
<a id="L100" name="L100"></a> 100     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong>[] isCleanTextASCII = <strong class="reserved">new</strong> <strong class="reserved">boolean</strong>[ASCII_MAX];
<a id="L101" name="L101"></a> 101 
<div class="comment">
 An array of bits to record if the character is in the set.
      Although information in this array is complete, the
      isSpecialAttrASCII array is used first because access to its values
      is common and faster.</div>
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> <strong class="reserved">int</strong> array_of_bits[] = <a href="../S/5546.html#L563" title="Defined at 563 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">createEmptySetOfIntegers</a>(65535);
<a id="L108" name="L108"></a> 108 
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110     <em class="comment">// 5 for 32 bit words,  6 for 64 bit words ...</em>
<div class="comment">
      This constant is used to shift an integer to quickly
      calculate which element its bit is stored in.
      5 for 32 bit words (int) ,  6 for 64 bit words (long)</div>
<a id="L116" name="L116"></a> 116     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SHIFT_PER_WORD = 5;
<a id="L117" name="L117"></a> 117 
<div class="comment">
      A mask to get the low order bits which are used to
      calculate the value of the bit within a given word,
      that will represent the presence of the integer in the
      set.
      0x1F for 32 bit words (int),
      or 0x3F for 64 bit words (long)</div>
<a id="L127" name="L127"></a> 127     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> LOW_ORDER_BITMASK = 0x1f;
<a id="L128" name="L128"></a> 128 
<div class="comment">
      This is used for optimizing the lookup of bits representing
      the integers in the set. It is the index of the first element
      in the array array_of_bits[] that is not used.</div>
<a id="L134" name="L134"></a> 134     <strong class="reserved">private</strong> <strong class="reserved">int</strong> firstWordNotUsed;
<a id="L135" name="L135"></a> 135 
<a id="L136" name="L136"></a> 136 
<div class="comment">
      Constructor that reads in a resource file that describes the mapping of
      characters to entity references.
      This constructor is private, just to force the use
      of the getCharInfo(entitiesResource) factory
      Resource files must be encoded in UTF-8 and can either be properties
      files with a .properties extension assumed.  Alternatively, they can
      have the following form, with no particular extension assumed:
      <pre>      # First char # is a comment
      Entity numericValue
      quot 34
      amp 38
      </pre>
      @param entitiesResource Name of properties or resource file that should
      be loaded, which describes that mapping of characters to entity
      references.</div>
<a id="L158" name="L158"></a> 158     <strong class="reserved">private</strong> CharInfo(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entitiesResource, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> method)
<a id="L159" name="L159"></a> 159     <em class="brace">{</em>
<a id="L160" name="L160"></a> 160         <strong class="reserved">this</strong>(entitiesResource, method, <strong class="reserved">false</strong>);
<a id="L161" name="L161"></a> 161     <em class="brace">}</em>
<a id="L162" name="L162"></a> 162 
<a id="L163" name="L163"></a> 163     <strong class="reserved">private</strong> CharInfo(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entitiesResource, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> method, <strong class="reserved">boolean</strong> internal)
<a id="L164" name="L164"></a> 164     <em class="brace">{</em>
<a id="L165" name="L165"></a> 165         <a href="../S/853.html#L287" title="Defined at 287 in src/java/util/ResourceBundle.java.">ResourceBundle</a> entities = <strong class="reserved">null</strong>;
<a id="L166" name="L166"></a> 166         <strong class="reserved">boolean</strong> noExtraEntities = <strong class="reserved">true</strong>;
<a id="L167" name="L167"></a> 167 
<a id="L168" name="L168"></a> 168         <em class="comment">// Make various attempts to interpret the parameter as a properties</em>
<a id="L169" name="L169"></a> 169         <em class="comment">// file or resource file, as follows:</em>
<a id="L170" name="L170"></a> 170         <em class="comment">//</em>
<a id="L171" name="L171"></a> 171         <em class="comment">//   1) attempt to load .properties file using ResourceBundle</em>
<a id="L172" name="L172"></a> 172         <em class="comment">//   2) try using the class loader to find the specified file a resource</em>
<a id="L173" name="L173"></a> 173         <em class="comment">//      file</em>
<a id="L174" name="L174"></a> 174         <em class="comment">//   3) try treating the resource a URI</em>
<a id="L175" name="L175"></a> 175 
<a id="L176" name="L176"></a> 176         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L177" name="L177"></a> 177             <strong class="reserved">if</strong> (internal) <em class="brace">{</em>
<a id="L178" name="L178"></a> 178                 <em class="comment">// Load entity property files by using PropertyResourceBundle,</em>
<a id="L179" name="L179"></a> 179                 <em class="comment">// cause of security issure for applets</em>
<a id="L180" name="L180"></a> 180                 entities = <a href="../S/1163.html#L122" title="Defined at 122 in src/java/util/PropertyResourceBundle.java.">PropertyResourceBundle</a>.<a href="../D/17375.html" title="Multiple defined in 6 places.">getBundle</a>(entitiesResource);
<a id="L181" name="L181"></a> 181             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L182" name="L182"></a> 182                 <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> cl = <a href="../D/7684.html" title="Multiple defined in 12 places.">SecuritySupport</a>.<a href="../D/17977.html" title="Multiple defined in 21 places.">getContextClassLoader</a>();
<a id="L183" name="L183"></a> 183                 <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L184" name="L184"></a> 184                     entities = <a href="../S/1163.html#L122" title="Defined at 122 in src/java/util/PropertyResourceBundle.java.">PropertyResourceBundle</a>.<a href="../D/17375.html" title="Multiple defined in 6 places.">getBundle</a>(entitiesResource,
<a id="L185" name="L185"></a> 185                             <a href="../S/1034.html#L484" title="Defined at 484 in src/java/util/Locale.java.">Locale</a>.<a href="../D/18273.html" title="Multiple defined in 13 places.">getDefault</a>(), cl);
<a id="L186" name="L186"></a> 186                 <em class="brace">}</em>
<a id="L187" name="L187"></a> 187             <em class="brace">}</em>
<a id="L188" name="L188"></a> 188         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em><em class="brace">}</em>
<a id="L189" name="L189"></a> 189 
<a id="L190" name="L190"></a> 190         <strong class="reserved">if</strong> (entities != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L191" name="L191"></a> 191             <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a> = entities.<a href="../D/19965.html" title="Multiple defined in 6 places.">getKeys</a>();
<a id="L192" name="L192"></a> 192             <strong class="reserved">while</strong> (<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>())<em class="brace">{</em>
<a id="L193" name="L193"></a> 193                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L194" name="L194"></a> 194                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = entities.<a href="../D/22769.html" title="Multiple defined in 35 places.">getString</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L195" name="L195"></a> 195                 <strong class="reserved">int</strong> code = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L196" name="L196"></a> 196                 <a href="../D/14768.html" title="Multiple defined in 3 places.">defineEntity</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, (<strong class="reserved">char</strong>) code);
<a id="L197" name="L197"></a> 197                 <strong class="reserved">if</strong> (<a href="../S/5546.html#L620" title="Defined at 620 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">extraEntity</a>(code))
<a id="L198" name="L198"></a> 198                     noExtraEntities = <strong class="reserved">false</strong>;
<a id="L199" name="L199"></a> 199             <em class="brace">}</em>
<a id="L200" name="L200"></a> 200             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(S_LINEFEED);
<a id="L201" name="L201"></a> 201             <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(S_CARRIAGERETURN);
<a id="L202" name="L202"></a> 202         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L203" name="L203"></a> 203             <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = <strong class="reserved">null</strong>;
<a id="L204" name="L204"></a> 204             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> err = <strong class="reserved">null</strong>;
<a id="L205" name="L205"></a> 205 
<a id="L206" name="L206"></a> 206             <em class="comment">// Load user specified resource file by using URL loading, it</em>
<a id="L207" name="L207"></a> 207             <em class="comment">// requires a valid URI as parameter</em>
<a id="L208" name="L208"></a> 208             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L209" name="L209"></a> 209                 <strong class="reserved">if</strong> (internal) <em class="brace">{</em>
<a id="L210" name="L210"></a> 210                     <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a>.<strong class="reserved">class</strong>.<a href="../D/22045.html" title="Multiple defined in 30 places.">getResourceAsStream</a>(entitiesResource);
<a id="L211" name="L211"></a> 211                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L212" name="L212"></a> 212                     <a href="../D/1519.html" title="Multiple defined in 2 places.">ClassLoader</a> cl = <a href="../D/7684.html" title="Multiple defined in 12 places.">SecuritySupport</a>.<a href="../D/17977.html" title="Multiple defined in 21 places.">getContextClassLoader</a>();
<a id="L213" name="L213"></a> 213                     <strong class="reserved">if</strong> (cl != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L214" name="L214"></a> 214                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L215" name="L215"></a> 215                             <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = cl.<a href="../D/22045.html" title="Multiple defined in 30 places.">getResourceAsStream</a>(entitiesResource);
<a id="L216" name="L216"></a> 216                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L217" name="L217"></a> 217                             err = e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>();
<a id="L218" name="L218"></a> 218                         <em class="brace">}</em>
<a id="L219" name="L219"></a> 219                     <em class="brace">}</em>
<a id="L220" name="L220"></a> 220 
<a id="L221" name="L221"></a> 221                     <strong class="reserved">if</strong> (<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L222" name="L222"></a> 222                         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L223" name="L223"></a> 223                             <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> url = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>(entitiesResource);
<a id="L224" name="L224"></a> 224                             <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> = url.<a href="../S/768.html#L1037" title="Defined at 1037 in src/java/net/URL.java.">openStream</a>();
<a id="L225" name="L225"></a> 225                         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L226" name="L226"></a> 226                             err = e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>();
<a id="L227" name="L227"></a> 227                         <em class="brace">}</em>
<a id="L228" name="L228"></a> 228                     <em class="brace">}</em>
<a id="L229" name="L229"></a> 229                 <em class="brace">}</em>
<a id="L230" name="L230"></a> 230 
<a id="L231" name="L231"></a> 231                 <strong class="reserved">if</strong> (<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L232" name="L232"></a> 232                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L233" name="L233"></a> 233                         <a href="../D/9445.html" title="Multiple defined in 2 places.">Utils</a>.messages.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(
<a id="L234" name="L234"></a> 234                             <a href="../S/5578.html#L34" title="Defined at 34 in src/com/sun/org/apache/xml/internal/serializer/utils/MsgKey.java.">MsgKey</a>.ER_RESOURCE_COULD_NOT_FIND,
<a id="L235" name="L235"></a> 235                             <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em>entitiesResource, err<em class="brace">}</em>));
<a id="L236" name="L236"></a> 236                 <em class="brace">}</em>
<a id="L237" name="L237"></a> 237 
<a id="L238" name="L238"></a> 238                 <em class="comment">// Fix Bugzilla#4000: force reading in UTF-8</em>
<a id="L239" name="L239"></a> 239                 <em class="comment">//  This creates the de facto standard that Xalan's resource</em>
<a id="L240" name="L240"></a> 240                 <em class="comment">//  files must be encoded in UTF-8. This should work in all</em>
<a id="L241" name="L241"></a> 241                 <em class="comment">// JVMs.</em>
<a id="L242" name="L242"></a> 242                 <em class="comment">//</em>
<a id="L243" name="L243"></a> 243                 <em class="comment">// %REVIEW% KNOWN ISSUE: IT FAILS IN MICROSOFT VJ++, which</em>
<a id="L244" name="L244"></a> 244                 <em class="comment">// didn't implement the UTF-8 encoding. Theoretically, we should</em>
<a id="L245" name="L245"></a> 245                 <em class="comment">// simply let it fail in that case, since the JVM is obviously</em>
<a id="L246" name="L246"></a> 246                 <em class="comment">// broken if it doesn't support such a basic standard.  But</em>
<a id="L247" name="L247"></a> 247                 <em class="comment">// since there are still some users attempting to use VJ++ for</em>
<a id="L248" name="L248"></a> 248                 <em class="comment">// development, we have dropped in a fallback which makes a</em>
<a id="L249" name="L249"></a> 249                 <em class="comment">// second attempt using the platform's default encoding. In VJ++</em>
<a id="L250" name="L250"></a> 250                 <em class="comment">// this is apparently ASCII, which is subset of UTF-8... and</em>
<a id="L251" name="L251"></a> 251                 <em class="comment">// since the strings we'll be reading here are also primarily</em>
<a id="L252" name="L252"></a> 252                 <em class="comment">// limited to the 7-bit ASCII range (at least, in English</em>
<a id="L253" name="L253"></a> 253                 <em class="comment">// versions of Xalan), this should work well enough to keep us</em>
<a id="L254" name="L254"></a> 254                 <em class="comment">// on the air until we're ready to officially decommit from</em>
<a id="L255" name="L255"></a> 255                 <em class="comment">// VJ++.</em>
<a id="L256" name="L256"></a> 256 
<a id="L257" name="L257"></a> 257                 <a href="../S/1395.html#L70" title="Defined at 70 in src/java/io/BufferedReader.java.">BufferedReader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>;
<a id="L258" name="L258"></a> 258                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L259" name="L259"></a> 259                     <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = <strong class="reserved">new</strong> <a href="../S/1395.html#L70" title="Defined at 70 in src/java/io/BufferedReader.java.">BufferedReader</a>(<strong class="reserved">new</strong> <a href="../S/1416.html#L62" title="Defined at 62 in src/java/io/InputStreamReader.java.">InputStreamReader</a>(<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>, "UTF-8"));
<a id="L260" name="L260"></a> 260                 <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1372.html#L33" title="Defined at 33 in src/java/io/UnsupportedEncodingException.java.">UnsupportedEncodingException</a> e) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261                     <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = <strong class="reserved">new</strong> <a href="../S/1395.html#L70" title="Defined at 70 in src/java/io/BufferedReader.java.">BufferedReader</a>(<strong class="reserved">new</strong> <a href="../S/1416.html#L62" title="Defined at 62 in src/java/io/InputStreamReader.java.">InputStreamReader</a>(<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>));
<a id="L262" name="L262"></a> 262                 <em class="brace">}</em>
<a id="L263" name="L263"></a> 263 
<a id="L264" name="L264"></a> 264                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>();
<a id="L265" name="L265"></a> 265 
<a id="L266" name="L266"></a> 266                 <strong class="reserved">while</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L267" name="L267"></a> 267                     <strong class="reserved">if</strong> (<a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() == 0 || <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(0) == '#') <em class="brace">{</em>
<a id="L268" name="L268"></a> 268                         <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>();
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270                         <strong class="reserved">continue</strong>;
<a id="L271" name="L271"></a> 271                     <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273                     <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(' ');
<a id="L274" name="L274"></a> 274 
<a id="L275" name="L275"></a> 275                     <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; 1) <em class="brace">{</em>
<a id="L276" name="L276"></a> 276                         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L277" name="L277"></a> 277 
<a id="L278" name="L278"></a> 278                         ++<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280                         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L282" name="L282"></a> 282                             <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(' ');
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284                             <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &gt; 0) <em class="brace">{</em>
<a id="L285" name="L285"></a> 285                                 <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L286" name="L286"></a> 286                             <em class="brace">}</em>
<a id="L287" name="L287"></a> 287 
<a id="L288" name="L288"></a> 288                             <strong class="reserved">int</strong> code = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/29148.html" title="Multiple defined in 9 places.">parseInt</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L289" name="L289"></a> 289 
<a id="L290" name="L290"></a> 290                             <a href="../D/14768.html" title="Multiple defined in 3 places.">defineEntity</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, (<strong class="reserved">char</strong>) code);
<a id="L291" name="L291"></a> 291                             <strong class="reserved">if</strong> (<a href="../S/5546.html#L620" title="Defined at 620 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">extraEntity</a>(code))
<a id="L292" name="L292"></a> 292                                 noExtraEntities = <strong class="reserved">false</strong>;
<a id="L293" name="L293"></a> 293                         <em class="brace">}</em>
<a id="L294" name="L294"></a> 294                     <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296                     <a href="../S/7696.html#L44" title="Defined at 44 in src/com/sun/javadoc/SourcePosition.java.">line</a> = <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30213.html" title="Multiple defined in 17 places.">readLine</a>();
<a id="L297" name="L297"></a> 297                 <em class="brace">}</em>
<a id="L298" name="L298"></a> 298 
<a id="L299" name="L299"></a> 299                 <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L300" name="L300"></a> 300                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(S_LINEFEED);
<a id="L301" name="L301"></a> 301                 <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(S_CARRIAGERETURN);
<a id="L302" name="L302"></a> 302             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(
<a id="L304" name="L304"></a> 304                     <a href="../D/9445.html" title="Multiple defined in 2 places.">Utils</a>.messages.<a href="../D/14043.html" title="Multiple defined in 4 places.">createMessage</a>(
<a id="L305" name="L305"></a> 305                         <a href="../S/5578.html#L34" title="Defined at 34 in src/com/sun/org/apache/xml/internal/serializer/utils/MsgKey.java.">MsgKey</a>.ER_RESOURCE_COULD_NOT_LOAD,
<a id="L306" name="L306"></a> 306                         <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>[] <em class="brace">{</em> entitiesResource,
<a id="L307" name="L307"></a> 307                                        e.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>(),
<a id="L308" name="L308"></a> 308                                        entitiesResource,
<a id="L309" name="L309"></a> 309                                        e.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>()<em class="brace">}</em>));
<a id="L310" name="L310"></a> 310             <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                 <strong class="reserved">if</strong> (<a href="../D/25134.html" title="Multiple defined in 5 places.">is</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L312" name="L312"></a> 312                     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L313" name="L313"></a> 313                         <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L314" name="L314"></a> 314                     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../S/235.html#L257" title="Defined at 257 in src/org/omg/CORBA/ServerRequest.java.">except</a>) <em class="brace">{</em><em class="brace">}</em>
<a id="L315" name="L315"></a> 315                 <em class="brace">}</em>
<a id="L316" name="L316"></a> 316             <em class="brace">}</em>
<a id="L317" name="L317"></a> 317         <em class="brace">}</em>
<a id="L318" name="L318"></a> 318 
<div class="comment">
 initialize the array isCleanTextASCII[] with a cache of values
          for use by ToStream.character(char[], int , int)
          and the array isSpecialTextASCII[] with the opposite values
          (all in the name of performance!)</div>
<a id="L324" name="L324"></a> 324         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> ch = 0; ch &lt;ASCII_MAX; ch++)
<a id="L325" name="L325"></a> 325         <strong class="reserved">if</strong>((((0x20 &lt;= ch || (0x0A == ch || 0x0D == ch || 0x09 == ch)))
<a id="L326" name="L326"></a> 326              &amp;&amp; (!<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(ch))) || ('"' == ch))
<a id="L327" name="L327"></a> 327         <em class="brace">{</em>
<a id="L328" name="L328"></a> 328             isCleanTextASCII[ch] = <strong class="reserved">true</strong>;
<a id="L329" name="L329"></a> 329             isSpecialTextASCII[ch] = <strong class="reserved">false</strong>;
<a id="L330" name="L330"></a> 330         <em class="brace">}</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L332" name="L332"></a> 332             isCleanTextASCII[ch] = <strong class="reserved">false</strong>;
<a id="L333" name="L333"></a> 333             isSpecialTextASCII[ch] = <strong class="reserved">true</strong>;
<a id="L334" name="L334"></a> 334         <em class="brace">}</em>
<a id="L335" name="L335"></a> 335 
<a id="L336" name="L336"></a> 336 
<a id="L337" name="L337"></a> 337 
<a id="L338" name="L338"></a> 338         onlyQuotAmpLtGt = noExtraEntities;
<a id="L339" name="L339"></a> 339 
<a id="L340" name="L340"></a> 340         <em class="comment">// initialize the array with a cache of the BitSet values</em>
<a id="L341" name="L341"></a> 341         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;ASCII_MAX; i++)
<a id="L342" name="L342"></a> 342             isSpecialAttrASCII[i] = <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L343" name="L343"></a> 343 
<div class="comment">
 Now that we've used get(ch) just above to initialize the
          two arrays we will change by adding a tab to the set of
          special chars for XML (but not HTML!).
          We do this because a tab is always a
          special character in an XML attribute,
          but only a special character in XML text
          if it has an entity defined for it.
          This is the reason for this delay.</div>
<a id="L353" name="L353"></a> 353         <strong class="reserved">if</strong> (<a href="../D/5605.html" title="Multiple defined in 4 places.">Method</a>.XML.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(method))
<a id="L354" name="L354"></a> 354         <em class="brace">{</em>
<a id="L355" name="L355"></a> 355             isSpecialAttrASCII[S_HORIZONAL_TAB] = <strong class="reserved">true</strong>;
<a id="L356" name="L356"></a> 356         <em class="brace">}</em>
<a id="L357" name="L357"></a> 357     <em class="brace">}</em>
<a id="L358" name="L358"></a> 358 
<div class="comment">
      Defines a new character reference. The reference's name and value are
      supplied. Nothing happens if the character reference is already defined.
      <p>Unlike internal entities, character references are a string to single
      character mapping. They are used to map non-ASCII characters both on
      parsing and printing, primarily for HTML documents. '&lt;amp;' is an
      example of a character reference.</p>
      @param name The entity's name
      @param value The entity's value</div>
<a id="L370" name="L370"></a> 370     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13180.html" title="Multiple referred from 5 places.">defineEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">char</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L371" name="L371"></a> 371     <em class="brace">{</em>
<a id="L372" name="L372"></a> 372         <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> sb = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>("&amp;");
<a id="L373" name="L373"></a> 373         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L374" name="L374"></a> 374         sb.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(';');
<a id="L375" name="L375"></a> 375         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityString = sb.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L376" name="L376"></a> 376 
<a id="L377" name="L377"></a> 377         <a href="../S/5546.html#L669" title="Defined at 669 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">defineChar2StringMapping</a>(entityString, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L378" name="L378"></a> 378     <em class="brace">}</em>
<a id="L379" name="L379"></a> 379 
<div class="comment">
      Map a character to a String. For example given
      the character '&gt;' this method would return the fully decorated
      entity name "&lt;".
      Strings for entity references are loaded from a properties file,
      but additional mappings defined through calls to defineChar2String()
      are possible. Such entity reference mappings could be over-ridden.
      This is reusing a stored key object, in an effort to avoid
      heap activity. Unfortunately, that introduces a threading risk.
      Simplest fix for now is to make it a synchronized method, or to give
      up the reuse; I see very little performance difference between them.
      Long-term solution would be to replace the hashtable with a sparse array
      keyed directly from the character's integer value; see DTM's
      string pool for a related solution.
      @param value The character that should be resolved to
      a String, e.g. resolve '&gt;' to  "&lt;".
      @return The String that the character is mapped to, or null if not found.
      @xsl.usage internal</div>
<a id="L402" name="L402"></a> 402     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/18194.html" title="Multiple referred from 2 places.">getOutputStringForChar</a>(<strong class="reserved">char</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L403" name="L403"></a> 403     <em class="brace">{</em>
<a id="L404" name="L404"></a> 404         <a href="../D/1383.html" title="Multiple defined in 2 places.">CharKey</a> charKey = <strong class="reserved">new</strong> <a href="../D/1383.html" title="Multiple defined in 2 places.">CharKey</a>();
<a id="L405" name="L405"></a> 405         charKey.<a href="../D/32129.html" title="Multiple defined in 4 places.">setChar</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L406" name="L406"></a> 406         <strong class="reserved">return</strong> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) m_charToString.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(charKey);
<a id="L407" name="L407"></a> 407     <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<div class="comment">
      Tell if the character argument that is from
      an attribute value should have special treatment.
      @param value the value of a character that is in an attribute value
      @return true if the character should have any special treatment,
      such as when writing out attribute values,
      or entity references.
      @xsl.usage internal</div>
<a id="L419" name="L419"></a> 419     <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/22039.html" title="Multiple referred from 4 places.">isSpecialAttrChar</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L420" name="L420"></a> 420     <em class="brace">{</em>
<a id="L421" name="L421"></a> 421         <em class="comment">// for performance try the values in the boolean array first,</em>
<a id="L422" name="L422"></a> 422         <em class="comment">// this is faster access than the BitSet for common ASCII values</em>
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt; ASCII_MAX)
<a id="L425" name="L425"></a> 425             <strong class="reserved">return</strong> isSpecialAttrASCII[<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>];
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427         <em class="comment">// rather than java.util.BitSet, our private</em>
<a id="L428" name="L428"></a> 428         <em class="comment">// implementation is faster (and less general).</em>
<a id="L429" name="L429"></a> 429         <strong class="reserved">return</strong> <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L430" name="L430"></a> 430     <em class="brace">}</em>
<a id="L431" name="L431"></a> 431 
<div class="comment">
      Tell if the character argument that is from a
      text node should have special treatment.
      @param value the value of a character that is in a text node
      @return true if the character should have any special treatment,
      such as when writing out attribute values,
      or entity references.
      @xsl.usage internal</div>
<a id="L442" name="L442"></a> 442     <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/22041.html" title="Multiple referred from 3 places.">isSpecialTextChar</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L443" name="L443"></a> 443     <em class="brace">{</em>
<a id="L444" name="L444"></a> 444         <em class="comment">// for performance try the values in the boolean array first,</em>
<a id="L445" name="L445"></a> 445         <em class="comment">// this is faster access than the BitSet for common ASCII values</em>
<a id="L446" name="L446"></a> 446 
<a id="L447" name="L447"></a> 447         <strong class="reserved">if</strong> (<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> &lt; ASCII_MAX)
<a id="L448" name="L448"></a> 448             <strong class="reserved">return</strong> isSpecialTextASCII[<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>];
<a id="L449" name="L449"></a> 449 
<a id="L450" name="L450"></a> 450         <em class="comment">// rather than java.util.BitSet, our private</em>
<a id="L451" name="L451"></a> 451         <em class="comment">// implementation is faster (and less general).</em>
<a id="L452" name="L452"></a> 452         <strong class="reserved">return</strong> <a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L453" name="L453"></a> 453     <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<div class="comment">
      This method is used to determine if an ASCII character in
      a text node (not an attribute value) is "clean".
      @param value the character to check (0 to 127).
      @return true if the character can go to the writer as-is
      @xsl.usage internal</div>
<a id="L462" name="L462"></a> 462     <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/22102.html" title="Multiple referred from 2 places.">isTextASCIIClean</a>(<strong class="reserved">int</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>)
<a id="L463" name="L463"></a> 463     <em class="brace">{</em>
<a id="L464" name="L464"></a> 464         <strong class="reserved">return</strong> isCleanTextASCII[<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>];
<a id="L465" name="L465"></a> 465     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<a id="L467" name="L467"></a> 467 
<div class="comment">
      Read an internal resource file that describes the mapping of
      characters to entity references; Construct a CharInfo object.
      @param entitiesFileName Name of entities resource file that should
      be loaded, which describes the mapping of characters to entity references.
      @param method the output method type, which should be one of "xml", "html", and "text".
      @return an instance of CharInfo
      @xsl.usage internal</div>
<a id="L479" name="L479"></a> 479     <strong class="reserved">static</strong> <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a> <a href="../R/15510.html" title="Multiple referred from 2 places.">getCharInfoInternal</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entitiesFileName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> method)
<a id="L480" name="L480"></a> 480     <em class="brace">{</em>
<a id="L481" name="L481"></a> 481         <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a> charInfo = (<a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a>) m_getCharInfoCache.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(entitiesFileName);
<a id="L482" name="L482"></a> 482         <strong class="reserved">if</strong> (charInfo != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L483" name="L483"></a> 483             <strong class="reserved">return</strong> charInfo;
<a id="L484" name="L484"></a> 484         <em class="brace">}</em>
<a id="L485" name="L485"></a> 485 
<a id="L486" name="L486"></a> 486         charInfo = <strong class="reserved">new</strong> <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a>(entitiesFileName, method, <strong class="reserved">true</strong>);
<a id="L487" name="L487"></a> 487         m_getCharInfoCache.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(entitiesFileName, charInfo);
<a id="L488" name="L488"></a> 488         <strong class="reserved">return</strong> charInfo;
<a id="L489" name="L489"></a> 489     <em class="brace">}</em>
<a id="L490" name="L490"></a> 490 
<div class="comment">
      Constructs a CharInfo object using the following process to try reading
      the entitiesFileName parameter:
        1) attempt to load it as a ResourceBundle
        2) try using the class loader to find the specified file
        3) try opening it as an URI
      In case of 2 and 3, the resource file must be encoded in UTF-8 and have the
      following format:
      <pre>      # First char # is a comment
      Entity numericValue
      quot 34
      amp 38
      </pre>
      @param entitiesFileName Name of entities resource file that should
      be loaded, which describes the mapping of characters to entity references.
      @param method the output method type, which should be one of "xml", "html", and "text".
      @return an instance of CharInfo</div>
<a id="L513" name="L513"></a> 513     <strong class="reserved">static</strong> <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a> <a href="../S/5551.html#L557" title="Referred from 557 in src/com/sun/org/apache/xml/internal/serializer/ToStream.java.">getCharInfo</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entitiesFileName, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> method)
<a id="L514" name="L514"></a> 514     <em class="brace">{</em>
<a id="L515" name="L515"></a> 515         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L516" name="L516"></a> 516             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a>(entitiesFileName, method, <strong class="reserved">false</strong>);
<a id="L517" name="L517"></a> 517         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em><em class="brace">}</em>
<a id="L518" name="L518"></a> 518 
<a id="L519" name="L519"></a> 519         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> absoluteEntitiesFileName;
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521         <strong class="reserved">if</strong> (entitiesFileName.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>(':') &lt; 0) <em class="brace">{</em>
<a id="L522" name="L522"></a> 522             absoluteEntitiesFileName =
<a id="L523" name="L523"></a> 523                 <a href="../D/8695.html" title="Multiple defined in 2 places.">SystemIDResolver</a>.<a href="../D/16702.html" title="Multiple defined in 2 places.">getAbsoluteURIFromRelative</a>(entitiesFileName);
<a id="L524" name="L524"></a> 524         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L525" name="L525"></a> 525             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L526" name="L526"></a> 526                 absoluteEntitiesFileName =
<a id="L527" name="L527"></a> 527                     <a href="../D/8695.html" title="Multiple defined in 2 places.">SystemIDResolver</a>.<a href="../D/16701.html" title="Multiple defined in 4 places.">getAbsoluteURI</a>(entitiesFileName, <strong class="reserved">null</strong>);
<a id="L528" name="L528"></a> 528             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/4051.html#L35" title="Defined at 35 in src/javax/xml/transform/TransformerException.java.">TransformerException</a> te) <em class="brace">{</em>
<a id="L529" name="L529"></a> 529                 <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/9772.html" title="Multiple defined in 2 places.">WrappedRuntimeException</a>(te);
<a id="L530" name="L530"></a> 530             <em class="brace">}</em>
<a id="L531" name="L531"></a> 531         <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<a id="L533" name="L533"></a> 533         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/5546.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">CharInfo</a>(absoluteEntitiesFileName, method, <strong class="reserved">false</strong>);
<a id="L534" name="L534"></a> 534     <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<div class="comment">
     /** Table of user-specified char infos. */</div>
<a id="L537" name="L537"></a> 537     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a> m_getCharInfoCache = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>();
<a id="L538" name="L538"></a> 538 
<div class="comment">
      Returns the array element holding the bit value for the
      given integer
      @param i the integer that might be in the set of integers</div>
<a id="L545" name="L545"></a> 545     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/10321.html" title="Multiple referred from 5 places.">arrayIndex</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L546" name="L546"></a> 546         <strong class="reserved">return</strong> (i &gt;&gt; SHIFT_PER_WORD);
<a id="L547" name="L547"></a> 547     <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<div class="comment">
      For a given integer in the set it returns the single bit
      value used within a given word that represents whether
      the integer is in the set or not.</div>
<a id="L554" name="L554"></a> 554     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">int</strong> <a href="../R/10623.html" title="Multiple referred from 40 places.">bit</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L555" name="L555"></a> 555         <strong class="reserved">int</strong> ret = (1 &lt;&lt; (i &amp; LOW_ORDER_BITMASK));
<a id="L556" name="L556"></a> 556         <strong class="reserved">return</strong> ret;
<a id="L557" name="L557"></a> 557     <em class="brace">}</em>
<a id="L558" name="L558"></a> 558 
<div class="comment">
      Creates a new empty set of integers (characters)
      @param max the maximum integer to be in the set.</div>
<a id="L563" name="L563"></a> 563     <strong class="reserved">private</strong> <strong class="reserved">int</strong>[] <a href="../S/5546.html#L107" title="Referred from 107 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">createEmptySetOfIntegers</a>(<strong class="reserved">int</strong> <a href="../D/27569.html" title="Multiple defined in 28 places.">max</a>) <em class="brace">{</em>
<a id="L564" name="L564"></a> 564         firstWordNotUsed = 0; <em class="comment">// an optimization</em>
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566         <strong class="reserved">int</strong>[] arr = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../S/5546.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">arrayIndex</a>(<a href="../D/27569.html" title="Multiple defined in 28 places.">max</a> - 1) + 1];
<a id="L567" name="L567"></a> 567             <strong class="reserved">return</strong> arr;
<a id="L568" name="L568"></a> 568 
<a id="L569" name="L569"></a> 569     <em class="brace">}</em>
<a id="L570" name="L570"></a> 570 
<div class="comment">
      Adds the integer (character) to the set of integers.
      @param i the integer to add to the set, valid values are
      0, 1, 2 ... up to the maximum that was specified at
      the creation of the set.</div>
<a id="L577" name="L577"></a> 577     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/26855.html" title="Multiple referred from 752 places.">set</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L578" name="L578"></a> 578         <a href="../S/5546.html#L645" title="Defined at 645 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">setASCIIdirty</a>(i);
<a id="L579" name="L579"></a> 579 
<a id="L580" name="L580"></a> 580         <strong class="reserved">int</strong> j = (i &gt;&gt; SHIFT_PER_WORD); <em class="comment">// this word is used</em>
<a id="L581" name="L581"></a> 581         <strong class="reserved">int</strong> k = j + 1;
<a id="L582" name="L582"></a> 582 
<a id="L583" name="L583"></a> 583         <strong class="reserved">if</strong>(firstWordNotUsed &lt; k) <em class="comment">// for optimization purposes.</em>
<a id="L584" name="L584"></a> 584             firstWordNotUsed = k;
<a id="L585" name="L585"></a> 585 
<a id="L586" name="L586"></a> 586         array_of_bits[j] |= (1 &lt;&lt; (i &amp; LOW_ORDER_BITMASK));
<a id="L587" name="L587"></a> 587     <em class="brace">}</em>
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589 
<div class="comment">
      Return true if the integer (character)is in the set of integers.
      This implementation uses an array of integers with 32 bits per
      integer.  If a bit is set to 1 the corresponding integer is
      in the set of integers.
      @param i an integer that is tested to see if it is the
      set of integers, or not.</div>
<a id="L600" name="L600"></a> 600     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/14874.html" title="Multiple referred from 4230 places.">get</a>(<strong class="reserved">int</strong> i) <em class="brace">{</em>
<a id="L601" name="L601"></a> 601 
<a id="L602" name="L602"></a> 602         <strong class="reserved">boolean</strong> in_the_set = <strong class="reserved">false</strong>;
<a id="L603" name="L603"></a> 603         <strong class="reserved">int</strong> j = (i &gt;&gt; SHIFT_PER_WORD); <em class="comment">// wordIndex(i)</em>
<a id="L604" name="L604"></a> 604         <em class="comment">// an optimization here, ... a quick test to see</em>
<a id="L605" name="L605"></a> 605         <em class="comment">// if this integer is beyond any of the words in use</em>
<a id="L606" name="L606"></a> 606         <strong class="reserved">if</strong>(j &lt; firstWordNotUsed)
<a id="L607" name="L607"></a> 607             in_the_set = (array_of_bits[j] &amp;
<a id="L608" name="L608"></a> 608                           (1 &lt;&lt; (i &amp; LOW_ORDER_BITMASK))
<a id="L609" name="L609"></a> 609             ) != 0;  <em class="comment">// 0L for 64 bit words</em>
<a id="L610" name="L610"></a> 610         <strong class="reserved">return</strong> in_the_set;
<a id="L611" name="L611"></a> 611     <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<a id="L613" name="L613"></a> 613     <em class="comment">// record if there are any entities other than</em>
<a id="L614" name="L614"></a> 614     <em class="comment">// quot, amp, lt, gt  (probably user defined)</em>
<div class="comment">
      @return true if the entity
      @param code The value of the character that has an entity defined
      for it.</div>
<a id="L620" name="L620"></a> 620     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/14194.html" title="Multiple referred from 2 places.">extraEntity</a>(<strong class="reserved">int</strong> entityValue)
<a id="L621" name="L621"></a> 621     <em class="brace">{</em>
<a id="L622" name="L622"></a> 622         <strong class="reserved">boolean</strong> extra = <strong class="reserved">false</strong>;
<a id="L623" name="L623"></a> 623         <strong class="reserved">if</strong> (entityValue &lt; 128)
<a id="L624" name="L624"></a> 624         <em class="brace">{</em>
<a id="L625" name="L625"></a> 625             <strong class="reserved">switch</strong> (entityValue)
<a id="L626" name="L626"></a> 626             <em class="brace">{</em>
<a id="L627" name="L627"></a> 627                 <strong class="reserved">case</strong> 34 : <em class="comment">// quot</em>
<a id="L628" name="L628"></a> 628                 <strong class="reserved">case</strong> 38 : <em class="comment">// amp</em>
<a id="L629" name="L629"></a> 629                 <strong class="reserved">case</strong> 60 : <em class="comment">// lt</em>
<a id="L630" name="L630"></a> 630                 <strong class="reserved">case</strong> 62 : <em class="comment">// gt</em>
<a id="L631" name="L631"></a> 631                     <strong class="reserved">break</strong>;
<a id="L632" name="L632"></a> 632                 <strong class="reserved">default</strong> : <em class="comment">// other entity in range 0 to 127</em>
<a id="L633" name="L633"></a> 633                     extra = <strong class="reserved">true</strong>;
<a id="L634" name="L634"></a> 634             <em class="brace">}</em>
<a id="L635" name="L635"></a> 635         <em class="brace">}</em>
<a id="L636" name="L636"></a> 636         <strong class="reserved">return</strong> extra;
<a id="L637" name="L637"></a> 637     <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<div class="comment">
      If the character is a printable ASCII character then
      mark it as not clean and needing replacement with
      a String on output.
      @param ch</div>
<a id="L645" name="L645"></a> 645     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/5546.html#L578" title="Referred from 578 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">setASCIIdirty</a>(<strong class="reserved">int</strong> j)
<a id="L646" name="L646"></a> 646     <em class="brace">{</em>
<a id="L647" name="L647"></a> 647         <strong class="reserved">if</strong> (0 &lt;= j &amp;&amp; j &lt; ASCII_MAX)
<a id="L648" name="L648"></a> 648         <em class="brace">{</em>
<a id="L649" name="L649"></a> 649             isCleanTextASCII[j] = <strong class="reserved">false</strong>;
<a id="L650" name="L650"></a> 650             isSpecialTextASCII[j] = <strong class="reserved">true</strong>;
<a id="L651" name="L651"></a> 651         <em class="brace">}</em>
<a id="L652" name="L652"></a> 652     <em class="brace">}</em>
<a id="L653" name="L653"></a> 653 
<div class="comment">
      If the character is a printable ASCII character then
      mark it as and not needing replacement with
      a String on output.
      @param ch</div>
<a id="L660" name="L660"></a> 660     <strong class="reserved">private</strong> <strong class="reserved">void</strong> setASCIIclean(<strong class="reserved">int</strong> j)
<a id="L661" name="L661"></a> 661     <em class="brace">{</em>
<a id="L662" name="L662"></a> 662         <strong class="reserved">if</strong> (0 &lt;= j &amp;&amp; j &lt; ASCII_MAX)
<a id="L663" name="L663"></a> 663         <em class="brace">{</em>
<a id="L664" name="L664"></a> 664             isCleanTextASCII[j] = <strong class="reserved">true</strong>;
<a id="L665" name="L665"></a> 665             isSpecialTextASCII[j] = <strong class="reserved">false</strong>;
<a id="L666" name="L666"></a> 666         <em class="brace">}</em>
<a id="L667" name="L667"></a> 667     <em class="brace">}</em>
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/5546.html#L377" title="Referred from 377 in src/com/sun/org/apache/xml/internal/serializer/CharInfo.java.">defineChar2StringMapping</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> outputString, <strong class="reserved">char</strong> inputChar)
<a id="L670" name="L670"></a> 670     <em class="brace">{</em>
<a id="L671" name="L671"></a> 671         <a href="../D/1383.html" title="Multiple defined in 2 places.">CharKey</a> character = <strong class="reserved">new</strong> <a href="../D/1383.html" title="Multiple defined in 2 places.">CharKey</a>(inputChar);
<a id="L672" name="L672"></a> 672         m_charToString.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(character, outputString);
<a id="L673" name="L673"></a> 673         <a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(inputChar);
<a id="L674" name="L674"></a> 674     <em class="brace">}</em>
<a id="L675" name="L675"></a> 675 
<div class="comment">
      Simple class for fast lookup of char values, when used with
      hashtables.  You can set the char, then use it as a key.
      This class is a copy of the one in com.sun.org.apache.xml.internal.utils.
      It exists to cut the serializers dependancy on that package.
      @xsl.usage internal</div>
<a id="L685" name="L685"></a> 685     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/1262.html" title="Multiple referred from 4 places.">CharKey</a> <strong class="reserved">extends</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>
<a id="L686" name="L686"></a> 686     <em class="brace">{</em>
<a id="L687" name="L687"></a> 687 
<div class="comment">
       /** String value          */</div>
<a id="L689" name="L689"></a> 689       <strong class="reserved">private</strong> <strong class="reserved">char</strong> m_char;
<a id="L690" name="L690"></a> 690 
<div class="comment">
        Constructor CharKey
        @param key char value of this object.</div>
<a id="L696" name="L696"></a> 696       <strong class="reserved">public</strong> CharKey(<strong class="reserved">char</strong> <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>)
<a id="L697" name="L697"></a> 697       <em class="brace">{</em>
<a id="L698" name="L698"></a> 698         m_char = <a href="../D/26706.html" title="Multiple defined in 2 places.">key</a>;
<a id="L699" name="L699"></a> 699       <em class="brace">}</em>
<a id="L700" name="L700"></a> 700 
<div class="comment">
        Default constructor for a CharKey.
        @param key char value of this object.</div>
<a id="L706" name="L706"></a> 706       <strong class="reserved">public</strong> CharKey()
<a id="L707" name="L707"></a> 707       <em class="brace">{</em>
<a id="L708" name="L708"></a> 708       <em class="brace">}</em>
<a id="L709" name="L709"></a> 709 
<div class="comment">
        Get the hash value of the character.
        @return hash value of the character.</div>
<a id="L715" name="L715"></a> 715       <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/27022.html" title="Multiple referred from 2 places.">setChar</a>(<strong class="reserved">char</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>)
<a id="L716" name="L716"></a> 716       <em class="brace">{</em>
<a id="L717" name="L717"></a> 717         m_char = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L718" name="L718"></a> 718       <em class="brace">}</em>
<a id="L719" name="L719"></a> 719 
<a id="L720" name="L720"></a> 720 
<a id="L721" name="L721"></a> 721 
<div class="comment">
        Get the hash value of the character.
        @return hash value of the character.</div>
<a id="L727" name="L727"></a> 727       <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../R/20298.html" title="Multiple referred from 715 places.">hashCode</a>()
<a id="L728" name="L728"></a> 728       <em class="brace">{</em>
<a id="L729" name="L729"></a> 729         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>)m_char;
<a id="L730" name="L730"></a> 730       <em class="brace">}</em>
<a id="L731" name="L731"></a> 731 
<div class="comment">
        Override of equals() for this object
        @param obj to compare to
        @return True if this object equals this string value</div>
<a id="L739" name="L739"></a> 739       <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../R/13992.html" title="Multiple referred from 5400 places.">equals</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj)
<a id="L740" name="L740"></a> 740       <em class="brace">{</em>
<a id="L741" name="L741"></a> 741         <strong class="reserved">return</strong> ((<a href="../D/1383.html" title="Multiple defined in 2 places.">CharKey</a>)obj).m_char == m_char;
<a id="L742" name="L742"></a> 742       <em class="brace">}</em>
<a id="L743" name="L743"></a> 743     <em class="brace">}</em>
<a id="L744" name="L744"></a> 744 
<a id="L745" name="L745"></a> 745 
<a id="L746" name="L746"></a> 746 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L370">[^]</a><a href="#L739">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
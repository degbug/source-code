<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/net/ServerSocket.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L255">[^]</a><a href="#L916">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L255" title="Defined at 255.">getImpl</a></li>
<li><a href="#L261" title="Defined at 261.">checkOldImpl</a></li>
<li><a href="#L281" title="Defined at 281.">setImpl</a></li>
<li><a href="#L300" title="Defined at 300.">createImpl</a></li>
<li><a href="#L328" title="Defined at 328.">bind</a></li>
<li><a href="#L357" title="Defined at 357.">bind</a></li>
<li><a href="#L405" title="Defined at 405.">getInetAddress</a></li>
<li><a href="#L434" title="Defined at 434.">getLocalPort</a></li>
<li><a href="#L473" title="Defined at 473.">getLocalSocketAddress</a></li>
<li><a href="#L507" title="Defined at 507.">accept</a></li>
<li><a href="#L533" title="Defined at 533.">implAccept</a></li>
<li><a href="#L580" title="Defined at 580.">close</a></li>
<li><a href="#L606" title="Defined at 606.">getChannel</a></li>
<li><a href="#L616" title="Defined at 616.">isBound</a></li>
<li><a href="#L627" title="Defined at 627.">isClosed</a></li>
<li><a href="#L649" title="Defined at 649.">setSoTimeout</a></li>
<li><a href="#L663" title="Defined at 663.">getSoTimeout</a></li>
<li><a href="#L711" title="Defined at 711.">setReuseAddress</a></li>
<li><a href="#L727" title="Defined at 727.">getReuseAddress</a></li>
<li><a href="#L746" title="Defined at 746.">toString</a></li>
<li><a href="#L758" title="Defined at 758.">setBound</a></li>
<li><a href="#L762" title="Defined at 762.">setCreated</a></li>
<li><a href="#L796" title="Defined at 796.">setSocketFactory</a></li>
<li><a href="#L843" title="Defined at 843.">setReceiveBufferSize</a></li>
<li><a href="#L866" title="Defined at 866.">getReceiveBufferSize</a></li>
<li><a href="#L916" title="Defined at 916.">setPerformancePreferences</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.net;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.FileDescriptor;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.IOException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.nio.channels.ServerSocketChannel;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.security.AccessController;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.security.PrivilegedExceptionAction;
<a id="L33" name="L33"></a>  33 
<div class="comment">
  This class implements server sockets. A server socket waits for
  requests to come in over the network. It performs some operation
  based on that request, and then possibly returns a result to the requester.
  <p>
  The actual work of the server socket is performed by an instance
  of the <code>SocketImpl</code> class. An application can
  change the socket factory that creates the socket
  implementation to configure itself to create sockets
  appropriate to the local firewall.
  @author  unascribed
  @see     java.net.SocketImpl
  @see     java.net.ServerSocket#setSocketFactory(java.net.SocketImplFactory)
  @see     java.nio.channels.ServerSocketChannel
  @since   JDK1.0</p></div>
<a id="L51" name="L51"></a>  51 <strong class="reserved">public</strong>
<a id="L52" name="L52"></a>  52 <strong class="reserved">class</strong> <a href="../R/7134.html" title="Multiple referred from 42 places.">ServerSocket</a> <strong class="reserved">implements</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.io.<a href="../S/1405.html#L37" title="Defined at 37 in src/java/io/Closeable.java.">Closeable</a> <em class="brace">{</em>
<div class="comment">
      Various states of this socket.</div>
<a id="L56" name="L56"></a>  56     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> created = <strong class="reserved">false</strong>;
<a id="L57" name="L57"></a>  57     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> bound = <strong class="reserved">false</strong>;
<a id="L58" name="L58"></a>  58     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> closed = <strong class="reserved">false</strong>;
<a id="L59" name="L59"></a>  59     <strong class="reserved">private</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> closeLock = <strong class="reserved">new</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>();
<a id="L60" name="L60"></a>  60 
<div class="comment">
      The implementation of this Socket.</div>
<a id="L64" name="L64"></a>  64     <strong class="reserved">private</strong> <a href="../S/803.html#L44" title="Defined at 44 in src/java/net/SocketImpl.java.">SocketImpl</a> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L65" name="L65"></a>  65 
<div class="comment">
      Are we using an older SocketImpl?</div>
<a id="L69" name="L69"></a>  69     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> oldImpl = <strong class="reserved">false</strong>;
<a id="L70" name="L70"></a>  70 
<div class="comment">
      Package-private constructor to create a ServerSocket associated with
      the given SocketImpl.</div>
<a id="L75" name="L75"></a>  75     ServerSocket(<a href="../S/803.html#L44" title="Defined at 44 in src/java/net/SocketImpl.java.">SocketImpl</a> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>) <em class="brace">{</em>
<a id="L76" name="L76"></a>  76         <strong class="reserved">this</strong>.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L77" name="L77"></a>  77         <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/33892.html" title="Multiple defined in 2 places.">setServerSocket</a>(<strong class="reserved">this</strong>);
<a id="L78" name="L78"></a>  78     <em class="brace">}</em>
<a id="L79" name="L79"></a>  79 
<div class="comment">
      Creates an unbound server socket.
      @exception IOException IO error when opening the socket.
      @revised 1.4</div>
<a id="L86" name="L86"></a>  86     <strong class="reserved">public</strong> ServerSocket() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L87" name="L87"></a>  87         <a href="../D/32904.html" title="Multiple defined in 2 places.">setImpl</a>();
<a id="L88" name="L88"></a>  88     <em class="brace">}</em>
<a id="L89" name="L89"></a>  89 
<div class="comment">
      Creates a server socket, bound to the specified port. A port number
      of <code>0</code> means that the port number is automatically
      allocated, typically from an ephemeral port range. This port
      number can then be retrieved by calling {@link #getLocalPort getLocalPort}.
      <p>
      The maximum queue length for incoming connection indications (a
      request to connect) is set to <code>50</code>. If a connection
      indication arrives when the queue is full, the connection is refused.
      </p><p>
      If the application has specified a server socket factory, that
      factory's <code>createSocketImpl</code> method is called to create
      the actual socket implementation. Otherwise a "plain" socket is created.
      </p><p>
      If there is a security manager,
      its <code>checkListen</code> method is called
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      @param      port  the port number, or <code>0</code> to use a port
                        number that is automatically allocated.
      @exception  IOException  if an I/O error occurs when opening the socket.
      @exception  SecurityException
      if a security manager exists and its <code>checkListen</code>
      method doesn't allow the operation.
      @exception  IllegalArgumentException if the port parameter is outside
                  the specified range of valid port values, which is between
                  0 and 65535, inclusive.
      @see        java.net.SocketImpl
      @see        java.net.SocketImplFactory#createSocketImpl()
      @see        java.net.ServerSocket#setSocketFactory(java.net.SocketImplFactory)
      @see        SecurityManager#checkListen</p></div>
<a id="L127" name="L127"></a> 127     <strong class="reserved">public</strong> ServerSocket(<strong class="reserved">int</strong> port) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L128" name="L128"></a> 128         <strong class="reserved">this</strong>(port, 50, <strong class="reserved">null</strong>);
<a id="L129" name="L129"></a> 129     <em class="brace">}</em>
<a id="L130" name="L130"></a> 130 
<div class="comment">
      Creates a server socket and binds it to the specified local port
      number, with the specified backlog.
      A port number of <code>0</code> means that the port number is
      automatically allocated, typically from an ephemeral port range.
      This port number can then be retrieved by calling
      {@link #getLocalPort getLocalPort}.
      <p>
      The maximum queue length for incoming connection indications (a
      request to connect) is set to the <code>backlog</code> parameter. If
      a connection indication arrives when the queue is full, the
      connection is refused.
      </p><p>
      If the application has specified a server socket factory, that
      factory's <code>createSocketImpl</code> method is called to create
      the actual socket implementation. Otherwise a "plain" socket is created.
      </p><p>
      If there is a security manager,
      its <code>checkListen</code> method is called
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      The <code>backlog</code> argument is the requested maximum number of
      pending connections on the socket. Its exact semantics are implementation
      specific. In particular, an implementation may impose a maximum length
      or may choose to ignore the parameter altogther. The value provided
      should be greater than <code>0</code>. If it is less than or equal to
      <code>0</code>, then an implementation specific default will be used.
      </p><p>
      @param      port     the port number, or <code>0</code> to use a port
                           number that is automatically allocated.
      @param      backlog  requested maximum length of the queue of incoming
                           connections.
      @exception  IOException  if an I/O error occurs when opening the socket.
      @exception  SecurityException
      if a security manager exists and its <code>checkListen</code>
      method doesn't allow the operation.
      @exception  IllegalArgumentException if the port parameter is outside
                  the specified range of valid port values, which is between
                  0 and 65535, inclusive.
      @see        java.net.SocketImpl
      @see        java.net.SocketImplFactory#createSocketImpl()
      @see        java.net.ServerSocket#setSocketFactory(java.net.SocketImplFactory)
      @see        SecurityManager#checkListen</p></div>
<a id="L180" name="L180"></a> 180     <strong class="reserved">public</strong> ServerSocket(<strong class="reserved">int</strong> port, <strong class="reserved">int</strong> backlog) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L181" name="L181"></a> 181         <strong class="reserved">this</strong>(port, backlog, <strong class="reserved">null</strong>);
<a id="L182" name="L182"></a> 182     <em class="brace">}</em>
<a id="L183" name="L183"></a> 183 
<div class="comment">
      Create a server with the specified port, listen backlog, and
      local IP address to bind to.  The <i>bindAddr</i> argument
      can be used on a multi-homed host for a ServerSocket that
      will only accept connect requests to one of its addresses.
      If <i>bindAddr</i> is null, it will default accepting
      connections on any/all local addresses.
      The port must be between 0 and 65535, inclusive.
      A port number of <code>0</code> means that the port number is
      automatically allocated, typically from an ephemeral port range.
      This port number can then be retrieved by calling
      {@link #getLocalPort getLocalPort}.
      <p>If there is a security manager, this method
      calls its <code>checkListen</code> method
      with the <code>port</code> argument
      as its argument to ensure the operation is allowed.
      This could result in a SecurityException.
      The <code>backlog</code> argument is the requested maximum number of
      pending connections on the socket. Its exact semantics are implementation
      specific. In particular, an implementation may impose a maximum length
      or may choose to ignore the parameter altogther. The value provided
      should be greater than <code>0</code>. If it is less than or equal to
      <code>0</code>, then an implementation specific default will be used.
      </p><p>
      @param port  the port number, or <code>0</code> to use a port
                   number that is automatically allocated.
      @param backlog requested maximum length of the queue of incoming
                     connections.
      @param bindAddr the local InetAddress the server will bind to
      @throws  SecurityException if a security manager exists and
      its <code>checkListen</code> method doesn't allow the operation.
      @throws  IOException if an I/O error occurs when opening the socket.
      @exception  IllegalArgumentException if the port parameter is outside
                  the specified range of valid port values, which is between
                  0 and 65535, inclusive.
      @see SocketOptions
      @see SocketImpl
      @see SecurityManager#checkListen
      @since   JDK1.1</p></div>
<a id="L229" name="L229"></a> 229     <strong class="reserved">public</strong> ServerSocket(<strong class="reserved">int</strong> port, <strong class="reserved">int</strong> backlog, <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> bindAddr) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L230" name="L230"></a> 230         <a href="../D/32904.html" title="Multiple defined in 2 places.">setImpl</a>();
<a id="L231" name="L231"></a> 231         <strong class="reserved">if</strong> (port &lt; 0 || port &gt; 0xFFFF)
<a id="L232" name="L232"></a> 232             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L233" name="L233"></a> 233                        "Port value out of range: " + port);
<a id="L234" name="L234"></a> 234         <strong class="reserved">if</strong> (backlog &lt; 1)
<a id="L235" name="L235"></a> 235           backlog = 50;
<a id="L236" name="L236"></a> 236         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L237" name="L237"></a> 237             <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(<strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(bindAddr, port), backlog);
<a id="L238" name="L238"></a> 238         <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> e) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239             <a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L240" name="L240"></a> 240             <strong class="reserved">throw</strong> e;
<a id="L241" name="L241"></a> 241         <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L242" name="L242"></a> 242             <a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L243" name="L243"></a> 243             <strong class="reserved">throw</strong> e;
<a id="L244" name="L244"></a> 244         <em class="brace">}</em>
<a id="L245" name="L245"></a> 245     <em class="brace">}</em>
<a id="L246" name="L246"></a> 246 
<div class="comment">
      Get the <code>SocketImpl</code> attached to this socket, creating
      it if necessary.
      @return  the <code>SocketImpl</code> attached to that ServerSocket.
      @throws SocketException if creation fails.
      @since 1.4</div>
<a id="L255" name="L255"></a> 255     <a href="../S/803.html#L44" title="Defined at 44 in src/java/net/SocketImpl.java.">SocketImpl</a> <a href="../R/17001.html" title="Multiple referred from 114 places.">getImpl</a>() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L256" name="L256"></a> 256         <strong class="reserved">if</strong> (!created)
<a id="L257" name="L257"></a> 257             <a href="../D/13947.html" title="Multiple defined in 3 places.">createImpl</a>();
<a id="L258" name="L258"></a> 258         <strong class="reserved">return</strong> <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<a id="L261" name="L261"></a> 261     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11277.html" title="Multiple referred from 6 places.">checkOldImpl</a>() <em class="brace">{</em>
<a id="L262" name="L262"></a> 262         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>)
<a id="L263" name="L263"></a> 263             <strong class="reserved">return</strong>;
<a id="L264" name="L264"></a> 264         <em class="comment">// SocketImpl.connect() is a protected method, therefore we need to use</em>
<a id="L265" name="L265"></a> 265         <em class="comment">// getDeclaredMethod, therefore we need permission to access the member</em>
<a id="L266" name="L266"></a> 266         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L267" name="L267"></a> 267             <a href="../S/1248.html#L264" title="Defined at 264 in src/java/security/AccessController.java.">AccessController</a>.<a href="../D/15060.html" title="Multiple defined in 7 places.">doPrivileged</a>(
<a id="L268" name="L268"></a> 268                 <strong class="reserved">new</strong> <a href="../S/1263.html#L45" title="Defined at 45 in src/java/security/PrivilegedExceptionAction.java.">PrivilegedExceptionAction</a>&lt;<a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a>&gt;() <em class="brace">{</em>
<a id="L269" name="L269"></a> 269                     <strong class="reserved">public</strong> <a href="../S/1638.html#L37" title="Defined at 37 in src/java/lang/Void.java.">Void</a> <a href="../D/31480.html" title="Multiple defined in 101 places.">run</a>() <strong class="reserved">throws</strong> <a href="../S/1776.html#L35" title="Defined at 35 in src/java/lang/NoSuchMethodException.java.">NoSuchMethodException</a> <em class="brace">{</em>
<a id="L270" name="L270"></a> 270                         <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/18255.html" title="Multiple defined in 2 places.">getDeclaredMethod</a>("connect",
<a id="L271" name="L271"></a> 271                                                           <a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a>.<strong class="reserved">class</strong>,
<a id="L272" name="L272"></a> 272                                                           <strong class="reserved">int</strong>.<strong class="reserved">class</strong>);
<a id="L273" name="L273"></a> 273                         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L274" name="L274"></a> 274                     <em class="brace">}</em>
<a id="L275" name="L275"></a> 275                 <em class="brace">}</em>);
<a id="L276" name="L276"></a> 276         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.<a href="../S/1259.html#L50" title="Defined at 50 in src/java/security/PrivilegedActionException.java.">PrivilegedActionException</a> e) <em class="brace">{</em>
<a id="L277" name="L277"></a> 277             oldImpl = <strong class="reserved">true</strong>;
<a id="L278" name="L278"></a> 278         <em class="brace">}</em>
<a id="L279" name="L279"></a> 279     <em class="brace">}</em>
<a id="L280" name="L280"></a> 280 
<a id="L281" name="L281"></a> 281     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/27539.html" title="Multiple referred from 8 places.">setImpl</a>() <em class="brace">{</em>
<a id="L282" name="L282"></a> 282         <strong class="reserved">if</strong> (<a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L283" name="L283"></a> 283             <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../S/770.html#L47" title="Defined at 47 in src/java/net/SocketImplFactory.java.">createSocketImpl</a>();
<a id="L284" name="L284"></a> 284             <a href="../D/12574.html" title="Multiple defined in 3 places.">checkOldImpl</a>();
<a id="L285" name="L285"></a> 285         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L286" name="L286"></a> 286             <em class="comment">// No need to do a checkOldImpl() here, we know it's an up to date</em>
<a id="L287" name="L287"></a> 287             <em class="comment">// SocketImpl!</em>
<a id="L288" name="L288"></a> 288             <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <strong class="reserved">new</strong> <a href="../S/805.html#L43" title="Defined at 43 in src/java/net/SocksSocketImpl.java.">SocksSocketImpl</a>();
<a id="L289" name="L289"></a> 289         <em class="brace">}</em>
<a id="L290" name="L290"></a> 290         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> != <strong class="reserved">null</strong>)
<a id="L291" name="L291"></a> 291             <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/33892.html" title="Multiple defined in 2 places.">setServerSocket</a>(<strong class="reserved">this</strong>);
<a id="L292" name="L292"></a> 292     <em class="brace">}</em>
<a id="L293" name="L293"></a> 293 
<div class="comment">
      Creates the socket implementation.
      @throws IOException if creation fails
      @since 1.4</div>
<a id="L300" name="L300"></a> 300     <strong class="reserved">void</strong> <a href="../R/12490.html" title="Multiple referred from 6 places.">createImpl</a>() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L301" name="L301"></a> 301         <strong class="reserved">if</strong> (<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>)
<a id="L302" name="L302"></a> 302             <a href="../D/32904.html" title="Multiple defined in 2 places.">setImpl</a>();
<a id="L303" name="L303"></a> 303         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L304" name="L304"></a> 304             <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/13587.html" title="Multiple defined in 90 places.">create</a>(<strong class="reserved">true</strong>);
<a id="L305" name="L305"></a> 305             created = <strong class="reserved">true</strong>;
<a id="L306" name="L306"></a> 306         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L307" name="L307"></a> 307             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>(e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L308" name="L308"></a> 308         <em class="brace">}</em>
<a id="L309" name="L309"></a> 309     <em class="brace">}</em>
<a id="L310" name="L310"></a> 310 
<div class="comment">
      Binds the <code>ServerSocket</code> to a specific address
      (IP address and port number).
      <p>
      If the address is <code>null</code>, then the system will pick up
      an ephemeral port and a valid local address to bind the socket.
      </p><p>
      @param   endpoint        The IP address and port number to bind to.
      @throws  IOException if the bind operation fails, or if the socket
                          is already bound.
      @throws  SecurityException       if a <code>SecurityManager</code> is present and
      its <code>checkListen</code> method doesn't allow the operation.
      @throws  IllegalArgumentException if endpoint is a
               SocketAddress subclass not supported by this socket
      @since 1.4</p></div>
<a id="L328" name="L328"></a> 328     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10598.html" title="Multiple referred from 221 places.">bind</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> endpoint) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L329" name="L329"></a> 329         <a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(endpoint, 50);
<a id="L330" name="L330"></a> 330     <em class="brace">}</em>
<a id="L331" name="L331"></a> 331 
<div class="comment">
      Binds the <code>ServerSocket</code> to a specific address
      (IP address and port number).
      <p>
      If the address is <code>null</code>, then the system will pick up
      an ephemeral port and a valid local address to bind the socket.
      </p><p>
      The <code>backlog</code> argument is the requested maximum number of
      pending connections on the socket. Its exact semantics are implementation
      specific. In particular, an implementation may impose a maximum length
      or may choose to ignore the parameter altogther. The value provided
      should be greater than <code>0</code>. If it is less than or equal to
      <code>0</code>, then an implementation specific default will be used.
      @param   endpoint        The IP address and port number to bind to.
      @param   backlog         requested maximum length of the queue of
                               incoming connections.
      @throws  IOException if the bind operation fails, or if the socket
                          is already bound.
      @throws  SecurityException       if a <code>SecurityManager</code> is present and
      its <code>checkListen</code> method doesn't allow the operation.
      @throws  IllegalArgumentException if endpoint is a
               SocketAddress subclass not supported by this socket
      @since 1.4</p></div>
<a id="L357" name="L357"></a> 357     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10598.html" title="Multiple referred from 221 places.">bind</a>(<a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> endpoint, <strong class="reserved">int</strong> backlog) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L358" name="L358"></a> 358         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L359" name="L359"></a> 359             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L360" name="L360"></a> 360         <strong class="reserved">if</strong> (!oldImpl &amp;&amp; <a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L361" name="L361"></a> 361             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Already bound");
<a id="L362" name="L362"></a> 362         <strong class="reserved">if</strong> (endpoint == <strong class="reserved">null</strong>)
<a id="L363" name="L363"></a> 363             endpoint = <strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(0);
<a id="L364" name="L364"></a> 364         <strong class="reserved">if</strong> (!(endpoint <strong class="reserved">instanceof</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>))
<a id="L365" name="L365"></a> 365             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Unsupported address type");
<a id="L366" name="L366"></a> 366         <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a> epoint = (<a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>) endpoint;
<a id="L367" name="L367"></a> 367         <strong class="reserved">if</strong> (epoint.<a href="../D/26409.html" title="Multiple defined in 2 places.">isUnresolved</a>())
<a id="L368" name="L368"></a> 368             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Unresolved address");
<a id="L369" name="L369"></a> 369         <strong class="reserved">if</strong> (backlog &lt; 1)
<a id="L370" name="L370"></a> 370           backlog = 50;
<a id="L371" name="L371"></a> 371         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L372" name="L372"></a> 372             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L373" name="L373"></a> 373             <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>)
<a id="L374" name="L374"></a> 374                 security.<a href="../S/1785.html#L1130" title="Defined at 1130 in src/java/lang/SecurityManager.java.">checkListen</a>(epoint.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L375" name="L375"></a> 375             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/11844.html" title="Multiple defined in 44 places.">bind</a>(epoint.<a href="../D/16826.html" title="Multiple defined in 18 places.">getAddress</a>(), epoint.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L376" name="L376"></a> 376             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/26883.html" title="Multiple defined in 2 places.">listen</a>(backlog);
<a id="L377" name="L377"></a> 377             bound = <strong class="reserved">true</strong>;
<a id="L378" name="L378"></a> 378         <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> e) <em class="brace">{</em>
<a id="L379" name="L379"></a> 379             bound = <strong class="reserved">false</strong>;
<a id="L380" name="L380"></a> 380             <strong class="reserved">throw</strong> e;
<a id="L381" name="L381"></a> 381         <em class="brace">}</em> <strong class="reserved">catch</strong>(<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L382" name="L382"></a> 382             bound = <strong class="reserved">false</strong>;
<a id="L383" name="L383"></a> 383             <strong class="reserved">throw</strong> e;
<a id="L384" name="L384"></a> 384         <em class="brace">}</em>
<a id="L385" name="L385"></a> 385     <em class="brace">}</em>
<a id="L386" name="L386"></a> 386 
<div class="comment">
      Returns the local address of this server socket.
      <p>
      If the socket was bound prior to being {@link #close closed},
      then this method will continue to return the local address
      after the socket is closed.
      </p><p>
      If there is a security manager set, its <code>checkConnect</code> method is
      called with the local address and <code>-1</code> as its arguments to see
      if the operation is allowed. If the operation is not allowed,
      the {@link InetAddress#getLoopbackAddress loopback} address is returned.
      @return  the address to which this socket is bound,
               or the loopback address if denied by the security manager,
               or <code>null</code> if the socket is unbound.
      @see SecurityManager#checkConnect</p></div>
<a id="L405" name="L405"></a> 405     <strong class="reserved">public</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../R/17055.html" title="Multiple referred from 14 places.">getInetAddress</a>() <em class="brace">{</em>
<a id="L406" name="L406"></a> 406         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L407" name="L407"></a> 407             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L408" name="L408"></a> 408         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L409" name="L409"></a> 409             <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/19686.html" title="Multiple defined in 7 places.">getInetAddress</a>();
<a id="L410" name="L410"></a> 410             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> sm = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L411" name="L411"></a> 411             <strong class="reserved">if</strong> (sm != <strong class="reserved">null</strong>)
<a id="L412" name="L412"></a> 412                 sm.<a href="../D/12411.html" title="Multiple defined in 2 places.">checkConnect</a>(<a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(), -1);
<a id="L413" name="L413"></a> 413             <strong class="reserved">return</strong> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L414" name="L414"></a> 414         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> e) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415             <strong class="reserved">return</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>.<a href="../S/826.html#L1206" title="Defined at 1206 in src/java/net/InetAddress.java.">getLoopbackAddress</a>();
<a id="L416" name="L416"></a> 416         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> e) <em class="brace">{</em>
<a id="L417" name="L417"></a> 417             <em class="comment">// nothing</em>
<a id="L418" name="L418"></a> 418             <em class="comment">// If we're bound, the impl has been created</em>
<a id="L419" name="L419"></a> 419             <em class="comment">// so we shouldn't get here</em>
<a id="L420" name="L420"></a> 420         <em class="brace">}</em>
<a id="L421" name="L421"></a> 421         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L422" name="L422"></a> 422     <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<div class="comment">
      Returns the port number on which this socket is listening.
      <p>
      If the socket was bound prior to being {@link #close closed},
      then this method will continue to return the port number
      after the socket is closed.
      @return  the port number to which this socket is listening or
               -1 if the socket is not bound yet.</p></div>
<a id="L434" name="L434"></a> 434     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17427.html" title="Multiple referred from 23 places.">getLocalPort</a>() <em class="brace">{</em>
<a id="L435" name="L435"></a> 435         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L436" name="L436"></a> 436             <strong class="reserved">return</strong> -1;
<a id="L437" name="L437"></a> 437         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L438" name="L438"></a> 438             <strong class="reserved">return</strong> <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/20210.html" title="Multiple defined in 8 places.">getLocalPort</a>();
<a id="L439" name="L439"></a> 439         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> e) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440             <em class="comment">// nothing</em>
<a id="L441" name="L441"></a> 441             <em class="comment">// If we're bound, the impl has been created</em>
<a id="L442" name="L442"></a> 442             <em class="comment">// so we shouldn't get here</em>
<a id="L443" name="L443"></a> 443         <em class="brace">}</em>
<a id="L444" name="L444"></a> 444         <strong class="reserved">return</strong> -1;
<a id="L445" name="L445"></a> 445     <em class="brace">}</em>
<a id="L446" name="L446"></a> 446 
<div class="comment">
      Returns the address of the endpoint this socket is bound to.
      <p>
      If the socket was bound prior to being {@link #close closed},
      then this method will continue to return the address of the endpoint
      after the socket is closed.
      </p><p>
      If there is a security manager set, its <code>checkConnect</code> method is
      called with the local address and <code>-1</code> as its arguments to see
      if the operation is allowed. If the operation is not allowed,
      a <code>SocketAddress</code> representing the
      {@link InetAddress#getLoopbackAddress loopback} address and the local
      port to which the socket is bound is returned.
      @return a <code>SocketAddress</code> representing the local endpoint of
              this socket, or a <code>SocketAddress</code> representing the
              loopback address if denied by the security manager,
              or <code>null</code> if the socket is not bound yet.
      @see #getInetAddress()
      @see #getLocalPort()
      @see #bind(SocketAddress)
      @see SecurityManager#checkConnect
      @since 1.4</p></div>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473     <strong class="reserved">public</strong> <a href="../S/751.html#L41" title="Defined at 41 in src/java/net/SocketAddress.java.">SocketAddress</a> getLocalSocketAddress() <em class="brace">{</em>
<a id="L474" name="L474"></a> 474         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L475" name="L475"></a> 475             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L476" name="L476"></a> 476         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/784.html#L52" title="Defined at 52 in src/java/net/InetSocketAddress.java.">InetSocketAddress</a>(<a href="../D/19686.html" title="Multiple defined in 7 places.">getInetAddress</a>(), <a href="../D/20210.html" title="Multiple defined in 8 places.">getLocalPort</a>());
<a id="L477" name="L477"></a> 477     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478 
<div class="comment">
      Listens for a connection to be made to this socket and accepts
      it. The method blocks until a connection is made.
      <p>A new Socket <code>s</code> is created and, if there
      is a security manager,
      the security manager's <code>checkAccept</code> method is called
      with <code>s.getInetAddress().getHostAddress()</code> and
      <code>s.getPort()</code>
      as its arguments to ensure the operation is allowed.
      This could result in a SecurityException.
      @exception  IOException  if an I/O error occurs when waiting for a
                    connection.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkAccept</code> method doesn't allow the operation.
      @exception  SocketTimeoutException if a timeout was previously set with setSoTimeout and
                  the timeout has been reached.
      @exception  java.nio.channels.IllegalBlockingModeException
                  if this socket has an associated channel, the channel is in
                  non-blocking mode, and there is no connection ready to be
                  accepted
      @return the new Socket
      @see SecurityManager#checkAccept
      @revised 1.4
      @spec JSR-51</p></div>
<a id="L507" name="L507"></a> 507     <strong class="reserved">public</strong> <a href="../S/801.html#L54" title="Defined at 54 in src/java/net/Socket.java.">Socket</a> <a href="../R/9513.html" title="Multiple referred from 551 places.">accept</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L508" name="L508"></a> 508         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L509" name="L509"></a> 509             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L510" name="L510"></a> 510         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L511" name="L511"></a> 511             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is not bound yet");
<a id="L512" name="L512"></a> 512         <a href="../S/801.html#L54" title="Defined at 54 in src/java/net/Socket.java.">Socket</a> s = <strong class="reserved">new</strong> <a href="../S/801.html#L54" title="Defined at 54 in src/java/net/Socket.java.">Socket</a>((<a href="../S/803.html#L44" title="Defined at 44 in src/java/net/SocketImpl.java.">SocketImpl</a>) <strong class="reserved">null</strong>);
<a id="L513" name="L513"></a> 513         <a href="../S/812.html#L533" title="Defined at 533 in src/java/net/ServerSocket.java.">implAccept</a>(s);
<a id="L514" name="L514"></a> 514         <strong class="reserved">return</strong> s;
<a id="L515" name="L515"></a> 515     <em class="brace">}</em>
<a id="L516" name="L516"></a> 516 
<div class="comment">
      Subclasses of ServerSocket use this method to override accept()
      to return their own subclass of socket.  So a FooServerSocket
      will typically hand this method an <i>empty</i> FooSocket.  On
      return from implAccept the FooSocket will be connected to a client.
      @param s the Socket
      @throws java.nio.channels.IllegalBlockingModeException
              if this socket has an associated channel,
              and the channel is in non-blocking mode
      @throws IOException if an I/O error occurs when waiting
      for a connection.
      @since   JDK1.1
      @revised 1.4
      @spec JSR-51</div>
<a id="L533" name="L533"></a> 533     <strong class="reserved">protected</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/812.html#L513" title="Referred from 513 in src/java/net/ServerSocket.java.">implAccept</a>(<a href="../S/801.html#L54" title="Defined at 54 in src/java/net/Socket.java.">Socket</a> s) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L534" name="L534"></a> 534         <a href="../S/803.html#L44" title="Defined at 44 in src/java/net/SocketImpl.java.">SocketImpl</a> si = <strong class="reserved">null</strong>;
<a id="L535" name="L535"></a> 535         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L536" name="L536"></a> 536             <strong class="reserved">if</strong> (s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> == <strong class="reserved">null</strong>)
<a id="L537" name="L537"></a> 537               s.<a href="../D/32904.html" title="Multiple defined in 2 places.">setImpl</a>();
<a id="L538" name="L538"></a> 538             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L539" name="L539"></a> 539                 s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L540" name="L540"></a> 540             <em class="brace">}</em>
<a id="L541" name="L541"></a> 541             si = s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>;
<a id="L542" name="L542"></a> 542             s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = <strong class="reserved">null</strong>;
<a id="L543" name="L543"></a> 543             si.<a href="../D/11204.html" title="Multiple defined in 16 places.">address</a> = <strong class="reserved">new</strong> <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>();
<a id="L544" name="L544"></a> 544             si.fd = <strong class="reserved">new</strong> <a href="../S/1371.html#L43" title="Defined at 43 in src/java/io/FileDescriptor.java.">FileDescriptor</a>();
<a id="L545" name="L545"></a> 545             <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/10537.html" title="Multiple defined in 327 places.">accept</a>(si);
<a id="L546" name="L546"></a> 546 
<a id="L547" name="L547"></a> 547             <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L548" name="L548"></a> 548             <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L549" name="L549"></a> 549                 security.<a href="../S/1785.html#L1160" title="Defined at 1160 in src/java/lang/SecurityManager.java.">checkAccept</a>(si.<a href="../D/19686.html" title="Multiple defined in 7 places.">getInetAddress</a>().<a href="../D/19491.html" title="Multiple defined in 5 places.">getHostAddress</a>(),
<a id="L550" name="L550"></a> 550                                      si.<a href="../D/21541.html" title="Multiple defined in 42 places.">getPort</a>());
<a id="L551" name="L551"></a> 551             <em class="brace">}</em>
<a id="L552" name="L552"></a> 552         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L553" name="L553"></a> 553             <strong class="reserved">if</strong> (si != <strong class="reserved">null</strong>)
<a id="L554" name="L554"></a> 554                 si.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L555" name="L555"></a> 555             s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = si;
<a id="L556" name="L556"></a> 556             <strong class="reserved">throw</strong> e;
<a id="L557" name="L557"></a> 557         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a> e) <em class="brace">{</em>
<a id="L558" name="L558"></a> 558             <strong class="reserved">if</strong> (si != <strong class="reserved">null</strong>)
<a id="L559" name="L559"></a> 559                 si.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L560" name="L560"></a> 560             s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = si;
<a id="L561" name="L561"></a> 561             <strong class="reserved">throw</strong> e;
<a id="L562" name="L562"></a> 562         <em class="brace">}</em>
<a id="L563" name="L563"></a> 563         s.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a> = si;
<a id="L564" name="L564"></a> 564         s.<a href="../S/801.html#L660" title="Defined at 660 in src/java/net/Socket.java.">postAccept</a>();
<a id="L565" name="L565"></a> 565     <em class="brace">}</em>
<a id="L566" name="L566"></a> 566 
<div class="comment">
      Closes this socket.
      Any thread currently blocked in {@link #accept()} will throw
      a {@link SocketException}.
      <p> If this socket has an associated channel then the channel is closed
      as well.
      @exception  IOException  if an I/O error occurs when closing the socket.
      @revised 1.4
      @spec JSR-51</p></div>
<a id="L580" name="L580"></a> 580     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/11587.html" title="Multiple referred from 410 places.">close</a>() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L581" name="L581"></a> 581         <strong class="reserved">synchronized</strong>(closeLock) <em class="brace">{</em>
<a id="L582" name="L582"></a> 582             <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L583" name="L583"></a> 583                 <strong class="reserved">return</strong>;
<a id="L584" name="L584"></a> 584             <strong class="reserved">if</strong> (created)
<a id="L585" name="L585"></a> 585                 <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L586" name="L586"></a> 586             closed = <strong class="reserved">true</strong>;
<a id="L587" name="L587"></a> 587         <em class="brace">}</em>
<a id="L588" name="L588"></a> 588     <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<div class="comment">
      Returns the unique {@link java.nio.channels.ServerSocketChannel} object
      associated with this socket, if any.
      <p> A server socket will have a channel if, and only if, the channel
      itself was created via the {@link
      java.nio.channels.ServerSocketChannel#open ServerSocketChannel.open}
      method.
      @return  the server-socket channel associated with this socket,
               or <code>null</code> if this socket was not created
               for a channel
      @since 1.4
      @spec JSR-51</p></div>
<a id="L606" name="L606"></a> 606     <strong class="reserved">public</strong> <a href="../S/2070.html#L74" title="Defined at 74 in src/java/nio/channels/ServerSocketChannel.java.">ServerSocketChannel</a> <a href="../R/15494.html" title="Multiple referred from 11 places.">getChannel</a>() <em class="brace">{</em>
<a id="L607" name="L607"></a> 607         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L608" name="L608"></a> 608     <em class="brace">}</em>
<a id="L609" name="L609"></a> 609 
<div class="comment">
      Returns the binding state of the ServerSocket.
      @return true if the ServerSocket successfully bound to an address
      @since 1.4</div>
<a id="L616" name="L616"></a> 616     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21218.html" title="Multiple referred from 20 places.">isBound</a>() <em class="brace">{</em>
<a id="L617" name="L617"></a> 617         <em class="comment">// Before 1.3 ServerSockets were always bound during creation</em>
<a id="L618" name="L618"></a> 618         <strong class="reserved">return</strong> bound || oldImpl;
<a id="L619" name="L619"></a> 619     <em class="brace">}</em>
<a id="L620" name="L620"></a> 620 
<div class="comment">
      Returns the closed state of the ServerSocket.
      @return true if the socket has been closed
      @since 1.4</div>
<a id="L627" name="L627"></a> 627     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21256.html" title="Multiple referred from 88 places.">isClosed</a>() <em class="brace">{</em>
<a id="L628" name="L628"></a> 628         <strong class="reserved">synchronized</strong>(closeLock) <em class="brace">{</em>
<a id="L629" name="L629"></a> 629             <strong class="reserved">return</strong> closed;
<a id="L630" name="L630"></a> 630         <em class="brace">}</em>
<a id="L631" name="L631"></a> 631     <em class="brace">}</em>
<a id="L632" name="L632"></a> 632 
<div class="comment">
      Enable/disable {@link SocketOptions#SO_TIMEOUT SO_TIMEOUT} with the
      specified timeout, in milliseconds.  With this option set to a non-zero
      timeout, a call to accept() for this ServerSocket
      will block for only this amount of time.  If the timeout expires,
      a <b>java.net.SocketTimeoutException</b> is raised, though the
      ServerSocket is still valid.  The option <b>must</b> be enabled
      prior to entering the blocking operation to have effect.  The
      timeout must be <code>&gt; 0</code>.
      A timeout of zero is interpreted as an infinite timeout.
      @param timeout the specified timeout, in milliseconds
      @exception SocketException if there is an error in
      the underlying protocol, such as a TCP error.
      @since   JDK1.1
      @see #getSoTimeout()</div>
<a id="L649" name="L649"></a> 649     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setSoTimeout(<strong class="reserved">int</strong> timeout) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L650" name="L650"></a> 650         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L651" name="L651"></a> 651             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L652" name="L652"></a> 652         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_TIMEOUT, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(timeout));
<a id="L653" name="L653"></a> 653     <em class="brace">}</em>
<a id="L654" name="L654"></a> 654 
<div class="comment">
      Retrieve setting for {@link SocketOptions#SO_TIMEOUT SO_TIMEOUT}.
      0 returns implies that the option is disabled (i.e., timeout of infinity).
      @return the {@link SocketOptions#SO_TIMEOUT SO_TIMEOUT} value
      @exception IOException if an I/O error occurs
      @since   JDK1.1
      @see #setSoTimeout(int)</div>
<a id="L663" name="L663"></a> 663     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> getSoTimeout() <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L664" name="L664"></a> 664         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L665" name="L665"></a> 665             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L666" name="L666"></a> 666         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_TIMEOUT);
<div class="comment">
         /* extra type safety */</div>
<a id="L668" name="L668"></a> 668         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L669" name="L669"></a> 669             <strong class="reserved">return</strong> ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L670" name="L670"></a> 670         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L671" name="L671"></a> 671             <strong class="reserved">return</strong> 0;
<a id="L672" name="L672"></a> 672         <em class="brace">}</em>
<a id="L673" name="L673"></a> 673     <em class="brace">}</em>
<a id="L674" name="L674"></a> 674 
<div class="comment">
      Enable/disable the {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR}
      socket option.
      <p>
      When a TCP connection is closed the connection may remain
      in a timeout state for a period of time after the connection
      is closed (typically known as the <code>TIME_WAIT</code> state
      or <code>2MSL</code> wait state).
      For applications using a well known socket address or port
      it may not be possible to bind a socket to the required
      <code>SocketAddress</code> if there is a connection in the
      timeout state involving the socket address or port.
      </p><p>
      Enabling {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR} prior to
      binding the socket using {@link #bind(SocketAddress)} allows the socket
      to be bound even though a previous connection is in a timeout state.
      </p><p>
      When a <code>ServerSocket</code> is created the initial setting
      of {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR} is not defined.
      Applications can use {@link #getReuseAddress()} to determine the initial
      setting of {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR}.
      </p><p>
      The behaviour when {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR} is
      enabled or disabled after a socket is bound (See {@link #isBound()})
      is not defined.
      @param on  whether to enable or disable the socket option
      @exception SocketException if an error occurs enabling or
                 disabling the {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR}
                 socket option, or the socket is closed.
      @since 1.4
      @see #getReuseAddress()
      @see #bind(SocketAddress)
      @see #isBound()
      @see #isClosed()</p></div>
<a id="L711" name="L711"></a> 711     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/744.html#L168" title="Referred from 168 in src/java/net/MulticastSocket.java.">setReuseAddress</a>(<strong class="reserved">boolean</strong> <a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L712" name="L712"></a> 712         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L713" name="L713"></a> 713             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L714" name="L714"></a> 714         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_REUSEADDR, <a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>.<a href="../D/36373.html" title="Multiple defined in 48 places.">valueOf</a>(<a href="../D/28484.html" title="Multiple defined in 2 places.">on</a>));
<a id="L715" name="L715"></a> 715     <em class="brace">}</em>
<a id="L716" name="L716"></a> 716 
<div class="comment">
      Tests if {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR} is enabled.
      @return a <code>boolean</code> indicating whether or not
              {@link SocketOptions#SO_REUSEADDR SO_REUSEADDR} is enabled.
      @exception SocketException if there is an error
      in the underlying protocol, such as a TCP error.
      @since   1.4
      @see #setReuseAddress(boolean)</div>
<a id="L727" name="L727"></a> 727     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> getReuseAddress() <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L728" name="L728"></a> 728         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L729" name="L729"></a> 729             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L730" name="L730"></a> 730         <strong class="reserved">return</strong> ((<a href="../S/1770.html#L43" title="Defined at 43 in src/java/lang/Boolean.java.">Boolean</a>) (<a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_REUSEADDR))).<a href="../D/11892.html" title="Multiple defined in 3 places.">booleanValue</a>();
<a id="L731" name="L731"></a> 731     <em class="brace">}</em>
<a id="L732" name="L732"></a> 732 
<div class="comment">
      Returns the implementation address and implementation port of
      this socket as a <code>String</code>.
      <p>
      If there is a security manager set, its <code>checkConnect</code> method is
      called with the local address and <code>-1</code> as its arguments to see
      if the operation is allowed. If the operation is not allowed,
      an <code>InetAddress</code> representing the
      {@link InetAddress#getLoopbackAddress loopback} address is returned as
      the implementation address.
      @return  a string representation of this socket.</p></div>
<a id="L746" name="L746"></a> 746     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L747" name="L747"></a> 747         <strong class="reserved">if</strong> (!<a href="../D/25260.html" title="Multiple defined in 5 places.">isBound</a>())
<a id="L748" name="L748"></a> 748             <strong class="reserved">return</strong> "ServerSocket[unbound]";
<a id="L749" name="L749"></a> 749         <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>;
<a id="L750" name="L750"></a> 750         <strong class="reserved">if</strong> (<a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>() != <strong class="reserved">null</strong>)
<a id="L751" name="L751"></a> 751             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../S/826.html#L189" title="Defined at 189 in src/java/net/InetAddress.java.">InetAddress</a>.<a href="../S/826.html#L1206" title="Defined at 1206 in src/java/net/InetAddress.java.">getLoopbackAddress</a>();
<a id="L752" name="L752"></a> 752         <strong class="reserved">else</strong>
<a id="L753" name="L753"></a> 753             <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> = <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/19686.html" title="Multiple defined in 7 places.">getInetAddress</a>();
<a id="L754" name="L754"></a> 754         <strong class="reserved">return</strong> "ServerSocket[addr=" + <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a> +
<a id="L755" name="L755"></a> 755                 ",localport=" + <a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.<a href="../D/20210.html" title="Multiple defined in 8 places.">getLocalPort</a>()  + "]";
<a id="L756" name="L756"></a> 756     <em class="brace">}</em>
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758     <strong class="reserved">void</strong> <a href="../R/26966.html" title="Multiple referred from 4 places.">setBound</a>() <em class="brace">{</em>
<a id="L759" name="L759"></a> 759         bound = <strong class="reserved">true</strong>;
<a id="L760" name="L760"></a> 760     <em class="brace">}</em>
<a id="L761" name="L761"></a> 761 
<a id="L762" name="L762"></a> 762     <strong class="reserved">void</strong> <a href="../R/27121.html" title="Multiple referred from 4 places.">setCreated</a>() <em class="brace">{</em>
<a id="L763" name="L763"></a> 763         created = <strong class="reserved">true</strong>;
<a id="L764" name="L764"></a> 764     <em class="brace">}</em>
<a id="L765" name="L765"></a> 765 
<div class="comment">
      The factory for all server sockets.</div>
<a id="L769" name="L769"></a> 769     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <a href="../S/770.html#L40" title="Defined at 40 in src/java/net/SocketImplFactory.java.">SocketImplFactory</a> <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> = <strong class="reserved">null</strong>;
<a id="L770" name="L770"></a> 770 
<div class="comment">
      Sets the server socket implementation factory for the
      application. The factory can be specified only once.
      <p>
      When an application creates a new server socket, the socket
      implementation factory's <code>createSocketImpl</code> method is
      called to create the actual socket implementation.
      </p><p>
      Passing <code>null</code> to the method is a no-op unless the factory
      was already set.
      </p><p>
      If there is a security manager, this method first calls
      the security manager's <code>checkSetFactory</code> method
      to ensure the operation is allowed.
      This could result in a SecurityException.
      @param      fac   the desired factory.
      @exception  IOException  if an I/O error occurs when setting the
                    socket factory.
      @exception  SocketException  if the factory has already been defined.
      @exception  SecurityException  if a security manager exists and its
                  <code>checkSetFactory</code> method doesn't allow the operation.
      @see        java.net.SocketImplFactory#createSocketImpl()
      @see        SecurityManager#checkSetFactory</p></div>
<a id="L796" name="L796"></a> 796     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setSocketFactory(<a href="../S/770.html#L40" title="Defined at 40 in src/java/net/SocketImplFactory.java.">SocketImplFactory</a> fac) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L797" name="L797"></a> 797         <strong class="reserved">if</strong> (<a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L798" name="L798"></a> 798             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("factory already defined");
<a id="L799" name="L799"></a> 799         <em class="brace">}</em>
<a id="L800" name="L800"></a> 800         <a href="../D/7682.html" title="Multiple defined in 2 places.">SecurityManager</a> security = <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L333" title="Defined at 333 in src/java/lang/System.java.">getSecurityManager</a>();
<a id="L801" name="L801"></a> 801         <strong class="reserved">if</strong> (security != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802             security.<a href="../S/1785.html#L1663" title="Defined at 1663 in src/java/lang/SecurityManager.java.">checkSetFactory</a>();
<a id="L803" name="L803"></a> 803         <em class="brace">}</em>
<a id="L804" name="L804"></a> 804         <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a> = fac;
<a id="L805" name="L805"></a> 805     <em class="brace">}</em>
<a id="L806" name="L806"></a> 806 
<div class="comment">
      Sets a default proposed value for the
      {@link SocketOptions#SO_RCVBUF SO_RCVBUF} option for sockets
      accepted from this <code>ServerSocket</code>. The value actually set
      in the accepted socket must be determined by calling
      {@link Socket#getReceiveBufferSize()} after the socket
      is returned by {@link #accept()}.
      <p>
      The value of {@link SocketOptions#SO_RCVBUF SO_RCVBUF} is used both to
      set the size of the internal socket receive buffer, and to set the size
      of the TCP receive window that is advertized to the remote peer.
      </p><p>
      It is possible to change the value subsequently, by calling
      {@link Socket#setReceiveBufferSize(int)}. However, if the application
      wishes to allow a receive window larger than 64K bytes, as defined by RFC1323
      then the proposed value must be set in the ServerSocket <b>before</b>
      it is bound to a local address. This implies, that the ServerSocket must be
      created with the no-argument constructor, then setReceiveBufferSize() must
      be called and lastly the ServerSocket is bound to an address by calling bind().
      </p><p>
      Failure to do this will not cause an error, and the buffer size may be set to the
      requested value but the TCP receive window in sockets accepted from
      this ServerSocket will be no larger than 64K bytes.
      @exception SocketException if there is an error
      in the underlying protocol, such as a TCP error.
      @param size the size to which to set the receive buffer
      size. This value must be greater than 0.
      @exception IllegalArgumentException if the
      value is 0 or is negative.
      @since 1.4
      @see #getReceiveBufferSize</p></div>
<a id="L843" name="L843"></a> 843      <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> setReceiveBufferSize (<strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>) <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a> <em class="brace">{</em>
<a id="L844" name="L844"></a> 844         <strong class="reserved">if</strong> (!(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt; 0)) <em class="brace">{</em>
<a id="L845" name="L845"></a> 845             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("negative receive size");
<a id="L846" name="L846"></a> 846         <em class="brace">}</em>
<a id="L847" name="L847"></a> 847         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L848" name="L848"></a> 848             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L849" name="L849"></a> 849         <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/33429.html" title="Multiple defined in 15 places.">setOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_RCVBUF, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>));
<a id="L850" name="L850"></a> 850     <em class="brace">}</em>
<a id="L851" name="L851"></a> 851 
<div class="comment">
      Gets the value of the {@link SocketOptions#SO_RCVBUF SO_RCVBUF} option
      for this <code>ServerSocket</code>, that is the proposed buffer size that
      will be used for Sockets accepted from this <code>ServerSocket</code>.
      <p>Note, the value actually set in the accepted socket is determined by
      calling {@link Socket#getReceiveBufferSize()}.
      @return the value of the {@link SocketOptions#SO_RCVBUF SO_RCVBUF}
              option for this <code>Socket</code>.
      @exception SocketException if there is an error
                 in the underlying protocol, such as a TCP error.
      @see #setReceiveBufferSize(int)
      @since 1.4</p></div>
<a id="L866" name="L866"></a> 866     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../S/750.html#L163" title="Referred from 163 in src/java/net/DatagramSocket.java.">getReceiveBufferSize</a>()
<a id="L867" name="L867"></a> 867     <strong class="reserved">throws</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a><em class="brace">{</em>
<a id="L868" name="L868"></a> 868         <strong class="reserved">if</strong> (<a href="../D/25310.html" title="Multiple defined in 10 places.">isClosed</a>())
<a id="L869" name="L869"></a> 869             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/808.html#L37" title="Defined at 37 in src/java/net/SocketException.java.">SocketException</a>("Socket is closed");
<a id="L870" name="L870"></a> 870         <strong class="reserved">int</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = 0;
<a id="L871" name="L871"></a> 871         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> = <a href="../D/19614.html" title="Multiple defined in 7 places.">getImpl</a>().<a href="../D/21227.html" title="Multiple defined in 11 places.">getOption</a>(<a href="../S/792.html#L46" title="Defined at 46 in src/java/net/SocketOptions.java.">SocketOptions</a>.SO_RCVBUF);
<a id="L872" name="L872"></a> 872         <strong class="reserved">if</strong> (<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a> <strong class="reserved">instanceof</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) <em class="brace">{</em>
<a id="L873" name="L873"></a> 873             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)<a href="../S/986.html#L3177" title="Defined at 3177 in src/java/util/regex/Pattern.java.">o</a>).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L874" name="L874"></a> 874         <em class="brace">}</em>
<a id="L875" name="L875"></a> 875         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L876" name="L876"></a> 876     <em class="brace">}</em>
<a id="L877" name="L877"></a> 877 
<div class="comment">
      Sets performance preferences for this ServerSocket.
      <p> Sockets use the TCP/IP protocol by default.  Some implementations
      may offer alternative protocols which have different performance
      characteristics than TCP/IP.  This method allows the application to
      express its own preferences as to how these tradeoffs should be made
      when the implementation chooses from the available protocols.
      </p><p> Performance preferences are described by three integers
      whose values indicate the relative importance of short connection time,
      low latency, and high bandwidth.  The absolute values of the integers
      are irrelevant; in order to choose a protocol the values are simply
      compared, with larger values indicating stronger preferences.  If the
      application prefers short connection time over both low latency and high
      bandwidth, for example, then it could invoke this method with the values
      <code>(1, 0, 0)</code>.  If the application prefers high bandwidth above low
      latency, and low latency above short connection time, then it could
      invoke this method with the values <code>(0, 1, 2)</code>.
      </p><p> Invoking this method after this socket has been bound
      will have no effect. This implies that in order to use this capability
      requires the socket to be created with the no-argument constructor.
      @param  connectionTime
              An <code>int</code> expressing the relative importance of a short
              connection time
      @param  latency
              An <code>int</code> expressing the relative importance of low
              latency
      @param  bandwidth
              An <code>int</code> expressing the relative importance of high
              bandwidth
      @since 1.5</p></div>
<a id="L916" name="L916"></a> 916     <strong class="reserved">public</strong> <strong class="reserved">void</strong> setPerformancePreferences(<strong class="reserved">int</strong> connectionTime,
<a id="L917" name="L917"></a> 917                                           <strong class="reserved">int</strong> latency,
<a id="L918" name="L918"></a> 918                                           <strong class="reserved">int</strong> bandwidth)
<a id="L919" name="L919"></a> 919     <em class="brace">{</em>
<div class="comment">
         /* Not implemented yet */</div>
<a id="L921" name="L921"></a> 921     <em class="brace">}</em>
<a id="L922" name="L922"></a> 922 
<a id="L923" name="L923"></a> 923 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L255">[^]</a><a href="#L916">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
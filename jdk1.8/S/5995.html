<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L122">[^]</a><a href="#L786">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L122" title="Defined at 122.">printInternalState</a></li>
<li><a href="#L139" title="Defined at 139.">makeDOMAdapter</a></li>
<li><a href="#L157" title="Defined at 157.">pushParamFrame</a></li>
<li><a href="#L165" title="Defined at 165.">popParamFrame</a></li>
<li><a href="#L183" title="Defined at 183.">addParameter</a></li>
<li><a href="#L194" title="Defined at 194.">addParameter</a></li>
<li><a href="#L221" title="Defined at 221.">clearParameters</a></li>
<li><a href="#L230" title="Defined at 230.">getParameter</a></li>
<li><a href="#L253" title="Defined at 253.">setMessageHandler</a></li>
<li><a href="#L260" title="Defined at 260.">displayMessage</a></li>
<li><a href="#L280" title="Defined at 280.">addDecimalFormat</a></li>
<li><a href="#L298" title="Defined at 298.">getDecimalFormat</a></li>
<li><a href="#L317" title="Defined at 317.">prepassDocument</a></li>
<li><a href="#L327" title="Defined at 327.">buildIDIndex</a></li>
<li><a href="#L375" title="Defined at 375.">postInitialization</a></li>
<li><a href="#L437" title="Defined at 437.">setIndexSize</a></li>
<li><a href="#L444" title="Defined at 444.">createKeyIndex</a></li>
<li><a href="#L454" title="Defined at 454.">buildKeyIndex</a></li>
<li><a href="#L469" title="Defined at 469.">buildKeyIndex</a></li>
<li><a href="#L483" title="Defined at 483.">getKeyIndex</a></li>
<li><a href="#L504" title="Defined at 504.">setRootForKeys</a></li>
<li><a href="#L512" title="Defined at 512.">buildKeys</a></li>
<li><a href="#L522" title="Defined at 522.">setKeyIndexDom</a></li>
<li><a href="#L537" title="Defined at 537.">setDOMCache</a></li>
<li><a href="#L545" title="Defined at 545.">getDOMCache</a></li>
<li><a href="#L554" title="Defined at 554.">openOutputHandler</a></li>
<li><a href="#L584" title="Defined at 584.">openOutputHandler</a></li>
<li><a href="#L590" title="Defined at 590.">closeOutputHandler</a></li>
<li><a href="#L607" title="Defined at 607.">transform</a></li>
<li><a href="#L614" title="Defined at 614.">transform</a></li>
<li><a href="#L627" title="Defined at 627.">characters</a></li>
<li><a href="#L643" title="Defined at 643.">addCdataElement</a></li>
<li><a href="#L664" title="Defined at 664.">transferOutputSettings</a></li>
<li><a href="#L711" title="Defined at 711.">addAuxiliaryClass</a></li>
<li><a href="#L716" title="Defined at 716.">setAuxiliaryClasses</a></li>
<li><a href="#L720" title="Defined at 720.">getAuxiliaryClass</a></li>
<li><a href="#L726" title="Defined at 726.">getNamesArray</a></li>
<li><a href="#L730" title="Defined at 730.">getUrisArray</a></li>
<li><a href="#L734" title="Defined at 734.">getTypesArray</a></li>
<li><a href="#L738" title="Defined at 738.">getNamespaceArray</a></li>
<li><a href="#L742" title="Defined at 742.">hasIdCall</a></li>
<li><a href="#L746" title="Defined at 746.">getTemplates</a></li>
<li><a href="#L750" title="Defined at 750.">setTemplates</a></li>
<li><a href="#L756" title="Defined at 756.">useServicesMechnism</a></li>
<li><a href="#L763" title="Defined at 763.">setServicesMechnism</a></li>
<li><a href="#L770" title="Defined at 770.">getAllowedProtocols</a></li>
<li><a href="#L777" title="Defined at 777.">setAllowedProtocols</a></li>
<li><a href="#L786" title="Defined at 786.">newDocument</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2001-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: AbstractTranslet.java,v 1.6 2006/06/19 19:49:03 spericas Exp $</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xalan.internal.xsltc.runtime;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.XalanConstants;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.utils.FactoryImpl;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.File;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.FileOutputStream;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.io.BufferedOutputStream;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.text.DecimalFormat;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.text.DecimalFormatSymbols;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.ArrayList;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Vector;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> javax.xml.transform.Templates;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> javax.xml.parsers.DocumentBuilderFactory;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> org.w3c.dom.Document;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> org.w3c.dom.DOMImplementation;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> javax.xml.parsers.ParserConfigurationException;
<a id="L41" name="L41"></a>  41 
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L43" name="L43"></a>  43 
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.DOM;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.DOMCache;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.DOMEnhancedForDTM;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.Translet;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.TransletException;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.dom.DOMAdapter;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.dom.KeyIndex;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;
<a id="L53" name="L53"></a>  53 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.serializer.SerializationHandler;
<a id="L54" name="L54"></a>  54 
<div class="comment">
  @author Jacek Ambroziak
  @author Santiago Pericas-Geertsen
  @author Morten Jorgensen
  @author G. Todd Miller
  @author John Howard, JohnH@schemasoft.com</div>
<a id="L62" name="L62"></a>  62 <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">class</strong> <a href="../R/124.html" title="Multiple referred from 46 places.">AbstractTranslet</a> <strong class="reserved">implements</strong> <a href="../S/6027.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/Translet.java.">Translet</a> <em class="brace">{</em>
<a id="L63" name="L63"></a>  63 
<a id="L64" name="L64"></a>  64     <em class="comment">// These attributes are extracted from the xsl:output element. They also</em>
<a id="L65" name="L65"></a>  65     <em class="comment">// appear as fields (with the same type, only public) in Output.java</em>
<a id="L66" name="L66"></a>  66     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _version = "1.0";
<a id="L67" name="L67"></a>  67     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _method = <strong class="reserved">null</strong>;
<a id="L68" name="L68"></a>  68     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _encoding = "UTF-8";
<a id="L69" name="L69"></a>  69     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> _omitHeader = <strong class="reserved">false</strong>;
<a id="L70" name="L70"></a>  70     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _standalone = <strong class="reserved">null</strong>;
<a id="L71" name="L71"></a>  71     <em class="comment">//see OutputPropertiesFactory.ORACLE_IS_STANDALONE</em>
<a id="L72" name="L72"></a>  72     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong>  _isStandalone = <strong class="reserved">false</strong>;
<a id="L73" name="L73"></a>  73     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _doctypePublic = <strong class="reserved">null</strong>;
<a id="L74" name="L74"></a>  74     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _doctypeSystem = <strong class="reserved">null</strong>;
<a id="L75" name="L75"></a>  75     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> _indent = <strong class="reserved">false</strong>;
<a id="L76" name="L76"></a>  76     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>  _mediaType = <strong class="reserved">null</strong>;
<a id="L77" name="L77"></a>  77     <strong class="reserved">public</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> _cdata = <strong class="reserved">null</strong>;
<a id="L78" name="L78"></a>  78     <strong class="reserved">public</strong> <strong class="reserved">int</strong> _indentamount = -1;
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> FIRST_TRANSLET_VERSION = 100;
<a id="L81" name="L81"></a>  81     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> VER_SPLIT_NAMES_ARRAY = 101;
<a id="L82" name="L82"></a>  82     <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CURRENT_TRANSLET_VERSION = VER_SPLIT_NAMES_ARRAY;
<a id="L83" name="L83"></a>  83 
<a id="L84" name="L84"></a>  84     <em class="comment">// Initialize Translet version field to base value.  A class that extends</em>
<a id="L85" name="L85"></a>  85     <em class="comment">// AbstractTranslet may override this value to a more recent translet</em>
<a id="L86" name="L86"></a>  86     <em class="comment">// version; if it doesn't override the value (because it was compiled</em>
<a id="L87" name="L87"></a>  87     <em class="comment">// before the notion of a translet version was introduced, it will get</em>
<a id="L88" name="L88"></a>  88     <em class="comment">// this default value).</em>
<a id="L89" name="L89"></a>  89     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> transletVersion = FIRST_TRANSLET_VERSION;
<a id="L90" name="L90"></a>  90 
<a id="L91" name="L91"></a>  91     <em class="comment">// DOM/translet handshaking - the arrays are set by the compiled translet</em>
<a id="L92" name="L92"></a>  92     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] namesArray;
<a id="L93" name="L93"></a>  93     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] urisArray;
<a id="L94" name="L94"></a>  94     <strong class="reserved">protected</strong> <strong class="reserved">int</strong>[]    typesArray;
<a id="L95" name="L95"></a>  95     <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] namespaceArray;
<a id="L96" name="L96"></a>  96 
<a id="L97" name="L97"></a>  97     <em class="comment">// The Templates object that is used to create this Translet instance</em>
<a id="L98" name="L98"></a>  98     <strong class="reserved">protected</strong> <a href="../S/4042.html#L41" title="Defined at 41 in src/javax/xml/transform/Templates.java.">Templates</a> _templates = <strong class="reserved">null</strong>;
<a id="L99" name="L99"></a>  99 
<a id="L100" name="L100"></a> 100     <em class="comment">// Boolean flag to indicate whether this translet has id functions.</em>
<a id="L101" name="L101"></a> 101     <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> _hasIdCall = <strong class="reserved">false</strong>;
<a id="L102" name="L102"></a> 102 
<a id="L103" name="L103"></a> 103     <em class="comment">// TODO - these should only be instanciated when needed</em>
<a id="L104" name="L104"></a> 104     <strong class="reserved">protected</strong> <a href="../S/5980.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/StringValueHandler.java.">StringValueHandler</a> stringValueHandler = <strong class="reserved">new</strong> <a href="../S/5980.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/StringValueHandler.java.">StringValueHandler</a>();
<a id="L105" name="L105"></a> 105 
<a id="L106" name="L106"></a> 106     <em class="comment">// Use one empty string instead of constantly instanciating String("");</em>
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> EMPTYSTRING = "";
<a id="L108" name="L108"></a> 108 
<a id="L109" name="L109"></a> 109     <em class="comment">// This is the name of the index used for ID attributes</em>
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ID_INDEX_NAME = "##id";
<a id="L111" name="L111"></a> 111 
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> _useServicesMechanism;
<a id="L113" name="L113"></a> 113 
<div class="comment">
      protocols allowed for external references set by the stylesheet processing instruction, Document() function, Import and Include element.</div>
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> _accessExternalStylesheet = <a href="../S/6256.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/XalanConstants.java.">XalanConstants</a>.EXTERNAL_ACCESS_DEFAULT;
<a id="L118" name="L118"></a> 118 
<div class="comment">
**********************************************************************
      Debugging
     ***********************************************************************</div>
<a id="L122" name="L122"></a> 122     <strong class="reserved">public</strong> <strong class="reserved">void</strong> printInternalState() <em class="brace">{</em>
<a id="L123" name="L123"></a> 123         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("-------------------------------------");
<a id="L124" name="L124"></a> 124         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("AbstractTranslet this = " + <strong class="reserved">this</strong>);
<a id="L125" name="L125"></a> 125         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("pbase = " + pbase);
<a id="L126" name="L126"></a> 126         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("vframe = " + pframe);
<a id="L127" name="L127"></a> 127         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("paramsStack.size() = " + paramsStack.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L128" name="L128"></a> 128         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("namesArray.size = " + namesArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L129" name="L129"></a> 129         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("namespaceArray.size = " + namespaceArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L130" name="L130"></a> 130         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("");
<a id="L131" name="L131"></a> 131         <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("Total memory = " + <a href="../S/1774.html#L46" title="Defined at 46 in src/java/lang/Runtime.java.">Runtime</a>.<a href="../S/1774.html#L57" title="Defined at 57 in src/java/lang/Runtime.java.">getRuntime</a>().<a href="../S/1774.html#L659" title="Defined at 659 in src/java/lang/Runtime.java.">totalMemory</a>());
<a id="L132" name="L132"></a> 132     <em class="brace">}</em>
<a id="L133" name="L133"></a> 133 
<div class="comment">
      Wrap the initial input DOM in a dom adapter. This adapter is wrapped in
      a DOM multiplexer if the document() function is used (handled by compiled
      code in the translet - see compiler/Stylesheet.compileTransform()).</div>
<a id="L139" name="L139"></a> 139     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/6029.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/dom/DOMAdapter.java.">DOMAdapter</a> <a href="../R/22863.html" title="Multiple referred from 2 places.">makeDOMAdapter</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> dom)
<a id="L140" name="L140"></a> 140         <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a> <em class="brace">{</em>
<a id="L141" name="L141"></a> 141         <a href="../S/5995.html#L504" title="Defined at 504 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setRootForKeys</a>(dom.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>());
<a id="L142" name="L142"></a> 142         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/6029.html#L42" title="Defined at 42 in src/com/sun/org/apache/xalan/internal/xsltc/dom/DOMAdapter.java.">DOMAdapter</a>(dom, namesArray, urisArray, typesArray, namespaceArray);
<a id="L143" name="L143"></a> 143     <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<div class="comment">
**********************************************************************
      Parameter handling
     ***********************************************************************</div>
<a id="L148" name="L148"></a> 148 
<a id="L149" name="L149"></a> 149     <em class="comment">// Parameter's stack: &lt;tt&gt;pbase&lt;/tt&gt; and &lt;tt&gt;pframe&lt;/tt&gt; are used</em>
<a id="L150" name="L150"></a> 150     <em class="comment">// to denote the current parameter frame.</em>
<a id="L151" name="L151"></a> 151     <strong class="reserved">protected</strong> <strong class="reserved">int</strong> pbase = 0, pframe = 0;
<a id="L152" name="L152"></a> 152     <strong class="reserved">protected</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> paramsStack = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L153" name="L153"></a> 153 
<div class="comment">
      Push a new parameter frame.</div>
<a id="L157" name="L157"></a> 157     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> pushParamFrame() <em class="brace">{</em>
<a id="L158" name="L158"></a> 158         paramsStack.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(pframe, <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(pbase));
<a id="L159" name="L159"></a> 159         pbase = ++pframe;
<a id="L160" name="L160"></a> 160     <em class="brace">}</em>
<a id="L161" name="L161"></a> 161 
<div class="comment">
      Pop the topmost parameter frame.</div>
<a id="L165" name="L165"></a> 165     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> popParamFrame() <em class="brace">{</em>
<a id="L166" name="L166"></a> 166         <strong class="reserved">if</strong> (pbase &gt; 0) <em class="brace">{</em>
<a id="L167" name="L167"></a> 167             <strong class="reserved">final</strong> <strong class="reserved">int</strong> oldpbase = ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)paramsStack.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(--pbase)).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L168" name="L168"></a> 168             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = pframe - 1; i &gt;= pbase; i--) <em class="brace">{</em>
<a id="L169" name="L169"></a> 169                 paramsStack.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(i);
<a id="L170" name="L170"></a> 170             <em class="brace">}</em>
<a id="L171" name="L171"></a> 171             pframe = pbase; pbase = oldpbase;
<a id="L172" name="L172"></a> 172         <em class="brace">}</em>
<a id="L173" name="L173"></a> 173     <em class="brace">}</em>
<a id="L174" name="L174"></a> 174 
<div class="comment">
      Add a new global parameter if not already in the current frame.
      To setParameters of the form {http://foo.bar}xyz
      This needs to get mapped to an instance variable in the class
      The mapping  created so that
      the global variables in the generated class become
      http$colon$$flash$$flash$foo$dot$bar$colon$xyz</div>
<a id="L183" name="L183"></a> 183     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/9894.html" title="Multiple referred from 6 places.">addParameter</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L184" name="L184"></a> 184         <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.<a href="../S/5978.html#L1663" title="Defined at 1663 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">mapQNameToJavaName</a> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L185" name="L185"></a> 185         <strong class="reserved">return</strong> <a href="../D/10990.html" title="Multiple defined in 6 places.">addParameter</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <strong class="reserved">false</strong>);
<a id="L186" name="L186"></a> 186     <em class="brace">}</em>
<a id="L187" name="L187"></a> 187 
<div class="comment">
      Add a new global or local parameter if not already in the current frame.
      The 'isDefault' parameter is set to true if the value passed is the
      default value from the <xsl:parameter> element's select attribute or
      element body.</xsl:parameter></div>
<a id="L194" name="L194"></a> 194     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/9894.html" title="Multiple referred from 6 places.">addParameter</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>,
<a id="L195" name="L195"></a> 195         <strong class="reserved">boolean</strong> <a href="../D/25408.html" title="Multiple defined in 4 places.">isDefault</a>)
<a id="L196" name="L196"></a> 196     <em class="brace">{</em>
<a id="L197" name="L197"></a> 197         <em class="comment">// Local parameters need to be re-evaluated for each iteration</em>
<a id="L198" name="L198"></a> 198         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = pframe - 1; i &gt;= pbase; i--) <em class="brace">{</em>
<a id="L199" name="L199"></a> 199             <strong class="reserved">final</strong> <a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a> param = (<a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a>) paramsStack.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L200" name="L200"></a> 200 
<a id="L201" name="L201"></a> 201             <strong class="reserved">if</strong> (param._name.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)) <em class="brace">{</em>
<a id="L202" name="L202"></a> 202                 <em class="comment">// Only overwrite if current value is the default value and</em>
<a id="L203" name="L203"></a> 203                 <em class="comment">// the new value is _NOT_ the default value.</em>
<a id="L204" name="L204"></a> 204                 <strong class="reserved">if</strong> (param._isDefault || !<a href="../D/25408.html" title="Multiple defined in 4 places.">isDefault</a>) <em class="brace">{</em>
<a id="L205" name="L205"></a> 205                     param._value = <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L206" name="L206"></a> 206                     param._isDefault = <a href="../D/25408.html" title="Multiple defined in 4 places.">isDefault</a>;
<a id="L207" name="L207"></a> 207                     <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L208" name="L208"></a> 208                 <em class="brace">}</em>
<a id="L209" name="L209"></a> 209                 <strong class="reserved">return</strong> param._value;
<a id="L210" name="L210"></a> 210             <em class="brace">}</em>
<a id="L211" name="L211"></a> 211         <em class="brace">}</em>
<a id="L212" name="L212"></a> 212 
<a id="L213" name="L213"></a> 213         <em class="comment">// Add new parameter to parameter stack</em>
<a id="L214" name="L214"></a> 214         paramsStack.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(pframe++, <strong class="reserved">new</strong> <a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../D/25408.html" title="Multiple defined in 4 places.">isDefault</a>));
<a id="L215" name="L215"></a> 215         <strong class="reserved">return</strong> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>;
<a id="L216" name="L216"></a> 216     <em class="brace">}</em>
<a id="L217" name="L217"></a> 217 
<div class="comment">
      Clears the parameter stack.</div>
<a id="L221" name="L221"></a> 221     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6000.html#L1247" title="Referred from 1247 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerImpl.java.">clearParameters</a>() <em class="brace">{</em>
<a id="L222" name="L222"></a> 222         pbase = pframe = 0;
<a id="L223" name="L223"></a> 223         paramsStack.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L224" name="L224"></a> 224     <em class="brace">}</em>
<a id="L225" name="L225"></a> 225 
<div class="comment">
      Get the value of a parameter from the current frame or
      <tt>null</tt> if undefined.</div>
<a id="L230" name="L230"></a> 230     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/18250.html" title="Multiple referred from 28 places.">getParameter</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L231" name="L231"></a> 231 
<a id="L232" name="L232"></a> 232         <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = <a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.<a href="../S/5978.html#L1663" title="Defined at 1663 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">mapQNameToJavaName</a> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L233" name="L233"></a> 233 
<a id="L234" name="L234"></a> 234         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = pframe - 1; i &gt;= pbase; i--) <em class="brace">{</em>
<a id="L235" name="L235"></a> 235             <strong class="reserved">final</strong> <a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a> param = (<a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a>)paramsStack.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L236" name="L236"></a> 236             <strong class="reserved">if</strong> (param._name.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>)) <strong class="reserved">return</strong> param._value;
<a id="L237" name="L237"></a> 237         <em class="brace">}</em>
<a id="L238" name="L238"></a> 238         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L239" name="L239"></a> 239     <em class="brace">}</em>
<a id="L240" name="L240"></a> 240 
<div class="comment">
**********************************************************************
      Message handling - implementation of <xsl:message>
     ***********************************************************************</xsl:message></div>
<a id="L244" name="L244"></a> 244 
<a id="L245" name="L245"></a> 245     <em class="comment">// Holds the translet's message handler - used for &lt;xsl:message&gt;.</em>
<a id="L246" name="L246"></a> 246     <em class="comment">// The deault message handler dumps a string stdout, but anything can be</em>
<a id="L247" name="L247"></a> 247     <em class="comment">// used, such as a dialog box for applets, etc.</em>
<a id="L248" name="L248"></a> 248     <strong class="reserved">private</strong> <a href="../D/5538.html" title="Multiple defined in 3 places.">MessageHandler</a> _msgHandler = <strong class="reserved">null</strong>;
<a id="L249" name="L249"></a> 249 
<div class="comment">
      Set the translet's message handler - must implement MessageHandler</div>
<a id="L253" name="L253"></a> 253     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/6000.html#L802" title="Referred from 802 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerImpl.java.">setMessageHandler</a>(<a href="../D/5538.html" title="Multiple defined in 3 places.">MessageHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254         _msgHandler = <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>;
<a id="L255" name="L255"></a> 255     <em class="brace">}</em>
<a id="L256" name="L256"></a> 256 
<div class="comment">
      Pass a message to the message handler - used by Message class.</div>
<a id="L260" name="L260"></a> 260     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/13335.html" title="Multiple referred from 2 places.">displayMessage</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>) <em class="brace">{</em>
<a id="L261" name="L261"></a> 261         <strong class="reserved">if</strong> (_msgHandler == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L262" name="L262"></a> 262             <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.err.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L263" name="L263"></a> 263         <em class="brace">}</em>
<a id="L264" name="L264"></a> 264         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L265" name="L265"></a> 265             _msgHandler.<a href="../D/14968.html" title="Multiple defined in 5 places.">displayMessage</a>(<a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L266" name="L266"></a> 266         <em class="brace">}</em>
<a id="L267" name="L267"></a> 267     <em class="brace">}</em>
<a id="L268" name="L268"></a> 268 
<div class="comment">
**********************************************************************
      Decimal number format symbol handling
     ***********************************************************************</div>
<a id="L272" name="L272"></a> 272 
<a id="L273" name="L273"></a> 273     <em class="comment">// Contains decimal number formatting symbols used by FormatNumberCall</em>
<a id="L274" name="L274"></a> 274     <strong class="reserved">public</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _formatSymbols = <strong class="reserved">null</strong>;
<a id="L275" name="L275"></a> 275 
<div class="comment">
      Adds a DecimalFormat object to the _formatSymbols hashtable.
      The entry is created with the input DecimalFormatSymbols.</div>
<a id="L280" name="L280"></a> 280     <strong class="reserved">public</strong> <strong class="reserved">void</strong> addDecimalFormat(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/2462.html#L71" title="Defined at 71 in src/java/text/DecimalFormatSymbols.java.">DecimalFormatSymbols</a> symbols) <em class="brace">{</em>
<a id="L281" name="L281"></a> 281         <em class="comment">// Instanciate hashtable for formatting symbols if needed</em>
<a id="L282" name="L282"></a> 282         <strong class="reserved">if</strong> (_formatSymbols == <strong class="reserved">null</strong>) _formatSymbols = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L283" name="L283"></a> 283 
<a id="L284" name="L284"></a> 284         <em class="comment">// The name cannot be null - use empty string instead</em>
<a id="L285" name="L285"></a> 285         <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> == <strong class="reserved">null</strong>) <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = EMPTYSTRING;
<a id="L286" name="L286"></a> 286 
<a id="L287" name="L287"></a> 287         <em class="comment">// Construct a DecimalFormat object containing the symbols we got</em>
<a id="L288" name="L288"></a> 288         <strong class="reserved">final</strong> <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a> df = <strong class="reserved">new</strong> <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a>();
<a id="L289" name="L289"></a> 289         <strong class="reserved">if</strong> (symbols != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L290" name="L290"></a> 290             df.<a href="../S/2458.html#L2372" title="Defined at 2372 in src/java/text/DecimalFormat.java.">setDecimalFormatSymbols</a>(symbols);
<a id="L291" name="L291"></a> 291         <em class="brace">}</em>
<a id="L292" name="L292"></a> 292         _formatSymbols.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, df);
<a id="L293" name="L293"></a> 293     <em class="brace">}</em>
<a id="L294" name="L294"></a> 294 
<div class="comment">
      Retrieves a named DecimalFormat object from _formatSymbols hashtable.</div>
<a id="L298" name="L298"></a> 298     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a> getDecimalFormat(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300         <strong class="reserved">if</strong> (_formatSymbols != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301             <em class="comment">// The name cannot be null - use empty string instead</em>
<a id="L302" name="L302"></a> 302             <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> == <strong class="reserved">null</strong>) <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = EMPTYSTRING;
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304             <a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a> df = (<a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a>)_formatSymbols.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L305" name="L305"></a> 305             <strong class="reserved">if</strong> (df == <strong class="reserved">null</strong>) df = (<a href="../S/2458.html#L381" title="Defined at 381 in src/java/text/DecimalFormat.java.">DecimalFormat</a>)_formatSymbols.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(EMPTYSTRING);
<a id="L306" name="L306"></a> 306             <strong class="reserved">return</strong> df;
<a id="L307" name="L307"></a> 307         <em class="brace">}</em>
<a id="L308" name="L308"></a> 308         <strong class="reserved">return</strong>(<strong class="reserved">null</strong>);
<a id="L309" name="L309"></a> 309     <em class="brace">}</em>
<a id="L310" name="L310"></a> 310 
<div class="comment">
      Give the translet an opportunity to perform a prepass on the document
      to extract any information that it can store in an optimized form.
      Currently, it only extracts information about attributes of type ID.</div>
<a id="L317" name="L317"></a> 317     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24952.html" title="Multiple referred from 5 places.">prepassDocument</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>) <em class="brace">{</em>
<a id="L318" name="L318"></a> 318         <a href="../S/5995.html#L437" title="Defined at 437 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setIndexSize</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>.<a href="../D/22527.html" title="Multiple defined in 76 places.">getSize</a>());
<a id="L319" name="L319"></a> 319         <a href="../S/5995.html#L327" title="Defined at 327 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">buildIDIndex</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>);
<a id="L320" name="L320"></a> 320     <em class="brace">}</em>
<a id="L321" name="L321"></a> 321 
<div class="comment">
      Leverages the Key Class to implement the XSLT id() function.
      buildIdIndex creates the index (##id) that Key Class uses.
      The index contains the element node index (int) and Id value (String).</div>
<a id="L327" name="L327"></a> 327     <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../S/5995.html#L319" title="Referred from 319 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">buildIDIndex</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>) <em class="brace">{</em>
<a id="L328" name="L328"></a> 328         <a href="../S/5995.html#L504" title="Defined at 504 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setRootForKeys</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>());
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330         <strong class="reserved">if</strong> (<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a> <strong class="reserved">instanceof</strong> <a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>) <em class="brace">{</em>
<a id="L331" name="L331"></a> 331             <a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a> enhancedDOM = (<a href="../S/5969.html#L37" title="Defined at 37 in src/com/sun/org/apache/xalan/internal/xsltc/DOMEnhancedForDTM.java.">DOMEnhancedForDTM</a>)<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>;
<a id="L332" name="L332"></a> 332 
<a id="L333" name="L333"></a> 333             <em class="comment">// If the input source is DOMSource, the KeyIndex table is not</em>
<a id="L334" name="L334"></a> 334             <em class="comment">// built at this time. It will be built later by the lookupId()</em>
<a id="L335" name="L335"></a> 335             <em class="comment">// and containsId() methods of the KeyIndex class.</em>
<a id="L336" name="L336"></a> 336             <strong class="reserved">if</strong> (enhancedDOM.<a href="../D/24084.html" title="Multiple defined in 2 places.">hasDOMSource</a>()) <em class="brace">{</em>
<a id="L337" name="L337"></a> 337                 <a href="../D/11958.html" title="Multiple defined in 2 places.">buildKeyIndex</a>(ID_INDEX_NAME, <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>);
<a id="L338" name="L338"></a> 338                 <strong class="reserved">return</strong>;
<a id="L339" name="L339"></a> 339             <em class="brace">}</em>
<a id="L340" name="L340"></a> 340             <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L341" name="L341"></a> 341                 <strong class="reserved">final</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> elementsByID = enhancedDOM.<a href="../D/18715.html" title="Multiple defined in 6 places.">getElementsWithIDs</a>();
<a id="L342" name="L342"></a> 342 
<a id="L343" name="L343"></a> 343                 <strong class="reserved">if</strong> (elementsByID == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L344" name="L344"></a> 344                     <strong class="reserved">return</strong>;
<a id="L345" name="L345"></a> 345                 <em class="brace">}</em>
<a id="L346" name="L346"></a> 346 
<a id="L347" name="L347"></a> 347                 <em class="comment">// Given a Hashtable of DTM nodes indexed by ID attribute values,</em>
<a id="L348" name="L348"></a> 348                 <em class="comment">// loop through the table copying information to a KeyIndex</em>
<a id="L349" name="L349"></a> 349                 <em class="comment">// for the mapping from ID attribute value to DTM node</em>
<a id="L350" name="L350"></a> 350                 <strong class="reserved">final</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> idValues = elementsByID.<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>();
<a id="L351" name="L351"></a> 351                 <strong class="reserved">boolean</strong> hasIDValues = <strong class="reserved">false</strong>;
<a id="L352" name="L352"></a> 352 
<a id="L353" name="L353"></a> 353                 <strong class="reserved">while</strong> (idValues.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L354" name="L354"></a> 354                     <strong class="reserved">final</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> idValue = idValues.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L355" name="L355"></a> 355                     <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a> =
<a id="L356" name="L356"></a> 356                             <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>.<a href="../D/20978.html" title="Multiple defined in 6 places.">getNodeHandle</a>(
<a id="L357" name="L357"></a> 357                                         ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>)elementsByID.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(idValue))
<a id="L358" name="L358"></a> 358                                                 .<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>());
<a id="L359" name="L359"></a> 359 
<a id="L360" name="L360"></a> 360                     <a href="../D/11958.html" title="Multiple defined in 2 places.">buildKeyIndex</a>(ID_INDEX_NAME, <a href="../D/15287.html" title="Multiple defined in 20 places.">element</a>, idValue);
<a id="L361" name="L361"></a> 361                     hasIDValues = <strong class="reserved">true</strong>;
<a id="L362" name="L362"></a> 362                 <em class="brace">}</em>
<a id="L363" name="L363"></a> 363 
<a id="L364" name="L364"></a> 364                 <strong class="reserved">if</strong> (hasIDValues) <em class="brace">{</em>
<a id="L365" name="L365"></a> 365                     <a href="../S/5995.html#L522" title="Defined at 522 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setKeyIndexDom</a>(ID_INDEX_NAME, <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>);
<a id="L366" name="L366"></a> 366                 <em class="brace">}</em>
<a id="L367" name="L367"></a> 367             <em class="brace">}</em>
<a id="L368" name="L368"></a> 368         <em class="brace">}</em>
<a id="L369" name="L369"></a> 369     <em class="brace">}</em>
<a id="L370" name="L370"></a> 370 
<div class="comment">
      After constructing the translet object, this method must be called to
      perform any version-specific post-initialization that's required.</div>
<a id="L375" name="L375"></a> 375     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/24862.html" title="Multiple referred from 2 places.">postInitialization</a>() <em class="brace">{</em>
<a id="L376" name="L376"></a> 376         <em class="comment">// If the version of the translet had just one namesArray, split</em>
<a id="L377" name="L377"></a> 377         <em class="comment">// it into multiple fields.</em>
<a id="L378" name="L378"></a> 378         <strong class="reserved">if</strong> (transletVersion &lt; VER_SPLIT_NAMES_ARRAY) <em class="brace">{</em>
<a id="L379" name="L379"></a> 379             <strong class="reserved">int</strong> arraySize = namesArray.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>;
<a id="L380" name="L380"></a> 380             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] newURIsArray = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[arraySize];
<a id="L381" name="L381"></a> 381             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] newNamesArray = <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[arraySize];
<a id="L382" name="L382"></a> 382             <strong class="reserved">int</strong>[] newTypesArray = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[arraySize];
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; arraySize; i++) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a> = namesArray[i];
<a id="L386" name="L386"></a> 386                 <strong class="reserved">int</strong> colonIndex = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>(':');
<a id="L387" name="L387"></a> 387                 <strong class="reserved">int</strong> lNameStartIdx = colonIndex+1;
<a id="L388" name="L388"></a> 388 
<a id="L389" name="L389"></a> 389                 <strong class="reserved">if</strong> (colonIndex &gt; -1) <em class="brace">{</em>
<a id="L390" name="L390"></a> 390                     newURIsArray[i] = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, colonIndex);
<a id="L391" name="L391"></a> 391                 <em class="brace">}</em>
<a id="L392" name="L392"></a> 392 
<a id="L393" name="L393"></a> 393                <em class="comment">// Distinguish attribute and element names.  Attribute has</em>
<a id="L394" name="L394"></a> 394                <em class="comment">// @ before local part of name.</em>
<a id="L395" name="L395"></a> 395                <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(lNameStartIdx) == '@') <em class="brace">{</em>
<a id="L396" name="L396"></a> 396                    lNameStartIdx++;
<a id="L397" name="L397"></a> 397                    newTypesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ATTRIBUTE_NODE;
<a id="L398" name="L398"></a> 398                <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/12321.html" title="Multiple defined in 24 places.">charAt</a>(lNameStartIdx) == '?') <em class="brace">{</em>
<a id="L399" name="L399"></a> 399                    lNameStartIdx++;
<a id="L400" name="L400"></a> 400                    newTypesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.NAMESPACE_NODE;
<a id="L401" name="L401"></a> 401                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L402" name="L402"></a> 402                    newTypesArray[i] = <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.ELEMENT_NODE;
<a id="L403" name="L403"></a> 403                <em class="brace">}</em>
<a id="L404" name="L404"></a> 404                newNamesArray[i] =
<a id="L405" name="L405"></a> 405                           (lNameStartIdx == 0) ? <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>
<a id="L406" name="L406"></a> 406                                                : <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(lNameStartIdx);
<a id="L407" name="L407"></a> 407             <em class="brace">}</em>
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409             namesArray = newNamesArray;
<a id="L410" name="L410"></a> 410             urisArray  = newURIsArray;
<a id="L411" name="L411"></a> 411             typesArray = newTypesArray;
<a id="L412" name="L412"></a> 412         <em class="brace">}</em>
<a id="L413" name="L413"></a> 413 
<a id="L414" name="L414"></a> 414         <em class="comment">// Was translet compiled using a more recent version of the XSLTC</em>
<a id="L415" name="L415"></a> 415         <em class="comment">// compiler than is known by the AbstractTranslet class?  If, so</em>
<a id="L416" name="L416"></a> 416         <em class="comment">// and we've made it this far (which is doubtful), we should give up.</em>
<a id="L417" name="L417"></a> 417         <strong class="reserved">if</strong> (transletVersion &gt; CURRENT_TRANSLET_VERSION) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418             <a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.<a href="../D/31506.html" title="Multiple defined in 4 places.">runTimeError</a>(<a href="../S/5978.html#L65" title="Defined at 65 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/BasisLibrary.java.">BasisLibrary</a>.UNKNOWN_TRANSLET_VERSION_ERR,
<a id="L419" name="L419"></a> 419                                       <strong class="reserved">this</strong>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>());
<a id="L420" name="L420"></a> 420         <em class="brace">}</em>
<a id="L421" name="L421"></a> 421     <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<div class="comment">
**********************************************************************
      Index(es) for <xsl:key> / key() / id()
     ***********************************************************************</xsl:key></div>
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427     <em class="comment">// Container for all indexes for xsl:key elements</em>
<a id="L428" name="L428"></a> 428     <strong class="reserved">private</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _keyIndexes = <strong class="reserved">null</strong>;
<a id="L429" name="L429"></a> 429     <strong class="reserved">private</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>  _emptyKeyIndex = <strong class="reserved">null</strong>;
<a id="L430" name="L430"></a> 430     <strong class="reserved">private</strong> <strong class="reserved">int</strong>       _indexSize = 0;
<a id="L431" name="L431"></a> 431     <strong class="reserved">private</strong> <strong class="reserved">int</strong>       _currentRootForKeys = 0;
<a id="L432" name="L432"></a> 432 
<div class="comment">
      This method is used to pass the largest DOM size to the translet.
      Needed to make sure that the translet can index the whole DOM.</div>
<a id="L437" name="L437"></a> 437     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5995.html#L318" title="Referred from 318 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setIndexSize</a>(<strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438         <strong class="reserved">if</strong> (<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> &gt; _indexSize) _indexSize = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>;
<a id="L439" name="L439"></a> 439     <em class="brace">}</em>
<a id="L440" name="L440"></a> 440 
<div class="comment">
      Creates a KeyIndex object of the desired size - don't want to resize!!!</div>
<a id="L444" name="L444"></a> 444     <strong class="reserved">public</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> createKeyIndex() <em class="brace">{</em>
<a id="L445" name="L445"></a> 445         <strong class="reserved">return</strong>(<strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(_indexSize));
<a id="L446" name="L446"></a> 446     <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<div class="comment">
      Adds a value to a key/id index
        @param name is the name of the index (the key or ##id)
        @param node is the node handle of the node to insert
        @param value is the value that will look up the node in the given index</div>
<a id="L454" name="L454"></a> 454     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10711.html" title="Multiple referred from 4 places.">buildKeyIndex</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>) <em class="brace">{</em>
<a id="L455" name="L455"></a> 455         <strong class="reserved">if</strong> (_keyIndexes == <strong class="reserved">null</strong>) _keyIndexes = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L456" name="L456"></a> 456 
<a id="L457" name="L457"></a> 457         <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>)_keyIndexes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L458" name="L458"></a> 458         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L459" name="L459"></a> 459             _keyIndexes.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(_indexSize));
<a id="L460" name="L460"></a> 460         <em class="brace">}</em>
<a id="L461" name="L461"></a> 461         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>, <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, _currentRootForKeys);
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 
<div class="comment">
      Create an empty KeyIndex in the DOM case
        @param name is the name of the index (the key or ##id)
        @param dom is the DOM</div>
<a id="L469" name="L469"></a> 469     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10711.html" title="Multiple referred from 4 places.">buildKeyIndex</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> dom) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470         <strong class="reserved">if</strong> (_keyIndexes == <strong class="reserved">null</strong>) _keyIndexes = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L471" name="L471"></a> 471 
<a id="L472" name="L472"></a> 472         <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>)_keyIndexes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L473" name="L473"></a> 473         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474             _keyIndexes.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = <strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(_indexSize));
<a id="L475" name="L475"></a> 475         <em class="brace">}</em>
<a id="L476" name="L476"></a> 476         <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>.<a href="../S/6034.html#L415" title="Defined at 415 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">setDom</a>(dom, dom.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>());
<a id="L477" name="L477"></a> 477     <em class="brace">}</em>
<a id="L478" name="L478"></a> 478 
<div class="comment">
      Returns the index for a given key (or id).
      The index implements our internal iterator interface</div>
<a id="L483" name="L483"></a> 483     <strong class="reserved">public</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> <a href="../R/17231.html" title="Multiple referred from 5 places.">getKeyIndex</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L484" name="L484"></a> 484         <em class="comment">// Return an empty key index iterator if none are defined</em>
<a id="L485" name="L485"></a> 485         <strong class="reserved">if</strong> (_keyIndexes == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486             <strong class="reserved">return</strong> (_emptyKeyIndex != <strong class="reserved">null</strong>)
<a id="L487" name="L487"></a> 487                 ? _emptyKeyIndex
<a id="L488" name="L488"></a> 488                 : (_emptyKeyIndex = <strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(1));
<a id="L489" name="L489"></a> 489         <em class="brace">}</em>
<a id="L490" name="L490"></a> 490 
<a id="L491" name="L491"></a> 491         <em class="comment">// Look up the requested key index</em>
<a id="L492" name="L492"></a> 492         <strong class="reserved">final</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> = (<a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>)_keyIndexes.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L493" name="L493"></a> 493 
<a id="L494" name="L494"></a> 494         <em class="comment">// Return an empty key index iterator if the requested index not found</em>
<a id="L495" name="L495"></a> 495         <strong class="reserved">if</strong> (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L496" name="L496"></a> 496             <strong class="reserved">return</strong> (_emptyKeyIndex != <strong class="reserved">null</strong>)
<a id="L497" name="L497"></a> 497                 ? _emptyKeyIndex
<a id="L498" name="L498"></a> 498                 : (_emptyKeyIndex = <strong class="reserved">new</strong> <a href="../S/6034.html#L46" title="Defined at 46 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">KeyIndex</a>(1));
<a id="L499" name="L499"></a> 499         <em class="brace">}</em>
<a id="L500" name="L500"></a> 500 
<a id="L501" name="L501"></a> 501         <strong class="reserved">return</strong>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L502" name="L502"></a> 502     <em class="brace">}</em>
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/28070.html" title="Multiple referred from 2 places.">setRootForKeys</a>(<strong class="reserved">int</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) <em class="brace">{</em>
<a id="L505" name="L505"></a> 505         _currentRootForKeys = <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>;
<a id="L506" name="L506"></a> 506     <em class="brace">}</em>
<a id="L507" name="L507"></a> 507 
<div class="comment">
      This method builds key indexes - it is overridden in the compiled
      translet in cases where the <xsl:key> element is used</xsl:key></div>
<a id="L512" name="L512"></a> 512     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10712.html" title="Multiple referred from 10 places.">buildKeys</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>,
<a id="L513" name="L513"></a> 513                           <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>,
<a id="L514" name="L514"></a> 514                           <strong class="reserved">int</strong> <a href="../S/867.html#L1804" title="Defined at 1804 in src/java/util/HashMap.java.">root</a>) <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a> <em class="brace">{</em>
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516     <em class="brace">}</em>
<a id="L517" name="L517"></a> 517 
<div class="comment">
      This method builds key indexes - it is overridden in the compiled
      translet in cases where the <xsl:key> element is used</xsl:key></div>
<a id="L522" name="L522"></a> 522     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5995.html#L365" title="Referred from 365 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">setKeyIndexDom</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>, <a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>) <em class="brace">{</em>
<a id="L523" name="L523"></a> 523         <a href="../S/5995.html#L483" title="Defined at 483 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">getKeyIndex</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>).<a href="../S/6034.html#L415" title="Defined at 415 in src/com/sun/org/apache/xalan/internal/xsltc/dom/KeyIndex.java.">setDom</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>.<a href="../D/18553.html" title="Multiple defined in 33 places.">getDocument</a>());
<a id="L524" name="L524"></a> 524     <em class="brace">}</em>
<a id="L525" name="L525"></a> 525 
<div class="comment">
**********************************************************************
      DOM cache handling
     ***********************************************************************</div>
<a id="L529" name="L529"></a> 529 
<a id="L530" name="L530"></a> 530     <em class="comment">// Hold the DOM cache (if any) used with this translet</em>
<a id="L531" name="L531"></a> 531     <strong class="reserved">private</strong> <a href="../S/5967.html#L30" title="Defined at 30 in src/com/sun/org/apache/xalan/internal/xsltc/DOMCache.java.">DOMCache</a> _domCache = <strong class="reserved">null</strong>;
<a id="L532" name="L532"></a> 532 
<div class="comment">
      Sets the DOM cache used for additional documents loaded using the
      document() function.</div>
<a id="L537" name="L537"></a> 537     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6000.html#L349" title="Referred from 349 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerImpl.java.">setDOMCache</a>(<a href="../S/5967.html#L30" title="Defined at 30 in src/com/sun/org/apache/xalan/internal/xsltc/DOMCache.java.">DOMCache</a> <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>) <em class="brace">{</em>
<a id="L538" name="L538"></a> 538         _domCache = <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>;
<a id="L539" name="L539"></a> 539     <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 
<div class="comment">
      Returns the DOM cache used for this translet. Used by the LoadDocument
      class (if present) when the document() function is used.</div>
<a id="L545" name="L545"></a> 545     <strong class="reserved">public</strong> <a href="../S/5967.html#L30" title="Defined at 30 in src/com/sun/org/apache/xalan/internal/xsltc/DOMCache.java.">DOMCache</a> <a href="../S/6052.html#L193" title="Referred from 193 in src/com/sun/org/apache/xalan/internal/xsltc/dom/LoadDocument.java.">getDOMCache</a>() <em class="brace">{</em>
<a id="L546" name="L546"></a> 546         <strong class="reserved">return</strong>(_domCache);
<a id="L547" name="L547"></a> 547     <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<div class="comment">
**********************************************************************
      Multiple output document extension.
      See compiler/TransletOutput for actual implementation.
     ***********************************************************************</div>
<a id="L553" name="L553"></a> 553 
<a id="L554" name="L554"></a> 554     <strong class="reserved">public</strong> <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5995.html#L587" title="Referred from 587 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">openOutputHandler</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> filename, <strong class="reserved">boolean</strong> <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>)
<a id="L555" name="L555"></a> 555         <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a>
<a id="L556" name="L556"></a> 556     <em class="brace">{</em>
<a id="L557" name="L557"></a> 557         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L558" name="L558"></a> 558             <strong class="reserved">final</strong> <a href="../S/5984.html#L55" title="Defined at 55 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/output/TransletOutputHandlerFactory.java.">TransletOutputHandlerFactory</a> <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>
<a id="L559" name="L559"></a> 559                 = <a href="../S/5984.html#L55" title="Defined at 55 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/output/TransletOutputHandlerFactory.java.">TransletOutputHandlerFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>();
<a id="L560" name="L560"></a> 560 
<a id="L561" name="L561"></a> 561             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dirStr = <strong class="reserved">new</strong> <a href="../S/1433.html#L149" title="Defined at 149 in src/java/io/File.java.">File</a>(filename).<a href="../D/21392.html" title="Multiple defined in 42 places.">getParent</a>();
<a id="L562" name="L562"></a> 562             <strong class="reserved">if</strong> ((<strong class="reserved">null</strong> != dirStr) &amp;&amp; (dirStr.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; 0)) <em class="brace">{</em>
<a id="L563" name="L563"></a> 563                <a href="../S/1433.html#L149" title="Defined at 149 in src/java/io/File.java.">File</a> dir = <strong class="reserved">new</strong> <a href="../S/1433.html#L149" title="Defined at 149 in src/java/io/File.java.">File</a>(dirStr);
<a id="L564" name="L564"></a> 564                dir.<a href="../S/1433.html#L1339" title="Defined at 1339 in src/java/io/File.java.">mkdirs</a>();
<a id="L565" name="L565"></a> 565             <em class="brace">}</em>
<a id="L566" name="L566"></a> 566 
<a id="L567" name="L567"></a> 567             <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../D/32578.html" title="Multiple defined in 27 places.">setEncoding</a>(_encoding);
<a id="L568" name="L568"></a> 568             <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../S/5984.html#L97" title="Defined at 97 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/output/TransletOutputHandlerFactory.java.">setOutputMethod</a>(_method);
<a id="L569" name="L569"></a> 569             <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../D/33460.html" title="Multiple defined in 13 places.">setOutputStream</a>(<strong class="reserved">new</strong> <a href="../S/1427.html#L38" title="Defined at 38 in src/java/io/BufferedOutputStream.java.">BufferedOutputStream</a>(<strong class="reserved">new</strong> <a href="../S/1382.html#L53" title="Defined at 53 in src/java/io/FileOutputStream.java.">FileOutputStream</a>(filename, <a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>)));
<a id="L570" name="L570"></a> 570             <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../D/33461.html" title="Multiple defined in 2 places.">setOutputType</a>(<a href="../S/5984.html#L55" title="Defined at 55 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/output/TransletOutputHandlerFactory.java.">TransletOutputHandlerFactory</a>.STREAM);
<a id="L571" name="L571"></a> 571 
<a id="L572" name="L572"></a> 572             <strong class="reserved">final</strong> <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>
<a id="L573" name="L573"></a> 573                 = <a href="../D/15962.html" title="Multiple defined in 2 places.">factory</a>.<a href="../S/5984.html#L150" title="Defined at 150 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/output/TransletOutputHandlerFactory.java.">getSerializationHandler</a>();
<a id="L574" name="L574"></a> 574 
<a id="L575" name="L575"></a> 575             <a href="../S/5995.html#L664" title="Defined at 664 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">transferOutputSettings</a>(<a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L576" name="L576"></a> 576             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/34768.html" title="Multiple defined in 61 places.">startDocument</a>();
<a id="L577" name="L577"></a> 577             <strong class="reserved">return</strong> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>;
<a id="L578" name="L578"></a> 578         <em class="brace">}</em>
<a id="L579" name="L579"></a> 579         <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L580" name="L580"></a> 580             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a>(e);
<a id="L581" name="L581"></a> 581         <em class="brace">}</em>
<a id="L582" name="L582"></a> 582     <em class="brace">}</em>
<a id="L583" name="L583"></a> 583 
<a id="L584" name="L584"></a> 584     <strong class="reserved">public</strong> <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5995.html#L587" title="Referred from 587 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">openOutputHandler</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> filename)
<a id="L585" name="L585"></a> 585        <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a>
<a id="L586" name="L586"></a> 586     <em class="brace">{</em>
<a id="L587" name="L587"></a> 587        <strong class="reserved">return</strong> <a href="../D/28525.html" title="Multiple defined in 2 places.">openOutputHandler</a>(filename, <strong class="reserved">false</strong>);
<a id="L588" name="L588"></a> 588     <em class="brace">}</em>
<a id="L589" name="L589"></a> 589 
<a id="L590" name="L590"></a> 590     <strong class="reserved">public</strong> <strong class="reserved">void</strong> closeOutputHandler(<a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>) <em class="brace">{</em>
<a id="L591" name="L591"></a> 591         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L592" name="L592"></a> 592             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/15443.html" title="Multiple defined in 65 places.">endDocument</a>();
<a id="L593" name="L593"></a> 593             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L594" name="L594"></a> 594         <em class="brace">}</em>
<a id="L595" name="L595"></a> 595         <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L596" name="L596"></a> 596             <em class="comment">// what can you do?</em>
<a id="L597" name="L597"></a> 597         <em class="brace">}</em>
<a id="L598" name="L598"></a> 598     <em class="brace">}</em>
<a id="L599" name="L599"></a> 599 
<div class="comment">
**********************************************************************
      Native API transformation methods - _NOT_ JAXP/TrAX
     ***********************************************************************</div>
<a id="L603" name="L603"></a> 603 
<div class="comment">
      Main transform() method - this is overridden by the compiled translet</div>
<a id="L607" name="L607"></a> 607     <strong class="reserved">public</strong> <strong class="reserved">abstract</strong> <strong class="reserved">void</strong> <a href="../R/29426.html" title="Multiple referred from 928 places.">transform</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../S/5885.html#L28" title="Defined at 28 in src/com/sun/org/apache/xml/internal/dtm/DTMAxisIterator.java.">DTMAxisIterator</a> <a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>,
<a id="L608" name="L608"></a> 608                                    <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L609" name="L609"></a> 609         <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a>;
<a id="L610" name="L610"></a> 610 
<div class="comment">
      Calls transform() with a given output handler</div>
<a id="L614" name="L614"></a> 614     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/29426.html" title="Multiple referred from 928 places.">transform</a>(<a href="../S/6026.html#L38" title="Defined at 38 in src/com/sun/org/apache/xalan/internal/xsltc/DOM.java.">DOM</a> <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L615" name="L615"></a> 615         <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a> <em class="brace">{</em>
<a id="L616" name="L616"></a> 616         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L617" name="L617"></a> 617             <a href="../D/35592.html" title="Multiple defined in 22 places.">transform</a>(<a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>, <a href="../D/15104.html" title="Multiple defined in 4 places.">document</a>.<a href="../D/19862.html" title="Multiple defined in 18 places.">getIterator</a>(), <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>);
<a id="L618" name="L618"></a> 618         <em class="brace">}</em> <strong class="reserved">finally</strong> <em class="brace">{</em>
<a id="L619" name="L619"></a> 619             _keyIndexes = <strong class="reserved">null</strong>;
<a id="L620" name="L620"></a> 620         <em class="brace">}</em>
<a id="L621" name="L621"></a> 621     <em class="brace">}</em>
<a id="L622" name="L622"></a> 622 
<div class="comment">
      Used by some compiled code as a shortcut for passing strings to the
      output handler</div>
<a id="L627" name="L627"></a> 627     <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/11056.html" title="Multiple referred from 150 places.">characters</a>(<strong class="reserved">final</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>,
<a id="L628" name="L628"></a> 628                                  <a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>)
<a id="L629" name="L629"></a> 629         <strong class="reserved">throws</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a> <em class="brace">{</em>
<a id="L630" name="L630"></a> 630         <strong class="reserved">if</strong> (<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L631" name="L631"></a> 631            <em class="comment">//final int length = string.length();</em>
<a id="L632" name="L632"></a> 632            <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L633" name="L633"></a> 633                <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/12339.html" title="Multiple defined in 98 places.">characters</a>(<a href="../S/4997.html#L463" title="Defined at 463 in src/com/sun/org/apache/xpath/internal/compiler/Compiler.java.">string</a>);
<a id="L634" name="L634"></a> 634            <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L635" name="L635"></a> 635                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5966.html#L33" title="Defined at 33 in src/com/sun/org/apache/xalan/internal/xsltc/TransletException.java.">TransletException</a>(e);
<a id="L636" name="L636"></a> 636            <em class="brace">}</em>
<a id="L637" name="L637"></a> 637         <em class="brace">}</em>
<a id="L638" name="L638"></a> 638     <em class="brace">}</em>
<a id="L639" name="L639"></a> 639 
<div class="comment">
      Add's a name of an element whose text contents should be output as CDATA</div>
<a id="L643" name="L643"></a> 643     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6000.html#L1011" title="Referred from 1011 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TransformerImpl.java.">addCdataElement</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>) <em class="brace">{</em>
<a id="L644" name="L644"></a> 644         <strong class="reserved">if</strong> (_cdata == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L645" name="L645"></a> 645             _cdata = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L646" name="L646"></a> 646         <em class="brace">}</em>
<a id="L647" name="L647"></a> 647 
<a id="L648" name="L648"></a> 648         <strong class="reserved">int</strong> lastColon = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/26748.html" title="Multiple defined in 44 places.">lastIndexOf</a>(':');
<a id="L649" name="L649"></a> 649 
<a id="L650" name="L650"></a> 650         <strong class="reserved">if</strong> (lastColon &gt; 0) <em class="brace">{</em>
<a id="L651" name="L651"></a> 651             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, lastColon);
<a id="L652" name="L652"></a> 652             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a> = <a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(lastColon+1);
<a id="L653" name="L653"></a> 653             _cdata.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(uri);
<a id="L654" name="L654"></a> 654             _cdata.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/27005.html" title="Multiple defined in 2 places.">localName</a>);
<a id="L655" name="L655"></a> 655         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L656" name="L656"></a> 656             _cdata.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<strong class="reserved">null</strong>);
<a id="L657" name="L657"></a> 657             _cdata.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/27856.html" title="Multiple defined in 46 places.">name</a>);
<a id="L658" name="L658"></a> 658         <em class="brace">}</em>
<a id="L659" name="L659"></a> 659     <em class="brace">}</em>
<a id="L660" name="L660"></a> 660 
<div class="comment">
      Transfer the output settings to the output post-processor</div>
<a id="L664" name="L664"></a> 664     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/5995.html#L575" title="Referred from 575 in src/com/sun/org/apache/xalan/internal/xsltc/runtime/AbstractTranslet.java.">transferOutputSettings</a>(<a href="../S/5585.html#L45" title="Defined at 45 in src/com/sun/org/apache/xml/internal/serializer/SerializationHandler.java.">SerializationHandler</a> <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>) <em class="brace">{</em>
<a id="L665" name="L665"></a> 665         <strong class="reserved">if</strong> (_method != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L666" name="L666"></a> 666             <strong class="reserved">if</strong> (_method.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("xml")) <em class="brace">{</em>
<a id="L667" name="L667"></a> 667                 <strong class="reserved">if</strong> (_standalone != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L668" name="L668"></a> 668                     <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/33994.html" title="Multiple defined in 10 places.">setStandalone</a>(_standalone);
<a id="L669" name="L669"></a> 669                 <em class="brace">}</em>
<a id="L670" name="L670"></a> 670                 <strong class="reserved">if</strong> (_omitHeader) <em class="brace">{</em>
<a id="L671" name="L671"></a> 671                     <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/33418.html" title="Multiple defined in 5 places.">setOmitXMLDeclaration</a>(<strong class="reserved">true</strong>);
<a id="L672" name="L672"></a> 672                 <em class="brace">}</em>
<a id="L673" name="L673"></a> 673                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32109.html" title="Multiple defined in 7 places.">setCdataSectionElements</a>(_cdata);
<a id="L674" name="L674"></a> 674                 <strong class="reserved">if</strong> (_version != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L675" name="L675"></a> 675                     <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/34284.html" title="Multiple defined in 13 places.">setVersion</a>(_version);
<a id="L676" name="L676"></a> 676                 <em class="brace">}</em>
<a id="L677" name="L677"></a> 677                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32919.html" title="Multiple defined in 7 places.">setIndent</a>(_indent);
<a id="L678" name="L678"></a> 678                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32920.html" title="Multiple defined in 5 places.">setIndentAmount</a>(_indentamount);
<a id="L679" name="L679"></a> 679                 <strong class="reserved">if</strong> (_doctypeSystem != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L680" name="L680"></a> 680                     <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32490.html" title="Multiple defined in 5 places.">setDoctype</a>(_doctypeSystem, _doctypePublic);
<a id="L681" name="L681"></a> 681                 <em class="brace">}</em>
<a id="L682" name="L682"></a> 682                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32998.html" title="Multiple defined in 3 places.">setIsStandalone</a>(_isStandalone);
<a id="L683" name="L683"></a> 683             <em class="brace">}</em>
<a id="L684" name="L684"></a> 684             <strong class="reserved">else</strong> <strong class="reserved">if</strong> (_method.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>("html")) <em class="brace">{</em>
<a id="L685" name="L685"></a> 685                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32919.html" title="Multiple defined in 7 places.">setIndent</a>(_indent);
<a id="L686" name="L686"></a> 686                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32490.html" title="Multiple defined in 5 places.">setDoctype</a>(_doctypeSystem, _doctypePublic);
<a id="L687" name="L687"></a> 687                 <strong class="reserved">if</strong> (_mediaType != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L688" name="L688"></a> 688                     <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/33229.html" title="Multiple defined in 5 places.">setMediaType</a>(_mediaType);
<a id="L689" name="L689"></a> 689                 <em class="brace">}</em>
<a id="L690" name="L690"></a> 690             <em class="brace">}</em>
<a id="L691" name="L691"></a> 691         <em class="brace">}</em>
<a id="L692" name="L692"></a> 692         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L693" name="L693"></a> 693             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32109.html" title="Multiple defined in 7 places.">setCdataSectionElements</a>(_cdata);
<a id="L694" name="L694"></a> 694             <strong class="reserved">if</strong> (_version != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L695" name="L695"></a> 695                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/34284.html" title="Multiple defined in 13 places.">setVersion</a>(_version);
<a id="L696" name="L696"></a> 696             <em class="brace">}</em>
<a id="L697" name="L697"></a> 697             <strong class="reserved">if</strong> (_standalone != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/33994.html" title="Multiple defined in 10 places.">setStandalone</a>(_standalone);
<a id="L699" name="L699"></a> 699             <em class="brace">}</em>
<a id="L700" name="L700"></a> 700             <strong class="reserved">if</strong> (_omitHeader) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701                 <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/33418.html" title="Multiple defined in 5 places.">setOmitXMLDeclaration</a>(<strong class="reserved">true</strong>);
<a id="L702" name="L702"></a> 702             <em class="brace">}</em>
<a id="L703" name="L703"></a> 703             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32919.html" title="Multiple defined in 7 places.">setIndent</a>(_indent);
<a id="L704" name="L704"></a> 704             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32490.html" title="Multiple defined in 5 places.">setDoctype</a>(_doctypeSystem, _doctypePublic);
<a id="L705" name="L705"></a> 705             <a href="../S/5398.html#L302" title="Defined at 302 in src/com/sun/org/apache/xerces/internal/jaxp/JAXPValidatorComponent.java.">handler</a>.<a href="../D/32998.html" title="Multiple defined in 3 places.">setIsStandalone</a>(_isStandalone);
<a id="L706" name="L706"></a> 706         <em class="brace">}</em>
<a id="L707" name="L707"></a> 707     <em class="brace">}</em>
<a id="L708" name="L708"></a> 708 
<a id="L709" name="L709"></a> 709     <strong class="reserved">private</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> _auxClasses = <strong class="reserved">null</strong>;
<a id="L710" name="L710"></a> 710 
<a id="L711" name="L711"></a> 711     <strong class="reserved">public</strong> <strong class="reserved">void</strong> addAuxiliaryClass(<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> auxClass) <em class="brace">{</em>
<a id="L712" name="L712"></a> 712         <strong class="reserved">if</strong> (_auxClasses == <strong class="reserved">null</strong>) _auxClasses = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L713" name="L713"></a> 713         _auxClasses.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(auxClass.<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>(), auxClass);
<a id="L714" name="L714"></a> 714     <em class="brace">}</em>
<a id="L715" name="L715"></a> 715 
<a id="L716" name="L716"></a> 716     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6010.html#L414" title="Referred from 414 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java.">setAuxiliaryClasses</a>(<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> auxClasses) <em class="brace">{</em>
<a id="L717" name="L717"></a> 717         _auxClasses = auxClasses;
<a id="L718" name="L718"></a> 718     <em class="brace">}</em>
<a id="L719" name="L719"></a> 719 
<a id="L720" name="L720"></a> 720     <strong class="reserved">public</strong> <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a> <a href="../S/6048.html#L83" title="Referred from 83 in src/com/sun/org/apache/xalan/internal/xsltc/dom/NodeSortRecordFactory.java.">getAuxiliaryClass</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>) <em class="brace">{</em>
<a id="L721" name="L721"></a> 721         <strong class="reserved">if</strong> (_auxClasses == <strong class="reserved">null</strong>) <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L722" name="L722"></a> 722         <strong class="reserved">return</strong>((<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>)_auxClasses.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/12779.html" title="Multiple defined in 4 places.">className</a>));
<a id="L723" name="L723"></a> 723     <em class="brace">}</em>
<a id="L724" name="L724"></a> 724 
<a id="L725" name="L725"></a> 725     <em class="comment">// GTM added (see pg 110)</em>
<a id="L726" name="L726"></a> 726     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/17844.html" title="Multiple referred from 3 places.">getNamesArray</a>() <em class="brace">{</em>
<a id="L727" name="L727"></a> 727         <strong class="reserved">return</strong> namesArray;
<a id="L728" name="L728"></a> 728     <em class="brace">}</em>
<a id="L729" name="L729"></a> 729 
<a id="L730" name="L730"></a> 730     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/19707.html" title="Multiple referred from 3 places.">getUrisArray</a>() <em class="brace">{</em>
<a id="L731" name="L731"></a> 731         <strong class="reserved">return</strong> urisArray;
<a id="L732" name="L732"></a> 732     <em class="brace">}</em>
<a id="L733" name="L733"></a> 733 
<a id="L734" name="L734"></a> 734     <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/19641.html" title="Multiple referred from 3 places.">getTypesArray</a>() <em class="brace">{</em>
<a id="L735" name="L735"></a> 735         <strong class="reserved">return</strong> typesArray;
<a id="L736" name="L736"></a> 736     <em class="brace">}</em>
<a id="L737" name="L737"></a> 737 
<a id="L738" name="L738"></a> 738     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/17848.html" title="Multiple referred from 2 places.">getNamespaceArray</a>() <em class="brace">{</em>
<a id="L739" name="L739"></a> 739         <strong class="reserved">return</strong> namespaceArray;
<a id="L740" name="L740"></a> 740     <em class="brace">}</em>
<a id="L741" name="L741"></a> 741 
<a id="L742" name="L742"></a> 742     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20205.html" title="Multiple referred from 9 places.">hasIdCall</a>() <em class="brace">{</em>
<a id="L743" name="L743"></a> 743         <strong class="reserved">return</strong> _hasIdCall;
<a id="L744" name="L744"></a> 744     <em class="brace">}</em>
<a id="L745" name="L745"></a> 745 
<a id="L746" name="L746"></a> 746     <strong class="reserved">public</strong> <a href="../S/4042.html#L41" title="Defined at 41 in src/javax/xml/transform/Templates.java.">Templates</a> <a href="../R/19417.html" title="Multiple referred from 2 places.">getTemplates</a>() <em class="brace">{</em>
<a id="L747" name="L747"></a> 747         <strong class="reserved">return</strong> _templates;
<a id="L748" name="L748"></a> 748     <em class="brace">}</em>
<a id="L749" name="L749"></a> 749 
<a id="L750" name="L750"></a> 750     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6010.html#L410" title="Referred from 410 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java.">setTemplates</a>(<a href="../S/4042.html#L41" title="Defined at 41 in src/javax/xml/transform/Templates.java.">Templates</a> templates) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751         _templates = templates;
<a id="L752" name="L752"></a> 752     <em class="brace">}</em>
<div class="comment">
      Return the state of the services mechanism feature.</div>
<a id="L756" name="L756"></a> 756     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/30024.html" title="Multiple referred from 7 places.">useServicesMechnism</a>() <em class="brace">{</em>
<a id="L757" name="L757"></a> 757         <strong class="reserved">return</strong> _useServicesMechanism;
<a id="L758" name="L758"></a> 758     <em class="brace">}</em>
<a id="L759" name="L759"></a> 759 
<div class="comment">
      Set the state of the services mechanism feature.</div>
<a id="L763" name="L763"></a> 763     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28168.html" title="Multiple referred from 3 places.">setServicesMechnism</a>(<strong class="reserved">boolean</strong> flag) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         _useServicesMechanism = flag;
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<div class="comment">
      Return allowed protocols for accessing external stylesheet.</div>
<a id="L770" name="L770"></a> 770     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6052.html#L205" title="Referred from 205 in src/com/sun/org/apache/xalan/internal/xsltc/dom/LoadDocument.java.">getAllowedProtocols</a>() <em class="brace">{</em>
<a id="L771" name="L771"></a> 771         <strong class="reserved">return</strong> _accessExternalStylesheet;
<a id="L772" name="L772"></a> 772     <em class="brace">}</em>
<a id="L773" name="L773"></a> 773 
<div class="comment">
      Set allowed protocols for accessing external stylesheet.</div>
<a id="L777" name="L777"></a> 777     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6010.html#L412" title="Referred from 412 in src/com/sun/org/apache/xalan/internal/xsltc/trax/TemplatesImpl.java.">setAllowedProtocols</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> protocols) <em class="brace">{</em>
<a id="L778" name="L778"></a> 778         _accessExternalStylesheet = protocols;
<a id="L779" name="L779"></a> 779     <em class="brace">}</em>
<a id="L780" name="L780"></a> 780 
<div class="comment">
**********************************************************************
      DOMImplementation caching for basis library
     ***********************************************************************</div>
<a id="L784" name="L784"></a> 784     <strong class="reserved">protected</strong> <a href="../S/119.html#L50" title="Defined at 50 in src/org/w3c/dom/DOMImplementation.java.">DOMImplementation</a> _domImplementation = <strong class="reserved">null</strong>;
<a id="L785" name="L785"></a> 785 
<a id="L786" name="L786"></a> 786     <strong class="reserved">public</strong> <a href="../D/2543.html" title="Multiple defined in 2 places.">Document</a> <a href="../R/23540.html" title="Multiple referred from 14 places.">newDocument</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> qname)
<a id="L787" name="L787"></a> 787         <strong class="reserved">throws</strong> <a href="../S/3851.html#L34" title="Defined at 34 in src/javax/xml/parsers/ParserConfigurationException.java.">ParserConfigurationException</a>
<a id="L788" name="L788"></a> 788     <em class="brace">{</em>
<a id="L789" name="L789"></a> 789         <strong class="reserved">if</strong> (_domImplementation == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L790" name="L790"></a> 790             <a href="../S/3849.html#L41" title="Defined at 41 in src/javax/xml/parsers/DocumentBuilderFactory.java.">DocumentBuilderFactory</a> dbf = <a href="../S/6247.html#L35" title="Defined at 35 in src/com/sun/org/apache/xalan/internal/utils/FactoryImpl.java.">FactoryImpl</a>.<a href="../D/18157.html" title="Multiple defined in 2 places.">getDOMFactory</a>(_useServicesMechanism);
<a id="L791" name="L791"></a> 791             _domImplementation = dbf.<a href="../D/27987.html" title="Multiple defined in 2 places.">newDocumentBuilder</a>().<a href="../D/18159.html" title="Multiple defined in 12 places.">getDOMImplementation</a>();
<a id="L792" name="L792"></a> 792         <em class="brace">}</em>
<a id="L793" name="L793"></a> 793         <strong class="reserved">return</strong> _domImplementation.<a href="../D/13812.html" title="Multiple defined in 9 places.">createDocument</a>(uri, qname, <strong class="reserved">null</strong>);
<a id="L794" name="L794"></a> 794     <em class="brace">}</em>
<a id="L795" name="L795"></a> 795 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L122">[^]</a><a href="#L786">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/image/DirectColorModel.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L269">[^]</a><a href="#L1409">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L269" title="Defined at 269.">getRedMask</a></li>
<li><a href="#L279" title="Defined at 279.">getGreenMask</a></li>
<li><a href="#L289" title="Defined at 289.">getBlueMask</a></li>
<li><a href="#L299" title="Defined at 299.">getAlphaMask</a></li>
<li><a href="#L313" title="Defined at 313.">getDefaultRGBComponents</a></li>
<li><a href="#L321" title="Defined at 321.">getsRGBComponentFromsRGB</a></li>
<li><a href="#L335" title="Defined at 335.">getsRGBComponentFromLinearRGB</a></li>
<li><a href="#L368" title="Defined at 368.">getRed</a></li>
<li><a href="#L391" title="Defined at 391.">getGreen</a></li>
<li><a href="#L414" title="Defined at 414.">getBlue</a></li>
<li><a href="#L431" title="Defined at 431.">getAlpha</a></li>
<li><a href="#L453" title="Defined at 453.">getRGB</a></li>
<li><a href="#L498" title="Defined at 498.">getRed</a></li>
<li><a href="#L551" title="Defined at 551.">getGreen</a></li>
<li><a href="#L604" title="Defined at 604.">getBlue</a></li>
<li><a href="#L654" title="Defined at 654.">getAlpha</a></li>
<li><a href="#L702" title="Defined at 702.">getRGB</a></li>
<li><a href="#L758" title="Defined at 758.">getDataElements</a></li>
<li><a href="#L926" title="Defined at 926.">getComponents</a></li>
<li><a href="#L977" title="Defined at 977.">getComponents</a></li>
<li><a href="#L1013" title="Defined at 1013.">createCompatibleWritableRaster</a></li>
<li><a href="#L1063" title="Defined at 1063.">getDataElement</a></li>
<li><a href="#L1113" title="Defined at 1113.">getDataElements</a></li>
<li><a href="#L1176" title="Defined at 1176.">coerceData</a></li>
<li><a href="#L1353" title="Defined at 1353.">isCompatibleRaster</a></li>
<li><a href="#L1376" title="Defined at 1376.">setFields</a></li>
<li><a href="#L1409" title="Defined at 1409.">toString</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.image;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.awt.color.ColorSpace;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.Transparency;
<a id="L30" name="L30"></a>  30 
<div class="comment">
  The <code>DirectColorModel</code> class is a <code>ColorModel</code>
  class that works with pixel values that represent RGB
  color and alpha information as separate samples and that pack all
  samples for a single pixel into a single int, short, or byte quantity.
  This class can be used only with ColorSpaces of type ColorSpace.TYPE_RGB.
  In addition, for each component of the ColorSpace, the minimum
  normalized component value obtained via the <code>getMinValue()</code>
  method of ColorSpace must be 0.0, and the maximum value obtained via
  the <code>getMaxValue()</code> method must be 1.0 (these min/max
  values are typical for RGB spaces).
  There must be three color samples in the pixel values and there can
  be a single alpha sample.  For those methods that use a primitive array
  pixel representation of type <code>transferType</code>, the array
  length is always one.  The transfer
  types supported are DataBuffer.TYPE_BYTE,
  DataBuffer.TYPE_USHORT, and DataBuffer.TYPE_INT.
  Color and alpha samples are stored in the single
  element of the array in bits indicated by bit masks.  Each bit mask
  must be contiguous and masks must not overlap.  The same masks apply to
  the single int pixel representation used by other methods.  The
  correspondence of masks and color/alpha samples is as follows:
  <ul><li> Masks are identified by indices running from 0 through 2
  if no alpha is present, or 3 if an alpha is present.
  </li><li> The first three indices refer to color samples;
  index 0 corresponds to red, index 1 to green, and index 2 to blue.
  </li><li> Index 3 corresponds to the alpha sample, if present.
  </li></ul>
  <p>
  The translation from pixel values to color/alpha components for
  display or processing purposes is a one-to-one correspondence of
  samples to components.  A <code>DirectColorModel</code> is
  typically used with image data which uses masks to define packed
  samples.  For example, a <code>DirectColorModel</code> can be used in
  conjunction with a <code>SinglePixelPackedSampleModel</code> to
  construct a {@link BufferedImage}.  Normally the masks used by the
  <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> and the <code>ColorModel</code> would be the
  same.  However, if they are different, the color interpretation
  of pixel data will be done according to the masks of the
  <code>ColorModel</code>.
  </p><p>
  A single int pixel representation is valid for all objects of this
  class, since it is always possible to represent pixel values used with
  this class in a single int.  Therefore, methods which use this
  representation will not throw an <code>IllegalArgumentException</code>
  due to an invalid pixel value.
  </p><p>
  This color model is similar to an X11 TrueColor visual.
  The default RGB ColorModel specified by the
  {@link ColorModel#getRGBdefault() getRGBdefault} method is a
  <code>DirectColorModel</code> with the following parameters:
  </p><pre>  Number of bits:        32
  Red mask:              0x00ff0000
  Green mask:            0x0000ff00
  Blue mask:             0x000000ff
  Alpha mask:            0xff000000
  Color space:           sRGB
  isAlphaPremultiplied:  False
  Transparency:          Transparency.TRANSLUCENT
  transferType:          DataBuffer.TYPE_INT
  </pre>
  <p>
  Many of the methods in this class are final. This is because the
  underlying native graphics code makes assumptions about the layout
  and operation of this class and those assumptions are reflected in
  the implementations of the methods here that are marked final.  You
  can subclass this class for other reasons, but you cannot override
  or modify the behavior of those methods.
  @see ColorModel
  @see ColorSpace
  @see SinglePixelPackedSampleModel
  @see BufferedImage
  @see ColorModel#getRGBdefault</p></div>
<a id="L109" name="L109"></a> 109 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/2271.html" title="Multiple referred from 45 places.">DirectColorModel</a> <strong class="reserved">extends</strong> <a href="../S/2272.html#L87" title="Defined at 87 in src/java/awt/image/PackedColorModel.java.">PackedColorModel</a> <em class="brace">{</em>
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <strong class="reserved">int</strong> red_mask;
<a id="L111" name="L111"></a> 111     <strong class="reserved">private</strong> <strong class="reserved">int</strong> green_mask;
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <strong class="reserved">int</strong> blue_mask;
<a id="L113" name="L113"></a> 113     <strong class="reserved">private</strong> <strong class="reserved">int</strong> alpha_mask;
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <strong class="reserved">int</strong> red_offset;
<a id="L115" name="L115"></a> 115     <strong class="reserved">private</strong> <strong class="reserved">int</strong> green_offset;
<a id="L116" name="L116"></a> 116     <strong class="reserved">private</strong> <strong class="reserved">int</strong> blue_offset;
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <strong class="reserved">int</strong> alpha_offset;
<a id="L118" name="L118"></a> 118     <strong class="reserved">private</strong> <strong class="reserved">int</strong> red_scale;
<a id="L119" name="L119"></a> 119     <strong class="reserved">private</strong> <strong class="reserved">int</strong> green_scale;
<a id="L120" name="L120"></a> 120     <strong class="reserved">private</strong> <strong class="reserved">int</strong> blue_scale;
<a id="L121" name="L121"></a> 121     <strong class="reserved">private</strong> <strong class="reserved">int</strong> alpha_scale;
<a id="L122" name="L122"></a> 122     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> is_LinearRGB;
<a id="L123" name="L123"></a> 123     <strong class="reserved">private</strong> <strong class="reserved">int</strong> lRGBprecision;
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] tosRGB8LUT;
<a id="L125" name="L125"></a> 125     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] fromsRGB8LUT8;
<a id="L126" name="L126"></a> 126     <strong class="reserved">private</strong> <strong class="reserved">short</strong>[] fromsRGB8LUT16;
<a id="L127" name="L127"></a> 127 
<div class="comment">
      Constructs a <code>DirectColorModel</code> from the specified masks
      that indicate which bits in an <code>int</code> pixel representation
      contain the red, green and blue color samples.  As pixel values do not
      contain alpha information, all pixels are treated as opaque, which
      means that alpha&nbsp;=&nbsp;1.0.  All of the bits
      in each mask must be contiguous and fit in the specified number
      of least significant bits of an <code>int</code> pixel representation.
       The <code>ColorSpace</code> is the default sRGB space. The
      transparency value is Transparency.OPAQUE.  The transfer type
      is the smallest of DataBuffer.TYPE_BYTE, DataBuffer.TYPE_USHORT,
      or DataBuffer.TYPE_INT that can hold a single pixel.
      @param bits the number of bits in the pixel values; for example,
              the sum of the number of bits in the masks.
      @param rmask specifies a mask indicating which bits in an
              integer pixel contain the red component
      @param gmask specifies a mask indicating which bits in an
              integer pixel contain the green component
      @param bmask specifies a mask indicating which bits in an
              integer pixel contain the blue component</div>
<a id="L150" name="L150"></a> 150     <strong class="reserved">public</strong> DirectColorModel(<strong class="reserved">int</strong> bits,
<a id="L151" name="L151"></a> 151                             <strong class="reserved">int</strong> rmask, <strong class="reserved">int</strong> gmask, <strong class="reserved">int</strong> bmask) <em class="brace">{</em>
<a id="L152" name="L152"></a> 152         <strong class="reserved">this</strong>(bits, rmask, gmask, bmask, 0);
<a id="L153" name="L153"></a> 153     <em class="brace">}</em>
<a id="L154" name="L154"></a> 154 
<div class="comment">
      Constructs a <code>DirectColorModel</code> from the specified masks
      that indicate which bits in an <code>int</code> pixel representation
      contain the red, green and blue color samples and the alpha sample,
      if present.  If <code>amask</code> is 0, pixel values do not contain
      alpha information and all pixels are treated as opaque, which means
      that alpha&nbsp;=&nbsp;1.0.  All of the bits in each mask must
      be contiguous and fit in the specified number of least significant bits
      of an <code>int</code> pixel representation.  Alpha, if present, is not
      premultiplied.  The <code>ColorSpace</code> is the default sRGB space.
      The transparency value is Transparency.OPAQUE if no alpha is
      present, or Transparency.TRANSLUCENT otherwise.  The transfer type
      is the smallest of DataBuffer.TYPE_BYTE, DataBuffer.TYPE_USHORT,
      or DataBuffer.TYPE_INT that can hold a single pixel.
      @param bits the number of bits in the pixel values; for example,
              the sum of the number of bits in the masks.
      @param rmask specifies a mask indicating which bits in an
              integer pixel contain the red component
      @param gmask specifies a mask indicating which bits in an
              integer pixel contain the green component
      @param bmask specifies a mask indicating which bits in an
              integer pixel contain the blue component
      @param amask specifies a mask indicating which bits in an
              integer pixel contain the alpha component</div>
<a id="L180" name="L180"></a> 180     <strong class="reserved">public</strong> DirectColorModel(<strong class="reserved">int</strong> bits, <strong class="reserved">int</strong> rmask, <strong class="reserved">int</strong> gmask,
<a id="L181" name="L181"></a> 181                             <strong class="reserved">int</strong> bmask, <strong class="reserved">int</strong> amask) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182         <strong class="reserved">super</strong> (<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a>.<a href="../D/19762.html" title="Multiple defined in 157 places.">getInstance</a>(<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a>.CS_sRGB),
<a id="L183" name="L183"></a> 183                bits, rmask, gmask, bmask, amask, <strong class="reserved">false</strong>,
<a id="L184" name="L184"></a> 184                amask == 0 ? <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.OPAQUE : <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.TRANSLUCENT,
<a id="L185" name="L185"></a> 185                <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1682" title="Defined at 1682 in src/java/awt/image/ColorModel.java.">getDefaultTransferType</a>(bits));
<a id="L186" name="L186"></a> 186         <a href="../D/32692.html" title="Multiple defined in 7 places.">setFields</a>();
<a id="L187" name="L187"></a> 187     <em class="brace">}</em>
<a id="L188" name="L188"></a> 188 
<div class="comment">
      Constructs a <code>DirectColorModel</code> from the specified
      parameters.  Color components are in the specified
      <code>ColorSpace</code>, which must be of type ColorSpace.TYPE_RGB
      and have minimum normalized component values which are all 0.0
      and maximum values which are all 1.0.
      The masks specify which bits in an <code>int</code> pixel
      representation contain the red, green and blue color samples and
      the alpha sample, if present.  If <code>amask</code> is 0, pixel
      values do not contain alpha information and all pixels are treated
      as opaque, which means that alpha&nbsp;=&nbsp;1.0.  All of the
      bits in each mask must be contiguous and fit in the specified number
      of least significant bits of an <code>int</code> pixel
      representation.  If there is alpha, the <code>boolean</code>
      <code>isAlphaPremultiplied</code> specifies how to interpret
      color and alpha samples in pixel values.  If the <code>boolean</code>
      is <code>true</code>, color samples are assumed to have been
      multiplied by the alpha sample.  The transparency value is
      Transparency.OPAQUE, if no alpha is present, or
      Transparency.TRANSLUCENT otherwise.  The transfer type
      is the type of primitive array used to represent pixel values and
      must be one of DataBuffer.TYPE_BYTE, DataBuffer.TYPE_USHORT, or
      DataBuffer.TYPE_INT.
      @param space the specified <code>ColorSpace</code>
      @param bits the number of bits in the pixel values; for example,
              the sum of the number of bits in the masks.
      @param rmask specifies a mask indicating which bits in an
              integer pixel contain the red component
      @param gmask specifies a mask indicating which bits in an
              integer pixel contain the green component
      @param bmask specifies a mask indicating which bits in an
              integer pixel contain the blue component
      @param amask specifies a mask indicating which bits in an
              integer pixel contain the alpha component
      @param isAlphaPremultiplied <code>true</code> if color samples are
             premultiplied by the alpha sample; <code>false</code> otherwise
      @param transferType the type of array used to represent pixel values
      @throws IllegalArgumentException if <code>space</code> is not a
              TYPE_RGB space or if the min/max normalized component
              values are not 0.0/1.0.</div>
<a id="L230" name="L230"></a> 230     <strong class="reserved">public</strong> DirectColorModel(<a href="../S/2159.html#L98" title="Defined at 98 in src/java/awt/color/ColorSpace.java.">ColorSpace</a> space, <strong class="reserved">int</strong> bits, <strong class="reserved">int</strong> rmask,
<a id="L231" name="L231"></a> 231                             <strong class="reserved">int</strong> gmask, <strong class="reserved">int</strong> bmask, <strong class="reserved">int</strong> amask,
<a id="L232" name="L232"></a> 232                             <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L233" name="L233"></a> 233                             <strong class="reserved">int</strong> transferType) <em class="brace">{</em>
<a id="L234" name="L234"></a> 234         <strong class="reserved">super</strong> (space, bits, rmask, gmask, bmask, amask,
<a id="L235" name="L235"></a> 235                <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L236" name="L236"></a> 236                amask == 0 ? <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.OPAQUE : <a href="../S/2170.html#L34" title="Defined at 34 in src/java/awt/Transparency.java.">Transparency</a>.TRANSLUCENT,
<a id="L237" name="L237"></a> 237                transferType);
<a id="L238" name="L238"></a> 238         <strong class="reserved">if</strong> (<a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1705" title="Defined at 1705 in src/java/awt/image/ColorModel.java.">isLinearRGBspace</a>(colorSpace)) <em class="brace">{</em>
<a id="L239" name="L239"></a> 239             is_LinearRGB = <strong class="reserved">true</strong>;
<a id="L240" name="L240"></a> 240             <strong class="reserved">if</strong> (maxBits &lt;= 8) <em class="brace">{</em>
<a id="L241" name="L241"></a> 241                 lRGBprecision = 8;
<a id="L242" name="L242"></a> 242                 tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1717" title="Defined at 1717 in src/java/awt/image/ColorModel.java.">getLinearRGB8TosRGB8LUT</a>();
<a id="L243" name="L243"></a> 243                 fromsRGB8LUT8 = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1740" title="Defined at 1740 in src/java/awt/image/ColorModel.java.">getsRGB8ToLinearRGB8LUT</a>();
<a id="L244" name="L244"></a> 244             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L245" name="L245"></a> 245                 lRGBprecision = 16;
<a id="L246" name="L246"></a> 246                 tosRGB8LUT = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1758" title="Defined at 1758 in src/java/awt/image/ColorModel.java.">getLinearRGB16TosRGB8LUT</a>();
<a id="L247" name="L247"></a> 247                 fromsRGB8LUT16 = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L1777" title="Defined at 1777 in src/java/awt/image/ColorModel.java.">getsRGB8ToLinearRGB16LUT</a>();
<a id="L248" name="L248"></a> 248             <em class="brace">}</em>
<a id="L249" name="L249"></a> 249         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (!is_sRGB) <em class="brace">{</em>
<a id="L250" name="L250"></a> 250             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; 3; i++) <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                 <em class="comment">// super constructor checks that space is TYPE_RGB</em>
<a id="L252" name="L252"></a> 252                 <em class="comment">// check here that min/max are all 0.0/1.0</em>
<a id="L253" name="L253"></a> 253                 <strong class="reserved">if</strong> ((space.<a href="../D/20649.html" title="Multiple defined in 5 places.">getMinValue</a>(i) != 0.0f) ||
<a id="L254" name="L254"></a> 254                     (space.<a href="../D/20486.html" title="Multiple defined in 5 places.">getMaxValue</a>(i) != 1.0f)) <em class="brace">{</em>
<a id="L255" name="L255"></a> 255                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>(
<a id="L256" name="L256"></a> 256                         "Illegal min/max RGB component value");
<a id="L257" name="L257"></a> 257                 <em class="brace">}</em>
<a id="L258" name="L258"></a> 258             <em class="brace">}</em>
<a id="L259" name="L259"></a> 259         <em class="brace">}</em>
<a id="L260" name="L260"></a> 260         <a href="../D/32692.html" title="Multiple defined in 7 places.">setFields</a>();
<a id="L261" name="L261"></a> 261     <em class="brace">}</em>
<a id="L262" name="L262"></a> 262 
<div class="comment">
      Returns the mask indicating which bits in an <code>int</code> pixel
      representation contain the red color component.
      @return the mask, which indicates which bits of the <code>int</code>
              pixel representation contain the red color sample.</div>
<a id="L269" name="L269"></a> 269     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18631.html" title="Multiple referred from 8 places.">getRedMask</a>() <em class="brace">{</em>
<a id="L270" name="L270"></a> 270         <strong class="reserved">return</strong> maskArray[0];
<a id="L271" name="L271"></a> 271     <em class="brace">}</em>
<a id="L272" name="L272"></a> 272 
<div class="comment">
      Returns the mask indicating which bits in an <code>int</code> pixel
      representation contain the green color component.
      @return the mask, which indicates which bits of the <code>int</code>
              pixel representation contain the green color sample.</div>
<a id="L279" name="L279"></a> 279     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16820.html" title="Multiple referred from 8 places.">getGreenMask</a>() <em class="brace">{</em>
<a id="L280" name="L280"></a> 280         <strong class="reserved">return</strong> maskArray[1];
<a id="L281" name="L281"></a> 281     <em class="brace">}</em>
<a id="L282" name="L282"></a> 282 
<div class="comment">
      Returns the mask indicating which bits in an <code>int</code> pixel
      representation contain the blue color component.
      @return the mask, which indicates which bits of the <code>int</code>
              pixel representation contain the blue color sample.</div>
<a id="L289" name="L289"></a> 289     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15291.html" title="Multiple referred from 8 places.">getBlueMask</a>() <em class="brace">{</em>
<a id="L290" name="L290"></a> 290         <strong class="reserved">return</strong> maskArray[2];
<a id="L291" name="L291"></a> 291     <em class="brace">}</em>
<a id="L292" name="L292"></a> 292 
<div class="comment">
      Returns the mask indicating which bits in an <code>int</code> pixel
      representation contain the alpha component.
      @return the mask, which indicates which bits of the <code>int</code>
              pixel representation contain the alpha sample.</div>
<a id="L299" name="L299"></a> 299     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15035.html" title="Multiple referred from 4 places.">getAlphaMask</a>() <em class="brace">{</em>
<a id="L300" name="L300"></a> 300         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L301" name="L301"></a> 301             <strong class="reserved">return</strong> maskArray[3];
<a id="L302" name="L302"></a> 302         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L303" name="L303"></a> 303             <strong class="reserved">return</strong> 0;
<a id="L304" name="L304"></a> 304         <em class="brace">}</em>
<a id="L305" name="L305"></a> 305     <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<a id="L307" name="L307"></a> 307 
<div class="comment">
      Given an int pixel in this ColorModel's ColorSpace, converts
      it to the default sRGB ColorSpace and returns the R, G, and B
      components as float values between 0.0 and 1.0.</div>
<a id="L313" name="L313"></a> 313     <strong class="reserved">private</strong> <strong class="reserved">float</strong>[] <a href="../R/16067.html" title="Multiple referred from 4 places.">getDefaultRGBComponents</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L314" name="L314"></a> 314         <strong class="reserved">int</strong> components[] = <a href="../D/17883.html" title="Multiple defined in 18 places.">getComponents</a>(pixel, <strong class="reserved">null</strong>, 0);
<a id="L315" name="L315"></a> 315         <strong class="reserved">float</strong> norm[] = <a href="../D/21011.html" title="Multiple defined in 4 places.">getNormalizedComponents</a>(components, 0, <strong class="reserved">null</strong>, 0);
<a id="L316" name="L316"></a> 316         <em class="comment">// Note that getNormalizedComponents returns non-premultiplied values</em>
<a id="L317" name="L317"></a> 317         <strong class="reserved">return</strong> colorSpace.<a href="../D/35471.html" title="Multiple defined in 3 places.">toRGB</a>(norm);
<a id="L318" name="L318"></a> 318     <em class="brace">}</em>
<a id="L319" name="L319"></a> 319 
<a id="L320" name="L320"></a> 320 
<a id="L321" name="L321"></a> 321     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20018.html" title="Multiple referred from 3 places.">getsRGBComponentFromsRGB</a>(<strong class="reserved">int</strong> pixel, <strong class="reserved">int</strong> idx) <em class="brace">{</em>
<a id="L322" name="L322"></a> 322         <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = ((pixel &amp; maskArray[idx]) &gt;&gt;&gt; maskOffsets[idx]);
<a id="L323" name="L323"></a> 323         <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L324" name="L324"></a> 324             <strong class="reserved">int</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = ((pixel &amp; maskArray[3]) &gt;&gt;&gt; maskOffsets[3]);
<a id="L325" name="L325"></a> 325             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == 0) ? 0 :
<a id="L326" name="L326"></a> 326                          (<strong class="reserved">int</strong>) (((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> * scaleFactors[idx]) * 255.0f /
<a id="L327" name="L327"></a> 327                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> * scaleFactors[3])) + 0.5f);
<a id="L328" name="L328"></a> 328         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (scaleFactors[idx] != 1.0f) <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<strong class="reserved">int</strong>) ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> * scaleFactors[idx]) + 0.5f);
<a id="L330" name="L330"></a> 330         <em class="brace">}</em>
<a id="L331" name="L331"></a> 331         <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L332" name="L332"></a> 332     <em class="brace">}</em>
<a id="L333" name="L333"></a> 333 
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/20017.html" title="Multiple referred from 3 places.">getsRGBComponentFromLinearRGB</a>(<strong class="reserved">int</strong> pixel, <strong class="reserved">int</strong> idx) <em class="brace">{</em>
<a id="L336" name="L336"></a> 336         <strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = ((pixel &amp; maskArray[idx]) &gt;&gt;&gt; maskOffsets[idx]);
<a id="L337" name="L337"></a> 337         <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L338" name="L338"></a> 338             <strong class="reserved">float</strong> factor = (<strong class="reserved">float</strong>) ((1 &lt;&lt; lRGBprecision) - 1);
<a id="L339" name="L339"></a> 339             <strong class="reserved">int</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = ((pixel &amp; maskArray[3]) &gt;&gt;&gt; maskOffsets[3]);
<a id="L340" name="L340"></a> 340             <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> == 0) ? 0 :
<a id="L341" name="L341"></a> 341                          (<strong class="reserved">int</strong>) (((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> * scaleFactors[idx]) * factor /
<a id="L342" name="L342"></a> 342                                  (<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> * scaleFactors[3])) + 0.5f);
<a id="L343" name="L343"></a> 343         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (nBits[idx] != lRGBprecision) <em class="brace">{</em>
<a id="L344" name="L344"></a> 344             <strong class="reserved">if</strong> (lRGBprecision == 16) <em class="brace">{</em>
<a id="L345" name="L345"></a> 345                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<strong class="reserved">int</strong>) ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> * scaleFactors[idx] * 257.0f) + 0.5f);
<a id="L346" name="L346"></a> 346             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L347" name="L347"></a> 347                 <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<strong class="reserved">int</strong>) ((<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> * scaleFactors[idx]) + 0.5f);
<a id="L348" name="L348"></a> 348             <em class="brace">}</em>
<a id="L349" name="L349"></a> 349         <em class="brace">}</em>
<a id="L350" name="L350"></a> 350         <em class="comment">// now range of c is 0-255 or 0-65535, depending on lRGBprecision</em>
<a id="L351" name="L351"></a> 351         <strong class="reserved">return</strong> tosRGB8LUT[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] &amp; 0xff;
<a id="L352" name="L352"></a> 352     <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<a id="L354" name="L354"></a> 354 
<div class="comment">
      Returns the red color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      as an <code>int</code>.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the red value
      is 0.
      @param pixel the specified pixel
      @return the red color component for the specified pixel, from
              0 to 255 in the sRGB <code>ColorSpace</code>.</div>
<a id="L368" name="L368"></a> 368     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18630.html" title="Multiple referred from 50 places.">getRed</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L369" name="L369"></a> 369         <strong class="reserved">if</strong> (is_sRGB) <em class="brace">{</em>
<a id="L370" name="L370"></a> 370             <strong class="reserved">return</strong> <a href="../S/2270.html#L321" title="Defined at 321 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromsRGB</a>(pixel, 0);
<a id="L371" name="L371"></a> 371         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearRGB) <em class="brace">{</em>
<a id="L372" name="L372"></a> 372             <strong class="reserved">return</strong> <a href="../S/2270.html#L335" title="Defined at 335 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromLinearRGB</a>(pixel, 0);
<a id="L373" name="L373"></a> 373         <em class="brace">}</em>
<a id="L374" name="L374"></a> 374         <strong class="reserved">float</strong> rgb[] = <a href="../S/2270.html#L313" title="Defined at 313 in src/java/awt/image/DirectColorModel.java.">getDefaultRGBComponents</a>(pixel);
<a id="L375" name="L375"></a> 375         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (rgb[0] * 255.0f + 0.5f);
<a id="L376" name="L376"></a> 376     <em class="brace">}</em>
<a id="L377" name="L377"></a> 377 
<div class="comment">
      Returns the green color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      as an <code>int</code>.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the green value
      is 0.
      @param pixel the specified pixel
      @return the green color component for the specified pixel, from
              0 to 255 in the sRGB <code>ColorSpace</code>.</div>
<a id="L391" name="L391"></a> 391     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16819.html" title="Multiple referred from 45 places.">getGreen</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L392" name="L392"></a> 392         <strong class="reserved">if</strong> (is_sRGB) <em class="brace">{</em>
<a id="L393" name="L393"></a> 393             <strong class="reserved">return</strong> <a href="../S/2270.html#L321" title="Defined at 321 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromsRGB</a>(pixel, 1);
<a id="L394" name="L394"></a> 394         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearRGB) <em class="brace">{</em>
<a id="L395" name="L395"></a> 395             <strong class="reserved">return</strong> <a href="../S/2270.html#L335" title="Defined at 335 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromLinearRGB</a>(pixel, 1);
<a id="L396" name="L396"></a> 396         <em class="brace">}</em>
<a id="L397" name="L397"></a> 397         <strong class="reserved">float</strong> rgb[] = <a href="../S/2270.html#L313" title="Defined at 313 in src/java/awt/image/DirectColorModel.java.">getDefaultRGBComponents</a>(pixel);
<a id="L398" name="L398"></a> 398         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (rgb[1] * 255.0f + 0.5f);
<a id="L399" name="L399"></a> 399     <em class="brace">}</em>
<a id="L400" name="L400"></a> 400 
<div class="comment">
      Returns the blue color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      as an <code>int</code>.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the blue value
      is 0.
      @param pixel the specified pixel
      @return the blue color component for the specified pixel, from
              0 to 255 in the sRGB <code>ColorSpace</code>.</div>
<a id="L414" name="L414"></a> 414     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15290.html" title="Multiple referred from 45 places.">getBlue</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415         <strong class="reserved">if</strong> (is_sRGB) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416             <strong class="reserved">return</strong> <a href="../S/2270.html#L321" title="Defined at 321 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromsRGB</a>(pixel, 2);
<a id="L417" name="L417"></a> 417         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (is_LinearRGB) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418             <strong class="reserved">return</strong> <a href="../S/2270.html#L335" title="Defined at 335 in src/java/awt/image/DirectColorModel.java.">getsRGBComponentFromLinearRGB</a>(pixel, 2);
<a id="L419" name="L419"></a> 419         <em class="brace">}</em>
<a id="L420" name="L420"></a> 420         <strong class="reserved">float</strong> rgb[] = <a href="../S/2270.html#L313" title="Defined at 313 in src/java/awt/image/DirectColorModel.java.">getDefaultRGBComponents</a>(pixel);
<a id="L421" name="L421"></a> 421         <strong class="reserved">return</strong> (<strong class="reserved">int</strong>) (rgb[2] * 255.0f + 0.5f);
<a id="L422" name="L422"></a> 422     <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<div class="comment">
      Returns the alpha component for the specified pixel, scaled
      from 0 to 255.  The pixel value is specified as an <code>int</code>.
      @param pixel the specified pixel
      @return the value of the alpha component of <code>pixel</code>
              from 0 to 255.</div>
<a id="L431" name="L431"></a> 431     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15034.html" title="Multiple referred from 34 places.">getAlpha</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L432" name="L432"></a> 432         <strong class="reserved">if</strong> (!supportsAlpha) <strong class="reserved">return</strong> 255;
<a id="L433" name="L433"></a> 433         <strong class="reserved">int</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = ((pixel &amp; maskArray[3]) &gt;&gt;&gt; maskOffsets[3]);
<a id="L434" name="L434"></a> 434         <strong class="reserved">if</strong> (scaleFactors[3] != 1.0f) <em class="brace">{</em>
<a id="L435" name="L435"></a> 435             <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> = (<strong class="reserved">int</strong>)(<a href="../D/10513.html" title="Multiple defined in 3 places.">a</a> * scaleFactors[3] + 0.5f);
<a id="L436" name="L436"></a> 436         <em class="brace">}</em>
<a id="L437" name="L437"></a> 437         <strong class="reserved">return</strong> <a href="../D/10513.html" title="Multiple defined in 3 places.">a</a>;
<a id="L438" name="L438"></a> 438     <em class="brace">}</em>
<a id="L439" name="L439"></a> 439 
<div class="comment">
      Returns the color/alpha components of the pixel in the default
      RGB color model format.  A color conversion is done if necessary.
      The pixel value is specified as an <code>int</code>.
      The returned value is in a non pre-multiplied format.  Thus, if
      the alpha is premultiplied, this method divides it out of the
      color components.  If the alpha value is 0, for example, the color
      values are each 0.
      @param pixel the specified pixel
      @return the RGB value of the color/alpha components of the specified
              pixel.
      @see ColorModel#getRGBdefault</div>
<a id="L453" name="L453"></a> 453     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18575.html" title="Multiple referred from 57 places.">getRGB</a>(<strong class="reserved">int</strong> pixel) <em class="brace">{</em>
<a id="L454" name="L454"></a> 454         <strong class="reserved">if</strong> (is_sRGB || is_LinearRGB) <em class="brace">{</em>
<a id="L455" name="L455"></a> 455             <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(pixel) &lt;&lt; 24)
<a id="L456" name="L456"></a> 456                 | (<a href="../D/21904.html" title="Multiple defined in 9 places.">getRed</a>(pixel) &lt;&lt; 16)
<a id="L457" name="L457"></a> 457                 | (<a href="../D/19369.html" title="Multiple defined in 9 places.">getGreen</a>(pixel) &lt;&lt; 8)
<a id="L458" name="L458"></a> 458                 | (<a href="../D/17280.html" title="Multiple defined in 9 places.">getBlue</a>(pixel) &lt;&lt; 0);
<a id="L459" name="L459"></a> 459         <em class="brace">}</em>
<a id="L460" name="L460"></a> 460         <strong class="reserved">float</strong> rgb[] = <a href="../S/2270.html#L313" title="Defined at 313 in src/java/awt/image/DirectColorModel.java.">getDefaultRGBComponents</a>(pixel);
<a id="L461" name="L461"></a> 461         <strong class="reserved">return</strong> (<a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(pixel) &lt;&lt; 24)
<a id="L462" name="L462"></a> 462             | (((<strong class="reserved">int</strong>) (rgb[0] * 255.0f + 0.5f)) &lt;&lt; 16)
<a id="L463" name="L463"></a> 463             | (((<strong class="reserved">int</strong>) (rgb[1] * 255.0f + 0.5f)) &lt;&lt; 8)
<a id="L464" name="L464"></a> 464             | (((<strong class="reserved">int</strong>) (rgb[2] * 255.0f + 0.5f)) &lt;&lt; 0);
<a id="L465" name="L465"></a> 465     <em class="brace">}</em>
<a id="L466" name="L466"></a> 466 
<div class="comment">
      Returns the red color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      by an array of data elements of type <code>transferType</code> passed
      in as an object reference.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the red value
      is 0.
      If <code>inData</code> is not a primitive array of type
      <code>transferType</code>, a <code>ClassCastException</code> is
      thrown.  An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>inData</code> is not large enough to hold a
      pixel value for this <code>ColorModel</code>.  Since
      <code>DirectColorModel</code> can be subclassed, subclasses inherit
      the implementation of this method and if they don't override it
      then they throw an exception if they use an unsupported
      <code>transferType</code>.
      An <code>UnsupportedOperationException</code> is thrown if this
      <code>transferType</code> is not supported by this
      <code>ColorModel</code>.
      @param inData the array containing the pixel value
      @return the value of the red component of the specified pixel.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
              large enough to hold a pixel value for this color model
      @throws ClassCastException if <code>inData</code> is not a
              primitive array of type <code>transferType</code>
      @throws UnsupportedOperationException if this <code>transferType</code>
              is not supported by this color model</div>
<a id="L498" name="L498"></a> 498     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18630.html" title="Multiple referred from 50 places.">getRed</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499         <strong class="reserved">int</strong> pixel=0;
<a id="L500" name="L500"></a> 500         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L502" name="L502"></a> 502                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L503" name="L503"></a> 503                pixel = bdata[0] &amp; 0xff;
<a id="L504" name="L504"></a> 504             <strong class="reserved">break</strong>;
<a id="L505" name="L505"></a> 505             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L506" name="L506"></a> 506                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L507" name="L507"></a> 507                pixel = sdata[0] &amp; 0xffff;
<a id="L508" name="L508"></a> 508             <strong class="reserved">break</strong>;
<a id="L509" name="L509"></a> 509             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L510" name="L510"></a> 510                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L511" name="L511"></a> 511                pixel = idata[0];
<a id="L512" name="L512"></a> 512             <strong class="reserved">break</strong>;
<a id="L513" name="L513"></a> 513             <strong class="reserved">default</strong>:
<a id="L514" name="L514"></a> 514                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L515" name="L515"></a> 515                    "implemented for transferType " + transferType);
<a id="L516" name="L516"></a> 516         <em class="brace">}</em>
<a id="L517" name="L517"></a> 517         <strong class="reserved">return</strong> <a href="../D/21904.html" title="Multiple defined in 9 places.">getRed</a>(pixel);
<a id="L518" name="L518"></a> 518     <em class="brace">}</em>
<a id="L519" name="L519"></a> 519 
<a id="L520" name="L520"></a> 520 
<div class="comment">
      Returns the green color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      by an array of data elements of type <code>transferType</code> passed
      in as an object reference.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the green value
      is 0.  If <code>inData</code> is not a primitive array of type
      <code>transferType</code>, a <code>ClassCastException</code> is thrown.
       An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>inData</code> is not large enough to hold a pixel
      value for this <code>ColorModel</code>.  Since
      <code>DirectColorModel</code> can be subclassed, subclasses inherit
      the implementation of this method and if they don't override it
      then they throw an exception if they use an unsupported
      <code>transferType</code>.
      An <code>UnsupportedOperationException</code> is
      thrown if this <code>transferType</code> is not supported by this
      <code>ColorModel</code>.
      @param inData the array containing the pixel value
      @return the value of the green component of the specified pixel.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
              large enough to hold a pixel value for this color model
      @throws ClassCastException if <code>inData</code> is not a
              primitive array of type <code>transferType</code>
      @throws UnsupportedOperationException if this <code>transferType</code>
              is not supported by this color model</div>
<a id="L551" name="L551"></a> 551     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/16819.html" title="Multiple referred from 45 places.">getGreen</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L552" name="L552"></a> 552         <strong class="reserved">int</strong> pixel=0;
<a id="L553" name="L553"></a> 553         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L554" name="L554"></a> 554             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L555" name="L555"></a> 555                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L556" name="L556"></a> 556                pixel = bdata[0] &amp; 0xff;
<a id="L557" name="L557"></a> 557             <strong class="reserved">break</strong>;
<a id="L558" name="L558"></a> 558             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L559" name="L559"></a> 559                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L560" name="L560"></a> 560                pixel = sdata[0] &amp; 0xffff;
<a id="L561" name="L561"></a> 561             <strong class="reserved">break</strong>;
<a id="L562" name="L562"></a> 562             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L563" name="L563"></a> 563                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L564" name="L564"></a> 564                pixel = idata[0];
<a id="L565" name="L565"></a> 565             <strong class="reserved">break</strong>;
<a id="L566" name="L566"></a> 566             <strong class="reserved">default</strong>:
<a id="L567" name="L567"></a> 567                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L568" name="L568"></a> 568                    "implemented for transferType " + transferType);
<a id="L569" name="L569"></a> 569         <em class="brace">}</em>
<a id="L570" name="L570"></a> 570         <strong class="reserved">return</strong> <a href="../D/19369.html" title="Multiple defined in 9 places.">getGreen</a>(pixel);
<a id="L571" name="L571"></a> 571     <em class="brace">}</em>
<a id="L572" name="L572"></a> 572 
<a id="L573" name="L573"></a> 573 
<div class="comment">
      Returns the blue color component for the specified pixel, scaled
      from 0 to 255 in the default RGB <code>ColorSpace</code>, sRGB.  A
      color conversion is done if necessary.  The pixel value is specified
      by an array of data elements of type <code>transferType</code> passed
      in as an object reference.
      The returned value is a non pre-multiplied value.  Thus, if the
      alpha is premultiplied, this method divides it out before returning
      the value.  If the alpha value is 0, for example, the blue value
      is 0.  If <code>inData</code> is not a primitive array of type
      <code>transferType</code>, a <code>ClassCastException</code> is thrown.
       An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>inData</code> is not large enough to hold a pixel
      value for this <code>ColorModel</code>.  Since
      <code>DirectColorModel</code> can be subclassed, subclasses inherit
      the implementation of this method and if they don't override it
      then they throw an exception if they use an unsupported
      <code>transferType</code>.
      An <code>UnsupportedOperationException</code> is
      thrown if this <code>transferType</code> is not supported by this
      <code>ColorModel</code>.
      @param inData the array containing the pixel value
      @return the value of the blue component of the specified pixel.
      @throws ArrayIndexOutOfBoundsException if <code>inData</code> is not
              large enough to hold a pixel value for this color model
      @throws ClassCastException if <code>inData</code> is not a
              primitive array of type <code>transferType</code>
      @throws UnsupportedOperationException if this <code>transferType</code>
              is not supported by this color model</div>
<a id="L604" name="L604"></a> 604     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15290.html" title="Multiple referred from 45 places.">getBlue</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L605" name="L605"></a> 605         <strong class="reserved">int</strong> pixel=0;
<a id="L606" name="L606"></a> 606         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L607" name="L607"></a> 607             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L608" name="L608"></a> 608                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L609" name="L609"></a> 609                pixel = bdata[0] &amp; 0xff;
<a id="L610" name="L610"></a> 610             <strong class="reserved">break</strong>;
<a id="L611" name="L611"></a> 611             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L612" name="L612"></a> 612                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L613" name="L613"></a> 613                pixel = sdata[0] &amp; 0xffff;
<a id="L614" name="L614"></a> 614             <strong class="reserved">break</strong>;
<a id="L615" name="L615"></a> 615             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L616" name="L616"></a> 616                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L617" name="L617"></a> 617                pixel = idata[0];
<a id="L618" name="L618"></a> 618             <strong class="reserved">break</strong>;
<a id="L619" name="L619"></a> 619             <strong class="reserved">default</strong>:
<a id="L620" name="L620"></a> 620                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L621" name="L621"></a> 621                    "implemented for transferType " + transferType);
<a id="L622" name="L622"></a> 622         <em class="brace">}</em>
<a id="L623" name="L623"></a> 623         <strong class="reserved">return</strong> <a href="../D/17280.html" title="Multiple defined in 9 places.">getBlue</a>(pixel);
<a id="L624" name="L624"></a> 624     <em class="brace">}</em>
<a id="L625" name="L625"></a> 625 
<div class="comment">
      Returns the alpha component for the specified pixel, scaled
      from 0 to 255.  The pixel value is specified by an array of data
      elements of type <code>transferType</code> passed in as an object
      reference.
      If <code>inData</code> is not a primitive array of type
      <code>transferType</code>, a <code>ClassCastException</code> is
      thrown.  An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>inData</code> is not large enough to hold a pixel
      value for this <code>ColorModel</code>.  Since
      <code>DirectColorModel</code> can be subclassed, subclasses inherit
      the implementation of this method and if they don't override it
      then they throw an exception if they use an unsupported
      <code>transferType</code>.
      If this <code>transferType</code> is not supported, an
      <code>UnsupportedOperationException</code> is thrown.
      @param inData the specified pixel
      @return the alpha component of the specified pixel, scaled from
              0 to 255.
      @exception ClassCastException if <code>inData</code>
       is not a primitive array of type <code>transferType</code>
      @exception ArrayIndexOutOfBoundsException if
       <code>inData</code> is not large enough to hold a pixel value
       for this <code>ColorModel</code>
      @exception UnsupportedOperationException if this
       <code>tranferType</code> is not supported by this
       <code>ColorModel</code></div>
<a id="L654" name="L654"></a> 654     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15034.html" title="Multiple referred from 34 places.">getAlpha</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L655" name="L655"></a> 655         <strong class="reserved">int</strong> pixel=0;
<a id="L656" name="L656"></a> 656         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L657" name="L657"></a> 657             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L658" name="L658"></a> 658                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L659" name="L659"></a> 659                pixel = bdata[0] &amp; 0xff;
<a id="L660" name="L660"></a> 660             <strong class="reserved">break</strong>;
<a id="L661" name="L661"></a> 661             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L662" name="L662"></a> 662                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L663" name="L663"></a> 663                pixel = sdata[0] &amp; 0xffff;
<a id="L664" name="L664"></a> 664             <strong class="reserved">break</strong>;
<a id="L665" name="L665"></a> 665             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L666" name="L666"></a> 666                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L667" name="L667"></a> 667                pixel = idata[0];
<a id="L668" name="L668"></a> 668             <strong class="reserved">break</strong>;
<a id="L669" name="L669"></a> 669             <strong class="reserved">default</strong>:
<a id="L670" name="L670"></a> 670                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L671" name="L671"></a> 671                    "implemented for transferType " + transferType);
<a id="L672" name="L672"></a> 672         <em class="brace">}</em>
<a id="L673" name="L673"></a> 673         <strong class="reserved">return</strong> <a href="../D/16906.html" title="Multiple defined in 9 places.">getAlpha</a>(pixel);
<a id="L674" name="L674"></a> 674     <em class="brace">}</em>
<a id="L675" name="L675"></a> 675 
<div class="comment">
      Returns the color/alpha components for the specified pixel in the
      default RGB color model format.  A color conversion is done if
      necessary.  The pixel value is specified by an array of data
      elements of type <code>transferType</code> passed in as an object
      reference.  If <code>inData</code> is not a primitive array of type
      <code>transferType</code>, a <code>ClassCastException</code> is
      thrown.  An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>inData</code> is not large enough to hold a pixel
      value for this <code>ColorModel</code>.
      The returned value is in a non pre-multiplied format.  Thus, if
      the alpha is premultiplied, this method divides it out of the
      color components.  If the alpha value is 0, for example, the color
      values is 0.  Since <code>DirectColorModel</code> can be
      subclassed, subclasses inherit the implementation of this method
      and if they don't override it then
      they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param inData the specified pixel
      @return the color and alpha components of the specified pixel.
      @exception UnsupportedOperationException if this
                 <code>transferType</code> is not supported by this
                 <code>ColorModel</code>
      @see ColorModel#getRGBdefault</div>
<a id="L702" name="L702"></a> 702     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18575.html" title="Multiple referred from 57 places.">getRGB</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> inData) <em class="brace">{</em>
<a id="L703" name="L703"></a> 703         <strong class="reserved">int</strong> pixel=0;
<a id="L704" name="L704"></a> 704         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L705" name="L705"></a> 705             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L706" name="L706"></a> 706                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])inData;
<a id="L707" name="L707"></a> 707                pixel = bdata[0] &amp; 0xff;
<a id="L708" name="L708"></a> 708             <strong class="reserved">break</strong>;
<a id="L709" name="L709"></a> 709             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L710" name="L710"></a> 710                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])inData;
<a id="L711" name="L711"></a> 711                pixel = sdata[0] &amp; 0xffff;
<a id="L712" name="L712"></a> 712             <strong class="reserved">break</strong>;
<a id="L713" name="L713"></a> 713             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L714" name="L714"></a> 714                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])inData;
<a id="L715" name="L715"></a> 715                pixel = idata[0];
<a id="L716" name="L716"></a> 716             <strong class="reserved">break</strong>;
<a id="L717" name="L717"></a> 717             <strong class="reserved">default</strong>:
<a id="L718" name="L718"></a> 718                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L719" name="L719"></a> 719                    "implemented for transferType " + transferType);
<a id="L720" name="L720"></a> 720         <em class="brace">}</em>
<a id="L721" name="L721"></a> 721         <strong class="reserved">return</strong> <a href="../D/21814.html" title="Multiple defined in 13 places.">getRGB</a>(pixel);
<a id="L722" name="L722"></a> 722     <em class="brace">}</em>
<a id="L723" name="L723"></a> 723 
<div class="comment">
      Returns a data element array representation of a pixel in this
      <code>ColorModel</code>, given an integer pixel representation in the
      default RGB color model.
      This array can then be passed to the <code>setDataElements</code>
      method of a <code>WritableRaster</code> object.  If the pixel variable
      is <code>null</code>, a new array is allocated.  If <code>pixel</code>
      is not <code>null</code>, it must be a primitive array of type
      <code>transferType</code>; otherwise, a
      <code>ClassCastException</code> is thrown.  An
      <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>pixel</code> is not large enough to hold a pixel
      value for this <code>ColorModel</code>.  The pixel array is returned.
      Since <code>DirectColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't
      override it then they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param rgb the integer pixel representation in the default RGB
                 color model
      @param pixel the specified pixel
      @return an array representation of the specified pixel in this
              <code>ColorModel</code>
      @exception ClassCastException if <code>pixel</code>
       is not a primitive array of type <code>transferType</code>
      @exception ArrayIndexOutOfBoundsException if
       <code>pixel</code> is not large enough to hold a pixel value
       for this <code>ColorModel</code>
      @exception UnsupportedOperationException if this
       <code>transferType</code> is not supported by this
       <code>ColorModel</code>
      @see WritableRaster#setDataElements
      @see SampleModel#setDataElements</div>
<a id="L758" name="L758"></a> 758     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/15949.html" title="Multiple referred from 46 places.">getDataElements</a>(<strong class="reserved">int</strong> rgb, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel) <em class="brace">{</em>
<a id="L759" name="L759"></a> 759         <em class="comment">//REMIND: maybe more efficient not to use int array for</em>
<a id="L760" name="L760"></a> 760         <em class="comment">//DataBuffer.TYPE_USHORT and DataBuffer.TYPE_INT</em>
<a id="L761" name="L761"></a> 761         <strong class="reserved">int</strong> intpixel[] = <strong class="reserved">null</strong>;
<a id="L762" name="L762"></a> 762         <strong class="reserved">if</strong> (transferType == <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT &amp;&amp;
<a id="L763" name="L763"></a> 763             pixel != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764             intpixel = (<strong class="reserved">int</strong>[])pixel;
<a id="L765" name="L765"></a> 765             intpixel[0] = 0;
<a id="L766" name="L766"></a> 766         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L767" name="L767"></a> 767             intpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[1];
<a id="L768" name="L768"></a> 768         <em class="brace">}</em>
<a id="L769" name="L769"></a> 769 
<a id="L770" name="L770"></a> 770         <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> defaultCM = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>();
<a id="L771" name="L771"></a> 771         <strong class="reserved">if</strong> (<strong class="reserved">this</strong> == defaultCM || <a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(defaultCM)) <em class="brace">{</em>
<a id="L772" name="L772"></a> 772             intpixel[0] = rgb;
<a id="L773" name="L773"></a> 773             <strong class="reserved">return</strong> intpixel;
<a id="L774" name="L774"></a> 774         <em class="brace">}</em>
<a id="L775" name="L775"></a> 775 
<a id="L776" name="L776"></a> 776         <strong class="reserved">int</strong> red, grn, blu, alp;
<a id="L777" name="L777"></a> 777         red = (rgb&gt;&gt;16) &amp; 0xff;
<a id="L778" name="L778"></a> 778         grn = (rgb&gt;&gt;8) &amp; 0xff;
<a id="L779" name="L779"></a> 779         blu = rgb &amp; 0xff;
<a id="L780" name="L780"></a> 780         <strong class="reserved">if</strong> (is_sRGB || is_LinearRGB) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781             <strong class="reserved">int</strong> <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>;
<a id="L782" name="L782"></a> 782             <strong class="reserved">float</strong> factor;
<a id="L783" name="L783"></a> 783             <strong class="reserved">if</strong> (is_LinearRGB) <em class="brace">{</em>
<a id="L784" name="L784"></a> 784                 <strong class="reserved">if</strong> (lRGBprecision == 8) <em class="brace">{</em>
<a id="L785" name="L785"></a> 785                     red = fromsRGB8LUT8[red] &amp; 0xff;
<a id="L786" name="L786"></a> 786                     grn = fromsRGB8LUT8[grn] &amp; 0xff;
<a id="L787" name="L787"></a> 787                     blu = fromsRGB8LUT8[blu] &amp; 0xff;
<a id="L788" name="L788"></a> 788                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 8;
<a id="L789" name="L789"></a> 789                     factor = 1.0f / 255.0f;
<a id="L790" name="L790"></a> 790                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L791" name="L791"></a> 791                     red = fromsRGB8LUT16[red] &amp; 0xffff;
<a id="L792" name="L792"></a> 792                     grn = fromsRGB8LUT16[grn] &amp; 0xffff;
<a id="L793" name="L793"></a> 793                     blu = fromsRGB8LUT16[blu] &amp; 0xffff;
<a id="L794" name="L794"></a> 794                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 16;
<a id="L795" name="L795"></a> 795                     factor = 1.0f / 65535.0f;
<a id="L796" name="L796"></a> 796                 <em class="brace">}</em>
<a id="L797" name="L797"></a> 797             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L798" name="L798"></a> 798                 <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = 8;
<a id="L799" name="L799"></a> 799                 factor = 1.0f / 255.0f;
<a id="L800" name="L800"></a> 800             <em class="brace">}</em>
<a id="L801" name="L801"></a> 801             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L802" name="L802"></a> 802                 alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L803" name="L803"></a> 803                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L804" name="L804"></a> 804                     factor *= (alp * (1.0f / 255.0f));
<a id="L805" name="L805"></a> 805                     <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a> = -1;  <em class="comment">// force component calculations below</em>
<a id="L806" name="L806"></a> 806                 <em class="brace">}</em>
<a id="L807" name="L807"></a> 807                 <strong class="reserved">if</strong> (nBits[3] != 8) <em class="brace">{</em>
<a id="L808" name="L808"></a> 808                     alp = (<strong class="reserved">int</strong>)
<a id="L809" name="L809"></a> 809                         ((alp * (1.0f / 255.0f) * ((1&lt;&lt;nBits[3]) - 1)) + 0.5f);
<a id="L810" name="L810"></a> 810                     <strong class="reserved">if</strong> (alp &gt; ((1&lt;&lt;nBits[3]) - 1)) <em class="brace">{</em>
<a id="L811" name="L811"></a> 811                         <em class="comment">// fix 4412670 - see comment below</em>
<a id="L812" name="L812"></a> 812                         alp = (1&lt;&lt;nBits[3]) - 1;
<a id="L813" name="L813"></a> 813                     <em class="brace">}</em>
<a id="L814" name="L814"></a> 814                 <em class="brace">}</em>
<a id="L815" name="L815"></a> 815                 intpixel[0] = alp &lt;&lt; maskOffsets[3];
<a id="L816" name="L816"></a> 816             <em class="brace">}</em>
<a id="L817" name="L817"></a> 817             <strong class="reserved">if</strong> (nBits[0] != <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L818" name="L818"></a> 818                 red = (<strong class="reserved">int</strong>) ((red * factor * ((1&lt;&lt;nBits[0]) - 1)) + 0.5f);
<a id="L819" name="L819"></a> 819             <em class="brace">}</em>
<a id="L820" name="L820"></a> 820             <strong class="reserved">if</strong> (nBits[1] != <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L821" name="L821"></a> 821                 grn = (<strong class="reserved">int</strong>) ((grn * factor * ((1&lt;&lt;nBits[1]) - 1)) + 0.5f);
<a id="L822" name="L822"></a> 822             <em class="brace">}</em>
<a id="L823" name="L823"></a> 823             <strong class="reserved">if</strong> (nBits[2] != <a href="../D/29532.html" title="Multiple defined in 5 places.">precision</a>) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824                 blu = (<strong class="reserved">int</strong>) ((blu * factor * ((1&lt;&lt;nBits[2]) - 1)) + 0.5f);
<a id="L825" name="L825"></a> 825             <em class="brace">}</em>
<a id="L826" name="L826"></a> 826         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L827" name="L827"></a> 827             <em class="comment">// Need to convert the color</em>
<a id="L828" name="L828"></a> 828             <strong class="reserved">float</strong>[] norm = <strong class="reserved">new</strong> <strong class="reserved">float</strong>[3];
<a id="L829" name="L829"></a> 829             <strong class="reserved">float</strong> factor = 1.0f / 255.0f;
<a id="L830" name="L830"></a> 830             norm[0] = red * factor;
<a id="L831" name="L831"></a> 831             norm[1] = grn * factor;
<a id="L832" name="L832"></a> 832             norm[2] = blu * factor;
<a id="L833" name="L833"></a> 833             norm = colorSpace.<a href="../D/16601.html" title="Multiple defined in 3 places.">fromRGB</a>(norm);
<a id="L834" name="L834"></a> 834             <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L835" name="L835"></a> 835                 alp = (rgb&gt;&gt;24) &amp; 0xff;
<a id="L836" name="L836"></a> 836                 <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L837" name="L837"></a> 837                     factor *= alp;
<a id="L838" name="L838"></a> 838                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; 3; i++) <em class="brace">{</em>
<a id="L839" name="L839"></a> 839                         norm[i] *= factor;
<a id="L840" name="L840"></a> 840                     <em class="brace">}</em>
<a id="L841" name="L841"></a> 841                 <em class="brace">}</em>
<a id="L842" name="L842"></a> 842                 <strong class="reserved">if</strong> (nBits[3] != 8) <em class="brace">{</em>
<a id="L843" name="L843"></a> 843                     alp = (<strong class="reserved">int</strong>)
<a id="L844" name="L844"></a> 844                         ((alp * (1.0f / 255.0f) * ((1&lt;&lt;nBits[3]) - 1)) + 0.5f);
<a id="L845" name="L845"></a> 845                     <strong class="reserved">if</strong> (alp &gt; ((1&lt;&lt;nBits[3]) - 1)) <em class="brace">{</em>
<a id="L846" name="L846"></a> 846                         <em class="comment">// fix 4412670 - see comment below</em>
<a id="L847" name="L847"></a> 847                         alp = (1&lt;&lt;nBits[3]) - 1;
<a id="L848" name="L848"></a> 848                     <em class="brace">}</em>
<a id="L849" name="L849"></a> 849                 <em class="brace">}</em>
<a id="L850" name="L850"></a> 850                 intpixel[0] = alp &lt;&lt; maskOffsets[3];
<a id="L851" name="L851"></a> 851             <em class="brace">}</em>
<a id="L852" name="L852"></a> 852             red = (<strong class="reserved">int</strong>) ((norm[0] * ((1&lt;&lt;nBits[0]) - 1)) + 0.5f);
<a id="L853" name="L853"></a> 853             grn = (<strong class="reserved">int</strong>) ((norm[1] * ((1&lt;&lt;nBits[1]) - 1)) + 0.5f);
<a id="L854" name="L854"></a> 854             blu = (<strong class="reserved">int</strong>) ((norm[2] * ((1&lt;&lt;nBits[2]) - 1)) + 0.5f);
<a id="L855" name="L855"></a> 855         <em class="brace">}</em>
<a id="L856" name="L856"></a> 856 
<a id="L857" name="L857"></a> 857         <strong class="reserved">if</strong> (maxBits &gt; 23) <em class="brace">{</em>
<a id="L858" name="L858"></a> 858             <em class="comment">// fix 4412670 - for components of 24 or more bits</em>
<a id="L859" name="L859"></a> 859             <em class="comment">// some calculations done above with float precision</em>
<a id="L860" name="L860"></a> 860             <em class="comment">// may lose enough precision that the integer result</em>
<a id="L861" name="L861"></a> 861             <em class="comment">// overflows nBits, so we need to clamp.</em>
<a id="L862" name="L862"></a> 862             <strong class="reserved">if</strong> (red &gt; ((1&lt;&lt;nBits[0]) - 1)) <em class="brace">{</em>
<a id="L863" name="L863"></a> 863                 red = (1&lt;&lt;nBits[0]) - 1;
<a id="L864" name="L864"></a> 864             <em class="brace">}</em>
<a id="L865" name="L865"></a> 865             <strong class="reserved">if</strong> (grn &gt; ((1&lt;&lt;nBits[1]) - 1)) <em class="brace">{</em>
<a id="L866" name="L866"></a> 866                 grn = (1&lt;&lt;nBits[1]) - 1;
<a id="L867" name="L867"></a> 867             <em class="brace">}</em>
<a id="L868" name="L868"></a> 868             <strong class="reserved">if</strong> (blu &gt; ((1&lt;&lt;nBits[2]) - 1)) <em class="brace">{</em>
<a id="L869" name="L869"></a> 869                 blu = (1&lt;&lt;nBits[2]) - 1;
<a id="L870" name="L870"></a> 870             <em class="brace">}</em>
<a id="L871" name="L871"></a> 871         <em class="brace">}</em>
<a id="L872" name="L872"></a> 872 
<a id="L873" name="L873"></a> 873         intpixel[0] |= (red &lt;&lt; maskOffsets[0]) |
<a id="L874" name="L874"></a> 874                        (grn &lt;&lt; maskOffsets[1]) |
<a id="L875" name="L875"></a> 875                        (blu &lt;&lt; maskOffsets[2]);
<a id="L876" name="L876"></a> 876 
<a id="L877" name="L877"></a> 877         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L878" name="L878"></a> 878             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L879" name="L879"></a> 879                <strong class="reserved">byte</strong> bdata[];
<a id="L880" name="L880"></a> 880                <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L881" name="L881"></a> 881                    bdata = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[1];
<a id="L882" name="L882"></a> 882                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L883" name="L883"></a> 883                    bdata = (<strong class="reserved">byte</strong>[])pixel;
<a id="L884" name="L884"></a> 884                <em class="brace">}</em>
<a id="L885" name="L885"></a> 885                bdata[0] = (<strong class="reserved">byte</strong>)(0xff&amp;intpixel[0]);
<a id="L886" name="L886"></a> 886                <strong class="reserved">return</strong> bdata;
<a id="L887" name="L887"></a> 887             <em class="brace">}</em>
<a id="L888" name="L888"></a> 888             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:<em class="brace">{</em>
<a id="L889" name="L889"></a> 889                <strong class="reserved">short</strong> sdata[];
<a id="L890" name="L890"></a> 890                <strong class="reserved">if</strong> (pixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L891" name="L891"></a> 891                    sdata = <strong class="reserved">new</strong> <strong class="reserved">short</strong>[1];
<a id="L892" name="L892"></a> 892                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L893" name="L893"></a> 893                    sdata = (<strong class="reserved">short</strong>[])pixel;
<a id="L894" name="L894"></a> 894                <em class="brace">}</em>
<a id="L895" name="L895"></a> 895                sdata[0] = (<strong class="reserved">short</strong>)(intpixel[0]&amp;0xffff);
<a id="L896" name="L896"></a> 896                <strong class="reserved">return</strong> sdata;
<a id="L897" name="L897"></a> 897             <em class="brace">}</em>
<a id="L898" name="L898"></a> 898             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L899" name="L899"></a> 899                <strong class="reserved">return</strong> intpixel;
<a id="L900" name="L900"></a> 900         <em class="brace">}</em>
<a id="L901" name="L901"></a> 901         <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L902" name="L902"></a> 902                  "implemented for transferType " + transferType);
<a id="L903" name="L903"></a> 903 
<a id="L904" name="L904"></a> 904     <em class="brace">}</em>
<a id="L905" name="L905"></a> 905 
<div class="comment">
      Returns an array of unnormalized color/alpha components given a pixel
      in this <code>ColorModel</code>.  The pixel value is specified as an
      <code>int</code>.  If the <code>components</code> array is
      <code>null</code>, a new array is allocated.  The
      <code>components</code> array is returned.  Color/alpha components are
      stored in the <code>components</code> array starting at
      <code>offset</code>, even if the array is allocated by this method.
      An <code>ArrayIndexOutOfBoundsException</code> is thrown if the
      <code>components</code> array is not <code>null</code> and is not large
      enough to hold all the color and alpha components, starting at
      <code>offset</code>.
      @param pixel the specified pixel
      @param components the array to receive the color and alpha
      components of the specified pixel
      @param offset the offset into the <code>components</code> array at
      which to start storing the color and alpha components
      @return an array containing the color and alpha components of the
      specified pixel starting at the specified offset.</div>
<a id="L926" name="L926"></a> 926     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/15734.html" title="Multiple referred from 80 places.">getComponents</a>(<strong class="reserved">int</strong> pixel, <strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L927" name="L927"></a> 927         <strong class="reserved">if</strong> (components == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L928" name="L928"></a> 928             components = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+numComponents];
<a id="L929" name="L929"></a> 929         <em class="brace">}</em>
<a id="L930" name="L930"></a> 930 
<a id="L931" name="L931"></a> 931         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L932" name="L932"></a> 932             components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+i] = (pixel &amp; maskArray[i]) &gt;&gt;&gt; maskOffsets[i];
<a id="L933" name="L933"></a> 933         <em class="brace">}</em>
<a id="L934" name="L934"></a> 934 
<a id="L935" name="L935"></a> 935         <strong class="reserved">return</strong> components;
<a id="L936" name="L936"></a> 936     <em class="brace">}</em>
<a id="L937" name="L937"></a> 937 
<div class="comment">
      Returns an array of unnormalized color/alpha components given a pixel
      in this <code>ColorModel</code>.  The pixel value is specified by an
      array of data elements of type <code>transferType</code> passed in as
      an object reference.  If <code>pixel</code> is not a primitive array
      of type <code>transferType</code>, a <code>ClassCastException</code>
      is thrown.  An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if <code>pixel</code> is not large enough to hold a
      pixel value for this <code>ColorModel</code>.  If the
      <code>components</code> array is <code>null</code>, a new
      array is allocated.  The <code>components</code> array is returned.
      Color/alpha components are stored in the <code>components</code> array
      starting at <code>offset</code>, even if the array is allocated by
      this method.  An <code>ArrayIndexOutOfBoundsException</code>
      is thrown if the <code>components</code> array is not
      <code>null</code> and is not large enough to hold all the color and
      alpha components, starting at <code>offset</code>.
      Since <code>DirectColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't
      override it then they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param pixel the specified pixel
      @param components the array to receive the color and alpha
             components of the specified pixel
      @param offset the offset into the <code>components</code> array at
             which to start storing the color and alpha components
      @return an array containing the color and alpha components of the
      specified pixel starting at the specified offset.
      @exception ClassCastException if <code>pixel</code>
       is not a primitive array of type <code>transferType</code>
      @exception ArrayIndexOutOfBoundsException if
       <code>pixel</code> is not large enough to hold a pixel value
       for this <code>ColorModel</code>, or if <code>components</code>
       is not <code>null</code> and is not large enough to hold all the
       color and alpha components, starting at <code>offset</code>
      @exception UnsupportedOperationException if this
                 <code>transferType</code> is not supported by this
                 color model</div>
<a id="L977" name="L977"></a> 977     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <strong class="reserved">int</strong>[] <a href="../R/15734.html" title="Multiple referred from 80 places.">getComponents</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> pixel, <strong class="reserved">int</strong>[] components,
<a id="L978" name="L978"></a> 978                                      <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L979" name="L979"></a> 979         <strong class="reserved">int</strong> intpixel=0;
<a id="L980" name="L980"></a> 980         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L981" name="L981"></a> 981             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L982" name="L982"></a> 982                <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])pixel;
<a id="L983" name="L983"></a> 983                intpixel = bdata[0] &amp; 0xff;
<a id="L984" name="L984"></a> 984             <strong class="reserved">break</strong>;
<a id="L985" name="L985"></a> 985             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L986" name="L986"></a> 986                <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])pixel;
<a id="L987" name="L987"></a> 987                intpixel = sdata[0] &amp; 0xffff;
<a id="L988" name="L988"></a> 988             <strong class="reserved">break</strong>;
<a id="L989" name="L989"></a> 989             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L990" name="L990"></a> 990                <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])pixel;
<a id="L991" name="L991"></a> 991                intpixel = idata[0];
<a id="L992" name="L992"></a> 992             <strong class="reserved">break</strong>;
<a id="L993" name="L993"></a> 993             <strong class="reserved">default</strong>:
<a id="L994" name="L994"></a> 994                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L995" name="L995"></a> 995                    "implemented for transferType " + transferType);
<a id="L996" name="L996"></a> 996         <em class="brace">}</em>
<a id="L997" name="L997"></a> 997         <strong class="reserved">return</strong> <a href="../D/17883.html" title="Multiple defined in 18 places.">getComponents</a>(intpixel, components, <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>);
<a id="L998" name="L998"></a> 998     <em class="brace">}</em>
<a id="L999" name="L999"></a> 999 
<div class="comment">
      Creates a <code>WritableRaster</code> with the specified width and
      height that has a data layout (<code>SampleModel</code>) compatible
      with this <code>ColorModel</code>.
      @param w the width to apply to the new <code>WritableRaster</code>
      @param h the height to apply to the new <code>WritableRaster</code>
      @return a <code>WritableRaster</code> object with the specified
      width and height.
      @throws IllegalArgumentException if <code>w</code> or <code>h</code>
              is less than or equal to zero
      @see WritableRaster
      @see SampleModel</div>
<a id="L1013" name="L1013"></a>1013     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> <a href="../R/12291.html" title="Multiple referred from 37 places.">createCompatibleWritableRaster</a> (<strong class="reserved">int</strong> w,
<a id="L1014" name="L1014"></a>1014                                                                 <strong class="reserved">int</strong> h) <em class="brace">{</em>
<a id="L1015" name="L1015"></a>1015         <strong class="reserved">if</strong> ((w &lt;= 0) || (h &lt;= 0)) <em class="brace">{</em>
<a id="L1016" name="L1016"></a>1016             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../D/4055.html" title="Multiple defined in 2 places.">IllegalArgumentException</a>("Width (" + w + ") and height (" + h +
<a id="L1017" name="L1017"></a>1017                                                ") cannot be &lt;= 0");
<a id="L1018" name="L1018"></a>1018         <em class="brace">}</em>
<a id="L1019" name="L1019"></a>1019         <strong class="reserved">int</strong>[] bandmasks;
<a id="L1020" name="L1020"></a>1020         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1021" name="L1021"></a>1021             bandmasks = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[4];
<a id="L1022" name="L1022"></a>1022             bandmasks[3] = alpha_mask;
<a id="L1023" name="L1023"></a>1023         <em class="brace">}</em>
<a id="L1024" name="L1024"></a>1024         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1025" name="L1025"></a>1025             bandmasks = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[3];
<a id="L1026" name="L1026"></a>1026         <em class="brace">}</em>
<a id="L1027" name="L1027"></a>1027         bandmasks[0] = red_mask;
<a id="L1028" name="L1028"></a>1028         bandmasks[1] = green_mask;
<a id="L1029" name="L1029"></a>1029         bandmasks[2] = blue_mask;
<a id="L1030" name="L1030"></a>1030 
<a id="L1031" name="L1031"></a>1031         <strong class="reserved">if</strong> (pixel_bits &gt; 16) <em class="brace">{</em>
<a id="L1032" name="L1032"></a>1032             <strong class="reserved">return</strong> <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a>.<a href="../D/14112.html" title="Multiple defined in 4 places.">createPackedRaster</a>(<a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT,
<a id="L1033" name="L1033"></a>1033                                              w,h,bandmasks,<strong class="reserved">null</strong>);
<a id="L1034" name="L1034"></a>1034         <em class="brace">}</em>
<a id="L1035" name="L1035"></a>1035         <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pixel_bits &gt; 8) <em class="brace">{</em>
<a id="L1036" name="L1036"></a>1036             <strong class="reserved">return</strong> <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a>.<a href="../D/14112.html" title="Multiple defined in 4 places.">createPackedRaster</a>(<a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT,
<a id="L1037" name="L1037"></a>1037                                              w,h,bandmasks,<strong class="reserved">null</strong>);
<a id="L1038" name="L1038"></a>1038         <em class="brace">}</em>
<a id="L1039" name="L1039"></a>1039         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1040" name="L1040"></a>1040             <strong class="reserved">return</strong> <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a>.<a href="../D/14112.html" title="Multiple defined in 4 places.">createPackedRaster</a>(<a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE,
<a id="L1041" name="L1041"></a>1041                                              w,h,bandmasks,<strong class="reserved">null</strong>);
<a id="L1042" name="L1042"></a>1042         <em class="brace">}</em>
<a id="L1043" name="L1043"></a>1043     <em class="brace">}</em>
<a id="L1044" name="L1044"></a>1044 
<div class="comment">
      Returns a pixel value represented as an <code>int</code> in this
      <code>ColorModel</code>, given an array of unnormalized color/alpha
      components.   An <code>ArrayIndexOutOfBoundsException</code> is
      thrown if the <code>components</code> array is
      not large enough to hold all the color and alpha components, starting
      at <code>offset</code>.
      @param components an array of unnormalized color and alpha
      components
      @param offset the index into <code>components</code> at which to
      begin retrieving the color and alpha components
      @return an <code>int</code> pixel value in this
      <code>ColorModel</code> corresponding to the specified components.
      @exception ArrayIndexOutOfBoundsException if
       the <code>components</code> array is not large enough to
       hold all of the color and alpha components starting at
       <code>offset</code></div>
<a id="L1063" name="L1063"></a>1063     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15948.html" title="Multiple referred from 2 places.">getDataElement</a>(<strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>) <em class="brace">{</em>
<a id="L1064" name="L1064"></a>1064         <strong class="reserved">int</strong> pixel = 0;
<a id="L1065" name="L1065"></a>1065         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1066" name="L1066"></a>1066             pixel |= ((components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+i]&lt;&lt;maskOffsets[i])&amp;maskArray[i]);
<a id="L1067" name="L1067"></a>1067         <em class="brace">}</em>
<a id="L1068" name="L1068"></a>1068         <strong class="reserved">return</strong> pixel;
<a id="L1069" name="L1069"></a>1069     <em class="brace">}</em>
<a id="L1070" name="L1070"></a>1070 
<div class="comment">
      Returns a data element array representation of a pixel in this
      <code>ColorModel</code>, given an array of unnormalized color/alpha
      components.
      This array can then be passed to the <code>setDataElements</code>
      method of a <code>WritableRaster</code> object.
      An <code>ArrayIndexOutOfBoundsException</code> is thrown if the
      <code>components</code> array
      is not large enough to hold all the color and alpha components,
      starting at offset.  If the <code>obj</code> variable is
      <code>null</code>, a new array is allocated.  If <code>obj</code> is
      not <code>null</code>, it must be a primitive array
      of type <code>transferType</code>; otherwise, a
      <code>ClassCastException</code> is thrown.
      An <code>ArrayIndexOutOfBoundsException</code> is thrown if
      <code>obj</code> is not large enough to hold a pixel value for this
      <code>ColorModel</code>.
      Since <code>DirectColorModel</code> can be subclassed, subclasses
      inherit the implementation of this method and if they don't
      override it then they throw an exception if they use an unsupported
      <code>transferType</code>.
      @param components an array of unnormalized color and alpha
      components
      @param offset the index into <code>components</code> at which to
      begin retrieving color and alpha components
      @param obj the <code>Object</code> representing an array of color
      and alpha components
      @return an <code>Object</code> representing an array of color and
      alpha components.
      @exception ClassCastException if <code>obj</code>
       is not a primitive array of type <code>transferType</code>
      @exception ArrayIndexOutOfBoundsException if
       <code>obj</code> is not large enough to hold a pixel value
       for this <code>ColorModel</code> or the <code>components</code>
       array is not large enough to hold all of the color and alpha
       components starting at <code>offset</code>
      @exception UnsupportedOperationException if this
                 <code>transferType</code> is not supported by this
                 color model
      @see WritableRaster#setDataElements
      @see SampleModel#setDataElements</div>
<a id="L1113" name="L1113"></a>1113     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/15949.html" title="Multiple referred from 46 places.">getDataElements</a>(<strong class="reserved">int</strong>[] components, <strong class="reserved">int</strong> <a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L1114" name="L1114"></a>1114         <strong class="reserved">int</strong> pixel = 0;
<a id="L1115" name="L1115"></a>1115         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i &lt; numComponents; i++) <em class="brace">{</em>
<a id="L1116" name="L1116"></a>1116             pixel |= ((components[<a href="../D/28472.html" title="Multiple defined in 2 places.">offset</a>+i]&lt;&lt;maskOffsets[i])&amp;maskArray[i]);
<a id="L1117" name="L1117"></a>1117         <em class="brace">}</em>
<a id="L1118" name="L1118"></a>1118         <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L1119" name="L1119"></a>1119             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE:
<a id="L1120" name="L1120"></a>1120                <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <strong class="reserved">byte</strong>[]) <em class="brace">{</em>
<a id="L1121" name="L1121"></a>1121                    <strong class="reserved">byte</strong> bdata[] = (<strong class="reserved">byte</strong>[])obj;
<a id="L1122" name="L1122"></a>1122                    bdata[0] = (<strong class="reserved">byte</strong>)(pixel&amp;0xff);
<a id="L1123" name="L1123"></a>1123                    <strong class="reserved">return</strong> bdata;
<a id="L1124" name="L1124"></a>1124                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1125" name="L1125"></a>1125                    <strong class="reserved">byte</strong> bdata[] = <em class="brace">{</em>(<strong class="reserved">byte</strong>)(pixel&amp;0xff)<em class="brace">}</em>;
<a id="L1126" name="L1126"></a>1126                    <strong class="reserved">return</strong> bdata;
<a id="L1127" name="L1127"></a>1127                <em class="brace">}</em>
<a id="L1128" name="L1128"></a>1128             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT:
<a id="L1129" name="L1129"></a>1129                <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <strong class="reserved">short</strong>[]) <em class="brace">{</em>
<a id="L1130" name="L1130"></a>1130                    <strong class="reserved">short</strong> sdata[] = (<strong class="reserved">short</strong>[])obj;
<a id="L1131" name="L1131"></a>1131                    sdata[0] = (<strong class="reserved">short</strong>)(pixel&amp;0xffff);
<a id="L1132" name="L1132"></a>1132                    <strong class="reserved">return</strong> sdata;
<a id="L1133" name="L1133"></a>1133                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1134" name="L1134"></a>1134                    <strong class="reserved">short</strong> sdata[] = <em class="brace">{</em>(<strong class="reserved">short</strong>)(pixel&amp;0xffff)<em class="brace">}</em>;
<a id="L1135" name="L1135"></a>1135                    <strong class="reserved">return</strong> sdata;
<a id="L1136" name="L1136"></a>1136                <em class="brace">}</em>
<a id="L1137" name="L1137"></a>1137             <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT:
<a id="L1138" name="L1138"></a>1138                <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <strong class="reserved">int</strong>[]) <em class="brace">{</em>
<a id="L1139" name="L1139"></a>1139                    <strong class="reserved">int</strong> idata[] = (<strong class="reserved">int</strong>[])obj;
<a id="L1140" name="L1140"></a>1140                    idata[0] = pixel;
<a id="L1141" name="L1141"></a>1141                    <strong class="reserved">return</strong> idata;
<a id="L1142" name="L1142"></a>1142                <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1143" name="L1143"></a>1143                    <strong class="reserved">int</strong> idata[] = <em class="brace">{</em>pixel<em class="brace">}</em>;
<a id="L1144" name="L1144"></a>1144                    <strong class="reserved">return</strong> idata;
<a id="L1145" name="L1145"></a>1145                <em class="brace">}</em>
<a id="L1146" name="L1146"></a>1146             <strong class="reserved">default</strong>:
<a id="L1147" name="L1147"></a>1147                <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a>("This method has not been "+
<a id="L1148" name="L1148"></a>1148                    "implemented for transferType " + transferType);
<a id="L1149" name="L1149"></a>1149         <em class="brace">}</em>
<a id="L1150" name="L1150"></a>1150     <em class="brace">}</em>
<a id="L1151" name="L1151"></a>1151 
<div class="comment">
      Forces the raster data to match the state specified in the
      <code>isAlphaPremultiplied</code> variable, assuming the data is
      currently correctly described by this <code>ColorModel</code>.  It
      may multiply or divide the color raster data by alpha, or do
      nothing if the data is in the correct state.  If the data needs to
      be coerced, this method will also return an instance of this
      <code>ColorModel</code> with the <code>isAlphaPremultiplied</code>
      flag set appropriately.  This method will throw a
      <code>UnsupportedOperationException</code> if this transferType is
      not supported by this <code>ColorModel</code>.  Since
      <code>ColorModel</code> can be subclassed, subclasses inherit the
      implementation of this method and if they don't override it then
      they throw an exception if they use an unsupported transferType.
      @param raster the <code>WritableRaster</code> data
      @param isAlphaPremultiplied <code>true</code> if the alpha is
      premultiplied; <code>false</code> otherwise
      @return a <code>ColorModel</code> object that represents the
      coerced data.
      @exception UnsupportedOperationException if this
                 <code>transferType</code> is not supported by this
                 color model</div>
<a id="L1176" name="L1176"></a>1176     <strong class="reserved">final</strong> <strong class="reserved">public</strong> <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> <a href="../R/11634.html" title="Multiple referred from 4 places.">coerceData</a> (<a href="../S/2280.html#L49" title="Defined at 49 in src/java/awt/image/WritableRaster.java.">WritableRaster</a> raster,
<a id="L1177" name="L1177"></a>1177                                         <strong class="reserved">boolean</strong> <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>)
<a id="L1178" name="L1178"></a>1178     <em class="brace">{</em>
<a id="L1179" name="L1179"></a>1179         <strong class="reserved">if</strong> (!supportsAlpha ||
<a id="L1180" name="L1180"></a>1180             <strong class="reserved">this</strong>.<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>() == <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1181" name="L1181"></a>1181             <strong class="reserved">return</strong> <strong class="reserved">this</strong>;
<a id="L1182" name="L1182"></a>1182         <em class="brace">}</em>
<a id="L1183" name="L1183"></a>1183 
<a id="L1184" name="L1184"></a>1184         <strong class="reserved">int</strong> w = raster.<a href="../D/23687.html" title="Multiple defined in 56 places.">getWidth</a>();
<a id="L1185" name="L1185"></a>1185         <strong class="reserved">int</strong> h = raster.<a href="../D/19442.html" title="Multiple defined in 56 places.">getHeight</a>();
<a id="L1186" name="L1186"></a>1186         <strong class="reserved">int</strong> aIdx = numColorComponents;
<a id="L1187" name="L1187"></a>1187         <strong class="reserved">float</strong> normAlpha;
<a id="L1188" name="L1188"></a>1188         <strong class="reserved">float</strong> alphaScale = 1.0f / ((<strong class="reserved">float</strong>) ((1 &lt;&lt; nBits[aIdx]) - 1));
<a id="L1189" name="L1189"></a>1189 
<a id="L1190" name="L1190"></a>1190         <strong class="reserved">int</strong> rminX = raster.<a href="../D/20651.html" title="Multiple defined in 6 places.">getMinX</a>();
<a id="L1191" name="L1191"></a>1191         <strong class="reserved">int</strong> rY = raster.<a href="../D/20652.html" title="Multiple defined in 6 places.">getMinY</a>();
<a id="L1192" name="L1192"></a>1192         <strong class="reserved">int</strong> rX;
<a id="L1193" name="L1193"></a>1193         <strong class="reserved">int</strong> pixel[] = <strong class="reserved">null</strong>;
<a id="L1194" name="L1194"></a>1194         <strong class="reserved">int</strong> zpixel[] = <strong class="reserved">null</strong>;
<a id="L1195" name="L1195"></a>1195 
<a id="L1196" name="L1196"></a>1196         <strong class="reserved">if</strong> (<a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>) <em class="brace">{</em>
<a id="L1197" name="L1197"></a>1197             <em class="comment">// Must mean that we are currently not premultiplied so</em>
<a id="L1198" name="L1198"></a>1198             <em class="comment">// multiply by alpha</em>
<a id="L1199" name="L1199"></a>1199             <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L1200" name="L1200"></a>1200                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L1201" name="L1201"></a>1201                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1202" name="L1202"></a>1202                         rX = rminX;
<a id="L1203" name="L1203"></a>1203                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1205" name="L1205"></a>1205                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1206" name="L1206"></a>1206                             <strong class="reserved">if</strong> (normAlpha != 0.f) <em class="brace">{</em>
<a id="L1207" name="L1207"></a>1207                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1208" name="L1208"></a>1208                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normAlpha +
<a id="L1209" name="L1209"></a>1209                                                       0.5f);
<a id="L1210" name="L1210"></a>1210                                 <em class="brace">}</em>
<a id="L1211" name="L1211"></a>1211                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1212" name="L1212"></a>1212                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1213" name="L1213"></a>1213                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1214" name="L1214"></a>1214                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L1215" name="L1215"></a>1215                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0);
<a id="L1216" name="L1216"></a>1216                                 <em class="brace">}</em>
<a id="L1217" name="L1217"></a>1217                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, zpixel);
<a id="L1218" name="L1218"></a>1218                             <em class="brace">}</em>
<a id="L1219" name="L1219"></a>1219                         <em class="brace">}</em>
<a id="L1220" name="L1220"></a>1220                     <em class="brace">}</em>
<a id="L1221" name="L1221"></a>1221                 <em class="brace">}</em>
<a id="L1222" name="L1222"></a>1222                 <strong class="reserved">break</strong>;
<a id="L1223" name="L1223"></a>1223                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT: <em class="brace">{</em>
<a id="L1224" name="L1224"></a>1224                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1225" name="L1225"></a>1225                         rX = rminX;
<a id="L1226" name="L1226"></a>1226                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1228" name="L1228"></a>1228                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1229" name="L1229"></a>1229                             <strong class="reserved">if</strong> (normAlpha != 0.f) <em class="brace">{</em>
<a id="L1230" name="L1230"></a>1230                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1231" name="L1231"></a>1231                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normAlpha +
<a id="L1232" name="L1232"></a>1232                                                       0.5f);
<a id="L1233" name="L1233"></a>1233                                 <em class="brace">}</em>
<a id="L1234" name="L1234"></a>1234                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1235" name="L1235"></a>1235                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1236" name="L1236"></a>1236                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1237" name="L1237"></a>1237                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L1238" name="L1238"></a>1238                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0);
<a id="L1239" name="L1239"></a>1239                                 <em class="brace">}</em>
<a id="L1240" name="L1240"></a>1240                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, zpixel);
<a id="L1241" name="L1241"></a>1241                             <em class="brace">}</em>
<a id="L1242" name="L1242"></a>1242                         <em class="brace">}</em>
<a id="L1243" name="L1243"></a>1243                     <em class="brace">}</em>
<a id="L1244" name="L1244"></a>1244                 <em class="brace">}</em>
<a id="L1245" name="L1245"></a>1245                 <strong class="reserved">break</strong>;
<a id="L1246" name="L1246"></a>1246                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT: <em class="brace">{</em>
<a id="L1247" name="L1247"></a>1247                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1248" name="L1248"></a>1248                         rX = rminX;
<a id="L1249" name="L1249"></a>1249                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1250" name="L1250"></a>1250                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1251" name="L1251"></a>1251                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1252" name="L1252"></a>1252                             <strong class="reserved">if</strong> (normAlpha != 0.f) <em class="brace">{</em>
<a id="L1253" name="L1253"></a>1253                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1254" name="L1254"></a>1254                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * normAlpha +
<a id="L1255" name="L1255"></a>1255                                                       0.5f);
<a id="L1256" name="L1256"></a>1256                                 <em class="brace">}</em>
<a id="L1257" name="L1257"></a>1257                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1258" name="L1258"></a>1258                             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1259" name="L1259"></a>1259                                 <strong class="reserved">if</strong> (zpixel == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1260" name="L1260"></a>1260                                     zpixel = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[numComponents];
<a id="L1261" name="L1261"></a>1261                                     <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.util.<a href="../S/1150.html#L71" title="Defined at 71 in src/java/util/Arrays.java.">Arrays</a>.<a href="../D/16028.html" title="Multiple defined in 25 places.">fill</a>(zpixel, 0);
<a id="L1262" name="L1262"></a>1262                                 <em class="brace">}</em>
<a id="L1263" name="L1263"></a>1263                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, zpixel);
<a id="L1264" name="L1264"></a>1264                             <em class="brace">}</em>
<a id="L1265" name="L1265"></a>1265                         <em class="brace">}</em>
<a id="L1266" name="L1266"></a>1266                     <em class="brace">}</em>
<a id="L1267" name="L1267"></a>1267                 <em class="brace">}</em>
<a id="L1268" name="L1268"></a>1268                 <strong class="reserved">break</strong>;
<a id="L1269" name="L1269"></a>1269                 <strong class="reserved">default</strong>:
<a id="L1270" name="L1270"></a>1270                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L1271" name="L1271"></a>1271                          "implemented for transferType " + transferType);
<a id="L1272" name="L1272"></a>1272             <em class="brace">}</em>
<a id="L1273" name="L1273"></a>1273         <em class="brace">}</em>
<a id="L1274" name="L1274"></a>1274         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1275" name="L1275"></a>1275             <em class="comment">// We are premultiplied and want to divide it out</em>
<a id="L1276" name="L1276"></a>1276             <strong class="reserved">switch</strong> (transferType) <em class="brace">{</em>
<a id="L1277" name="L1277"></a>1277                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_BYTE: <em class="brace">{</em>
<a id="L1278" name="L1278"></a>1278                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1279" name="L1279"></a>1279                         rX = rminX;
<a id="L1280" name="L1280"></a>1280                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1281" name="L1281"></a>1281                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1282" name="L1282"></a>1282                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1283" name="L1283"></a>1283                             <strong class="reserved">if</strong> (normAlpha != 0.0f) <em class="brace">{</em>
<a id="L1284" name="L1284"></a>1284                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L1285" name="L1285"></a>1285                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1286" name="L1286"></a>1286                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * invAlpha +
<a id="L1287" name="L1287"></a>1287                                                       0.5f);
<a id="L1288" name="L1288"></a>1288                                 <em class="brace">}</em>
<a id="L1289" name="L1289"></a>1289                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1290" name="L1290"></a>1290                             <em class="brace">}</em>
<a id="L1291" name="L1291"></a>1291                         <em class="brace">}</em>
<a id="L1292" name="L1292"></a>1292                     <em class="brace">}</em>
<a id="L1293" name="L1293"></a>1293                 <em class="brace">}</em>
<a id="L1294" name="L1294"></a>1294                 <strong class="reserved">break</strong>;
<a id="L1295" name="L1295"></a>1295                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_USHORT: <em class="brace">{</em>
<a id="L1296" name="L1296"></a>1296                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1297" name="L1297"></a>1297                         rX = rminX;
<a id="L1298" name="L1298"></a>1298                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1299" name="L1299"></a>1299                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1300" name="L1300"></a>1300                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1301" name="L1301"></a>1301                             <strong class="reserved">if</strong> (normAlpha != 0) <em class="brace">{</em>
<a id="L1302" name="L1302"></a>1302                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L1303" name="L1303"></a>1303                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1304" name="L1304"></a>1304                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * invAlpha +
<a id="L1305" name="L1305"></a>1305                                                       0.5f);
<a id="L1306" name="L1306"></a>1306                                 <em class="brace">}</em>
<a id="L1307" name="L1307"></a>1307                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1308" name="L1308"></a>1308                             <em class="brace">}</em>
<a id="L1309" name="L1309"></a>1309                         <em class="brace">}</em>
<a id="L1310" name="L1310"></a>1310                     <em class="brace">}</em>
<a id="L1311" name="L1311"></a>1311                 <em class="brace">}</em>
<a id="L1312" name="L1312"></a>1312                 <strong class="reserved">break</strong>;
<a id="L1313" name="L1313"></a>1313                 <strong class="reserved">case</strong> <a href="../S/2284.html#L70" title="Defined at 70 in src/java/awt/image/DataBuffer.java.">DataBuffer</a>.TYPE_INT: <em class="brace">{</em>
<a id="L1314" name="L1314"></a>1314                     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> y = 0; y &lt; h; y++, rY++) <em class="brace">{</em>
<a id="L1315" name="L1315"></a>1315                         rX = rminX;
<a id="L1316" name="L1316"></a>1316                         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> = 0; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a> &lt; w; <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>++, rX++) <em class="brace">{</em>
<a id="L1317" name="L1317"></a>1317                             pixel = raster.<a href="../D/21491.html" title="Multiple defined in 10 places.">getPixel</a>(rX, rY, pixel);
<a id="L1318" name="L1318"></a>1318                             normAlpha = pixel[aIdx] * alphaScale;
<a id="L1319" name="L1319"></a>1319                             <strong class="reserved">if</strong> (normAlpha != 0) <em class="brace">{</em>
<a id="L1320" name="L1320"></a>1320                                 <strong class="reserved">float</strong> invAlpha = 1.0f / normAlpha;
<a id="L1321" name="L1321"></a>1321                                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>=0; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> &lt; aIdx; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>++) <em class="brace">{</em>
<a id="L1322" name="L1322"></a>1322                                     pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] = (<strong class="reserved">int</strong>) (pixel[<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>] * invAlpha +
<a id="L1323" name="L1323"></a>1323                                                       0.5f);
<a id="L1324" name="L1324"></a>1324                                 <em class="brace">}</em>
<a id="L1325" name="L1325"></a>1325                                 raster.<a href="../D/33548.html" title="Multiple defined in 10 places.">setPixel</a>(rX, rY, pixel);
<a id="L1326" name="L1326"></a>1326                             <em class="brace">}</em>
<a id="L1327" name="L1327"></a>1327                         <em class="brace">}</em>
<a id="L1328" name="L1328"></a>1328                     <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329                 <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330                 <strong class="reserved">break</strong>;
<a id="L1331" name="L1331"></a>1331                 <strong class="reserved">default</strong>:
<a id="L1332" name="L1332"></a>1332                     <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1777.html#L38" title="Defined at 38 in src/java/lang/UnsupportedOperationException.java.">UnsupportedOperationException</a>("This method has not been "+
<a id="L1333" name="L1333"></a>1333                          "implemented for transferType " + transferType);
<a id="L1334" name="L1334"></a>1334             <em class="brace">}</em>
<a id="L1335" name="L1335"></a>1335         <em class="brace">}</em>
<a id="L1336" name="L1336"></a>1336 
<a id="L1337" name="L1337"></a>1337         <em class="comment">// Return a new color model</em>
<a id="L1338" name="L1338"></a>1338         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/2270.html#L109" title="Defined at 109 in src/java/awt/image/DirectColorModel.java.">DirectColorModel</a>(colorSpace, pixel_bits, maskArray[0],
<a id="L1339" name="L1339"></a>1339                                     maskArray[1], maskArray[2], maskArray[3],
<a id="L1340" name="L1340"></a>1340                                     <a href="../D/25179.html" title="Multiple defined in 2 places.">isAlphaPremultiplied</a>,
<a id="L1341" name="L1341"></a>1341                                     transferType);
<a id="L1342" name="L1342"></a>1342 
<a id="L1343" name="L1343"></a>1343     <em class="brace">}</em>
<a id="L1344" name="L1344"></a>1344 
<div class="comment">
       Returns <code>true</code> if <code>raster</code> is compatible
       with this <code>ColorModel</code> and <code>false</code> if it is
       not.
       @param raster the <a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> object to test for compatibility
       @return <code>true</code> if <code>raster</code> is compatible
       with this <code>ColorModel</code>; <code>false</code> otherwise.</div>
<a id="L1353" name="L1353"></a>1353     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21271.html" title="Multiple referred from 3 places.">isCompatibleRaster</a>(<a href="../S/2238.html#L126" title="Defined at 126 in src/java/awt/image/Raster.java.">Raster</a> raster) <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354         <a href="../S/2227.html#L81" title="Defined at 81 in src/java/awt/image/SampleModel.java.">SampleModel</a> sm = raster.<a href="../D/22223.html" title="Multiple defined in 5 places.">getSampleModel</a>();
<a id="L1355" name="L1355"></a>1355         <a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a> spsm;
<a id="L1356" name="L1356"></a>1356         <strong class="reserved">if</strong> (sm <strong class="reserved">instanceof</strong> <a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a>) <em class="brace">{</em>
<a id="L1357" name="L1357"></a>1357             spsm = (<a href="../S/2273.html#L66" title="Defined at 66 in src/java/awt/image/SinglePixelPackedSampleModel.java.">SinglePixelPackedSampleModel</a>) sm;
<a id="L1358" name="L1358"></a>1358         <em class="brace">}</em>
<a id="L1359" name="L1359"></a>1359         <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1360" name="L1360"></a>1360             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1361" name="L1361"></a>1361         <em class="brace">}</em>
<a id="L1362" name="L1362"></a>1362         <strong class="reserved">if</strong> (spsm.<a href="../D/21054.html" title="Multiple defined in 3 places.">getNumBands</a>() != <a href="../D/21061.html" title="Multiple defined in 6 places.">getNumComponents</a>()) <em class="brace">{</em>
<a id="L1363" name="L1363"></a>1363             <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1364" name="L1364"></a>1364         <em class="brace">}</em>
<a id="L1365" name="L1365"></a>1365 
<a id="L1366" name="L1366"></a>1366         <strong class="reserved">int</strong>[] bitMasks = spsm.<a href="../S/2273.html#L285" title="Defined at 285 in src/java/awt/image/SinglePixelPackedSampleModel.java.">getBitMasks</a>();
<a id="L1367" name="L1367"></a>1367         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i=0; i&lt;numComponents; i++) <em class="brace">{</em>
<a id="L1368" name="L1368"></a>1368             <strong class="reserved">if</strong> (bitMasks[i] != maskArray[i]) <em class="brace">{</em>
<a id="L1369" name="L1369"></a>1369                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L1370" name="L1370"></a>1370             <em class="brace">}</em>
<a id="L1371" name="L1371"></a>1371         <em class="brace">}</em>
<a id="L1372" name="L1372"></a>1372 
<a id="L1373" name="L1373"></a>1373         <strong class="reserved">return</strong> (raster.<a href="../D/23246.html" title="Multiple defined in 4 places.">getTransferType</a>() == transferType);
<a id="L1374" name="L1374"></a>1374     <em class="brace">}</em>
<a id="L1375" name="L1375"></a>1375 
<a id="L1376" name="L1376"></a>1376     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/27397.html" title="Multiple referred from 7 places.">setFields</a>() <em class="brace">{</em>
<a id="L1377" name="L1377"></a>1377         <em class="comment">// Set the private fields</em>
<a id="L1378" name="L1378"></a>1378         <em class="comment">// REMIND: Get rid of these from the native code</em>
<a id="L1379" name="L1379"></a>1379         red_mask     = maskArray[0];
<a id="L1380" name="L1380"></a>1380         red_offset   = maskOffsets[0];
<a id="L1381" name="L1381"></a>1381         green_mask   = maskArray[1];
<a id="L1382" name="L1382"></a>1382         green_offset = maskOffsets[1];
<a id="L1383" name="L1383"></a>1383         blue_mask    = maskArray[2];
<a id="L1384" name="L1384"></a>1384         blue_offset  = maskOffsets[2];
<a id="L1385" name="L1385"></a>1385         <strong class="reserved">if</strong> (nBits[0] &lt; 8) <em class="brace">{</em>
<a id="L1386" name="L1386"></a>1386             red_scale = (1 &lt;&lt; nBits[0]) - 1;
<a id="L1387" name="L1387"></a>1387         <em class="brace">}</em>
<a id="L1388" name="L1388"></a>1388         <strong class="reserved">if</strong> (nBits[1] &lt; 8) <em class="brace">{</em>
<a id="L1389" name="L1389"></a>1389             green_scale = (1 &lt;&lt; nBits[1]) - 1;
<a id="L1390" name="L1390"></a>1390         <em class="brace">}</em>
<a id="L1391" name="L1391"></a>1391         <strong class="reserved">if</strong> (nBits[2] &lt; 8) <em class="brace">{</em>
<a id="L1392" name="L1392"></a>1392             blue_scale = (1 &lt;&lt; nBits[2]) - 1;
<a id="L1393" name="L1393"></a>1393         <em class="brace">}</em>
<a id="L1394" name="L1394"></a>1394         <strong class="reserved">if</strong> (supportsAlpha) <em class="brace">{</em>
<a id="L1395" name="L1395"></a>1395             alpha_mask   = maskArray[3];
<a id="L1396" name="L1396"></a>1396             alpha_offset = maskOffsets[3];
<a id="L1397" name="L1397"></a>1397             <strong class="reserved">if</strong> (nBits[3] &lt; 8) <em class="brace">{</em>
<a id="L1398" name="L1398"></a>1398                 alpha_scale = (1 &lt;&lt; nBits[3]) - 1;
<a id="L1399" name="L1399"></a>1399             <em class="brace">}</em>
<a id="L1400" name="L1400"></a>1400         <em class="brace">}</em>
<a id="L1401" name="L1401"></a>1401     <em class="brace">}</em>
<a id="L1402" name="L1402"></a>1402 
<div class="comment">
      Returns a <code>String</code> that represents this
      <code>DirectColorModel</code>.
      @return a <code>String</code> representing this
      <code>DirectColorModel</code>.</div>
<a id="L1409" name="L1409"></a>1409     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/29337.html" title="Multiple referred from 3013 places.">toString</a>() <em class="brace">{</em>
<a id="L1410" name="L1410"></a>1410         <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>("DirectColorModel: rmask="
<a id="L1411" name="L1411"></a>1411                           +<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(red_mask)+" gmask="
<a id="L1412" name="L1412"></a>1412                           +<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(green_mask)+" bmask="
<a id="L1413" name="L1413"></a>1413                           +<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(blue_mask)+" amask="
<a id="L1414" name="L1414"></a>1414                           +<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(alpha_mask));
<a id="L1415" name="L1415"></a>1415     <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L269">[^]</a><a href="#L1409">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
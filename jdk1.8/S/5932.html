<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xml/internal/resolver/Catalog.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L388">[^]</a><a href="#L2188">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L388" title="Defined at 388.">getCatalogManager</a></li>
<li><a href="#L396" title="Defined at 396.">setCatalogManager</a></li>
<li><a href="#L403" title="Defined at 403.">setupReaders</a></li>
<li><a href="#L444" title="Defined at 444.">addReader</a></li>
<li><a href="#L464" title="Defined at 464.">copyReaders</a></li>
<li><a href="#L501" title="Defined at 501.">newCatalog</a></li>
<li><a href="#L530" title="Defined at 530.">getCurrentBase</a></li>
<li><a href="#L541" title="Defined at 541.">getDefaultOverride</a></li>
<li><a href="#L560" title="Defined at 560.">loadSystemCatalogs</a></li>
<li><a href="#L598" title="Defined at 598.">parseCatalog</a></li>
<li><a href="#L626" title="Defined at 626.">parseCatalog</a></li>
<li><a href="#L666" title="Defined at 666.">parseCatalog</a></li>
<li><a href="#L714" title="Defined at 714.">parsePendingCatalogs</a></li>
<li><a href="#L813" title="Defined at 813.">parseCatalogFile</a></li>
<li><a href="#L903" title="Defined at 903.">addEntry</a></li>
<li><a href="#L1107" title="Defined at 1107.">unknownEntry</a></li>
<li><a href="#L1143" title="Defined at 1143.">parseAllCatalogs</a></li>
<li><a href="#L1192" title="Defined at 1192.">resolveDoctype</a></li>
<li><a href="#L1271" title="Defined at 1271.">resolveDocument</a></li>
<li><a href="#L1305" title="Defined at 1305.">resolveEntity</a></li>
<li><a href="#L1391" title="Defined at 1391.">resolveNotation</a></li>
<li><a href="#L1484" title="Defined at 1484.">resolvePublic</a></li>
<li><a href="#L1578" title="Defined at 1578.">resolveLocalPublic</a></li>
<li><a href="#L1680" title="Defined at 1680.">resolveSystem</a></li>
<li><a href="#L1718" title="Defined at 1718.">resolveLocalSystem</a></li>
<li><a href="#L1844" title="Defined at 1844.">resolveURI</a></li>
<li><a href="#L1881" title="Defined at 1881.">resolveLocalURI</a></li>
<li><a href="#L2014" title="Defined at 2014.">resolveSubordinateCatalogs</a></li>
<li><a href="#L2086" title="Defined at 2086.">fixSlashes</a></li>
<li><a href="#L2098" title="Defined at 2098.">makeAbsolute</a></li>
<li><a href="#L2122" title="Defined at 2122.">normalizeURI</a></li>
<li><a href="#L2168" title="Defined at 2168.">encodedByte</a></li>
<li><a href="#L2188" title="Defined at 2188.">addDelegate</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L5" name="L5"></a>   5 <em class="comment">// Catalog.java - Represents OASIS Open Catalog files.</em>
<a id="L6" name="L6"></a>   6 
<div class="comment">
  Copyright 2001-2004 The Apache Software Foundation or its licensors,
  as applicable.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
       http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<a id="L23" name="L23"></a>  23 
<a id="L24" name="L24"></a>  24 <strong class="reserved">package</strong> com.sun.org.apache.xml.internal.resolver;
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl;
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xerces.internal.utils.SecuritySupport;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.io.IOException;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.io.FileNotFoundException;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.io.InputStream;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.io.UnsupportedEncodingException;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.io.DataInputStream;
<a id="L33" name="L33"></a>  33 
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.util.Vector;
<a id="L37" name="L37"></a>  37 
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.net.URL;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.net.MalformedURLException;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> javax.xml.parsers.SAXParserFactory;
<a id="L42" name="L42"></a>  42 
<a id="L43" name="L43"></a>  43 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.CatalogManager;
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.helpers.PublicId;
<a id="L45" name="L45"></a>  45 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.readers.CatalogReader;
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.readers.SAXCatalogReader;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.readers.TR9401CatalogReader;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.readers.OASISXMLCatalogReader;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.resolver.helpers.FileURL;
<a id="L50" name="L50"></a>  50 
<div class="comment">
  Represents OASIS Open Catalog files.
  <p>This class implements the semantics of OASIS Open Catalog files
  (defined by
  <a href="http://www.oasis-open.org/html/a401.htm">OASIS Technical
  Resolution 9401:1997 (Amendment 2 to TR 9401)</a>).</p>
  <p>The primary purpose of the Catalog is to associate resources in the
  document with local system identifiers. Some entities
  (document types, XML entities, and notations) have names and all of them
  can have either public or system identifiers or both. (In XML, only a
  notation can have a public identifier without a system identifier, but
  the methods implemented in this class obey the Catalog semantics
  from the SGML
  days when system identifiers were optional.)</p>
  <p>The system identifiers returned by the resolution methods in this
  class are valid, i.e. usable by, and in fact constructed by, the
  <tt>java.net.URL</tt> class. Unfortunately, this class seems to behave in
  somewhat non-standard ways and the system identifiers returned may
  not be directly usable in a browser or filesystem context.
  </p><p>This class recognizes all of the Catalog entries defined in
  TR9401:1997:</p>
  <ul><li><b>BASE</b>
  changes the base URI for resolving relative system identifiers. The
  initial base URI is the URI of the location of the catalog (which is,
  in turn, relative to the location of the current working directory
  at startup, as returned by the <tt>user.dir</tt> system property).</li><li><b>CATALOG</b>
  processes other catalog files. An included catalog occurs logically
  at the end of the including catalog.</li><li><b>DELEGATE_PUBLIC</b>
  specifies alternate catalogs for some public identifiers. The delegated
  catalogs are not loaded until they are needed, but they are cached
  once loaded.</li><li><b>DELEGATE_SYSTEM</b>
  specifies alternate catalogs for some system identifiers. The delegated
  catalogs are not loaded until they are needed, but they are cached
  once loaded.</li><li><b>DELEGATE_URI</b>
  specifies alternate catalogs for some URIs. The delegated
  catalogs are not loaded until they are needed, but they are cached
  once loaded.</li><li><b>REWRITE_SYSTEM</b>
  specifies alternate prefix for a system identifier.</li><li><b>REWRITE_URI</b>
  specifies alternate prefix for a URI.</li><li><b>SYSTEM_SUFFIX</b>
  maps any system identifier that ends with a particular suffix to another
  system identifier.</li><li><b>URI_SUFFIX</b>
  maps any URI that ends with a particular suffix to another URI.</li><li><b>DOCTYPE</b>
  associates the names of root elements with URIs. (In other words, an XML
  processor might infer the doctype of an XML document that does not include
  a doctype declaration by looking for the DOCTYPE entry in the
  catalog which matches the name of the root element of the document.)</li><li><b>DOCUMENT</b>
  provides a default document.</li><li><b>DTDDECL</b>
  recognized and silently ignored. Not relevant for XML.</li><li><b>ENTITY</b>
  associates entity names with URIs.</li><li><b>LINKTYPE</b>
  recognized and silently ignored. Not relevant for XML.</li><li><b>NOTATION</b>
  associates notation names with URIs.</li><li><b>OVERRIDE</b>
  changes the override behavior. Initial behavior is set by the
  system property <tt>xml.catalog.override</tt>. The default initial
  behavior is 'YES', that is, entries in the catalog override
  system identifiers specified in the document.</li><li><b>PUBLIC</b>
  maps a public identifier to a system identifier.</li><li><b>SGMLDECL</b>
  recognized and silently ignored. Not relevant for XML.</li><li><b>SYSTEM</b>
  maps a system identifier to another system identifier.</li><li><b>URI</b>
  maps a URI to another URI.</li>
  </ul>
  <p>Note that BASE entries are treated as described by RFC2396. In
  particular, this has the counter-intuitive property that after a BASE
  entry identifing "http://example.com/a/b/c" as the base URI,
  the relative URI "foo" is resolved to the absolute URI
  "http://example.com/a/b/foo". You must provide the trailing slash if
  you do not want the final component of the path to be discarded as a
  filename would in a URI for a resource: "http://example.com/a/b/c/".
  </p>
  <p>Note that subordinate catalogs (all catalogs except the first,
  including CATALOG and DELEGATE* catalogs) are only loaded if and when
  they are required.</p>
  <p>This class relies on classes which implement the CatalogReader
  interface to actually load catalog files. This allows the catalog
  semantics to be implemented for TR9401 text-based catalogs, XML
  catalogs, or any number of other storage formats.</p>
  <p>Additional catalogs may also be loaded with the
  {@link #parseCatalog} method.</p>
  <p><b>Change Log:</b></p>
  <dl>
  <dt>2.0</dt>
  <dd><p>Rewrite to use CatalogReaders.</p></dd>
  <dt>1.1</dt>
  <dd><p>Allow quoted components in <tt>xml.catalog.files</tt>
  so that URLs containing colons can be used on Unix.
  The string passed to <tt>xml.catalog.files</tt> can now have the form:</p>
  <pre>  unquoted-path-with-no-sep-chars:"double-quoted path with or without sep chars":'single-quoted path with or without sep chars'
  </pre>
  <p>(Where ":" is the separater character in this example.)</p>
  <p>If an unquoted path contains an embedded double or single quote
  character, no special processig is performed on that character. No
  path can contain separater characters, double, and single quotes
  simultaneously.</p>
  <p>Fix bug in calculation of BASE entries: if
  a catalog contains multiple BASE entries, each is relative to the preceding
  base, not the default base URI of the catalog.</p>
  </dd>
  <dt>1.0.1</dt>
  <dd><p>Fixed a bug in the calculation of the list of subordinate catalogs.
  This bug caused an infinite loop where parsing would alternately process
  two catalogs indefinitely.</p>
  </dd>
  </dl>
  @see CatalogReader
  @see CatalogEntry
  @author Norman Walsh
  <a href="mailto:Norman.Walsh@Sun.COM">Norman.Walsh@Sun.COM</a>
  @version 1.0
  <p>Derived from public domain code originally published by Arbortext,
  Inc.</p></div>
<a id="L198" name="L198"></a> 198 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/1193.html" title="Multiple referred from 83 places.">Catalog</a> <em class="brace">{</em>
<div class="comment">
   /** The BASE Catalog Entry type. */</div>
<a id="L200" name="L200"></a> 200   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> BASE     = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("BASE", 1);
<a id="L201" name="L201"></a> 201 
<div class="comment">
   /** The CATALOG Catalog Entry type. */</div>
<a id="L203" name="L203"></a> 203   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CATALOG  = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("CATALOG", 1);
<a id="L204" name="L204"></a> 204 
<div class="comment">
   /** The DOCUMENT Catalog Entry type. */</div>
<a id="L206" name="L206"></a> 206   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOCUMENT = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DOCUMENT", 1);
<a id="L207" name="L207"></a> 207 
<div class="comment">
   /** The OVERRIDE Catalog Entry type. */</div>
<a id="L209" name="L209"></a> 209   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> OVERRIDE = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("OVERRIDE", 1);
<a id="L210" name="L210"></a> 210 
<div class="comment">
   /** The SGMLDECL Catalog Entry type. */</div>
<a id="L212" name="L212"></a> 212   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SGMLDECL = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("SGMLDECL", 1);
<a id="L213" name="L213"></a> 213 
<div class="comment">
   /** The DELEGATE_PUBLIC Catalog Entry type. */</div>
<a id="L215" name="L215"></a> 215   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DELEGATE_PUBLIC = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DELEGATE_PUBLIC", 2);
<a id="L216" name="L216"></a> 216 
<div class="comment">
   /** The DELEGATE_SYSTEM Catalog Entry type. */</div>
<a id="L218" name="L218"></a> 218   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DELEGATE_SYSTEM = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DELEGATE_SYSTEM", 2);
<a id="L219" name="L219"></a> 219 
<div class="comment">
   /** The DELEGATE_URI Catalog Entry type. */</div>
<a id="L221" name="L221"></a> 221   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DELEGATE_URI = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DELEGATE_URI", 2);
<a id="L222" name="L222"></a> 222 
<div class="comment">
   /** The DOCTYPE Catalog Entry type. */</div>
<a id="L224" name="L224"></a> 224   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DOCTYPE  = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DOCTYPE", 2);
<a id="L225" name="L225"></a> 225 
<div class="comment">
   /** The DTDDECL Catalog Entry type. */</div>
<a id="L227" name="L227"></a> 227   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DTDDECL  = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("DTDDECL", 2);
<a id="L228" name="L228"></a> 228 
<div class="comment">
   /** The ENTITY Catalog Entry type. */</div>
<a id="L230" name="L230"></a> 230   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> ENTITY   = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("ENTITY", 2);
<a id="L231" name="L231"></a> 231 
<div class="comment">
   /** The LINKTYPE Catalog Entry type. */</div>
<a id="L233" name="L233"></a> 233   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> LINKTYPE = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("LINKTYPE", 2);
<a id="L234" name="L234"></a> 234 
<div class="comment">
   /** The NOTATION Catalog Entry type. */</div>
<a id="L236" name="L236"></a> 236   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> NOTATION = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("NOTATION", 2);
<a id="L237" name="L237"></a> 237 
<div class="comment">
   /** The PUBLIC Catalog Entry type. */</div>
<a id="L239" name="L239"></a> 239   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> PUBLIC   = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("PUBLIC", 2);
<a id="L240" name="L240"></a> 240 
<div class="comment">
   /** The SYSTEM Catalog Entry type. */</div>
<a id="L242" name="L242"></a> 242   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SYSTEM   = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("SYSTEM", 2);
<a id="L243" name="L243"></a> 243 
<div class="comment">
   /** The URI Catalog Entry type. */</div>
<a id="L245" name="L245"></a> 245   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>      = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("URI", 2);
<a id="L246" name="L246"></a> 246 
<div class="comment">
   /** The REWRITE_SYSTEM Catalog Entry type. */</div>
<a id="L248" name="L248"></a> 248   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REWRITE_SYSTEM = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("REWRITE_SYSTEM", 2);
<a id="L249" name="L249"></a> 249 
<div class="comment">
   /** The REWRITE_URI Catalog Entry type. */</div>
<a id="L251" name="L251"></a> 251   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> REWRITE_URI = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("REWRITE_URI", 2);
<div class="comment">
   /** The SYSTEM_SUFFIX Catalog Entry type. */</div>
<a id="L253" name="L253"></a> 253   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> SYSTEM_SUFFIX = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("SYSTEM_SUFFIX", 2);
<div class="comment">
   /** The URI_SUFFIX Catalog Entry type. */</div>
<a id="L255" name="L255"></a> 255   <strong class="reserved">public</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> URI_SUFFIX = <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>.<a href="../S/5935.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">addEntryType</a>("URI_SUFFIX", 2);
<a id="L256" name="L256"></a> 256 
<div class="comment">
    The base URI for relative system identifiers in the catalog.
    This may be changed by BASE entries in the catalog.</div>
<a id="L261" name="L261"></a> 261   <strong class="reserved">protected</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> base;
<a id="L262" name="L262"></a> 262 
<div class="comment">
   /** The base URI of the Catalog file currently being parsed. */</div>
<a id="L264" name="L264"></a> 264   <strong class="reserved">protected</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> catalogCwd;
<a id="L265" name="L265"></a> 265 
<div class="comment">
   /** The catalog entries currently known to the system. */</div>
<a id="L267" name="L267"></a> 267   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> catalogEntries = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L268" name="L268"></a> 268 
<div class="comment">
   /** The default initial override setting. */</div>
<a id="L270" name="L270"></a> 270   <strong class="reserved">protected</strong> <strong class="reserved">boolean</strong> default_override = <strong class="reserved">true</strong>;
<a id="L271" name="L271"></a> 271 
<div class="comment">
   /** The catalog manager in use for this instance. */</div>
<a id="L273" name="L273"></a> 273   <strong class="reserved">protected</strong> <a href="../S/5933.html#L126" title="Defined at 126 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">CatalogManager</a> catalogManager = <a href="../S/5933.html#L126" title="Defined at 126 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">CatalogManager</a>.<a href="../S/5933.html#L291" title="Defined at 291 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">getStaticManager</a>();
<a id="L274" name="L274"></a> 274 
<div class="comment">
    A vector of catalog files to be loaded.
    <p>This list is initially established by
    <code>loadSystemCatalogs</code> when
    it parses the system catalog list, but CATALOG entries may
    contribute to it during the course of parsing.</p>
    @see #loadSystemCatalogs
    @see #localCatalogFiles</div>
<a id="L286" name="L286"></a> 286   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a> = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L287" name="L287"></a> 287 
<div class="comment">
    A vector of catalog files constructed during processing of
    CATALOG entries in the current catalog.
    <p>This two-level system is actually necessary to correctly implement
    the semantics of the CATALOG entry. If one catalog file includes
    another with a CATALOG entry, the included catalog logically
    occurs <i>at the end</i> of the including catalog, and after any
    preceding CATALOG entries. In other words, the CATALOG entry
    cannot insert anything into the middle of a catalog file.</p>
    <p>When processing reaches the end of each catalog files, any
    elements on this vector are added to the front of the
    <code>catalogFiles</code> vector.</p>
    @see #catalogFiles</div>
<a id="L305" name="L305"></a> 305   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> localCatalogFiles = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L306" name="L306"></a> 306 
<div class="comment">
    A vector of Catalogs.
    <p>The semantics of Catalog resolution are such that each
    catalog is effectively a list of Catalogs (in other words,
    a recursive list of Catalog instances).</p>
    <p>Catalogs that are processed as the result of CATALOG or
    DELEGATE* entries are subordinate to the catalog that contained
    them, but they may in turn have subordinate catalogs.</p>
    <p>Catalogs are only loaded when they are needed, so this vector
    initially contains a list of Catalog filenames (URLs). If, during
    processing, one of these catalogs has to be loaded, the resulting
    Catalog object is placed in the vector, effectively caching it
    for the next query.</p></div>
<a id="L324" name="L324"></a> 324   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> catalogs = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L325" name="L325"></a> 325 
<div class="comment">
    A vector of DELEGATE* Catalog entries constructed during
    processing of the Catalog.
    <p>This two-level system has two purposes; first, it allows
    us to sort the DELEGATE* entries by the length of the partial
    public identifier so that a linear search encounters them in
    the correct order and second, it puts them all at the end of
    the Catalog.</p>
    <p>When processing reaches the end of each catalog file, any
    elements on this vector are added to the end of the
    <code>catalogEntries</code> vector. This assures that matching
    PUBLIC keywords are encountered before DELEGATE* entries.</p></div>
<a id="L341" name="L341"></a> 341   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> localDelegate = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L342" name="L342"></a> 342 
<div class="comment">
    A hash of CatalogReaders.
    <p>This hash maps MIME types to elements in the readerArr
    vector. This allows the Catalog to quickly locate the reader
    for a particular MIME type.</p></div>
<a id="L350" name="L350"></a> 350   <strong class="reserved">protected</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a> readerMap = <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>();
<a id="L351" name="L351"></a> 351 
<div class="comment">
    A vector of CatalogReaders.
    <p>This vector contains all of the readers in the order that they
    were added. In the event that a catalog is read from a file, where
    the MIME type is unknown, each reader is attempted in turn until
    one succeeds.</p></div>
<a id="L360" name="L360"></a> 360   <strong class="reserved">protected</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> readerArr = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L361" name="L361"></a> 361 
<div class="comment">
    Constructs an empty Catalog.
    <p>The constructor interrogates the relevant system properties
    using the default (static) CatalogManager
    and initializes the catalog data structures.</p></div>
<a id="L369" name="L369"></a> 369   <strong class="reserved">public</strong> Catalog() <em class="brace">{</em>
<a id="L370" name="L370"></a> 370     <em class="comment">// nop;</em>
<a id="L371" name="L371"></a> 371   <em class="brace">}</em>
<a id="L372" name="L372"></a> 372 
<div class="comment">
    Constructs an empty Catalog with a specific CatalogManager.
    <p>The constructor interrogates the relevant system properties
    using the specified Catalog Manager
    and initializes the catalog data structures.</p></div>
<a id="L380" name="L380"></a> 380   <strong class="reserved">public</strong> Catalog(<a href="../S/5933.html#L126" title="Defined at 126 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">CatalogManager</a> manager) <em class="brace">{</em>
<a id="L381" name="L381"></a> 381     catalogManager = manager;
<a id="L382" name="L382"></a> 382   <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<div class="comment">
    Return the CatalogManager used by this catalog.</div>
<a id="L388" name="L388"></a> 388   <strong class="reserved">public</strong> <a href="../S/5933.html#L126" title="Defined at 126 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">CatalogManager</a> <a href="../R/15461.html" title="Multiple referred from 26 places.">getCatalogManager</a>() <em class="brace">{</em>
<a id="L389" name="L389"></a> 389     <strong class="reserved">return</strong> catalogManager;
<a id="L390" name="L390"></a> 390   <em class="brace">}</em>
<a id="L391" name="L391"></a> 391 
<div class="comment">
    Establish the CatalogManager used by this catalog.</div>
<a id="L396" name="L396"></a> 396   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27013.html" title="Multiple referred from 3 places.">setCatalogManager</a>(<a href="../S/5933.html#L126" title="Defined at 126 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">CatalogManager</a> manager) <em class="brace">{</em>
<a id="L397" name="L397"></a> 397     catalogManager = manager;
<a id="L398" name="L398"></a> 398   <em class="brace">}</em>
<a id="L399" name="L399"></a> 399 
<div class="comment">
    Setup readers.</div>
<a id="L403" name="L403"></a> 403   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5933.html#L702" title="Referred from 702 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">setupReaders</a>() <em class="brace">{</em>
<a id="L404" name="L404"></a> 404     <a href="../S/3844.html#L43" title="Defined at 43 in src/javax/xml/parsers/SAXParserFactory.java.">SAXParserFactory</a> spf = catalogManager.<a href="../S/5933.html#L781" title="Defined at 781 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">useServicesMechanism</a>() ?
<a id="L405" name="L405"></a> 405                     <a href="../S/3844.html#L43" title="Defined at 43 in src/javax/xml/parsers/SAXParserFactory.java.">SAXParserFactory</a>.<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>() : <strong class="reserved">new</strong> <a href="../S/5399.html#L48" title="Defined at 48 in src/com/sun/org/apache/xerces/internal/jaxp/SAXParserFactoryImpl.java.">SAXParserFactoryImpl</a>();
<a id="L406" name="L406"></a> 406     spf.<a href="../D/33323.html" title="Multiple defined in 3 places.">setNamespaceAware</a>(<strong class="reserved">true</strong>);
<a id="L407" name="L407"></a> 407     spf.<a href="../D/34262.html" title="Multiple defined in 5 places.">setValidating</a>(<strong class="reserved">false</strong>);
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409     <a href="../S/5939.html#L79" title="Defined at 79 in src/com/sun/org/apache/xml/internal/resolver/readers/SAXCatalogReader.java.">SAXCatalogReader</a> saxReader = <strong class="reserved">new</strong> <a href="../S/5939.html#L79" title="Defined at 79 in src/com/sun/org/apache/xml/internal/resolver/readers/SAXCatalogReader.java.">SAXCatalogReader</a>(spf);
<a id="L410" name="L410"></a> 410 
<a id="L411" name="L411"></a> 411     saxReader.<a href="../D/32106.html" title="Multiple defined in 2 places.">setCatalogParser</a>(<strong class="reserved">null</strong>, "XMLCatalog",
<a id="L412" name="L412"></a> 412                                "com.sun.org.apache.xml.internal.resolver.readers.XCatalogReader");
<a id="L413" name="L413"></a> 413 
<a id="L414" name="L414"></a> 414     saxReader.<a href="../D/32106.html" title="Multiple defined in 2 places.">setCatalogParser</a>(<a href="../S/5938.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/OASISXMLCatalogReader.java.">OASISXMLCatalogReader</a>.namespaceName,
<a id="L415" name="L415"></a> 415                                "catalog",
<a id="L416" name="L416"></a> 416                                "com.sun.org.apache.xml.internal.resolver.readers.OASISXMLCatalogReader");
<a id="L417" name="L417"></a> 417 
<a id="L418" name="L418"></a> 418     <a href="../S/5932.html#L444" title="Defined at 444 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addReader</a>("application/xml", saxReader);
<a id="L419" name="L419"></a> 419 
<a id="L420" name="L420"></a> 420     <a href="../S/5941.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/readers/TR9401CatalogReader.java.">TR9401CatalogReader</a> textReader = <strong class="reserved">new</strong> <a href="../S/5941.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/readers/TR9401CatalogReader.java.">TR9401CatalogReader</a>();
<a id="L421" name="L421"></a> 421     <a href="../S/5932.html#L444" title="Defined at 444 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addReader</a>("text/plain", textReader);
<a id="L422" name="L422"></a> 422   <em class="brace">}</em>
<a id="L423" name="L423"></a> 423 
<div class="comment">
    Add a new CatalogReader to the Catalog.
    <p>This method allows you to add a new CatalogReader to the
    catalog. The reader will be associated with the specified mimeType.
    You can only have one reader per mimeType.</p>
    <p>In the absence of a mimeType (e.g., when reading a catalog
    directly from a file on the local system), the readers are attempted
    in the order that you add them to the Catalog.</p>
    <p>Note that subordinate catalogs (created by CATALOG or
    DELEGATE* entries) get a copy of the set of readers present in
    the primary catalog when they are created. Readers added subsequently
    will not be available. For this reason, it is best to add all
    of the readers before the first call to parse a catalog.</p>
    @param mimeType The MIME type associated with this reader.
    @param reader The CatalogReader to use.</div>
<a id="L444" name="L444"></a> 444   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9921.html" title="Multiple referred from 6 places.">addReader</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> mimeType, <a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>) <em class="brace">{</em>
<a id="L445" name="L445"></a> 445     <strong class="reserved">if</strong> (readerMap.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(mimeType)) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446       <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> pos = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) readerMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(mimeType);
<a id="L447" name="L447"></a> 447       readerArr.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(pos.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>(), <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>);
<a id="L448" name="L448"></a> 448     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L449" name="L449"></a> 449       readerArr.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>);
<a id="L450" name="L450"></a> 450       <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> pos = <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>(readerArr.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()-1);
<a id="L451" name="L451"></a> 451       readerMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(mimeType, pos);
<a id="L452" name="L452"></a> 452     <em class="brace">}</em>
<a id="L453" name="L453"></a> 453   <em class="brace">}</em>
<a id="L454" name="L454"></a> 454 
<div class="comment">
    Copies the reader list from the current Catalog to a new Catalog.
    <p>This method is used internally when constructing a new catalog.
    It copies the current reader associations over to the new catalog.
    </p>
    @param newCatalog The new Catalog.</div>
<a id="L464" name="L464"></a> 464   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/12127.html" title="Multiple referred from 2 places.">copyReaders</a>(<a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>) <em class="brace">{</em>
<a id="L465" name="L465"></a> 465     <em class="comment">// Have to copy the readers in the right order...convert hash to arr</em>
<a id="L466" name="L466"></a> 466     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> mapArr = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>(readerMap.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>());
<a id="L467" name="L467"></a> 467 
<a id="L468" name="L468"></a> 468     <em class="comment">// Pad the mapArr out to the right length</em>
<a id="L469" name="L469"></a> 469     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; readerMap.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L470" name="L470"></a> 470       mapArr.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(<strong class="reserved">null</strong>);
<a id="L471" name="L471"></a> 471     <em class="brace">}</em>
<a id="L472" name="L472"></a> 472 
<a id="L473" name="L473"></a> 473     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = readerMap.<a href="../D/26726.html" title="Multiple defined in 22 places.">keys</a>();
<a id="L474" name="L474"></a> 474     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> mimeType = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L476" name="L476"></a> 476       <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> pos = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) readerMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(mimeType);
<a id="L477" name="L477"></a> 477       mapArr.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>(pos.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>(), mimeType);
<a id="L478" name="L478"></a> 478     <em class="brace">}</em>
<a id="L479" name="L479"></a> 479 
<a id="L480" name="L480"></a> 480     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; mapArr.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L481" name="L481"></a> 481       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> mimeType = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) mapArr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L482" name="L482"></a> 482       <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a> pos = (<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) readerMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(mimeType);
<a id="L483" name="L483"></a> 483       <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>.<a href="../S/5932.html#L444" title="Defined at 444 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addReader</a>(mimeType,
<a id="L484" name="L484"></a> 484                            (<a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a>)
<a id="L485" name="L485"></a> 485                            readerArr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(pos.<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>()));
<a id="L486" name="L486"></a> 486     <em class="brace">}</em>
<a id="L487" name="L487"></a> 487   <em class="brace">}</em>
<a id="L488" name="L488"></a> 488 
<div class="comment">
    Create a new Catalog object.
    <p>This method constructs a new instance of the running Catalog
    class (which might be a subtype of com.sun.org.apache.xml.internal.resolver.Catalog).
    All new catalogs are managed by the same CatalogManager.
    </p>
    <p>N.B. All Catalog subtypes should call newCatalog() to construct
    a new Catalog. Do not simply use "new Subclass()" since that will
    confuse future subclasses.</p></div>
<a id="L501" name="L501"></a> 501   <strong class="reserved">protected</strong> <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../R/23528.html" title="Multiple referred from 10 places.">newCatalog</a>() <em class="brace">{</em>
<a id="L502" name="L502"></a> 502     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catalogClass = <strong class="reserved">this</strong>.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../D/20784.html" title="Multiple defined in 355 places.">getName</a>();
<a id="L503" name="L503"></a> 503 
<a id="L504" name="L504"></a> 504     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L505" name="L505"></a> 505       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a>) (<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>.<a href="../D/16518.html" title="Multiple defined in 6 places.">forName</a>(catalogClass).<a href="../D/28016.html" title="Multiple defined in 74 places.">newInstance</a>());
<a id="L506" name="L506"></a> 506       <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/5932.html#L396" title="Defined at 396 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">setCatalogManager</a>(catalogManager);
<a id="L507" name="L507"></a> 507       <a href="../S/5932.html#L464" title="Defined at 464 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">copyReaders</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L508" name="L508"></a> 508       <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L509" name="L509"></a> 509     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> cnfe) <em class="brace">{</em>
<a id="L510" name="L510"></a> 510       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Class Not Found Exception: " + catalogClass);
<a id="L511" name="L511"></a> 511     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1574.html#L59" title="Defined at 59 in src/java/lang/IllegalAccessException.java.">IllegalAccessException</a> iae) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Illegal Access Exception: " + catalogClass);
<a id="L513" name="L513"></a> 513     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1743.html#L46" title="Defined at 46 in src/java/lang/InstantiationException.java.">InstantiationException</a> ie) <em class="brace">{</em>
<a id="L514" name="L514"></a> 514       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Instantiation Exception: " + catalogClass);
<a id="L515" name="L515"></a> 515     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a> cce) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Class Cast Exception: " + catalogClass);
<a id="L517" name="L517"></a> 517     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> e) <em class="brace">{</em>
<a id="L518" name="L518"></a> 518       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Other Exception: " + catalogClass);
<a id="L519" name="L519"></a> 519     <em class="brace">}</em>
<a id="L520" name="L520"></a> 520 
<a id="L521" name="L521"></a> 521     <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">new</strong> <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a>();
<a id="L522" name="L522"></a> 522     <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/5932.html#L396" title="Defined at 396 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">setCatalogManager</a>(catalogManager);
<a id="L523" name="L523"></a> 523     <a href="../S/5932.html#L464" title="Defined at 464 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">copyReaders</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L524" name="L524"></a> 524     <strong class="reserved">return</strong> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>;
<a id="L525" name="L525"></a> 525   <em class="brace">}</em>
<a id="L526" name="L526"></a> 526 
<div class="comment">
    Returns the current base URI.</div>
<a id="L530" name="L530"></a> 530   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5938.html#L108" title="Referred from 108 in src/com/sun/org/apache/xml/internal/resolver/readers/OASISXMLCatalogReader.java.">getCurrentBase</a>() <em class="brace">{</em>
<a id="L531" name="L531"></a> 531     <strong class="reserved">return</strong> base.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L532" name="L532"></a> 532   <em class="brace">}</em>
<a id="L533" name="L533"></a> 533 
<div class="comment">
    Returns the default override setting associated with this
    catalog.
    <p>All catalog files loaded by this catalog will have the
    initial override setting specified by this default.</p></div>
<a id="L541" name="L541"></a> 541   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/16053.html" title="Multiple referred from 2 places.">getDefaultOverride</a>() <em class="brace">{</em>
<a id="L542" name="L542"></a> 542     <strong class="reserved">if</strong> (default_override) <em class="brace">{</em>
<a id="L543" name="L543"></a> 543       <strong class="reserved">return</strong> "yes";
<a id="L544" name="L544"></a> 544     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L545" name="L545"></a> 545       <strong class="reserved">return</strong> "no";
<a id="L546" name="L546"></a> 546     <em class="brace">}</em>
<a id="L547" name="L547"></a> 547   <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<div class="comment">
    Load the system catalog files.
    <p>The method adds all of the
    catalogs specified in the <tt>xml.catalog.files</tt> property
    to the Catalog list.</p>
    @throws MalformedURLException  One of the system catalogs is
    identified with a filename that is not a valid URL.
    @throws IOException One of the system catalogs cannot be read.</div>
<a id="L560" name="L560"></a> 560   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5933.html#L703" title="Referred from 703 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">loadSystemCatalogs</a>()
<a id="L561" name="L561"></a> 561     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L562" name="L562"></a> 562 
<a id="L563" name="L563"></a> 563     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> catalogs = catalogManager.<a href="../S/5933.html#L503" title="Defined at 503 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">getCatalogFiles</a>();
<a id="L564" name="L564"></a> 564     <strong class="reserved">if</strong> (catalogs != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L565" name="L565"></a> 565       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; catalogs.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566         <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(catalogs.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>));
<a id="L567" name="L567"></a> 567       <em class="brace">}</em>
<a id="L568" name="L568"></a> 568     <em class="brace">}</em>
<a id="L569" name="L569"></a> 569 
<a id="L570" name="L570"></a> 570     <strong class="reserved">if</strong> (<a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571       <em class="comment">// This is a little odd. The parseCatalog() method expects</em>
<a id="L572" name="L572"></a> 572       <em class="comment">// a filename, but it adds that name to the end of the</em>
<a id="L573" name="L573"></a> 573       <em class="comment">// catalogFiles vector, and then processes that vector.</em>
<a id="L574" name="L574"></a> 574       <em class="comment">// This allows the system to handle CATALOG entries</em>
<a id="L575" name="L575"></a> 575       <em class="comment">// correctly.</em>
<a id="L576" name="L576"></a> 576       <em class="comment">//</em>
<a id="L577" name="L577"></a> 577       <em class="comment">// In this init case, we take the last element off the</em>
<a id="L578" name="L578"></a> 578       <em class="comment">// catalogFiles vector and pass it to parseCatalog. This</em>
<a id="L579" name="L579"></a> 579       <em class="comment">// will "do the right thing" in the init case, and allow</em>
<a id="L580" name="L580"></a> 580       <em class="comment">// parseCatalog() to do the right thing in the non-init</em>
<a id="L581" name="L581"></a> 581       <em class="comment">// case. Honest.</em>
<a id="L582" name="L582"></a> 582       <em class="comment">//</em>
<a id="L583" name="L583"></a> 583       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/26745.html" title="Multiple defined in 2 places.">lastElement</a>();
<a id="L584" name="L584"></a> 584       <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/30774.html" title="Multiple defined in 14 places.">removeElement</a>(catfile);
<a id="L585" name="L585"></a> 585       <a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(catfile);
<a id="L586" name="L586"></a> 586     <em class="brace">}</em>
<a id="L587" name="L587"></a> 587   <em class="brace">}</em>
<a id="L588" name="L588"></a> 588 
<div class="comment">
    Parse a catalog file, augmenting internal data structures.
    @param fileName The filename of the catalog file to process
    @throws MalformedURLException The fileName cannot be turned into
    a valid URL.
    @throws IOException Error reading catalog file.</div>
<a id="L598" name="L598"></a> 598   <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24518.html" title="Multiple referred from 12 places.">parseCatalog</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fileName)
<a id="L599" name="L599"></a> 599     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601     default_override = catalogManager.<a href="../D/21570.html" title="Multiple defined in 2 places.">getPreferPublic</a>();
<a id="L602" name="L602"></a> 602     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "Parse catalog: " + fileName);
<a id="L603" name="L603"></a> 603 
<a id="L604" name="L604"></a> 604     <em class="comment">// Put the file into the list of catalogs to process...</em>
<a id="L605" name="L605"></a> 605     <em class="comment">// In all cases except the case when initCatalog() is the</em>
<a id="L606" name="L606"></a> 606     <em class="comment">// caller, this will be the only catalog initially in the list...</em>
<a id="L607" name="L607"></a> 607     <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(fileName);
<a id="L608" name="L608"></a> 608 
<a id="L609" name="L609"></a> 609     <em class="comment">// Now process all the pending catalogs...</em>
<a id="L610" name="L610"></a> 610     <a href="../S/5932.html#L714" title="Defined at 714 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parsePendingCatalogs</a>();
<a id="L611" name="L611"></a> 611   <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<div class="comment">
    Parse a catalog file, augmenting internal data structures.
    <p>Catalogs retrieved over the net may have an associated MIME type.
    The MIME type can be used to select an appropriate reader.</p>
    @param mimeType The MIME type of the catalog file.
    @param is The InputStream from which the catalog should be read
    @throws CatalogException Failed to load catalog
    mimeType.
    @throws IOException Error reading catalog file.</div>
<a id="L626" name="L626"></a> 626   <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24518.html" title="Multiple referred from 12 places.">parseCatalog</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> mimeType, <a href="../D/4231.html" title="Multiple defined in 3 places.">InputStream</a> <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>)
<a id="L627" name="L627"></a> 627     <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a> <em class="brace">{</em>
<a id="L628" name="L628"></a> 628 
<a id="L629" name="L629"></a> 629     default_override = catalogManager.<a href="../D/21570.html" title="Multiple defined in 2 places.">getPreferPublic</a>();
<a id="L630" name="L630"></a> 630     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "Parse " + mimeType + " catalog on input stream");
<a id="L631" name="L631"></a> 631 
<a id="L632" name="L632"></a> 632     <a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = <strong class="reserved">null</strong>;
<a id="L633" name="L633"></a> 633 
<a id="L634" name="L634"></a> 634     <strong class="reserved">if</strong> (readerMap.<a href="../D/13333.html" title="Multiple defined in 42 places.">containsKey</a>(mimeType)) <em class="brace">{</em>
<a id="L635" name="L635"></a> 635       <strong class="reserved">int</strong> arrayPos = ((<a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>) readerMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(mimeType)).<a href="../D/24897.html" title="Multiple defined in 21 places.">intValue</a>();
<a id="L636" name="L636"></a> 636       <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = (<a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a>) readerArr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(arrayPos);
<a id="L637" name="L637"></a> 637     <em class="brace">}</em>
<a id="L638" name="L638"></a> 638 
<a id="L639" name="L639"></a> 639     <strong class="reserved">if</strong> (<a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L640" name="L640"></a> 640       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a> = "No CatalogReader for MIME type: " + mimeType;
<a id="L641" name="L641"></a> 641       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L642" name="L642"></a> 642       <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a>(<a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a>.UNPARSEABLE, <a href="../S/6957.html#L1026" title="Defined at 1026 in src/com/sun/corba/se/impl/io/ObjectStreamClass.java.">msg</a>);
<a id="L643" name="L643"></a> 643     <em class="brace">}</em>
<a id="L644" name="L644"></a> 644 
<a id="L645" name="L645"></a> 645     <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30141.html" title="Multiple defined in 9 places.">readCatalog</a>(<strong class="reserved">this</strong>, <a href="../D/25134.html" title="Multiple defined in 5 places.">is</a>);
<a id="L646" name="L646"></a> 646 
<a id="L647" name="L647"></a> 647     <em class="comment">// Now process all the pending catalogs...</em>
<a id="L648" name="L648"></a> 648     <a href="../S/5932.html#L714" title="Defined at 714 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parsePendingCatalogs</a>();
<a id="L649" name="L649"></a> 649   <em class="brace">}</em>
<a id="L650" name="L650"></a> 650 
<div class="comment">
    Parse a catalog document, augmenting internal data structures.
    <p>This method supports catalog files stored in jar files: e.g.,
    jar:file:///path/to/filename.jar!/path/to/catalog.xml". That URI
    doesn't survive transmogrification through the URI processing that
    the parseCatalog(String) performs and passing it as an input stream
    doesn't set the base URI appropriately.</p>
    <p>Written by Stefan Wachter (2002-09-26)</p>
    @param aUrl The URL of the catalog document to process
    @throws IOException Error reading catalog file.</div>
<a id="L666" name="L666"></a> 666   <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24518.html" title="Multiple referred from 12 places.">parseCatalog</a>(<a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> aUrl) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L667" name="L667"></a> 667     catalogCwd = aUrl;
<a id="L668" name="L668"></a> 668     base = aUrl;
<a id="L669" name="L669"></a> 669 
<a id="L670" name="L670"></a> 670     default_override = catalogManager.<a href="../D/21570.html" title="Multiple defined in 2 places.">getPreferPublic</a>();
<a id="L671" name="L671"></a> 671     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "Parse catalog: " + aUrl.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L672" name="L672"></a> 672 
<a id="L673" name="L673"></a> 673     <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a> inStream = <strong class="reserved">null</strong>;
<a id="L674" name="L674"></a> 674     <strong class="reserved">boolean</strong> parsed = <strong class="reserved">false</strong>;
<a id="L675" name="L675"></a> 675 
<a id="L676" name="L676"></a> 676     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; !parsed &amp;&amp; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; readerArr.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L677" name="L677"></a> 677       <a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = (<a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a>) readerArr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L678" name="L678"></a> 678 
<a id="L679" name="L679"></a> 679       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L680" name="L680"></a> 680         inStream = <strong class="reserved">new</strong> <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a>(aUrl.<a href="../S/768.html#L1037" title="Defined at 1037 in src/java/net/URL.java.">openStream</a>());
<a id="L681" name="L681"></a> 681       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1431.html#L43" title="Defined at 43 in src/java/io/FileNotFoundException.java.">FileNotFoundException</a> fnfe) <em class="brace">{</em>
<a id="L682" name="L682"></a> 682         <em class="comment">// No catalog; give up!</em>
<a id="L683" name="L683"></a> 683         <strong class="reserved">break</strong>;
<a id="L684" name="L684"></a> 684       <em class="brace">}</em>
<a id="L685" name="L685"></a> 685 
<a id="L686" name="L686"></a> 686       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L687" name="L687"></a> 687         <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30141.html" title="Multiple defined in 9 places.">readCatalog</a>(<strong class="reserved">this</strong>, inStream);
<a id="L688" name="L688"></a> 688         parsed=<strong class="reserved">true</strong>;
<a id="L689" name="L689"></a> 689       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a> ce) <em class="brace">{</em>
<a id="L690" name="L690"></a> 690         <strong class="reserved">if</strong> (ce.<a href="../S/5936.html#L150" title="Defined at 150 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">getExceptionType</a>() == <a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a>.PARSE_FAILED) <em class="brace">{</em>
<a id="L691" name="L691"></a> 691           <em class="comment">// give up!</em>
<a id="L692" name="L692"></a> 692           <strong class="reserved">break</strong>;
<a id="L693" name="L693"></a> 693         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L694" name="L694"></a> 694           <em class="comment">// try again!</em>
<a id="L695" name="L695"></a> 695         <em class="brace">}</em>
<a id="L696" name="L696"></a> 696       <em class="brace">}</em>
<a id="L697" name="L697"></a> 697 
<a id="L698" name="L698"></a> 698       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L699" name="L699"></a> 699         inStream.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L700" name="L700"></a> 700       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L701" name="L701"></a> 701         <em class="comment">//nop</em>
<a id="L702" name="L702"></a> 702       <em class="brace">}</em>
<a id="L703" name="L703"></a> 703     <em class="brace">}</em>
<a id="L704" name="L704"></a> 704 
<a id="L705" name="L705"></a> 705     <strong class="reserved">if</strong> (parsed) <a href="../S/5932.html#L714" title="Defined at 714 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parsePendingCatalogs</a>();
<a id="L706" name="L706"></a> 706   <em class="brace">}</em>
<a id="L707" name="L707"></a> 707 
<div class="comment">
    Parse all of the pending catalogs.
    <p>Catalogs may refer to other catalogs, this method parses
    all of the currently pending catalog files.</p></div>
<a id="L714" name="L714"></a> 714   <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/24593.html" title="Multiple referred from 3 places.">parsePendingCatalogs</a>()
<a id="L715" name="L715"></a> 715     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L716" name="L716"></a> 716 
<a id="L717" name="L717"></a> 717     <strong class="reserved">if</strong> (!localCatalogFiles.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L718" name="L718"></a> 718       <em class="comment">// Move all the localCatalogFiles into the front of</em>
<a id="L719" name="L719"></a> 719       <em class="comment">// the catalogFiles queue</em>
<a id="L720" name="L720"></a> 720       <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> newQueue = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L721" name="L721"></a> 721       <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> q = localCatalogFiles.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L722" name="L722"></a> 722       <strong class="reserved">while</strong> (q.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L723" name="L723"></a> 723         newQueue.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(q.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>());
<a id="L724" name="L724"></a> 724       <em class="brace">}</em>
<a id="L725" name="L725"></a> 725 
<a id="L726" name="L726"></a> 726       <em class="comment">// Put the rest of the catalogs on the end of the new list</em>
<a id="L727" name="L727"></a> 727       <strong class="reserved">for</strong> (<strong class="reserved">int</strong> curCat = 0; curCat &lt; <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); curCat++) <em class="brace">{</em>
<a id="L728" name="L728"></a> 728         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(curCat);
<a id="L729" name="L729"></a> 729         newQueue.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(catfile);
<a id="L730" name="L730"></a> 730       <em class="brace">}</em>
<a id="L731" name="L731"></a> 731 
<a id="L732" name="L732"></a> 732       <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a> = newQueue;
<a id="L733" name="L733"></a> 733       localCatalogFiles.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L734" name="L734"></a> 734     <em class="brace">}</em>
<a id="L735" name="L735"></a> 735 
<a id="L736" name="L736"></a> 736     <em class="comment">// Suppose there are no catalog files to process, but the</em>
<a id="L737" name="L737"></a> 737     <em class="comment">// single catalog already parsed included some delegate</em>
<a id="L738" name="L738"></a> 738     <em class="comment">// entries? Make sure they don't get lost.</em>
<a id="L739" name="L739"></a> 739     <strong class="reserved">if</strong> (<a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>() &amp;&amp; !localDelegate.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L740" name="L740"></a> 740       <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> e = localDelegate.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L741" name="L741"></a> 741       <strong class="reserved">while</strong> (e.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L742" name="L742"></a> 742         catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>());
<a id="L743" name="L743"></a> 743       <em class="brace">}</em>
<a id="L744" name="L744"></a> 744       localDelegate.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L745" name="L745"></a> 745     <em class="brace">}</em>
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747     <em class="comment">// Now process all the files on the catalogFiles vector. This</em>
<a id="L748" name="L748"></a> 748     <em class="comment">// vector can grow during processing if CATALOG entries are</em>
<a id="L749" name="L749"></a> 749     <em class="comment">// encountered in the catalog</em>
<a id="L750" name="L750"></a> 750     <strong class="reserved">while</strong> (!<a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L751" name="L751"></a> 751       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(0);
<a id="L752" name="L752"></a> 752       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L753" name="L753"></a> 753         <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/30677.html" title="Multiple defined in 356 places.">remove</a>(0);
<a id="L754" name="L754"></a> 754       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1761.html#L37" title="Defined at 37 in src/java/lang/ArrayIndexOutOfBoundsException.java.">ArrayIndexOutOfBoundsException</a> e) <em class="brace">{</em>
<a id="L755" name="L755"></a> 755         <em class="comment">// can't happen</em>
<a id="L756" name="L756"></a> 756       <em class="brace">}</em>
<a id="L757" name="L757"></a> 757 
<a id="L758" name="L758"></a> 758       <strong class="reserved">if</strong> (catalogEntries.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0 &amp;&amp; catalogs.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L759" name="L759"></a> 759         <em class="comment">// We haven't parsed any catalogs yet, let this</em>
<a id="L760" name="L760"></a> 760         <em class="comment">// catalog be the first...</em>
<a id="L761" name="L761"></a> 761         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L762" name="L762"></a> 762           <a href="../S/5932.html#L813" title="Defined at 813 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parseCatalogFile</a>(catfile);
<a id="L763" name="L763"></a> 763         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a> ce) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764           <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29725.html" title="Multiple defined in 27 places.">println</a>("FIXME: " + ce.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L765" name="L765"></a> 765         <em class="brace">}</em>
<a id="L766" name="L766"></a> 766       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L767" name="L767"></a> 767         <em class="comment">// This is a subordinate catalog. We save its name,</em>
<a id="L768" name="L768"></a> 768         <em class="comment">// but don't bother to load it unless it's necessary.</em>
<a id="L769" name="L769"></a> 769         catalogs.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(catfile);
<a id="L770" name="L770"></a> 770       <em class="brace">}</em>
<a id="L771" name="L771"></a> 771 
<a id="L772" name="L772"></a> 772       <strong class="reserved">if</strong> (!localCatalogFiles.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L773" name="L773"></a> 773         <em class="comment">// Move all the localCatalogFiles into the front of</em>
<a id="L774" name="L774"></a> 774         <em class="comment">// the catalogFiles queue</em>
<a id="L775" name="L775"></a> 775         <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> newQueue = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L776" name="L776"></a> 776         <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> q = localCatalogFiles.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L777" name="L777"></a> 777         <strong class="reserved">while</strong> (q.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L778" name="L778"></a> 778           newQueue.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(q.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>());
<a id="L779" name="L779"></a> 779         <em class="brace">}</em>
<a id="L780" name="L780"></a> 780 
<a id="L781" name="L781"></a> 781         <em class="comment">// Put the rest of the catalogs on the end of the new list</em>
<a id="L782" name="L782"></a> 782         <strong class="reserved">for</strong> (<strong class="reserved">int</strong> curCat = 0; curCat &lt; <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); curCat++) <em class="brace">{</em>
<a id="L783" name="L783"></a> 783           catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(curCat);
<a id="L784" name="L784"></a> 784           newQueue.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(catfile);
<a id="L785" name="L785"></a> 785         <em class="brace">}</em>
<a id="L786" name="L786"></a> 786 
<a id="L787" name="L787"></a> 787         <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a> = newQueue;
<a id="L788" name="L788"></a> 788         localCatalogFiles.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L789" name="L789"></a> 789       <em class="brace">}</em>
<a id="L790" name="L790"></a> 790 
<a id="L791" name="L791"></a> 791       <strong class="reserved">if</strong> (!localDelegate.<a href="../D/25493.html" title="Multiple defined in 113 places.">isEmpty</a>()) <em class="brace">{</em>
<a id="L792" name="L792"></a> 792         <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> e = localDelegate.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L793" name="L793"></a> 793         <strong class="reserved">while</strong> (e.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L794" name="L794"></a> 794           catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>());
<a id="L795" name="L795"></a> 795         <em class="brace">}</em>
<a id="L796" name="L796"></a> 796         localDelegate.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L797" name="L797"></a> 797       <em class="brace">}</em>
<a id="L798" name="L798"></a> 798     <em class="brace">}</em>
<a id="L799" name="L799"></a> 799 
<a id="L800" name="L800"></a> 800     <em class="comment">// We've parsed them all, reinit the vector...</em>
<a id="L801" name="L801"></a> 801     <a href="../S/5933.html#L545" title="Defined at 545 in src/com/sun/org/apache/xml/internal/resolver/CatalogManager.java.">catalogFiles</a>.<a href="../D/12817.html" title="Multiple defined in 199 places.">clear</a>();
<a id="L802" name="L802"></a> 802   <em class="brace">}</em>
<a id="L803" name="L803"></a> 803 
<div class="comment">
    Parse a single catalog file, augmenting internal data structures.
    @param fileName The filename of the catalog file to process
    @throws MalformedURLException The fileName cannot be turned into
    a valid URL.
    @throws IOException Error reading catalog file.</div>
<a id="L813" name="L813"></a> 813   <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../S/5932.html#L762" title="Referred from 762 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parseCatalogFile</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fileName)
<a id="L814" name="L814"></a> 814     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>, <a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a> <em class="brace">{</em>
<a id="L815" name="L815"></a> 815 
<a id="L816" name="L816"></a> 816     <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> entry;
<a id="L817" name="L817"></a> 817 
<a id="L818" name="L818"></a> 818     <em class="comment">// The base-base is the cwd. If the catalog file is specified</em>
<a id="L819" name="L819"></a> 819     <em class="comment">// with a relative path, this assures that it gets resolved</em>
<a id="L820" name="L820"></a> 820     <em class="comment">// properly...</em>
<a id="L821" name="L821"></a> 821     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L822" name="L822"></a> 822       <em class="comment">// tack on a basename because URLs point to files not dirs</em>
<a id="L823" name="L823"></a> 823       catalogCwd = <a href="../S/5950.html#L46" title="Defined at 46 in src/com/sun/org/apache/xml/internal/resolver/helpers/FileURL.java.">FileURL</a>.<a href="../S/5950.html#L76" title="Defined at 76 in src/com/sun/org/apache/xml/internal/resolver/helpers/FileURL.java.">makeURL</a>("basename");
<a id="L824" name="L824"></a> 824     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e) <em class="brace">{</em>
<a id="L825" name="L825"></a> 825       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> userdir = <a href="../D/7684.html" title="Multiple defined in 12 places.">SecuritySupport</a>.<a href="../D/22922.html" title="Multiple defined in 24 places.">getSystemProperty</a>("user.dir");
<a id="L826" name="L826"></a> 826       userdir.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>('\\', '/');
<a id="L827" name="L827"></a> 827       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Malformed URL on cwd", userdir);
<a id="L828" name="L828"></a> 828       catalogCwd = <strong class="reserved">null</strong>;
<a id="L829" name="L829"></a> 829     <em class="brace">}</em>
<a id="L830" name="L830"></a> 830 
<a id="L831" name="L831"></a> 831     <em class="comment">// The initial base URI is the location of the catalog file</em>
<a id="L832" name="L832"></a> 832     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L833" name="L833"></a> 833       base = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>(catalogCwd, <a href="../S/5932.html#L2086" title="Defined at 2086 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">fixSlashes</a>(fileName));
<a id="L834" name="L834"></a> 834     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e) <em class="brace">{</em>
<a id="L835" name="L835"></a> 835       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L836" name="L836"></a> 836         base = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>("file:" + <a href="../S/5932.html#L2086" title="Defined at 2086 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">fixSlashes</a>(fileName));
<a id="L837" name="L837"></a> 837       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e2) <em class="brace">{</em>
<a id="L838" name="L838"></a> 838         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Malformed URL on catalog filename",
<a id="L839" name="L839"></a> 839                       <a href="../S/5932.html#L2086" title="Defined at 2086 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">fixSlashes</a>(fileName));
<a id="L840" name="L840"></a> 840         base = <strong class="reserved">null</strong>;
<a id="L841" name="L841"></a> 841       <em class="brace">}</em>
<a id="L842" name="L842"></a> 842     <em class="brace">}</em>
<a id="L843" name="L843"></a> 843 
<a id="L844" name="L844"></a> 844     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "Loading catalog", fileName);
<a id="L845" name="L845"></a> 845     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "Default BASE", base.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L846" name="L846"></a> 846 
<a id="L847" name="L847"></a> 847     fileName = base.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L848" name="L848"></a> 848 
<a id="L849" name="L849"></a> 849     <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a> inStream = <strong class="reserved">null</strong>;
<a id="L850" name="L850"></a> 850     <strong class="reserved">boolean</strong> parsed = <strong class="reserved">false</strong>;
<a id="L851" name="L851"></a> 851     <strong class="reserved">boolean</strong> notFound = <strong class="reserved">false</strong>;
<a id="L852" name="L852"></a> 852 
<a id="L853" name="L853"></a> 853     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; !parsed &amp;&amp; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; readerArr.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L854" name="L854"></a> 854       <a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a> <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a> = (<a href="../S/5937.html#L47" title="Defined at 47 in src/com/sun/org/apache/xml/internal/resolver/readers/CatalogReader.java.">CatalogReader</a>) readerArr.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>);
<a id="L855" name="L855"></a> 855 
<a id="L856" name="L856"></a> 856       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L857" name="L857"></a> 857         notFound = <strong class="reserved">false</strong>;
<a id="L858" name="L858"></a> 858         inStream = <strong class="reserved">new</strong> <a href="../D/2185.html" title="Multiple defined in 2 places.">DataInputStream</a>(base.<a href="../S/768.html#L1037" title="Defined at 1037 in src/java/net/URL.java.">openStream</a>());
<a id="L859" name="L859"></a> 859       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1431.html#L43" title="Defined at 43 in src/java/io/FileNotFoundException.java.">FileNotFoundException</a> fnfe) <em class="brace">{</em>
<a id="L860" name="L860"></a> 860         <em class="comment">// No catalog; give up!</em>
<a id="L861" name="L861"></a> 861         notFound = <strong class="reserved">true</strong>;
<a id="L862" name="L862"></a> 862         <strong class="reserved">break</strong>;
<a id="L863" name="L863"></a> 863       <em class="brace">}</em>
<a id="L864" name="L864"></a> 864 
<a id="L865" name="L865"></a> 865       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L866" name="L866"></a> 866         <a href="../S/1437.html#L135" title="Defined at 135 in src/java/io/Console.java.">reader</a>.<a href="../D/30141.html" title="Multiple defined in 9 places.">readCatalog</a>(<strong class="reserved">this</strong>, inStream);
<a id="L867" name="L867"></a> 867         parsed = <strong class="reserved">true</strong>;
<a id="L868" name="L868"></a> 868       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a> ce) <em class="brace">{</em>
<a id="L869" name="L869"></a> 869         <strong class="reserved">if</strong> (ce.<a href="../S/5936.html#L150" title="Defined at 150 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">getExceptionType</a>() == <a href="../S/5936.html#L38" title="Defined at 38 in src/com/sun/org/apache/xml/internal/resolver/CatalogException.java.">CatalogException</a>.PARSE_FAILED) <em class="brace">{</em>
<a id="L870" name="L870"></a> 870           <em class="comment">// give up!</em>
<a id="L871" name="L871"></a> 871           <strong class="reserved">break</strong>;
<a id="L872" name="L872"></a> 872         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L873" name="L873"></a> 873           <em class="comment">// try again!</em>
<a id="L874" name="L874"></a> 874         <em class="brace">}</em>
<a id="L875" name="L875"></a> 875       <em class="brace">}</em>
<a id="L876" name="L876"></a> 876 
<a id="L877" name="L877"></a> 877       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L878" name="L878"></a> 878         inStream.<a href="../D/12922.html" title="Multiple defined in 218 places.">close</a>();
<a id="L879" name="L879"></a> 879       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> e) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880         <em class="comment">//nop</em>
<a id="L881" name="L881"></a> 881       <em class="brace">}</em>
<a id="L882" name="L882"></a> 882     <em class="brace">}</em>
<a id="L883" name="L883"></a> 883 
<a id="L884" name="L884"></a> 884     <strong class="reserved">if</strong> (!parsed) <em class="brace">{</em>
<a id="L885" name="L885"></a> 885       <strong class="reserved">if</strong> (notFound) <em class="brace">{</em>
<a id="L886" name="L886"></a> 886         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "Catalog does not exist", fileName);
<a id="L887" name="L887"></a> 887       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L888" name="L888"></a> 888         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Failed to parse catalog", fileName);
<a id="L889" name="L889"></a> 889       <em class="brace">}</em>
<a id="L890" name="L890"></a> 890     <em class="brace">}</em>
<a id="L891" name="L891"></a> 891   <em class="brace">}</em>
<a id="L892" name="L892"></a> 892 
<div class="comment">
    Cleanup and process a Catalog entry.
    <p>This method processes each Catalog entry, changing mapped
    relative system identifiers into absolute ones (based on the current
    base URI), and maintaining other information about the current
    catalog.</p>
    @param entry The CatalogEntry to process.</div>
<a id="L903" name="L903"></a> 903   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9713.html" title="Multiple referred from 25 places.">addEntry</a>(<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> entry) <em class="brace">{</em>
<a id="L904" name="L904"></a> 904     <strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> = entry.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>();
<a id="L905" name="L905"></a> 905 
<a id="L906" name="L906"></a> 906     <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == BASE) <em class="brace">{</em>
<a id="L907" name="L907"></a> 907       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L908" name="L908"></a> 908       <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> newbase = <strong class="reserved">null</strong>;
<a id="L909" name="L909"></a> 909 
<a id="L910" name="L910"></a> 910       <strong class="reserved">if</strong> (base == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L911" name="L911"></a> 911         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(5, "BASE CUR", "null");
<a id="L912" name="L912"></a> 912       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L913" name="L913"></a> 913         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(5, "BASE CUR", base.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L914" name="L914"></a> 914       <em class="brace">}</em>
<a id="L915" name="L915"></a> 915       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "BASE STR", <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L916" name="L916"></a> 916 
<a id="L917" name="L917"></a> 917       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L918" name="L918"></a> 918         <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> = <a href="../S/5932.html#L2086" title="Defined at 2086 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">fixSlashes</a>(<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L919" name="L919"></a> 919         newbase = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>(base, <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L920" name="L920"></a> 920       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e) <em class="brace">{</em>
<a id="L921" name="L921"></a> 921         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L922" name="L922"></a> 922           newbase = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>("file:" + <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L923" name="L923"></a> 923         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e2) <em class="brace">{</em>
<a id="L924" name="L924"></a> 924           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Malformed URL on base", <a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>);
<a id="L925" name="L925"></a> 925           newbase = <strong class="reserved">null</strong>;
<a id="L926" name="L926"></a> 926         <em class="brace">}</em>
<a id="L927" name="L927"></a> 927       <em class="brace">}</em>
<a id="L928" name="L928"></a> 928 
<a id="L929" name="L929"></a> 929       <strong class="reserved">if</strong> (newbase != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L930" name="L930"></a> 930         base = newbase;
<a id="L931" name="L931"></a> 931       <em class="brace">}</em>
<a id="L932" name="L932"></a> 932 
<a id="L933" name="L933"></a> 933       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(5, "BASE NEW", base.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>());
<a id="L934" name="L934"></a> 934     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == CATALOG) <em class="brace">{</em>
<a id="L935" name="L935"></a> 935       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L936" name="L936"></a> 936 
<a id="L937" name="L937"></a> 937       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "CATALOG", fsi);
<a id="L938" name="L938"></a> 938 
<a id="L939" name="L939"></a> 939       localCatalogFiles.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(fsi);
<a id="L940" name="L940"></a> 940     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == PUBLIC) <em class="brace">{</em>
<a id="L941" name="L941"></a> 941       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> publicid = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L942" name="L942"></a> 942       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> systemid = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L943" name="L943"></a> 943 
<a id="L944" name="L944"></a> 944       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, publicid);
<a id="L945" name="L945"></a> 945       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, systemid);
<a id="L946" name="L946"></a> 946 
<a id="L947" name="L947"></a> 947       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "PUBLIC", publicid, systemid);
<a id="L948" name="L948"></a> 948 
<a id="L949" name="L949"></a> 949       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L950" name="L950"></a> 950     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == SYSTEM) <em class="brace">{</em>
<a id="L951" name="L951"></a> 951       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> systemid = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L952" name="L952"></a> 952       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L953" name="L953"></a> 953 
<a id="L954" name="L954"></a> 954       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L955" name="L955"></a> 955 
<a id="L956" name="L956"></a> 956       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "SYSTEM", systemid, fsi);
<a id="L957" name="L957"></a> 957 
<a id="L958" name="L958"></a> 958       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L959" name="L959"></a> 959     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>) <em class="brace">{</em>
<a id="L960" name="L960"></a> 960       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L961" name="L961"></a> 961       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> altURI = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L962" name="L962"></a> 962 
<a id="L963" name="L963"></a> 963       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, altURI);
<a id="L964" name="L964"></a> 964 
<a id="L965" name="L965"></a> 965       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "URI", uri, altURI);
<a id="L966" name="L966"></a> 966 
<a id="L967" name="L967"></a> 967       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L968" name="L968"></a> 968     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DOCUMENT) <em class="brace">{</em>
<a id="L969" name="L969"></a> 969       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0)));
<a id="L970" name="L970"></a> 970       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, fsi);
<a id="L971" name="L971"></a> 971 
<a id="L972" name="L972"></a> 972       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DOCUMENT", fsi);
<a id="L973" name="L973"></a> 973 
<a id="L974" name="L974"></a> 974       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L975" name="L975"></a> 975     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == OVERRIDE) <em class="brace">{</em>
<a id="L976" name="L976"></a> 976       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "OVERRIDE", entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L977" name="L977"></a> 977 
<a id="L978" name="L978"></a> 978       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L979" name="L979"></a> 979     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == SGMLDECL) <em class="brace">{</em>
<a id="L980" name="L980"></a> 980       <em class="comment">// meaningless in XML</em>
<a id="L981" name="L981"></a> 981       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0)));
<a id="L982" name="L982"></a> 982       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, fsi);
<a id="L983" name="L983"></a> 983 
<a id="L984" name="L984"></a> 984       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "SGMLDECL", fsi);
<a id="L985" name="L985"></a> 985 
<a id="L986" name="L986"></a> 986       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L987" name="L987"></a> 987     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DELEGATE_PUBLIC) <em class="brace">{</em>
<a id="L988" name="L988"></a> 988       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> ppi = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L989" name="L989"></a> 989       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L990" name="L990"></a> 990 
<a id="L991" name="L991"></a> 991       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, ppi);
<a id="L992" name="L992"></a> 992       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L993" name="L993"></a> 993 
<a id="L994" name="L994"></a> 994       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DELEGATE_PUBLIC", ppi, fsi);
<a id="L995" name="L995"></a> 995 
<a id="L996" name="L996"></a> 996       <a href="../S/5932.html#L2188" title="Defined at 2188 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addDelegate</a>(entry);
<a id="L997" name="L997"></a> 997     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DELEGATE_SYSTEM) <em class="brace">{</em>
<a id="L998" name="L998"></a> 998       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> psi = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L999" name="L999"></a> 999       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1000" name="L1000"></a>1000 
<a id="L1001" name="L1001"></a>1001       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, psi);
<a id="L1002" name="L1002"></a>1002       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1003" name="L1003"></a>1003 
<a id="L1004" name="L1004"></a>1004       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DELEGATE_SYSTEM", psi, fsi);
<a id="L1005" name="L1005"></a>1005 
<a id="L1006" name="L1006"></a>1006       <a href="../S/5932.html#L2188" title="Defined at 2188 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addDelegate</a>(entry);
<a id="L1007" name="L1007"></a>1007     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DELEGATE_URI) <em class="brace">{</em>
<a id="L1008" name="L1008"></a>1008       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> pui = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1009" name="L1009"></a>1009       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1010" name="L1010"></a>1010 
<a id="L1011" name="L1011"></a>1011       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, pui);
<a id="L1012" name="L1012"></a>1012       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1013" name="L1013"></a>1013 
<a id="L1014" name="L1014"></a>1014       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DELEGATE_URI", pui, fsi);
<a id="L1015" name="L1015"></a>1015 
<a id="L1016" name="L1016"></a>1016       <a href="../S/5932.html#L2188" title="Defined at 2188 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">addDelegate</a>(entry);
<a id="L1017" name="L1017"></a>1017     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == REWRITE_SYSTEM) <em class="brace">{</em>
<a id="L1018" name="L1018"></a>1018       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> psi = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1019" name="L1019"></a>1019       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> rpx = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1020" name="L1020"></a>1020 
<a id="L1021" name="L1021"></a>1021       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, psi);
<a id="L1022" name="L1022"></a>1022       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, rpx);
<a id="L1023" name="L1023"></a>1023 
<a id="L1024" name="L1024"></a>1024       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "REWRITE_SYSTEM", psi, rpx);
<a id="L1025" name="L1025"></a>1025 
<a id="L1026" name="L1026"></a>1026       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1027" name="L1027"></a>1027     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == REWRITE_URI) <em class="brace">{</em>
<a id="L1028" name="L1028"></a>1028       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> pui = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1029" name="L1029"></a>1029       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> upx = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1030" name="L1030"></a>1030 
<a id="L1031" name="L1031"></a>1031       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, pui);
<a id="L1032" name="L1032"></a>1032       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, upx);
<a id="L1033" name="L1033"></a>1033 
<a id="L1034" name="L1034"></a>1034       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "REWRITE_URI", pui, upx);
<a id="L1035" name="L1035"></a>1035 
<a id="L1036" name="L1036"></a>1036       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1037" name="L1037"></a>1037     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == SYSTEM_SUFFIX) <em class="brace">{</em>
<a id="L1038" name="L1038"></a>1038       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> pui = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1039" name="L1039"></a>1039       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> upx = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1040" name="L1040"></a>1040 
<a id="L1041" name="L1041"></a>1041       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, pui);
<a id="L1042" name="L1042"></a>1042       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, upx);
<a id="L1043" name="L1043"></a>1043 
<a id="L1044" name="L1044"></a>1044       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "SYSTEM_SUFFIX", pui, upx);
<a id="L1045" name="L1045"></a>1045 
<a id="L1046" name="L1046"></a>1046       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1047" name="L1047"></a>1047     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == URI_SUFFIX) <em class="brace">{</em>
<a id="L1048" name="L1048"></a>1048       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> pui = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1049" name="L1049"></a>1049       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> upx = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1050" name="L1050"></a>1050 
<a id="L1051" name="L1051"></a>1051       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, pui);
<a id="L1052" name="L1052"></a>1052       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, upx);
<a id="L1053" name="L1053"></a>1053 
<a id="L1054" name="L1054"></a>1054       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "URI_SUFFIX", pui, upx);
<a id="L1055" name="L1055"></a>1055 
<a id="L1056" name="L1056"></a>1056       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1057" name="L1057"></a>1057     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DOCTYPE) <em class="brace">{</em>
<a id="L1058" name="L1058"></a>1058       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1059" name="L1059"></a>1059       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1060" name="L1060"></a>1060 
<a id="L1061" name="L1061"></a>1061       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DOCTYPE", entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0), fsi);
<a id="L1062" name="L1062"></a>1062 
<a id="L1063" name="L1063"></a>1063       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1064" name="L1064"></a>1064     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == DTDDECL) <em class="brace">{</em>
<a id="L1065" name="L1065"></a>1065       <em class="comment">// meaningless in XML</em>
<a id="L1066" name="L1066"></a>1066       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fpi = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0));
<a id="L1067" name="L1067"></a>1067       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(0, fpi);
<a id="L1068" name="L1068"></a>1068       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1069" name="L1069"></a>1069       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1070" name="L1070"></a>1070 
<a id="L1071" name="L1071"></a>1071       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "DTDDECL", fpi, fsi);
<a id="L1072" name="L1072"></a>1072 
<a id="L1073" name="L1073"></a>1073       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1074" name="L1074"></a>1074     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == ENTITY) <em class="brace">{</em>
<a id="L1075" name="L1075"></a>1075       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1076" name="L1076"></a>1076       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1077" name="L1077"></a>1077 
<a id="L1078" name="L1078"></a>1078       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "ENTITY", entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0), fsi);
<a id="L1079" name="L1079"></a>1079 
<a id="L1080" name="L1080"></a>1080       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1081" name="L1081"></a>1081     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == LINKTYPE) <em class="brace">{</em>
<a id="L1082" name="L1082"></a>1082       <em class="comment">// meaningless in XML</em>
<a id="L1083" name="L1083"></a>1083       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1084" name="L1084"></a>1084       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1085" name="L1085"></a>1085 
<a id="L1086" name="L1086"></a>1086       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "LINKTYPE", entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0), fsi);
<a id="L1087" name="L1087"></a>1087 
<a id="L1088" name="L1088"></a>1088       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1089" name="L1089"></a>1089     <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> == NOTATION) <em class="brace">{</em>
<a id="L1090" name="L1090"></a>1090       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> fsi = <a href="../D/27199.html" title="Multiple defined in 3 places.">makeAbsolute</a>(<a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1)));
<a id="L1091" name="L1091"></a>1091       entry.<a href="../S/5935.html#L248" title="Defined at 248 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">setEntryArg</a>(1, fsi);
<a id="L1092" name="L1092"></a>1092 
<a id="L1093" name="L1093"></a>1093       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(4, "NOTATION", entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0), fsi);
<a id="L1094" name="L1094"></a>1094 
<a id="L1095" name="L1095"></a>1095       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1096" name="L1096"></a>1096     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1097" name="L1097"></a>1097       catalogEntries.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L1098" name="L1098"></a>1098     <em class="brace">}</em>
<a id="L1099" name="L1099"></a>1099   <em class="brace">}</em>
<a id="L1100" name="L1100"></a>1100 
<div class="comment">
    Handle unknown CatalogEntry types.
    <p>This method exists to allow subclasses to deal with unknown
    entry types.</p></div>
<a id="L1107" name="L1107"></a>1107   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/29694.html" title="Multiple referred from 22 places.">unknownEntry</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> <a href="../D/34951.html" title="Multiple defined in 2 places.">strings</a>) <em class="brace">{</em>
<a id="L1108" name="L1108"></a>1108     <strong class="reserved">if</strong> (<a href="../D/34951.html" title="Multiple defined in 2 places.">strings</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/34951.html" title="Multiple defined in 2 places.">strings</a>.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1109" name="L1109"></a>1109       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> keyword = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) <a href="../D/34951.html" title="Multiple defined in 2 places.">strings</a>.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(0);
<a id="L1110" name="L1110"></a>1110       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "Unrecognized token parsing catalog", keyword);
<a id="L1111" name="L1111"></a>1111     <em class="brace">}</em>
<a id="L1112" name="L1112"></a>1112   <em class="brace">}</em>
<a id="L1113" name="L1113"></a>1113 
<div class="comment">
    Parse all subordinate catalogs.
    <p>This method recursively parses all of the subordinate catalogs.
    If this method does not throw an exception, you can be confident that
    no subsequent call to any resolve*() method will either, with two
    possible exceptions:</p>
    <ol>
    <li><p>Delegated catalogs are re-parsed each time they are needed
    (because a variable list of them may be needed in each case,
    depending on the length of the matching partial public identifier).</p>
    <p>But they are parsed by this method, so as long as they don't
    change or disappear while the program is running, they shouldn't
    generate errors later if they don't generate errors now.</p>
    </li><li><p>If you add new catalogs with <code>parseCatalog</code>, they
    won't be loaded until they are needed or until you call
    <code>parseAllCatalogs</code> again.</p>
    </li></ol>
    <p>On the other hand, if you don't call this method, you may
    successfully parse documents without having to load all possible
    catalogs.</p>
    @throws MalformedURLException The filename (URL) for a
    subordinate or delegated catalog is not a valid URL.
    @throws IOException Error reading some subordinate or delegated
    catalog file.</div>
<a id="L1143" name="L1143"></a>1143   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/5932.html#L1158" title="Referred from 1158 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parseAllCatalogs</a>()
<a id="L1144" name="L1144"></a>1144     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1145" name="L1145"></a>1145 
<a id="L1146" name="L1146"></a>1146     <em class="comment">// Parse all the subordinate catalogs</em>
<a id="L1147" name="L1147"></a>1147     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> catPos = 0; catPos &lt; catalogs.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); catPos++) <em class="brace">{</em>
<a id="L1148" name="L1148"></a>1148       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">null</strong>;
<a id="L1149" name="L1149"></a>1149 
<a id="L1150" name="L1150"></a>1150       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L1151" name="L1151"></a>1151         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a>) catalogs.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(catPos);
<a id="L1152" name="L1152"></a>1152       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a> e) <em class="brace">{</em>
<a id="L1153" name="L1153"></a>1153         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) catalogs.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(catPos);
<a id="L1154" name="L1154"></a>1154         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L1155" name="L1155"></a>1155 
<a id="L1156" name="L1156"></a>1156         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(catfile);
<a id="L1157" name="L1157"></a>1157         catalogs.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, catPos);
<a id="L1158" name="L1158"></a>1158         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/5932.html#L1143" title="Defined at 1143 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">parseAllCatalogs</a>();
<a id="L1159" name="L1159"></a>1159       <em class="brace">}</em>
<a id="L1160" name="L1160"></a>1160     <em class="brace">}</em>
<a id="L1161" name="L1161"></a>1161 
<a id="L1162" name="L1162"></a>1162     <em class="comment">// Parse all the DELEGATE catalogs</em>
<a id="L1163" name="L1163"></a>1163     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1164" name="L1164"></a>1164     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1165" name="L1165"></a>1165       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1166" name="L1166"></a>1166       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_PUBLIC
<a id="L1167" name="L1167"></a>1167           || e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_SYSTEM
<a id="L1168" name="L1168"></a>1168           || e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_URI) <em class="brace">{</em>
<a id="L1169" name="L1169"></a>1169         <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> dcat = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L1170" name="L1170"></a>1170         dcat.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1));
<a id="L1171" name="L1171"></a>1171       <em class="brace">}</em>
<a id="L1172" name="L1172"></a>1172     <em class="brace">}</em>
<a id="L1173" name="L1173"></a>1173   <em class="brace">}</em>
<a id="L1174" name="L1174"></a>1174 
<a id="L1175" name="L1175"></a>1175 
<div class="comment">
    Return the applicable DOCTYPE system identifier.
    @param entityName The name of the entity (element) for which
    a doctype is required.
    @param publicId The nominal public identifier for the doctype
    (as provided in the source document).
    @param systemId The nominal system identifier for the doctype
    (as provided in the source document).
    @return The system identifier to use for the doctype.
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1192" name="L1192"></a>1192   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26334.html" title="Multiple referred from 2 places.">resolveDoctype</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName,
<a id="L1193" name="L1193"></a>1193                                <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1194" name="L1194"></a>1194                                <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1195" name="L1195"></a>1195     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1196" name="L1196"></a>1196     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <strong class="reserved">null</strong>;
<a id="L1197" name="L1197"></a>1197 
<a id="L1198" name="L1198"></a>1198     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveDoctype("
<a id="L1199" name="L1199"></a>1199                   +entityName+","+<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>+","+<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>+")");
<a id="L1200" name="L1200"></a>1200 
<a id="L1201" name="L1201"></a>1201     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1202" name="L1202"></a>1202 
<a id="L1203" name="L1203"></a>1203     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1204" name="L1204"></a>1204       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1205" name="L1205"></a>1205     <em class="brace">}</em>
<a id="L1206" name="L1206"></a>1206 
<a id="L1207" name="L1207"></a>1207     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1208" name="L1208"></a>1208       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1209" name="L1209"></a>1209       <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)) <em class="brace">{</em>
<a id="L1210" name="L1210"></a>1210         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "urn:publicid: system identifier differs from public identifier; using public identifier");
<a id="L1211" name="L1211"></a>1211         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1212" name="L1212"></a>1212       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1213" name="L1213"></a>1213         <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>;
<a id="L1214" name="L1214"></a>1214         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1215" name="L1215"></a>1215       <em class="brace">}</em>
<a id="L1216" name="L1216"></a>1216     <em class="brace">}</em>
<a id="L1217" name="L1217"></a>1217 
<a id="L1218" name="L1218"></a>1218     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1219" name="L1219"></a>1219       <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1220" name="L1220"></a>1220       resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1221" name="L1221"></a>1221       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1222" name="L1222"></a>1222         <strong class="reserved">return</strong> resolved;
<a id="L1223" name="L1223"></a>1223       <em class="brace">}</em>
<a id="L1224" name="L1224"></a>1224     <em class="brace">}</em>
<a id="L1225" name="L1225"></a>1225 
<a id="L1226" name="L1226"></a>1226     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1227" name="L1227"></a>1227       <em class="comment">// If there's a PUBLIC entry in this catalog, use it</em>
<a id="L1228" name="L1228"></a>1228       resolved = <a href="../S/5932.html#L1578" title="Defined at 1578 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalPublic</a>(DOCTYPE,
<a id="L1229" name="L1229"></a>1229                                     entityName,
<a id="L1230" name="L1230"></a>1230                                     <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1231" name="L1231"></a>1231                                     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1232" name="L1232"></a>1232       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1233" name="L1233"></a>1233         <strong class="reserved">return</strong> resolved;
<a id="L1234" name="L1234"></a>1234       <em class="brace">}</em>
<a id="L1235" name="L1235"></a>1235     <em class="brace">}</em>
<a id="L1236" name="L1236"></a>1236 
<a id="L1237" name="L1237"></a>1237     <em class="comment">// If there's a DOCTYPE entry in this catalog, use it</em>
<a id="L1238" name="L1238"></a>1238     <strong class="reserved">boolean</strong> over = default_override;
<a id="L1239" name="L1239"></a>1239     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1240" name="L1240"></a>1240     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1241" name="L1241"></a>1241       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1242" name="L1242"></a>1242       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == OVERRIDE) <em class="brace">{</em>
<a id="L1243" name="L1243"></a>1243         over = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("YES");
<a id="L1244" name="L1244"></a>1244         <strong class="reserved">continue</strong>;
<a id="L1245" name="L1245"></a>1245       <em class="brace">}</em>
<a id="L1246" name="L1246"></a>1246 
<a id="L1247" name="L1247"></a>1247       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DOCTYPE
<a id="L1248" name="L1248"></a>1248           &amp;&amp; e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entityName)) <em class="brace">{</em>
<a id="L1249" name="L1249"></a>1249         <strong class="reserved">if</strong> (over || <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1250" name="L1250"></a>1250           <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1251" name="L1251"></a>1251         <em class="brace">}</em>
<a id="L1252" name="L1252"></a>1252       <em class="brace">}</em>
<a id="L1253" name="L1253"></a>1253     <em class="brace">}</em>
<a id="L1254" name="L1254"></a>1254 
<a id="L1255" name="L1255"></a>1255     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1256" name="L1256"></a>1256     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(DOCTYPE,
<a id="L1257" name="L1257"></a>1257                                       entityName,
<a id="L1258" name="L1258"></a>1258                                       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1259" name="L1259"></a>1259                                       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1260" name="L1260"></a>1260   <em class="brace">}</em>
<a id="L1261" name="L1261"></a>1261 
<div class="comment">
    Return the applicable DOCUMENT entry.
    @return The system identifier to use for the doctype.
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1271" name="L1271"></a>1271   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26335.html" title="Multiple referred from 5 places.">resolveDocument</a>()
<a id="L1272" name="L1272"></a>1272     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1273" name="L1273"></a>1273     <em class="comment">// If there's a DOCUMENT entry, return it</em>
<a id="L1274" name="L1274"></a>1274 
<a id="L1275" name="L1275"></a>1275     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveDocument");
<a id="L1276" name="L1276"></a>1276 
<a id="L1277" name="L1277"></a>1277     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1278" name="L1278"></a>1278     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1279" name="L1279"></a>1279       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1280" name="L1280"></a>1280       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DOCUMENT) <em class="brace">{</em>
<a id="L1281" name="L1281"></a>1281         <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1282" name="L1282"></a>1282       <em class="brace">}</em>
<a id="L1283" name="L1283"></a>1283     <em class="brace">}</em>
<a id="L1284" name="L1284"></a>1284 
<a id="L1285" name="L1285"></a>1285     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(DOCUMENT,
<a id="L1286" name="L1286"></a>1286                                       <strong class="reserved">null</strong>, <strong class="reserved">null</strong>, <strong class="reserved">null</strong>);
<a id="L1287" name="L1287"></a>1287   <em class="brace">}</em>
<a id="L1288" name="L1288"></a>1288 
<div class="comment">
    Return the applicable ENTITY system identifier.
    @param entityName The name of the entity for which
    a system identifier is required.
    @param publicId The nominal public identifier for the entity
    (as provided in the source document).
    @param systemId The nominal system identifier for the entity
    (as provided in the source document).
    @return The system identifier to use for the entity.
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1305" name="L1305"></a>1305   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26336.html" title="Multiple referred from 17 places.">resolveEntity</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName,
<a id="L1306" name="L1306"></a>1306                               <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1307" name="L1307"></a>1307                               <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1308" name="L1308"></a>1308     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1309" name="L1309"></a>1309     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <strong class="reserved">null</strong>;
<a id="L1310" name="L1310"></a>1310 
<a id="L1311" name="L1311"></a>1311     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveEntity("
<a id="L1312" name="L1312"></a>1312                   +entityName+","+<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>+","+<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>+")");
<a id="L1313" name="L1313"></a>1313 
<a id="L1314" name="L1314"></a>1314     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1315" name="L1315"></a>1315 
<a id="L1316" name="L1316"></a>1316     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1317" name="L1317"></a>1317       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1318" name="L1318"></a>1318     <em class="brace">}</em>
<a id="L1319" name="L1319"></a>1319 
<a id="L1320" name="L1320"></a>1320     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1321" name="L1321"></a>1321       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1322" name="L1322"></a>1322       <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)) <em class="brace">{</em>
<a id="L1323" name="L1323"></a>1323         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "urn:publicid: system identifier differs from public identifier; using public identifier");
<a id="L1324" name="L1324"></a>1324         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1325" name="L1325"></a>1325       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1326" name="L1326"></a>1326         <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>;
<a id="L1327" name="L1327"></a>1327         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1328" name="L1328"></a>1328       <em class="brace">}</em>
<a id="L1329" name="L1329"></a>1329     <em class="brace">}</em>
<a id="L1330" name="L1330"></a>1330 
<a id="L1331" name="L1331"></a>1331     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1332" name="L1332"></a>1332       <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1333" name="L1333"></a>1333       resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1334" name="L1334"></a>1334       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1335" name="L1335"></a>1335         <strong class="reserved">return</strong> resolved;
<a id="L1336" name="L1336"></a>1336       <em class="brace">}</em>
<a id="L1337" name="L1337"></a>1337     <em class="brace">}</em>
<a id="L1338" name="L1338"></a>1338 
<a id="L1339" name="L1339"></a>1339     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1340" name="L1340"></a>1340       <em class="comment">// If there's a PUBLIC entry in this catalog, use it</em>
<a id="L1341" name="L1341"></a>1341       resolved = <a href="../S/5932.html#L1578" title="Defined at 1578 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalPublic</a>(ENTITY,
<a id="L1342" name="L1342"></a>1342                                     entityName,
<a id="L1343" name="L1343"></a>1343                                     <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1344" name="L1344"></a>1344                                     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1345" name="L1345"></a>1345       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1346" name="L1346"></a>1346         <strong class="reserved">return</strong> resolved;
<a id="L1347" name="L1347"></a>1347       <em class="brace">}</em>
<a id="L1348" name="L1348"></a>1348     <em class="brace">}</em>
<a id="L1349" name="L1349"></a>1349 
<a id="L1350" name="L1350"></a>1350     <em class="comment">// If there's a ENTITY entry in this catalog, use it</em>
<a id="L1351" name="L1351"></a>1351     <strong class="reserved">boolean</strong> over = default_override;
<a id="L1352" name="L1352"></a>1352     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1353" name="L1353"></a>1353     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1354" name="L1354"></a>1354       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1355" name="L1355"></a>1355       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == OVERRIDE) <em class="brace">{</em>
<a id="L1356" name="L1356"></a>1356         over = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("YES");
<a id="L1357" name="L1357"></a>1357         <strong class="reserved">continue</strong>;
<a id="L1358" name="L1358"></a>1358       <em class="brace">}</em>
<a id="L1359" name="L1359"></a>1359 
<a id="L1360" name="L1360"></a>1360       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == ENTITY
<a id="L1361" name="L1361"></a>1361           &amp;&amp; e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(entityName)) <em class="brace">{</em>
<a id="L1362" name="L1362"></a>1362         <strong class="reserved">if</strong> (over || <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1363" name="L1363"></a>1363           <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1364" name="L1364"></a>1364         <em class="brace">}</em>
<a id="L1365" name="L1365"></a>1365       <em class="brace">}</em>
<a id="L1366" name="L1366"></a>1366     <em class="brace">}</em>
<a id="L1367" name="L1367"></a>1367 
<a id="L1368" name="L1368"></a>1368     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1369" name="L1369"></a>1369     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(ENTITY,
<a id="L1370" name="L1370"></a>1370                                       entityName,
<a id="L1371" name="L1371"></a>1371                                       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1372" name="L1372"></a>1372                                       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1373" name="L1373"></a>1373   <em class="brace">}</em>
<a id="L1374" name="L1374"></a>1374 
<div class="comment">
    Return the applicable NOTATION system identifier.
    @param notationName The name of the notation for which
    a doctype is required.
    @param publicId The nominal public identifier for the notation
    (as provided in the source document).
    @param systemId The nominal system identifier for the notation
    (as provided in the source document).
    @return The system identifier to use for the notation.
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1391" name="L1391"></a>1391   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26365.html" title="Multiple referred from 2 places.">resolveNotation</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> notationName,
<a id="L1392" name="L1392"></a>1392                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1393" name="L1393"></a>1393                                 <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1394" name="L1394"></a>1394     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1395" name="L1395"></a>1395     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <strong class="reserved">null</strong>;
<a id="L1396" name="L1396"></a>1396 
<a id="L1397" name="L1397"></a>1397     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveNotation("
<a id="L1398" name="L1398"></a>1398                   +notationName+","+<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>+","+<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>+")");
<a id="L1399" name="L1399"></a>1399 
<a id="L1400" name="L1400"></a>1400     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1401" name="L1401"></a>1401 
<a id="L1402" name="L1402"></a>1402     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1403" name="L1403"></a>1403       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1404" name="L1404"></a>1404     <em class="brace">}</em>
<a id="L1405" name="L1405"></a>1405 
<a id="L1406" name="L1406"></a>1406     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1407" name="L1407"></a>1407       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1408" name="L1408"></a>1408       <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)) <em class="brace">{</em>
<a id="L1409" name="L1409"></a>1409         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "urn:publicid: system identifier differs from public identifier; using public identifier");
<a id="L1410" name="L1410"></a>1410         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1411" name="L1411"></a>1411       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1412" name="L1412"></a>1412         <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>;
<a id="L1413" name="L1413"></a>1413         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1414" name="L1414"></a>1414       <em class="brace">}</em>
<a id="L1415" name="L1415"></a>1415     <em class="brace">}</em>
<a id="L1416" name="L1416"></a>1416 
<a id="L1417" name="L1417"></a>1417     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1418" name="L1418"></a>1418       <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1419" name="L1419"></a>1419       resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1420" name="L1420"></a>1420       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1421" name="L1421"></a>1421         <strong class="reserved">return</strong> resolved;
<a id="L1422" name="L1422"></a>1422       <em class="brace">}</em>
<a id="L1423" name="L1423"></a>1423     <em class="brace">}</em>
<a id="L1424" name="L1424"></a>1424 
<a id="L1425" name="L1425"></a>1425     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1426" name="L1426"></a>1426       <em class="comment">// If there's a PUBLIC entry in this catalog, use it</em>
<a id="L1427" name="L1427"></a>1427       resolved = <a href="../S/5932.html#L1578" title="Defined at 1578 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalPublic</a>(NOTATION,
<a id="L1428" name="L1428"></a>1428                                     notationName,
<a id="L1429" name="L1429"></a>1429                                     <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1430" name="L1430"></a>1430                                     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1431" name="L1431"></a>1431       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1432" name="L1432"></a>1432         <strong class="reserved">return</strong> resolved;
<a id="L1433" name="L1433"></a>1433       <em class="brace">}</em>
<a id="L1434" name="L1434"></a>1434     <em class="brace">}</em>
<a id="L1435" name="L1435"></a>1435 
<a id="L1436" name="L1436"></a>1436     <em class="comment">// If there's a NOTATION entry in this catalog, use it</em>
<a id="L1437" name="L1437"></a>1437     <strong class="reserved">boolean</strong> over = default_override;
<a id="L1438" name="L1438"></a>1438     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1439" name="L1439"></a>1439     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1440" name="L1440"></a>1440       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1441" name="L1441"></a>1441       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == OVERRIDE) <em class="brace">{</em>
<a id="L1442" name="L1442"></a>1442         over = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("YES");
<a id="L1443" name="L1443"></a>1443         <strong class="reserved">continue</strong>;
<a id="L1444" name="L1444"></a>1444       <em class="brace">}</em>
<a id="L1445" name="L1445"></a>1445 
<a id="L1446" name="L1446"></a>1446       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == NOTATION
<a id="L1447" name="L1447"></a>1447           &amp;&amp; e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(notationName)) <em class="brace">{</em>
<a id="L1448" name="L1448"></a>1448         <strong class="reserved">if</strong> (over || <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1449" name="L1449"></a>1449           <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1450" name="L1450"></a>1450         <em class="brace">}</em>
<a id="L1451" name="L1451"></a>1451       <em class="brace">}</em>
<a id="L1452" name="L1452"></a>1452     <em class="brace">}</em>
<a id="L1453" name="L1453"></a>1453 
<a id="L1454" name="L1454"></a>1454     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1455" name="L1455"></a>1455     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(NOTATION,
<a id="L1456" name="L1456"></a>1456                                       notationName,
<a id="L1457" name="L1457"></a>1457                                       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1458" name="L1458"></a>1458                                       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1459" name="L1459"></a>1459   <em class="brace">}</em>
<a id="L1460" name="L1460"></a>1460 
<div class="comment">
    Return the applicable PUBLIC or SYSTEM identifier.
    <p>This method searches the Catalog and returns the system
    identifier specified for the given system or
    public identifiers. If
    no appropriate PUBLIC or SYSTEM entry is found in the Catalog,
    null is returned.</p>
    @param publicId The public identifier to locate in the catalog.
    Public identifiers are normalized before comparison.
    @param systemId The nominal system identifier for the entity
    in question (as provided in the source document).
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.
    @return The system identifier to use.
    Note that the nominal system identifier is not returned if a
    match is not found in the catalog, instead null is returned
    to indicate that no match was found.</div>
<a id="L1484" name="L1484"></a>1484   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26377.html" title="Multiple referred from 13 places.">resolvePublic</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1485" name="L1485"></a>1485     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1486" name="L1486"></a>1486 
<a id="L1487" name="L1487"></a>1487     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolvePublic("+<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>+","+<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>+")");
<a id="L1488" name="L1488"></a>1488 
<a id="L1489" name="L1489"></a>1489     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1490" name="L1490"></a>1490 
<a id="L1491" name="L1491"></a>1491     <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1492" name="L1492"></a>1492       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1493" name="L1493"></a>1493     <em class="brace">}</em>
<a id="L1494" name="L1494"></a>1494 
<a id="L1495" name="L1495"></a>1495     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1496" name="L1496"></a>1496       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1497" name="L1497"></a>1497       <strong class="reserved">if</strong> (<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> != <strong class="reserved">null</strong> &amp;&amp; !<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)) <em class="brace">{</em>
<a id="L1498" name="L1498"></a>1498         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "urn:publicid: system identifier differs from public identifier; using public identifier");
<a id="L1499" name="L1499"></a>1499         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1500" name="L1500"></a>1500       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L1501" name="L1501"></a>1501         <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>;
<a id="L1502" name="L1502"></a>1502         <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <strong class="reserved">null</strong>;
<a id="L1503" name="L1503"></a>1503       <em class="brace">}</em>
<a id="L1504" name="L1504"></a>1504     <em class="brace">}</em>
<a id="L1505" name="L1505"></a>1505 
<a id="L1506" name="L1506"></a>1506     <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1507" name="L1507"></a>1507     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1508" name="L1508"></a>1508       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1509" name="L1509"></a>1509       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1510" name="L1510"></a>1510         <strong class="reserved">return</strong> resolved;
<a id="L1511" name="L1511"></a>1511       <em class="brace">}</em>
<a id="L1512" name="L1512"></a>1512     <em class="brace">}</em>
<a id="L1513" name="L1513"></a>1513 
<a id="L1514" name="L1514"></a>1514     <em class="comment">// If there's a PUBLIC entry in this catalog, use it</em>
<a id="L1515" name="L1515"></a>1515     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <a href="../S/5932.html#L1578" title="Defined at 1578 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalPublic</a>(PUBLIC,
<a id="L1516" name="L1516"></a>1516                                          <strong class="reserved">null</strong>,
<a id="L1517" name="L1517"></a>1517                                          <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1518" name="L1518"></a>1518                                          <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1519" name="L1519"></a>1519     <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1520" name="L1520"></a>1520       <strong class="reserved">return</strong> resolved;
<a id="L1521" name="L1521"></a>1521     <em class="brace">}</em>
<a id="L1522" name="L1522"></a>1522 
<a id="L1523" name="L1523"></a>1523     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1524" name="L1524"></a>1524     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(PUBLIC,
<a id="L1525" name="L1525"></a>1525                                       <strong class="reserved">null</strong>,
<a id="L1526" name="L1526"></a>1526                                       <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1527" name="L1527"></a>1527                                       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1528" name="L1528"></a>1528   <em class="brace">}</em>
<a id="L1529" name="L1529"></a>1529 
<div class="comment">
    Return the applicable PUBLIC or SYSTEM identifier.
    <p>This method searches the Catalog and returns the system
    identifier specified for the given system or public identifiers.
    If no appropriate PUBLIC or SYSTEM entry is found in the Catalog,
    delegated Catalogs are interrogated.</p>
    <p>There are four possible cases:</p>
    <ul><li>If the system identifier provided matches a SYSTEM entry
    in the current catalog, the SYSTEM entry is returned.
    </li><li>If the system identifier is not null, the PUBLIC entries
    that were encountered when OVERRIDE YES was in effect are
    interrogated and the first matching entry is returned.</li><li>If the system identifier is null, then all of the PUBLIC
    entries are interrogated and the first matching entry
    is returned. This may not be the same as the preceding case, if
    some PUBLIC entries are encountered when OVERRIDE NO is in effect. In
    XML, the only place where a public identifier may occur without
    a system identifier is in a notation declaration.</li><li>Finally, if the public identifier matches one of the partial
    public identifiers specified in a DELEGATE* entry in
    the Catalog, the delegated catalog is interrogated. The first
    time that the delegated catalog is required, it will be
    retrieved and parsed. It is subsequently cached.
    </li>
    </ul>
    @param entityType The CatalogEntry type for which this query is
    being conducted. This is necessary in order to do the approprate
    query on a delegated catalog.
    @param entityName The name of the entity being searched for, if
    appropriate.
    @param publicId The public identifier of the entity in question.
    @param systemId The nominal system identifier for the entity
    in question (as provided in the source document).
    @throws MalformedURLException The formal system identifier of a
    delegated catalog cannot be turned into a valid URL.
    @throws IOException Error reading delegated catalog file.
    @return The system identifier to use.
    Note that the nominal system identifier is not returned if a
    match is not found in the catalog, instead null is returned
    to indicate that no match was found.</div>
<a id="L1578" name="L1578"></a>1578   <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26357.html" title="Multiple referred from 4 places.">resolveLocalPublic</a>(<strong class="reserved">int</strong> entityType,
<a id="L1579" name="L1579"></a>1579                                                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName,
<a id="L1580" name="L1580"></a>1580                                                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L1581" name="L1581"></a>1581                                                    <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1582" name="L1582"></a>1582     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1583" name="L1583"></a>1583 
<a id="L1584" name="L1584"></a>1584     <em class="comment">// Always normalize the public identifier before attempting a match</em>
<a id="L1585" name="L1585"></a>1585     <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../D/28279.html" title="Multiple defined in 40 places.">normalize</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>);
<a id="L1586" name="L1586"></a>1586 
<a id="L1587" name="L1587"></a>1587     <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1588" name="L1588"></a>1588     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1589" name="L1589"></a>1589       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1590" name="L1590"></a>1590       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1591" name="L1591"></a>1591         <strong class="reserved">return</strong> resolved;
<a id="L1592" name="L1592"></a>1592       <em class="brace">}</em>
<a id="L1593" name="L1593"></a>1593     <em class="brace">}</em>
<a id="L1594" name="L1594"></a>1594 
<a id="L1595" name="L1595"></a>1595     <em class="comment">// If there's a PUBLIC entry in this catalog, use it</em>
<a id="L1596" name="L1596"></a>1596     <strong class="reserved">boolean</strong> over = default_override;
<a id="L1597" name="L1597"></a>1597     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1598" name="L1598"></a>1598     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1599" name="L1599"></a>1599       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1600" name="L1600"></a>1600       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == OVERRIDE) <em class="brace">{</em>
<a id="L1601" name="L1601"></a>1601         over = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("YES");
<a id="L1602" name="L1602"></a>1602         <strong class="reserved">continue</strong>;
<a id="L1603" name="L1603"></a>1603       <em class="brace">}</em>
<a id="L1604" name="L1604"></a>1604 
<a id="L1605" name="L1605"></a>1605       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == PUBLIC
<a id="L1606" name="L1606"></a>1606           &amp;&amp; e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>)) <em class="brace">{</em>
<a id="L1607" name="L1607"></a>1607         <strong class="reserved">if</strong> (over || <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1608" name="L1608"></a>1608           <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1609" name="L1609"></a>1609         <em class="brace">}</em>
<a id="L1610" name="L1610"></a>1610       <em class="brace">}</em>
<a id="L1611" name="L1611"></a>1611     <em class="brace">}</em>
<a id="L1612" name="L1612"></a>1612 
<a id="L1613" name="L1613"></a>1613     <em class="comment">// If there's a DELEGATE_PUBLIC entry in this catalog, use it</em>
<a id="L1614" name="L1614"></a>1614     over = default_override;
<a id="L1615" name="L1615"></a>1615     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1616" name="L1616"></a>1616     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> delCats = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1617" name="L1617"></a>1617     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1618" name="L1618"></a>1618       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1619" name="L1619"></a>1619       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == OVERRIDE) <em class="brace">{</em>
<a id="L1620" name="L1620"></a>1620         over = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>("YES");
<a id="L1621" name="L1621"></a>1621         <strong class="reserved">continue</strong>;
<a id="L1622" name="L1622"></a>1622       <em class="brace">}</em>
<a id="L1623" name="L1623"></a>1623 
<a id="L1624" name="L1624"></a>1624       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_PUBLIC
<a id="L1625" name="L1625"></a>1625           &amp;&amp; (over || <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> == <strong class="reserved">null</strong>)) <em class="brace">{</em>
<a id="L1626" name="L1626"></a>1626         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1627" name="L1627"></a>1627         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1628" name="L1628"></a>1628             &amp;&amp; p.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))) <em class="brace">{</em>
<a id="L1629" name="L1629"></a>1629           <em class="comment">// delegate this match to the other catalog</em>
<a id="L1630" name="L1630"></a>1630 
<a id="L1631" name="L1631"></a>1631           delCats.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1));
<a id="L1632" name="L1632"></a>1632         <em class="brace">}</em>
<a id="L1633" name="L1633"></a>1633       <em class="brace">}</em>
<a id="L1634" name="L1634"></a>1634     <em class="brace">}</em>
<a id="L1635" name="L1635"></a>1635 
<a id="L1636" name="L1636"></a>1636     <strong class="reserved">if</strong> (delCats.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1637" name="L1637"></a>1637       <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1638" name="L1638"></a>1638 
<a id="L1639" name="L1639"></a>1639       <strong class="reserved">if</strong> (catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/18231.html" title="Multiple defined in 4 places.">getDebug</a>() &gt; 1) <em class="brace">{</em>
<a id="L1640" name="L1640"></a>1640         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "Switching to delegated catalog(s):");
<a id="L1641" name="L1641"></a>1641         <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1642" name="L1642"></a>1642           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1643" name="L1643"></a>1643           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "\t" + delegatedCatalog);
<a id="L1644" name="L1644"></a>1644         <em class="brace">}</em>
<a id="L1645" name="L1645"></a>1645       <em class="brace">}</em>
<a id="L1646" name="L1646"></a>1646 
<a id="L1647" name="L1647"></a>1647       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> dcat = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L1648" name="L1648"></a>1648 
<a id="L1649" name="L1649"></a>1649       enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1650" name="L1650"></a>1650       <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1651" name="L1651"></a>1651         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1652" name="L1652"></a>1652         dcat.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(delegatedCatalog);
<a id="L1653" name="L1653"></a>1653       <em class="brace">}</em>
<a id="L1654" name="L1654"></a>1654 
<a id="L1655" name="L1655"></a>1655       <strong class="reserved">return</strong> dcat.<a href="../D/31298.html" title="Multiple defined in 3 places.">resolvePublic</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <strong class="reserved">null</strong>);
<a id="L1656" name="L1656"></a>1656     <em class="brace">}</em>
<a id="L1657" name="L1657"></a>1657 
<a id="L1658" name="L1658"></a>1658     <em class="comment">// Nada!</em>
<a id="L1659" name="L1659"></a>1659     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1660" name="L1660"></a>1660   <em class="brace">}</em>
<a id="L1661" name="L1661"></a>1661 
<div class="comment">
    Return the applicable SYSTEM system identifier.
    <p>If a SYSTEM entry exists in the Catalog
    for the system ID specified, return the mapped value.</p>
    <p>On Windows-based operating systems, the comparison between
    the system identifier provided and the SYSTEM entries in the
    Catalog is case-insensitive.</p>
    @param systemId The system ID to locate in the catalog.
    @return The resolved system identifier.
    @throws MalformedURLException The formal system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1680" name="L1680"></a>1680   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26385.html" title="Multiple referred from 10 places.">resolveSystem</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1681" name="L1681"></a>1681     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1682" name="L1682"></a>1682 
<a id="L1683" name="L1683"></a>1683     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveSystem("+<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>+")");
<a id="L1684" name="L1684"></a>1684 
<a id="L1685" name="L1685"></a>1685     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1686" name="L1686"></a>1686 
<a id="L1687" name="L1687"></a>1687     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong> &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1688" name="L1688"></a>1688       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1689" name="L1689"></a>1689       <strong class="reserved">return</strong> <a href="../D/31298.html" title="Multiple defined in 3 places.">resolvePublic</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>, <strong class="reserved">null</strong>);
<a id="L1690" name="L1690"></a>1690     <em class="brace">}</em>
<a id="L1691" name="L1691"></a>1691 
<a id="L1692" name="L1692"></a>1692     <em class="comment">// If there's a SYSTEM entry in this catalog, use it</em>
<a id="L1693" name="L1693"></a>1693     <strong class="reserved">if</strong> (<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1694" name="L1694"></a>1694       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <a href="../S/5932.html#L1718" title="Defined at 1718 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1695" name="L1695"></a>1695       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1696" name="L1696"></a>1696         <strong class="reserved">return</strong> resolved;
<a id="L1697" name="L1697"></a>1697       <em class="brace">}</em>
<a id="L1698" name="L1698"></a>1698     <em class="brace">}</em>
<a id="L1699" name="L1699"></a>1699 
<a id="L1700" name="L1700"></a>1700     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1701" name="L1701"></a>1701     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(SYSTEM,
<a id="L1702" name="L1702"></a>1702                                       <strong class="reserved">null</strong>,
<a id="L1703" name="L1703"></a>1703                                       <strong class="reserved">null</strong>,
<a id="L1704" name="L1704"></a>1704                                       <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1705" name="L1705"></a>1705   <em class="brace">}</em>
<a id="L1706" name="L1706"></a>1706 
<div class="comment">
    Return the applicable SYSTEM system identifier in this
    catalog.
    <p>If a SYSTEM entry exists in the catalog file
    for the system ID specified, return the mapped value.</p>
    @param systemId The system ID to locate in the catalog
    @return The mapped system identifier or null</div>
<a id="L1718" name="L1718"></a>1718   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26358.html" title="Multiple referred from 6 places.">resolveLocalSystem</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1719" name="L1719"></a>1719     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1720" name="L1720"></a>1720 
<a id="L1721" name="L1721"></a>1721     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> osname = <a href="../D/7684.html" title="Multiple defined in 12 places.">SecuritySupport</a>.<a href="../D/22922.html" title="Multiple defined in 24 places.">getSystemProperty</a>("os.name");
<a id="L1722" name="L1722"></a>1722     <strong class="reserved">boolean</strong> <a href="../S/6727.html#L5" title="Defined at 5 in src/com/sun/java/swing/plaf/windows/resources/windows.java.">windows</a> = (osname.<a href="../D/24468.html" title="Multiple defined in 74 places.">indexOf</a>("Windows") &gt;= 0);
<a id="L1723" name="L1723"></a>1723     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1724" name="L1724"></a>1724     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1725" name="L1725"></a>1725       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1726" name="L1726"></a>1726       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == SYSTEM
<a id="L1727" name="L1727"></a>1727           &amp;&amp; (e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L1728" name="L1728"></a>1728               || (<a href="../S/6727.html#L5" title="Defined at 5 in src/com/sun/java/swing/plaf/windows/resources/windows.java.">windows</a>
<a id="L1729" name="L1729"></a>1729                   &amp;&amp; e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15687.html" title="Multiple defined in 6 places.">equalsIgnoreCase</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)))) <em class="brace">{</em>
<a id="L1730" name="L1730"></a>1730         <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1731" name="L1731"></a>1731       <em class="brace">}</em>
<a id="L1732" name="L1732"></a>1732     <em class="brace">}</em>
<a id="L1733" name="L1733"></a>1733 
<a id="L1734" name="L1734"></a>1734     <em class="comment">// If there's a REWRITE_SYSTEM entry in this catalog, use it</em>
<a id="L1735" name="L1735"></a>1735     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1736" name="L1736"></a>1736     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> startString = <strong class="reserved">null</strong>;
<a id="L1737" name="L1737"></a>1737     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">null</strong>;
<a id="L1738" name="L1738"></a>1738     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1739" name="L1739"></a>1739       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1740" name="L1740"></a>1740 
<a id="L1741" name="L1741"></a>1741       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == REWRITE_SYSTEM) <em class="brace">{</em>
<a id="L1742" name="L1742"></a>1742         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1743" name="L1743"></a>1743         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1744" name="L1744"></a>1744             &amp;&amp; p.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))) <em class="brace">{</em>
<a id="L1745" name="L1745"></a>1745           <em class="comment">// Is this the longest prefix?</em>
<a id="L1746" name="L1746"></a>1746           <strong class="reserved">if</strong> (startString == <strong class="reserved">null</strong>
<a id="L1747" name="L1747"></a>1747               || p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; startString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1748" name="L1748"></a>1748             startString = p;
<a id="L1749" name="L1749"></a>1749             <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1750" name="L1750"></a>1750           <em class="brace">}</em>
<a id="L1751" name="L1751"></a>1751         <em class="brace">}</em>
<a id="L1752" name="L1752"></a>1752       <em class="brace">}</em>
<a id="L1753" name="L1753"></a>1753     <em class="brace">}</em>
<a id="L1754" name="L1754"></a>1754 
<a id="L1755" name="L1755"></a>1755     <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1756" name="L1756"></a>1756       <em class="comment">// return the systemId with the new prefix</em>
<a id="L1757" name="L1757"></a>1757       <strong class="reserved">return</strong> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> + <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(startString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L1758" name="L1758"></a>1758     <em class="brace">}</em>
<a id="L1759" name="L1759"></a>1759 
<a id="L1760" name="L1760"></a>1760     <em class="comment">// If there's a SYSTEM_SUFFIX entry in this catalog, use it</em>
<a id="L1761" name="L1761"></a>1761     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1762" name="L1762"></a>1762     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> suffixString = <strong class="reserved">null</strong>;
<a id="L1763" name="L1763"></a>1763     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> suffixURI = <strong class="reserved">null</strong>;
<a id="L1764" name="L1764"></a>1764     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1765" name="L1765"></a>1765       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1766" name="L1766"></a>1766 
<a id="L1767" name="L1767"></a>1767       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == SYSTEM_SUFFIX) <em class="brace">{</em>
<a id="L1768" name="L1768"></a>1768         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1769" name="L1769"></a>1769         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1770" name="L1770"></a>1770             &amp;&amp; <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>(p)) <em class="brace">{</em>
<a id="L1771" name="L1771"></a>1771           <em class="comment">// Is this the longest prefix?</em>
<a id="L1772" name="L1772"></a>1772           <strong class="reserved">if</strong> (suffixString == <strong class="reserved">null</strong>
<a id="L1773" name="L1773"></a>1773               || p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; suffixString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1774" name="L1774"></a>1774             suffixString = p;
<a id="L1775" name="L1775"></a>1775             suffixURI = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1776" name="L1776"></a>1776           <em class="brace">}</em>
<a id="L1777" name="L1777"></a>1777         <em class="brace">}</em>
<a id="L1778" name="L1778"></a>1778       <em class="brace">}</em>
<a id="L1779" name="L1779"></a>1779     <em class="brace">}</em>
<a id="L1780" name="L1780"></a>1780 
<a id="L1781" name="L1781"></a>1781     <strong class="reserved">if</strong> (suffixURI != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1782" name="L1782"></a>1782       <em class="comment">// return the systemId for the suffix</em>
<a id="L1783" name="L1783"></a>1783       <strong class="reserved">return</strong> suffixURI;
<a id="L1784" name="L1784"></a>1784     <em class="brace">}</em>
<a id="L1785" name="L1785"></a>1785 
<a id="L1786" name="L1786"></a>1786     <em class="comment">// If there's a DELEGATE_SYSTEM entry in this catalog, use it</em>
<a id="L1787" name="L1787"></a>1787     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1788" name="L1788"></a>1788     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> delCats = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1789" name="L1789"></a>1789     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1790" name="L1790"></a>1790       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1791" name="L1791"></a>1791 
<a id="L1792" name="L1792"></a>1792       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_SYSTEM) <em class="brace">{</em>
<a id="L1793" name="L1793"></a>1793         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1794" name="L1794"></a>1794         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1795" name="L1795"></a>1795             &amp;&amp; p.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))) <em class="brace">{</em>
<a id="L1796" name="L1796"></a>1796           <em class="comment">// delegate this match to the other catalog</em>
<a id="L1797" name="L1797"></a>1797 
<a id="L1798" name="L1798"></a>1798           delCats.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1));
<a id="L1799" name="L1799"></a>1799         <em class="brace">}</em>
<a id="L1800" name="L1800"></a>1800       <em class="brace">}</em>
<a id="L1801" name="L1801"></a>1801     <em class="brace">}</em>
<a id="L1802" name="L1802"></a>1802 
<a id="L1803" name="L1803"></a>1803     <strong class="reserved">if</strong> (delCats.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1804" name="L1804"></a>1804       <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1805" name="L1805"></a>1805 
<a id="L1806" name="L1806"></a>1806       <strong class="reserved">if</strong> (catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/18231.html" title="Multiple defined in 4 places.">getDebug</a>() &gt; 1) <em class="brace">{</em>
<a id="L1807" name="L1807"></a>1807         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "Switching to delegated catalog(s):");
<a id="L1808" name="L1808"></a>1808         <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1809" name="L1809"></a>1809           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1810" name="L1810"></a>1810           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "\t" + delegatedCatalog);
<a id="L1811" name="L1811"></a>1811         <em class="brace">}</em>
<a id="L1812" name="L1812"></a>1812       <em class="brace">}</em>
<a id="L1813" name="L1813"></a>1813 
<a id="L1814" name="L1814"></a>1814       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> dcat = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L1815" name="L1815"></a>1815 
<a id="L1816" name="L1816"></a>1816       enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1817" name="L1817"></a>1817       <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1818" name="L1818"></a>1818         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1819" name="L1819"></a>1819         dcat.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(delegatedCatalog);
<a id="L1820" name="L1820"></a>1820       <em class="brace">}</em>
<a id="L1821" name="L1821"></a>1821 
<a id="L1822" name="L1822"></a>1822       <strong class="reserved">return</strong> dcat.<a href="../D/31308.html" title="Multiple defined in 3 places.">resolveSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L1823" name="L1823"></a>1823     <em class="brace">}</em>
<a id="L1824" name="L1824"></a>1824 
<a id="L1825" name="L1825"></a>1825     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1826" name="L1826"></a>1826   <em class="brace">}</em>
<a id="L1827" name="L1827"></a>1827 
<div class="comment">
    Return the applicable URI.
    <p>If a URI entry exists in the Catalog
    for the URI specified, return the mapped value.</p>
    <p>URI comparison is case sensitive.</p>
    @param uri The URI to locate in the catalog.
    @return The resolved URI.
    @throws MalformedURLException The system identifier of a
    subordinate catalog cannot be turned into a valid URL.
    @throws IOException Error reading subordinate catalog file.</div>
<a id="L1844" name="L1844"></a>1844   <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26392.html" title="Multiple referred from 8 places.">resolveURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L1845" name="L1845"></a>1845     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1846" name="L1846"></a>1846 
<a id="L1847" name="L1847"></a>1847     catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(3, "resolveURI("+uri+")");
<a id="L1848" name="L1848"></a>1848 
<a id="L1849" name="L1849"></a>1849     uri = <a href="../S/5932.html#L2122" title="Defined at 2122 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">normalizeURI</a>(uri);
<a id="L1850" name="L1850"></a>1850 
<a id="L1851" name="L1851"></a>1851     <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong> &amp;&amp; uri.<a href="../D/34843.html" title="Multiple defined in 24 places.">startsWith</a>("urn:publicid:")) <em class="brace">{</em>
<a id="L1852" name="L1852"></a>1852       uri = <a href="../S/5948.html#L36" title="Defined at 36 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">PublicId</a>.<a href="../S/5948.html#L113" title="Defined at 113 in src/com/sun/org/apache/xml/internal/resolver/helpers/PublicId.java.">decodeURN</a>(uri);
<a id="L1853" name="L1853"></a>1853       <strong class="reserved">return</strong> <a href="../D/31298.html" title="Multiple defined in 3 places.">resolvePublic</a>(uri, <strong class="reserved">null</strong>);
<a id="L1854" name="L1854"></a>1854     <em class="brace">}</em>
<a id="L1855" name="L1855"></a>1855 
<a id="L1856" name="L1856"></a>1856     <em class="comment">// If there's a URI entry in this catalog, use it</em>
<a id="L1857" name="L1857"></a>1857     <strong class="reserved">if</strong> (uri != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1858" name="L1858"></a>1858       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <a href="../S/5932.html#L1881" title="Defined at 1881 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalURI</a>(uri);
<a id="L1859" name="L1859"></a>1859       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1860" name="L1860"></a>1860         <strong class="reserved">return</strong> resolved;
<a id="L1861" name="L1861"></a>1861       <em class="brace">}</em>
<a id="L1862" name="L1862"></a>1862     <em class="brace">}</em>
<a id="L1863" name="L1863"></a>1863 
<a id="L1864" name="L1864"></a>1864     <em class="comment">// Otherwise, look in the subordinate catalogs</em>
<a id="L1865" name="L1865"></a>1865     <strong class="reserved">return</strong> <a href="../S/5932.html#L2014" title="Defined at 2014 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveSubordinateCatalogs</a>(<a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>,
<a id="L1866" name="L1866"></a>1866                                       <strong class="reserved">null</strong>,
<a id="L1867" name="L1867"></a>1867                                       <strong class="reserved">null</strong>,
<a id="L1868" name="L1868"></a>1868                                       uri);
<a id="L1869" name="L1869"></a>1869   <em class="brace">}</em>
<a id="L1870" name="L1870"></a>1870 
<div class="comment">
    Return the applicable URI in this catalog.
    <p>If a URI entry exists in the catalog file
    for the URI specified, return the mapped value.</p>
    @param uri The URI to locate in the catalog
    @return The mapped URI or null</div>
<a id="L1881" name="L1881"></a>1881   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5932.html#L1858" title="Referred from 1858 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveLocalURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uri)
<a id="L1882" name="L1882"></a>1882     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L1883" name="L1883"></a>1883     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1884" name="L1884"></a>1884     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1885" name="L1885"></a>1885       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1886" name="L1886"></a>1886       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>
<a id="L1887" name="L1887"></a>1887           &amp;&amp; (e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0).<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(uri))) <em class="brace">{</em>
<a id="L1888" name="L1888"></a>1888         <strong class="reserved">return</strong> e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1889" name="L1889"></a>1889       <em class="brace">}</em>
<a id="L1890" name="L1890"></a>1890     <em class="brace">}</em>
<a id="L1891" name="L1891"></a>1891 
<a id="L1892" name="L1892"></a>1892     <em class="comment">// If there's a REWRITE_URI entry in this catalog, use it</em>
<a id="L1893" name="L1893"></a>1893     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1894" name="L1894"></a>1894     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> startString = <strong class="reserved">null</strong>;
<a id="L1895" name="L1895"></a>1895     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = <strong class="reserved">null</strong>;
<a id="L1896" name="L1896"></a>1896     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1897" name="L1897"></a>1897       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1898" name="L1898"></a>1898 
<a id="L1899" name="L1899"></a>1899       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == REWRITE_URI) <em class="brace">{</em>
<a id="L1900" name="L1900"></a>1900         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1901" name="L1901"></a>1901         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= uri.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1902" name="L1902"></a>1902             &amp;&amp; p.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(uri.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))) <em class="brace">{</em>
<a id="L1903" name="L1903"></a>1903           <em class="comment">// Is this the longest prefix?</em>
<a id="L1904" name="L1904"></a>1904           <strong class="reserved">if</strong> (startString == <strong class="reserved">null</strong>
<a id="L1905" name="L1905"></a>1905               || p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; startString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1906" name="L1906"></a>1906             startString = p;
<a id="L1907" name="L1907"></a>1907             <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1908" name="L1908"></a>1908           <em class="brace">}</em>
<a id="L1909" name="L1909"></a>1909         <em class="brace">}</em>
<a id="L1910" name="L1910"></a>1910       <em class="brace">}</em>
<a id="L1911" name="L1911"></a>1911     <em class="brace">}</em>
<a id="L1912" name="L1912"></a>1912 
<a id="L1913" name="L1913"></a>1913     <strong class="reserved">if</strong> (<a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1914" name="L1914"></a>1914       <em class="comment">// return the uri with the new prefix</em>
<a id="L1915" name="L1915"></a>1915       <strong class="reserved">return</strong> <a href="../S/3963.html#L53" title="Defined at 53 in src/javax/xml/bind/annotation/XmlNs.java.">prefix</a> + uri.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(startString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>());
<a id="L1916" name="L1916"></a>1916     <em class="brace">}</em>
<a id="L1917" name="L1917"></a>1917 
<a id="L1918" name="L1918"></a>1918     <em class="comment">// If there's a URI_SUFFIX entry in this catalog, use it</em>
<a id="L1919" name="L1919"></a>1919     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1920" name="L1920"></a>1920     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> suffixString = <strong class="reserved">null</strong>;
<a id="L1921" name="L1921"></a>1921     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> suffixURI = <strong class="reserved">null</strong>;
<a id="L1922" name="L1922"></a>1922     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1923" name="L1923"></a>1923       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1924" name="L1924"></a>1924 
<a id="L1925" name="L1925"></a>1925       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == URI_SUFFIX) <em class="brace">{</em>
<a id="L1926" name="L1926"></a>1926         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1927" name="L1927"></a>1927         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= uri.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1928" name="L1928"></a>1928             &amp;&amp; uri.<a href="../D/15495.html" title="Multiple defined in 12 places.">endsWith</a>(p)) <em class="brace">{</em>
<a id="L1929" name="L1929"></a>1929           <em class="comment">// Is this the longest prefix?</em>
<a id="L1930" name="L1930"></a>1930           <strong class="reserved">if</strong> (suffixString == <strong class="reserved">null</strong>
<a id="L1931" name="L1931"></a>1931               || p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; suffixString.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L1932" name="L1932"></a>1932             suffixString = p;
<a id="L1933" name="L1933"></a>1933             suffixURI = e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1);
<a id="L1934" name="L1934"></a>1934           <em class="brace">}</em>
<a id="L1935" name="L1935"></a>1935         <em class="brace">}</em>
<a id="L1936" name="L1936"></a>1936       <em class="brace">}</em>
<a id="L1937" name="L1937"></a>1937     <em class="brace">}</em>
<a id="L1938" name="L1938"></a>1938 
<a id="L1939" name="L1939"></a>1939     <strong class="reserved">if</strong> (suffixURI != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L1940" name="L1940"></a>1940       <em class="comment">// return the uri for the suffix</em>
<a id="L1941" name="L1941"></a>1941       <strong class="reserved">return</strong> suffixURI;
<a id="L1942" name="L1942"></a>1942     <em class="brace">}</em>
<a id="L1943" name="L1943"></a>1943 
<a id="L1944" name="L1944"></a>1944     <em class="comment">// If there's a DELEGATE_URI entry in this catalog, use it</em>
<a id="L1945" name="L1945"></a>1945     en = catalogEntries.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1946" name="L1946"></a>1946     <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> delCats = <strong class="reserved">new</strong> <a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a>();
<a id="L1947" name="L1947"></a>1947     <strong class="reserved">while</strong> (en.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1948" name="L1948"></a>1948       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> e = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) en.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1949" name="L1949"></a>1949 
<a id="L1950" name="L1950"></a>1950       <strong class="reserved">if</strong> (e.<a href="../D/18824.html" title="Multiple defined in 2 places.">getEntryType</a>() == DELEGATE_URI) <em class="brace">{</em>
<a id="L1951" name="L1951"></a>1951         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> p = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L1952" name="L1952"></a>1952         <strong class="reserved">if</strong> (p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt;= uri.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()
<a id="L1953" name="L1953"></a>1953             &amp;&amp; p.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(uri.<a href="../D/35013.html" title="Multiple defined in 26 places.">substring</a>(0, p.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()))) <em class="brace">{</em>
<a id="L1954" name="L1954"></a>1954           <em class="comment">// delegate this match to the other catalog</em>
<a id="L1955" name="L1955"></a>1955 
<a id="L1956" name="L1956"></a>1956           delCats.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(e.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(1));
<a id="L1957" name="L1957"></a>1957         <em class="brace">}</em>
<a id="L1958" name="L1958"></a>1958       <em class="brace">}</em>
<a id="L1959" name="L1959"></a>1959     <em class="brace">}</em>
<a id="L1960" name="L1960"></a>1960 
<a id="L1961" name="L1961"></a>1961     <strong class="reserved">if</strong> (delCats.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() &gt; 0) <em class="brace">{</em>
<a id="L1962" name="L1962"></a>1962       <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1963" name="L1963"></a>1963 
<a id="L1964" name="L1964"></a>1964       <strong class="reserved">if</strong> (catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/18231.html" title="Multiple defined in 4 places.">getDebug</a>() &gt; 1) <em class="brace">{</em>
<a id="L1965" name="L1965"></a>1965         catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "Switching to delegated catalog(s):");
<a id="L1966" name="L1966"></a>1966         <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1967" name="L1967"></a>1967           <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1968" name="L1968"></a>1968           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(2, "\t" + delegatedCatalog);
<a id="L1969" name="L1969"></a>1969         <em class="brace">}</em>
<a id="L1970" name="L1970"></a>1970       <em class="brace">}</em>
<a id="L1971" name="L1971"></a>1971 
<a id="L1972" name="L1972"></a>1972       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> dcat = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L1973" name="L1973"></a>1973 
<a id="L1974" name="L1974"></a>1974       enCats = delCats.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L1975" name="L1975"></a>1975       <strong class="reserved">while</strong> (enCats.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L1976" name="L1976"></a>1976         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> delegatedCatalog = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) enCats.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L1977" name="L1977"></a>1977         dcat.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(delegatedCatalog);
<a id="L1978" name="L1978"></a>1978       <em class="brace">}</em>
<a id="L1979" name="L1979"></a>1979 
<a id="L1980" name="L1980"></a>1980       <strong class="reserved">return</strong> dcat.<a href="../D/31316.html" title="Multiple defined in 4 places.">resolveURI</a>(uri);
<a id="L1981" name="L1981"></a>1981     <em class="brace">}</em>
<a id="L1982" name="L1982"></a>1982 
<a id="L1983" name="L1983"></a>1983     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L1984" name="L1984"></a>1984   <em class="brace">}</em>
<a id="L1985" name="L1985"></a>1985 
<div class="comment">
    Search the subordinate catalogs, in order, looking for a match.
    <p>This method searches the Catalog and returns the system
    identifier specified for the given entity type with the given
    name, public, and system identifiers. In some contexts, these
    may be null.</p>
    @param entityType The CatalogEntry type for which this query is
    being conducted. This is necessary in order to do the approprate
    query on a subordinate catalog.
    @param entityName The name of the entity being searched for, if
    appropriate.
    @param publicId The public identifier of the entity in question
    (as provided in the source document).
    @param systemId The nominal system identifier for the entity
    in question (as provided in the source document). This parameter is
    overloaded for the URI entry type.
    @throws MalformedURLException The formal system identifier of a
    delegated catalog cannot be turned into a valid URL.
    @throws IOException Error reading delegated catalog file.
    @return The system identifier to use.
    Note that the nominal system identifier is not returned if a
    match is not found in the catalog, instead null is returned
    to indicate that no match was found.</div>
<a id="L2014" name="L2014"></a>2014   <strong class="reserved">protected</strong> <strong class="reserved">synchronized</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26384.html" title="Multiple referred from 10 places.">resolveSubordinateCatalogs</a>(<strong class="reserved">int</strong> entityType,
<a id="L2015" name="L2015"></a>2015                                                            <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> entityName,
<a id="L2016" name="L2016"></a>2016                                                            <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L2017" name="L2017"></a>2017                                                            <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>)
<a id="L2018" name="L2018"></a>2018     <strong class="reserved">throws</strong> <a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a>, <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L2019" name="L2019"></a>2019 
<a id="L2020" name="L2020"></a>2020     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> catPos = 0; catPos &lt; catalogs.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(); catPos++) <em class="brace">{</em>
<a id="L2021" name="L2021"></a>2021       <a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a> <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <strong class="reserved">null</strong>;
<a id="L2022" name="L2022"></a>2022 
<a id="L2023" name="L2023"></a>2023       <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2024" name="L2024"></a>2024         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = (<a href="../S/5932.html#L198" title="Defined at 198 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">Catalog</a>) catalogs.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(catPos);
<a id="L2025" name="L2025"></a>2025       <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1727.html#L41" title="Defined at 41 in src/java/lang/ClassCastException.java.">ClassCastException</a> e) <em class="brace">{</em>
<a id="L2026" name="L2026"></a>2026         <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> catfile = (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>) catalogs.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(catPos);
<a id="L2027" name="L2027"></a>2027         <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = <a href="../S/5932.html#L501" title="Defined at 501 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">newCatalog</a>();
<a id="L2028" name="L2028"></a>2028 
<a id="L2029" name="L2029"></a>2029         <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2030" name="L2030"></a>2030           <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/29102.html" title="Multiple defined in 3 places.">parseCatalog</a>(catfile);
<a id="L2031" name="L2031"></a>2031         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> mue) <em class="brace">{</em>
<a id="L2032" name="L2032"></a>2032           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Malformed Catalog URL", catfile);
<a id="L2033" name="L2033"></a>2033         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1431.html#L43" title="Defined at 43 in src/java/io/FileNotFoundException.java.">FileNotFoundException</a> fnfe) <em class="brace">{</em>
<a id="L2034" name="L2034"></a>2034           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Failed to load catalog, file not found",
<a id="L2035" name="L2035"></a>2035                         catfile);
<a id="L2036" name="L2036"></a>2036         <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> ioe) <em class="brace">{</em>
<a id="L2037" name="L2037"></a>2037           catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Failed to load catalog, I/O error", catfile);
<a id="L2038" name="L2038"></a>2038         <em class="brace">}</em>
<a id="L2039" name="L2039"></a>2039 
<a id="L2040" name="L2040"></a>2040         catalogs.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, catPos);
<a id="L2041" name="L2041"></a>2041       <em class="brace">}</em>
<a id="L2042" name="L2042"></a>2042 
<a id="L2043" name="L2043"></a>2043       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> resolved = <strong class="reserved">null</strong>;
<a id="L2044" name="L2044"></a>2044 
<a id="L2045" name="L2045"></a>2045       <em class="comment">// Ok, now what are we supposed to call here?</em>
<a id="L2046" name="L2046"></a>2046       <strong class="reserved">if</strong> (entityType == DOCTYPE) <em class="brace">{</em>
<a id="L2047" name="L2047"></a>2047         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/5932.html#L1192" title="Defined at 1192 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveDoctype</a>(entityName,
<a id="L2048" name="L2048"></a>2048                                     <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L2049" name="L2049"></a>2049                                     <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2050" name="L2050"></a>2050       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == DOCUMENT) <em class="brace">{</em>
<a id="L2051" name="L2051"></a>2051         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31256.html" title="Multiple defined in 2 places.">resolveDocument</a>();
<a id="L2052" name="L2052"></a>2052       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == ENTITY) <em class="brace">{</em>
<a id="L2053" name="L2053"></a>2053         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31257.html" title="Multiple defined in 27 places.">resolveEntity</a>(entityName,
<a id="L2054" name="L2054"></a>2054                                    <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L2055" name="L2055"></a>2055                                    <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2056" name="L2056"></a>2056       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == NOTATION) <em class="brace">{</em>
<a id="L2057" name="L2057"></a>2057         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../S/5932.html#L1391" title="Defined at 1391 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">resolveNotation</a>(entityName,
<a id="L2058" name="L2058"></a>2058                                      <a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>,
<a id="L2059" name="L2059"></a>2059                                      <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2060" name="L2060"></a>2060       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == PUBLIC) <em class="brace">{</em>
<a id="L2061" name="L2061"></a>2061         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31298.html" title="Multiple defined in 3 places.">resolvePublic</a>(<a href="../D/29918.html" title="Multiple defined in 2 places.">publicId</a>, <a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2062" name="L2062"></a>2062       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == SYSTEM) <em class="brace">{</em>
<a id="L2063" name="L2063"></a>2063         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31308.html" title="Multiple defined in 3 places.">resolveSystem</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2064" name="L2064"></a>2064       <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (entityType == <a href="../D/9247.html" title="Multiple defined in 4 places.">URI</a>) <em class="brace">{</em>
<a id="L2065" name="L2065"></a>2065         resolved = <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>.<a href="../D/31316.html" title="Multiple defined in 4 places.">resolveURI</a>(<a href="../D/35191.html" title="Multiple defined in 2 places.">systemId</a>);
<a id="L2066" name="L2066"></a>2066       <em class="brace">}</em>
<a id="L2067" name="L2067"></a>2067 
<a id="L2068" name="L2068"></a>2068       <strong class="reserved">if</strong> (resolved != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2069" name="L2069"></a>2069         <strong class="reserved">return</strong> resolved;
<a id="L2070" name="L2070"></a>2070       <em class="brace">}</em>
<a id="L2071" name="L2071"></a>2071     <em class="brace">}</em>
<a id="L2072" name="L2072"></a>2072 
<a id="L2073" name="L2073"></a>2073     <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2074" name="L2074"></a>2074   <em class="brace">}</em>
<a id="L2075" name="L2075"></a>2075 
<a id="L2076" name="L2076"></a>2076   <em class="comment">// -----------------------------------------------------------------</em>
<a id="L2077" name="L2077"></a>2077 
<div class="comment">
    Replace backslashes with forward slashes. (URLs always use
    forward slashes.)
    @param sysid The input system identifier.
    @return The same system identifier with backslashes turned into
    forward slashes.</div>
<a id="L2086" name="L2086"></a>2086   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/14655.html" title="Multiple referred from 5 places.">fixSlashes</a> (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sysid) <em class="brace">{</em>
<a id="L2087" name="L2087"></a>2087     <strong class="reserved">return</strong> sysid.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>('\\', '/');
<a id="L2088" name="L2088"></a>2088   <em class="brace">}</em>
<a id="L2089" name="L2089"></a>2089 
<div class="comment">
    Construct an absolute URI from a relative one, using the current
    base URI.
    @param sysid The (possibly relative) system identifier
    @return The system identifier made absolute with respect to the
    current {@link #base}.</div>
<a id="L2098" name="L2098"></a>2098   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/22816.html" title="Multiple referred from 22 places.">makeAbsolute</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> sysid) <em class="brace">{</em>
<a id="L2099" name="L2099"></a>2099     <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a> local = <strong class="reserved">null</strong>;
<a id="L2100" name="L2100"></a>2100 
<a id="L2101" name="L2101"></a>2101     sysid = <a href="../S/5932.html#L2086" title="Defined at 2086 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">fixSlashes</a>(sysid);
<a id="L2102" name="L2102"></a>2102 
<a id="L2103" name="L2103"></a>2103     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2104" name="L2104"></a>2104       local = <strong class="reserved">new</strong> <a href="../D/9256.html" title="Multiple defined in 2 places.">URL</a>(base, sysid);
<a id="L2105" name="L2105"></a>2105     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/814.html#L38" title="Defined at 38 in src/java/net/MalformedURLException.java.">MalformedURLException</a> e) <em class="brace">{</em>
<a id="L2106" name="L2106"></a>2106       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "Malformed URL on system identifier", sysid);
<a id="L2107" name="L2107"></a>2107     <em class="brace">}</em>
<a id="L2108" name="L2108"></a>2108 
<a id="L2109" name="L2109"></a>2109     <strong class="reserved">if</strong> (local != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2110" name="L2110"></a>2110       <strong class="reserved">return</strong> local.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2111" name="L2111"></a>2111     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2112" name="L2112"></a>2112       <strong class="reserved">return</strong> sysid;
<a id="L2113" name="L2113"></a>2113     <em class="brace">}</em>
<a id="L2114" name="L2114"></a>2114   <em class="brace">}</em>
<a id="L2115" name="L2115"></a>2115 
<div class="comment">
    Perform character normalization on a URI reference.
    @param uriref The URI reference
    @return The normalized URI reference.</div>
<a id="L2122" name="L2122"></a>2122   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/23795.html" title="Multiple referred from 35 places.">normalizeURI</a>(<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> uriref) <em class="brace">{</em>
<a id="L2123" name="L2123"></a>2123     <strong class="reserved">if</strong> (uriref == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L2124" name="L2124"></a>2124       <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L2125" name="L2125"></a>2125     <em class="brace">}</em>
<a id="L2126" name="L2126"></a>2126 
<a id="L2127" name="L2127"></a>2127     <strong class="reserved">byte</strong>[] bytes;
<a id="L2128" name="L2128"></a>2128     <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L2129" name="L2129"></a>2129       bytes = uriref.<a href="../D/17415.html" title="Multiple defined in 35 places.">getBytes</a>("UTF-8");
<a id="L2130" name="L2130"></a>2130     <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1372.html#L33" title="Defined at 33 in src/java/io/UnsupportedEncodingException.java.">UnsupportedEncodingException</a> uee) <em class="brace">{</em>
<a id="L2131" name="L2131"></a>2131       <em class="comment">// this can't happen</em>
<a id="L2132" name="L2132"></a>2132       catalogManager.<a href="../D/14486.html" title="Multiple defined in 5 places.">debug</a>.<a href="../D/27673.html" title="Multiple defined in 6 places.">message</a>(1, "UTF-8 is an unsupported encoding!?");
<a id="L2133" name="L2133"></a>2133       <strong class="reserved">return</strong> uriref;
<a id="L2134" name="L2134"></a>2134     <em class="brace">}</em>
<a id="L2135" name="L2135"></a>2135 
<a id="L2136" name="L2136"></a>2136     <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a> newRef = <strong class="reserved">new</strong> <a href="../S/1560.html#L76" title="Defined at 76 in src/java/lang/StringBuilder.java.">StringBuilder</a>(bytes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>);
<a id="L2137" name="L2137"></a>2137     <strong class="reserved">for</strong> (<strong class="reserved">int</strong> <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> = 0; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a> &lt; bytes.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; <a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>++) <em class="brace">{</em>
<a id="L2138" name="L2138"></a>2138       <strong class="reserved">int</strong> ch = bytes[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>] &amp; 0xFF;
<a id="L2139" name="L2139"></a>2139 
<a id="L2140" name="L2140"></a>2140       <strong class="reserved">if</strong> ((ch &lt;= 0x20)    <em class="comment">// ctrl</em>
<a id="L2141" name="L2141"></a>2141           || (ch &gt; 0x7F)  <em class="comment">// high ascii</em>
<a id="L2142" name="L2142"></a>2142           || (ch == 0x22) <em class="comment">// "</em>
<a id="L2143" name="L2143"></a>2143           || (ch == 0x3C) <em class="comment">// &lt;</em>
<a id="L2144" name="L2144"></a>2144           || (ch == 0x3E) <em class="comment">// &gt;</em>
<a id="L2145" name="L2145"></a>2145           || (ch == 0x5C) <em class="comment">// \</em>
<a id="L2146" name="L2146"></a>2146           || (ch == 0x5E) <em class="comment">// ^</em>
<a id="L2147" name="L2147"></a>2147           || (ch == 0x60) <em class="comment">// `</em>
<a id="L2148" name="L2148"></a>2148           || (ch == 0x7B) <em class="comment">// {</em>
<a id="L2149" name="L2149"></a>2149           || (ch == 0x7C) <em class="comment">// |</em>
<a id="L2150" name="L2150"></a>2150           || (ch == 0x7D) <em class="comment">// }</em>
<a id="L2151" name="L2151"></a>2151           || (ch == 0x7F)) <em class="brace">{</em>
<a id="L2152" name="L2152"></a>2152         newRef.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>(<a href="../S/5932.html#L2168" title="Defined at 2168 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">encodedByte</a>(ch));
<a id="L2153" name="L2153"></a>2153       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2154" name="L2154"></a>2154         newRef.<a href="../D/11357.html" title="Multiple defined in 137 places.">append</a>((<strong class="reserved">char</strong>) bytes[<a href="../D/13557.html" title="Multiple defined in 24 places.">count</a>]);
<a id="L2155" name="L2155"></a>2155       <em class="brace">}</em>
<a id="L2156" name="L2156"></a>2156     <em class="brace">}</em>
<a id="L2157" name="L2157"></a>2157 
<a id="L2158" name="L2158"></a>2158     <strong class="reserved">return</strong> newRef.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>();
<a id="L2159" name="L2159"></a>2159   <em class="brace">}</em>
<a id="L2160" name="L2160"></a>2160 
<div class="comment">
    Perform %-encoding on a single byte.
    @param b The 8-bit integer that represents th byte. (Bytes are signed
              but encoding needs to look at the bytes unsigned.)
    @return The %-encoded string for the byte in question.</div>
<a id="L2168" name="L2168"></a>2168   <strong class="reserved">protected</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../S/5932.html#L2152" title="Referred from 2152 in src/com/sun/org/apache/xml/internal/resolver/Catalog.java.">encodedByte</a> (<strong class="reserved">int</strong> b) <em class="brace">{</em>
<a id="L2169" name="L2169"></a>2169     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> hex = <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35410.html" title="Multiple defined in 5 places.">toHexString</a>(b).<a href="../D/35514.html" title="Multiple defined in 18 places.">toUpperCase</a>();
<a id="L2170" name="L2170"></a>2170     <strong class="reserved">if</strong> (hex.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; 2) <em class="brace">{</em>
<a id="L2171" name="L2171"></a>2171       <strong class="reserved">return</strong> "%0" + hex;
<a id="L2172" name="L2172"></a>2172     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2173" name="L2173"></a>2173       <strong class="reserved">return</strong> "%" + hex;
<a id="L2174" name="L2174"></a>2174     <em class="brace">}</em>
<a id="L2175" name="L2175"></a>2175   <em class="brace">}</em>
<a id="L2176" name="L2176"></a>2176 
<a id="L2177" name="L2177"></a>2177   <em class="comment">// -----------------------------------------------------------------</em>
<a id="L2178" name="L2178"></a>2178 
<div class="comment">
    Add to the current list of delegated catalogs.
    <p>This method always constructs the {@link #localDelegate}
    vector so that it is ordered by length of partial
    public identifier.</p>
    @param entry The DELEGATE catalog entry</div>
<a id="L2188" name="L2188"></a>2188   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/9688.html" title="Multiple referred from 3 places.">addDelegate</a>(<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> entry) <em class="brace">{</em>
<a id="L2189" name="L2189"></a>2189     <strong class="reserved">int</strong> pos = 0;
<a id="L2190" name="L2190"></a>2190     <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> partial = entry.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L2191" name="L2191"></a>2191 
<a id="L2192" name="L2192"></a>2192     <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a> local = localDelegate.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L2193" name="L2193"></a>2193     <strong class="reserved">while</strong> (local.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L2194" name="L2194"></a>2194       <a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a> dpe = (<a href="../S/5935.html#L54" title="Defined at 54 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">CatalogEntry</a>) local.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L2195" name="L2195"></a>2195       <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> dp = dpe.<a href="../S/5935.html#L226" title="Defined at 226 in src/com/sun/org/apache/xml/internal/resolver/CatalogEntry.java.">getEntryArg</a>(0);
<a id="L2196" name="L2196"></a>2196       <strong class="reserved">if</strong> (dp.<a href="../D/15685.html" title="Multiple defined in 654 places.">equals</a>(partial)) <em class="brace">{</em>
<a id="L2197" name="L2197"></a>2197         <em class="comment">// we already have this prefix</em>
<a id="L2198" name="L2198"></a>2198         <strong class="reserved">return</strong>;
<a id="L2199" name="L2199"></a>2199       <em class="brace">}</em>
<a id="L2200" name="L2200"></a>2200       <strong class="reserved">if</strong> (dp.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &gt; partial.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2201" name="L2201"></a>2201         pos++;
<a id="L2202" name="L2202"></a>2202       <em class="brace">}</em>
<a id="L2203" name="L2203"></a>2203       <strong class="reserved">if</strong> (dp.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>() &lt; partial.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>()) <em class="brace">{</em>
<a id="L2204" name="L2204"></a>2204         <strong class="reserved">break</strong>;
<a id="L2205" name="L2205"></a>2205       <em class="brace">}</em>
<a id="L2206" name="L2206"></a>2206     <em class="brace">}</em>
<a id="L2207" name="L2207"></a>2207 
<a id="L2208" name="L2208"></a>2208     <em class="comment">// now insert partial into the vector at [pos]</em>
<a id="L2209" name="L2209"></a>2209     <strong class="reserved">if</strong> (localDelegate.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>() == 0) <em class="brace">{</em>
<a id="L2210" name="L2210"></a>2210       localDelegate.<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(entry);
<a id="L2211" name="L2211"></a>2211     <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L2212" name="L2212"></a>2212       localDelegate.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(entry, pos);
<a id="L2213" name="L2213"></a>2213     <em class="brace">}</em>
<a id="L2214" name="L2214"></a>2214   <em class="brace">}</em>
<a id="L2215" name="L2215"></a>2215 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L388">[^]</a><a href="#L2188">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
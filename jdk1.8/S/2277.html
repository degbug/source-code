<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/awt/image/PixelGrabber.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L198">[^]</a><a href="#L669">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L198" title="Defined at 198.">startGrabbing</a></li>
<li><a href="#L212" title="Defined at 212.">abortGrabbing</a></li>
<li><a href="#L225" title="Defined at 225.">grabPixels</a></li>
<li><a href="#L249" title="Defined at 249.">grabPixels</a></li>
<li><a href="#L282" title="Defined at 282.">getStatus</a></li>
<li><a href="#L295" title="Defined at 295.">getWidth</a></li>
<li><a href="#L308" title="Defined at 308.">getHeight</a></li>
<li><a href="#L327" title="Defined at 327.">getPixels</a></li>
<li><a href="#L350" title="Defined at 350.">getColorModel</a></li>
<li><a href="#L366" title="Defined at 366.">setDimensions</a></li>
<li><a href="#L395" title="Defined at 395.">setHints</a></li>
<li><a href="#L410" title="Defined at 410.">setProperties</a></li>
<li><a href="#L426" title="Defined at 426.">setColorModel</a></li>
<li><a href="#L430" title="Defined at 430.">convertToRGB</a></li>
<li><a href="#L471" title="Defined at 471.">setPixels</a></li>
<li><a href="#L558" title="Defined at 558.">setPixels</a></li>
<li><a href="#L636" title="Defined at 636.">imageComplete</a></li>
<li><a href="#L669" title="Defined at 669.">status</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1995, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.awt.image;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.awt.image.ImageProducer;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.awt.image.ImageConsumer;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.awt.image.ColorModel;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.awt.Image;
<a id="L33" name="L33"></a>  33 
<div class="comment">
  The PixelGrabber class implements an ImageConsumer which can be attached
  to an Image or ImageProducer object to retrieve a subset of the pixels
  in that image.  Here is an example:
  <pre>{@code
  public void handlesinglepixel(int x, int y, int pixel) {
       int alpha = (pixel &gt;&gt; 24) &amp; 0xff;
       int red   = (pixel &gt;&gt; 16) &amp; 0xff;
       int green = (pixel &gt;&gt;  8) &amp; 0xff;
       int blue  = (pixel      ) &amp; 0xff;
       // Deal with the pixel as necessary...
  }
  public void handlepixels(Image img, int x, int y, int w, int h) {
       int[] pixels = new int[w * h];
       PixelGrabber pg = new PixelGrabber(img, x, y, w, h, pixels, 0, w);
       try {
           pg.grabPixels();
       } catch (InterruptedException e) {
           System.err.println("interrupted waiting for pixels!");
           return;
       }
       if ((pg.getStatus() &amp; ImageObserver.ABORT) != 0) {
           System.err.println("image fetch aborted or errored");
           return;
       }
       for (int j = 0; j &lt; h; j++) {
           for (int i = 0; i &lt; w; i++) {
               handlesinglepixel(x+i, y+j, pixels[j * w + i]);
           }
       }
  }
  }</pre>
  @see ColorModel#getRGBdefault
  @author      Jim Graham</div>
<a id="L74" name="L74"></a>  74 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../S/3169.html#L517" title="Referred from 517 in src/javax/swing/ImageIcon.java.">PixelGrabber</a> <strong class="reserved">implements</strong> <a href="../S/2269.html#L41" title="Defined at 41 in src/java/awt/image/ImageConsumer.java.">ImageConsumer</a> <em class="brace">{</em>
<a id="L75" name="L75"></a>  75     <a href="../S/2260.html#L39" title="Defined at 39 in src/java/awt/image/ImageProducer.java.">ImageProducer</a> producer;
<a id="L76" name="L76"></a>  76 
<a id="L77" name="L77"></a>  77     <strong class="reserved">int</strong> dstX;
<a id="L78" name="L78"></a>  78     <strong class="reserved">int</strong> dstY;
<a id="L79" name="L79"></a>  79     <strong class="reserved">int</strong> dstW;
<a id="L80" name="L80"></a>  80     <strong class="reserved">int</strong> dstH;
<a id="L81" name="L81"></a>  81 
<a id="L82" name="L82"></a>  82     <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> imageModel;
<a id="L83" name="L83"></a>  83     <strong class="reserved">byte</strong>[] bytePixels;
<a id="L84" name="L84"></a>  84     <strong class="reserved">int</strong>[] intPixels;
<a id="L85" name="L85"></a>  85     <strong class="reserved">int</strong> dstOff;
<a id="L86" name="L86"></a>  86     <strong class="reserved">int</strong> dstScan;
<a id="L87" name="L87"></a>  87 
<a id="L88" name="L88"></a>  88     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> grabbing;
<a id="L89" name="L89"></a>  89     <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>;
<a id="L90" name="L90"></a>  90 
<a id="L91" name="L91"></a>  91     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> GRABBEDBITS = (<a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.FRAMEBITS
<a id="L92" name="L92"></a>  92                                             | <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ALLBITS);
<a id="L93" name="L93"></a>  93     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> DONEBITS = (GRABBEDBITS
<a id="L94" name="L94"></a>  94                                          | <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ERROR);
<a id="L95" name="L95"></a>  95 
<div class="comment">
      Create a PixelGrabber object to grab the (x, y, w, h) rectangular
      section of pixels from the specified image into the given array.
      The pixels are stored into the array in the default RGB ColorModel.
      The RGB data for pixel (i, j) where (i, j) is inside the rectangle
      (x, y, w, h) is stored in the array at
      <tt>pix[(j - y) * scansize + (i - x) + off]</tt>.
      @see ColorModel#getRGBdefault
      @param img the image to retrieve pixels from
      @param x the x coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image, relative to the default
      (unscaled) size of the image
      @param y the y coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image
      @param w the width of the rectangle of pixels to retrieve
      @param h the height of the rectangle of pixels to retrieve
      @param pix the array of integers which are to be used to hold the
      RGB pixels retrieved from the image
      @param off the offset into the array of where to store the first pixel
      @param scansize the distance from one row of pixels to the next in
      the array</div>
<a id="L118" name="L118"></a> 118     <strong class="reserved">public</strong> PixelGrabber(<a href="../S/2102.html#L46" title="Defined at 46 in src/java/awt/Image.java.">Image</a> img, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y, <strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h,
<a id="L119" name="L119"></a> 119                         <strong class="reserved">int</strong>[] pix, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> scansize) <em class="brace">{</em>
<a id="L120" name="L120"></a> 120         <strong class="reserved">this</strong>(img.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>(), <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, y, w, h, pix, off, scansize);
<a id="L121" name="L121"></a> 121     <em class="brace">}</em>
<a id="L122" name="L122"></a> 122 
<div class="comment">
      Create a PixelGrabber object to grab the (x, y, w, h) rectangular
      section of pixels from the image produced by the specified
      ImageProducer into the given array.
      The pixels are stored into the array in the default RGB ColorModel.
      The RGB data for pixel (i, j) where (i, j) is inside the rectangle
      (x, y, w, h) is stored in the array at
      <tt>pix[(j - y) * scansize + (i - x) + off]</tt>.
      @param ip the <code>ImageProducer</code> that produces the
      image from which to retrieve pixels
      @param x the x coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image, relative to the default
      (unscaled) size of the image
      @param y the y coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image
      @param w the width of the rectangle of pixels to retrieve
      @param h the height of the rectangle of pixels to retrieve
      @param pix the array of integers which are to be used to hold the
      RGB pixels retrieved from the image
      @param off the offset into the array of where to store the first pixel
      @param scansize the distance from one row of pixels to the next in
      the array
      @see ColorModel#getRGBdefault</div>
<a id="L147" name="L147"></a> 147     <strong class="reserved">public</strong> PixelGrabber(<a href="../S/2260.html#L39" title="Defined at 39 in src/java/awt/image/ImageProducer.java.">ImageProducer</a> ip, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y, <strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h,
<a id="L148" name="L148"></a> 148                         <strong class="reserved">int</strong>[] pix, <strong class="reserved">int</strong> off, <strong class="reserved">int</strong> scansize) <em class="brace">{</em>
<a id="L149" name="L149"></a> 149         producer = ip;
<a id="L150" name="L150"></a> 150         dstX = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L151" name="L151"></a> 151         dstY = y;
<a id="L152" name="L152"></a> 152         dstW = w;
<a id="L153" name="L153"></a> 153         dstH = h;
<a id="L154" name="L154"></a> 154         dstOff = off;
<a id="L155" name="L155"></a> 155         dstScan = scansize;
<a id="L156" name="L156"></a> 156         intPixels = pix;
<a id="L157" name="L157"></a> 157         imageModel = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>();
<a id="L158" name="L158"></a> 158     <em class="brace">}</em>
<a id="L159" name="L159"></a> 159 
<div class="comment">
      Create a PixelGrabber object to grab the (x, y, w, h) rectangular
      section of pixels from the specified image.  The pixels are
      accumulated in the original ColorModel if the same ColorModel
      is used for every call to setPixels, otherwise the pixels are
      accumulated in the default RGB ColorModel.  If the forceRGB
      parameter is true, then the pixels will be accumulated in the
      default RGB ColorModel anyway.  A buffer is allocated by the
      PixelGrabber to hold the pixels in either case.  If <code>(w &lt; 0)</code> or
      <code>(h &lt; 0)</code>, then they will default to the remaining width and
      height of the source data when that information is delivered.
      @param img the image to retrieve the image data from
      @param x the x coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image, relative to the default
      (unscaled) size of the image
      @param y the y coordinate of the upper left corner of the rectangle
      of pixels to retrieve from the image
      @param w the width of the rectangle of pixels to retrieve
      @param h the height of the rectangle of pixels to retrieve
      @param forceRGB true if the pixels should always be converted to
      the default RGB ColorModel</div>
<a id="L182" name="L182"></a> 182     <strong class="reserved">public</strong> PixelGrabber(<a href="../S/2102.html#L46" title="Defined at 46 in src/java/awt/Image.java.">Image</a> img, <strong class="reserved">int</strong> <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>, <strong class="reserved">int</strong> y, <strong class="reserved">int</strong> w, <strong class="reserved">int</strong> h,
<a id="L183" name="L183"></a> 183                         <strong class="reserved">boolean</strong> forceRGB)
<a id="L184" name="L184"></a> 184     <em class="brace">{</em>
<a id="L185" name="L185"></a> 185         producer = img.<a href="../D/22603.html" title="Multiple defined in 11 places.">getSource</a>();
<a id="L186" name="L186"></a> 186         dstX = <a href="../D/37285.html" title="Multiple defined in 2 places.">x</a>;
<a id="L187" name="L187"></a> 187         dstY = y;
<a id="L188" name="L188"></a> 188         dstW = w;
<a id="L189" name="L189"></a> 189         dstH = h;
<a id="L190" name="L190"></a> 190         <strong class="reserved">if</strong> (forceRGB) <em class="brace">{</em>
<a id="L191" name="L191"></a> 191             imageModel = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>();
<a id="L192" name="L192"></a> 192         <em class="brace">}</em>
<a id="L193" name="L193"></a> 193     <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<div class="comment">
      Request the PixelGrabber to start fetching the pixels.</div>
<a id="L198" name="L198"></a> 198     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> startGrabbing() <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <strong class="reserved">if</strong> ((<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; DONEBITS) != 0) <em class="brace">{</em>
<a id="L200" name="L200"></a> 200             <strong class="reserved">return</strong>;
<a id="L201" name="L201"></a> 201         <em class="brace">}</em>
<a id="L202" name="L202"></a> 202         <strong class="reserved">if</strong> (!grabbing) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203             grabbing = <strong class="reserved">true</strong>;
<a id="L204" name="L204"></a> 204             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp;= ~(<a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ABORT);
<a id="L205" name="L205"></a> 205             producer.<a href="../D/34820.html" title="Multiple defined in 4 places.">startProduction</a>(<strong class="reserved">this</strong>);
<a id="L206" name="L206"></a> 206         <em class="brace">}</em>
<a id="L207" name="L207"></a> 207     <em class="brace">}</em>
<a id="L208" name="L208"></a> 208 
<div class="comment">
      Request the PixelGrabber to abort the image fetch.</div>
<a id="L212" name="L212"></a> 212     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> abortGrabbing() <em class="brace">{</em>
<a id="L213" name="L213"></a> 213         <a href="../D/24339.html" title="Multiple defined in 9 places.">imageComplete</a>(IMAGEABORTED);
<a id="L214" name="L214"></a> 214     <em class="brace">}</em>
<a id="L215" name="L215"></a> 215 
<div class="comment">
      Request the Image or ImageProducer to start delivering pixels and
      wait for all of the pixels in the rectangle of interest to be
      delivered.
      @return true if the pixels were successfully grabbed, false on
      abort, error or timeout
      @exception InterruptedException
                 Another thread has interrupted this thread.</div>
<a id="L225" name="L225"></a> 225     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20029.html" title="Multiple referred from 2 places.">grabPixels</a>() <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a> <em class="brace">{</em>
<a id="L226" name="L226"></a> 226         <strong class="reserved">return</strong> <a href="../D/23909.html" title="Multiple defined in 3 places.">grabPixels</a>(0);
<a id="L227" name="L227"></a> 227     <em class="brace">}</em>
<a id="L228" name="L228"></a> 228 
<div class="comment">
      Request the Image or ImageProducer to start delivering pixels and
      wait for all of the pixels in the rectangle of interest to be
      delivered or until the specified timeout has elapsed.  This method
      behaves in the following ways, depending on the value of
      <code>ms</code>:
      <ul><li> If <code>ms == 0</code>, waits until all pixels are delivered
      </li><li> If <code>ms &gt; 0</code>, waits until all pixels are delivered
      as timeout expires.
      </li><li> If <code>ms &lt; 0</code>, returns <code>true</code> if all pixels
      are grabbed, <code>false</code> otherwise and does not wait.
      </li></ul>
      @param ms the number of milliseconds to wait for the image pixels
      to arrive before timing out
      @return true if the pixels were successfully grabbed, false on
      abort, error or timeout
      @exception InterruptedException
                 Another thread has interrupted this thread.</div>
<a id="L249" name="L249"></a> 249     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">boolean</strong> <a href="../R/20029.html" title="Multiple referred from 2 places.">grabPixels</a>(<strong class="reserved">long</strong> ms)
<a id="L250" name="L250"></a> 250         <strong class="reserved">throws</strong> <a href="../S/1730.html#L50" title="Defined at 50 in src/java/lang/InterruptedException.java.">InterruptedException</a>
<a id="L251" name="L251"></a> 251     <em class="brace">{</em>
<a id="L252" name="L252"></a> 252         <strong class="reserved">if</strong> ((<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; DONEBITS) != 0) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253             <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; GRABBEDBITS) != 0;
<a id="L254" name="L254"></a> 254         <em class="brace">}</em>
<a id="L255" name="L255"></a> 255         <strong class="reserved">long</strong> <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> = ms + <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L353" title="Defined at 353 in src/java/lang/System.java.">currentTimeMillis</a>();
<a id="L256" name="L256"></a> 256         <strong class="reserved">if</strong> (!grabbing) <em class="brace">{</em>
<a id="L257" name="L257"></a> 257             grabbing = <strong class="reserved">true</strong>;
<a id="L258" name="L258"></a> 258             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp;= ~(<a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ABORT);
<a id="L259" name="L259"></a> 259             producer.<a href="../D/34820.html" title="Multiple defined in 4 places.">startProduction</a>(<strong class="reserved">this</strong>);
<a id="L260" name="L260"></a> 260         <em class="brace">}</em>
<a id="L261" name="L261"></a> 261         <strong class="reserved">while</strong> (grabbing) <em class="brace">{</em>
<a id="L262" name="L262"></a> 262             <strong class="reserved">long</strong> timeout;
<a id="L263" name="L263"></a> 263             <strong class="reserved">if</strong> (ms == 0) <em class="brace">{</em>
<a id="L264" name="L264"></a> 264                 timeout = 0;
<a id="L265" name="L265"></a> 265             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L266" name="L266"></a> 266                 timeout = <a href="../D/15431.html" title="Multiple defined in 52 places.">end</a> - <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L353" title="Defined at 353 in src/java/lang/System.java.">currentTimeMillis</a>();
<a id="L267" name="L267"></a> 267                 <strong class="reserved">if</strong> (timeout &lt;= 0) <em class="brace">{</em>
<a id="L268" name="L268"></a> 268                     <strong class="reserved">break</strong>;
<a id="L269" name="L269"></a> 269                 <em class="brace">}</em>
<a id="L270" name="L270"></a> 270             <em class="brace">}</em>
<a id="L271" name="L271"></a> 271             <a href="../D/36778.html" title="Multiple defined in 3 places.">wait</a>(timeout);
<a id="L272" name="L272"></a> 272         <em class="brace">}</em>
<a id="L273" name="L273"></a> 273         <strong class="reserved">return</strong> (<a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> &amp; GRABBEDBITS) != 0;
<a id="L274" name="L274"></a> 274     <em class="brace">}</em>
<a id="L275" name="L275"></a> 275 
<div class="comment">
      Return the status of the pixels.  The ImageObserver flags
      representing the available pixel information are returned.
      @return the bitwise OR of all relevant ImageObserver flags
      @see ImageObserver</div>
<a id="L282" name="L282"></a> 282     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/19189.html" title="Multiple referred from 31 places.">getStatus</a>() <em class="brace">{</em>
<a id="L283" name="L283"></a> 283         <strong class="reserved">return</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>;
<a id="L284" name="L284"></a> 284     <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<div class="comment">
      Get the width of the pixel buffer (after adjusting for image width).
      If no width was specified for the rectangle of pixels to grab then
      then this information will only be available after the image has
      delivered the dimensions.
      @return the final width used for the pixel buffer or -1 if the width
      is not yet known
      @see #getStatus</div>
<a id="L295" name="L295"></a> 295     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/19866.html" title="Multiple referred from 1025 places.">getWidth</a>() <em class="brace">{</em>
<a id="L296" name="L296"></a> 296         <strong class="reserved">return</strong> (dstW &lt; 0) ? -1 : dstW;
<a id="L297" name="L297"></a> 297     <em class="brace">}</em>
<a id="L298" name="L298"></a> 298 
<div class="comment">
      Get the height of the pixel buffer (after adjusting for image height).
      If no width was specified for the rectangle of pixels to grab then
      then this information will only be available after the image has
      delivered the dimensions.
      @return the final height used for the pixel buffer or -1 if the height
      is not yet known
      @see #getStatus</div>
<a id="L308" name="L308"></a> 308     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/16875.html" title="Multiple referred from 1014 places.">getHeight</a>() <em class="brace">{</em>
<a id="L309" name="L309"></a> 309         <strong class="reserved">return</strong> (dstH &lt; 0) ? -1 : dstH;
<a id="L310" name="L310"></a> 310     <em class="brace">}</em>
<a id="L311" name="L311"></a> 311 
<div class="comment">
      Get the pixel buffer.  If the PixelGrabber was not constructed
      with an explicit pixel buffer to hold the pixels then this method
      will return null until the size and format of the image data is
      known.
      Since the PixelGrabber may fall back on accumulating the data
      in the default RGB ColorModel at any time if the source image
      uses more than one ColorModel to deliver the data, the array
      object returned by this method may change over time until the
      image grab is complete.
      @return either a byte array or an int array
      @see #getStatus
      @see #setPixels(int, int, int, int, ColorModel, byte[], int, int)
      @see #setPixels(int, int, int, int, ColorModel, int[], int, int)</div>
<a id="L327" name="L327"></a> 327     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/18348.html" title="Multiple referred from 17 places.">getPixels</a>() <em class="brace">{</em>
<a id="L328" name="L328"></a> 328         <strong class="reserved">return</strong> (bytePixels == <strong class="reserved">null</strong>)
<a id="L329" name="L329"></a> 329             ? ((<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>) intPixels)
<a id="L330" name="L330"></a> 330             : ((<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>) bytePixels);
<a id="L331" name="L331"></a> 331     <em class="brace">}</em>
<a id="L332" name="L332"></a> 332 
<div class="comment">
      Get the ColorModel for the pixels stored in the array.  If the
      PixelGrabber was constructed with an explicit pixel buffer then
      this method will always return the default RGB ColorModel,
      otherwise it may return null until the ColorModel used by the
      ImageProducer is known.
      Since the PixelGrabber may fall back on accumulating the data
      in the default RGB ColorModel at any time if the source image
      uses more than one ColorModel to deliver the data, the ColorModel
      object returned by this method may change over time until the
      image grab is complete and may not reflect any of the ColorModel
      objects that was used by the ImageProducer to deliver the pixels.
      @return the ColorModel object used for storing the pixels
      @see #getStatus
      @see ColorModel#getRGBdefault
      @see #setColorModel(ColorModel)</div>
<a id="L350" name="L350"></a> 350     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> <a href="../R/15661.html" title="Multiple referred from 76 places.">getColorModel</a>() <em class="brace">{</em>
<a id="L351" name="L351"></a> 351         <strong class="reserved">return</strong> imageModel;
<a id="L352" name="L352"></a> 352     <em class="brace">}</em>
<a id="L353" name="L353"></a> 353 
<div class="comment">
      The setDimensions method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param width the width of the dimension
      @param height the height of the dimension</p></div>
<a id="L366" name="L366"></a> 366     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27237.html" title="Multiple referred from 6 places.">setDimensions</a>(<strong class="reserved">int</strong> <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a>, <strong class="reserved">int</strong> <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a>) <em class="brace">{</em>
<a id="L367" name="L367"></a> 367         <strong class="reserved">if</strong> (dstW &lt; 0) <em class="brace">{</em>
<a id="L368" name="L368"></a> 368             dstW = <a href="../D/36863.html" title="Multiple defined in 3 places.">width</a> - dstX;
<a id="L369" name="L369"></a> 369         <em class="brace">}</em>
<a id="L370" name="L370"></a> 370         <strong class="reserved">if</strong> (dstH &lt; 0) <em class="brace">{</em>
<a id="L371" name="L371"></a> 371             dstH = <a href="../S/3196.html#L677" title="Defined at 677 in src/javax/swing/Spring.java.">height</a> - dstY;
<a id="L372" name="L372"></a> 372         <em class="brace">}</em>
<a id="L373" name="L373"></a> 373         <strong class="reserved">if</strong> (dstW &lt;= 0 || dstH &lt;= 0) <em class="brace">{</em>
<a id="L374" name="L374"></a> 374             <a href="../D/24339.html" title="Multiple defined in 9 places.">imageComplete</a>(STATICIMAGEDONE);
<a id="L375" name="L375"></a> 375         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (intPixels == <strong class="reserved">null</strong> &amp;&amp;
<a id="L376" name="L376"></a> 376                    imageModel == <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>()) <em class="brace">{</em>
<a id="L377" name="L377"></a> 377             intPixels = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[dstW * dstH];
<a id="L378" name="L378"></a> 378             dstScan = dstW;
<a id="L379" name="L379"></a> 379             dstOff = 0;
<a id="L380" name="L380"></a> 380         <em class="brace">}</em>
<a id="L381" name="L381"></a> 381         <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= (<a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.WIDTH | <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.HEIGHT);
<a id="L382" name="L382"></a> 382     <em class="brace">}</em>
<a id="L383" name="L383"></a> 383 
<div class="comment">
      The setHints method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param hints a set of hints used to process the pixels</p></div>
<a id="L395" name="L395"></a> 395     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27502.html" title="Multiple referred from 5 places.">setHints</a>(<strong class="reserved">int</strong> hints) <em class="brace">{</em>
<a id="L396" name="L396"></a> 396         <strong class="reserved">return</strong>;
<a id="L397" name="L397"></a> 397     <em class="brace">}</em>
<a id="L398" name="L398"></a> 398 
<div class="comment">
      The setProperties method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param props the list of properties</p></div>
<a id="L410" name="L410"></a> 410     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27974.html" title="Multiple referred from 5 places.">setProperties</a>(<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;?,?&gt; props) <em class="brace">{</em>
<a id="L411" name="L411"></a> 411         <strong class="reserved">return</strong>;
<a id="L412" name="L412"></a> 412     <em class="brace">}</em>
<a id="L413" name="L413"></a> 413 
<div class="comment">
      The setColorModel method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param model the specified <code>ColorModel</code>
      @see #getColorModel</p></div>
<a id="L426" name="L426"></a> 426     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27059.html" title="Multiple referred from 5 places.">setColorModel</a>(<a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> model) <em class="brace">{</em>
<a id="L427" name="L427"></a> 427         <strong class="reserved">return</strong>;
<a id="L428" name="L428"></a> 428     <em class="brace">}</em>
<a id="L429" name="L429"></a> 429 
<a id="L430" name="L430"></a> 430     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/12078.html" title="Multiple referred from 7 places.">convertToRGB</a>() <em class="brace">{</em>
<a id="L431" name="L431"></a> 431         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = dstW * dstH;
<a id="L432" name="L432"></a> 432         <strong class="reserved">int</strong> newpixels[] = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>];
<a id="L433" name="L433"></a> 433         <strong class="reserved">if</strong> (bytePixels != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L434" name="L434"></a> 434             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L435" name="L435"></a> 435                 newpixels[i] = imageModel.<a href="../D/21814.html" title="Multiple defined in 13 places.">getRGB</a>(bytePixels[i] &amp; 0xff);
<a id="L436" name="L436"></a> 436             <em class="brace">}</em>
<a id="L437" name="L437"></a> 437         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (intPixels != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L438" name="L438"></a> 438             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++) <em class="brace">{</em>
<a id="L439" name="L439"></a> 439                 newpixels[i] = imageModel.<a href="../D/21814.html" title="Multiple defined in 13 places.">getRGB</a>(intPixels[i]);
<a id="L440" name="L440"></a> 440             <em class="brace">}</em>
<a id="L441" name="L441"></a> 441         <em class="brace">}</em>
<a id="L442" name="L442"></a> 442         bytePixels = <strong class="reserved">null</strong>;
<a id="L443" name="L443"></a> 443         intPixels = newpixels;
<a id="L444" name="L444"></a> 444         dstScan = dstW;
<a id="L445" name="L445"></a> 445         dstOff = 0;
<a id="L446" name="L446"></a> 446         imageModel = <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>();
<a id="L447" name="L447"></a> 447     <em class="brace">}</em>
<a id="L448" name="L448"></a> 448 
<div class="comment">
      The setPixels method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param srcX the X coordinate of the upper-left corner
             of the area of pixels to be set
      @param srcY the Y coordinate of the upper-left corner
             of the area of pixels to be set
      @param srcW the width of the area of pixels
      @param srcH the height of the area of pixels
      @param model the specified <code>ColorModel</code>
      @param pixels the array of pixels
      @param srcOff the offset into the pixels array
      @param srcScan the distance from one row of pixels to the next
             in the pixels array
      @see #getPixels</p></div>
<a id="L471" name="L471"></a> 471     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27930.html" title="Multiple referred from 28 places.">setPixels</a>(<strong class="reserved">int</strong> srcX, <strong class="reserved">int</strong> srcY, <strong class="reserved">int</strong> srcW, <strong class="reserved">int</strong> srcH,
<a id="L472" name="L472"></a> 472                           <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> model,
<a id="L473" name="L473"></a> 473                           <strong class="reserved">byte</strong> pixels[], <strong class="reserved">int</strong> srcOff, <strong class="reserved">int</strong> srcScan) <em class="brace">{</em>
<a id="L474" name="L474"></a> 474         <strong class="reserved">if</strong> (srcY &lt; dstY) <em class="brace">{</em>
<a id="L475" name="L475"></a> 475             <strong class="reserved">int</strong> diff = dstY - srcY;
<a id="L476" name="L476"></a> 476             <strong class="reserved">if</strong> (diff &gt;= srcH) <em class="brace">{</em>
<a id="L477" name="L477"></a> 477                 <strong class="reserved">return</strong>;
<a id="L478" name="L478"></a> 478             <em class="brace">}</em>
<a id="L479" name="L479"></a> 479             srcOff += srcScan * diff;
<a id="L480" name="L480"></a> 480             srcY += diff;
<a id="L481" name="L481"></a> 481             srcH -= diff;
<a id="L482" name="L482"></a> 482         <em class="brace">}</em>
<a id="L483" name="L483"></a> 483         <strong class="reserved">if</strong> (srcY + srcH &gt; dstY + dstH) <em class="brace">{</em>
<a id="L484" name="L484"></a> 484             srcH = (dstY + dstH) - srcY;
<a id="L485" name="L485"></a> 485             <strong class="reserved">if</strong> (srcH &lt;= 0) <em class="brace">{</em>
<a id="L486" name="L486"></a> 486                 <strong class="reserved">return</strong>;
<a id="L487" name="L487"></a> 487             <em class="brace">}</em>
<a id="L488" name="L488"></a> 488         <em class="brace">}</em>
<a id="L489" name="L489"></a> 489         <strong class="reserved">if</strong> (srcX &lt; dstX) <em class="brace">{</em>
<a id="L490" name="L490"></a> 490             <strong class="reserved">int</strong> diff = dstX - srcX;
<a id="L491" name="L491"></a> 491             <strong class="reserved">if</strong> (diff &gt;= srcW) <em class="brace">{</em>
<a id="L492" name="L492"></a> 492                 <strong class="reserved">return</strong>;
<a id="L493" name="L493"></a> 493             <em class="brace">}</em>
<a id="L494" name="L494"></a> 494             srcOff += diff;
<a id="L495" name="L495"></a> 495             srcX += diff;
<a id="L496" name="L496"></a> 496             srcW -= diff;
<a id="L497" name="L497"></a> 497         <em class="brace">}</em>
<a id="L498" name="L498"></a> 498         <strong class="reserved">if</strong> (srcX + srcW &gt; dstX + dstW) <em class="brace">{</em>
<a id="L499" name="L499"></a> 499             srcW = (dstX + dstW) - srcX;
<a id="L500" name="L500"></a> 500             <strong class="reserved">if</strong> (srcW &lt;= 0) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501                 <strong class="reserved">return</strong>;
<a id="L502" name="L502"></a> 502             <em class="brace">}</em>
<a id="L503" name="L503"></a> 503         <em class="brace">}</em>
<a id="L504" name="L504"></a> 504         <strong class="reserved">int</strong> dstPtr = dstOff + (srcY - dstY) * dstScan + (srcX - dstX);
<a id="L505" name="L505"></a> 505         <strong class="reserved">if</strong> (intPixels == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L506" name="L506"></a> 506             <strong class="reserved">if</strong> (bytePixels == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L507" name="L507"></a> 507                 bytePixels = <strong class="reserved">new</strong> <strong class="reserved">byte</strong>[dstW * dstH];
<a id="L508" name="L508"></a> 508                 dstScan = dstW;
<a id="L509" name="L509"></a> 509                 dstOff = 0;
<a id="L510" name="L510"></a> 510                 imageModel = model;
<a id="L511" name="L511"></a> 511             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (imageModel != model) <em class="brace">{</em>
<a id="L512" name="L512"></a> 512                 <a href="../D/13464.html" title="Multiple defined in 2 places.">convertToRGB</a>();
<a id="L513" name="L513"></a> 513             <em class="brace">}</em>
<a id="L514" name="L514"></a> 514             <strong class="reserved">if</strong> (bytePixels != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L515" name="L515"></a> 515                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> h = srcH; h &gt; 0; h--) <em class="brace">{</em>
<a id="L516" name="L516"></a> 516                     <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(pixels, srcOff, bytePixels, dstPtr, srcW);
<a id="L517" name="L517"></a> 517                     srcOff += srcScan;
<a id="L518" name="L518"></a> 518                     dstPtr += dstScan;
<a id="L519" name="L519"></a> 519                 <em class="brace">}</em>
<a id="L520" name="L520"></a> 520             <em class="brace">}</em>
<a id="L521" name="L521"></a> 521         <em class="brace">}</em>
<a id="L522" name="L522"></a> 522         <strong class="reserved">if</strong> (intPixels != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L523" name="L523"></a> 523             <strong class="reserved">int</strong> dstRem = dstScan - srcW;
<a id="L524" name="L524"></a> 524             <strong class="reserved">int</strong> srcRem = srcScan - srcW;
<a id="L525" name="L525"></a> 525             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> h = srcH; h &gt; 0; h--) <em class="brace">{</em>
<a id="L526" name="L526"></a> 526                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> w = srcW; w &gt; 0; w--) <em class="brace">{</em>
<a id="L527" name="L527"></a> 527                     intPixels[dstPtr++] = model.<a href="../D/21814.html" title="Multiple defined in 13 places.">getRGB</a>(pixels[srcOff++]&amp;0xff);
<a id="L528" name="L528"></a> 528                 <em class="brace">}</em>
<a id="L529" name="L529"></a> 529                 srcOff += srcRem;
<a id="L530" name="L530"></a> 530                 dstPtr += dstRem;
<a id="L531" name="L531"></a> 531             <em class="brace">}</em>
<a id="L532" name="L532"></a> 532         <em class="brace">}</em>
<a id="L533" name="L533"></a> 533         <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.SOMEBITS;
<a id="L534" name="L534"></a> 534     <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<div class="comment">
      The setPixels method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param srcX the X coordinate of the upper-left corner
             of the area of pixels to be set
      @param srcY the Y coordinate of the upper-left corner
             of the area of pixels to be set
      @param srcW the width of the area of pixels
      @param srcH the height of the area of pixels
      @param model the specified <code>ColorModel</code>
      @param pixels the array of pixels
      @param srcOff the offset into the pixels array
      @param srcScan the distance from one row of pixels to the next
             in the pixels array
      @see #getPixels</p></div>
<a id="L558" name="L558"></a> 558     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27930.html" title="Multiple referred from 28 places.">setPixels</a>(<strong class="reserved">int</strong> srcX, <strong class="reserved">int</strong> srcY, <strong class="reserved">int</strong> srcW, <strong class="reserved">int</strong> srcH,
<a id="L559" name="L559"></a> 559                           <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a> model,
<a id="L560" name="L560"></a> 560                           <strong class="reserved">int</strong> pixels[], <strong class="reserved">int</strong> srcOff, <strong class="reserved">int</strong> srcScan) <em class="brace">{</em>
<a id="L561" name="L561"></a> 561         <strong class="reserved">if</strong> (srcY &lt; dstY) <em class="brace">{</em>
<a id="L562" name="L562"></a> 562             <strong class="reserved">int</strong> diff = dstY - srcY;
<a id="L563" name="L563"></a> 563             <strong class="reserved">if</strong> (diff &gt;= srcH) <em class="brace">{</em>
<a id="L564" name="L564"></a> 564                 <strong class="reserved">return</strong>;
<a id="L565" name="L565"></a> 565             <em class="brace">}</em>
<a id="L566" name="L566"></a> 566             srcOff += srcScan * diff;
<a id="L567" name="L567"></a> 567             srcY += diff;
<a id="L568" name="L568"></a> 568             srcH -= diff;
<a id="L569" name="L569"></a> 569         <em class="brace">}</em>
<a id="L570" name="L570"></a> 570         <strong class="reserved">if</strong> (srcY + srcH &gt; dstY + dstH) <em class="brace">{</em>
<a id="L571" name="L571"></a> 571             srcH = (dstY + dstH) - srcY;
<a id="L572" name="L572"></a> 572             <strong class="reserved">if</strong> (srcH &lt;= 0) <em class="brace">{</em>
<a id="L573" name="L573"></a> 573                 <strong class="reserved">return</strong>;
<a id="L574" name="L574"></a> 574             <em class="brace">}</em>
<a id="L575" name="L575"></a> 575         <em class="brace">}</em>
<a id="L576" name="L576"></a> 576         <strong class="reserved">if</strong> (srcX &lt; dstX) <em class="brace">{</em>
<a id="L577" name="L577"></a> 577             <strong class="reserved">int</strong> diff = dstX - srcX;
<a id="L578" name="L578"></a> 578             <strong class="reserved">if</strong> (diff &gt;= srcW) <em class="brace">{</em>
<a id="L579" name="L579"></a> 579                 <strong class="reserved">return</strong>;
<a id="L580" name="L580"></a> 580             <em class="brace">}</em>
<a id="L581" name="L581"></a> 581             srcOff += diff;
<a id="L582" name="L582"></a> 582             srcX += diff;
<a id="L583" name="L583"></a> 583             srcW -= diff;
<a id="L584" name="L584"></a> 584         <em class="brace">}</em>
<a id="L585" name="L585"></a> 585         <strong class="reserved">if</strong> (srcX + srcW &gt; dstX + dstW) <em class="brace">{</em>
<a id="L586" name="L586"></a> 586             srcW = (dstX + dstW) - srcX;
<a id="L587" name="L587"></a> 587             <strong class="reserved">if</strong> (srcW &lt;= 0) <em class="brace">{</em>
<a id="L588" name="L588"></a> 588                 <strong class="reserved">return</strong>;
<a id="L589" name="L589"></a> 589             <em class="brace">}</em>
<a id="L590" name="L590"></a> 590         <em class="brace">}</em>
<a id="L591" name="L591"></a> 591         <strong class="reserved">if</strong> (intPixels == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L592" name="L592"></a> 592             <strong class="reserved">if</strong> (bytePixels == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L593" name="L593"></a> 593                 intPixels = <strong class="reserved">new</strong> <strong class="reserved">int</strong>[dstW * dstH];
<a id="L594" name="L594"></a> 594                 dstScan = dstW;
<a id="L595" name="L595"></a> 595                 dstOff = 0;
<a id="L596" name="L596"></a> 596                 imageModel = model;
<a id="L597" name="L597"></a> 597             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L598" name="L598"></a> 598                 <a href="../D/13464.html" title="Multiple defined in 2 places.">convertToRGB</a>();
<a id="L599" name="L599"></a> 599             <em class="brace">}</em>
<a id="L600" name="L600"></a> 600         <em class="brace">}</em>
<a id="L601" name="L601"></a> 601         <strong class="reserved">int</strong> dstPtr = dstOff + (srcY - dstY) * dstScan + (srcX - dstX);
<a id="L602" name="L602"></a> 602         <strong class="reserved">if</strong> (imageModel == model) <em class="brace">{</em>
<a id="L603" name="L603"></a> 603             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> h = srcH; h &gt; 0; h--) <em class="brace">{</em>
<a id="L604" name="L604"></a> 604                 <a href="../S/1557.html#L59" title="Defined at 59 in src/java/lang/System.java.">System</a>.<a href="../S/1557.html#L493" title="Defined at 493 in src/java/lang/System.java.">arraycopy</a>(pixels, srcOff, intPixels, dstPtr, srcW);
<a id="L605" name="L605"></a> 605                 srcOff += srcScan;
<a id="L606" name="L606"></a> 606                 dstPtr += dstScan;
<a id="L607" name="L607"></a> 607             <em class="brace">}</em>
<a id="L608" name="L608"></a> 608         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L609" name="L609"></a> 609             <strong class="reserved">if</strong> (imageModel != <a href="../D/1637.html" title="Multiple defined in 2 places.">ColorModel</a>.<a href="../S/2256.html#L240" title="Defined at 240 in src/java/awt/image/ColorModel.java.">getRGBdefault</a>()) <em class="brace">{</em>
<a id="L610" name="L610"></a> 610                 <a href="../D/13464.html" title="Multiple defined in 2 places.">convertToRGB</a>();
<a id="L611" name="L611"></a> 611             <em class="brace">}</em>
<a id="L612" name="L612"></a> 612             <strong class="reserved">int</strong> dstRem = dstScan - srcW;
<a id="L613" name="L613"></a> 613             <strong class="reserved">int</strong> srcRem = srcScan - srcW;
<a id="L614" name="L614"></a> 614             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> h = srcH; h &gt; 0; h--) <em class="brace">{</em>
<a id="L615" name="L615"></a> 615                 <strong class="reserved">for</strong> (<strong class="reserved">int</strong> w = srcW; w &gt; 0; w--) <em class="brace">{</em>
<a id="L616" name="L616"></a> 616                     intPixels[dstPtr++] = model.<a href="../D/21814.html" title="Multiple defined in 13 places.">getRGB</a>(pixels[srcOff++]);
<a id="L617" name="L617"></a> 617                 <em class="brace">}</em>
<a id="L618" name="L618"></a> 618                 srcOff += srcRem;
<a id="L619" name="L619"></a> 619                 dstPtr += dstRem;
<a id="L620" name="L620"></a> 620             <em class="brace">}</em>
<a id="L621" name="L621"></a> 621         <em class="brace">}</em>
<a id="L622" name="L622"></a> 622         <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.SOMEBITS;
<a id="L623" name="L623"></a> 623     <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<div class="comment">
      The imageComplete method is part of the ImageConsumer API which
      this class must implement to retrieve the pixels.
      <p>
      Note: This method is intended to be called by the ImageProducer
      of the Image whose pixels are being grabbed.  Developers using
      this class to retrieve pixels from an image should avoid calling
      this method directly since that operation could result in problems
      with retrieving the requested pixels.
      @param status the status of image loading</p></div>
<a id="L636" name="L636"></a> 636     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">void</strong> <a href="../R/20398.html" title="Multiple referred from 14 places.">imageComplete</a>(<strong class="reserved">int</strong> <a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>) <em class="brace">{</em>
<a id="L637" name="L637"></a> 637         grabbing = <strong class="reserved">false</strong>;
<a id="L638" name="L638"></a> 638         <strong class="reserved">switch</strong> (<a href="../S/2277.html#L669" title="Defined at 669 in src/java/awt/image/PixelGrabber.java.">status</a>) <em class="brace">{</em>
<a id="L639" name="L639"></a> 639         <strong class="reserved">default</strong>:
<a id="L640" name="L640"></a> 640         <strong class="reserved">case</strong> IMAGEERROR:
<a id="L641" name="L641"></a> 641             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ERROR | <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ABORT;
<a id="L642" name="L642"></a> 642             <strong class="reserved">break</strong>;
<a id="L643" name="L643"></a> 643         <strong class="reserved">case</strong> IMAGEABORTED:
<a id="L644" name="L644"></a> 644             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ABORT;
<a id="L645" name="L645"></a> 645             <strong class="reserved">break</strong>;
<a id="L646" name="L646"></a> 646         <strong class="reserved">case</strong> STATICIMAGEDONE:
<a id="L647" name="L647"></a> 647             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.ALLBITS;
<a id="L648" name="L648"></a> 648             <strong class="reserved">break</strong>;
<a id="L649" name="L649"></a> 649         <strong class="reserved">case</strong> SINGLEFRAMEDONE:
<a id="L650" name="L650"></a> 650             <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a> |= <a href="../S/2281.html#L37" title="Defined at 37 in src/java/awt/image/ImageObserver.java.">ImageObserver</a>.FRAMEBITS;
<a id="L651" name="L651"></a> 651             <strong class="reserved">break</strong>;
<a id="L652" name="L652"></a> 652         <em class="brace">}</em>
<a id="L653" name="L653"></a> 653         producer.<a href="../D/30748.html" title="Multiple defined in 4 places.">removeConsumer</a>(<strong class="reserved">this</strong>);
<a id="L654" name="L654"></a> 654         <a href="../S/1724.html#L295" title="Defined at 295 in src/java/lang/Object.java.">notifyAll</a>();
<a id="L655" name="L655"></a> 655     <em class="brace">}</em>
<a id="L656" name="L656"></a> 656 
<div class="comment">
      Returns the status of the pixels.  The ImageObserver flags
      representing the available pixel information are returned.
      This method and {@link #getStatus() getStatus} have the
      same implementation, but <code>getStatus</code> is the
      preferred method because it conforms to the convention of
      naming information-retrieval methods with the form
      "getXXX".
      @return the bitwise OR of all relevant ImageObserver flags
      @see ImageObserver
      @see #getStatus()</div>
<a id="L669" name="L669"></a> 669     <strong class="reserved">public</strong> <strong class="reserved">synchronized</strong> <strong class="reserved">int</strong> <a href="../R/28893.html" title="Multiple referred from 439 places.">status</a>() <em class="brace">{</em>
<a id="L670" name="L670"></a> 670         <strong class="reserved">return</strong> <a href="../D/16441.html" title="Multiple defined in 7 places.">flags</a>;
<a id="L671" name="L671"></a> 671     <em class="brace">}</em>
<a id="L672" name="L672"></a> 672 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L198">[^]</a><a href="#L669">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
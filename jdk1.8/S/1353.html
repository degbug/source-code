<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/java/security/Permissions.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L124">[^]</a><a href="#L587">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L124" title="Defined at 124.">add</a></li>
<li><a href="#L173" title="Defined at 173.">implies</a></li>
<li><a href="#L198" title="Defined at 198.">elements</a></li>
<li><a href="#L238" title="Defined at 238.">getPermissionCollection</a></li>
<li><a href="#L278" title="Defined at 278.">getUnresolvedPermissions</a></li>
<li><a href="#L359" title="Defined at 359.">writeObject</a></li>
<li><a href="#L381" title="Defined at 381.">readObject</a></li>
<li><a href="#L420" title="Defined at 420.">hasMoreElements</a></li>
<li><a href="#L440" title="Defined at 440.">nextElement</a></li>
<li><a href="#L453" title="Defined at 453.">getNextEnumWithMore</a></li>
<li><a href="#L500" title="Defined at 500.">add</a></li>
<li><a href="#L516" title="Defined at 516.">implies</a></li>
<li><a href="#L541" title="Defined at 541.">elements</a></li>
<li><a href="#L567" title="Defined at 567.">writeObject</a></li>
<li><a href="#L587" title="Defined at 587.">readObject</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 
<a id="L26" name="L26"></a>  26 <strong class="reserved">package</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security;
<a id="L27" name="L27"></a>  27 
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> java.util.Enumeration;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> java.util.Hashtable;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> java.util.NoSuchElementException;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> java.util.Map;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> java.util.HashMap;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> java.util.List;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> java.util.Iterator;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> java.util.Collections;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> java.io.Serializable;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> java.io.ObjectStreamField;
<a id="L38" name="L38"></a>  38 <strong class="reserved">import</strong> java.io.ObjectOutputStream;
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> java.io.ObjectInputStream;
<a id="L40" name="L40"></a>  40 <strong class="reserved">import</strong> java.io.IOException;
<a id="L41" name="L41"></a>  41 
<a id="L42" name="L42"></a>  42 
<div class="comment">
  This class represents a heterogeneous collection of Permissions. That is,
  it contains different types of Permission objects, organized into
  PermissionCollections. For example, if any
  <code>java.io.FilePermission</code> objects are added to an instance of
  this class, they are all stored in a single
  PermissionCollection. It is the PermissionCollection returned by a call to
  the <code>newPermissionCollection</code> method in the FilePermission class.
  Similarly, any <code>java.lang.RuntimePermission</code> objects are
  stored in the PermissionCollection returned by a call to the
  <code>newPermissionCollection</code> method in the
  RuntimePermission class. Thus, this class represents a collection of
  PermissionCollections.
  <p>When the <code>add</code> method is called to add a Permission, the
  Permission is stored in the appropriate PermissionCollection. If no such
  collection exists yet, the Permission object's class is determined and the
  <code>newPermissionCollection</code> method is called on that class to create
  the PermissionCollection and add it to the Permissions object. If
  <code>newPermissionCollection</code> returns null, then a default
  PermissionCollection that uses a hashtable will be created and used. Each
  hashtable entry stores a Permission object as both the key and the value.
  </p><p> Enumerations returned via the <code>elements</code> method are
  not <em>fail-fast</em>.  Modifications to a collection should not be
  performed while enumerating over that collection.
  @see Permission
  @see PermissionCollection
  @see AllPermission
  @author Marianne Mueller
  @author Roland Schemers
  @serial exclude</p></div>
<a id="L80" name="L80"></a>  80 
<a id="L81" name="L81"></a>  81 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6098.html" title="Multiple referred from 26 places.">Permissions</a> <strong class="reserved">extends</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>
<a id="L82" name="L82"></a>  82 <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>
<a id="L83" name="L83"></a>  83 <em class="brace">{</em>
<div class="comment">
      Key is permissions Class, value is PermissionCollection for that class.
      Not serialized; see serialization section at end of class.</div>
<a id="L88" name="L88"></a>  88     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt; permsMap;
<a id="L89" name="L89"></a>  89 
<a id="L90" name="L90"></a>  90     <em class="comment">// optimization. keep track of whether unresolved permissions need to be</em>
<a id="L91" name="L91"></a>  91     <em class="comment">// checked</em>
<a id="L92" name="L92"></a>  92     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <strong class="reserved">boolean</strong> hasUnresolved = <strong class="reserved">false</strong>;
<a id="L93" name="L93"></a>  93 
<a id="L94" name="L94"></a>  94     <em class="comment">// optimization. keep track of the AllPermission collection</em>
<a id="L95" name="L95"></a>  95     <em class="comment">// - package private for ProtectionDomain optimization</em>
<a id="L96" name="L96"></a>  96     <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> allPermission;
<a id="L97" name="L97"></a>  97 
<div class="comment">
      Creates a new Permissions object containing no PermissionCollections.</div>
<a id="L101" name="L101"></a> 101     <strong class="reserved">public</strong> Permissions() <em class="brace">{</em>
<a id="L102" name="L102"></a> 102         permsMap = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt;(11);
<a id="L103" name="L103"></a> 103         allPermission = <strong class="reserved">null</strong>;
<a id="L104" name="L104"></a> 104     <em class="brace">}</em>
<a id="L105" name="L105"></a> 105 
<div class="comment">
      Adds a permission object to the PermissionCollection for the class the
      permission belongs to. For example, if <i>permission</i> is a
      FilePermission, it is added to the FilePermissionCollection stored
      in this Permissions object.
      This method creates
      a new PermissionCollection object (and adds the permission to it)
      if an appropriate collection does not yet exist. <p>
      @param permission the Permission object to add.
      @exception SecurityException if this Permissions object is
      marked as readonly.
      @see PermissionCollection#isReadOnly()</p></div>
<a id="L123" name="L123"></a> 123 
<a id="L124" name="L124"></a> 124     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L125" name="L125"></a> 125         <strong class="reserved">if</strong> (<a href="../D/26131.html" title="Multiple defined in 90 places.">isReadOnly</a>())
<a id="L126" name="L126"></a> 126             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1580.html#L34" title="Defined at 34 in src/java/lang/SecurityException.java.">SecurityException</a>(
<a id="L127" name="L127"></a> 127               "attempt to add a Permission to a readonly Permissions object");
<a id="L128" name="L128"></a> 128 
<a id="L129" name="L129"></a> 129         <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> pc;
<a id="L130" name="L130"></a> 130 
<a id="L131" name="L131"></a> 131         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L132" name="L132"></a> 132             pc = <a href="../S/1353.html#L238" title="Defined at 238 in src/java/security/Permissions.java.">getPermissionCollection</a>(permission, <strong class="reserved">true</strong>);
<a id="L133" name="L133"></a> 133             pc.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(permission);
<a id="L134" name="L134"></a> 134         <em class="brace">}</em>
<a id="L135" name="L135"></a> 135 
<a id="L136" name="L136"></a> 136         <em class="comment">// No sync; staleness -&gt; optimizations delayed, which is OK</em>
<a id="L137" name="L137"></a> 137         <strong class="reserved">if</strong> (permission <strong class="reserved">instanceof</strong> <a href="../S/1336.html#L58" title="Defined at 58 in src/java/security/AllPermission.java.">AllPermission</a>) <em class="brace">{</em>
<a id="L138" name="L138"></a> 138             allPermission = pc;
<a id="L139" name="L139"></a> 139         <em class="brace">}</em>
<a id="L140" name="L140"></a> 140         <strong class="reserved">if</strong> (permission <strong class="reserved">instanceof</strong> <a href="../S/1193.html#L101" title="Defined at 101 in src/java/security/UnresolvedPermission.java.">UnresolvedPermission</a>) <em class="brace">{</em>
<a id="L141" name="L141"></a> 141             hasUnresolved = <strong class="reserved">true</strong>;
<a id="L142" name="L142"></a> 142         <em class="brace">}</em>
<a id="L143" name="L143"></a> 143     <em class="brace">}</em>
<a id="L144" name="L144"></a> 144 
<div class="comment">
      Checks to see if this object's PermissionCollection for permissions of
      the specified permission's class implies the permissions
      expressed in the <i>permission</i> object. Returns true if the
      combination of permissions in the appropriate PermissionCollection
      (e.g., a FilePermissionCollection for a FilePermission) together
      imply the specified permission.
      <p>For example, suppose there is a FilePermissionCollection in this
      Permissions object, and it contains one FilePermission that specifies
      "read" access for  all files in all subdirectories of the "/tmp"
      directory, and another FilePermission that specifies "write" access
      for all files in the "/tmp/scratch/foo" directory.
      Then if the <code>implies</code> method
      is called with a permission specifying both "read" and "write" access
      to files in the "/tmp/scratch/foo" directory, <code>true</code> is
      returned.
      </p><p>Additionally, if this PermissionCollection contains the
      AllPermission, this method will always return true.
      </p><p>
      @param permission the Permission object to check.
      @return true if "permission" is implied by the permissions in the
      PermissionCollection it
      belongs to, false if not.</p></div>
<a id="L172" name="L172"></a> 172 
<a id="L173" name="L173"></a> 173     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20435.html" title="Multiple referred from 23 places.">implies</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L174" name="L174"></a> 174         <em class="comment">// No sync; staleness -&gt; skip optimization, which is OK</em>
<a id="L175" name="L175"></a> 175         <strong class="reserved">if</strong> (allPermission != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L176" name="L176"></a> 176             <strong class="reserved">return</strong> <strong class="reserved">true</strong>; <em class="comment">// AllPermission has already been added</em>
<a id="L177" name="L177"></a> 177         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L178" name="L178"></a> 178             <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L179" name="L179"></a> 179                 <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> pc = <a href="../S/1353.html#L238" title="Defined at 238 in src/java/security/Permissions.java.">getPermissionCollection</a>(permission,
<a id="L180" name="L180"></a> 180                     <strong class="reserved">false</strong>);
<a id="L181" name="L181"></a> 181                 <strong class="reserved">if</strong> (pc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L182" name="L182"></a> 182                     <strong class="reserved">return</strong> pc.<a href="../D/24381.html" title="Multiple defined in 34 places.">implies</a>(permission);
<a id="L183" name="L183"></a> 183                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L184" name="L184"></a> 184                     <em class="comment">// none found</em>
<a id="L185" name="L185"></a> 185                     <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L186" name="L186"></a> 186                 <em class="brace">}</em>
<a id="L187" name="L187"></a> 187             <em class="brace">}</em>
<a id="L188" name="L188"></a> 188         <em class="brace">}</em>
<a id="L189" name="L189"></a> 189     <em class="brace">}</em>
<a id="L190" name="L190"></a> 190 
<div class="comment">
      Returns an enumeration of all the Permission objects in all the
      PermissionCollections in this Permissions object.
      @return an enumeration of all the Permissions.</div>
<a id="L197" name="L197"></a> 197 
<a id="L198" name="L198"></a> 198     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../R/13650.html" title="Multiple referred from 679 places.">elements</a>() <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <em class="comment">// go through each Permissions in the hash table</em>
<a id="L200" name="L200"></a> 200         <em class="comment">// and call their elements() function.</em>
<a id="L201" name="L201"></a> 201 
<a id="L202" name="L202"></a> 202         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L203" name="L203"></a> 203             <strong class="reserved">return</strong> <strong class="reserved">new</strong> <a href="../S/1353.html#L407" title="Defined at 407 in src/java/security/Permissions.java.">PermissionsEnumerator</a>(permsMap.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>().<a href="../D/26592.html" title="Multiple defined in 126 places.">iterator</a>());
<a id="L204" name="L204"></a> 204         <em class="brace">}</em>
<a id="L205" name="L205"></a> 205     <em class="brace">}</em>
<a id="L206" name="L206"></a> 206 
<div class="comment">
      Gets the PermissionCollection in this Permissions object for
      permissions whose type is the same as that of <i>p</i>.
      For example, if <i>p</i> is a FilePermission,
      the FilePermissionCollection
      stored in this Permissions object will be returned.
      If createEmpty is true,
      this method creates a new PermissionCollection object for the specified
      type of permission objects if one does not yet exist.
      To do so, it first calls the <code>newPermissionCollection</code> method
      on <i>p</i>.  Subclasses of class Permission
      override that method if they need to store their permissions in a
      particular PermissionCollection object in order to provide the
      correct semantics when the <code>PermissionCollection.implies</code>
      method is called.
      If the call returns a PermissionCollection, that collection is stored
      in this Permissions object. If the call returns null and createEmpty
      is true, then
      this method instantiates and stores a default PermissionCollection
      that uses a hashtable to store its permission objects.
      createEmpty is ignored when creating empty PermissionCollection
      for unresolved permissions because of the overhead of determining the
      PermissionCollection to use.
      createEmpty should be set to false when this method is invoked from
      implies() because it incurs the additional overhead of creating and
      adding an empty PermissionCollection that will just return false.
      It should be set to true when invoked from add().</div>
<a id="L238" name="L238"></a> 238     <strong class="reserved">private</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> <a href="../R/18334.html" title="Multiple referred from 2 places.">getPermissionCollection</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> p,
<a id="L239" name="L239"></a> 239         <strong class="reserved">boolean</strong> <a href="../S/5016.html#L146" title="Defined at 146 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/Token.java.">createEmpty</a>) <em class="brace">{</em>
<a id="L240" name="L240"></a> 240         <a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt; <a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a> = p.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>();
<a id="L241" name="L241"></a> 241 
<a id="L242" name="L242"></a> 242         <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> pc = permsMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>);
<a id="L243" name="L243"></a> 243 
<a id="L244" name="L244"></a> 244         <strong class="reserved">if</strong> (!hasUnresolved &amp;&amp; !<a href="../S/5016.html#L146" title="Defined at 146 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/Token.java.">createEmpty</a>) <em class="brace">{</em>
<a id="L245" name="L245"></a> 245             <strong class="reserved">return</strong> pc;
<a id="L246" name="L246"></a> 246         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (pc == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L247" name="L247"></a> 247 
<a id="L248" name="L248"></a> 248             <em class="comment">// Check for unresolved permissions</em>
<a id="L249" name="L249"></a> 249             pc = (hasUnresolved ? <a href="../D/23436.html" title="Multiple defined in 2 places.">getUnresolvedPermissions</a>(p) : <strong class="reserved">null</strong>);
<a id="L250" name="L250"></a> 250 
<a id="L251" name="L251"></a> 251             <em class="comment">// if still null, create a new collection</em>
<a id="L252" name="L252"></a> 252             <strong class="reserved">if</strong> (pc == <strong class="reserved">null</strong> &amp;&amp; <a href="../S/5016.html#L146" title="Defined at 146 in src/com/sun/org/apache/xerces/internal/impl/xpath/regex/Token.java.">createEmpty</a>) <em class="brace">{</em>
<a id="L253" name="L253"></a> 253 
<a id="L254" name="L254"></a> 254                 pc = p.<a href="../D/28053.html" title="Multiple defined in 11 places.">newPermissionCollection</a>();
<a id="L255" name="L255"></a> 255 
<a id="L256" name="L256"></a> 256                 <em class="comment">// still no PermissionCollection?</em>
<a id="L257" name="L257"></a> 257                 <em class="comment">// We'll give them a PermissionsHash.</em>
<a id="L258" name="L258"></a> 258                 <strong class="reserved">if</strong> (pc == <strong class="reserved">null</strong>)
<a id="L259" name="L259"></a> 259                     pc = <strong class="reserved">new</strong> <a href="../S/1353.html#L477" title="Defined at 477 in src/java/security/Permissions.java.">PermissionsHash</a>();
<a id="L260" name="L260"></a> 260             <em class="brace">}</em>
<a id="L261" name="L261"></a> 261 
<a id="L262" name="L262"></a> 262             <strong class="reserved">if</strong> (pc != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L263" name="L263"></a> 263                 permsMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(<a href="../S/986.html#L3167" title="Defined at 3167 in src/java/util/regex/Pattern.java.">c</a>, pc);
<a id="L264" name="L264"></a> 264             <em class="brace">}</em>
<a id="L265" name="L265"></a> 265         <em class="brace">}</em>
<a id="L266" name="L266"></a> 266         <strong class="reserved">return</strong> pc;
<a id="L267" name="L267"></a> 267     <em class="brace">}</em>
<a id="L268" name="L268"></a> 268 
<div class="comment">
      Resolves any unresolved permissions of type p.
      @param p the type of unresolved permission to resolve
      @return PermissionCollection containing the unresolved permissions,
       or null if there were no unresolved permissions of type p.</div>
<a id="L278" name="L278"></a> 278     <strong class="reserved">private</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> <a href="../R/19692.html" title="Multiple referred from 2 places.">getUnresolvedPermissions</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> p)
<a id="L279" name="L279"></a> 279     <em class="brace">{</em>
<a id="L280" name="L280"></a> 280         <em class="comment">// Called from within synchronized method so permsMap doesn't need lock</em>
<a id="L281" name="L281"></a> 281 
<a id="L282" name="L282"></a> 282         <a href="../S/1214.html#L48" title="Defined at 48 in src/java/security/UnresolvedPermissionCollection.java.">UnresolvedPermissionCollection</a> uc =
<a id="L283" name="L283"></a> 283         (<a href="../S/1214.html#L48" title="Defined at 48 in src/java/security/UnresolvedPermissionCollection.java.">UnresolvedPermissionCollection</a>) permsMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/1193.html#L101" title="Defined at 101 in src/java/security/UnresolvedPermission.java.">UnresolvedPermission</a>.<strong class="reserved">class</strong>);
<a id="L284" name="L284"></a> 284 
<a id="L285" name="L285"></a> 285         <em class="comment">// we have no unresolved permissions if uc is null</em>
<a id="L286" name="L286"></a> 286         <strong class="reserved">if</strong> (uc == <strong class="reserved">null</strong>)
<a id="L287" name="L287"></a> 287             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L288" name="L288"></a> 288 
<a id="L289" name="L289"></a> 289         <a href="../D/5090.html" title="Multiple defined in 5 places.">List</a>&lt;<a href="../S/1193.html#L101" title="Defined at 101 in src/java/security/UnresolvedPermission.java.">UnresolvedPermission</a>&gt; unresolvedPerms =
<a id="L290" name="L290"></a> 290                                         uc.<a href="../D/23436.html" title="Multiple defined in 2 places.">getUnresolvedPermissions</a>(p);
<a id="L291" name="L291"></a> 291 
<a id="L292" name="L292"></a> 292         <em class="comment">// we have no unresolved permissions of this type if unresolvedPerms is null</em>
<a id="L293" name="L293"></a> 293         <strong class="reserved">if</strong> (unresolvedPerms == <strong class="reserved">null</strong>)
<a id="L294" name="L294"></a> 294             <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L295" name="L295"></a> 295 
<a id="L296" name="L296"></a> 296         <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.cert.<a href="../D/1346.html" title="Multiple defined in 3 places.">Certificate</a> certs[] = <strong class="reserved">null</strong>;
<a id="L297" name="L297"></a> 297 
<a id="L298" name="L298"></a> 298         <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> signers[] = p.<a href="../D/17675.html" title="Multiple defined in 6 places.">getClass</a>().<a href="../S/1722.html#L968" title="Defined at 968 in src/java/lang/Class.java.">getSigners</a>();
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300         <strong class="reserved">int</strong> n = 0;
<a id="L301" name="L301"></a> 301         <strong class="reserved">if</strong> (signers != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L302" name="L302"></a> 302             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j=0; j &lt; signers.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; j++) <em class="brace">{</em>
<a id="L303" name="L303"></a> 303                 <strong class="reserved">if</strong> (signers[j] <strong class="reserved">instanceof</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.cert.<a href="../D/1346.html" title="Multiple defined in 3 places.">Certificate</a>) <em class="brace">{</em>
<a id="L304" name="L304"></a> 304                     n++;
<a id="L305" name="L305"></a> 305                 <em class="brace">}</em>
<a id="L306" name="L306"></a> 306             <em class="brace">}</em>
<a id="L307" name="L307"></a> 307             certs = <strong class="reserved">new</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.cert.<a href="../D/1346.html" title="Multiple defined in 3 places.">Certificate</a>[n];
<a id="L308" name="L308"></a> 308             n = 0;
<a id="L309" name="L309"></a> 309             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> j=0; j &lt; signers.<a href="../D/26813.html" title="Multiple defined in 43 places.">length</a>; j++) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310                 <strong class="reserved">if</strong> (signers[j] <strong class="reserved">instanceof</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.cert.<a href="../D/1346.html" title="Multiple defined in 3 places.">Certificate</a>) <em class="brace">{</em>
<a id="L311" name="L311"></a> 311                     certs[n++] = (<a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.security.cert.<a href="../D/1346.html" title="Multiple defined in 3 places.">Certificate</a>)signers[j];
<a id="L312" name="L312"></a> 312                 <em class="brace">}</em>
<a id="L313" name="L313"></a> 313             <em class="brace">}</em>
<a id="L314" name="L314"></a> 314         <em class="brace">}</em>
<a id="L315" name="L315"></a> 315 
<a id="L316" name="L316"></a> 316         <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> pc = <strong class="reserved">null</strong>;
<a id="L317" name="L317"></a> 317         <strong class="reserved">synchronized</strong> (unresolvedPerms) <em class="brace">{</em>
<a id="L318" name="L318"></a> 318             <strong class="reserved">int</strong> len = unresolvedPerms.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L319" name="L319"></a> 319             <strong class="reserved">for</strong> (<strong class="reserved">int</strong> i = 0; i &lt; len; i++) <em class="brace">{</em>
<a id="L320" name="L320"></a> 320                 <a href="../S/1193.html#L101" title="Defined at 101 in src/java/security/UnresolvedPermission.java.">UnresolvedPermission</a> up = unresolvedPerms.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(i);
<a id="L321" name="L321"></a> 321                 <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> perm = up.<a href="../D/31237.html" title="Multiple defined in 38 places.">resolve</a>(p, certs);
<a id="L322" name="L322"></a> 322                 <strong class="reserved">if</strong> (perm != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L323" name="L323"></a> 323                     <strong class="reserved">if</strong> (pc == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L324" name="L324"></a> 324                         pc = p.<a href="../D/28053.html" title="Multiple defined in 11 places.">newPermissionCollection</a>();
<a id="L325" name="L325"></a> 325                         <strong class="reserved">if</strong> (pc == <strong class="reserved">null</strong>)
<a id="L326" name="L326"></a> 326                             pc = <strong class="reserved">new</strong> <a href="../S/1353.html#L477" title="Defined at 477 in src/java/security/Permissions.java.">PermissionsHash</a>();
<a id="L327" name="L327"></a> 327                     <em class="brace">}</em>
<a id="L328" name="L328"></a> 328                     pc.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>(perm);
<a id="L329" name="L329"></a> 329                 <em class="brace">}</em>
<a id="L330" name="L330"></a> 330             <em class="brace">}</em>
<a id="L331" name="L331"></a> 331         <em class="brace">}</em>
<a id="L332" name="L332"></a> 332         <strong class="reserved">return</strong> pc;
<a id="L333" name="L333"></a> 333     <em class="brace">}</em>
<a id="L334" name="L334"></a> 334 
<a id="L335" name="L335"></a> 335     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 4858622370623524688L;
<a id="L336" name="L336"></a> 336 
<a id="L337" name="L337"></a> 337     <em class="comment">// Need to maintain serialization interoperability with earlier releases,</em>
<a id="L338" name="L338"></a> 338     <em class="comment">// which had the serializable field:</em>
<a id="L339" name="L339"></a> 339     <em class="comment">// private Hashtable perms;</em>
<a id="L340" name="L340"></a> 340 
<div class="comment">
      @serialField perms java.util.Hashtable
          A table of the Permission classes and PermissionCollections.
      @serialField allPermission java.security.PermissionCollection</div>
<a id="L346" name="L346"></a> 346     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] serialPersistentFields = <em class="brace">{</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("perms", <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>.<strong class="reserved">class</strong>),
<a id="L348" name="L348"></a> 348         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("allPermission", <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>.<strong class="reserved">class</strong>),
<a id="L349" name="L349"></a> 349     <em class="brace">}</em>;
<a id="L350" name="L350"></a> 350 
<div class="comment">
      @serialData Default fields.</div>
<div class="comment">
      Writes the contents of the permsMap field out as a Hashtable for
      serialization compatibility with earlier releases. allPermission
      unchanged.</div>
<a id="L359" name="L359"></a> 359     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L360" name="L360"></a> 360         <em class="comment">// Don't call out.defaultWriteObject()</em>
<a id="L361" name="L361"></a> 361 
<a id="L362" name="L362"></a> 362         <em class="comment">// Copy perms into a Hashtable</em>
<a id="L363" name="L363"></a> 363         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt; perms =
<a id="L364" name="L364"></a> 364             <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;&gt;(permsMap.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2); <em class="comment">// no sync; estimate</em>
<a id="L365" name="L365"></a> 365         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L366" name="L366"></a> 366             perms.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(permsMap);
<a id="L367" name="L367"></a> 367         <em class="brace">}</em>
<a id="L368" name="L368"></a> 368 
<a id="L369" name="L369"></a> 369         <em class="comment">// Write out serializable fields</em>
<a id="L370" name="L370"></a> 370         <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<a href="../S/1381.html#L878" title="Defined at 878 in src/java/io/ObjectOutputStream.java.">PutField</a> pfields = <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>();
<a id="L371" name="L371"></a> 371 
<a id="L372" name="L372"></a> 372         pfields.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("allPermission", allPermission); <em class="comment">// no sync; staleness OK</em>
<a id="L373" name="L373"></a> 373         pfields.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("perms", perms);
<a id="L374" name="L374"></a> 374         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37065.html" title="Multiple defined in 3 places.">writeFields</a>();
<a id="L375" name="L375"></a> 375     <em class="brace">}</em>
<a id="L376" name="L376"></a> 376 
<div class="comment">
      Reads in a Hashtable of Class/PermissionCollections and saves them in the
      permsMap field. Reads in allPermission.</div>
<a id="L381" name="L381"></a> 381     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>,
<a id="L382" name="L382"></a> 382     <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L383" name="L383"></a> 383         <em class="comment">// Don't call defaultReadObject()</em>
<a id="L384" name="L384"></a> 384 
<a id="L385" name="L385"></a> 385         <em class="comment">// Read in serialized fields</em>
<a id="L386" name="L386"></a> 386         <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<a href="../S/1378.html#L1079" title="Defined at 1079 in src/java/io/ObjectInputStream.java.">GetField</a> gfields = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30181.html" title="Multiple defined in 6 places.">readFields</a>();
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388         <em class="comment">// Get allPermission</em>
<a id="L389" name="L389"></a> 389         allPermission = (<a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>) gfields.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("allPermission", <strong class="reserved">null</strong>);
<a id="L390" name="L390"></a> 390 
<a id="L391" name="L391"></a> 391         <em class="comment">// Get permissions</em>
<a id="L392" name="L392"></a> 392         <em class="comment">// writeObject writes a Hashtable&lt;Class&lt;?&gt;, PermissionCollection&gt; for</em>
<a id="L393" name="L393"></a> 393         <em class="comment">// the perms key, so this cast is safe, unless the data is corrupt.</em>
<a id="L394" name="L394"></a> 394         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L395" name="L395"></a> 395         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt; perms =
<a id="L396" name="L396"></a> 396             (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt;)gfields.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("perms", <strong class="reserved">null</strong>);
<a id="L397" name="L397"></a> 397         permsMap = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../S/1722.html#L119" title="Defined at 119 in src/java/lang/Class.java.">Class</a>&lt;?&gt;, <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt;(perms.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2);
<a id="L398" name="L398"></a> 398         permsMap.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(perms);
<a id="L399" name="L399"></a> 399 
<a id="L400" name="L400"></a> 400         <em class="comment">// Set hasUnresolved</em>
<a id="L401" name="L401"></a> 401         <a href="../S/1214.html#L48" title="Defined at 48 in src/java/security/UnresolvedPermissionCollection.java.">UnresolvedPermissionCollection</a> uc =
<a id="L402" name="L402"></a> 402         (<a href="../S/1214.html#L48" title="Defined at 48 in src/java/security/UnresolvedPermissionCollection.java.">UnresolvedPermissionCollection</a>) permsMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(<a href="../S/1193.html#L101" title="Defined at 101 in src/java/security/UnresolvedPermission.java.">UnresolvedPermission</a>.<strong class="reserved">class</strong>);
<a id="L403" name="L403"></a> 403         hasUnresolved = (uc != <strong class="reserved">null</strong> &amp;&amp; uc.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>().<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>());
<a id="L404" name="L404"></a> 404     <em class="brace">}</em>
<a id="L405" name="L405"></a> 405 <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<a id="L407" name="L407"></a> 407 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../S/1353.html#L203" title="Referred from 203 in src/java/security/Permissions.java.">PermissionsEnumerator</a> <strong class="reserved">implements</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <em class="brace">{</em>
<a id="L408" name="L408"></a> 408 
<a id="L409" name="L409"></a> 409     <em class="comment">// all the perms</em>
<a id="L410" name="L410"></a> 410     <strong class="reserved">private</strong> <a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt; perms;
<a id="L411" name="L411"></a> 411     <em class="comment">// the current set</em>
<a id="L412" name="L412"></a> 412     <strong class="reserved">private</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; permset;
<a id="L413" name="L413"></a> 413 
<a id="L414" name="L414"></a> 414     PermissionsEnumerator(<a href="../D/4461.html" title="Multiple defined in 3 places.">Iterator</a>&lt;<a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>&gt; e) <em class="brace">{</em>
<a id="L415" name="L415"></a> 415         perms = e;
<a id="L416" name="L416"></a> 416         permset = <a href="../S/1353.html#L453" title="Defined at 453 in src/java/security/Permissions.java.">getNextEnumWithMore</a>();
<a id="L417" name="L417"></a> 417     <em class="brace">}</em>
<a id="L418" name="L418"></a> 418 
<a id="L419" name="L419"></a> 419     <em class="comment">// No need to synchronize; caller should sync on object as required</em>
<a id="L420" name="L420"></a> 420     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20227.html" title="Multiple referred from 465 places.">hasMoreElements</a>() <em class="brace">{</em>
<a id="L421" name="L421"></a> 421         <em class="comment">// if we enter with permissionimpl null, we know</em>
<a id="L422" name="L422"></a> 422         <em class="comment">// there are no more left.</em>
<a id="L423" name="L423"></a> 423 
<a id="L424" name="L424"></a> 424         <strong class="reserved">if</strong> (permset == <strong class="reserved">null</strong>)
<a id="L425" name="L425"></a> 425             <strong class="reserved">return</strong>  <strong class="reserved">false</strong>;
<a id="L426" name="L426"></a> 426 
<a id="L427" name="L427"></a> 427         <em class="comment">// try to see if there are any left in the current one</em>
<a id="L428" name="L428"></a> 428 
<a id="L429" name="L429"></a> 429         <strong class="reserved">if</strong> (permset.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>())
<a id="L430" name="L430"></a> 430             <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L431" name="L431"></a> 431 
<a id="L432" name="L432"></a> 432         <em class="comment">// get the next one that has something in it...</em>
<a id="L433" name="L433"></a> 433         permset = <a href="../S/1353.html#L453" title="Defined at 453 in src/java/security/Permissions.java.">getNextEnumWithMore</a>();
<a id="L434" name="L434"></a> 434 
<a id="L435" name="L435"></a> 435         <em class="comment">// if it is null, we are done!</em>
<a id="L436" name="L436"></a> 436         <strong class="reserved">return</strong> (permset != <strong class="reserved">null</strong>);
<a id="L437" name="L437"></a> 437     <em class="brace">}</em>
<a id="L438" name="L438"></a> 438 
<a id="L439" name="L439"></a> 439     <em class="comment">// No need to synchronize; caller should sync on object as required</em>
<a id="L440" name="L440"></a> 440     <strong class="reserved">public</strong> <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> <a href="../R/23661.html" title="Multiple referred from 479 places.">nextElement</a>() <em class="brace">{</em>
<a id="L441" name="L441"></a> 441 
<a id="L442" name="L442"></a> 442         <em class="comment">// hasMoreElements will update permset to the next permset</em>
<a id="L443" name="L443"></a> 443         <em class="comment">// with something in it...</em>
<a id="L444" name="L444"></a> 444 
<a id="L445" name="L445"></a> 445         <strong class="reserved">if</strong> (<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>()) <em class="brace">{</em>
<a id="L446" name="L446"></a> 446             <strong class="reserved">return</strong> permset.<a href="../D/28145.html" title="Multiple defined in 35 places.">nextElement</a>();
<a id="L447" name="L447"></a> 447         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L448" name="L448"></a> 448             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1128.html#L38" title="Defined at 38 in src/java/util/NoSuchElementException.java.">NoSuchElementException</a>("PermissionsEnumerator");
<a id="L449" name="L449"></a> 449         <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<a id="L451" name="L451"></a> 451     <em class="brace">}</em>
<a id="L452" name="L452"></a> 452 
<a id="L453" name="L453"></a> 453     <strong class="reserved">private</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../R/17913.html" title="Multiple referred from 2 places.">getNextEnumWithMore</a>() <em class="brace">{</em>
<a id="L454" name="L454"></a> 454         <strong class="reserved">while</strong> (perms.<a href="../D/24134.html" title="Multiple defined in 81 places.">hasNext</a>()) <em class="brace">{</em>
<a id="L455" name="L455"></a> 455             <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a> pc = perms.<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>();
<a id="L456" name="L456"></a> 456             <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> =pc.<a href="../D/15313.html" title="Multiple defined in 25 places.">elements</a>();
<a id="L457" name="L457"></a> 457             <strong class="reserved">if</strong> (<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>.<a href="../D/24128.html" title="Multiple defined in 32 places.">hasMoreElements</a>())
<a id="L458" name="L458"></a> 458                 <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L459" name="L459"></a> 459         <em class="brace">}</em>
<a id="L460" name="L460"></a> 460         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L461" name="L461"></a> 461 
<a id="L462" name="L462"></a> 462     <em class="brace">}</em>
<a id="L463" name="L463"></a> 463 <em class="brace">}</em>
<a id="L464" name="L464"></a> 464 
<div class="comment">
  A PermissionsHash stores a homogeneous set of permissions in a hashtable.
  @see Permission
  @see Permissions
  @author Roland Schemers
  @serial include</div>
<a id="L476" name="L476"></a> 476 
<a id="L477" name="L477"></a> 477 <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/6100.html" title="Multiple referred from 2 places.">PermissionsHash</a> <strong class="reserved">extends</strong> <a href="../S/1216.html#L94" title="Defined at 94 in src/java/security/PermissionCollection.java.">PermissionCollection</a>
<a id="L478" name="L478"></a> 478 <strong class="reserved">implements</strong> <a href="../S/1407.html#L169" title="Defined at 169 in src/java/io/Serializable.java.">Serializable</a>
<a id="L479" name="L479"></a> 479 <em class="brace">{</em>
<div class="comment">
      Key and value are (same) permissions objects.
      Not serialized; see serialization section at end of class.</div>
<a id="L484" name="L484"></a> 484     <strong class="reserved">private</strong> <strong class="reserved">transient</strong> <a href="../D/5398.html" title="Multiple defined in 3 places.">Map</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; permsMap;
<a id="L485" name="L485"></a> 485 
<div class="comment">
      Create an empty PermissionsHash object.</div>
<a id="L489" name="L489"></a> 489 
<a id="L490" name="L490"></a> 490     PermissionsHash() <em class="brace">{</em>
<a id="L491" name="L491"></a> 491         permsMap = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt;(11);
<a id="L492" name="L492"></a> 492     <em class="brace">}</em>
<a id="L493" name="L493"></a> 493 
<div class="comment">
      Adds a permission to the PermissionsHash.
      @param permission the Permission object to add.</div>
<a id="L499" name="L499"></a> 499 
<a id="L500" name="L500"></a> 500     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/9592.html" title="Multiple referred from 2612 places.">add</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L501" name="L501"></a> 501         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L502" name="L502"></a> 502             permsMap.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>(permission, permission);
<a id="L503" name="L503"></a> 503         <em class="brace">}</em>
<a id="L504" name="L504"></a> 504     <em class="brace">}</em>
<a id="L505" name="L505"></a> 505 
<div class="comment">
      Check and see if this set of permissions implies the permissions
      expressed in "permission".
      @param permission the Permission object to compare
      @return true if "permission" is a proper subset of a permission in
      the set, false if not.</div>
<a id="L515" name="L515"></a> 515 
<a id="L516" name="L516"></a> 516     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20435.html" title="Multiple referred from 23 places.">implies</a>(<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> permission) <em class="brace">{</em>
<a id="L517" name="L517"></a> 517         <em class="comment">// attempt a fast lookup and implies. If that fails</em>
<a id="L518" name="L518"></a> 518         <em class="comment">// then enumerate through all the permissions.</em>
<a id="L519" name="L519"></a> 519         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L520" name="L520"></a> 520             <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> p = permsMap.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>(permission);
<a id="L521" name="L521"></a> 521 
<a id="L522" name="L522"></a> 522             <em class="comment">// If permission is found, then p.equals(permission)</em>
<a id="L523" name="L523"></a> 523             <strong class="reserved">if</strong> (p == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L524" name="L524"></a> 524                 <strong class="reserved">for</strong> (<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a> p_ : permsMap.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>()) <em class="brace">{</em>
<a id="L525" name="L525"></a> 525                     <strong class="reserved">if</strong> (p_.<a href="../D/24381.html" title="Multiple defined in 34 places.">implies</a>(permission))
<a id="L526" name="L526"></a> 526                         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L527" name="L527"></a> 527                 <em class="brace">}</em>
<a id="L528" name="L528"></a> 528                 <strong class="reserved">return</strong> <strong class="reserved">false</strong>;
<a id="L529" name="L529"></a> 529             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L530" name="L530"></a> 530                 <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L531" name="L531"></a> 531             <em class="brace">}</em>
<a id="L532" name="L532"></a> 532         <em class="brace">}</em>
<a id="L533" name="L533"></a> 533     <em class="brace">}</em>
<a id="L534" name="L534"></a> 534 
<div class="comment">
      Returns an enumeration of all the Permission objects in the container.
      @return an enumeration of all the Permissions.</div>
<a id="L540" name="L540"></a> 540 
<a id="L541" name="L541"></a> 541     <strong class="reserved">public</strong> <a href="../S/1134.html#L61" title="Defined at 61 in src/java/util/Enumeration.java.">Enumeration</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; <a href="../R/13650.html" title="Multiple referred from 679 places.">elements</a>() <em class="brace">{</em>
<a id="L542" name="L542"></a> 542         <em class="comment">// Convert Iterator of Map values into an Enumeration</em>
<a id="L543" name="L543"></a> 543         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L544" name="L544"></a> 544             <strong class="reserved">return</strong> <a href="../S/1147.html#L80" title="Defined at 80 in src/java/util/Collections.java.">Collections</a>.<a href="../S/1147.html#L5207" title="Defined at 5207 in src/java/util/Collections.java.">enumeration</a>(permsMap.<a href="../D/36382.html" title="Multiple defined in 31 places.">values</a>());
<a id="L545" name="L545"></a> 545         <em class="brace">}</em>
<a id="L546" name="L546"></a> 546     <em class="brace">}</em>
<a id="L547" name="L547"></a> 547 
<a id="L548" name="L548"></a> 548     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = -8491988220802933440L;
<a id="L549" name="L549"></a> 549     <em class="comment">// Need to maintain serialization interoperability with earlier releases,</em>
<a id="L550" name="L550"></a> 550     <em class="comment">// which had the serializable field:</em>
<a id="L551" name="L551"></a> 551     <em class="comment">// private Hashtable perms;</em>
<div class="comment">
      @serialField perms java.util.Hashtable
          A table of the Permissions (both key and value are same).</div>
<a id="L556" name="L556"></a> 556     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>[] serialPersistentFields = <em class="brace">{</em>
<a id="L557" name="L557"></a> 557         <strong class="reserved">new</strong> <a href="../D/6334.html" title="Multiple defined in 3 places.">ObjectStreamField</a>("perms", <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>.<strong class="reserved">class</strong>),
<a id="L558" name="L558"></a> 558     <em class="brace">}</em>;
<a id="L559" name="L559"></a> 559 
<div class="comment">
      @serialData Default fields.</div>
<div class="comment">
      Writes the contents of the permsMap field out as a Hashtable for
      serialization compatibility with earlier releases.</div>
<a id="L567" name="L567"></a> 567     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/30680.html" title="Multiple referred from 184 places.">writeObject</a>(<a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a> <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a> <em class="brace">{</em>
<a id="L568" name="L568"></a> 568         <em class="comment">// Don't call out.defaultWriteObject()</em>
<a id="L569" name="L569"></a> 569 
<a id="L570" name="L570"></a> 570         <em class="comment">// Copy perms into a Hashtable</em>
<a id="L571" name="L571"></a> 571         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; perms =
<a id="L572" name="L572"></a> 572                 <strong class="reserved">new</strong> <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;&gt;(permsMap.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2);
<a id="L573" name="L573"></a> 573         <strong class="reserved">synchronized</strong> (<strong class="reserved">this</strong>) <em class="brace">{</em>
<a id="L574" name="L574"></a> 574             perms.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(permsMap);
<a id="L575" name="L575"></a> 575         <em class="brace">}</em>
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577         <em class="comment">// Write out serializable fields</em>
<a id="L578" name="L578"></a> 578         <a href="../S/1381.html#L162" title="Defined at 162 in src/java/io/ObjectOutputStream.java.">ObjectOutputStream</a>.<a href="../S/1381.html#L878" title="Defined at 878 in src/java/io/ObjectOutputStream.java.">PutField</a> pfields = <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/29995.html" title="Multiple defined in 2 places.">putFields</a>();
<a id="L579" name="L579"></a> 579         pfields.<a href="../D/29971.html" title="Multiple defined in 370 places.">put</a>("perms", perms);
<a id="L580" name="L580"></a> 580         <a href="../S/1038.html#L2317" title="Defined at 2317 in src/java/util/Formatter.java.">out</a>.<a href="../D/37065.html" title="Multiple defined in 3 places.">writeFields</a>();
<a id="L581" name="L581"></a> 581     <em class="brace">}</em>
<a id="L582" name="L582"></a> 582 
<div class="comment">
      Reads in a Hashtable of Permission/Permission and saves them in the
      permsMap field.</div>
<a id="L587" name="L587"></a> 587     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/25518.html" title="Multiple referred from 189 places.">readObject</a>(<a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a> <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>) <strong class="reserved">throws</strong> <a href="../S/1392.html#L39" title="Defined at 39 in src/java/io/IOException.java.">IOException</a>,
<a id="L588" name="L588"></a> 588     <a href="../S/1705.html#L53" title="Defined at 53 in src/java/lang/ClassNotFoundException.java.">ClassNotFoundException</a> <em class="brace">{</em>
<a id="L589" name="L589"></a> 589         <em class="comment">// Don't call defaultReadObject()</em>
<a id="L590" name="L590"></a> 590 
<a id="L591" name="L591"></a> 591         <em class="comment">// Read in serialized fields</em>
<a id="L592" name="L592"></a> 592         <a href="../S/1378.html#L206" title="Defined at 206 in src/java/io/ObjectInputStream.java.">ObjectInputStream</a>.<a href="../S/1378.html#L1079" title="Defined at 1079 in src/java/io/ObjectInputStream.java.">GetField</a> gfields = <a href="../D/24395.html" title="Multiple defined in 2 places.">in</a>.<a href="../D/30181.html" title="Multiple defined in 6 places.">readFields</a>();
<a id="L593" name="L593"></a> 593 
<a id="L594" name="L594"></a> 594         <em class="comment">// Get permissions</em>
<a id="L595" name="L595"></a> 595         <em class="comment">// writeObject writes a Hashtable&lt;Class&lt;?&gt;, PermissionCollection&gt; for</em>
<a id="L596" name="L596"></a> 596         <em class="comment">// the perms key, so this cast is safe, unless the data is corrupt.</em>
<a id="L597" name="L597"></a> 597         @<a href="../D/8551.html" title="Multiple defined in 725 places.">SuppressWarnings</a>("unchecked")
<a id="L598" name="L598"></a> 598         <a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt; perms =
<a id="L599" name="L599"></a> 599                 (<a href="../D/3743.html" title="Multiple defined in 2 places.">Hashtable</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt;)gfields.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>("perms", <strong class="reserved">null</strong>);
<a id="L600" name="L600"></a> 600         permsMap = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>&lt;<a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>, <a href="../D/6689.html" title="Multiple defined in 2 places.">Permission</a>&gt;(perms.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()*2);
<a id="L601" name="L601"></a> 601         permsMap.<a href="../D/29972.html" title="Multiple defined in 20 places.">putAll</a>(perms);
<a id="L602" name="L602"></a> 602     <em class="brace">}</em>
<a id="L603" name="L603"></a> 603 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L124">[^]</a><a href="#L587">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L139">[^]</a><a href="#L874">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L139" title="Defined at 139.">reset</a></li>
<li><a href="#L264" title="Defined at 264.">sending_exception</a></li>
<li><a href="#L289" title="Defined at 289.">object_id</a></li>
<li><a href="#L307" title="Defined at 307.">checkForNullTemplate</a></li>
<li><a href="#L318" title="Defined at 318.">server_id</a></li>
<li><a href="#L330" title="Defined at 330.">orb_id</a></li>
<li><a href="#L337" title="Defined at 337.">adapter_name</a></li>
<li><a href="#L354" title="Defined at 354.">adapter_id</a></li>
<li><a href="#L369" title="Defined at 369.">target_most_derived_interface</a></li>
<li><a href="#L378" title="Defined at 378.">get_server_policy</a></li>
<li><a href="#L400" title="Defined at 400.">set_slot</a></li>
<li><a href="#L411" title="Defined at 411.">target_is_a</a></li>
<li><a href="#L429" title="Defined at 429.">add_reply_service_context</a></li>
<li><a href="#L500" title="Defined at 500.">request_id</a></li>
<li><a href="#L515" title="Defined at 515.">operation</a></li>
<li><a href="#L524" title="Defined at 524.">arguments</a></li>
<li><a href="#L552" title="Defined at 552.">exceptions</a></li>
<li><a href="#L563" title="Defined at 563.">contexts</a></li>
<li><a href="#L574" title="Defined at 574.">operation_context</a></li>
<li><a href="#L586" title="Defined at 586.">result</a></li>
<li><a href="#L607" title="Defined at 607.">response_expected</a></li>
<li><a href="#L616" title="Defined at 616.">forward_reference</a></li>
<li><a href="#L631" title="Defined at 631.">get_request_service_context</a></li>
<li><a href="#L645" title="Defined at 645.">get_reply_service_context</a></li>
<li><a href="#L674" title="Defined at 674.">enqueue</a></li>
<li><a href="#L712" title="Defined at 712.">setCurrentExecutionPoint</a></li>
<li><a href="#L749" title="Defined at 749.">setInfo</a></li>
<li><a href="#L763" title="Defined at 763.">setDSIArguments</a></li>
<li><a href="#L770" title="Defined at 770.">setDSIException</a></li>
<li><a href="#L780" title="Defined at 780.">setDSIResult</a></li>
<li><a href="#L788" title="Defined at 788.">setException</a></li>
<li><a href="#L801" title="Defined at 801.">setInfo</a></li>
<li><a href="#L815" title="Defined at 815.">setReplyMessage</a></li>
<li><a href="#L823" title="Defined at 823.">setReplyStatus</a></li>
<li><a href="#L844" title="Defined at 844.">releaseServant</a></li>
<li><a href="#L852" title="Defined at 852.">setForwardRequestRaisedInEnding</a></li>
<li><a href="#L860" title="Defined at 860.">isForwardRequestRaisedInEnding</a></li>
<li><a href="#L867" title="Defined at 867.">isDynamic</a></li>
<li><a href="#L874" title="Defined at 874.">checkAccess</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<a id="L25" name="L25"></a>  25 <strong class="reserved">package</strong> com.sun.corba.se.<a href="../S/7010.html#L693" title="Defined at 693 in src/com/sun/corba/se/impl/encoding/CodeSetConversion.java.">impl</a>.interceptors;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> org.omg.CORBA.Any;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> org.omg.CORBA.BAD_INV_ORDER;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> org.omg.CORBA.CompletionStatus;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> org.omg.CORBA.INTERNAL;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> org.omg.CORBA.LocalObject;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> org.omg.CORBA.NO_IMPLEMENT;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> org.omg.CORBA.NO_RESOURCES;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> org.omg.CORBA.NVList;
<a id="L35" name="L35"></a>  35 <strong class="reserved">import</strong> org.omg.CORBA.Object;
<a id="L36" name="L36"></a>  36 <strong class="reserved">import</strong> org.omg.CORBA.Policy;
<a id="L37" name="L37"></a>  37 <strong class="reserved">import</strong> org.omg.CORBA.TypeCode;
<a id="L38" name="L38"></a>  38 
<a id="L39" name="L39"></a>  39 <strong class="reserved">import</strong> org.omg.PortableServer.Servant;
<a id="L40" name="L40"></a>  40 
<a id="L41" name="L41"></a>  41 <strong class="reserved">import</strong> org.omg.IOP.TaggedProfile;
<a id="L42" name="L42"></a>  42 <strong class="reserved">import</strong> org.omg.IOP.ServiceContext;
<a id="L43" name="L43"></a>  43 
<a id="L44" name="L44"></a>  44 <strong class="reserved">import</strong> org.omg.Dynamic.Parameter;
<a id="L45" name="L45"></a>  45 
<a id="L46" name="L46"></a>  46 <strong class="reserved">import</strong> org.omg.PortableInterceptor.InvalidSlot;
<a id="L47" name="L47"></a>  47 <strong class="reserved">import</strong> org.omg.PortableInterceptor.ServerRequestInfo;
<a id="L48" name="L48"></a>  48 <strong class="reserved">import</strong> org.omg.PortableInterceptor.LOCATION_FORWARD;
<a id="L49" name="L49"></a>  49 <strong class="reserved">import</strong> org.omg.PortableInterceptor.SUCCESSFUL;
<a id="L50" name="L50"></a>  50 <strong class="reserved">import</strong> org.omg.PortableInterceptor.SYSTEM_EXCEPTION;
<a id="L51" name="L51"></a>  51 <strong class="reserved">import</strong> org.omg.PortableInterceptor.TRANSPORT_RETRY;
<a id="L52" name="L52"></a>  52 <strong class="reserved">import</strong> org.omg.PortableInterceptor.USER_EXCEPTION;
<a id="L53" name="L53"></a>  53 
<a id="L54" name="L54"></a>  54 <strong class="reserved">import</strong> com.sun.corba.se.spi.oa.ObjectAdapter;
<a id="L55" name="L55"></a>  55 <strong class="reserved">import</strong> com.sun.corba.se.spi.presentation.rmi.StubAdapter;
<a id="L56" name="L56"></a>  56 
<a id="L57" name="L57"></a>  57 <strong class="reserved">import</strong> com.sun.corba.se.impl.protocol.giopmsgheaders.ReplyMessage;
<a id="L58" name="L58"></a>  58 
<a id="L59" name="L59"></a>  59 <strong class="reserved">import</strong> com.sun.corba.se.spi.servicecontext.ServiceContexts;
<a id="L60" name="L60"></a>  60 <strong class="reserved">import</strong> com.sun.corba.se.spi.orb.ORB;
<a id="L61" name="L61"></a>  61 
<a id="L62" name="L62"></a>  62 <strong class="reserved">import</strong> com.sun.corba.se.spi.ior.ObjectKeyTemplate;
<a id="L63" name="L63"></a>  63 <strong class="reserved">import</strong> com.sun.corba.se.spi.ior.ObjectAdapterId ;
<a id="L64" name="L64"></a>  64 
<a id="L65" name="L65"></a>  65 <strong class="reserved">import</strong> com.sun.corba.se.spi.protocol.CorbaMessageMediator;
<a id="L66" name="L66"></a>  66 
<a id="L67" name="L67"></a>  67 <strong class="reserved">import</strong> java.util.*;
<a id="L68" name="L68"></a>  68 
<div class="comment">
  Implementation of the ServerRequestInfo interface as specified in
  orbos/99-12-02 section 5.4.3.</div>
<a id="L73" name="L73"></a>  73 <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">class</strong> <a href="../R/7129.html" title="Multiple referred from 30 places.">ServerRequestInfoImpl</a>
<a id="L74" name="L74"></a>  74     <strong class="reserved">extends</strong> <a href="../S/6869.html#L101" title="Defined at 101 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">RequestInfoImpl</a>
<a id="L75" name="L75"></a>  75     <strong class="reserved">implements</strong> <a href="../S/489.html#L224" title="Defined at 224 in src/org/omg/PortableInterceptor/ServerRequestInfo.java.">ServerRequestInfo</a>
<a id="L76" name="L76"></a>  76 <em class="brace">{</em>
<a id="L77" name="L77"></a>  77     <em class="comment">// The available constants for startingPointCall</em>
<a id="L78" name="L78"></a>  78     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_RECEIVE_REQUEST_SERVICE_CONTEXT = 0;
<a id="L79" name="L79"></a>  79 
<a id="L80" name="L80"></a>  80     <em class="comment">// The available constants for intermediatePointCall.  The default (0)</em>
<a id="L81" name="L81"></a>  81     <em class="comment">// is receive_request, but can be set to none on demand.</em>
<a id="L82" name="L82"></a>  82     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_RECEIVE_REQUEST = 0;
<a id="L83" name="L83"></a>  83     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_INTERMEDIATE_NONE = 1;
<a id="L84" name="L84"></a>  84 
<a id="L85" name="L85"></a>  85     <em class="comment">// The available constants for endingPointCall</em>
<a id="L86" name="L86"></a>  86     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_SEND_REPLY = 0;
<a id="L87" name="L87"></a>  87     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_SEND_EXCEPTION = 1;
<a id="L88" name="L88"></a>  88     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> CALL_SEND_OTHER = 2;
<a id="L89" name="L89"></a>  89 
<a id="L90" name="L90"></a>  90     <em class="comment">//////////////////////////////////////////////////////////////////////</em>
<a id="L91" name="L91"></a>  91     <em class="comment">//</em>
<a id="L92" name="L92"></a>  92     <em class="comment">// NOTE: IF AN ATTRIBUTE IS ADDED, PLEASE UPDATE RESET();</em>
<a id="L93" name="L93"></a>  93     <em class="comment">//</em>
<a id="L94" name="L94"></a>  94     <em class="comment">//////////////////////////////////////////////////////////////////////</em>
<a id="L95" name="L95"></a>  95 
<a id="L96" name="L96"></a>  96     <em class="comment">// Set to true if the server ending point raised ForwardRequest at some</em>
<a id="L97" name="L97"></a>  97     <em class="comment">// point in the ending point.</em>
<a id="L98" name="L98"></a>  98     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> forwardRequestRaisedInEnding;
<a id="L99" name="L99"></a>  99 
<a id="L100" name="L100"></a> 100     <em class="comment">// Sources of server request information:</em>
<a id="L101" name="L101"></a> 101     <strong class="reserved">private</strong> <a href="../S/7520.html#L63" title="Defined at 63 in src/com/sun/corba/se/spi/protocol/CorbaMessageMediator.java.">CorbaMessageMediator</a> <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>;
<a id="L102" name="L102"></a> 102     <strong class="reserved">private</strong> <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> servant;
<a id="L103" name="L103"></a> 103     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] objectId;
<a id="L104" name="L104"></a> 104     <strong class="reserved">private</strong> <a href="../S/7480.html#L40" title="Defined at 40 in src/com/sun/corba/se/spi/ior/ObjectKeyTemplate.java.">ObjectKeyTemplate</a> oktemp ;
<a id="L105" name="L105"></a> 105 
<a id="L106" name="L106"></a> 106     <em class="comment">// Information cached from calls to oktemp</em>
<a id="L107" name="L107"></a> 107     <strong class="reserved">private</strong> <strong class="reserved">byte</strong>[] adapterId;
<a id="L108" name="L108"></a> 108     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] adapterName;
<a id="L109" name="L109"></a> 109 
<a id="L110" name="L110"></a> 110     <strong class="reserved">private</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a> addReplyServiceContextQueue;
<a id="L111" name="L111"></a> 111     <strong class="reserved">private</strong> <a href="../S/7095.html#L38" title="Defined at 38 in src/com/sun/corba/se/impl/protocol/giopmsgheaders/ReplyMessage.java.">ReplyMessage</a> replyMessage;
<a id="L112" name="L112"></a> 112     <strong class="reserved">private</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> targetMostDerivedInterface;
<a id="L113" name="L113"></a> 113     <strong class="reserved">private</strong> <a href="../S/274.html#L93" title="Defined at 93 in src/org/omg/CORBA/NVList.java.">NVList</a> dsiArguments;
<a id="L114" name="L114"></a> 114     <strong class="reserved">private</strong> <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> dsiResult;
<a id="L115" name="L115"></a> 115     <strong class="reserved">private</strong> <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> dsiException;
<a id="L116" name="L116"></a> 116     <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a>;
<a id="L117" name="L117"></a> 117     <strong class="reserved">private</strong> <a href="../S/7536.html#L161" title="Defined at 161 in src/com/sun/corba/se/spi/oa/ObjectAdapter.java.">ObjectAdapter</a> objectAdapter;
<a id="L118" name="L118"></a> 118     <strong class="reserved">private</strong> <strong class="reserved">int</strong> serverRequestId;
<a id="L119" name="L119"></a> 119 
<a id="L120" name="L120"></a> 120     <em class="comment">// Cached information:</em>
<a id="L121" name="L121"></a> 121     <strong class="reserved">private</strong> <a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a>[] cachedArguments;
<a id="L122" name="L122"></a> 122     <strong class="reserved">private</strong> <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> cachedSendingException;
<a id="L123" name="L123"></a> 123     <em class="comment">// key = Integer, value = IOP.ServiceContext.</em>
<a id="L124" name="L124"></a> 124     <strong class="reserved">private</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a> cachedRequestServiceContexts;
<a id="L125" name="L125"></a> 125     <em class="comment">// key = Integer, value = IOP.ServiceContext.</em>
<a id="L126" name="L126"></a> 126     <strong class="reserved">private</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a> cachedReplyServiceContexts;
<a id="L127" name="L127"></a> 127 
<a id="L128" name="L128"></a> 128     <em class="comment">//////////////////////////////////////////////////////////////////////</em>
<a id="L129" name="L129"></a> 129     <em class="comment">//</em>
<a id="L130" name="L130"></a> 130     <em class="comment">// NOTE: IF AN ATTRIBUTE IS ADDED, PLEASE UPDATE RESET();</em>
<a id="L131" name="L131"></a> 131     <em class="comment">//</em>
<a id="L132" name="L132"></a> 132     <em class="comment">//////////////////////////////////////////////////////////////////////</em>
<a id="L133" name="L133"></a> 133 
<a id="L134" name="L134"></a> 134 
<div class="comment">
      Reset the info object so that it can be reused for a retry,
      for example.</div>
<a id="L139" name="L139"></a> 139     <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>() <em class="brace">{</em>
<a id="L140" name="L140"></a> 140         <strong class="reserved">super</strong>.<a href="../D/31151.html" title="Multiple defined in 296 places.">reset</a>();
<a id="L141" name="L141"></a> 141 
<a id="L142" name="L142"></a> 142         <em class="comment">// Please keep these in the same order as declared above.</em>
<a id="L143" name="L143"></a> 143 
<a id="L144" name="L144"></a> 144         forwardRequestRaisedInEnding = <strong class="reserved">false</strong>;
<a id="L145" name="L145"></a> 145 
<a id="L146" name="L146"></a> 146         <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a> = <strong class="reserved">null</strong>;
<a id="L147" name="L147"></a> 147         servant = <strong class="reserved">null</strong>;
<a id="L148" name="L148"></a> 148         objectId = <strong class="reserved">null</strong>;
<a id="L149" name="L149"></a> 149         oktemp = <strong class="reserved">null</strong>;
<a id="L150" name="L150"></a> 150 
<a id="L151" name="L151"></a> 151         adapterId = <strong class="reserved">null</strong>;
<a id="L152" name="L152"></a> 152         adapterName = <strong class="reserved">null</strong>;
<a id="L153" name="L153"></a> 153 
<a id="L154" name="L154"></a> 154         addReplyServiceContextQueue = <strong class="reserved">null</strong>;
<a id="L155" name="L155"></a> 155         replyMessage = <strong class="reserved">null</strong>;
<a id="L156" name="L156"></a> 156         targetMostDerivedInterface = <strong class="reserved">null</strong>;
<a id="L157" name="L157"></a> 157         dsiArguments = <strong class="reserved">null</strong>;
<a id="L158" name="L158"></a> 158         dsiResult = <strong class="reserved">null</strong>;
<a id="L159" name="L159"></a> 159         dsiException = <strong class="reserved">null</strong>;
<a id="L160" name="L160"></a> 160         <a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a> = <strong class="reserved">false</strong>;
<a id="L161" name="L161"></a> 161         objectAdapter = <strong class="reserved">null</strong>;
<a id="L162" name="L162"></a> 162         serverRequestId = myORB.<a href="../D/21308.html" title="Multiple defined in 4 places.">getPIHandler</a>().<a href="../D/11302.html" title="Multiple defined in 3 places.">allocateServerRequestId</a>();
<a id="L163" name="L163"></a> 163 
<a id="L164" name="L164"></a> 164         <em class="comment">// reset cached attributes:</em>
<a id="L165" name="L165"></a> 165         cachedArguments = <strong class="reserved">null</strong>;
<a id="L166" name="L166"></a> 166         cachedSendingException = <strong class="reserved">null</strong>;
<a id="L167" name="L167"></a> 167         cachedRequestServiceContexts = <strong class="reserved">null</strong>;
<a id="L168" name="L168"></a> 168         cachedReplyServiceContexts = <strong class="reserved">null</strong>;
<a id="L169" name="L169"></a> 169 
<a id="L170" name="L170"></a> 170         startingPointCall = CALL_RECEIVE_REQUEST_SERVICE_CONTEXT;
<a id="L171" name="L171"></a> 171         intermediatePointCall = CALL_RECEIVE_REQUEST;
<a id="L172" name="L172"></a> 172         endingPointCall = CALL_SEND_REPLY;
<a id="L173" name="L173"></a> 173     <em class="brace">}</em>
<a id="L174" name="L174"></a> 174 
<div class="comment">
     *********************************************************************
      Access protection
     *********************************************************************</div>
<a id="L179" name="L179"></a> 179 
<a id="L180" name="L180"></a> 180     <em class="comment">// Method IDs for all methods in ServerRequestInfo.  This allows for a</em>
<a id="L181" name="L181"></a> 181     <em class="comment">// convenient O(1) lookup for checkAccess().</em>
<a id="L182" name="L182"></a> 182     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_SENDING_EXCEPTION       = MID_RI_LAST +  1;
<a id="L183" name="L183"></a> 183     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_OBJECT_ID               = MID_RI_LAST +  2;
<a id="L184" name="L184"></a> 184     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_ADAPTER_ID              = MID_RI_LAST +  3;
<a id="L185" name="L185"></a> 185     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_TARGET_MOST_DERIVED_INTERFACE
<a id="L186" name="L186"></a> 186                                                            = MID_RI_LAST +  4;
<a id="L187" name="L187"></a> 187     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_GET_SERVER_POLICY       = MID_RI_LAST +  5;
<a id="L188" name="L188"></a> 188     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_SET_SLOT                = MID_RI_LAST +  6;
<a id="L189" name="L189"></a> 189     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_TARGET_IS_A             = MID_RI_LAST +  7;
<a id="L190" name="L190"></a> 190     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_ADD_REPLY_SERVICE_CONTEXT
<a id="L191" name="L191"></a> 191                                                            = MID_RI_LAST +  8;
<a id="L192" name="L192"></a> 192     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_SERVER_ID               = MID_RI_LAST +  9;
<a id="L193" name="L193"></a> 193     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_ORB_ID                  = MID_RI_LAST +  10;
<a id="L194" name="L194"></a> 194     <strong class="reserved">protected</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">int</strong> MID_ADAPTER_NAME            = MID_RI_LAST +  11;
<a id="L195" name="L195"></a> 195 
<a id="L196" name="L196"></a> 196     <em class="comment">// ServerRequestInfo validity table (see ptc/00-08-06 table 21-2).</em>
<a id="L197" name="L197"></a> 197     <em class="comment">// Note: These must be in the same order as specified in contants.</em>
<a id="L198" name="L198"></a> 198     <strong class="reserved">private</strong> <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> validCall[][] = <em class="brace">{</em>
<a id="L199" name="L199"></a> 199         <em class="comment">// LEGEND:</em>
<a id="L200" name="L200"></a> 200         <em class="comment">// r_rsc = receive_request_service_contexts</em>
<a id="L201" name="L201"></a> 201         <em class="comment">// r_req = receive_request</em>
<a id="L202" name="L202"></a> 202         <em class="comment">// s_rep = send_reply</em>
<a id="L203" name="L203"></a> 203         <em class="comment">// s_exc = send_exception</em>
<a id="L204" name="L204"></a> 204         <em class="comment">// s_oth = send_other</em>
<a id="L205" name="L205"></a> 205         <em class="comment">//</em>
<a id="L206" name="L206"></a> 206         <em class="comment">// A true value indicates call is valid at specified point.</em>
<a id="L207" name="L207"></a> 207         <em class="comment">// A false value indicates the call is invalid.</em>
<a id="L208" name="L208"></a> 208         <em class="comment">//</em>
<a id="L209" name="L209"></a> 209         <em class="comment">// NOTE: If the order or number of columns change, update</em>
<a id="L210" name="L210"></a> 210         <em class="comment">// checkAccess() accordingly.</em>
<a id="L211" name="L211"></a> 211         <em class="comment">//</em>
<a id="L212" name="L212"></a> 212         <em class="comment">//                              { r_rsc, r_req, s_rep, s_exc, s_oth }</em>
<a id="L213" name="L213"></a> 213         <em class="comment">// RequestInfo methods:</em>
<div class="comment">
         /*request_id*/</div>                  <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*operation*/</div>                   <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*arguments*/</div>                   <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">false</strong>, <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*exceptions*/</div>                  <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*contexts*/</div>                    <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*operation_context*/</div>           <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">false</strong>, <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*result*/</div>                      <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">false</strong>, <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*response_expected*/</div>           <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*sync_scope*/</div>                  <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*reply_status*/</div>                <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*forward_reference*/</div>           <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*get_slot*/</div>                    <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*get_request_service_context*/</div> <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*get_reply_service_context*/</div>   <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<a id="L228" name="L228"></a> 228         <em class="comment">//</em>
<a id="L229" name="L229"></a> 229         <em class="comment">// ServerRequestInfo methods::</em>
<div class="comment">
         /*sending_exception*/</div>           <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*object_id*/</div>                   <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*adapter_id*/</div>                  <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*target_most_derived_inte...*/</div> <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*get_server_policy*/</div>           <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*set_slot*/</div>                    <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*target_is_a*/</div>                 <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">false</strong>, <strong class="reserved">false</strong>, <strong class="reserved">false</strong> <em class="brace">}</em>,
<div class="comment">
         /*add_reply_service_context*/</div>   <em class="brace">{</em> <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*orb_id*/</div>                      <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*server_id*/</div>                   <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>,
<div class="comment">
         /*adapter_name*/</div>                <em class="brace">{</em> <strong class="reserved">false</strong>, <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong> , <strong class="reserved">true</strong>  <em class="brace">}</em>
<a id="L241" name="L241"></a> 241     <em class="brace">}</em>;
<a id="L242" name="L242"></a> 242 
<div class="comment">
     *********************************************************************
      Public interfaces
     *********************************************************************</div>
<a id="L247" name="L247"></a> 247 
<div class="comment">
      Creates a new ServerRequestInfo implementation.
      The constructor is package scope since no other package need create
      an instance of this class.</div>
<a id="L253" name="L253"></a> 253     ServerRequestInfoImpl( <a href="../D/6219.html" title="Multiple defined in 5 places.">ORB</a> myORB ) <em class="brace">{</em>
<a id="L254" name="L254"></a> 254         <strong class="reserved">super</strong>( myORB );
<a id="L255" name="L255"></a> 255         startingPointCall = CALL_RECEIVE_REQUEST_SERVICE_CONTEXT;
<a id="L256" name="L256"></a> 256         intermediatePointCall = CALL_RECEIVE_REQUEST;
<a id="L257" name="L257"></a> 257         endingPointCall = CALL_SEND_REPLY;
<a id="L258" name="L258"></a> 258         serverRequestId = myORB.<a href="../D/21308.html" title="Multiple defined in 4 places.">getPIHandler</a>().<a href="../D/11302.html" title="Multiple defined in 3 places.">allocateServerRequestId</a>();
<a id="L259" name="L259"></a> 259     <em class="brace">}</em>
<a id="L260" name="L260"></a> 260 
<div class="comment">
      Any containing the exception to be returned to the client.</div>
<a id="L264" name="L264"></a> 264     <strong class="reserved">public</strong> <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> sending_exception () <em class="brace">{</em>
<a id="L265" name="L265"></a> 265         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_SENDING_EXCEPTION );
<a id="L266" name="L266"></a> 266 
<a id="L267" name="L267"></a> 267         <strong class="reserved">if</strong>( cachedSendingException == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L268" name="L268"></a> 268             <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong> ;
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270             <strong class="reserved">if</strong>( dsiException != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L271" name="L271"></a> 271                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = dsiException;
<a id="L272" name="L272"></a> 272             <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong>( <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L273" name="L273"></a> 273                 <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <a href="../S/6869.html#L592" title="Defined at 592 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">exceptionToAny</a>( <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> );
<a id="L274" name="L274"></a> 274             <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L275" name="L275"></a> 275                 <em class="comment">// sending_exception should not be callable if both dsiException</em>
<a id="L276" name="L276"></a> 276                 <em class="comment">// and exception are null.</em>
<a id="L277" name="L277"></a> 277                 <strong class="reserved">throw</strong> wrapper.<a href="../D/15781.html" title="Multiple defined in 4 places.">exceptionUnavailable</a>() ;
<a id="L278" name="L278"></a> 278             <em class="brace">}</em>
<a id="L279" name="L279"></a> 279 
<a id="L280" name="L280"></a> 280             cachedSendingException = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L281" name="L281"></a> 281         <em class="brace">}</em>
<a id="L282" name="L282"></a> 282 
<a id="L283" name="L283"></a> 283         <strong class="reserved">return</strong> cachedSendingException;
<a id="L284" name="L284"></a> 284     <em class="brace">}</em>
<a id="L285" name="L285"></a> 285 
<div class="comment">
      The opaque object_id describing the target of the operation invocation.</div>
<a id="L289" name="L289"></a> 289     <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] <a href="../R/23890.html" title="Multiple referred from 3 places.">object_id</a> () <em class="brace">{</em>
<a id="L290" name="L290"></a> 290         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_OBJECT_ID );
<a id="L291" name="L291"></a> 291 
<a id="L292" name="L292"></a> 292         <strong class="reserved">if</strong>( objectId == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L293" name="L293"></a> 293             <em class="comment">// For some reason, we never set object id.  This could be</em>
<a id="L294" name="L294"></a> 294             <em class="comment">// because a servant locator caused a location forward or</em>
<a id="L295" name="L295"></a> 295             <em class="comment">// raised an exception.  As per ptc/00-08-06, section 21.3.14,</em>
<a id="L296" name="L296"></a> 296             <em class="comment">// we throw NO_RESOURCES</em>
<a id="L297" name="L297"></a> 297             <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29352.html" title="Multiple defined in 4 places.">piOperationNotSupported6</a>() ;
<a id="L298" name="L298"></a> 298         <em class="brace">}</em>
<a id="L299" name="L299"></a> 299 
<a id="L300" name="L300"></a> 300         <em class="comment">// Good citizen: In the interest of efficiency, we will assume</em>
<a id="L301" name="L301"></a> 301         <em class="comment">// interceptors will not change the resulting byte[] array.</em>
<a id="L302" name="L302"></a> 302         <em class="comment">// Otherwise, we would need to make a clone of this array.</em>
<a id="L303" name="L303"></a> 303 
<a id="L304" name="L304"></a> 304         <strong class="reserved">return</strong> objectId;
<a id="L305" name="L305"></a> 305     <em class="brace">}</em>
<a id="L306" name="L306"></a> 306 
<a id="L307" name="L307"></a> 307     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/11176.html" title="Multiple referred from 3 places.">checkForNullTemplate</a>()
<a id="L308" name="L308"></a> 308     <em class="brace">{</em>
<a id="L309" name="L309"></a> 309         <strong class="reserved">if</strong> (oktemp == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L310" name="L310"></a> 310             <em class="comment">// For some reason, we never set the ObjectKeyTemplate</em>
<a id="L311" name="L311"></a> 311             <em class="comment">// because a servant locator caused a location forward or</em>
<a id="L312" name="L312"></a> 312             <em class="comment">// raised an exception.  As per ptc/00-08-06, section 21.3.14,</em>
<a id="L313" name="L313"></a> 313             <em class="comment">// we throw NO_RESOURCES</em>
<a id="L314" name="L314"></a> 314             <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29353.html" title="Multiple defined in 4 places.">piOperationNotSupported7</a>() ;
<a id="L315" name="L315"></a> 315         <em class="brace">}</em>
<a id="L316" name="L316"></a> 316     <em class="brace">}</em>
<a id="L317" name="L317"></a> 317 
<a id="L318" name="L318"></a> 318     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/26850.html" title="Multiple referred from 2 places.">server_id</a>()
<a id="L319" name="L319"></a> 319     <em class="brace">{</em>
<a id="L320" name="L320"></a> 320         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_SERVER_ID ) ;
<a id="L321" name="L321"></a> 321         <a href="../S/6871.html#L307" title="Defined at 307 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">checkForNullTemplate</a>() ;
<a id="L322" name="L322"></a> 322 
<a id="L323" name="L323"></a> 323         <em class="comment">// Good citizen: In the interest of efficiency, we will assume</em>
<a id="L324" name="L324"></a> 324         <em class="comment">// interceptors will not change the resulting byte[] array.</em>
<a id="L325" name="L325"></a> 325         <em class="comment">// Otherwise, we would need to make a clone of this array.</em>
<a id="L326" name="L326"></a> 326 
<a id="L327" name="L327"></a> 327         <strong class="reserved">return</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>.<a href="../D/35493.html" title="Multiple defined in 1021 places.">toString</a>( oktemp.<a href="../D/22423.html" title="Multiple defined in 6 places.">getServerId</a>() ) ;
<a id="L328" name="L328"></a> 328     <em class="brace">}</em>
<a id="L329" name="L329"></a> 329 
<a id="L330" name="L330"></a> 330     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> orb_id()
<a id="L331" name="L331"></a> 331     <em class="brace">{</em>
<a id="L332" name="L332"></a> 332         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_ORB_ID ) ;
<a id="L333" name="L333"></a> 333 
<a id="L334" name="L334"></a> 334         <strong class="reserved">return</strong> myORB.<a href="../D/21104.html" title="Multiple defined in 3 places.">getORBData</a>().<a href="../D/21107.html" title="Multiple defined in 5 places.">getORBId</a>() ;
<a id="L335" name="L335"></a> 335     <em class="brace">}</em>
<a id="L336" name="L336"></a> 336 
<a id="L337" name="L337"></a> 337     <strong class="reserved">synchronized</strong> <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/9590.html" title="Multiple referred from 2 places.">adapter_name</a>()
<a id="L338" name="L338"></a> 338     <em class="brace">{</em>
<a id="L339" name="L339"></a> 339         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_ADAPTER_NAME ) ;
<a id="L340" name="L340"></a> 340 
<a id="L341" name="L341"></a> 341         <strong class="reserved">if</strong> (adapterName == <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L342" name="L342"></a> 342             <a href="../S/6871.html#L307" title="Defined at 307 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">checkForNullTemplate</a>() ;
<a id="L343" name="L343"></a> 343 
<a id="L344" name="L344"></a> 344             <a href="../S/7500.html#L34" title="Defined at 34 in src/com/sun/corba/se/spi/ior/ObjectAdapterId.java.">ObjectAdapterId</a> oaid = oktemp.<a href="../D/21128.html" title="Multiple defined in 5 places.">getObjectAdapterId</a>() ;
<a id="L345" name="L345"></a> 345             adapterName = oaid.<a href="../D/16819.html" title="Multiple defined in 2 places.">getAdapterName</a>() ;
<a id="L346" name="L346"></a> 346         <em class="brace">}</em>
<a id="L347" name="L347"></a> 347 
<a id="L348" name="L348"></a> 348         <strong class="reserved">return</strong> adapterName ;
<a id="L349" name="L349"></a> 349     <em class="brace">}</em>
<a id="L350" name="L350"></a> 350 
<div class="comment">
      The opaque identifier for the object adapter.</div>
<a id="L354" name="L354"></a> 354     <strong class="reserved">synchronized</strong> <strong class="reserved">public</strong> <strong class="reserved">byte</strong>[] adapter_id ()
<a id="L355" name="L355"></a> 355     <em class="brace">{</em>
<a id="L356" name="L356"></a> 356         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_ADAPTER_ID );
<a id="L357" name="L357"></a> 357 
<a id="L358" name="L358"></a> 358         <strong class="reserved">if</strong>( adapterId == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L359" name="L359"></a> 359             <a href="../S/6871.html#L307" title="Defined at 307 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">checkForNullTemplate</a>() ;
<a id="L360" name="L360"></a> 360             adapterId = oktemp.<a href="../D/16818.html" title="Multiple defined in 4 places.">getAdapterId</a>() ;
<a id="L361" name="L361"></a> 361         <em class="brace">}</em>
<a id="L362" name="L362"></a> 362 
<a id="L363" name="L363"></a> 363         <strong class="reserved">return</strong> adapterId;
<a id="L364" name="L364"></a> 364     <em class="brace">}</em>
<a id="L365" name="L365"></a> 365 
<div class="comment">
      The RepositoryID for the most derived interface of the servant.</div>
<a id="L369" name="L369"></a> 369     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> target_most_derived_interface () <em class="brace">{</em>
<a id="L370" name="L370"></a> 370         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_TARGET_MOST_DERIVED_INTERFACE );
<a id="L371" name="L371"></a> 371         <strong class="reserved">return</strong> targetMostDerivedInterface;
<a id="L372" name="L372"></a> 372     <em class="brace">}</em>
<a id="L373" name="L373"></a> 373 
<div class="comment">
      Returns the policy in effect for this operation for the given policy
      type.</div>
<a id="L378" name="L378"></a> 378     <strong class="reserved">public</strong> <a href="../D/6725.html" title="Multiple defined in 3 places.">Policy</a> get_server_policy (<strong class="reserved">int</strong> <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a>) <em class="brace">{</em>
<a id="L379" name="L379"></a> 379         <em class="comment">// access is currently valid for all states:</em>
<a id="L380" name="L380"></a> 380         <em class="comment">//checkAccess( MID_GET_SERVER_POLICY );</em>
<a id="L381" name="L381"></a> 381 
<a id="L382" name="L382"></a> 382         <a href="../D/6725.html" title="Multiple defined in 3 places.">Policy</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">null</strong>;
<a id="L383" name="L383"></a> 383 
<a id="L384" name="L384"></a> 384         <strong class="reserved">if</strong>( objectAdapter != <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L385" name="L385"></a> 385             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = objectAdapter.<a href="../D/18656.html" title="Multiple defined in 4 places.">getEffectivePolicy</a>( <a href="../D/35749.html" title="Multiple defined in 239 places.">type</a> );
<a id="L386" name="L386"></a> 386         <em class="brace">}</em>
<a id="L387" name="L387"></a> 387 
<a id="L388" name="L388"></a> 388         <em class="comment">// _REVISIT_ RTF Issue: get_server_policy spec not in sync with</em>
<a id="L389" name="L389"></a> 389         <em class="comment">// get_effective_policy spec.</em>
<a id="L390" name="L390"></a> 390 
<a id="L391" name="L391"></a> 391         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L392" name="L392"></a> 392     <em class="brace">}</em>
<a id="L393" name="L393"></a> 393 
<div class="comment">
      Allows an Interceptor to set a slot in the Current that is in the scope
      of the request.  If data already exists in that slot, it will be
      overwritten.  If the ID does not define an allocated slot, InvalidSlot
      is raised.</div>
<a id="L400" name="L400"></a> 400     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28461.html" title="Multiple referred from 2 places.">set_slot</a> (<strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a>) <strong class="reserved">throws</strong> <a href="../S/447.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/InvalidSlot.java.">InvalidSlot</a> <em class="brace">{</em>
<a id="L401" name="L401"></a> 401         <em class="comment">// access is currently valid for all states:</em>
<a id="L402" name="L402"></a> 402         <em class="comment">//checkAccess( MID_SET_SLOT );</em>
<a id="L403" name="L403"></a> 403 
<a id="L404" name="L404"></a> 404         slotTable.<a href="../D/34398.html" title="Multiple defined in 5 places.">set_slot</a>( <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>, <a href="../S/6040.html#L177" title="Defined at 177 in src/com/sun/org/apache/xalan/internal/xsltc/dom/BitArray.java.">data</a> );
<a id="L405" name="L405"></a> 405     <em class="brace">}</em>
<a id="L406" name="L406"></a> 406 
<div class="comment">
      Returns true if the servant is the given RepositoryId, false if it is
      not.</div>
<a id="L411" name="L411"></a> 411     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> target_is_a (<a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a>) <em class="brace">{</em>
<a id="L412" name="L412"></a> 412         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_TARGET_IS_A );
<a id="L413" name="L413"></a> 413 
<a id="L414" name="L414"></a> 414         <strong class="reserved">boolean</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = <strong class="reserved">false</strong> ;
<a id="L415" name="L415"></a> 415         <strong class="reserved">if</strong>( servant <strong class="reserved">instanceof</strong> <a href="../S/688.html#L42" title="Defined at 42 in src/org/omg/PortableServer/Servant.java.">Servant</a> ) <em class="brace">{</em>
<a id="L416" name="L416"></a> 416             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((<a href="../S/688.html#L42" title="Defined at 42 in src/org/omg/PortableServer/Servant.java.">Servant</a>)servant).<a href="../D/10448.html" title="Multiple defined in 5 places.">_is_a</a>( <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> );
<a id="L417" name="L417"></a> 417         <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (<a href="../S/7573.html#L59" title="Defined at 59 in src/com/sun/corba/se/spi/presentation/rmi/StubAdapter.java.">StubAdapter</a>.<a href="../D/26294.html" title="Multiple defined in 4 places.">isStub</a>( servant )) <em class="brace">{</em>
<a id="L418" name="L418"></a> 418             <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> = ((org.omg.CORBA.<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a>)servant).<a href="../D/10448.html" title="Multiple defined in 5 places.">_is_a</a>( <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> );
<a id="L419" name="L419"></a> 419         <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L420" name="L420"></a> 420             <strong class="reserved">throw</strong> wrapper.<a href="../D/31796.html" title="Multiple defined in 4 places.">servantInvalid</a>() ;
<a id="L421" name="L421"></a> 421         <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<a id="L423" name="L423"></a> 423         <strong class="reserved">return</strong> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L424" name="L424"></a> 424     <em class="brace">}</em>
<a id="L425" name="L425"></a> 425 
<div class="comment">
      Allows Interceptors to add service contexts to the request.</div>
<a id="L429" name="L429"></a> 429     <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../S/6871.html#L727" title="Referred from 727 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">add_reply_service_context</a> ( <a href="../D/7865.html" title="Multiple defined in 2 places.">ServiceContext</a> service_context,
<a id="L430" name="L430"></a> 430                                             <strong class="reserved">boolean</strong> <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a> )
<a id="L431" name="L431"></a> 431     <em class="brace">{</em>
<a id="L432" name="L432"></a> 432         <em class="comment">// access is currently valid for all states:</em>
<a id="L433" name="L433"></a> 433         <em class="comment">//checkAccess( MID_ADD_REPLY_SERVICE_CONTEXT );</em>
<a id="L434" name="L434"></a> 434 
<a id="L435" name="L435"></a> 435         <strong class="reserved">if</strong>( currentExecutionPoint == EXECUTION_POINT_ENDING ) <em class="brace">{</em>
<a id="L436" name="L436"></a> 436             <a href="../S/7531.html#L64" title="Defined at 64 in src/com/sun/corba/se/spi/servicecontext/ServiceContexts.java.">ServiceContexts</a> scs = replyMessage.<a href="../D/22439.html" title="Multiple defined in 8 places.">getServiceContexts</a>();
<a id="L437" name="L437"></a> 437 
<a id="L438" name="L438"></a> 438             <em class="comment">// May be null.  If this is null, create a new one in its place.</em>
<a id="L439" name="L439"></a> 439             <strong class="reserved">if</strong>( scs == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L440" name="L440"></a> 440                 scs = <strong class="reserved">new</strong> <a href="../S/7531.html#L64" title="Defined at 64 in src/com/sun/corba/se/spi/servicecontext/ServiceContexts.java.">ServiceContexts</a>( myORB );
<a id="L441" name="L441"></a> 441                 replyMessage.<a href="../D/33893.html" title="Multiple defined in 4 places.">setServiceContexts</a>( scs );
<a id="L442" name="L442"></a> 442             <em class="brace">}</em>
<a id="L443" name="L443"></a> 443 
<a id="L444" name="L444"></a> 444             <strong class="reserved">if</strong>( cachedReplyServiceContexts == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L445" name="L445"></a> 445                 cachedReplyServiceContexts = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>();
<a id="L446" name="L446"></a> 446             <em class="brace">}</em>
<a id="L447" name="L447"></a> 447 
<a id="L448" name="L448"></a> 448             <em class="comment">// This is during and ending point, so we now have enough</em>
<a id="L449" name="L449"></a> 449             <em class="comment">// information to add the reply service context.</em>
<a id="L450" name="L450"></a> 450             <a href="../S/6869.html#L691" title="Defined at 691 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">addServiceContext</a>( cachedReplyServiceContexts, scs,
<a id="L451" name="L451"></a> 451                                service_context, <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a> );
<a id="L452" name="L452"></a> 452         <em class="brace">}</em>
<a id="L453" name="L453"></a> 453 
<a id="L454" name="L454"></a> 454         <em class="comment">// We enqueue all adds for the following reasons:</em>
<a id="L455" name="L455"></a> 455         <em class="comment">//</em>
<a id="L456" name="L456"></a> 456         <em class="comment">// If we are not in the ending point then we do not yet have a</em>
<a id="L457" name="L457"></a> 457         <em class="comment">// pointer to the ServiceContexts object so we cannot access the</em>
<a id="L458" name="L458"></a> 458         <em class="comment">// service contexts until we get to the ending point.</em>
<a id="L459" name="L459"></a> 459         <em class="comment">// So we enqueue this add reply service context request.</em>
<a id="L460" name="L460"></a> 460         <em class="comment">// It is added when we do have a handle on the service contexts object.</em>
<a id="L461" name="L461"></a> 461         <em class="comment">//</em>
<a id="L462" name="L462"></a> 462         <em class="comment">// If we are in the ending point and we just add directly to the</em>
<a id="L463" name="L463"></a> 463         <em class="comment">// SC container but then an interceptor raises a SystemException</em>
<a id="L464" name="L464"></a> 464         <em class="comment">// then that add will be lost since a new container is created</em>
<a id="L465" name="L465"></a> 465         <em class="comment">// for the SystemException response.</em>
<a id="L466" name="L466"></a> 466         <em class="comment">//</em>
<a id="L467" name="L467"></a> 467         <em class="comment">// Therefore we always enqueue and never dequeue (per request) so</em>
<a id="L468" name="L468"></a> 468         <em class="comment">// that all adds will be completed.</em>
<a id="L469" name="L469"></a> 469 
<a id="L470" name="L470"></a> 470         <a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a> addReply =
<a id="L471" name="L471"></a> 471             <strong class="reserved">new</strong> <a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a>();
<a id="L472" name="L472"></a> 472         addReply.service_context = service_context;
<a id="L473" name="L473"></a> 473         addReply.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a> = <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>;
<a id="L474" name="L474"></a> 474 
<a id="L475" name="L475"></a> 475         <strong class="reserved">if</strong>( addReplyServiceContextQueue == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L476" name="L476"></a> 476             addReplyServiceContextQueue = <strong class="reserved">new</strong> <a href="../D/498.html" title="Multiple defined in 2 places.">ArrayList</a>();
<a id="L477" name="L477"></a> 477         <em class="brace">}</em>
<a id="L478" name="L478"></a> 478 
<a id="L479" name="L479"></a> 479         <em class="comment">// REVISIT: this does not add to the cache.</em>
<a id="L480" name="L480"></a> 480         <a href="../D/15582.html" title="Multiple defined in 9 places.">enqueue</a>( addReply );
<a id="L481" name="L481"></a> 481     <em class="brace">}</em>
<a id="L482" name="L482"></a> 482 
<a id="L483" name="L483"></a> 483     <em class="comment">// NOTE: When adding a method, be sure to:</em>
<a id="L484" name="L484"></a> 484     <em class="comment">// 1. Add a MID_* constant for that method</em>
<a id="L485" name="L485"></a> 485     <em class="comment">// 2. Call checkAccess at the start of the method</em>
<a id="L486" name="L486"></a> 486     <em class="comment">// 3. Define entries in the validCall[][] table for interception points.</em>
<a id="L487" name="L487"></a> 487 
<div class="comment">
     *********************************************************************
      Public RequestInfo interfaces
      These are implemented here because they have differing
      implementations depending on whether this is a client or a server
      request info object.
     *********************************************************************</div>
<a id="L496" name="L496"></a> 496 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L500" name="L500"></a> 500     <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/26224.html" title="Multiple referred from 105 places.">request_id</a> ()<em class="brace">{</em>
<a id="L501" name="L501"></a> 501         <em class="comment">// access is currently valid for all states:</em>
<a id="L502" name="L502"></a> 502         <em class="comment">//checkAccess( MID_REQUEST_ID );</em>
<div class="comment">
          NOTE: The request id in server interceptors is NOT the
          same as the GIOP request id.  The ORB may be servicing several
          connections, each with possibly overlapping sets of request ids.
          Therefore we create a request id specific to interceptors.</div>
<a id="L509" name="L509"></a> 509         <strong class="reserved">return</strong> serverRequestId;
<a id="L510" name="L510"></a> 510     <em class="brace">}</em>
<a id="L511" name="L511"></a> 511 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L515" name="L515"></a> 515     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> <a href="../R/23997.html" title="Multiple referred from 234 places.">operation</a> ()<em class="brace">{</em>
<a id="L516" name="L516"></a> 516         <em class="comment">// access is currently valid for all states:</em>
<a id="L517" name="L517"></a> 517         <em class="comment">//checkAccess( MID_OPERATION );</em>
<a id="L518" name="L518"></a> 518         <strong class="reserved">return</strong> <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>.<a href="../D/21220.html" title="Multiple defined in 2 places.">getOperationName</a>();
<a id="L519" name="L519"></a> 519     <em class="brace">}</em>
<a id="L520" name="L520"></a> 520 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L524" name="L524"></a> 524     <strong class="reserved">public</strong> <a href="../D/6597.html" title="Multiple defined in 4 places.">Parameter</a>[] <a href="../R/10304.html" title="Multiple referred from 334 places.">arguments</a> ()<em class="brace">{</em>
<a id="L525" name="L525"></a> 525         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_ARGUMENTS );
<a id="L526" name="L526"></a> 526 
<a id="L527" name="L527"></a> 527         <strong class="reserved">if</strong>( cachedArguments == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L528" name="L528"></a> 528             <strong class="reserved">if</strong>( !<a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a> ) <em class="brace">{</em>
<a id="L529" name="L529"></a> 529                 <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29347.html" title="Multiple defined in 4 places.">piOperationNotSupported1</a>() ;
<a id="L530" name="L530"></a> 530             <em class="brace">}</em>
<a id="L531" name="L531"></a> 531 
<a id="L532" name="L532"></a> 532             <strong class="reserved">if</strong>( dsiArguments == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L533" name="L533"></a> 533                 <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29354.html" title="Multiple defined in 4 places.">piOperationNotSupported8</a>() ;
<a id="L534" name="L534"></a> 534             <em class="brace">}</em>
<a id="L535" name="L535"></a> 535 
<a id="L536" name="L536"></a> 536             <em class="comment">// If it is a DSI request then get the arguments from the DSI req</em>
<a id="L537" name="L537"></a> 537             <em class="comment">// and convert that into parameters.</em>
<a id="L538" name="L538"></a> 538             cachedArguments = <a href="../S/6869.html#L557" title="Defined at 557 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">nvListToParameterArray</a>( dsiArguments );
<a id="L539" name="L539"></a> 539         <em class="brace">}</em>
<a id="L540" name="L540"></a> 540 
<a id="L541" name="L541"></a> 541         <em class="comment">// Good citizen: In the interest of efficiency, we assume</em>
<a id="L542" name="L542"></a> 542         <em class="comment">// interceptors will be "good citizens" in that they will not</em>
<a id="L543" name="L543"></a> 543         <em class="comment">// modify the contents of the Parameter[] array.  We also assume</em>
<a id="L544" name="L544"></a> 544         <em class="comment">// they will not change the values of the containing Anys.</em>
<a id="L545" name="L545"></a> 545 
<a id="L546" name="L546"></a> 546         <strong class="reserved">return</strong> cachedArguments;
<a id="L547" name="L547"></a> 547     <em class="brace">}</em>
<a id="L548" name="L548"></a> 548 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L552" name="L552"></a> 552     <strong class="reserved">public</strong> <a href="../S/324.html#L170" title="Defined at 170 in src/org/omg/CORBA/TypeCode.java.">TypeCode</a>[] <a href="../R/14081.html" title="Multiple referred from 138 places.">exceptions</a> ()<em class="brace">{</em>
<a id="L553" name="L553"></a> 553         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_EXCEPTIONS );
<a id="L554" name="L554"></a> 554 
<a id="L555" name="L555"></a> 555         <em class="comment">// _REVISIT_ PI RTF Issue: No exception list on server side.</em>
<a id="L556" name="L556"></a> 556 
<a id="L557" name="L557"></a> 557         <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29348.html" title="Multiple defined in 4 places.">piOperationNotSupported2</a>() ;
<a id="L558" name="L558"></a> 558     <em class="brace">}</em>
<a id="L559" name="L559"></a> 559 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L563" name="L563"></a> 563     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] <a href="../R/11998.html" title="Multiple referred from 62 places.">contexts</a> ()<em class="brace">{</em>
<a id="L564" name="L564"></a> 564         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_CONTEXTS );
<a id="L565" name="L565"></a> 565 
<a id="L566" name="L566"></a> 566         <em class="comment">// We do not support this because our ORB does not send contexts.</em>
<a id="L567" name="L567"></a> 567 
<a id="L568" name="L568"></a> 568         <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29349.html" title="Multiple defined in 4 places.">piOperationNotSupported3</a>() ;
<a id="L569" name="L569"></a> 569     <em class="brace">}</em>
<a id="L570" name="L570"></a> 570 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L574" name="L574"></a> 574     <strong class="reserved">public</strong> <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a>[] operation_context ()<em class="brace">{</em>
<a id="L575" name="L575"></a> 575         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_OPERATION_CONTEXT );
<a id="L576" name="L576"></a> 576 
<a id="L577" name="L577"></a> 577         <em class="comment">// We do not support this because our ORB does not send</em>
<a id="L578" name="L578"></a> 578         <em class="comment">// operation_context.</em>
<a id="L579" name="L579"></a> 579 
<a id="L580" name="L580"></a> 580         <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29350.html" title="Multiple defined in 4 places.">piOperationNotSupported4</a>() ;
<a id="L581" name="L581"></a> 581     <em class="brace">}</em>
<a id="L582" name="L582"></a> 582 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L586" name="L586"></a> 586     <strong class="reserved">public</strong> <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> <a href="../R/26439.html" title="Multiple referred from 5465 places.">result</a> ()<em class="brace">{</em>
<a id="L587" name="L587"></a> 587         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_RESULT );
<a id="L588" name="L588"></a> 588 
<a id="L589" name="L589"></a> 589         <strong class="reserved">if</strong>( !<a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a> ) <em class="brace">{</em>
<a id="L590" name="L590"></a> 590             <strong class="reserved">throw</strong> stdWrapper.<a href="../D/29351.html" title="Multiple defined in 4 places.">piOperationNotSupported5</a>() ;
<a id="L591" name="L591"></a> 591         <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<a id="L593" name="L593"></a> 593         <strong class="reserved">if</strong>( dsiResult == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L594" name="L594"></a> 594             <strong class="reserved">throw</strong> wrapper.<a href="../D/29345.html" title="Multiple defined in 4 places.">piDsiResultIsNull</a>() ;
<a id="L595" name="L595"></a> 595         <em class="brace">}</em>
<a id="L596" name="L596"></a> 596 
<a id="L597" name="L597"></a> 597         <em class="comment">// Good citizen: In the interest of efficiency, we assume that</em>
<a id="L598" name="L598"></a> 598         <em class="comment">// interceptors will not modify the contents of the result Any.</em>
<a id="L599" name="L599"></a> 599         <em class="comment">// Otherwise, we would need to create a deep copy of the Any.</em>
<a id="L600" name="L600"></a> 600 
<a id="L601" name="L601"></a> 601         <strong class="reserved">return</strong> dsiResult;
<a id="L602" name="L602"></a> 602     <em class="brace">}</em>
<a id="L603" name="L603"></a> 603 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L607" name="L607"></a> 607     <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/26417.html" title="Multiple referred from 18 places.">response_expected</a> ()<em class="brace">{</em>
<a id="L608" name="L608"></a> 608         <em class="comment">// access is currently valid for all states:</em>
<a id="L609" name="L609"></a> 609         <em class="comment">//checkAccess( MID_RESPONSE_EXPECTED );</em>
<a id="L610" name="L610"></a> 610         <strong class="reserved">return</strong> !<a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>.<a href="../D/25994.html" title="Multiple defined in 2 places.">isOneWay</a>();
<a id="L611" name="L611"></a> 611     <em class="brace">}</em>
<a id="L612" name="L612"></a> 612 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L616" name="L616"></a> 616     <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/14777.html" title="Multiple referred from 6 places.">forward_reference</a> ()<em class="brace">{</em>
<a id="L617" name="L617"></a> 617         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_FORWARD_REFERENCE );
<a id="L618" name="L618"></a> 618         <em class="comment">// Check to make sure we are in LOCATION_FORWARD</em>
<a id="L619" name="L619"></a> 619         <em class="comment">// state as per ptc/00-08-06, table 21-2</em>
<a id="L620" name="L620"></a> 620         <em class="comment">// footnote 2.</em>
<a id="L621" name="L621"></a> 621         <strong class="reserved">if</strong>( replyStatus != <a href="../S/456.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/LOCATION_FORWARD.java.">LOCATION_FORWARD</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a> ) <em class="brace">{</em>
<a id="L622" name="L622"></a> 622             <strong class="reserved">throw</strong> stdWrapper.<a href="../D/25007.html" title="Multiple defined in 4 places.">invalidPiCall1</a>() ;
<a id="L623" name="L623"></a> 623         <em class="brace">}</em>
<a id="L624" name="L624"></a> 624 
<a id="L625" name="L625"></a> 625         <strong class="reserved">return</strong> <a href="../S/6869.html#L848" title="Defined at 848 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">getForwardRequestException</a>().forward;
<a id="L626" name="L626"></a> 626     <em class="brace">}</em>
<a id="L627" name="L627"></a> 627 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L631" name="L631"></a> 631     <strong class="reserved">public</strong> org.omg.IOP.<a href="../D/7865.html" title="Multiple defined in 2 places.">ServiceContext</a> get_request_service_context( <strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> ) <em class="brace">{</em>
<a id="L632" name="L632"></a> 632         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_GET_REQUEST_SERVICE_CONTEXT );
<a id="L633" name="L633"></a> 633 
<a id="L634" name="L634"></a> 634         <strong class="reserved">if</strong>( cachedRequestServiceContexts == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L635" name="L635"></a> 635             cachedRequestServiceContexts = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>();
<a id="L636" name="L636"></a> 636         <em class="brace">}</em>
<a id="L637" name="L637"></a> 637 
<a id="L638" name="L638"></a> 638         <strong class="reserved">return</strong> <a href="../S/6869.html#L638" title="Defined at 638 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">getServiceContext</a>( cachedRequestServiceContexts,
<a id="L639" name="L639"></a> 639                                   <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>.<a href="../D/22012.html" title="Multiple defined in 2 places.">getRequestServiceContexts</a>(), <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> );
<a id="L640" name="L640"></a> 640     <em class="brace">}</em>
<a id="L641" name="L641"></a> 641 
<div class="comment">
      See ServerRequestInfo for javadocs.</div>
<a id="L645" name="L645"></a> 645     <strong class="reserved">public</strong> org.omg.IOP.<a href="../D/7865.html" title="Multiple defined in 2 places.">ServiceContext</a> get_reply_service_context( <strong class="reserved">int</strong> <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> ) <em class="brace">{</em>
<a id="L646" name="L646"></a> 646         <a href="../D/12351.html" title="Multiple defined in 20 places.">checkAccess</a>( MID_GET_REPLY_SERVICE_CONTEXT );
<a id="L647" name="L647"></a> 647 
<a id="L648" name="L648"></a> 648         <strong class="reserved">if</strong>( cachedReplyServiceContexts == <strong class="reserved">null</strong> ) <em class="brace">{</em>
<a id="L649" name="L649"></a> 649             cachedReplyServiceContexts = <strong class="reserved">new</strong> <a href="../S/867.html#L137" title="Defined at 137 in src/java/util/HashMap.java.">HashMap</a>();
<a id="L650" name="L650"></a> 650         <em class="brace">}</em>
<a id="L651" name="L651"></a> 651 
<a id="L652" name="L652"></a> 652         <strong class="reserved">return</strong> <a href="../S/6869.html#L638" title="Defined at 638 in src/com/sun/corba/se/impl/interceptors/RequestInfoImpl.java.">getServiceContext</a>( cachedReplyServiceContexts,
<a id="L653" name="L653"></a> 653                                   replyMessage.<a href="../D/22439.html" title="Multiple defined in 8 places.">getServiceContexts</a>(), <a href="../D/24291.html" title="Multiple defined in 202 places.">id</a> );
<a id="L654" name="L654"></a> 654     <em class="brace">}</em>
<a id="L655" name="L655"></a> 655 
<div class="comment">
     *********************************************************************
      Private-scope classes and methods
     *********************************************************************</div>
<a id="L660" name="L660"></a> 660 
<a id="L661" name="L661"></a> 661     <em class="comment">// A command encapsulating a request to add a reply service context.</em>
<a id="L662" name="L662"></a> 662     <em class="comment">// These commands are enqueued until we have a handle on the actual</em>
<a id="L663" name="L663"></a> 663     <em class="comment">// reply service context, at which point they are executed.</em>
<a id="L664" name="L664"></a> 664     <strong class="reserved">private</strong> <strong class="reserved">class</strong> <a href="../R/324.html" title="Multiple referred from 7 places.">AddReplyServiceContextCommand</a> <em class="brace">{</em>
<a id="L665" name="L665"></a> 665         <a href="../D/7865.html" title="Multiple defined in 2 places.">ServiceContext</a> service_context;
<a id="L666" name="L666"></a> 666         <strong class="reserved">boolean</strong> <a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a>;
<a id="L667" name="L667"></a> 667     <em class="brace">}</em>
<a id="L668" name="L668"></a> 668 
<a id="L669" name="L669"></a> 669     <em class="comment">// Adds the given add reply service context command to the queue of</em>
<a id="L670" name="L670"></a> 670     <em class="comment">// such commands.  If a command is detected to have the same id as</em>
<a id="L671" name="L671"></a> 671     <em class="comment">// the service context in this command, and replace is false,</em>
<a id="L672" name="L672"></a> 672     <em class="comment">// BAD_INV_ORDER is thrown.  If replace is true, the original command</em>
<a id="L673" name="L673"></a> 673     <em class="comment">// in the queue is replaced by this command.</em>
<a id="L674" name="L674"></a> 674     <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/13893.html" title="Multiple referred from 18 places.">enqueue</a>( <a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a> addReply ) <em class="brace">{</em>
<a id="L675" name="L675"></a> 675         <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = addReplyServiceContextQueue.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L676" name="L676"></a> 676         <strong class="reserved">boolean</strong> found = <strong class="reserved">false</strong>;
<a id="L677" name="L677"></a> 677 
<a id="L678" name="L678"></a> 678         <strong class="reserved">for</strong>( <strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++ ) <em class="brace">{</em>
<a id="L679" name="L679"></a> 679             <a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a> cmd =
<a id="L680" name="L680"></a> 680                 (<a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a>)
<a id="L681" name="L681"></a> 681                 addReplyServiceContextQueue.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>( i );
<a id="L682" name="L682"></a> 682 
<a id="L683" name="L683"></a> 683             <strong class="reserved">if</strong>( cmd.service_context.context_id ==
<a id="L684" name="L684"></a> 684                 addReply.service_context.context_id )
<a id="L685" name="L685"></a> 685             <em class="brace">{</em>
<a id="L686" name="L686"></a> 686                 found = <strong class="reserved">true</strong>;
<a id="L687" name="L687"></a> 687                 <strong class="reserved">if</strong>( addReply.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a> ) <em class="brace">{</em>
<a id="L688" name="L688"></a> 688                     addReplyServiceContextQueue.<a href="../D/31832.html" title="Multiple defined in 134 places.">set</a>( i, addReply );
<a id="L689" name="L689"></a> 689                 <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L690" name="L690"></a> 690                     <strong class="reserved">throw</strong> stdWrapper.<a href="../D/31829.html" title="Multiple defined in 4 places.">serviceContextAddFailed</a>(
<a id="L691" name="L691"></a> 691                         <strong class="reserved">new</strong> <a href="../D/4299.html" title="Multiple defined in 4 places.">Integer</a>( cmd.service_context.context_id ) ) ;
<a id="L692" name="L692"></a> 692                 <em class="brace">}</em>
<a id="L693" name="L693"></a> 693                 <strong class="reserved">break</strong>;
<a id="L694" name="L694"></a> 694             <em class="brace">}</em>
<a id="L695" name="L695"></a> 695         <em class="brace">}</em>
<a id="L696" name="L696"></a> 696 
<a id="L697" name="L697"></a> 697         <strong class="reserved">if</strong>( !found ) <em class="brace">{</em>
<a id="L698" name="L698"></a> 698             addReplyServiceContextQueue.<a href="../D/10632.html" title="Multiple defined in 301 places.">add</a>( addReply );
<a id="L699" name="L699"></a> 699         <em class="brace">}</em>
<a id="L700" name="L700"></a> 700     <em class="brace">}</em>
<a id="L701" name="L701"></a> 701 
<div class="comment">
     *********************************************************************
      Package and protected-scope methods
     *********************************************************************</div>
<a id="L706" name="L706"></a> 706 
<div class="comment">
      Overridden from RequestInfoImpl.  This version calls the super
      and then, if we are changing to ending points, executes all
      enqueued AddReplyServiceContextCommands.</div>
<a id="L712" name="L712"></a> 712     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27131.html" title="Multiple referred from 6 places.">setCurrentExecutionPoint</a>( <strong class="reserved">int</strong> executionPoint ) <em class="brace">{</em>
<a id="L713" name="L713"></a> 713         <strong class="reserved">super</strong>.<a href="../D/32305.html" title="Multiple defined in 2 places.">setCurrentExecutionPoint</a>( executionPoint );
<a id="L714" name="L714"></a> 714 
<a id="L715" name="L715"></a> 715         <em class="comment">// If we are transitioning to ending point, we will now have a pointer</em>
<a id="L716" name="L716"></a> 716         <em class="comment">// to the reply service contexts, so we can execute all queued</em>
<a id="L717" name="L717"></a> 717         <em class="comment">// add reply service context requests.</em>
<a id="L718" name="L718"></a> 718         <strong class="reserved">if</strong>( (executionPoint == EXECUTION_POINT_ENDING) &amp;&amp;
<a id="L719" name="L719"></a> 719             (addReplyServiceContextQueue != <strong class="reserved">null</strong>) )
<a id="L720" name="L720"></a> 720         <em class="brace">{</em>
<a id="L721" name="L721"></a> 721             <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = addReplyServiceContextQueue.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L722" name="L722"></a> 722             <strong class="reserved">for</strong>( <strong class="reserved">int</strong> i = 0; i &lt; <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>; i++ ) <em class="brace">{</em>
<a id="L723" name="L723"></a> 723                 <a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a> addReply =
<a id="L724" name="L724"></a> 724                     (<a href="../S/6871.html#L664" title="Defined at 664 in src/com/sun/corba/se/impl/interceptors/ServerRequestInfoImpl.java.">AddReplyServiceContextCommand</a>)
<a id="L725" name="L725"></a> 725                     addReplyServiceContextQueue.<a href="../D/16676.html" title="Multiple defined in 434 places.">get</a>( i );
<a id="L726" name="L726"></a> 726                 <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L727" name="L727"></a> 727                     <a href="../D/11198.html" title="Multiple defined in 2 places.">add_reply_service_context</a>( addReply.service_context,
<a id="L728" name="L728"></a> 728                                                addReply.<a href="../D/31035.html" title="Multiple defined in 65 places.">replace</a> );
<a id="L729" name="L729"></a> 729                 <em class="brace">}</em>
<a id="L730" name="L730"></a> 730                 <strong class="reserved">catch</strong>( <a href="../S/440.html#L42" title="Defined at 42 in src/org/omg/CORBA/BAD_INV_ORDER.java.">BAD_INV_ORDER</a> e ) <em class="brace">{</em>
<a id="L731" name="L731"></a> 731                     <em class="comment">// _REVISIT_  The only way this can happen is if during</em>
<a id="L732" name="L732"></a> 732                     <em class="comment">// rrsc or rr, the interceptor tried to add with</em>
<a id="L733" name="L733"></a> 733                     <em class="comment">// replace=false to a service context that is present in</em>
<a id="L734" name="L734"></a> 734                     <em class="comment">// the reply message.  At that time there was no way for</em>
<a id="L735" name="L735"></a> 735                     <em class="comment">// us to check for this, so the best we can do is ignore</em>
<a id="L736" name="L736"></a> 736                     <em class="comment">// the original request.</em>
<a id="L737" name="L737"></a> 737                 <em class="brace">}</em>
<a id="L738" name="L738"></a> 738             <em class="brace">}</em>
<a id="L739" name="L739"></a> 739 
<a id="L740" name="L740"></a> 740             <em class="comment">// We specifically do not empty the SC queue so that if</em>
<a id="L741" name="L741"></a> 741             <em class="comment">// the interceptor raises an exception the queued service contexts</em>
<a id="L742" name="L742"></a> 742             <em class="comment">// will be put in the exception response.</em>
<a id="L743" name="L743"></a> 743         <em class="brace">}</em>
<a id="L744" name="L744"></a> 744     <em class="brace">}</em>
<a id="L745" name="L745"></a> 745 
<div class="comment">
      Stores the various sources of information used for this info object.</div>
<a id="L749" name="L749"></a> 749     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27563.html" title="Multiple referred from 3 places.">setInfo</a>( <a href="../S/7520.html#L63" title="Defined at 63 in src/com/sun/corba/se/spi/protocol/CorbaMessageMediator.java.">CorbaMessageMediator</a> <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>, <a href="../S/7536.html#L161" title="Defined at 161 in src/com/sun/corba/se/spi/oa/ObjectAdapter.java.">ObjectAdapter</a> <a href="../S/7537.html#L81" title="Defined at 81 in src/com/sun/corba/se/spi/oa/OAInvocationInfo.java.">oa</a>,
<a id="L750" name="L750"></a> 750         <strong class="reserved">byte</strong>[] objectId, <a href="../S/7480.html#L40" title="Defined at 40 in src/com/sun/corba/se/spi/ior/ObjectKeyTemplate.java.">ObjectKeyTemplate</a> oktemp )
<a id="L751" name="L751"></a> 751     <em class="brace">{</em>
<a id="L752" name="L752"></a> 752         <strong class="reserved">this</strong>.<a href="../D/31115.html" title="Multiple defined in 8 places.">request</a> = <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>;
<a id="L753" name="L753"></a> 753         <strong class="reserved">this</strong>.objectId = objectId;
<a id="L754" name="L754"></a> 754         <strong class="reserved">this</strong>.oktemp = oktemp;
<a id="L755" name="L755"></a> 755         <strong class="reserved">this</strong>.objectAdapter = <a href="../S/7537.html#L81" title="Defined at 81 in src/com/sun/corba/se/spi/oa/OAInvocationInfo.java.">oa</a> ;
<a id="L756" name="L756"></a> 756         <strong class="reserved">this</strong>.<a href="../D/13259.html" title="Multiple defined in 3 places.">connection</a> = (com.sun.corba.se.spi.legacy.<a href="../D/13259.html" title="Multiple defined in 3 places.">connection</a>.<a href="../D/1801.html" title="Multiple defined in 3 places.">Connection</a>)
<a id="L757" name="L757"></a> 757             <a href="../D/31115.html" title="Multiple defined in 8 places.">request</a>.<a href="../D/17912.html" title="Multiple defined in 20 places.">getConnection</a>();
<a id="L758" name="L758"></a> 758     <em class="brace">}</em>
<a id="L759" name="L759"></a> 759 
<div class="comment">
      Stores the various sources of information used for this info object.</div>
<a id="L763" name="L763"></a> 763     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/6864.html#L678" title="Referred from 678 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">setDSIArguments</a>( <a href="../S/274.html#L93" title="Defined at 93 in src/org/omg/CORBA/NVList.java.">NVList</a> <a href="../D/11487.html" title="Multiple defined in 15 places.">arguments</a> ) <em class="brace">{</em>
<a id="L764" name="L764"></a> 764         <strong class="reserved">this</strong>.dsiArguments = <a href="../D/11487.html" title="Multiple defined in 15 places.">arguments</a>;
<a id="L765" name="L765"></a> 765     <em class="brace">}</em>
<a id="L766" name="L766"></a> 766 
<div class="comment">
      Stores the various sources of information used for this info object.</div>
<a id="L770" name="L770"></a> 770     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/6864.html#L686" title="Referred from 686 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">setDSIException</a>( <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> ) <em class="brace">{</em>
<a id="L771" name="L771"></a> 771         <strong class="reserved">this</strong>.dsiException = <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a>;
<a id="L772" name="L772"></a> 772 
<a id="L773" name="L773"></a> 773         <em class="comment">// Clear cached exception value:</em>
<a id="L774" name="L774"></a> 774         cachedSendingException = <strong class="reserved">null</strong>;
<a id="L775" name="L775"></a> 775     <em class="brace">}</em>
<a id="L776" name="L776"></a> 776 
<div class="comment">
      Stores the various sources of information used for this info object.</div>
<a id="L780" name="L780"></a> 780     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../S/6864.html#L694" title="Referred from 694 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">setDSIResult</a>( <a href="../D/440.html" title="Multiple defined in 2 places.">Any</a> <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a> ) <em class="brace">{</em>
<a id="L781" name="L781"></a> 781         <strong class="reserved">this</strong>.dsiResult = <a href="../D/31365.html" title="Multiple defined in 7 places.">result</a>;
<a id="L782" name="L782"></a> 782     <em class="brace">}</em>
<a id="L783" name="L783"></a> 783 
<div class="comment">
      Sets the exception to be returned by received_exception and
      received_exception_id.</div>
<a id="L788" name="L788"></a> 788     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27359.html" title="Multiple referred from 12 places.">setException</a>( <a href="../S/1582.html#L45" title="Defined at 45 in src/java/lang/Exception.java.">Exception</a> <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> ) <em class="brace">{</em>
<a id="L789" name="L789"></a> 789         <strong class="reserved">super</strong>.<a href="../D/32637.html" title="Multiple defined in 4 places.">setException</a>( <a href="../D/15769.html" title="Multiple defined in 5 places.">exception</a> );
<a id="L790" name="L790"></a> 790 
<a id="L791" name="L791"></a> 791         <em class="comment">// Make sure DSIException is null because this is the more recent one.</em>
<a id="L792" name="L792"></a> 792         <strong class="reserved">this</strong>.dsiException = <strong class="reserved">null</strong>;
<a id="L793" name="L793"></a> 793 
<a id="L794" name="L794"></a> 794         <em class="comment">// Clear cached exception value:</em>
<a id="L795" name="L795"></a> 795         cachedSendingException = <strong class="reserved">null</strong>;
<a id="L796" name="L796"></a> 796     <em class="brace">}</em>
<a id="L797" name="L797"></a> 797 
<div class="comment">
      Stores the various sources of information used for this info object.</div>
<a id="L801" name="L801"></a> 801     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27563.html" title="Multiple referred from 3 places.">setInfo</a>( <a href="../S/3625.html#L43" title="Defined at 43 in src/javax/management/remote/rmi/RMIConnectionImpl_Stub.java.">java</a>.lang.<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> servant,
<a id="L802" name="L802"></a> 802                             <a href="../D/8419.html" title="Multiple defined in 2 places.">String</a> targetMostDerivedInterface )
<a id="L803" name="L803"></a> 803     <em class="brace">{</em>
<a id="L804" name="L804"></a> 804         <strong class="reserved">this</strong>.servant = servant;
<a id="L805" name="L805"></a> 805         <strong class="reserved">this</strong>.targetMostDerivedInterface = targetMostDerivedInterface;
<a id="L806" name="L806"></a> 806         <strong class="reserved">this</strong>.<a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a> =
<a id="L807" name="L807"></a> 807             (servant <strong class="reserved">instanceof</strong>
<a id="L808" name="L808"></a> 808             org.omg.PortableServer.<a href="../D/2723.html" title="Multiple defined in 2 places.">DynamicImplementation</a>) ||
<a id="L809" name="L809"></a> 809             (servant <strong class="reserved">instanceof</strong> org.omg.CORBA.<a href="../D/2723.html" title="Multiple defined in 2 places.">DynamicImplementation</a>);
<a id="L810" name="L810"></a> 810     <em class="brace">}</em>
<a id="L811" name="L811"></a> 811 
<div class="comment">
      Set reply message</div>
<a id="L815" name="L815"></a> 815     <strong class="reserved">void</strong> <a href="../S/6864.html#L593" title="Referred from 593 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">setReplyMessage</a>( <a href="../S/7095.html#L38" title="Defined at 38 in src/com/sun/corba/se/impl/protocol/giopmsgheaders/ReplyMessage.java.">ReplyMessage</a> replyMessage ) <em class="brace">{</em>
<a id="L816" name="L816"></a> 816         <strong class="reserved">this</strong>.replyMessage = replyMessage;
<a id="L817" name="L817"></a> 817     <em class="brace">}</em>
<a id="L818" name="L818"></a> 818 
<div class="comment">
      Overridden from RequestInfoImpl.  Calls the super class, then
      sets the ending point call depending on the reply status.</div>
<a id="L823" name="L823"></a> 823     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/28024.html" title="Multiple referred from 16 places.">setReplyStatus</a>( <strong class="reserved">short</strong> replyStatus ) <em class="brace">{</em>
<a id="L824" name="L824"></a> 824         <strong class="reserved">super</strong>.<a href="../D/33703.html" title="Multiple defined in 3 places.">setReplyStatus</a>( replyStatus );
<a id="L825" name="L825"></a> 825         <strong class="reserved">switch</strong>( replyStatus ) <em class="brace">{</em>
<a id="L826" name="L826"></a> 826         <strong class="reserved">case</strong> <a href="../S/472.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/SUCCESSFUL.java.">SUCCESSFUL</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>:
<a id="L827" name="L827"></a> 827             endingPointCall = CALL_SEND_REPLY;
<a id="L828" name="L828"></a> 828             <strong class="reserved">break</strong>;
<a id="L829" name="L829"></a> 829         <strong class="reserved">case</strong> <a href="../S/457.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/SYSTEM_EXCEPTION.java.">SYSTEM_EXCEPTION</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>:
<a id="L830" name="L830"></a> 830         <strong class="reserved">case</strong> <a href="../S/464.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/USER_EXCEPTION.java.">USER_EXCEPTION</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>:
<a id="L831" name="L831"></a> 831             endingPointCall = CALL_SEND_EXCEPTION;
<a id="L832" name="L832"></a> 832             <strong class="reserved">break</strong>;
<a id="L833" name="L833"></a> 833         <strong class="reserved">case</strong> <a href="../S/456.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/LOCATION_FORWARD.java.">LOCATION_FORWARD</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>:
<a id="L834" name="L834"></a> 834         <strong class="reserved">case</strong> <a href="../S/479.html#L11" title="Defined at 11 in src/org/omg/PortableInterceptor/TRANSPORT_RETRY.java.">TRANSPORT_RETRY</a>.<a href="../D/36360.html" title="Multiple defined in 73 places.">value</a>:
<a id="L835" name="L835"></a> 835             endingPointCall = CALL_SEND_OTHER;
<a id="L836" name="L836"></a> 836             <strong class="reserved">break</strong>;
<a id="L837" name="L837"></a> 837         <em class="brace">}</em>
<a id="L838" name="L838"></a> 838     <em class="brace">}</em>
<a id="L839" name="L839"></a> 839 
<div class="comment">
      Release the servant object so the user has control over its lifetime.
      Called after receive_request is finished executing.</div>
<a id="L844" name="L844"></a> 844     <strong class="reserved">void</strong> <a href="../S/6864.html#L581" title="Referred from 581 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">releaseServant</a>() <em class="brace">{</em>
<a id="L845" name="L845"></a> 845         <strong class="reserved">this</strong>.servant = <strong class="reserved">null</strong>;
<a id="L846" name="L846"></a> 846     <em class="brace">}</em>
<a id="L847" name="L847"></a> 847 
<div class="comment">
      Sets the forwardRequestRaisedInEnding flag to true, indicating that
      a server ending point has raised location forward at some point.</div>
<a id="L852" name="L852"></a> 852     <strong class="reserved">void</strong> <a href="../S/6860.html#L610" title="Referred from 610 in src/com/sun/corba/se/impl/interceptors/InterceptorInvoker.java.">setForwardRequestRaisedInEnding</a>() <em class="brace">{</em>
<a id="L853" name="L853"></a> 853         <strong class="reserved">this</strong>.forwardRequestRaisedInEnding = <strong class="reserved">true</strong>;
<a id="L854" name="L854"></a> 854     <em class="brace">}</em>
<a id="L855" name="L855"></a> 855 
<div class="comment">
      Returns true if ForwardRequest was raised by a server ending point
      or false otherwise.</div>
<a id="L860" name="L860"></a> 860     <strong class="reserved">boolean</strong> <a href="../S/6864.html#L658" title="Referred from 658 in src/com/sun/corba/se/impl/interceptors/PIHandlerImpl.java.">isForwardRequestRaisedInEnding</a>() <em class="brace">{</em>
<a id="L861" name="L861"></a> 861         <strong class="reserved">return</strong> <strong class="reserved">this</strong>.forwardRequestRaisedInEnding;
<a id="L862" name="L862"></a> 862     <em class="brace">}</em>
<a id="L863" name="L863"></a> 863 
<div class="comment">
      Returns true if this is a dynamic invocation, or false if not</div>
<a id="L867" name="L867"></a> 867     <strong class="reserved">boolean</strong> <a href="../R/21393.html" title="Multiple referred from 20 places.">isDynamic</a>() <em class="brace">{</em>
<a id="L868" name="L868"></a> 868       <strong class="reserved">return</strong> <strong class="reserved">this</strong>.<a href="../D/25479.html" title="Multiple defined in 5 places.">isDynamic</a>;
<a id="L869" name="L869"></a> 869     <em class="brace">}</em>
<a id="L870" name="L870"></a> 870 
<div class="comment">
      See description for RequestInfoImpl.checkAccess</div>
<a id="L874" name="L874"></a> 874     <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/11068.html" title="Multiple referred from 112 places.">checkAccess</a>( <strong class="reserved">int</strong> methodID )
<a id="L875" name="L875"></a> 875     <em class="brace">{</em>
<a id="L876" name="L876"></a> 876         <em class="comment">// Make sure currentPoint matches the appropriate index in the</em>
<a id="L877" name="L877"></a> 877         <em class="comment">// validCall table:</em>
<a id="L878" name="L878"></a> 878         <strong class="reserved">int</strong> validCallIndex = 0;
<a id="L879" name="L879"></a> 879         <strong class="reserved">switch</strong>( currentExecutionPoint ) <em class="brace">{</em>
<a id="L880" name="L880"></a> 880         <strong class="reserved">case</strong> EXECUTION_POINT_STARTING:
<a id="L881" name="L881"></a> 881             validCallIndex = 0;
<a id="L882" name="L882"></a> 882             <strong class="reserved">break</strong>;
<a id="L883" name="L883"></a> 883         <strong class="reserved">case</strong> EXECUTION_POINT_INTERMEDIATE:
<a id="L884" name="L884"></a> 884             validCallIndex = 1;
<a id="L885" name="L885"></a> 885             <strong class="reserved">break</strong>;
<a id="L886" name="L886"></a> 886         <strong class="reserved">case</strong> EXECUTION_POINT_ENDING:
<a id="L887" name="L887"></a> 887             <strong class="reserved">switch</strong>( endingPointCall ) <em class="brace">{</em>
<a id="L888" name="L888"></a> 888             <strong class="reserved">case</strong> CALL_SEND_REPLY:
<a id="L889" name="L889"></a> 889                 validCallIndex = 2;
<a id="L890" name="L890"></a> 890                 <strong class="reserved">break</strong>;
<a id="L891" name="L891"></a> 891             <strong class="reserved">case</strong> CALL_SEND_EXCEPTION:
<a id="L892" name="L892"></a> 892                 validCallIndex = 3;
<a id="L893" name="L893"></a> 893                 <strong class="reserved">break</strong>;
<a id="L894" name="L894"></a> 894             <strong class="reserved">case</strong> CALL_SEND_OTHER:
<a id="L895" name="L895"></a> 895                 validCallIndex = 4;
<a id="L896" name="L896"></a> 896                 <strong class="reserved">break</strong>;
<a id="L897" name="L897"></a> 897             <em class="brace">}</em>
<a id="L898" name="L898"></a> 898             <strong class="reserved">break</strong>;
<a id="L899" name="L899"></a> 899         <em class="brace">}</em>
<a id="L900" name="L900"></a> 900 
<a id="L901" name="L901"></a> 901         <em class="comment">// Check the validCall table:</em>
<a id="L902" name="L902"></a> 902         <strong class="reserved">if</strong>( !validCall[methodID][validCallIndex] ) <em class="brace">{</em>
<a id="L903" name="L903"></a> 903             <strong class="reserved">throw</strong> stdWrapper.<a href="../D/25008.html" title="Multiple defined in 4 places.">invalidPiCall2</a>() ;
<a id="L904" name="L904"></a> 904         <em class="brace">}</em>
<a id="L905" name="L905"></a> 905     <em class="brace">}</em>
<a id="L906" name="L906"></a> 906 
<a id="L907" name="L907"></a> 907 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L139">[^]</a><a href="#L874">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>
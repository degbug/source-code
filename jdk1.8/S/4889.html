<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java</title>
<meta name="robots" content="noindex,nofollow">
<meta name="generator" content="GLOBAL-6.6.3">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<a id="TOP" name="TOP"></a><div class="comment">
/* [&lt;][&gt;]<a href="#L67">[^]</a><a href="#L958">[v]</a>[top]<a href="#BOTTOM">[bottom]</a><a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
<hr>
<h2 class="header">DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href="#L67" title="Defined at 67.">getVector</a></li>
<li><a href="#L78" title="Defined at 78.">getCache</a></li>
<li><a href="#L85" title="Defined at 85.">SetVector</a></li>
<li><a href="#L95" title="Defined at 95.">hasCache</a></li>
<li><a href="#L106" title="Defined at 106.">cacheComplete</a></li>
<li><a href="#L120" title="Defined at 120.">markCacheComplete</a></li>
<li><a href="#L137" title="Defined at 137.">setIter</a></li>
<li><a href="#L146" title="Defined at 146.">getContainedIter</a></li>
<li><a href="#L222" title="Defined at 222.">getDTM</a></li>
<li><a href="#L237" title="Defined at 237.">getDTMManager</a></li>
<li><a href="#L245" title="Defined at 245.">getRoot</a></li>
<li><a href="#L261" title="Defined at 261.">setRoot</a></li>
<li><a href="#L290" title="Defined at 290.">reset</a></li>
<li><a href="#L299" title="Defined at 299.">getWhatToShow</a></li>
<li><a href="#L308" title="Defined at 308.">getExpandEntityReferences</a></li>
<li><a href="#L319" title="Defined at 319.">nextNode</a></li>
<li><a href="#L381" title="Defined at 381.">previousNode</a></li>
<li><a href="#L404" title="Defined at 404.">detach</a></li>
<li><a href="#L416" title="Defined at 416.">allowDetachToRelease</a></li>
<li><a href="#L431" title="Defined at 431.">getCurrentNode</a></li>
<li><a href="#L454" title="Defined at 454.">isFresh</a></li>
<li><a href="#L462" title="Defined at 462.">setShouldCacheNodes</a></li>
<li><a href="#L480" title="Defined at 480.">isMutable</a></li>
<li><a href="#L488" title="Defined at 488.">getCurrentPos</a></li>
<li><a href="#L496" title="Defined at 496.">runTo</a></li>
<li><a href="#L528" title="Defined at 528.">setCurrentPos</a></li>
<li><a href="#L536" title="Defined at 536.">item</a></li>
<li><a href="#L547" title="Defined at 547.">setItem</a></li>
<li><a href="#L596" title="Defined at 596.">getLength</a></li>
<li><a href="#L636" title="Defined at 636.">cloneWithReset</a></li>
<li><a href="#L661" title="Defined at 661.">clone</a></li>
<li><a href="#L681" title="Defined at 681.">isDocOrdered</a></li>
<li><a href="#L692" title="Defined at 692.">getAxis</a></li>
<li><a href="#L706" title="Defined at 706.">getAnalysisBits</a></li>
<li><a href="#L717" title="Defined at 717.">fixupVariables</a></li>
<li><a href="#L730" title="Defined at 730.">addNodeInDocOrder</a></li>
<li><a href="#L786" title="Defined at 786.">setObject</a></li>
<li><a href="#L899" title="Defined at 899.">useCount</a></li>
<li><a href="#L909" title="Defined at 909.">increaseUseCount</a></li>
<li><a href="#L920" title="Defined at 920.">setVector</a></li>
<li><a href="#L929" title="Defined at 929.">getVector</a></li>
<li><a href="#L938" title="Defined at 938.">setCacheComplete</a></li>
<li><a href="#L947" title="Defined at 947.">isComplete</a></li>
<li><a href="#L958" title="Defined at 958.">getIteratorCache</a></li>
</ol>
<hr>
<pre>
<div class="comment">
  Copyright (c) 2007, 2015, Oracle and/or its affiliates. All rights reserved.
  ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</div>
<div class="comment">
  Copyright 2002-2004 The Apache Software Foundation.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div class="comment">
  $Id: NodeSequence.java,v 1.6 2007/01/12 19:26:42 spericas Exp $</div>
<a id="L23" name="L23"></a>  23 <strong class="reserved">package</strong> com.sun.org.apache.xpath.internal.axes;
<a id="L24" name="L24"></a>  24 
<a id="L25" name="L25"></a>  25 <strong class="reserved">import</strong> java.util.Vector;
<a id="L26" name="L26"></a>  26 
<a id="L27" name="L27"></a>  27 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTM;
<a id="L28" name="L28"></a>  28 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMFilter;
<a id="L29" name="L29"></a>  29 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMIterator;
<a id="L30" name="L30"></a>  30 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.dtm.DTMManager;
<a id="L31" name="L31"></a>  31 <strong class="reserved">import</strong> com.sun.org.apache.xml.internal.utils.NodeVector;
<a id="L32" name="L32"></a>  32 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.NodeSetDTM;
<a id="L33" name="L33"></a>  33 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.XPathContext;
<a id="L34" name="L34"></a>  34 <strong class="reserved">import</strong> com.sun.org.apache.xpath.internal.objects.XObject;
<a id="L35" name="L35"></a>  35 
<div class="comment">
  This class is the dynamic wrapper for a Xalan DTMIterator instance, and
  provides random access capabilities.</div>
<a id="L40" name="L40"></a>  40 <strong class="reserved">public</strong> <strong class="reserved">class</strong> <a href="../R/5561.html" title="Multiple referred from 4 places.">NodeSequence</a> <strong class="reserved">extends</strong> <a href="../S/4899.html#L50" title="Defined at 50 in src/com/sun/org/apache/xpath/internal/objects/XObject.java.">XObject</a>
<a id="L41" name="L41"></a>  41   <strong class="reserved">implements</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>, <a href="../S/1744.html#L53" title="Defined at 53 in src/java/lang/Cloneable.java.">Cloneable</a>, <a href="../S/4870.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/axes/PathComponent.java.">PathComponent</a>
<a id="L42" name="L42"></a>  42 <em class="brace">{</em>
<a id="L43" name="L43"></a>  43     <strong class="reserved">static</strong> <strong class="reserved">final</strong> <strong class="reserved">long</strong> serialVersionUID = 3866261934726581044L;
<div class="comment">
   /** The index of the last node in the iteration. */</div>
<a id="L45" name="L45"></a>  45   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_last = -1;
<a id="L46" name="L46"></a>  46 
<div class="comment">
    The index of the next node to be fetched.  Useful if this
    is a cached iterator, and is being used as random access
    NodeList.</div>
<a id="L52" name="L52"></a>  52   <strong class="reserved">protected</strong> <strong class="reserved">int</strong> m_next = 0;
<a id="L53" name="L53"></a>  53 
<div class="comment">
    A cache of a list of nodes obtained from the iterator so far.
    This list is appended to until the iterator is exhausted and
    the cache is complete.
    <p>
    Multiple NodeSequence objects may share the same cache.</p></div>
<a id="L61" name="L61"></a>  61   <strong class="reserved">private</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> m_cache;
<a id="L62" name="L62"></a>  62 
<div class="comment">
    If this iterator needs to cache nodes that are fetched, they
    are stored in the Vector in the generic object.</div>
<a id="L67" name="L67"></a>  67   <strong class="reserved">protected</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> <a href="../R/19784.html" title="Multiple referred from 21 places.">getVector</a>() <em class="brace">{</em>
<a id="L68" name="L68"></a>  68       <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv = (m_cache != <strong class="reserved">null</strong>) ?  m_cache.<a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>() : <strong class="reserved">null</strong>;
<a id="L69" name="L69"></a>  69       <strong class="reserved">return</strong> nv;
<a id="L70" name="L70"></a>  70   <em class="brace">}</em>
<a id="L71" name="L71"></a>  71 
<div class="comment">
    Get the cache (if any) of nodes obtained from
    the iterator so far. Note that the cache keeps
    growing until the iterator is walked to exhaustion,
    at which point the cache is "complete".</div>
<a id="L78" name="L78"></a>  78   <strong class="reserved">private</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> <a href="../R/15402.html" title="Multiple referred from 6 places.">getCache</a>() <em class="brace">{</em>
<a id="L79" name="L79"></a>  79       <strong class="reserved">return</strong> m_cache;
<a id="L80" name="L80"></a>  80   <em class="brace">}</em>
<a id="L81" name="L81"></a>  81 
<div class="comment">
    Set the vector where nodes will be cached.</div>
<a id="L85" name="L85"></a>  85   <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/7174.html" title="Multiple referred from 4 places.">SetVector</a>(<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> v)
<a id="L86" name="L86"></a>  86   <em class="brace">{</em>
<a id="L87" name="L87"></a>  87         <a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(v);
<a id="L88" name="L88"></a>  88   <em class="brace">}</em>
<a id="L89" name="L89"></a>  89 
<a id="L90" name="L90"></a>  90 
<div class="comment">
    If the iterator needs to cache nodes as they are fetched,
    then this method returns true.</div>
<a id="L95" name="L95"></a>  95   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/20182.html" title="Multiple referred from 14 places.">hasCache</a>()
<a id="L96" name="L96"></a>  96   <em class="brace">{</em>
<a id="L97" name="L97"></a>  97     <strong class="reserved">final</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L98" name="L98"></a>  98         <strong class="reserved">return</strong> (nv != <strong class="reserved">null</strong>);
<a id="L99" name="L99"></a>  99   <em class="brace">}</em>
<a id="L100" name="L100"></a> 100 
<div class="comment">
    If this NodeSequence has a cache, and that cache is
    fully populated then this method returns true, otherwise
    if there is no cache or it is not complete it returns false.</div>
<a id="L106" name="L106"></a> 106   <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../S/4889.html#L334" title="Referred from 334 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">cacheComplete</a>() <em class="brace">{</em>
<a id="L107" name="L107"></a> 107       <strong class="reserved">final</strong> <strong class="reserved">boolean</strong> <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a>;
<a id="L108" name="L108"></a> 108       <strong class="reserved">if</strong> (m_cache != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L109" name="L109"></a> 109           <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a> = m_cache.<a href="../D/25336.html" title="Multiple defined in 3 places.">isComplete</a>();
<a id="L110" name="L110"></a> 110       <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L111" name="L111"></a> 111           <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a> = <strong class="reserved">false</strong>;
<a id="L112" name="L112"></a> 112       <em class="brace">}</em>
<a id="L113" name="L113"></a> 113       <strong class="reserved">return</strong> <a href="../D/13120.html" title="Multiple defined in 6 places.">complete</a>;
<a id="L114" name="L114"></a> 114   <em class="brace">}</em>
<a id="L115" name="L115"></a> 115 
<div class="comment">
    If this NodeSequence has a cache, mark that it is complete.
    This method should be called after the iterator is exhausted.</div>
<a id="L120" name="L120"></a> 120   <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../S/4889.html#L369" title="Referred from 369 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">markCacheComplete</a>() <em class="brace">{</em>
<a id="L121" name="L121"></a> 121       <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L122" name="L122"></a> 122       <strong class="reserved">if</strong> (nv != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L123" name="L123"></a> 123           m_cache.<a href="../S/4889.html#L938" title="Defined at 938 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setCacheComplete</a>(<strong class="reserved">true</strong>);
<a id="L124" name="L124"></a> 124       <em class="brace">}</em>
<a id="L125" name="L125"></a> 125   <em class="brace">}</em>
<a id="L126" name="L126"></a> 126 
<a id="L127" name="L127"></a> 127 
<div class="comment">
    The functional iterator that fetches nodes.</div>
<a id="L131" name="L131"></a> 131   <strong class="reserved">protected</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> m_iter;
<a id="L132" name="L132"></a> 132 
<div class="comment">
    Set the functional iterator that fetches nodes.
    @param iter The iterator that is to be contained.</div>
<a id="L137" name="L137"></a> 137   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <strong class="reserved">void</strong> <a href="../R/27609.html" title="Multiple referred from 5 places.">setIter</a>(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>)
<a id="L138" name="L138"></a> 138   <em class="brace">{</em>
<a id="L139" name="L139"></a> 139         m_iter = <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>;
<a id="L140" name="L140"></a> 140   <em class="brace">}</em>
<a id="L141" name="L141"></a> 141 
<div class="comment">
    Get the functional iterator that fetches nodes.
    @return The contained iterator.</div>
<a id="L146" name="L146"></a> 146   <strong class="reserved">public</strong> <strong class="reserved">final</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../S/4917.html#L69" title="Referred from 69 in src/com/sun/org/apache/xpath/internal/operations/VariableSafeAbsRef.java.">getContainedIter</a>()
<a id="L147" name="L147"></a> 147   <em class="brace">{</em>
<a id="L148" name="L148"></a> 148         <strong class="reserved">return</strong> m_iter;
<a id="L149" name="L149"></a> 149   <em class="brace">}</em>
<a id="L150" name="L150"></a> 150 
<div class="comment">
    The DTMManager to use if we're using a NodeVector only.
    We may well want to do away with this, and store it in the NodeVector.</div>
<a id="L155" name="L155"></a> 155   <strong class="reserved">protected</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> m_dtmMgr;
<a id="L156" name="L156"></a> 156 
<a id="L157" name="L157"></a> 157   <em class="comment">// ==== Constructors ====</em>
<a id="L158" name="L158"></a> 158 
<div class="comment">
    Create a new NodeSequence from a (already cloned) iterator.
    @param iter Cloned (not static) DTMIterator.
    @param context The initial context node.
    @param xctxt The execution context.
    @param shouldCacheNodes True if this sequence can random access.</div>
<a id="L167" name="L167"></a> 167   <strong class="reserved">private</strong> NodeSequence(<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>, <strong class="reserved">int</strong> <a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt, <strong class="reserved">boolean</strong> shouldCacheNodes)
<a id="L168" name="L168"></a> 168   <em class="brace">{</em>
<a id="L169" name="L169"></a> 169         <a href="../S/4889.html#L137" title="Defined at 137 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setIter</a>(<a href="../D/26587.html" title="Multiple defined in 2 places.">iter</a>);
<a id="L170" name="L170"></a> 170         <a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(<a href="../S/1916.html#L117" title="Defined at 117 in src/java/nio/file/WatchEvent.java.">context</a>, xctxt);
<a id="L171" name="L171"></a> 171         <a href="../D/33906.html" title="Multiple defined in 6 places.">setShouldCacheNodes</a>(shouldCacheNodes);
<a id="L172" name="L172"></a> 172   <em class="brace">}</em>
<a id="L173" name="L173"></a> 173 
<div class="comment">
    Create a new NodeSequence from a (already cloned) iterator.
    @param nodeVector</div>
<a id="L179" name="L179"></a> 179   <strong class="reserved">public</strong> NodeSequence(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> nodeVector)
<a id="L180" name="L180"></a> 180   <em class="brace">{</em>
<a id="L181" name="L181"></a> 181         <strong class="reserved">super</strong>(nodeVector);
<a id="L182" name="L182"></a> 182     <strong class="reserved">if</strong> (nodeVector <strong class="reserved">instanceof</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>) <em class="brace">{</em>
<a id="L183" name="L183"></a> 183         <a href="../S/4889.html#L85" title="Defined at 85 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">SetVector</a>((<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>) nodeVector);
<a id="L184" name="L184"></a> 184     <em class="brace">}</em>
<a id="L185" name="L185"></a> 185         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != nodeVector)
<a id="L186" name="L186"></a> 186         <em class="brace">{</em>
<a id="L187" name="L187"></a> 187                 <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(nodeVector <strong class="reserved">instanceof</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>,
<a id="L188" name="L188"></a> 188                         "Must have a NodeVector as the object for NodeSequence!");
<a id="L189" name="L189"></a> 189                 <strong class="reserved">if</strong>(nodeVector <strong class="reserved">instanceof</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>)
<a id="L190" name="L190"></a> 190                 <em class="brace">{</em>
<a id="L191" name="L191"></a> 191                         <a href="../S/4889.html#L137" title="Defined at 137 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setIter</a>((<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>)nodeVector);
<a id="L192" name="L192"></a> 192                         m_last = ((<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>)nodeVector).<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L193" name="L193"></a> 193                 <em class="brace">}</em>
<a id="L194" name="L194"></a> 194 
<a id="L195" name="L195"></a> 195         <em class="brace">}</em>
<a id="L196" name="L196"></a> 196   <em class="brace">}</em>
<a id="L197" name="L197"></a> 197 
<div class="comment">
    Construct an empty XNodeSet object.  This is used to create a mutable
    nodeset to which random nodes may be added.</div>
<a id="L202" name="L202"></a> 202   <strong class="reserved">private</strong> NodeSequence(<a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> dtmMgr)
<a id="L203" name="L203"></a> 203   <em class="brace">{</em>
<a id="L204" name="L204"></a> 204     <strong class="reserved">super</strong>(<strong class="reserved">new</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>());
<a id="L205" name="L205"></a> 205     m_last = 0;
<a id="L206" name="L206"></a> 206     m_dtmMgr = dtmMgr;
<a id="L207" name="L207"></a> 207   <em class="brace">}</em>
<a id="L208" name="L208"></a> 208 
<a id="L209" name="L209"></a> 209 
<div class="comment">
    Create a new NodeSequence in an invalid (null) state.</div>
<a id="L213" name="L213"></a> 213   <strong class="reserved">public</strong> NodeSequence()
<a id="L214" name="L214"></a> 214   <em class="brace">{</em>
<a id="L215" name="L215"></a> 215       <strong class="reserved">return</strong>;
<a id="L216" name="L216"></a> 216   <em class="brace">}</em>
<a id="L217" name="L217"></a> 217 
<a id="L218" name="L218"></a> 218 
<div class="comment">
    @see DTMIterator#getDTM(int)</div>
<a id="L222" name="L222"></a> 222   <strong class="reserved">public</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> <a href="../R/15933.html" title="Multiple referred from 85 places.">getDTM</a>(<strong class="reserved">int</strong> nodeHandle)
<a id="L223" name="L223"></a> 223   <em class="brace">{</em>
<a id="L224" name="L224"></a> 224         <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> mgr = <a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L225" name="L225"></a> 225         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != mgr)
<a id="L226" name="L226"></a> 226         <strong class="reserved">return</strong> <a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>().<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(nodeHandle);
<a id="L227" name="L227"></a> 227     <strong class="reserved">else</strong>
<a id="L228" name="L228"></a> 228     <em class="brace">{</em>
<a id="L229" name="L229"></a> 229         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "Can not get a DTM Unless a DTMManager has been set!");
<a id="L230" name="L230"></a> 230         <strong class="reserved">return</strong> <strong class="reserved">null</strong>;
<a id="L231" name="L231"></a> 231     <em class="brace">}</em>
<a id="L232" name="L232"></a> 232   <em class="brace">}</em>
<a id="L233" name="L233"></a> 233 
<div class="comment">
    @see DTMIterator#getDTMManager()</div>
<a id="L237" name="L237"></a> 237   <strong class="reserved">public</strong> <a href="../S/5920.html#L52" title="Defined at 52 in src/com/sun/org/apache/xml/internal/dtm/DTMManager.java.">DTMManager</a> <a href="../R/15939.html" title="Multiple referred from 22 places.">getDTMManager</a>()
<a id="L238" name="L238"></a> 238   <em class="brace">{</em>
<a id="L239" name="L239"></a> 239     <strong class="reserved">return</strong> m_dtmMgr;
<a id="L240" name="L240"></a> 240   <em class="brace">}</em>
<a id="L241" name="L241"></a> 241 
<div class="comment">
    @see DTMIterator#getRoot()</div>
<a id="L245" name="L245"></a> 245   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/18758.html" title="Multiple referred from 54 places.">getRoot</a>()
<a id="L246" name="L246"></a> 246   <em class="brace">{</em>
<a id="L247" name="L247"></a> 247         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L248" name="L248"></a> 248         <strong class="reserved">return</strong> m_iter.<a href="../D/22122.html" title="Multiple defined in 25 places.">getRoot</a>();
<a id="L249" name="L249"></a> 249         <strong class="reserved">else</strong>
<a id="L250" name="L250"></a> 250         <em class="brace">{</em>
<a id="L251" name="L251"></a> 251                 <em class="comment">// NodeSetDTM will call this, and so it's not a good thing to throw</em>
<a id="L252" name="L252"></a> 252                 <em class="comment">// an assertion here.</em>
<a id="L253" name="L253"></a> 253                 <em class="comment">// assertion(false, "Can not get the root from a non-iterated NodeSequence!");</em>
<a id="L254" name="L254"></a> 254                 <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L255" name="L255"></a> 255         <em class="brace">}</em>
<a id="L256" name="L256"></a> 256   <em class="brace">}</em>
<a id="L257" name="L257"></a> 257 
<div class="comment">
    @see DTMIterator#setRoot(int, Object)</div>
<a id="L261" name="L261"></a> 261   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28067.html" title="Multiple referred from 27 places.">setRoot</a>(<strong class="reserved">int</strong> nodeHandle, <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>)
<a id="L262" name="L262"></a> 262   <em class="brace">{</em>
<a id="L263" name="L263"></a> 263         <em class="comment">// If root is DTM.NULL, then something's wrong with the context</em>
<a id="L264" name="L264"></a> 264         <strong class="reserved">if</strong> (nodeHandle == <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>)
<a id="L265" name="L265"></a> 265         <em class="brace">{</em>
<a id="L266" name="L266"></a> 266             <strong class="reserved">throw</strong> <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>("Unable to evaluate expression using " +
<a id="L267" name="L267"></a> 267                     "this context");
<a id="L268" name="L268"></a> 268         <em class="brace">}</em>
<a id="L269" name="L269"></a> 269 
<a id="L270" name="L270"></a> 270         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L271" name="L271"></a> 271         <em class="brace">{</em>
<a id="L272" name="L272"></a> 272                 <a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a> xctxt = (<a href="../S/4946.html#L61" title="Defined at 61 in src/com/sun/org/apache/xpath/internal/XPathContext.java.">XPathContext</a>)<a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>;
<a id="L273" name="L273"></a> 273                 m_dtmMgr = xctxt.<a href="../D/18183.html" title="Multiple defined in 8 places.">getDTMManager</a>();
<a id="L274" name="L274"></a> 274                 m_iter.<a href="../D/33763.html" title="Multiple defined in 17 places.">setRoot</a>(nodeHandle, <a href="../D/15666.html" title="Multiple defined in 3 places.">environment</a>);
<a id="L275" name="L275"></a> 275                 <strong class="reserved">if</strong>(!m_iter.<a href="../D/25456.html" title="Multiple defined in 11 places.">isDocOrdered</a>())
<a id="L276" name="L276"></a> 276                 <em class="brace">{</em>
<a id="L277" name="L277"></a> 277                         <strong class="reserved">if</strong>(!<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L278" name="L278"></a> 278                                 <a href="../D/33906.html" title="Multiple defined in 6 places.">setShouldCacheNodes</a>(<strong class="reserved">true</strong>);
<a id="L279" name="L279"></a> 279                         <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L280" name="L280"></a> 280                         m_next=0;
<a id="L281" name="L281"></a> 281                 <em class="brace">}</em>
<a id="L282" name="L282"></a> 282         <em class="brace">}</em>
<a id="L283" name="L283"></a> 283         <strong class="reserved">else</strong>
<a id="L284" name="L284"></a> 284                 <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "Can not setRoot on a non-iterated NodeSequence!");
<a id="L285" name="L285"></a> 285   <em class="brace">}</em>
<a id="L286" name="L286"></a> 286 
<div class="comment">
    @see DTMIterator#reset()</div>
<a id="L290" name="L290"></a> 290   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26238.html" title="Multiple referred from 619 places.">reset</a>()
<a id="L291" name="L291"></a> 291   <em class="brace">{</em>
<a id="L292" name="L292"></a> 292         m_next = 0;
<a id="L293" name="L293"></a> 293         <em class="comment">// not resetting the iterator on purpose!!!</em>
<a id="L294" name="L294"></a> 294   <em class="brace">}</em>
<a id="L295" name="L295"></a> 295 
<div class="comment">
    @see DTMIterator#getWhatToShow()</div>
<a id="L299" name="L299"></a> 299   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/19853.html" title="Multiple referred from 27 places.">getWhatToShow</a>()
<a id="L300" name="L300"></a> 300   <em class="brace">{</em>
<a id="L301" name="L301"></a> 301     <strong class="reserved">return</strong> <a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>() ? (<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ALL &amp; ~<a href="../S/5886.html#L29" title="Defined at 29 in src/com/sun/org/apache/xml/internal/dtm/DTMFilter.java.">DTMFilter</a>.SHOW_ENTITY_REFERENCE)
<a id="L302" name="L302"></a> 302         : m_iter.<a href="../D/23670.html" title="Multiple defined in 14 places.">getWhatToShow</a>();
<a id="L303" name="L303"></a> 303   <em class="brace">}</em>
<a id="L304" name="L304"></a> 304 
<div class="comment">
    @see DTMIterator#getExpandEntityReferences()</div>
<a id="L308" name="L308"></a> 308   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../S/4889.html#L311" title="Referred from 311 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">getExpandEntityReferences</a>()
<a id="L309" name="L309"></a> 309   <em class="brace">{</em>
<a id="L310" name="L310"></a> 310         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L311" name="L311"></a> 311                 <strong class="reserved">return</strong> m_iter.<a href="../D/18920.html" title="Multiple defined in 10 places.">getExpandEntityReferences</a>();
<a id="L312" name="L312"></a> 312         <strong class="reserved">else</strong>
<a id="L313" name="L313"></a> 313         <strong class="reserved">return</strong> <strong class="reserved">true</strong>;
<a id="L314" name="L314"></a> 314   <em class="brace">}</em>
<a id="L315" name="L315"></a> 315 
<div class="comment">
    @see DTMIterator#nextNode()</div>
<a id="L319" name="L319"></a> 319   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/23682.html" title="Multiple referred from 192 places.">nextNode</a>()
<a id="L320" name="L320"></a> 320   <em class="brace">{</em>
<a id="L321" name="L321"></a> 321     <em class="comment">// If the cache is on, and the node has already been found, then</em>
<a id="L322" name="L322"></a> 322     <em class="comment">// just return from the list.</em>
<a id="L323" name="L323"></a> 323     <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> vec = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L324" name="L324"></a> 324     <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != vec)
<a id="L325" name="L325"></a> 325     <em class="brace">{</em>
<a id="L326" name="L326"></a> 326         <em class="comment">// There is a cache</em>
<a id="L327" name="L327"></a> 327         <strong class="reserved">if</strong>(m_next &lt; vec.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())
<a id="L328" name="L328"></a> 328         <em class="brace">{</em>
<a id="L329" name="L329"></a> 329             <em class="comment">// The node is in the cache, so just return it.</em>
<a id="L330" name="L330"></a> 330                         <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = vec.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(m_next);
<a id="L331" name="L331"></a> 331                 m_next++;
<a id="L332" name="L332"></a> 332                 <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L333" name="L333"></a> 333         <em class="brace">}</em>
<a id="L334" name="L334"></a> 334         <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../S/4889.html#L106" title="Defined at 106 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">cacheComplete</a>() || (-1 != m_last) || (<strong class="reserved">null</strong> == m_iter))
<a id="L335" name="L335"></a> 335         <em class="brace">{</em>
<a id="L336" name="L336"></a> 336                 m_next++;
<a id="L337" name="L337"></a> 337                 <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L338" name="L338"></a> 338         <em class="brace">}</em>
<a id="L339" name="L339"></a> 339     <em class="brace">}</em>
<a id="L340" name="L340"></a> 340 
<a id="L341" name="L341"></a> 341   <strong class="reserved">if</strong> (<strong class="reserved">null</strong> == m_iter)
<a id="L342" name="L342"></a> 342     <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L343" name="L343"></a> 343 
<a id="L344" name="L344"></a> 344         <strong class="reserved">int</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a> = m_iter.<a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L345" name="L345"></a> 345     <strong class="reserved">if</strong>(<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>)
<a id="L346" name="L346"></a> 346     <em class="brace">{</em>
<a id="L347" name="L347"></a> 347         <strong class="reserved">if</strong>(<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L348" name="L348"></a> 348         <em class="brace">{</em>
<a id="L349" name="L349"></a> 349                 <strong class="reserved">if</strong>(m_iter.<a href="../D/25456.html" title="Multiple defined in 11 places.">isDocOrdered</a>())
<a id="L350" name="L350"></a> 350             <em class="brace">{</em>
<a id="L351" name="L351"></a> 351                         <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>().<a href="../D/10774.html" title="Multiple defined in 24 places.">addElement</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L352" name="L352"></a> 352                         m_next++;
<a id="L353" name="L353"></a> 353                 <em class="brace">}</em>
<a id="L354" name="L354"></a> 354                 <strong class="reserved">else</strong>
<a id="L355" name="L355"></a> 355                 <em class="brace">{</em>
<a id="L356" name="L356"></a> 356                         <strong class="reserved">int</strong> insertIndex = <a href="../D/10966.html" title="Multiple defined in 5 places.">addNodeInDocOrder</a>(<a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>);
<a id="L357" name="L357"></a> 357                         <strong class="reserved">if</strong>(insertIndex &gt;= 0)
<a id="L358" name="L358"></a> 358                                 m_next++;
<a id="L359" name="L359"></a> 359                 <em class="brace">}</em>
<a id="L360" name="L360"></a> 360         <em class="brace">}</em>
<a id="L361" name="L361"></a> 361         <strong class="reserved">else</strong>
<a id="L362" name="L362"></a> 362                 m_next++;
<a id="L363" name="L363"></a> 363     <em class="brace">}</em>
<a id="L364" name="L364"></a> 364     <strong class="reserved">else</strong>
<a id="L365" name="L365"></a> 365     <em class="brace">{</em>
<a id="L366" name="L366"></a> 366         <em class="comment">// We have exhausted the iterator, and if there is a cache</em>
<a id="L367" name="L367"></a> 367         <em class="comment">// it must have all nodes in it by now, so let the cache</em>
<a id="L368" name="L368"></a> 368         <em class="comment">// know that it is complete.</em>
<a id="L369" name="L369"></a> 369         <a href="../S/4889.html#L120" title="Defined at 120 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">markCacheComplete</a>();
<a id="L370" name="L370"></a> 370 
<a id="L371" name="L371"></a> 371         m_last = m_next;
<a id="L372" name="L372"></a> 372         m_next++;
<a id="L373" name="L373"></a> 373     <em class="brace">}</em>
<a id="L374" name="L374"></a> 374 
<a id="L375" name="L375"></a> 375     <strong class="reserved">return</strong> <a href="../D/28131.html" title="Multiple defined in 273 places.">next</a>;
<a id="L376" name="L376"></a> 376   <em class="brace">}</em>
<a id="L377" name="L377"></a> 377 
<div class="comment">
    @see DTMIterator#previousNode()</div>
<a id="L381" name="L381"></a> 381   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/24966.html" title="Multiple referred from 15 places.">previousNode</a>()
<a id="L382" name="L382"></a> 382   <em class="brace">{</em>
<a id="L383" name="L383"></a> 383         <strong class="reserved">if</strong>(<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L384" name="L384"></a> 384         <em class="brace">{</em>
<a id="L385" name="L385"></a> 385                 <strong class="reserved">if</strong>(m_next &lt;= 0)
<a id="L386" name="L386"></a> 386                         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L387" name="L387"></a> 387                 <strong class="reserved">else</strong>
<a id="L388" name="L388"></a> 388                 <em class="brace">{</em>
<a id="L389" name="L389"></a> 389                         m_next--;
<a id="L390" name="L390"></a> 390                         <strong class="reserved">return</strong> <a href="../D/26564.html" title="Multiple defined in 60 places.">item</a>(m_next);
<a id="L391" name="L391"></a> 391                 <em class="brace">}</em>
<a id="L392" name="L392"></a> 392         <em class="brace">}</em>
<a id="L393" name="L393"></a> 393         <strong class="reserved">else</strong>
<a id="L394" name="L394"></a> 394         <em class="brace">{</em>
<a id="L395" name="L395"></a> 395             <strong class="reserved">int</strong> n = m_iter.<a href="../D/29605.html" title="Multiple defined in 11 places.">previousNode</a>();
<a id="L396" name="L396"></a> 396             m_next = m_iter.<a href="../D/18120.html" title="Multiple defined in 7 places.">getCurrentPos</a>();
<a id="L397" name="L397"></a> 397             <strong class="reserved">return</strong> m_next;
<a id="L398" name="L398"></a> 398         <em class="brace">}</em>
<a id="L399" name="L399"></a> 399   <em class="brace">}</em>
<a id="L400" name="L400"></a> 400 
<div class="comment">
    @see DTMIterator#detach()</div>
<a id="L404" name="L404"></a> 404   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/13275.html" title="Multiple referred from 37 places.">detach</a>()
<a id="L405" name="L405"></a> 405   <em class="brace">{</em>
<a id="L406" name="L406"></a> 406         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L407" name="L407"></a> 407                 m_iter.<a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L408" name="L408"></a> 408         <strong class="reserved">super</strong>.<a href="../D/14888.html" title="Multiple defined in 26 places.">detach</a>();
<a id="L409" name="L409"></a> 409   <em class="brace">}</em>
<a id="L410" name="L410"></a> 410 
<div class="comment">
    Calling this with a value of false will cause the nodeset
    to be cached.
    @see DTMIterator#allowDetachToRelease(boolean)</div>
<a id="L416" name="L416"></a> 416   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/10150.html" title="Multiple referred from 6 places.">allowDetachToRelease</a>(<strong class="reserved">boolean</strong> allowRelease)
<a id="L417" name="L417"></a> 417   <em class="brace">{</em>
<a id="L418" name="L418"></a> 418         <strong class="reserved">if</strong>((<strong class="reserved">false</strong> == allowRelease) &amp;&amp; !<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L419" name="L419"></a> 419         <em class="brace">{</em>
<a id="L420" name="L420"></a> 420                 <a href="../D/33906.html" title="Multiple defined in 6 places.">setShouldCacheNodes</a>(<strong class="reserved">true</strong>);
<a id="L421" name="L421"></a> 421         <em class="brace">}</em>
<a id="L422" name="L422"></a> 422 
<a id="L423" name="L423"></a> 423         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L424" name="L424"></a> 424                 m_iter.<a href="../D/11309.html" title="Multiple defined in 6 places.">allowDetachToRelease</a>(allowRelease);
<a id="L425" name="L425"></a> 425         <strong class="reserved">super</strong>.<a href="../D/11309.html" title="Multiple defined in 6 places.">allowDetachToRelease</a>(allowRelease);
<a id="L426" name="L426"></a> 426   <em class="brace">}</em>
<a id="L427" name="L427"></a> 427 
<div class="comment">
    @see DTMIterator#getCurrentNode()</div>
<a id="L431" name="L431"></a> 431   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15897.html" title="Multiple referred from 27 places.">getCurrentNode</a>()
<a id="L432" name="L432"></a> 432   <em class="brace">{</em>
<a id="L433" name="L433"></a> 433         <strong class="reserved">if</strong>(<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L434" name="L434"></a> 434         <em class="brace">{</em>
<a id="L435" name="L435"></a> 435                 <strong class="reserved">int</strong> currentIndex = m_next-1;
<a id="L436" name="L436"></a> 436                 <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> vec = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L437" name="L437"></a> 437                 <strong class="reserved">if</strong>((currentIndex &gt;= 0) &amp;&amp; (currentIndex &lt; vec.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>()))
<a id="L438" name="L438"></a> 438                         <strong class="reserved">return</strong> vec.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(currentIndex);
<a id="L439" name="L439"></a> 439                 <strong class="reserved">else</strong>
<a id="L440" name="L440"></a> 440                         <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L441" name="L441"></a> 441         <em class="brace">}</em>
<a id="L442" name="L442"></a> 442 
<a id="L443" name="L443"></a> 443         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L444" name="L444"></a> 444         <em class="brace">{</em>
<a id="L445" name="L445"></a> 445         <strong class="reserved">return</strong> m_iter.<a href="../D/18114.html" title="Multiple defined in 11 places.">getCurrentNode</a>();
<a id="L446" name="L446"></a> 446         <em class="brace">}</em>
<a id="L447" name="L447"></a> 447         <strong class="reserved">else</strong>
<a id="L448" name="L448"></a> 448                 <strong class="reserved">return</strong> <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a>;
<a id="L449" name="L449"></a> 449   <em class="brace">}</em>
<a id="L450" name="L450"></a> 450 
<div class="comment">
    @see DTMIterator#isFresh()</div>
<a id="L454" name="L454"></a> 454   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21499.html" title="Multiple referred from 2 places.">isFresh</a>()
<a id="L455" name="L455"></a> 455   <em class="brace">{</em>
<a id="L456" name="L456"></a> 456     <strong class="reserved">return</strong> (0 == m_next);
<a id="L457" name="L457"></a> 457   <em class="brace">}</em>
<a id="L458" name="L458"></a> 458 
<div class="comment">
    @see DTMIterator#setShouldCacheNodes(boolean)</div>
<a id="L462" name="L462"></a> 462   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/28175.html" title="Multiple referred from 15 places.">setShouldCacheNodes</a>(<strong class="reserved">boolean</strong> b)
<a id="L463" name="L463"></a> 463   <em class="brace">{</em>
<a id="L464" name="L464"></a> 464     <strong class="reserved">if</strong> (b)
<a id="L465" name="L465"></a> 465     <em class="brace">{</em>
<a id="L466" name="L466"></a> 466       <strong class="reserved">if</strong>(!<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>())
<a id="L467" name="L467"></a> 467       <em class="brace">{</em>
<a id="L468" name="L468"></a> 468         <a href="../S/4889.html#L85" title="Defined at 85 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">SetVector</a>(<strong class="reserved">new</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>());
<a id="L469" name="L469"></a> 469       <em class="brace">}</em>
<a id="L470" name="L470"></a> 470 <em class="comment">//        else</em>
<a id="L471" name="L471"></a> 471 <em class="comment">//          getVector().RemoveAllNoClear();  // Is this good?</em>
<a id="L472" name="L472"></a> 472     <em class="brace">}</em>
<a id="L473" name="L473"></a> 473     <strong class="reserved">else</strong>
<a id="L474" name="L474"></a> 474       <a href="../S/4889.html#L85" title="Defined at 85 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">SetVector</a>(<strong class="reserved">null</strong>);
<a id="L475" name="L475"></a> 475   <em class="brace">}</em>
<a id="L476" name="L476"></a> 476 
<div class="comment">
    @see DTMIterator#isMutable()</div>
<a id="L480" name="L480"></a> 480   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> isMutable()
<a id="L481" name="L481"></a> 481   <em class="brace">{</em>
<a id="L482" name="L482"></a> 482     <strong class="reserved">return</strong> <a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>(); <em class="comment">// though may be surprising if it also has an iterator!</em>
<a id="L483" name="L483"></a> 483   <em class="brace">}</em>
<a id="L484" name="L484"></a> 484 
<div class="comment">
    @see DTMIterator#getCurrentPos()</div>
<a id="L488" name="L488"></a> 488   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15900.html" title="Multiple referred from 15 places.">getCurrentPos</a>()
<a id="L489" name="L489"></a> 489   <em class="brace">{</em>
<a id="L490" name="L490"></a> 490     <strong class="reserved">return</strong> m_next;
<a id="L491" name="L491"></a> 491   <em class="brace">}</em>
<a id="L492" name="L492"></a> 492 
<div class="comment">
    @see DTMIterator#runTo(int)</div>
<a id="L496" name="L496"></a> 496   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/26561.html" title="Multiple referred from 15 places.">runTo</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L497" name="L497"></a> 497   <em class="brace">{</em>
<a id="L498" name="L498"></a> 498     <strong class="reserved">int</strong> n;
<a id="L499" name="L499"></a> 499 
<a id="L500" name="L500"></a> 500     <strong class="reserved">if</strong> (-1 == <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L501" name="L501"></a> 501     <em class="brace">{</em>
<a id="L502" name="L502"></a> 502       <strong class="reserved">int</strong> pos = m_next;
<a id="L503" name="L503"></a> 503       <strong class="reserved">while</strong> (<a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (n = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()));
<a id="L504" name="L504"></a> 504       m_next = pos;
<a id="L505" name="L505"></a> 505     <em class="brace">}</em>
<a id="L506" name="L506"></a> 506     <strong class="reserved">else</strong> <strong class="reserved">if</strong>(m_next == <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L507" name="L507"></a> 507     <em class="brace">{</em>
<a id="L508" name="L508"></a> 508       <strong class="reserved">return</strong>;
<a id="L509" name="L509"></a> 509     <em class="brace">}</em>
<a id="L510" name="L510"></a> 510     <strong class="reserved">else</strong> <strong class="reserved">if</strong>(<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>() &amp;&amp; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>().<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>())
<a id="L511" name="L511"></a> 511     <em class="brace">{</em>
<a id="L512" name="L512"></a> 512       m_next = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L513" name="L513"></a> 513     <em class="brace">}</em>
<a id="L514" name="L514"></a> 514     <strong class="reserved">else</strong> <strong class="reserved">if</strong>((<strong class="reserved">null</strong> == <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>()) &amp;&amp; (<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a> &lt; m_next))
<a id="L515" name="L515"></a> 515     <em class="brace">{</em>
<a id="L516" name="L516"></a> 516       <strong class="reserved">while</strong> ((m_next &gt;= <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) &amp;&amp; <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (n = <a href="../D/29605.html" title="Multiple defined in 11 places.">previousNode</a>()));
<a id="L517" name="L517"></a> 517     <em class="brace">}</em>
<a id="L518" name="L518"></a> 518     <strong class="reserved">else</strong>
<a id="L519" name="L519"></a> 519     <em class="brace">{</em>
<a id="L520" name="L520"></a> 520       <strong class="reserved">while</strong> ((m_next &lt; <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>) &amp;&amp; <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a>.<a href="../S/2603.html#L115" title="Defined at 115 in src/java/sql/JDBCType.java.">NULL</a> != (n = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>()));
<a id="L521" name="L521"></a> 521     <em class="brace">}</em>
<a id="L522" name="L522"></a> 522 
<a id="L523" name="L523"></a> 523   <em class="brace">}</em>
<a id="L524" name="L524"></a> 524 
<div class="comment">
    @see DTMIterator#setCurrentPos(int)</div>
<a id="L528" name="L528"></a> 528   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27137.html" title="Multiple referred from 3 places.">setCurrentPos</a>(<strong class="reserved">int</strong> i)
<a id="L529" name="L529"></a> 529   <em class="brace">{</em>
<a id="L530" name="L530"></a> 530         <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(i);
<a id="L531" name="L531"></a> 531   <em class="brace">}</em>
<a id="L532" name="L532"></a> 532 
<div class="comment">
    @see DTMIterator#item(int)</div>
<a id="L536" name="L536"></a> 536   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/22287.html" title="Multiple referred from 822 places.">item</a>(<strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L537" name="L537"></a> 537   <em class="brace">{</em>
<a id="L538" name="L538"></a> 538         <a href="../D/32315.html" title="Multiple defined in 6 places.">setCurrentPos</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L539" name="L539"></a> 539         <strong class="reserved">int</strong> n = <a href="../D/28170.html" title="Multiple defined in 34 places.">nextNode</a>();
<a id="L540" name="L540"></a> 540         m_next = <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>;
<a id="L541" name="L541"></a> 541         <strong class="reserved">return</strong> n;
<a id="L542" name="L542"></a> 542   <em class="brace">}</em>
<a id="L543" name="L543"></a> 543 
<div class="comment">
    @see DTMIterator#setItem(int, int)</div>
<a id="L547" name="L547"></a> 547   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/27608.html" title="Multiple referred from 8 places.">setItem</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <strong class="reserved">int</strong> <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>)
<a id="L548" name="L548"></a> 548   <em class="brace">{</em>
<a id="L549" name="L549"></a> 549         <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> vec = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L550" name="L550"></a> 550         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != vec)
<a id="L551" name="L551"></a> 551         <em class="brace">{</em>
<a id="L552" name="L552"></a> 552         <strong class="reserved">int</strong> oldNode = vec.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(<a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L553" name="L553"></a> 553         <strong class="reserved">if</strong> (oldNode != <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a> &amp;&amp; m_cache.<a href="../D/36263.html" title="Multiple defined in 3 places.">useCount</a>() &gt; 1) <em class="brace">{</em>
<div class="comment">
 If we are going to set the node at the given index
              to a different value, and the cache is shared
              (has a use count greater than 1)
              then make a copy of the cache and use it
              so we don't overwrite the value for other
              users of the cache.</div>
<a id="L561" name="L561"></a> 561             <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> newCache = <strong class="reserved">new</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a>();
<a id="L562" name="L562"></a> 562             <strong class="reserved">final</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv;
<a id="L563" name="L563"></a> 563             <strong class="reserved">try</strong> <em class="brace">{</em>
<a id="L564" name="L564"></a> 564                 nv = (<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>) vec.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L565" name="L565"></a> 565             <em class="brace">}</em> <strong class="reserved">catch</strong> (<a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a> e) <em class="brace">{</em>
<a id="L566" name="L566"></a> 566                 <em class="comment">// This should never happen</em>
<a id="L567" name="L567"></a> 567                 e.<a href="../D/29703.html" title="Multiple defined in 46 places.">printStackTrace</a>();
<a id="L568" name="L568"></a> 568                 <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a> rte = <strong class="reserved">new</strong> <a href="../S/1723.html#L43" title="Defined at 43 in src/java/lang/RuntimeException.java.">RuntimeException</a>(e.<a href="../D/20565.html" title="Multiple defined in 56 places.">getMessage</a>());
<a id="L569" name="L569"></a> 569                 <strong class="reserved">throw</strong> rte;
<a id="L570" name="L570"></a> 570             <em class="brace">}</em>
<a id="L571" name="L571"></a> 571             newCache.<a href="../S/4889.html#L920" title="Defined at 920 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setVector</a>(nv);
<a id="L572" name="L572"></a> 572             newCache.<a href="../S/4889.html#L938" title="Defined at 938 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setCacheComplete</a>(<strong class="reserved">true</strong>);
<a id="L573" name="L573"></a> 573             m_cache = newCache;
<a id="L574" name="L574"></a> 574             vec = nv;
<a id="L575" name="L575"></a> 575 
<a id="L576" name="L576"></a> 576             <em class="comment">// Keep our superclass informed of the current NodeVector</em>
<a id="L577" name="L577"></a> 577             <strong class="reserved">super</strong>.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(nv);
<a id="L578" name="L578"></a> 578 
<div class="comment">
 When we get to here the new cache has
              a use count of 1 and when setting a
              bunch of values on the same NodeSequence,
              such as when sorting, we will keep setting
              values in that same copy which has a use count of 1.</div>
<a id="L585" name="L585"></a> 585         <em class="brace">}</em>
<a id="L586" name="L586"></a> 586                 vec.<a href="../D/32553.html" title="Multiple defined in 11 places.">setElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L587" name="L587"></a> 587                 m_last = vec.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L588" name="L588"></a> 588         <em class="brace">}</em>
<a id="L589" name="L589"></a> 589         <strong class="reserved">else</strong>
<a id="L590" name="L590"></a> 590                 m_iter.<a href="../D/33005.html" title="Multiple defined in 7 places.">setItem</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, <a href="../D/24461.html" title="Multiple defined in 6 places.">index</a>);
<a id="L591" name="L591"></a> 591   <em class="brace">}</em>
<a id="L592" name="L592"></a> 592 
<div class="comment">
    @see DTMIterator#getLength()</div>
<a id="L596" name="L596"></a> 596   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/17335.html" title="Multiple referred from 644 places.">getLength</a>()
<a id="L597" name="L597"></a> 597   <em class="brace">{</em>
<a id="L598" name="L598"></a> 598     <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a> = <a href="../D/17438.html" title="Multiple defined in 2 places.">getCache</a>();
<a id="L599" name="L599"></a> 599 
<a id="L600" name="L600"></a> 600         <strong class="reserved">if</strong>(<a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a> != <strong class="reserved">null</strong>)
<a id="L601" name="L601"></a> 601         <em class="brace">{</em>
<a id="L602" name="L602"></a> 602         <em class="comment">// Nodes from the iterator are cached</em>
<a id="L603" name="L603"></a> 603         <strong class="reserved">if</strong> (<a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>.<a href="../D/25336.html" title="Multiple defined in 3 places.">isComplete</a>()) <em class="brace">{</em>
<a id="L604" name="L604"></a> 604             <em class="comment">// All of the nodes from the iterator are cached</em>
<a id="L605" name="L605"></a> 605             <em class="comment">// so just return the number of nodes in the cache</em>
<a id="L606" name="L606"></a> 606             <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv = <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>.<a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L607" name="L607"></a> 607             <strong class="reserved">return</strong> nv.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>();
<a id="L608" name="L608"></a> 608         <em class="brace">}</em>
<a id="L609" name="L609"></a> 609 
<a id="L610" name="L610"></a> 610         <em class="comment">// If this NodeSequence wraps a mutable nodeset, then</em>
<a id="L611" name="L611"></a> 611         <em class="comment">// m_last will not reflect the size of the nodeset if</em>
<a id="L612" name="L612"></a> 612         <em class="comment">// it has been mutated...</em>
<a id="L613" name="L613"></a> 613         <strong class="reserved">if</strong> (m_iter <strong class="reserved">instanceof</strong> <a href="../S/4943.html#L62" title="Defined at 62 in src/com/sun/org/apache/xpath/internal/NodeSetDTM.java.">NodeSetDTM</a>)
<a id="L614" name="L614"></a> 614         <em class="brace">{</em>
<a id="L615" name="L615"></a> 615             <strong class="reserved">return</strong> m_iter.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>();
<a id="L616" name="L616"></a> 616         <em class="brace">}</em>
<a id="L617" name="L617"></a> 617 
<a id="L618" name="L618"></a> 618                 <strong class="reserved">if</strong>(-1 == m_last)
<a id="L619" name="L619"></a> 619                 <em class="brace">{</em>
<a id="L620" name="L620"></a> 620                         <strong class="reserved">int</strong> pos = m_next;
<a id="L621" name="L621"></a> 621                         <a href="../D/31507.html" title="Multiple defined in 6 places.">runTo</a>(-1);
<a id="L622" name="L622"></a> 622                         m_next = pos;
<a id="L623" name="L623"></a> 623                 <em class="brace">}</em>
<a id="L624" name="L624"></a> 624             <strong class="reserved">return</strong> m_last;
<a id="L625" name="L625"></a> 625         <em class="brace">}</em>
<a id="L626" name="L626"></a> 626         <strong class="reserved">else</strong>
<a id="L627" name="L627"></a> 627         <em class="brace">{</em>
<a id="L628" name="L628"></a> 628                 <strong class="reserved">return</strong> (-1 == m_last) ? (m_last = m_iter.<a href="../D/20075.html" title="Multiple defined in 116 places.">getLength</a>()) : m_last;
<a id="L629" name="L629"></a> 629         <em class="brace">}</em>
<a id="L630" name="L630"></a> 630   <em class="brace">}</em>
<a id="L631" name="L631"></a> 631 
<div class="comment">
    Note: Not a deep clone.
    @see DTMIterator#cloneWithReset()</div>
<a id="L636" name="L636"></a> 636   <strong class="reserved">public</strong> <a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a> <a href="../R/11583.html" title="Multiple referred from 10 places.">cloneWithReset</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L637" name="L637"></a> 637   <em class="brace">{</em>
<a id="L638" name="L638"></a> 638         <a href="../S/4889.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">NodeSequence</a> seq = (<a href="../S/4889.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">NodeSequence</a>)<strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L639" name="L639"></a> 639     seq.m_next = 0;
<a id="L640" name="L640"></a> 640     <strong class="reserved">if</strong> (m_cache != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L641" name="L641"></a> 641         <em class="comment">// In making this clone of an iterator we are making</em>
<a id="L642" name="L642"></a> 642         <em class="comment">// another NodeSequence object it has a reference</em>
<a id="L643" name="L643"></a> 643         <em class="comment">// to the same IteratorCache object as the original</em>
<a id="L644" name="L644"></a> 644         <em class="comment">// so we need to remember that more than one</em>
<a id="L645" name="L645"></a> 645         <em class="comment">// NodeSequence object shares the cache.</em>
<a id="L646" name="L646"></a> 646         m_cache.<a href="../S/4889.html#L909" title="Defined at 909 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">increaseUseCount</a>();
<a id="L647" name="L647"></a> 647     <em class="brace">}</em>
<a id="L648" name="L648"></a> 648 
<a id="L649" name="L649"></a> 649     <strong class="reserved">return</strong> seq;
<a id="L650" name="L650"></a> 650   <em class="brace">}</em>
<a id="L651" name="L651"></a> 651 
<div class="comment">
    Get a clone of this iterator, but don't reset the iteration in the
    process, so that it may be used from the current position.
    Note: Not a deep clone.
    @return A clone of this object.
    @throws CloneNotSupportedException</div>
<a id="L661" name="L661"></a> 661   <strong class="reserved">public</strong> <a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> <a href="../R/11555.html" title="Multiple referred from 1378 places.">clone</a>() <strong class="reserved">throws</strong> <a href="../S/1725.html#L45" title="Defined at 45 in src/java/lang/CloneNotSupportedException.java.">CloneNotSupportedException</a>
<a id="L662" name="L662"></a> 662   <em class="brace">{</em>
<a id="L663" name="L663"></a> 663           <a href="../S/4889.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">NodeSequence</a> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a> = (<a href="../S/4889.html#L40" title="Defined at 40 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">NodeSequence</a>) <strong class="reserved">super</strong>.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L664" name="L664"></a> 664           <strong class="reserved">if</strong> (<strong class="reserved">null</strong> != m_iter) <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>.m_iter = (<a href="../S/5921.html#L51" title="Defined at 51 in src/com/sun/org/apache/xml/internal/dtm/DTMIterator.java.">DTMIterator</a>) m_iter.<a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>();
<a id="L665" name="L665"></a> 665           <strong class="reserved">if</strong> (m_cache != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L666" name="L666"></a> 666               <em class="comment">// In making this clone of an iterator we are making</em>
<a id="L667" name="L667"></a> 667               <em class="comment">// another NodeSequence object it has a reference</em>
<a id="L668" name="L668"></a> 668               <em class="comment">// to the same IteratorCache object as the original</em>
<a id="L669" name="L669"></a> 669               <em class="comment">// so we need to remember that more than one</em>
<a id="L670" name="L670"></a> 670               <em class="comment">// NodeSequence object shares the cache.</em>
<a id="L671" name="L671"></a> 671               m_cache.<a href="../S/4889.html#L909" title="Defined at 909 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">increaseUseCount</a>();
<a id="L672" name="L672"></a> 672           <em class="brace">}</em>
<a id="L673" name="L673"></a> 673 
<a id="L674" name="L674"></a> 674           <strong class="reserved">return</strong> <a href="../D/12888.html" title="Multiple defined in 229 places.">clone</a>;
<a id="L675" name="L675"></a> 675   <em class="brace">}</em>
<a id="L676" name="L676"></a> 676 
<a id="L677" name="L677"></a> 677 
<div class="comment">
    @see DTMIterator#isDocOrdered()</div>
<a id="L681" name="L681"></a> 681   <strong class="reserved">public</strong> <strong class="reserved">boolean</strong> <a href="../R/21373.html" title="Multiple referred from 8 places.">isDocOrdered</a>()
<a id="L682" name="L682"></a> 682   <em class="brace">{</em>
<a id="L683" name="L683"></a> 683         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L684" name="L684"></a> 684                 <strong class="reserved">return</strong> m_iter.<a href="../D/25456.html" title="Multiple defined in 11 places.">isDocOrdered</a>();
<a id="L685" name="L685"></a> 685         <strong class="reserved">else</strong>
<a id="L686" name="L686"></a> 686         <strong class="reserved">return</strong> <strong class="reserved">true</strong>; <em class="comment">// can't be sure?</em>
<a id="L687" name="L687"></a> 687   <em class="brace">}</em>
<a id="L688" name="L688"></a> 688 
<div class="comment">
    @see DTMIterator#getAxis()</div>
<a id="L692" name="L692"></a> 692   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15203.html" title="Multiple referred from 33 places.">getAxis</a>()
<a id="L693" name="L693"></a> 693   <em class="brace">{</em>
<a id="L694" name="L694"></a> 694         <strong class="reserved">if</strong>(<strong class="reserved">null</strong> != m_iter)
<a id="L695" name="L695"></a> 695         <strong class="reserved">return</strong> m_iter.<a href="../D/17162.html" title="Multiple defined in 25 places.">getAxis</a>();
<a id="L696" name="L696"></a> 696     <strong class="reserved">else</strong>
<a id="L697" name="L697"></a> 697     <em class="brace">{</em>
<a id="L698" name="L698"></a> 698         <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<strong class="reserved">false</strong>, "Can not getAxis from a non-iterated node sequence!");
<a id="L699" name="L699"></a> 699         <strong class="reserved">return</strong> 0;
<a id="L700" name="L700"></a> 700     <em class="brace">}</em>
<a id="L701" name="L701"></a> 701   <em class="brace">}</em>
<a id="L702" name="L702"></a> 702 
<div class="comment">
    @see PathComponent#getAnalysisBits()</div>
<a id="L706" name="L706"></a> 706   <strong class="reserved">public</strong> <strong class="reserved">int</strong> <a href="../R/15048.html" title="Multiple referred from 7 places.">getAnalysisBits</a>()
<a id="L707" name="L707"></a> 707   <em class="brace">{</em>
<a id="L708" name="L708"></a> 708         <strong class="reserved">if</strong>((<strong class="reserved">null</strong> != m_iter) &amp;&amp; (m_iter <strong class="reserved">instanceof</strong> <a href="../S/4870.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/axes/PathComponent.java.">PathComponent</a>))
<a id="L709" name="L709"></a> 709         <strong class="reserved">return</strong> ((<a href="../S/4870.html#L29" title="Defined at 29 in src/com/sun/org/apache/xpath/internal/axes/PathComponent.java.">PathComponent</a>)m_iter).<a href="../D/16923.html" title="Multiple defined in 10 places.">getAnalysisBits</a>();
<a id="L710" name="L710"></a> 710     <strong class="reserved">else</strong>
<a id="L711" name="L711"></a> 711         <strong class="reserved">return</strong> 0;
<a id="L712" name="L712"></a> 712   <em class="brace">}</em>
<a id="L713" name="L713"></a> 713 
<div class="comment">
    @see org.apache.xpath.Expression#fixupVariables(Vector, int)</div>
<a id="L717" name="L717"></a> 717   <strong class="reserved">public</strong> <strong class="reserved">void</strong> <a href="../R/14669.html" title="Multiple referred from 33 places.">fixupVariables</a>(<a href="../S/846.html#L83" title="Defined at 83 in src/java/util/Vector.java.">Vector</a> vars, <strong class="reserved">int</strong> globalsSize)
<a id="L718" name="L718"></a> 718   <em class="brace">{</em>
<a id="L719" name="L719"></a> 719         <strong class="reserved">super</strong>.<a href="../D/16440.html" title="Multiple defined in 31 places.">fixupVariables</a>(vars, globalsSize);
<a id="L720" name="L720"></a> 720   <em class="brace">}</em>
<a id="L721" name="L721"></a> 721 
<div class="comment">
    Add the node into a vector of nodes where it should occur in
    document order.
    @param node The node to be added.
    @return insertIndex.
    @throws RuntimeException thrown if this NodeSetDTM is not of
    a mutable type.</div>
<a id="L730" name="L730"></a> 730    <strong class="reserved">protected</strong> <strong class="reserved">int</strong> <a href="../R/9873.html" title="Multiple referred from 8 places.">addNodeInDocOrder</a>(<strong class="reserved">int</strong> <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L731" name="L731"></a> 731    <em class="brace">{</em>
<a id="L732" name="L732"></a> 732       <a href="../D/11591.html" title="Multiple defined in 4 places.">assertion</a>(<a href="../S/4889.html#L95" title="Defined at 95 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">hasCache</a>(), "addNodeInDocOrder must be done on a mutable sequence!");
<a id="L733" name="L733"></a> 733 
<a id="L734" name="L734"></a> 734       <strong class="reserved">int</strong> insertIndex = -1;
<a id="L735" name="L735"></a> 735 
<a id="L736" name="L736"></a> 736       <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> vec = <a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>();
<a id="L737" name="L737"></a> 737 
<a id="L738" name="L738"></a> 738       <em class="comment">// This needs to do a binary search, but a binary search</em>
<a id="L739" name="L739"></a> 739       <em class="comment">// is somewhat tough because the sequence test involves</em>
<a id="L740" name="L740"></a> 740       <em class="comment">// two nodes.</em>
<a id="L741" name="L741"></a> 741       <strong class="reserved">int</strong> <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> = vec.<a href="../D/34593.html" title="Multiple defined in 204 places.">size</a>(), i;
<a id="L742" name="L742"></a> 742 
<a id="L743" name="L743"></a> 743       <strong class="reserved">for</strong> (i = <a href="../D/34593.html" title="Multiple defined in 204 places.">size</a> - 1; i &gt;= 0; i--)
<a id="L744" name="L744"></a> 744       <em class="brace">{</em>
<a id="L745" name="L745"></a> 745         <strong class="reserved">int</strong> child = vec.<a href="../D/15289.html" title="Multiple defined in 23 places.">elementAt</a>(i);
<a id="L746" name="L746"></a> 746 
<a id="L747" name="L747"></a> 747         <strong class="reserved">if</strong> (child == <a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>)
<a id="L748" name="L748"></a> 748         <em class="brace">{</em>
<a id="L749" name="L749"></a> 749           i = -2; <em class="comment">// Duplicate, suppress insert</em>
<a id="L750" name="L750"></a> 750 
<a id="L751" name="L751"></a> 751           <strong class="reserved">break</strong>;
<a id="L752" name="L752"></a> 752         <em class="brace">}</em>
<a id="L753" name="L753"></a> 753 
<a id="L754" name="L754"></a> 754         <a href="../S/5924.html#L80" title="Defined at 80 in src/com/sun/org/apache/xml/internal/dtm/DTM.java.">DTM</a> dtm = m_dtmMgr.<a href="../D/18175.html" title="Multiple defined in 19 places.">getDTM</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>);
<a id="L755" name="L755"></a> 755         <strong class="reserved">if</strong> (!dtm.<a href="../D/25944.html" title="Multiple defined in 7 places.">isNodeAfter</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, child))
<a id="L756" name="L756"></a> 756         <em class="brace">{</em>
<a id="L757" name="L757"></a> 757           <strong class="reserved">break</strong>;
<a id="L758" name="L758"></a> 758         <em class="brace">}</em>
<a id="L759" name="L759"></a> 759       <em class="brace">}</em>
<a id="L760" name="L760"></a> 760 
<a id="L761" name="L761"></a> 761       <strong class="reserved">if</strong> (i != -2)
<a id="L762" name="L762"></a> 762       <em class="brace">{</em>
<a id="L763" name="L763"></a> 763         insertIndex = i + 1;
<a id="L764" name="L764"></a> 764 
<a id="L765" name="L765"></a> 765         vec.<a href="../D/24745.html" title="Multiple defined in 12 places.">insertElementAt</a>(<a href="../D/28235.html" title="Multiple defined in 11 places.">node</a>, insertIndex);
<a id="L766" name="L766"></a> 766       <em class="brace">}</em>
<a id="L767" name="L767"></a> 767 
<a id="L768" name="L768"></a> 768       <em class="comment">// checkDups();</em>
<a id="L769" name="L769"></a> 769       <strong class="reserved">return</strong> insertIndex;
<a id="L770" name="L770"></a> 770     <em class="brace">}</em> <em class="comment">// end addNodeInDocOrder(Vector v, Object obj)</em>
<a id="L771" name="L771"></a> 771 
<div class="comment">
     It used to be that many locations in the code simply
     did an assignment to this.m_obj directly, rather than
     calling the setObject(Object) method. The problem is
     that our super-class would be updated on what the
     cache associated with this NodeSequence, but
     we wouldn't know ourselves.
     <p>
     All setting of m_obj is done through setObject() now,
     and this method over-rides the super-class method.
     So now we are in the loop have an opportunity
     to update some caching information.</p></div>
<a id="L786" name="L786"></a> 786    <strong class="reserved">protected</strong> <strong class="reserved">void</strong> <a href="../R/27844.html" title="Multiple referred from 22 places.">setObject</a>(<a href="../D/6272.html" title="Multiple defined in 7 places.">Object</a> obj) <em class="brace">{</em>
<a id="L787" name="L787"></a> 787        <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>) <em class="brace">{</em>
<a id="L788" name="L788"></a> 788            <em class="comment">// Keep our superclass informed of the current NodeVector</em>
<a id="L789" name="L789"></a> 789            <em class="comment">// ... if we don't the smoketest fails (don't know why).</em>
<a id="L790" name="L790"></a> 790            <strong class="reserved">super</strong>.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(obj);
<a id="L791" name="L791"></a> 791 
<a id="L792" name="L792"></a> 792            <em class="comment">// A copy of the code of what SetVector() would do.</em>
<a id="L793" name="L793"></a> 793            <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> v = (<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a>)obj;
<a id="L794" name="L794"></a> 794            <strong class="reserved">if</strong> (m_cache != <strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L795" name="L795"></a> 795                m_cache.<a href="../S/4889.html#L920" title="Defined at 920 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setVector</a>(v);
<a id="L796" name="L796"></a> 796            <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (v!=<strong class="reserved">null</strong>) <em class="brace">{</em>
<a id="L797" name="L797"></a> 797                m_cache = <strong class="reserved">new</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a>();
<a id="L798" name="L798"></a> 798                m_cache.<a href="../S/4889.html#L920" title="Defined at 920 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">setVector</a>(v);
<a id="L799" name="L799"></a> 799            <em class="brace">}</em>
<a id="L800" name="L800"></a> 800        <em class="brace">}</em> <strong class="reserved">else</strong> <strong class="reserved">if</strong> (obj <strong class="reserved">instanceof</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a>) <em class="brace">{</em>
<a id="L801" name="L801"></a> 801            <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a> = (<a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a>) obj;
<a id="L802" name="L802"></a> 802            m_cache = <a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>;
<a id="L803" name="L803"></a> 803            m_cache.<a href="../S/4889.html#L909" title="Defined at 909 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">increaseUseCount</a>();
<a id="L804" name="L804"></a> 804 
<a id="L805" name="L805"></a> 805            <em class="comment">// Keep our superclass informed of the current NodeVector</em>
<a id="L806" name="L806"></a> 806            <strong class="reserved">super</strong>.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(<a href="../S/2005.html#L328" title="Defined at 328 in src/java/nio/charset/Charset.java.">cache</a>.<a href="../D/23569.html" title="Multiple defined in 4 places.">getVector</a>());
<a id="L807" name="L807"></a> 807        <em class="brace">}</em> <strong class="reserved">else</strong> <em class="brace">{</em>
<a id="L808" name="L808"></a> 808            <strong class="reserved">super</strong>.<a href="../D/33401.html" title="Multiple defined in 31 places.">setObject</a>(obj);
<a id="L809" name="L809"></a> 809        <em class="brace">}</em>
<a id="L810" name="L810"></a> 810 
<a id="L811" name="L811"></a> 811    <em class="brace">}</em>
<a id="L812" name="L812"></a> 812 
<div class="comment">
     Each NodeSequence object has an iterator which is "walked".
     As an iterator is walked one obtains nodes from it.
     As those nodes are obtained they may be cached, making
     the next walking of a copy or clone of the iterator faster.
     This field (m_cache) is a reference to such a cache,
     which is populated as the iterator is walked.
     <p>
     Note that multiple NodeSequence objects may hold a
     reference to the same cache, and also
     (and this is important) the same iterator.
     The iterator and its cache may be shared among
     many NodeSequence objects.
     </p><p>
     If one of the NodeSequence objects walks ahead
     of the others it fills in the cache.
     As the others NodeSequence objects catch up they
     get their values from
     the cache rather than the iterator itself, so
     the iterator is only ever walked once and everyone
     benefits from the cache.
     </p><p>
     At some point the cache may be
     complete due to walking to the end of one of
     the copies of the iterator, and the cache is
     then marked as "complete".
     and the cache will have no more nodes added to it.
     </p><p>
     Its use-count is the number of NodeSequence objects that use it.</p></div>
<a id="L843" name="L843"></a> 843    <strong class="reserved">private</strong> <strong class="reserved">final</strong> <strong class="reserved">static</strong> <strong class="reserved">class</strong> <a href="../R/4052.html" title="Multiple referred from 8 places.">IteratorCache</a> <em class="brace">{</em>
<div class="comment">
         A list of nodes already obtained from the iterator.
         As the iterator is walked the nodes obtained from
         it are appended to this list.
         <p>
         Both an iterator and its corresponding cache can
         be shared by multiple NodeSequence objects.
         </p><p>
         For example, consider three NodeSequence objects
         ns1, ns2 and ns3 doing such sharing, and the
         nodes to be obtaind from the iterator being
         the sequence { 33, 11, 44, 22, 55 }.
         </p><p>
         If ns3.nextNode() is called 3 times the the
         underlying iterator will have walked through
         33, 11, 55 and these three nodes will have been put
         in the cache.
         </p><p>
         If ns2.nextNode() is called 2 times it will return
         33 and 11 from the cache, leaving the iterator alone.
         </p><p>
         If ns1.nextNode() is called 6 times it will return
         33 and 11 from the cache, then get 44, 22, 55 from
         the iterator, and appending 44, 22, 55 to the cache.
         On the sixth call it is found that the iterator is
         exhausted and the cache is marked complete.
         </p><p>
         Should ns2 or ns3 have nextNode() called they will
         know that the cache is complete, and they will
         obtain all subsequent nodes from the cache.
         </p><p>
         Note that the underlying iterator, though shared
         is only ever walked once.</p></div>
<a id="L878" name="L878"></a> 878         <strong class="reserved">private</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> m_vec2;
<a id="L879" name="L879"></a> 879 
<div class="comment">
          true if the associated iterator is exhausted and
          all nodes obtained from it are in the cache.</div>
<a id="L884" name="L884"></a> 884         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> m_isComplete2;
<a id="L885" name="L885"></a> 885 
<a id="L886" name="L886"></a> 886         <strong class="reserved">private</strong> <strong class="reserved">int</strong> m_useCount2;
<a id="L887" name="L887"></a> 887 
<a id="L888" name="L888"></a> 888         IteratorCache() <em class="brace">{</em>
<a id="L889" name="L889"></a> 889             m_vec2 = <strong class="reserved">null</strong>;
<a id="L890" name="L890"></a> 890             m_isComplete2 = <strong class="reserved">false</strong>;
<a id="L891" name="L891"></a> 891             m_useCount2 = 1;
<a id="L892" name="L892"></a> 892             <strong class="reserved">return</strong>;
<a id="L893" name="L893"></a> 893         <em class="brace">}</em>
<a id="L894" name="L894"></a> 894 
<div class="comment">
          Returns count of how many NodeSequence objects share this
          IteratorCache object.</div>
<a id="L899" name="L899"></a> 899         <strong class="reserved">private</strong> <strong class="reserved">int</strong> <a href="../R/30003.html" title="Multiple referred from 8 places.">useCount</a>() <em class="brace">{</em>
<a id="L900" name="L900"></a> 900             <strong class="reserved">return</strong> m_useCount2;
<a id="L901" name="L901"></a> 901         <em class="brace">}</em>
<a id="L902" name="L902"></a> 902 
<div class="comment">
          This method is called when yet another
          NodeSequence object uses, or shares
          this same cache.</div>
<a id="L909" name="L909"></a> 909         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/20490.html" title="Multiple referred from 3 places.">increaseUseCount</a>() <em class="brace">{</em>
<a id="L910" name="L910"></a> 910             <strong class="reserved">if</strong> (m_vec2 != <strong class="reserved">null</strong>)
<a id="L911" name="L911"></a> 911                 m_useCount2++;
<a id="L912" name="L912"></a> 912 
<a id="L913" name="L913"></a> 913         <em class="brace">}</em>
<a id="L914" name="L914"></a> 914 
<div class="comment">
          Sets the NodeVector that holds the
          growing list of nodes as they are appended
          to the cached list.</div>
<a id="L920" name="L920"></a> 920         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/28383.html" title="Multiple referred from 3 places.">setVector</a>(<a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> nv) <em class="brace">{</em>
<a id="L921" name="L921"></a> 921             m_vec2 = nv;
<a id="L922" name="L922"></a> 922             m_useCount2 = 1;
<a id="L923" name="L923"></a> 923         <em class="brace">}</em>
<a id="L924" name="L924"></a> 924 
<div class="comment">
          Get the cached list of nodes obtained from
          the iterator so far.</div>
<a id="L929" name="L929"></a> 929         <strong class="reserved">private</strong> <a href="../S/5836.html#L33" title="Defined at 33 in src/com/sun/org/apache/xml/internal/utils/NodeVector.java.">NodeVector</a> <a href="../R/19784.html" title="Multiple referred from 21 places.">getVector</a>() <em class="brace">{</em>
<a id="L930" name="L930"></a> 930             <strong class="reserved">return</strong> m_vec2;
<a id="L931" name="L931"></a> 931         <em class="brace">}</em>
<a id="L932" name="L932"></a> 932 
<div class="comment">
          Call this method with 'true' if the
          iterator is exhausted and the cached list
          is complete, or no longer growing.</div>
<a id="L938" name="L938"></a> 938         <strong class="reserved">private</strong> <strong class="reserved">void</strong> <a href="../R/26985.html" title="Multiple referred from 2 places.">setCacheComplete</a>(<strong class="reserved">boolean</strong> b) <em class="brace">{</em>
<a id="L939" name="L939"></a> 939             m_isComplete2 = b;
<a id="L940" name="L940"></a> 940 
<a id="L941" name="L941"></a> 941         <em class="brace">}</em>
<a id="L942" name="L942"></a> 942 
<div class="comment">
          Returns true if no cache is complete
          and immutable.</div>
<a id="L947" name="L947"></a> 947         <strong class="reserved">private</strong> <strong class="reserved">boolean</strong> <a href="../R/21274.html" title="Multiple referred from 2 places.">isComplete</a>() <em class="brace">{</em>
<a id="L948" name="L948"></a> 948             <strong class="reserved">return</strong> m_isComplete2;
<a id="L949" name="L949"></a> 949         <em class="brace">}</em>
<a id="L950" name="L950"></a> 950     <em class="brace">}</em>
<a id="L951" name="L951"></a> 951 
<div class="comment">
      Get the cached list of nodes appended with
      values obtained from the iterator as
      a NodeSequence is walked when its
      nextNode() method is called.</div>
<a id="L958" name="L958"></a> 958     <strong class="reserved">protected</strong> <a href="../S/4889.html#L843" title="Defined at 843 in src/com/sun/org/apache/xpath/internal/axes/NodeSequence.java.">IteratorCache</a> <a href="../S/4901.html#L70" title="Referred from 70 in src/com/sun/org/apache/xpath/internal/objects/XNodeSet.java.">getIteratorCache</a>() <em class="brace">{</em>
<a id="L959" name="L959"></a> 959         <strong class="reserved">return</strong> m_cache;
<a id="L960" name="L960"></a> 960     <em class="brace">}</em>
<a id="L961" name="L961"></a> 961 <em class="brace">}</em>
</pre>
<hr>
<div class="comment">
/* [&lt;][&gt;]<a href="#L67">[^]</a><a href="#L958">[v]</a><a href="#TOP">[top]</a>[bottom]<a href="../mains.html">[index]</a><a href="../help.html">[help]</a> */</div>
</body></html>